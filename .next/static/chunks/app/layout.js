/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["app/layout"],{

/***/ "(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Faritra%2FWork%2FFreelance%2F3xBuilds%2Fclubhouse-clone-react%2Fapp%2Flayout.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":
/*!***********************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Faritra%2FWork%2FFreelance%2F3xBuilds%2Fclubhouse-clone-react%2Fapp%2Flayout.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false! ***!
  \***********************************************************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/layout.tsx */ \"(app-pages-browser)/./app/layout.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtZmxpZ2h0LWNsaWVudC1lbnRyeS1sb2FkZXIuanM/bW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGVXNlcnMlMkZhcml0cmElMkZXb3JrJTJGRnJlZWxhbmNlJTJGM3hCdWlsZHMlMkZjbHViaG91c2UtY2xvbmUtcmVhY3QlMkZhcHAlMkZsYXlvdXQudHN4JTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJnNlcnZlcj1mYWxzZSEiLCJtYXBwaW5ncyI6IkFBQUEsMEpBQStHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8/OWMzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9hcml0cmEvV29yay9GcmVlbGFuY2UvM3hCdWlsZHMvY2x1YmhvdXNlLWNsb25lLXJlYWN0L2FwcC9sYXlvdXQudHN4XCIpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Faritra%2FWork%2FFreelance%2F3xBuilds%2Fclubhouse-clone-react%2Fapp%2Flayout.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@100mslive/hms-video-store/dist/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@100mslive/hms-video-store/dist/index.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConnectivityState: function() { return /* binding */ Tn; },\n/* harmony export */   DeviceType: function() { return /* binding */ qs; },\n/* harmony export */   Diagnostics: function() { return /* binding */ Ut; },\n/* harmony export */   DomainCategory: function() { return /* binding */ Ls; },\n/* harmony export */   EventBus: function() { return /* binding */ Kt; },\n/* harmony export */   HLSPlaylistType: function() { return /* binding */ Gs; },\n/* harmony export */   HLSStreamType: function() { return /* binding */ Ws; },\n/* harmony export */   HMSAudioDeviceCategory: function() { return /* binding */ _r; },\n/* harmony export */   HMSAudioMode: function() { return /* binding */ xr; },\n/* harmony export */   HMSAudioPluginType: function() { return /* binding */ Cr; },\n/* harmony export */   HMSLogLevel: function() { return /* binding */ ks; },\n/* harmony export */   HMSMessageType: function() { return /* binding */ So; },\n/* harmony export */   HMSNotificationSeverity: function() { return /* binding */ fs; },\n/* harmony export */   HMSNotificationTypes: function() { return /* binding */ Pr; },\n/* harmony export */   HMSPeerType: function() { return /* binding */ Or; },\n/* harmony export */   HMSPlaylistType: function() { return /* binding */ vs; },\n/* harmony export */   HMSPluginUnsupportedTypes: function() { return /* binding */ Lr; },\n/* harmony export */   HMSReactiveStore: function() { return /* binding */ mt; },\n/* harmony export */   HMSRecordingState: function() { return /* binding */ Fs; },\n/* harmony export */   HMSRoomState: function() { return /* binding */ Er; },\n/* harmony export */   HMSStats: function() { return /* binding */ si; },\n/* harmony export */   HMSTrackExceptionTrackType: function() { return /* binding */ Ds; },\n/* harmony export */   HMSTranscriptionMode: function() { return /* binding */ Ks; },\n/* harmony export */   HMSTranscriptionState: function() { return /* binding */ $s; },\n/* harmony export */   HMSVideoPluginCanvasContextType: function() { return /* binding */ Fr; },\n/* harmony export */   HMSVideoPluginType: function() { return /* binding */ Vr; },\n/* harmony export */   createDefaultStatsStore: function() { return /* binding */ ni; },\n/* harmony export */   createDefaultStoreState: function() { return /* binding */ oi; },\n/* harmony export */   getAudioDeviceCategory: function() { return /* binding */ Nr; },\n/* harmony export */   parsedUserAgent: function() { return /* binding */ Te; },\n/* harmony export */   selectAppData: function() { return /* binding */ uS; },\n/* harmony export */   selectAppDataByPath: function() { return /* binding */ hS; },\n/* harmony export */   selectAudioPlaylist: function() { return /* binding */ Aa; },\n/* harmony export */   selectAudioPlaylistTrackByPeerID: function() { return /* binding */ IS; },\n/* harmony export */   selectAudioTrackByID: function() { return /* binding */ gS; },\n/* harmony export */   selectAudioTrackByPeerID: function() { return /* binding */ on; },\n/* harmony export */   selectAudioTrackVolume: function() { return /* binding */ _a; },\n/* harmony export */   selectAudioVolumeByPeerID: function() { return /* binding */ wS; },\n/* harmony export */   selectAuxiliaryAudioByPeerID: function() { return /* binding */ PS; },\n/* harmony export */   selectAuxiliaryTracksByPeerID: function() { return /* binding */ MS; },\n/* harmony export */   selectAvailableRoleNames: function() { return /* binding */ Um; },\n/* harmony export */   selectBroadcastMessages: function() { return /* binding */ cn; },\n/* harmony export */   selectBroadcastMessagesUnreadCount: function() { return /* binding */ OS; },\n/* harmony export */   selectCameraStreamByPeerID: function() { return /* binding */ vS; },\n/* harmony export */   selectConnectionQualities: function() { return /* binding */ Mm; },\n/* harmony export */   selectConnectionQualityByPeerID: function() { return /* binding */ ES; },\n/* harmony export */   selectDegradedTracks: function() { return /* binding */ Dm; },\n/* harmony export */   selectDevices: function() { return /* binding */ vm; },\n/* harmony export */   selectDidIJoinWithin: function() { return /* binding */ ug; },\n/* harmony export */   selectDominantSpeaker: function() { return /* binding */ bm; },\n/* harmony export */   selectEffectsKey: function() { return /* binding */ Qm; },\n/* harmony export */   selectErrors: function() { return /* binding */ Go; },\n/* harmony export */   selectFullAppData: function() { return /* binding */ zr; },\n/* harmony export */   selectHLSState: function() { return /* binding */ Gm; },\n/* harmony export */   selectHMSBroadcastMessages: function() { return /* binding */ Jo; },\n/* harmony export */   selectHMSMessages: function() { return /* binding */ Dt; },\n/* harmony export */   selectHMSMessagesCount: function() { return /* binding */ wm; },\n/* harmony export */   selectHMSStats: function() { return /* binding */ oc; },\n/* harmony export */   selectHandRaisedPeers: function() { return /* binding */ Zm; },\n/* harmony export */   selectHasPeerHandRaised: function() { return /* binding */ $S; },\n/* harmony export */   selectIsAllowedToPreviewMedia: function() { return /* binding */ tg; },\n/* harmony export */   selectIsAllowedToPublish: function() { return /* binding */ eg; },\n/* harmony export */   selectIsAllowedToSubscribe: function() { return /* binding */ Bm; },\n/* harmony export */   selectIsAudioLocallyMuted: function() { return /* binding */ wa; },\n/* harmony export */   selectIsConnectedToRoom: function() { return /* binding */ Be; },\n/* harmony export */   selectIsEffectsEnabled: function() { return /* binding */ jm; },\n/* harmony export */   selectIsInPreview: function() { return /* binding */ ma; },\n/* harmony export */   selectIsLargeRoom: function() { return /* binding */ qm; },\n/* harmony export */   selectIsLocalAudioEnabled: function() { return /* binding */ Am; },\n/* harmony export */   selectIsLocalAudioPluginPresent: function() { return /* binding */ cg; },\n/* harmony export */   selectIsLocalScreenShared: function() { return /* binding */ Xr; },\n/* harmony export */   selectIsLocalVideoDisplayEnabled: function() { return /* binding */ ha; },\n/* harmony export */   selectIsLocalVideoEnabled: function() { return /* binding */ Yr; },\n/* harmony export */   selectIsLocalVideoPluginPresent: function() { return /* binding */ ng; },\n/* harmony export */   selectIsLocallyMutedByPeerID: function() { return /* binding */ LS; },\n/* harmony export */   selectIsPeerAudioEnabled: function() { return /* binding */ HS; },\n/* harmony export */   selectIsPeerVideoEnabled: function() { return /* binding */ CS; },\n/* harmony export */   selectIsRoleAllowedToPublish: function() { return /* binding */ og; },\n/* harmony export */   selectIsScreenShareLocallyMutedByPeerID: function() { return /* binding */ DS; },\n/* harmony export */   selectIsSomeoneScreenSharing: function() { return /* binding */ Im; },\n/* harmony export */   selectIsTranscriptionAllowedByMode: function() { return /* binding */ jS; },\n/* harmony export */   selectIsTranscriptionEnabled: function() { return /* binding */ xm; },\n/* harmony export */   selectIsVBEnabled: function() { return /* binding */ Jm; },\n/* harmony export */   selectLocalAudioTrackID: function() { return /* binding */ le; },\n/* harmony export */   selectLocalMediaSettings: function() { return /* binding */ ua; },\n/* harmony export */   selectLocalPeer: function() { return /* binding */ re; },\n/* harmony export */   selectLocalPeerID: function() { return /* binding */ Ie; },\n/* harmony export */   selectLocalPeerName: function() { return /* binding */ km; },\n/* harmony export */   selectLocalPeerRole: function() { return /* binding */ ct; },\n/* harmony export */   selectLocalPeerRoleName: function() { return /* binding */ Em; },\n/* harmony export */   selectLocalTrackIDs: function() { return /* binding */ pa; },\n/* harmony export */   selectLocalVideoTrackID: function() { return /* binding */ Z; },\n/* harmony export */   selectMessageByMessageID: function() { return /* binding */ qS; },\n/* harmony export */   selectMessageIDsInOrder: function() { return /* binding */ la; },\n/* harmony export */   selectMessagesByPeerID: function() { return /* binding */ xS; },\n/* harmony export */   selectMessagesByRole: function() { return /* binding */ US; },\n/* harmony export */   selectMessagesMap: function() { return /* binding */ Ai; },\n/* harmony export */   selectMessagesUnreadCountByPeerID: function() { return /* binding */ VS; },\n/* harmony export */   selectMessagesUnreadCountByRole: function() { return /* binding */ BS; },\n/* harmony export */   selectPeerAudioByID: function() { return /* binding */ kS; },\n/* harmony export */   selectPeerByCondition: function() { return /* binding */ dg; },\n/* harmony export */   selectPeerByID: function() { return /* binding */ ee; },\n/* harmony export */   selectPeerCount: function() { return /* binding */ ym; },\n/* harmony export */   selectPeerMetadata: function() { return /* binding */ WS; },\n/* harmony export */   selectPeerName: function() { return /* binding */ KS; },\n/* harmony export */   selectPeerNameByID: function() { return /* binding */ mS; },\n/* harmony export */   selectPeerScreenSharing: function() { return /* binding */ jo; },\n/* harmony export */   selectPeerSharingAudio: function() { return /* binding */ Rm; },\n/* harmony export */   selectPeerSharingAudioPlaylist: function() { return /* binding */ Lm; },\n/* harmony export */   selectPeerSharingVideoPlaylist: function() { return /* binding */ Cm; },\n/* harmony export */   selectPeerTypeByID: function() { return /* binding */ SS; },\n/* harmony export */   selectPeers: function() { return /* binding */ ke; },\n/* harmony export */   selectPeersByCondition: function() { return /* binding */ lg; },\n/* harmony export */   selectPeersByRole: function() { return /* binding */ FS; },\n/* harmony export */   selectPeersByRoles: function() { return /* binding */ GS; },\n/* harmony export */   selectPeersMap: function() { return /* binding */ z; },\n/* harmony export */   selectPeersScreenSharing: function() { return /* binding */ Hm; },\n/* harmony export */   selectPeersWithAudioStatus: function() { return /* binding */ XS; },\n/* harmony export */   selectPermissions: function() { return /* binding */ ga; },\n/* harmony export */   selectPollByID: function() { return /* binding */ xa; },\n/* harmony export */   selectPolls: function() { return /* binding */ Xm; },\n/* harmony export */   selectPollsMap: function() { return /* binding */ Ta; },\n/* harmony export */   selectPreviewRole: function() { return /* binding */ Sa; },\n/* harmony export */   selectPreviewRoleName: function() { return /* binding */ Qo; },\n/* harmony export */   selectRTMPState: function() { return /* binding */ Fm; },\n/* harmony export */   selectRecentError: function() { return /* binding */ Tm; },\n/* harmony export */   selectRecordingState: function() { return /* binding */ Vm; },\n/* harmony export */   selectRemotePeers: function() { return /* binding */ Pm; },\n/* harmony export */   selectRoleByRoleName: function() { return /* binding */ pn; },\n/* harmony export */   selectRoleChangeRequest: function() { return /* binding */ ZS; },\n/* harmony export */   selectRolesMap: function() { return /* binding */ Ee; },\n/* harmony export */   selectRoom: function() { return /* binding */ F; },\n/* harmony export */   selectRoomID: function() { return /* binding */ fm; },\n/* harmony export */   selectRoomStartTime: function() { return /* binding */ Km; },\n/* harmony export */   selectRoomStarted: function() { return /* binding */ Om; },\n/* harmony export */   selectRoomState: function() { return /* binding */ se; },\n/* harmony export */   selectScreenAudioTrackByID: function() { return /* binding */ TS; },\n/* harmony export */   selectScreenShareAudioByPeerID: function() { return /* binding */ Da; },\n/* harmony export */   selectScreenShareByPeerID: function() { return /* binding */ RS; },\n/* harmony export */   selectScreenSharesByPeerId: function() { return /* binding */ La; },\n/* harmony export */   selectScreenVideoTrackByID: function() { return /* binding */ fS; },\n/* harmony export */   selectScreenshareAudioVolumeByPeerID: function() { return /* binding */ _S; },\n/* harmony export */   selectSessionId: function() { return /* binding */ $m; },\n/* harmony export */   selectSessionMetadata: function() { return /* binding */ Ym; },\n/* harmony export */   selectSessionStore: function() { return /* binding */ pS; },\n/* harmony export */   selectSimulcastLayerByTrack: function() { return /* binding */ NS; },\n/* harmony export */   selectSpeakers: function() { return /* binding */ Wo; },\n/* harmony export */   selectTemplateAppData: function() { return /* binding */ zm; },\n/* harmony export */   selectTrackAudioByID: function() { return /* binding */ yS; },\n/* harmony export */   selectTrackByID: function() { return /* binding */ Ii; },\n/* harmony export */   selectTracksMap: function() { return /* binding */ N; },\n/* harmony export */   selectTranscriptionsState: function() { return /* binding */ Wm; },\n/* harmony export */   selectUnreadHMSBroadcastMessagesCount: function() { return /* binding */ Nm; },\n/* harmony export */   selectUnreadHMSMessagesCount: function() { return /* binding */ _m; },\n/* harmony export */   selectVideoPlaylist: function() { return /* binding */ Ia; },\n/* harmony export */   selectVideoPlaylistAudioTrackByPeerID: function() { return /* binding */ AS; },\n/* harmony export */   selectVideoPlaylistVideoTrackByPeerID: function() { return /* binding */ bS; },\n/* harmony export */   selectVideoTrackByID: function() { return /* binding */ Ha; },\n/* harmony export */   selectVideoTrackByPeerID: function() { return /* binding */ an; },\n/* harmony export */   selectWhiteboard: function() { return /* binding */ eS; },\n/* harmony export */   selectWhiteboards: function() { return /* binding */ zo; },\n/* harmony export */   simulcastMapping: function() { return /* binding */ We; }\n/* harmony export */ });\n/* harmony import */ var reselect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! reselect */ \"(app-pages-browser)/./node_modules/reselect/es/index.js\");\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ua-parser-js */ \"(app-pages-browser)/./node_modules/ua-parser-js/src/ua-parser.js\");\n/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js\");\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash.isequal */ \"(app-pages-browser)/./node_modules/lodash.isequal/index.js\");\n/* harmony import */ var lodash_isequal__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash_isequal__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var webrtc_adapter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! webrtc-adapter */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/adapter_core.js\");\n/* harmony import */ var eventemitter2__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! eventemitter2 */ \"(app-pages-browser)/./node_modules/eventemitter2/lib/eventemitter2.js\");\n/* harmony import */ var eventemitter2__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(eventemitter2__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! immer */ \"(app-pages-browser)/./node_modules/immer/dist/immer.esm.mjs\");\n/* harmony import */ var zustand_shallow__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zustand/shallow */ \"(app-pages-browser)/./node_modules/zustand/esm/shallow.js\");\n/* harmony import */ var zustand_vanilla__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zustand/vanilla */ \"(app-pages-browser)/./node_modules/zustand/esm/vanilla.js\");\n/* harmony import */ var sdp_transform__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sdp-transform */ \"(app-pages-browser)/./node_modules/sdp-transform/lib/index.js\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\nvar co=Object.defineProperty,lo=Object.defineProperties;var uo=Object.getOwnPropertyDescriptors;var ai=Object.getOwnPropertySymbols,po=Object.getPrototypeOf,gs=Object.prototype.hasOwnProperty,Ts=Object.prototype.propertyIsEnumerable,ho=Reflect.get;var Ss=(a,e,t)=>e in a?co(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,m=(a,e)=>{for(var t in e||(e={}))gs.call(e,t)&&Ss(a,t,e[t]);if(ai)for(var t of ai(e))Ts.call(e,t)&&Ss(a,t,e[t]);return a},M=(a,e)=>lo(a,uo(e));var kr=(a,e)=>{var t={};for(var i in a)gs.call(a,i)&&e.indexOf(i)<0&&(t[i]=a[i]);if(a!=null&&ai)for(var i of ai(a))e.indexOf(i)<0&&Ts.call(a,i)&&(t[i]=a[i]);return t};var mo=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports);var ne=(a,e,t)=>ho(po(a),t,e);var c=(a,e,t)=>new Promise((i,r)=>{var s=d=>{try{n(t.next(d))}catch(u){r(u)}},o=d=>{try{n(t.throw(d))}catch(u){r(u)}},n=d=>d.done?i(d.value):Promise.resolve(d.value).then(s,o);n((t=t.apply(a,e)).next())});var Ir=mo((Jc,Eo)=>{Eo.exports={version:\"0.12.36\",license:\"MIT\",repository:{type:\"git\",url:\"https://github.com/100mslive/web-sdks.git\",directory:\"packages/hms-video-store\"},main:\"dist/index.cjs.js\",module:\"dist/index.js\",typings:\"dist/index.d.ts\",files:[\"dist\",\"src\"],engines:{node:\">=12\"},exports:{\".\":{require:\"./dist/index.cjs.js\",import:\"./dist/index.js\",default:\"./dist/index.js\"}},sideEffects:!1,scripts:{prestart:\"rm -rf dist && yarn types:build\",start:'concurrently \"yarn dev\" \"yarn types\"',dev:\"node ../../scripts/dev\",\"build:only\":\"node ../../scripts/build\",build:\"yarn build:only && yarn types:build\",types:\"tsc -w\",\"types:build\":\"tsc -p tsconfig.json\",format:\"prettier --write src/**/*.ts\",test:\"jest --maxWorkers=1\",\"test:watch\":\"jest --watch\",\"test:coverage\":\"jest --coverage\",lint:\"eslint -c ../../.eslintrc .\",\"lint:fix\":\"yarn lint --fix\",prepare:\"yarn build\",size:\"size-limit\",analyze:\"size-limit --why\",docs:\"rm -rf ./docs && typedoc && rm -f ./docs/README.md && mkdir ./docs/home &&mv ./docs/modules.md ./docs/home/content.md && node ../../scripts/docs-store && npx prettier --write './docs/**/*'\"},name:\"@100mslive/hms-video-store\",author:\"100ms\",dependencies:{eventemitter2:\"^6.4.9\",immer:\"^9.0.6\",\"lodash.isequal\":\"^4.5.0\",reselect:\"4.0.0\",\"sdp-transform\":\"^2.14.1\",\"ua-parser-js\":\"^1.0.1\",uuid:\"^8.3.2\",\"webrtc-adapter\":\"^8.0.0\",zustand:\"3.5.7\"},devDependencies:{\"@types/dom-screen-wake-lock\":\"^1.0.1\",\"@types/lodash.isequal\":\"^4.5.8\",\"@types/sdp-transform\":\"^2.4.4\",\"@types/ua-parser-js\":\"^0.7.36\",\"@types/uuid\":\"^8.3.0\",\"jest-canvas-mock\":\"^2.3.1\",\"jsdom-worker\":\"^0.3.0\",tslib:\"^2.2.0\"},description:\"@100mslive Core SDK which abstracts the complexities of webRTC while providing a reactive store for data management with a unidirectional data flow\",keywords:[\"video\",\"webrtc\",\"conferencing\",\"100ms\"],gitHead:\"777fbe43235a3488b310cd0a390a7e36150f6229\"}});var Er=(n=>(n.Disconnected=\"Disconnected\",n.Preview=\"Preview\",n.Connecting=\"Connecting\",n.Connected=\"Connected\",n.Reconnecting=\"Reconnecting\",n.Disconnecting=\"Disconnecting\",n.Failed=\"Failed\",n))(Er||{});var oi=()=>({room:{id:\"\",isConnected:!1,name:\"\",peers:[],localPeer:\"\",roomState:\"Disconnected\",recording:{browser:{running:!1},server:{running:!1},hls:{running:!1}},rtmp:{running:!1},hls:{running:!1,variants:[]},sessionId:\"\"},peers:{},tracks:{},playlist:{audio:{list:{},selection:{id:\"\",hasPrevious:!1,hasNext:!1},progress:0,volume:0,currentTime:0,playbackRate:1},video:{list:{},selection:{id:\"\",hasPrevious:!1,hasNext:!1},progress:0,volume:0,currentTime:0,playbackRate:1}},messages:{byID:{},allIDs:[]},speakers:{},connectionQualities:{},settings:{audioInputDeviceId:\"\",audioOutputDeviceId:\"\",videoInputDeviceId:\"\"},devices:{audioInput:[],audioOutput:[],videoInput:[]},roles:{},roleChangeRequests:[],errors:[],sessionStore:{},templateAppData:{},polls:{},whiteboards:{},hideLocalPeer:!1}),ni=()=>({peerStats:{},remoteTrackStats:{},localTrackStats:{},localPeer:{id:\"\"}});var So=(e=>(e.CHAT=\"chat\",e))(So||{});var fs=(t=>(t.INFO=\"info\",t.ERROR=\"error\",t))(fs||{}),Pr=(w=>(w.PEER_JOINED=\"PEER_JOINED\",w.PEER_LEFT=\"PEER_LEFT\",w.PEER_LIST=\"PEER_LIST\",w.NEW_MESSAGE=\"NEW_MESSAGE\",w.ERROR=\"ERROR\",w.RECONNECTING=\"RECONNECTING\",w.RECONNECTED=\"RECONNECTED\",w.TRACK_ADDED=\"TRACK_ADDED\",w.TRACK_REMOVED=\"TRACK_REMOVED\",w.TRACK_MUTED=\"TRACK_MUTED\",w.TRACK_UNMUTED=\"TRACK_UNMUTED\",w.TRACK_DEGRADED=\"TRACK_DEGRADED\",w.TRACK_RESTORED=\"TRACK_RESTORED\",w.TRACK_DESCRIPTION_CHANGED=\"TRACK_DESCRIPTION_CHANGED\",w.ROLE_UPDATED=\"ROLE_UPDATED\",w.CHANGE_TRACK_STATE_REQUEST=\"CHANGE_TRACK_STATE_REQUEST\",w.CHANGE_MULTI_TRACK_STATE_REQUEST=\"CHANGE_MULTI_TRACK_STATE_REQUEST\",w.ROOM_ENDED=\"ROOM_ENDED\",w.REMOVED_FROM_ROOM=\"REMOVED_FROM_ROOM\",w.DEVICE_CHANGE_UPDATE=\"DEVICE_CHANGE_UPDATE\",w.PLAYLIST_TRACK_ENDED=\"PLAYLIST_TRACK_ENDED\",w.NAME_UPDATED=\"NAME_UPDATED\",w.METADATA_UPDATED=\"METADATA_UPDATED\",w.POLL_CREATED=\"POLL_CREATED\",w.POLL_STARTED=\"POLL_STARTED\",w.POLL_STOPPED=\"POLL_STOPPED\",w.POLL_VOTES_UPDATED=\"POLL_VOTES_UPDATED\",w.POLLS_LIST=\"POLLS_LIST\",w.HAND_RAISE_CHANGED=\"HAND_RAISE_CHANGED\",w.TRANSCRIPTION_STATE_UPDATED=\"TRANSCRIPTION_STATE_UPDATED\",w))(Pr||{});var vs=(t=>(t.audio=\"audio\",t.video=\"video\",t))(vs||{});function Fe(a,e){let t,i;if(e)for(let r of e.auxiliaryTracks){let s=a[r];go(s)&&(i=gt(s)?s:i,t=Tt(s)?s:t)}return{video:t,audio:i}}function gt(a){return a&&a.type===\"audio\"}function Tt(a){return a&&a.type===\"video\"}function go(a){return a&&a.source===\"screen\"}function ci(a){return a&&a.source===\"audioplaylist\"}function ft(a){return a&&a.source===\"videoplaylist\"}function Ms(a){return a?!!(a!=null&&a.degraded):!1}function ze(a,e){return e&&a.tracks[e]?a.tracks[e].enabled:!1}function ys(a,e){return e&&a.tracks[e]?a.tracks[e].displayEnabled:!1}function vt(a){var r;let e=!1,t=!1,i=!1;return(r=a==null?void 0:a.publishParams)!=null&&r.allowed&&(e=a.publishParams.allowed.includes(\"video\"),t=a.publishParams.allowed.includes(\"audio\"),i=a.publishParams.allowed.includes(\"screen\")),{video:e,audio:t,screen:i}}var ks=(d=>(d[d.VERBOSE=0]=\"VERBOSE\",d[d.DEBUG=1]=\"DEBUG\",d[d.INFO=2]=\"INFO\",d[d.WARN=3]=\"WARN\",d[d.TIME=4]=\"TIME\",d[d.TIMEEND=5]=\"TIMEEND\",d[d.ERROR=6]=\"ERROR\",d[d.NONE=7]=\"NONE\",d))(ks||{}),To=typeof window!=\"undefined\"&&typeof window.expect!=\"undefined\",l=class{static v(e,...t){this.log(0,e,...t)}static d(e,...t){this.log(1,e,...t)}static i(e,...t){this.log(2,e,...t)}static w(e,...t){this.log(3,e,...t)}static e(e,...t){this.log(6,e,...t)}static time(e){this.log(4,\"[HMSPerformanceTiming]\",e)}static timeEnd(e){this.log(5,\"[HMSPerformanceTiming]\",e,e)}static cleanup(){performance.clearMarks(),performance.clearMeasures()}static log(e,t,...i){if(!(this.level.valueOf()>e.valueOf()))switch(e){case 0:{console.log(t,...i);break}case 1:{console.debug(t,...i);break}case 2:{console.info(t,...i);break}case 3:{console.warn(t,...i);break}case 6:{console.error(t,...i);break}case 4:{performance.mark(i[0]);break}case 5:{let r=i[0];try{let s=performance.measure(r,r);this.log(1,t,r,s==null?void 0:s.duration),performance.clearMarks(r),performance.clearMeasures(r)}catch(s){this.log(1,t,r,s)}break}}}};l.level=To?7:0;var Ye=class{constructor(e){this.tracks=new Array;this.nativeStream=e,this.id=e.id}updateId(e){this.id=e}};var Te=new ua_parser_js__WEBPACK_IMPORTED_MODULE_1__.UAParser,U=typeof window!=\"undefined\",Es,Ge=typeof window==\"undefined\"&&!((Es=Te.getBrowser().name)!=null&&Es.toLowerCase().includes(\"electron\"));var vo=()=>!Ge,Tc=vo(),Mt=()=>Te.getDevice().type===\"mobile\",Rs=()=>typeof document!=\"undefined\"&&document.hidden,Hs=()=>{var a;return((a=Te.getOS().name)==null?void 0:a.toLowerCase())===\"ios\"},Ps,bs,Cs=(bs=(Ps=Te.getBrowser())==null?void 0:Ps.name)==null?void 0:bs.toLowerCase().includes(\"safari\"),As,Is,di=((Is=(As=Te.getBrowser())==null?void 0:As.name)==null?void 0:Is.toLowerCase())===\"firefox\";var Ls=(i=>(i.CUSTOM=\"CUSTOM\",i.LOCAL=\"LOCAL\",i.HMS=\"HMS\",i))(Ls||{});function Mo(){if(U&&window){let a=window.location.hostname;return a===\"localhost\"||a===\"127.0.0.1\"?\"LOCAL\":a.includes(\"app.100ms.live\")?\"HMS\":\"CUSTOM\"}return\"CUSTOM\"}var Xe=Mo();var P={WebSocketConnectionErrors:{FAILED_TO_CONNECT:1e3,WEBSOCKET_CONNECTION_LOST:1003,ABNORMAL_CLOSE:1006},APIErrors:{SERVER_ERRORS:2e3,INIT_CONFIG_NOT_AVAILABLE:2002,ENDPOINT_UNREACHABLE:2003,INVALID_TOKEN_FORMAT:2004},TracksErrors:{GENERIC_TRACK:3e3,CANT_ACCESS_CAPTURE_DEVICE:3001,DEVICE_NOT_AVAILABLE:3002,DEVICE_IN_USE:3003,DEVICE_LOST_MIDWAY:3004,NOTHING_TO_RETURN:3005,INVALID_VIDEO_SETTINGS:3006,CODEC_CHANGE_NOT_PERMITTED:3007,AUTOPLAY_ERROR:3008,OVER_CONSTRAINED:3009,NO_AUDIO_DETECTED:3010,SYSTEM_DENIED_PERMISSION:3011,CURRENT_TAB_NOT_SHARED:3012,AUDIO_PLAYBACK_ERROR:3013,SELECTED_DEVICE_MISSING:3014,NO_DATA:3015},WebrtcErrors:{CREATE_OFFER_FAILED:4001,CREATE_ANSWER_FAILED:4002,SET_LOCAL_DESCRIPTION_FAILED:4003,SET_REMOTE_DESCRIPTION_FAILED:4004,ICE_FAILURE:4005,ICE_DISCONNECTED:4006,STATS_FAILED:4007},WebsocketMethodErrors:{SERVER_ERRORS:5e3,ALREADY_JOINED:5001,CANNOT_JOIN_PREVIEW_IN_PROGRESS:5002},GenericErrors:{NOT_CONNECTED:6e3,SIGNALLING:6001,UNKNOWN:6002,NOT_READY:6003,JSON_PARSING_FAILED:6004,TRACK_METADATA_MISSING:6005,RTC_TRACK_MISSING:6006,PEER_METADATA_MISSING:6007,INVALID_ROLE:6008,PREVIEW_IN_PROGRESS:6009,MISSING_MEDIADEVICES:6010,MISSING_RTCPEERCONNECTION:6011,LOCAL_STORAGE_ACCESS_DENIED:6012,VALIDATION_FAILED:6013},PlaylistErrors:{NO_ENTRY_TO_PLAY:8001,NO_ENTRY_IS_PLAYING:8002}};var k=class a extends Error{constructor(t,i,r,s,o,n=!1){super(s);this.code=t;this.name=i;this.message=s;this.description=o;this.isTerminal=n;Object.setPrototypeOf(this,a.prototype),this.action=r.toString()}toAnalyticsProperties(){return{error_name:this.name,error_code:this.code,error_message:this.message,error_description:this.description,action:this.action,is_terminal:this.isTerminal}}addNativeError(t){this.nativeError=t}toString(){var t;return`{\n        code: ${this.code};\n        name: ${this.name};\n        action: ${this.action};\n        message: ${this.message};\n        description: ${this.description};\n        isTerminal: ${this.isTerminal};\n        nativeError: ${(t=this.nativeError)==null?void 0:t.message};\n      }`}};var W=class extends k{constructor(t,i,r,s,o,n){super(t,i,r,s,o,!1);this.code=t;this.name=i;this.message=s;this.description=o;this.trackType=n}toAnalyticsProperties(){return M(m({},super.toAnalyticsProperties()),{track_type:this.trackType})}toString(){var t;return`{\n        code: ${this.code};\n        name: ${this.name};\n        action: ${this.action};\n        message: ${this.message};\n        description: ${this.description};\n        isTerminal: ${this.isTerminal};\n        nativeError: ${(t=this.nativeError)==null?void 0:t.message};\n        trackType: ${this.trackType};\n      }`}};var Ds=(r=>(r.AUDIO=\"audio\",r.VIDEO=\"video\",r.AUDIO_VIDEO=\"audio, video\",r.SCREEN=\"screen\",r))(Ds||{});function br(a){switch(a){case\"join\":return\"JOIN\";case\"offer\":return\"PUBLISH\";case\"answer\":return\"SUBSCRIBE\";case\"track-update\":return\"TRACK\";default:return\"NONE\"}}var yo=[\"join\",\"offer\",\"answer\",\"trickle\",\"on-error\",\"JOIN\"],S={WebSocketConnectionErrors:{FailedToConnect(a,e=\"\"){return new k(P.WebSocketConnectionErrors.FAILED_TO_CONNECT,\"WebsocketFailedToConnect\",a,`[WS]: ${e}`,`[WS]: ${e}`)},WebSocketConnectionLost(a,e=\"\"){return new k(P.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,\"WebSocketConnectionLost\",a,\"Network connection lost\",e)},AbnormalClose(a,e=\"\"){return new k(P.WebSocketConnectionErrors.ABNORMAL_CLOSE,\"WebSocketAbnormalClose\",a,\"Websocket closed abnormally\",e)}},APIErrors:{ServerErrors(a,e,t=\"\",i=!0){return new k(a,\"ServerErrors\",e,`[${e}]: Server error ${t}`,t,i)},EndpointUnreachable(a,e=\"\"){return new k(P.APIErrors.ENDPOINT_UNREACHABLE,\"EndpointUnreachable\",a,`Endpoint is not reachable - ${e}`,e)},InvalidTokenFormat(a,e=\"\"){return new k(P.APIErrors.INVALID_TOKEN_FORMAT,\"InvalidTokenFormat\",a,`Token is not in proper JWT format - ${e}`,e,!0)},InitConfigNotAvailable(a,e=\"\"){return new k(P.APIErrors.INIT_CONFIG_NOT_AVAILABLE,\"InitError\",a,`[INIT]: ${e}`,`[INIT]: ${e}`)}},TracksErrors:{GenericTrack(a,e=\"\"){return new W(P.TracksErrors.GENERIC_TRACK,\"GenericTrack\",a,`[TRACK]: ${e}`,`[TRACK]: ${e}`,\"audio, video\")},CantAccessCaptureDevice(a,e,t=\"\"){return new W(P.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,\"CantAccessCaptureDevice\",a,`User denied permission to access capture device - ${e}`,t,e)},DeviceNotAvailable(a,e,t=\"\"){return new W(P.TracksErrors.DEVICE_NOT_AVAILABLE,\"DeviceNotAvailable\",a,`[TRACK]: Capture device is no longer available - ${e}`,t,e)},DeviceInUse(a,e,t=\"\"){return new W(P.TracksErrors.DEVICE_IN_USE,\"DeviceInUse\",a,`[TRACK]: Capture device is in use by another application - ${e}`,t,e)},DeviceLostMidway(a,e,t=\"\"){return new W(P.TracksErrors.DEVICE_LOST_MIDWAY,\"DeviceLostMidway\",a,`Lost access to capture device midway - ${e}`,t,e)},NothingToReturn(a,e=\"\",t=\"There is no media to return. Please select either video or audio or both.\"){return new W(P.TracksErrors.NOTHING_TO_RETURN,\"NothingToReturn\",a,t,e,\"audio, video\")},InvalidVideoSettings(a,e=\"\"){return new W(P.TracksErrors.INVALID_VIDEO_SETTINGS,\"InvalidVideoSettings\",a,\"Cannot enable simulcast when no video settings are provided\",e,\"video\")},AutoplayBlocked(a,e=\"\"){return new W(P.TracksErrors.AUTOPLAY_ERROR,\"AutoplayBlocked\",a,\"Autoplay blocked because the user didn't interact with the document first\",e,\"audio\")},CodecChangeNotPermitted(a,e=\"\"){return new W(P.TracksErrors.CODEC_CHANGE_NOT_PERMITTED,\"CodecChangeNotPermitted\",a,\"Codec can't be changed mid call.\",e,\"audio, video\")},OverConstrained(a,e,t=\"\"){return new W(P.TracksErrors.OVER_CONSTRAINED,\"OverConstrained\",a,`[TRACK]: Requested constraints cannot be satisfied with the device hardware - ${e}`,t,e)},NoAudioDetected(a,e=\"Please check the mic or use another audio input\"){return new W(P.TracksErrors.NO_AUDIO_DETECTED,\"NoAudioDetected\",a,\"No audio input detected from microphone\",e,\"audio\")},SystemDeniedPermission(a,e,t=\"\"){return new W(P.TracksErrors.SYSTEM_DENIED_PERMISSION,\"SystemDeniedPermission\",a,`Operating System denied permission to access capture device - ${e}`,t,e)},CurrentTabNotShared(){return new W(P.TracksErrors.CURRENT_TAB_NOT_SHARED,\"CurrentTabNotShared\",\"TRACK\",\"The app requires you to share the current tab\",\"You must screen share the current tab in order to proceed\",\"screen\")},AudioPlaybackError(a){return new W(P.TracksErrors.AUDIO_PLAYBACK_ERROR,\"Audio playback error\",\"TRACK\",a,a,\"audio\")},SelectedDeviceMissing(a){return new W(P.TracksErrors.SELECTED_DEVICE_MISSING,\"SelectedDeviceMissing\",\"TRACK\",`Could not detect selected ${a} device`,`Please check connection to the ${a} device`,a)},NoDataInTrack(a){return new W(P.TracksErrors.NO_DATA,\"Track does not have any data\",\"TRACK\",a,\"This could possibily due to another application taking priority over the access to camera or microphone or due to an incoming call\",\"audio, video\")}},WebrtcErrors:{CreateOfferFailed(a,e=\"\"){return new k(P.WebrtcErrors.CREATE_OFFER_FAILED,\"CreateOfferFailed\",a,`[${a.toString()}]: Failed to create offer. `,e)},CreateAnswerFailed(a,e=\"\"){return new k(P.WebrtcErrors.CREATE_ANSWER_FAILED,\"CreateAnswerFailed\",a,`[${a.toString()}]: Failed to create answer. `,e)},SetLocalDescriptionFailed(a,e=\"\"){return new k(P.WebrtcErrors.SET_LOCAL_DESCRIPTION_FAILED,\"SetLocalDescriptionFailed\",a,`[${a.toString()}]: Failed to set offer. `,e)},SetRemoteDescriptionFailed(a,e=\"\"){return new k(P.WebrtcErrors.SET_REMOTE_DESCRIPTION_FAILED,\"SetRemoteDescriptionFailed\",a,`[${a.toString()}]: Failed to set answer. `,e,!0)},ICEFailure(a,e=\"\",t=!1){return new k(P.WebrtcErrors.ICE_FAILURE,\"ICEFailure\",a,`[${a.toString()}]: Ice connection state FAILED`,e,t)},ICEDisconnected(a,e=\"\"){return new k(P.WebrtcErrors.ICE_DISCONNECTED,\"ICEDisconnected\",a,`[${a.toString()}]: Ice connection state DISCONNECTED`,e)},StatsFailed(a,e=\"\"){return new k(P.WebrtcErrors.STATS_FAILED,\"StatsFailed\",a,`Failed to WebRTC get stats - ${e}`,e)}},WebsocketMethodErrors:{ServerErrors(a,e,t){return new k(a,\"ServerErrors\",e,t,t,yo.includes(e))},AlreadyJoined(a,e=\"\"){return new k(P.WebsocketMethodErrors.ALREADY_JOINED,\"AlreadyJoined\",a,\"[JOIN]: You have already joined this room.\",e)},CannotJoinPreviewInProgress(a,e=\"\"){return new k(P.WebsocketMethodErrors.CANNOT_JOIN_PREVIEW_IN_PROGRESS,\"CannotJoinPreviewInProgress\",a,\"[JOIN]: Cannot join if preview is in progress\",e)}},GenericErrors:{NotConnected(a,e=\"\"){return new k(P.GenericErrors.NOT_CONNECTED,\"NotConnected\",a,\"Client is not connected\",e)},Signalling(a,e){return new k(P.GenericErrors.SIGNALLING,\"Signalling\",a,`Unknown signalling error: ${a.toString()} ${e} `,e)},Unknown(a,e){return new k(P.GenericErrors.UNKNOWN,\"Unknown\",a,`Unknown exception: ${e}`,e)},NotReady(a,e=\"\"){return new k(P.GenericErrors.NOT_READY,\"NotReady\",a,e,e)},JsonParsingFailed(a,e,t=\"\"){return new k(P.GenericErrors.JSON_PARSING_FAILED,\"JsonParsingFailed\",a,`Failed to parse JSON message - ${e}`,t)},TrackMetadataMissing(a,e=\"\"){return new k(P.GenericErrors.TRACK_METADATA_MISSING,\"TrackMetadataMissing\",a,\"Track Metadata Missing\",e)},RTCTrackMissing(a,e=\"\"){return new k(P.GenericErrors.RTC_TRACK_MISSING,\"RTCTrackMissing\",a,\"RTC Track missing\",e)},PeerMetadataMissing(a,e=\"\"){return new k(P.GenericErrors.PEER_METADATA_MISSING,\"PeerMetadataMissing\",a,\"Peer Metadata Missing\",e)},ValidationFailed(a,e){return new k(P.GenericErrors.VALIDATION_FAILED,\"ValidationFailed\",\"VALIDATION\",a,e?JSON.stringify(e):\"\")},InvalidRole(a,e){return new k(P.GenericErrors.INVALID_ROLE,\"InvalidRole\",a,\"Invalid role. Join with valid role\",e,!0)},PreviewAlreadyInProgress(a,e=\"\"){return new k(P.GenericErrors.PREVIEW_IN_PROGRESS,\"PreviewAlreadyInProgress\",a,\"[Preview]: Cannot join if preview is in progress\",e)},LocalStorageAccessDenied(a=\"Access to localStorage has been denied\"){return new k(P.GenericErrors.LOCAL_STORAGE_ACCESS_DENIED,\"LocalStorageAccessDenied\",\"NONE\",\"LocalStorageAccessDenied\",a)},MissingMediaDevices(){return new k(P.GenericErrors.MISSING_MEDIADEVICES,\"MissingMediaDevices\",\"JOIN\",\"navigator.mediaDevices is undefined. 100ms SDK won't work on this website as WebRTC is not supported on HTTP endpoints(missing navigator.mediaDevices). Please ensure you're using the SDK either on localhost or a valid HTTPS endpoint.\",\"\",!0)},MissingRTCPeerConnection(){return new k(P.GenericErrors.MISSING_RTCPEERCONNECTION,\"MissingRTCPeerConnection\",\"JOIN\",\"RTCPeerConnection which is a core requirement for WebRTC call was not found, this could be due to an unsupported browser or browser extensions blocking WebRTC\",\"\",!0)}},MediaPluginErrors:{PlatformNotSupported(a,e=\"\"){return new k(7001,\"PlatformNotSupported\",a,\"Check HMS Docs to see the list of supported platforms\",e)},InitFailed(a,e=\"\"){return new k(7002,\"InitFailed\",a,\"Plugin init failed\",e)},ProcessingFailed(a,e=\"\"){return new k(7003,\"ProcessingFailed\",a,\"Plugin processing failed\",e)},AddAlreadyInProgress(a,e=\"\"){return new k(7004,\"AddAlreadyInProgress\",a,\"Plugin add already in progress\",e)},DeviceNotSupported(a,e=\"\"){return new k(7005,\"DeviceNotSupported\",a,\"Check HMS Docs to see the list of supported devices\",e)}},PlaylistErrors:{NoEntryToPlay(a,e){return new k(P.PlaylistErrors.NO_ENTRY_TO_PLAY,\"NoEntryToPlay\",a,\"Reached end of playlist\",e)},NoEntryPlaying(a,e){return new k(P.PlaylistErrors.NO_ENTRY_IS_PLAYING,\"NoEntryIsPlaying\",a,\"No entry is playing at this time\",e)}}};var Ar=class{constructor(){this.valuesMap=new Map}getItem(e){return this.valuesMap.has(e)?String(this.valuesMap.get(e)):null}setItem(e,t){this.valuesMap.set(e,t)}removeItem(e){this.valuesMap.delete(e)}clear(){this.valuesMap.clear()}key(e){if(arguments.length===0)throw new TypeError(\"Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.\");return Array.from(this.valuesMap.keys())[e]}get length(){return this.valuesMap.size}},ws=()=>{try{U&&!localStorage&&(window.localStorage=new Ar)}catch(a){l.e(\"Error initialising localStorage\",S.GenericErrors.LocalStorageAccessDenied())}};var fe=class{constructor(e){this.key=e;this.storage=null}getStorage(){try{return U&&!this.storage&&(ws(),this.storage=window.localStorage),this.storage}catch(e){return l.e(\"Error initialising localStorage\",S.GenericErrors.LocalStorageAccessDenied()),null}}get(){var i;let e=(i=this.getStorage())==null?void 0:i.getItem(this.key);return e?JSON.parse(e):void 0}set(e){var i;let t=JSON.stringify(e);(i=this.getStorage())==null||i.setItem(this.key,t)}clear(){var e;(e=this.getStorage())==null||e.removeItem(this.key)}};var li=()=>{let a,e=new fe(\"hms-analytics-deviceId\"),t=e.get();return t?a=t:(a=(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),e.set(a)),a};var _s=\"[VALIDATIONS]\";function he(a){return a!=null}var yt=()=>{if(!he(RTCPeerConnection)){let a=S.GenericErrors.MissingRTCPeerConnection();throw l.e(_s,a),a}},kt=()=>{if(!he(navigator.mediaDevices)){let a=S.GenericErrors.MissingMediaDevices();throw l.e(_s,a),a}},Ns=a=>{if(!a.getPublishParams())throw S.GenericErrors.NotConnected(\"VALIDATION\",\"call addTrack after preview or join is successful\")};var Os=Ir().version;function Et(a=\"prod\",e){let t=\"web\",i=Xe!==\"LOCAL\"&&a===\"prod\"?\"prod\":\"debug\";if(Ge)return xs({os:\"web_nodejs\",os_version:process.version,sdk:t,sdk_version:Os,env:i,domain:Xe,is_prebuilt:!!(e!=null&&e.isPrebuilt),framework:\"node\",framework_version:process.version,framework_sdk_version:e==null?void 0:e.sdkVersion});let r=Te.getOS(),s=Te.getDevice(),o=Te.getBrowser(),n=Rr(`web_${r.name}`),d=r.version||\"\",u=Rr(`${o.name}_${o.version}`),p=u;return s.type&&(p=`${Rr(`${s.vendor}_${s.type}`)}/${u}`),xs({os:n,os_version:d,sdk:t,sdk_version:Os,device_model:p,env:i,domain:Xe,is_prebuilt:!!(e!=null&&e.isPrebuilt),framework:e==null?void 0:e.type,framework_version:e==null?void 0:e.version,framework_sdk_version:e==null?void 0:e.sdkVersion})}function Rr(a){return a.replace(/ /g,\"_\")}var xs=(a,e=\",\")=>Object.keys(a).filter(t=>he(a[t])).map(t=>`${t}:${a[t]}`).join(e);var C=class{constructor({name:e,level:t,properties:i,includesPII:r,timestamp:s}){this.metadata={peer:{},userAgent:Et()};this.name=e,this.level=t,this.includesPII=r||!1,this.properties=i||{},this.timestamp=s||new Date().getTime(),this.event_id=(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),this.device_id=li()}toSignalParams(){return{name:this.name,info:M(m({},this.properties),{timestamp:this.timestamp,domain:Xe}),timestamp:new Date().getTime()}}};var y=class{static connect(e,t,i=new Date,r=new Date,s){let o=this.eventNameFor(\"connect\",e===void 0),n=e?2:1,d=this.getPropertiesWithError(M(m({},t),{[this.KEY_REQUESTED_AT]:i==null?void 0:i.getTime(),[this.KEY_RESPONDED_AT]:r==null?void 0:r.getTime(),endpoint:s}),e);return new C({name:o,level:n,properties:d})}static disconnect(e,t){let i=\"disconnected\",r=e?2:1,s=this.getPropertiesWithError(t,e);return new C({name:i,level:r,properties:s})}static preview(i){var r=i,{error:e}=r,t=kr(r,[\"error\"]);let s=this.eventNameFor(\"preview\",e===void 0),o=e?2:1,n=this.getPropertiesWithError(t,e);return new C({name:s,level:o,properties:n})}static join(i){var r=i,{error:e}=r,t=kr(r,[\"error\"]);let s=this.eventNameFor(\"join\",e===void 0),o=e?2:1,n=this.getPropertiesWithError(M(m({},t),{is_preview_called:!!t.is_preview_called}),e);return new C({name:s,level:o,properties:n})}static publish({devices:e,settings:t,error:i}){let r=this.eventNameFor(\"publish\",i===void 0),s=i?2:1,o=this.getPropertiesWithError({devices:e,audio:t==null?void 0:t.audio,video:t==null?void 0:t.video},i);return new C({name:r,level:s,properties:o})}static hlsPlayerError(e){return new C({name:\"hlsPlayerError\",level:2,properties:this.getErrorProperties(e)})}static subscribeFail(e){let t=this.eventNameFor(\"subscribe\",!1),i=2,r=this.getErrorProperties(e);return new C({name:t,level:i,properties:r})}static leave(){return new C({name:\"leave\",level:1})}static autoplayError(){return new C({name:\"autoplayError\",level:2})}static audioPlaybackError(e){return new C({name:\"audioPlaybackError\",level:2,properties:this.getErrorProperties(e)})}static audioRecovered(e){return new C({name:\"audioRecovered\",level:1,properties:{message:e}})}static permissionChange(e,t){return new C({name:\"permissionChanged\",level:1,properties:{message:`Perrmission for ${e} changed to ${t}`}})}static deviceChange({isUserSelection:e,selection:t,type:i,devices:r,error:s}){let o=this.eventNameFor(s?\"publish\":`device.${i}`,s===void 0),n=s?2:1,d=this.getPropertiesWithError({selection:t,devices:r,isUserSelection:e},s);return new C({name:o,level:n,properties:d})}static performance(e){let t=\"perf.stats\",i=1,r=e.toAnalyticsProperties();return new C({name:t,level:i,properties:r})}static rtcStats(e){let t=\"rtc.stats\",i=1,r=e.toAnalyticsProperties();return new C({name:t,level:i,properties:r})}static rtcStatsFailed(e){let t=\"rtc.stats.failed\",i=2;return new C({name:t,level:i,properties:this.getErrorProperties(e)})}static degradationStats(e,t){let i=\"video.degradation.stats\",r=1,s={degradedAt:e.degradedAt,trackId:e.trackId};if(!t&&e.degradedAt instanceof Date){let o=new Date,n=o.valueOf()-e.degradedAt.valueOf();s=M(m({},s),{duration:n,restoredAt:o})}return new C({name:i,level:r,properties:s})}static audioDetectionFail(e,t){let i=this.getPropertiesWithError({device:t},e),r=2,s=\"audiopresence.failed\";return new C({name:s,level:r,properties:i})}static previewNetworkQuality(e){return new C({name:\"perf.networkquality.preview\",level:e.error?2:1,properties:e})}static publishStats(e){return new C({name:\"publisher.stats\",level:1,properties:e})}static subscribeStats(e){return new C({name:\"subscriber.stats\",level:1,properties:e})}static getKrispUsage(e){return new C({name:\"krisp.usage\",level:1,properties:{duration:e}})}static krispStart(){return new C({name:\"krisp.start\",level:1})}static krispStop(){return new C({name:\"krisp.stop\",level:1})}static interruption({started:e,type:t,reason:i,deviceInfo:r}){return new C({name:`${e?\"interruption.start\":\"interruption.stop\"}`,level:1,properties:m({reason:i,type:t},r)})}static eventNameFor(e,t){return`${e}.${t?\"success\":\"failed\"}`}static getPropertiesWithError(e,t){let i=this.getErrorProperties(t);return e=m(m({},i),e),e}static getErrorProperties(e){return e?e instanceof k?e.toAnalyticsProperties():{error_name:e.name,error_message:e.message,error_description:e.cause}:{}}};y.KEY_REQUESTED_AT=\"requested_at\",y.KEY_RESPONDED_AT=\"responded_at\";var ui=a=>a?`{\n    trackId: ${a.id};\n    kind: ${a.kind};\n    enabled: ${a.enabled};\n    muted: ${a.muted};\n    readyState: ${a.readyState};\n  }`:\"\";var De=class{constructor(e,t,i){this.logIdentifier=\"\";this.isTrackNotPublishing=()=>this.nativeTrack.readyState===\"ended\"||this.nativeTrack.muted;this.stream=e,this.nativeTrack=t,this.source=i}get enabled(){return this.nativeTrack.enabled}get trackId(){return this.firstTrackId||this.sdpTrackId||this.nativeTrack.id}getMediaTrackSettings(){return this.nativeTrack.getSettings()}setEnabled(e){return c(this,null,function*(){this.nativeTrack.enabled=e})}setSdpTrackId(e){this.sdpTrackId=e}setFirstTrackId(e){this.firstTrackId=e}sendInterruptionEvent({started:e,reason:t}){return y.interruption({started:e,type:this.type,reason:t,deviceInfo:{deviceId:this.nativeTrack.getSettings().deviceId,groupId:this.nativeTrack.getSettings().groupId}})}cleanup(){var e;l.d(\"[HMSTrack]\",\"Stopping track\",this.toString()),(e=this.nativeTrack)==null||e.stop()}toString(){var e;return`{\n      streamId: ${this.stream.id};\n      peerId: ${this.peerId};\n      trackId: ${this.trackId};\n      mid: ${((e=this.transceiver)==null?void 0:e.mid)||\"-\"};\n      logIdentifier: ${this.logIdentifier};\n      source: ${this.source};\n      enabled: ${this.enabled};\n      nativeTrack: ${ui(this.nativeTrack)};\n    }`}};var we=class extends De{constructor(t,i,r){super(t,i,r);this.type=\"audio\";this.audioElement=null;if(i.kind!==\"audio\")throw new Error(\"Expected 'track' kind = 'audio'\")}getVolume(){return this.audioElement?Math.floor(this.audioElement.volume*100):null}setVolume(t){return c(this,null,function*(){if(t<0||t>100)throw Error(\"Please pass a valid number between 0-100\");yield this.subscribeToAudio(t===0?!1:this.enabled),this.audioElement&&(this.audioElement.volume=t/100)})}setAudioElement(t){l.d(\"[HMSAudioTrack]\",this.logIdentifier,\"adding audio element\",`${this}`,t),this.audioElement=t}getAudioElement(){return this.audioElement}getOutputDevice(){return this.outputDevice}cleanup(){super.cleanup(),this.audioElement&&(this.audioElement.srcObject=null,this.audioElement.remove(),this.audioElement=null)}setOutputDevice(t){return c(this,null,function*(){var i;if(!t){l.d(\"[HMSAudioTrack]\",this.logIdentifier,\"device is null\",`${this}`);return}if(!this.audioElement){l.d(\"[HMSAudioTrack]\",this.logIdentifier,\"no audio element to set output\",`${this}`),this.outputDevice=t;return}try{typeof this.audioElement.setSinkId==\"function\"&&(di||(yield(i=this.audioElement)==null?void 0:i.setSinkId(t.deviceId)),this.outputDevice=t)}catch(r){l.d(\"[HMSAudioTrack]\",\"error in setSinkId\",r)}})}subscribeToAudio(t){return c(this,null,function*(){this.stream instanceof Pe&&(yield this.stream.setAudio(t,this.trackId,this.logIdentifier))})}};var Hr=class{constructor(){this.storage=new fe(\"hms-device-selection\");this.remember=!1;this.TAG=\"[HMSDeviceStorage]\"}setDevices(e){this.devices=e}rememberDevices(e){this.remember=e}updateSelection(e,{deviceId:t,groupId:i}){if(!this.devices||!this.remember)return;let r=this.devices[e].find(o=>this.isSame({deviceId:t,groupId:i},o));if(!r){l.w(this.TAG,`Could not find device with deviceId: ${t}, groupId: ${i}`);return}let s=this.storage.get()||{};s[e]=r,this.storage.set(s)}getSelection(){if(this.remember)return this.storage.get()}cleanup(){this.remember=!1,this.devices=void 0}isSame(e,t){return e.deviceId===t.deviceId&&(e.groupId===t.groupId||!e.groupId)}},X=new Hr;var Cr=(t=>(t.TRANSFORM=\"TRANSFORM\",t.ANALYZE=\"ANALYZE\",t))(Cr||{}),Lr=(t=>(t.PLATFORM_NOT_SUPPORTED=\"PLATFORM_NOT_SUPPORTED\",t.DEVICE_NOT_SUPPORTED=\"DEVICE_NOT_SUPPORTED\",t))(Lr||{});var me=class{static failure(e,t){let i=\"mediaPlugin.failed\",r=2,s=m({plugin_name:e},t.toAnalyticsProperties());return new C({name:i,level:r,properties:s})}static audioPluginFailure(e,t,i){let r=\"mediaPlugin.failed\",s=2,o=m({plugin_name:e,sampleRate:t},i.toAnalyticsProperties());return new C({name:r,level:s,properties:o})}static audioPluginStats({pluginName:e,duration:t,loadTime:i,sampleRate:r}){let s=\"mediaPlugin.stats\",o=1,n={plugin_name:e,duration:t,load_time:i,sampleRate:r};return new C({name:s,level:o,properties:n})}static added(e,t){let i=\"mediaPlugin.added\",r=1,s={plugin_name:e,added_at:t};return new C({name:i,level:r,properties:s})}static stats({pluginName:e,duration:t,loadTime:i,avgPreProcessingTime:r,avgProcessingTime:s,inputFrameRate:o,pluginFrameRate:n}){let d=\"mediaPlugin.stats\",u=1,p={plugin_name:e,duration:t,load_time:i,avg_preprocessing_time:r,avg_processing_time:s,input_frame_rate:o,plugin_frame_rate:n};return new C({name:d,level:u,properties:p})}};var pi=class{constructor(e){this.eventBus=e;this.TAG=\"[AudioPluginsAnalytics]\";this.initTime={},this.addedTimestamps={},this.pluginAdded={},this.pluginSampleRate={}}added(e,t){this.pluginAdded[e]=!0,this.addedTimestamps[e]=Date.now(),this.initTime[e]=0,this.pluginSampleRate[e]=t,this.eventBus.analytics.publish(me.added(e,this.addedTimestamps[e]))}removed(e){if(this.pluginAdded[e]){let t={pluginName:e,duration:Math.floor((Date.now()-this.addedTimestamps[e])/1e3),loadTime:this.initTime[e],sampleRate:this.pluginSampleRate[e]};this.eventBus.analytics.publish(me.audioPluginStats(t)),this.clean(e)}}failure(e,t){this.pluginAdded[e]&&(this.eventBus.analytics.publish(me.audioPluginFailure(e,this.pluginSampleRate[e],t)),this.clean(e))}initWithTime(e,t){return c(this,null,function*(){if(this.initTime[e]){l.i(this.TAG,`Plugin Already loaded ${e}, time it took: ${this.initTime[e]}`);return}let i;try{i=yield this.timeInMs(t),l.i(this.TAG,`Time taken for Plugin ${e} initialization : ${i}`)}catch(r){let s=S.MediaPluginErrors.InitFailed(\"AUDIO_PLUGINS\",`failed during initialization of plugin${r.message||r}`);throw l.e(this.TAG,s),this.failure(e,s),s}i&&(this.initTime[e]=i)})}timeInMs(e){return c(this,null,function*(){let t=Date.now();return yield e(),Math.floor(Date.now()-t)})}clean(e){delete this.addedTimestamps[e],delete this.initTime[e],delete this.pluginAdded[e],delete this.pluginSampleRate[e]}};var Pt=class{constructor(e,t,i){this.eventBus=t;this.TAG=\"[AudioPluginsManager]\";this.pluginAddInProgress=!1;this.hmsTrack=e,this.pluginsMap=new Map,this.analytics=new pi(t),this.audioContext=ce.getAudioContext(),this.room=i}getPlugins(){return Array.from(this.pluginsMap.keys())}addPlugin(e){return c(this,null,function*(){var i,r;let t=(i=e.getName)==null?void 0:i.call(e);if(!t){l.w(\"no name provided by the plugin\");return}if(this.pluginAddInProgress){let s=S.MediaPluginErrors.AddAlreadyInProgress(\"AUDIO_PLUGINS\",\"Add Plugin is already in Progress\");throw this.analytics.added(t,this.audioContext.sampleRate),this.analytics.failure(t,s),l.w(\"can't add another plugin when previous add is in progress\"),s}switch(e.getName()){case\"HMSKrispPlugin\":{if(!((r=this.room)!=null&&r.isNoiseCancellationEnabled)){let s=\"Krisp Noise Cancellation is not enabled for this room\";if(this.pluginsMap.size===0)throw Error(s);l.w(this.TAG,s);return}this.eventBus.analytics.publish(y.krispStart());break}default:}this.pluginAddInProgress=!0;try{yield this.addPluginInternal(e)}finally{this.pluginAddInProgress=!1}})}addPluginInternal(e){return c(this,null,function*(){var i,r;let t=(i=e.getName)==null?void 0:i.call(e);if(this.pluginsMap.get(t)){l.w(this.TAG,`plugin - ${t} already added.`);return}yield this.validateAndThrow(t,e),(r=e.setEventBus)==null||r.call(e,this.eventBus);try{this.pluginsMap.size===0?yield this.initAudioNodes():this.prevAudioNode&&this.prevAudioNode.disconnect(),this.analytics.added(t,this.audioContext.sampleRate),yield this.analytics.initWithTime(t,()=>c(this,null,function*(){return e.init()})),this.pluginsMap.set(t,e),yield this.processPlugin(e),yield this.connectToDestination(),yield this.updateProcessedTrack()}catch(s){throw l.e(this.TAG,\"failed to add plugin\",s),s}})}validatePlugin(e){return e.checkSupport(this.audioContext)}validateAndThrow(e,t){return c(this,null,function*(){let i=this.validatePlugin(t);if(i.isSupported)l.i(this.TAG,`plugin is supported,- ${t.getName()}`);else if(this.analytics.added(e,this.audioContext.sampleRate),i.errType===\"PLATFORM_NOT_SUPPORTED\"){let r=S.MediaPluginErrors.PlatformNotSupported(\"AUDIO_PLUGINS\",\"platform not supported, see docs\");throw this.analytics.failure(e,r),yield this.cleanup(),r}else if(i.errType===\"DEVICE_NOT_SUPPORTED\"){let r=S.MediaPluginErrors.DeviceNotSupported(\"AUDIO_PLUGINS\",\"audio device not supported, see docs\");throw this.analytics.failure(e,r),yield this.cleanup(),r}})}removePlugin(e){return c(this,null,function*(){switch(e.getName()){case\"HMSKrispPlugin\":{this.eventBus.analytics.publish(y.krispStop());break}default:break}yield this.removePluginInternal(e),this.pluginsMap.size===0?(yield this.cleanup(),l.i(this.TAG,\"No plugins left, stopping plugins loop\"),yield this.hmsTrack.setProcessedTrack(void 0)):yield this.reprocessPlugins()})}cleanup(){return c(this,null,function*(){var e,t,i;for(let r of this.pluginsMap.values())yield this.removePluginInternal(r);yield this.hmsTrack.setProcessedTrack(void 0),(e=this.sourceNode)==null||e.disconnect(),(t=this.prevAudioNode)==null||t.disconnect(),(i=this.outputTrack)==null||i.stop(),this.sourceNode=void 0,this.destinationNode=void 0,this.prevAudioNode=void 0,this.outputTrack=void 0})}closeContext(){return c(this,null,function*(){this.audioContext=void 0})}reprocessPlugins(){return c(this,null,function*(){if(this.pluginsMap.size===0||!this.sourceNode)return;let e=Array.from(this.pluginsMap.values());yield this.cleanup(),yield this.initAudioNodes();for(let t of e)yield this.addPlugin(t);yield this.updateProcessedTrack()})}initAudioNodes(){return c(this,null,function*(){if(this.audioContext){let e=new MediaStream([this.hmsTrack.nativeTrack]);this.sourceNode=this.audioContext.createMediaStreamSource(e),this.destinationNode||(this.destinationNode=this.audioContext.createMediaStreamDestination(),this.outputTrack=this.destinationNode.stream.getAudioTracks()[0])}})}updateProcessedTrack(){return c(this,null,function*(){try{yield this.hmsTrack.setProcessedTrack(this.outputTrack)}catch(e){throw l.e(this.TAG,\"error in setting processed track\",e),e}})}processPlugin(e){return c(this,null,function*(){try{let t=yield e.processAudioTrack(this.audioContext,this.prevAudioNode||this.sourceNode);this.prevAudioNode&&this.prevAudioNode.connect(t),this.prevAudioNode=t}catch(t){let i=e.getName();l.e(this.TAG,`error in processing plugin ${i}`,t),yield this.removePluginInternal(e)}})}connectToDestination(){return c(this,null,function*(){try{this.prevAudioNode&&this.destinationNode&&this.prevAudioNode.context===this.destinationNode.context&&this.prevAudioNode.connect(this.destinationNode)}catch(e){l.e(this.TAG,\"error in connecting to destination node\",e)}})}removePluginInternal(e){return c(this,null,function*(){var i;let t=(i=e.getName)==null?void 0:i.call(e);if(!this.pluginsMap.get(t)){l.w(this.TAG,`plugin - ${t} not found to remove.`);return}l.i(this.TAG,`removing plugin ${t}`),this.pluginsMap.delete(t),e.stop(),this.analytics.removed(t)})}};function bo(a,e){let t=a.toLowerCase(),i=S.TracksErrors.GenericTrack(\"TRACK\",a);return t.includes(\"device not found\")?i=S.TracksErrors.DeviceNotAvailable(\"TRACK\",e,a):t.includes(\"permission denied\")&&(i=S.TracksErrors.CantAccessCaptureDevice(\"TRACK\",e,a)),i}function Ao(a,e=\"\"){if(webrtc_adapter__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browserDetails.browser===\"chrome\"&&a.name===\"NotAllowedError\"&&a.message.includes(\"denied by system\"))return S.TracksErrors.SystemDeniedPermission(\"TRACK\",e,a.message);if(webrtc_adapter__WEBPACK_IMPORTED_MODULE_4__[\"default\"].browserDetails.browser===\"firefox\"&&a.name===\"NotFoundError\"){let i=S.TracksErrors.SystemDeniedPermission(\"TRACK\",e,a.message);return i.description=`Capture device is either blocked at Operating System level or not available - ${e}`,i}switch(a.name){case\"OverconstrainedError\":return S.TracksErrors.OverConstrained(\"TRACK\",e,a.constraint);case\"NotAllowedError\":return S.TracksErrors.CantAccessCaptureDevice(\"TRACK\",e,a.message);case\"NotFoundError\":return S.TracksErrors.DeviceNotAvailable(\"TRACK\",e,a.message);case\"NotReadableError\":return S.TracksErrors.DeviceInUse(\"TRACK\",e,a.message);case\"TypeError\":return S.TracksErrors.NothingToReturn(\"TRACK\",a.message);default:return bo(a.message,e)}}function _e(a,e){let t=Ao(a,e);return t.addNativeError(a),t}function Dr(a){return c(this,null,function*(){try{let e=a?a.toConstraints():!1;return e&&typeof e==\"object\"&&(a!=null&&a.deviceId)&&(e.deviceId={exact:a.deviceId}),(yield navigator.mediaDevices.getUserMedia({audio:e})).getAudioTracks()[0]}catch(e){throw _e(e,\"audio\")}})}function wr(a){return c(this,null,function*(){try{let e=a?a.toConstraints():!1;return e&&typeof e==\"object\"&&(a!=null&&a.deviceId)&&(e.deviceId={exact:a.deviceId}),(yield navigator.mediaDevices.getUserMedia({video:e})).getVideoTracks()[0]}catch(e){throw _e(e,\"video\")}})}function ve(a){return\"canvas\"in a||a.label===\"MediaStreamAudioDestinationNode\"||a.label===\"\"}var hi=(a,e)=>{if(!navigator.permissions){l.d(\"Permissions API not supported\");return}navigator.permissions.query({name:a}).then(t=>{t.onchange=()=>{e(t.state)}}).catch(t=>{l.e(`${a} not supported`,t.message)})};var Io=32e3;var ce={audioContext:null,getAudioContext(){return this.audioContext||(this.audioContext=di?new AudioContext:new AudioContext({sampleRate:Io})),this.audioContext},resumeContext(){return c(this,null,function*(){try{return yield this.getAudioContext().resume()}catch(a){l.e(\"AudioContext\",a)}})}},_r=(r=>(r.SPEAKERPHONE=\"SPEAKERPHONE\",r.WIRED=\"WIRED\",r.BLUETOOTH=\"BLUETOOTH\",r.EARPIECE=\"EARPIECE\",r))(_r||{}),Nr=a=>{if(!a)return l.w(\"[DeviceManager]:\",\"No device label provided\"),\"SPEAKERPHONE\";let e=a.toLowerCase();return e.includes(\"speakerphone\")?\"SPEAKERPHONE\":e.includes(\"wired\")?\"WIRED\":/airpods|buds|wireless|bluetooth/gi.test(e)?\"BLUETOOTH\":e.includes(\"earpiece\")?\"EARPIECE\":\"SPEAKERPHONE\"};var Ne=class{constructor(e=1/0){this.capacity=e;this.storage=[]}size(){return this.storage.length}toList(){return this.storage.slice(0)}enqueue(e){this.size()===this.capacity&&this.dequeue(),this.storage.push(e)}dequeue(){return this.storage.shift()}aggregate(e){return e(this.storage)}};var Bs=`(function workerSetup() {\n  function ticker() {\n    self.postMessage('tick');\n  }\n  self.onmessage = function (event) {\n    const [data, time] = event.data;\n    switch (data) {\n      case 'start':\n        setTimeout(ticker, time);\n        break;\n      default:\n        break;\n    }\n  };\n})()`;function J(a){if(a<0)throw Error(\"`ms` should be a positive integer\");return new Promise(e=>{setTimeout(e,a)})}function Oe(a){if(a<0)throw Error(\"`ms` should be a positive integer\");if(typeof Worker==\"undefined\")return J(a);let e=new Worker(URL.createObjectURL(new Blob([Bs],{type:\"application/javascript\"})));return e.postMessage([\"start\",a]),new Promise(t=>{e.onmessage=i=>{i.data===\"tick\"&&(t(),e.terminate())}})}function Vs(){if(typeof Worker==\"undefined\")return{sleep:e=>J(e)};let a=new Worker(URL.createObjectURL(new Blob([Bs],{type:\"application/javascript\"})));return{sleep:e=>(a.postMessage([\"start\",e]),new Promise(t=>{a.onmessage=i=>{i.data===\"tick\"&&t()}}))}}function mi(a,e=300){let t;return function(...i){clearTimeout(t),t=void 0;let r=this;t=setTimeout(()=>{a.apply(r,i)},e)}}var Ro=35,Ho=5,Si=class{constructor(e,t,i){this.track=e;this.audioLevelEvent=t;this.silenceEvent=i;this.TAG=\"[TrackAudioLevelMonitor]\";this.audioLevel=0;this.isMonitored=!1;this.interval=100;this.historyInterval=700;this.history=new Ne(this.historyInterval/this.interval);this.detectSilence=()=>c(this,null,function*(){let i=0;for(;this.isMonitored;){if(this.track.enabled)if(this.isSilentThisInstant()){if(i++,i>50){this.silenceEvent.publish({track:this.track});break}}else break;yield J(20)}});try{let r=new MediaStream([this.track.nativeTrack]);this.analyserNode=this.createAnalyserNodeForStream(r);let s=this.analyserNode.frequencyBinCount;this.dataArray=new Uint8Array(s)}catch(r){l.w(this.TAG,\"Unable to initialize AudioContext\",r)}}start(){this.stop(),this.isMonitored=!0,l.d(this.TAG,\"Starting track Monitor\",`${this.track}`),this.loop().then(()=>l.d(this.TAG,\"Stopping track Monitor\",`${this.track}`))}stop(){if(!this.analyserNode){l.d(this.TAG,\"AudioContext not initialized\");return}this.sendAudioLevel(0),this.isMonitored=!1}loop(){return c(this,null,function*(){for(;this.isMonitored;)this.sendAudioLevel(this.getMaxAudioLevelOverPeriod()),yield J(this.interval)})}sendAudioLevel(e=0){if(e=e>Ro?e:0,Math.abs(this.audioLevel-e)>Ho){this.audioLevel=e;let i={track:this.track,audioLevel:this.audioLevel};this.audioLevelEvent.publish(i)}}getMaxAudioLevelOverPeriod(){if(!this.analyserNode){l.d(this.TAG,\"AudioContext not initialized\");return}let e=this.calculateAudioLevel();return e!==void 0&&this.history.enqueue(e),this.history.aggregate(t=>Math.max(...t))}calculateAudioLevel(){if(!this.analyserNode||!this.dataArray){l.d(this.TAG,\"AudioContext not initialized\");return}this.analyserNode.getByteTimeDomainData(this.dataArray);let e=.009,t=e;for(let s of this.dataArray)t=Math.max(t,(s-128)/128);let i=(Math.log(e)-Math.log(t))/Math.log(e);return Math.ceil(Math.min(Math.max(i*100,0),100))}isSilentThisInstant(){if(!this.analyserNode||!this.dataArray){l.d(this.TAG,\"AudioContext not initialized\");return}return this.analyserNode.getByteTimeDomainData(this.dataArray),this.dataArray.every(e=>e===128||e===0)}createAnalyserNodeForStream(e){let t=ce.getAudioContext(),i=t.createMediaStreamSource(e),r=t.createAnalyser();return r.fftSize=2048,i.connect(r),r}};var Or=(t=>(t.SIP=\"sip\",t.REGULAR=\"regular\",t))(Or||{});var Fs=(n=>(n.NONE=\"none\",n.INITIALISED=\"initialised\",n.STARTED=\"started\",n.PAUSED=\"paused\",n.RESUMED=\"resumed\",n.STOPPED=\"stopped\",n.FAILED=\"failed\",n))(Fs||{});var Gs=(t=>(t.DVR=\"dvr\",t.NO_DVR=\"no-dvr\",t))(Gs||{}),Ws=(i=>(i.REGULAR=\"regular\",i.SCREEN=\"screen\",i.COMPOSITE=\"composite\",i))(Ws||{}),$s=(r=>(r.INITIALISED=\"initialised\",r.STARTED=\"started\",r.STOPPED=\"stopped\",r.FAILED=\"failed\",r))($s||{}),Ks=(e=>(e.CAPTION=\"caption\",e))(Ks||{});var We={f:\"high\",h:\"medium\",q:\"low\"};var xr=(t=>(t.VOICE=\"voice\",t.MUSIC=\"music\",t))(xr||{});var qs=(i=>(i.videoInput=\"videoInput\",i.audioInput=\"audioInput\",i.audioOutput=\"audioOutput\",i))(qs||{});var Q=class{constructor(){this._volume=1;this._codec=\"opus\";this._maxBitrate=32;this._deviceId=\"default\";this._audioMode=\"voice\";this._advanced=[{autoGainControl:{exact:!0}},{noiseSuppression:{exact:!0}},{highpassFilter:{exact:!0}},{audioMirroring:{exact:!0}}]}volume(e){if(!(0<=e&&e<=1))throw Error(\"volume can only be in range [0.0, 1.0]\");return this._volume=e,this}codec(e){return this._codec=e,this}maxBitrate(e){if(e&&e<=0)throw Error(\"maxBitrate should be >= 1\");return this._maxBitrate=this._audioMode===\"music\"?320:e,this}deviceId(e){return this._deviceId=e,this}audioMode(e=\"voice\"){return this._audioMode=e,this._audioMode===\"music\"?this._maxBitrate=320:this._maxBitrate=32,this}advanced(e){return this._advanced=e,this}build(){return new $e(this._volume,this._codec,this._maxBitrate,this._deviceId,this._advanced,this._audioMode)}},$e=class{constructor(e,t,i,r,s,o){this.volume=e,this.codec=t,this.maxBitrate=i,this.deviceId=r,this.advanced=s,this.audioMode=o,this.audioMode===\"music\"?this.maxBitrate=320:this.maxBitrate=32}toConstraints(){return{deviceId:this.deviceId,advanced:this.audioMode===\"music\"?[]:this.advanced}}toAnalyticsProperties(){return{audio_bitrate:this.maxBitrate,audio_codec:this.codec}}};var q=class{constructor(){this._width=320;this._height=180;this._codec=\"vp8\";this._maxFramerate=30;this._maxBitrate=150;this._advanced=[]}setWidth(e){return this._width=e,this}setHeight(e){return this._height=e,this}codec(e){return this._codec=e,this}maxFramerate(e){if(e&&e<=0)throw Error(\"maxFramerate should be >= 1\");return this._maxFramerate=e,this}maxBitrate(e,t=!0){if(typeof e==\"number\"&&e<=0)throw Error(\"maxBitrate should be >= 1\");return this._maxBitrate=e,!this._maxBitrate&&t&&(this._maxBitrate=15e4),this}deviceId(e){return this._deviceId=e,this}advanced(e){return this._advanced=e,this}facingMode(e){return this._facingMode=e,this}build(){return new Ke(this._width,this._height,this._codec,this._maxFramerate,this._deviceId,this._advanced,this._maxBitrate,this._facingMode)}},Ke=class{constructor(e,t,i,r,s,o,n,d){this.width=e,this.height=t,this.codec=i,this.maxFramerate=r,this.maxBitrate=n,this.deviceId=s,this.advanced=o,this.facingMode=d}toConstraints(e){let t=\"ideal\";e&&(t=\"max\");let i=this.improviseConstraintsAspect();return{width:{[t]:i.width},height:{[t]:i.height},frameRate:this.maxFramerate,deviceId:this.deviceId,facingMode:this.facingMode}}toAnalyticsProperties(){return{width:this.width,height:this.height,video_bitrate:this.maxBitrate,framerate:this.maxFramerate,video_codec:this.codec,facingMode:this.facingMode}}improviseConstraintsAspect(){return Mt()&&this.height&&this.width&&this.height>this.width?{width:this.height,height:this.width}:{width:this.width,height:this.height}}};var xe=class{constructor(){this._video=new q().build();this._audio=new Q().build();this._screen=new q().build();this._simulcast=!1}video(e){return this._video=e,this}audio(e){return this._audio=e,this}screen(e){return this._screen=e,this}simulcast(e){return this._simulcast=e,this}build(){if(this._audio===null&&this._video===null)throw S.TracksErrors.NothingToReturn(\"TRACK\");if(this._video===null&&this._simulcast)throw S.TracksErrors.InvalidVideoSettings(\"TRACK\",\"Cannot enable simulcast when no video settings are provided\");return new Ze(this._video,this._audio,this._simulcast,this._screen||void 0)}},Ze=class{constructor(e,t,i,r=null){this.video=e,this.audio=t,this.simulcast=i,this.screen=r}toAnalyticsProperties(){let e={audio_enabled:this.audio!==null,video_enabled:this.video!==null};return this.audio&&(e=m(m({},this.audio.toAnalyticsProperties()),e)),this.video&&(e=m(m({},this.video.toAnalyticsProperties()),e)),e}};function Js(a,e){return function(i){return!lodash_isequal__WEBPACK_IMPORTED_MODULE_3___default()(a[i],e[i])}}var de=class a extends we{constructor(t,i,r,s,o=new Q().build(),n){super(t,i,r);this.eventBus=s;this.room=n;this.TAG=\"[HMSLocalAudioTrack]\";this.tracksCreated=new Set;this.isPublished=!1;this.handleVisibilityChange=()=>c(this,null,function*(){if(!this.shouldReacquireTrack()){l.d(this.TAG,`visibiltiy: ${document.visibilityState}`,`${this}`);return}if(document.visibilityState===\"hidden\")this.eventBus.analytics.publish(this.sendInterruptionEvent({started:!0,reason:\"visibility-change\"}));else{l.d(this.TAG,\"On visibile replacing track as it is not publishing\");try{yield this.replaceTrackWith(this.settings)}catch(t){this.eventBus.error.publish(t)}this.eventBus.analytics.publish(this.sendInterruptionEvent({started:!1,reason:\"visibility-change\"}))}});this.trackPermissions=()=>{hi(\"microphone\",t=>{this.eventBus.analytics.publish(y.permissionChange(this.type,t)),t===\"denied\"&&this.eventBus.localAudioEnabled.publish({enabled:!1,track:this})})};this.handleTrackMute=()=>{l.d(this.TAG,\"muted natively\");let t=document.visibilityState===\"hidden\"?\"visibility-change\":\"incoming-call\";this.eventBus.analytics.publish(this.sendInterruptionEvent({started:!0,reason:t})),this.eventBus.localAudioEnabled.publish({enabled:!1,track:this})};this.handleTrackUnmute=()=>c(this,null,function*(){l.d(this.TAG,\"unmuted natively\");let t=document.visibilityState===\"hidden\"?\"visibility-change\":\"incoming-call\";this.eventBus.analytics.publish(this.sendInterruptionEvent({started:!1,reason:t}));try{yield this.setEnabled(this.enabled,!0),this.eventBus.localAudioUnmutedNatively.publish()}catch(i){this.eventBus.error.publish(i)}});this.replaceSenderTrack=()=>c(this,null,function*(){if(!this.transceiver||this.transceiver.direction!==\"sendonly\"){l.d(this.TAG,`transceiver for ${this.trackId} not available or not connected yet`);return}yield this.transceiver.sender.replaceTrack(this.processedTrack||this.nativeTrack)});this.shouldReacquireTrack=()=>ve(this.nativeTrack)||this.isTrackNotPublishing();this.handleSettingsChange=t=>c(this,null,function*(){let i=this.stream,r=Js(t,this.settings);(r(\"maxBitrate\")||r(\"audioMode\"))&&t.maxBitrate&&(yield i.setMaxBitrateAndFramerate(this,t)),(r(\"advanced\")||r(\"audioMode\"))&&(yield this.replaceTrackWith(t))});this.handleDeviceChange=(t,i=!1)=>c(this,null,function*(){if(Js(t,this.settings)(\"deviceId\")){this.manuallySelectedDeviceId=i?this.manuallySelectedDeviceId:t.deviceId,l.d(this.TAG,\"device change\",\"manual selection:\",this.manuallySelectedDeviceId,\"new device:\",t.deviceId),yield this.replaceTrackWith(t);let s=this.nativeTrack.getSettings().groupId;!i&&t.deviceId&&(X.updateSelection(\"audioInput\",{deviceId:t.deviceId,groupId:s}),this.eventBus.deviceChange.publish({isUserSelection:!0,type:\"audioInput\",selection:{deviceId:t.deviceId,groupId:s}}))}});t.tracks.push(this),this.addTrackEventListeners(i),this.trackPermissions(),this.settings=o,o.deviceId!==i.getSettings().deviceId&&!ve(i)&&(this.settings=this.buildNewSettings({deviceId:i.getSettings().deviceId})),this.pluginsManager=new Pt(this,s,n),this.setFirstTrackId(i.id),r===\"regular\"&&document.addEventListener(\"visibilitychange\",this.handleVisibilityChange)}clone(t){let i=this.nativeTrack.clone();t.nativeStream.addTrack(i);let r=new a(t,i,this.source,this.eventBus,this.settings,this.room);return r.peerId=this.peerId,this.pluginsManager.pluginsMap.size>0&&this.pluginsManager.pluginsMap.forEach(s=>{r.addPlugin(s).catch(o=>l.e(this.TAG,\"Plugin add failed while migrating\",s,o))}),r}getManuallySelectedDeviceId(){return this.manuallySelectedDeviceId}resetManuallySelectedDeviceId(){this.manuallySelectedDeviceId=void 0}updateTrack(t){return c(this,null,function*(){t.enabled=this.enabled,yield this.stream.replaceStreamTrack(this.nativeTrack,t),this.nativeTrack=t,yield this.replaceSenderTrack(),!!this.audioLevelMonitor&&this.initAudioLevelMonitor()})}replaceTrackWith(t){return c(this,null,function*(){let i=this.nativeTrack;i==null||i.stop(),this.removeTrackEventListeners(i),this.tracksCreated.forEach(r=>r.stop()),this.tracksCreated.clear();try{let r=yield Dr(t);this.addTrackEventListeners(r),this.tracksCreated.add(r),l.d(this.TAG,\"replaceTrack, Previous track stopped\",i,\"newTrack\",r),yield this.updateTrack(r)}catch(r){let s=yield Dr(this.settings);throw this.addTrackEventListeners(s),this.tracksCreated.add(s),yield this.updateTrack(s),this.isPublished&&this.eventBus.analytics.publish(y.publish({error:r})),r}try{yield this.pluginsManager.reprocessPlugins()}catch(r){this.eventBus.audioPluginFailed.publish(r)}})}setEnabled(t,i=!1){return c(this,null,function*(){t===this.enabled&&!i||(t&&this.shouldReacquireTrack()&&(yield this.replaceTrackWith(this.settings)),yield ne(a.prototype,this,\"setEnabled\").call(this,t),t&&(this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId})),this.eventBus.localAudioEnabled.publish({enabled:t,track:this}))})}isPublishedTrackId(t){return this.publishedTrackId===t}setSettings(t,i=!1){return c(this,null,function*(){let r=this.buildNewSettings(t);if(ve(this.nativeTrack)){this.settings=r;return}yield this.handleDeviceChange(r,i),yield this.handleSettingsChange(r),this.settings=r})}getPlugins(){return this.pluginsManager.getPlugins()}addPlugin(t){return c(this,null,function*(){return this.pluginsManager.addPlugin(t)})}removePlugin(t){return c(this,null,function*(){return this.pluginsManager.removePlugin(t)})}validatePlugin(t){return this.pluginsManager.validatePlugin(t)}setProcessedTrack(t){return c(this,null,function*(){t?t!==this.processedTrack&&(this.processedTrack=t):this.processedTrack=void 0,yield this.replaceSenderTrack()})}initAudioLevelMonitor(){this.audioLevelMonitor&&this.destroyAudioLevelMonitor(),l.d(this.TAG,\"Monitor Audio Level for\",this,this.getMediaTrackSettings().deviceId),this.audioLevelMonitor=new Si(this,this.eventBus.trackAudioLevelUpdate,this.eventBus.localAudioSilence),this.audioLevelMonitor.start(),this.audioLevelMonitor.detectSilence()}destroyAudioLevelMonitor(){var t;(t=this.audioLevelMonitor)==null||t.stop(),this.audioLevelMonitor=void 0}cleanup(){return c(this,null,function*(){var t;ne(a.prototype,this,\"cleanup\").call(this),yield this.pluginsManager.cleanup(),yield this.pluginsManager.closeContext(),this.transceiver=void 0,(t=this.processedTrack)==null||t.stop(),this.tracksCreated.forEach(i=>i.stop()),this.tracksCreated.clear(),this.isPublished=!1,this.destroyAudioLevelMonitor(),document.removeEventListener(\"visibilitychange\",this.handleVisibilityChange)})}getTrackIDBeingSent(){return this.processedTrack?this.processedTrack.id:this.nativeTrack.id}getTrackBeingSent(){return this.processedTrack||this.nativeTrack}addTrackEventListeners(t){t.addEventListener(\"mute\",this.handleTrackMute),t.addEventListener(\"unmute\",this.handleTrackUnmute)}removeTrackEventListeners(t){t.removeEventListener(\"mute\",this.handleTrackMute),t.removeEventListener(\"unmute\",this.handleTrackUnmute)}buildNewSettings(t){let{volume:i,codec:r,maxBitrate:s,deviceId:o,advanced:n,audioMode:d}=m(m({},this.settings),t);return new $e(i,r,s,o,n,d)}};var ie=class a extends we{setEnabled(e){return c(this,null,function*(){e!==this.enabled&&(yield ne(a.prototype,this,\"setEnabled\").call(this,e),yield this.subscribeToAudio(e))})}};var et=class extends De{constructor(t,i,r){super(t,i,r);this.type=\"video\";this.sinkCount=0;this.handleTrackUnmute=()=>{this.getSinks().forEach(t=>this.reTriggerPlay({videoElement:t}))};this.reTriggerPlay=({videoElement:t})=>{setTimeout(()=>{t.play().catch(i=>{l.w(\"[HMSVideoTrack]\",\"failed to play\",i.message)})},0)};if(i.kind!==\"video\")throw new Error(\"Expected 'track' kind = 'video'\")}setVideoHandler(t){this.videoHandler=t}hasSinks(){return this.sinkCount>0}getSinks(){return this.videoHandler.getVideoElements()||[]}attach(t){this.videoHandler.addVideoElement(t)}detach(t){this.videoHandler.removeVideoElement(t)}addSink(t){this.addSinkInternal(t,this.nativeTrack)}removeSink(t){t.srcObject!==null&&(t.srcObject=null,this.reduceSinkCount())}cleanup(){super.cleanup(),this.videoHandler.cleanup()}addSinkInternal(t,i){let r=t.srcObject;if(r!==null&&r instanceof MediaStream){let o=r.getVideoTracks()[0];if((o==null?void 0:o.id)===i.id){if(!o.muted&&o.readyState===\"live\")return;this.reduceSinkCount()}else this.reduceSinkCount()}this.addPropertiesToElement(t);let s=new MediaStream([i]);t.srcObject=s,this.reTriggerPlay({videoElement:t}),this.sinkCount++}reduceSinkCount(){this.sinkCount>0&&this.sinkCount--}addPropertiesToElement(t){Cs||(t.autoplay=!0),t.playsInline=!0,t.muted=!0,t.controls=!1}};var bt={none:-1,low:0,medium:1,high:2},Lo=.5,Qs=(a,e)=>{let t=\"high\",i=e.width>e.height?\"width\":\"height\",r=[...a].sort((o,n)=>bt[o.layer]-bt[n.layer]),s=e[i]*((window==null?void 0:window.devicePixelRatio)||1);for(let o=0;o<r.length;o++){let{resolution:n,layer:d}=r[o],u=n[i];if(s<=u){t=d;break}else{let p=r[o+1],h=p?p.resolution[i]:Number.POSITIVE_INFINITY;if((s-u)/(h-u)<Lo){t=d;break}}}return t};var Ur=class{constructor(){this.TAG=\"[HMSIntersectionObserverWrapper]\";this.listeners=new WeakMap;this.observe=(e,t)=>{var i;this.createObserver(),this.unobserve(e),(i=this.intersectionObserver)==null||i.observe(e),this.listeners.set(e,t)};this.unobserve=e=>{var t;(t=this.intersectionObserver)==null||t.unobserve(e),this.listeners.delete(e)};this.createObserver=()=>{this.isSupported()&&!this.intersectionObserver&&(this.intersectionObserver=new IntersectionObserver(this.handleIntersection))};this.handleIntersection=e=>{var t;for(let i of e)(t=this.listeners.get(i.target))==null||t(i)};this.createObserver()}isSupported(){let e=U&&typeof window.IntersectionObserver!=\"undefined\";return e||l.w(this.TAG,\"IntersectionObserver is not supported, fallback will be used instead\"),e}},zs=new Ur;var Br=class{constructor(){this.TAG=\"[HMSResizeObserverWrapper]\";this.listeners=new WeakMap;this.observe=(e,t,i={box:\"border-box\"})=>{var r;this.createObserver(),this.unobserve(e),(r=this.resizeObserver)==null||r.observe(e,i),this.listeners.set(e,t)};this.unobserve=e=>{var t;(t=this.resizeObserver)==null||t.unobserve(e),this.listeners.delete(e)};this.createObserver=()=>{this.isSupported()&&!this.resizeObserver&&(this.resizeObserver=new ResizeObserver(mi(this.handleResize,300)))};this.handleResize=e=>{var t;for(let i of e)(t=this.listeners.get(i.target))==null||t(i)};this.createObserver()}isSupported(){let e=U&&typeof window.ResizeObserver!=\"undefined\";return e||l.w(this.TAG,\"Resize Observer is not supported\"),e}},Ys=new Br;var tt=class{constructor(e){this.track=e;this.TAG=\"[VideoElementManager]\";this.videoElements=new Set;this.entries=new WeakMap;this.handleIntersection=e=>c(this,null,function*(){let t=getComputedStyle(e.target).visibility===\"visible\";this.track.enabled&&(e.isIntersecting&&t||!document.contains(e.target))?(l.d(this.TAG,\"add sink intersection\",`${this.track}`,this.id),this.entries.set(e.target,e.boundingClientRect),yield this.selectMaxLayer(),yield this.track.addSink(e.target)):(l.d(this.TAG,\"remove sink intersection\",`${this.track}`,this.id),yield this.track.removeSink(e.target))});this.handleResize=e=>c(this,null,function*(){!this.track.enabled||!(this.track instanceof O)||(this.entries.set(e.target,e.contentRect),yield this.selectMaxLayer())});this.cleanup=()=>{this.videoElements.forEach(e=>{var t,i;e.srcObject=null,(t=this.resizeObserver)==null||t.unobserve(e),(i=this.intersectionObserver)==null||i.unobserve(e)}),this.videoElements.clear(),this.resizeObserver=void 0,this.intersectionObserver=void 0};this.init(),this.id=(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])()}updateSinks(e=!1){for(let t of this.videoElements)this.track.enabled?this.track.addSink(t,e):this.track.removeSink(t,e)}addVideoElement(e){return c(this,null,function*(){var t;this.videoElements.has(e)||(this.init(),l.d(this.TAG,`Adding video element for ${this.track}`,this.id),this.videoElements.add(e),this.videoElements.size>=10&&l.w(this.TAG,`${this.track}`,`the track is added to ${this.videoElements.size} video elements, while this may be intentional, it's likely that there is a bug leading to unnecessary creation of video elements in the UI`),(t=this.intersectionObserver)!=null&&t.isSupported()?this.intersectionObserver.observe(e,this.handleIntersection):U&&(this.isElementInViewport(e)?this.track.addSink(e):this.track.removeSink(e)),this.resizeObserver?this.resizeObserver.observe(e,this.handleResize):this.track instanceof O&&(yield this.track.setPreferredLayer(this.track.getPreferredLayer())))})}removeVideoElement(e){var t,i;this.track.removeSink(e),this.videoElements.delete(e),this.entries.delete(e),(t=this.resizeObserver)==null||t.unobserve(e),(i=this.intersectionObserver)==null||i.unobserve(e),l.d(this.TAG,`Removing video element for ${this.track}`)}getVideoElements(){return Array.from(this.videoElements)}init(){U&&(this.resizeObserver=Ys,this.intersectionObserver=zs)}isElementInViewport(e){let t=e.offsetTop,i=e.offsetLeft,r=e.offsetWidth,s=e.offsetHeight,{hidden:o}=e,{opacity:n,display:d}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,i+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+s>window.pageYOffset&&i+r>window.pageXOffset&&!o&&(n!==\"\"?parseFloat(n)>0:!0)&&d!==\"none\"}selectMaxLayer(){return c(this,null,function*(){if(!(this.track instanceof O)||this.videoElements.size===0)return;let e;for(let t of this.videoElements){let i=this.entries.get(t);if(!i)continue;let{width:r,height:s}=i;if(r===0||s===0)continue;let o=Qs(this.track.getSimulcastDefinitions(),{width:r,height:s});e?e=bt[o]>bt[e]?o:e:e=o}e&&(l.d(this.TAG,`selecting max layer ${e} for the track`,`${this.track}`),yield this.track.setPreferredLayer(e))})}};var Vr=(t=>(t.TRANSFORM=\"TRANSFORM\",t.ANALYZE=\"ANALYZE\",t))(Vr||{}),Fr=(t=>(t[\"2D\"]=\"2d\",t.WEBGL=\"webgl\",t.WEBGL2=\"webgl2\",t))(Fr||{});var At=class{constructor(){this.total=0;this.count=0}add(e){this.count++,this.total+=e}getAvg(){return Math.floor(this.total/this.count)}reset(){this.total=0,this.count=0}};var it=class{constructor(e){this.eventBus=e;this.TAG=\"[VideoPluginsAnalytics]\";this.initTime={},this.preProcessingAvgs=new At,this.addedTimestamps={},this.processingAvgs={},this.pluginAdded={},this.pluginInputFrameRate={},this.pluginFrameRate={}}added(e,t,i){this.pluginAdded[e]=!0,this.addedTimestamps[e]=Date.now(),this.initTime[e]=0,this.processingAvgs[e]=new At,t&&(this.pluginInputFrameRate[e]=t,this.pluginFrameRate[e]=i||t),this.eventBus.analytics.publish(me.added(e,this.addedTimestamps[e]))}removed(e){var t;if(this.pluginAdded[e]){let i={pluginName:e,duration:Math.floor((Date.now()-this.addedTimestamps[e])/1e3),loadTime:this.initTime[e],avgPreProcessingTime:this.preProcessingAvgs.getAvg(),avgProcessingTime:(t=this.processingAvgs[e])==null?void 0:t.getAvg(),inputFrameRate:this.pluginInputFrameRate[e],pluginFrameRate:this.pluginFrameRate[e]};this.eventBus.analytics.publish(me.stats(i)),this.clean(e)}}failure(e,t){this.pluginAdded[e]&&(this.eventBus.analytics.publish(me.failure(e,t)),this.clean(e))}initWithTime(e,t){return c(this,null,function*(){if(this.initTime[e]){l.i(this.TAG,`Plugin Already loaded ${e}, time it took: ${this.initTime[e]}`);return}let i;try{i=yield this.timeInMs(t),l.i(this.TAG,`Time taken for Plugin ${e} initialization : ${i}`)}catch(r){let s=S.MediaPluginErrors.InitFailed(\"VIDEO_PLUGINS\",`failed during initialization of plugin${r.message||r}`);throw l.e(this.TAG,s),this.failure(e,s),s}i&&(this.initTime[e]=i)})}preProcessWithTime(e){return c(this,null,function*(){let t=yield this.timeInMs(e);this.preProcessingAvgs.add(t)})}processWithTime(e,t){return c(this,null,function*(){var r;let i;try{i=yield this.timeInMs(t)}catch(s){let o=S.MediaPluginErrors.ProcessingFailed(\"VIDEO_PLUGINS\",`Failed during processing of plugin${s.message||s}`);throw l.e(this.TAG,o),this.failure(e,o),o}i&&((r=this.processingAvgs[e])==null||r.add(i))})}timeInMs(e){return c(this,null,function*(){let t=Date.now();return yield e(),Math.floor(Date.now()-t)})}clean(e){delete this.addedTimestamps[e],delete this.initTime[e],delete this.processingAvgs[e],delete this.pluginAdded[e],delete this.pluginInputFrameRate[e],delete this.pluginFrameRate[e]}};var Xs=24,wo=320,_o=240,It=class{constructor(e,t){this.TAG=\"[VideoPluginsManager]\";this.pluginsLoopRunning=!1;this.pluginsLoopState=\"paused\";this.pluginAddInProgress=!1;this.reusableWorker=Vs();this.hmsTrack=e,this.pluginsMap=new Map,this.pluginNumFramesToSkip={},this.pluginNumFramesSkipped={},this.analytics=new it(t),this.canvases=new Array}getPlugins(){return Array.from(this.pluginsMap.keys())}addPlugin(e,t){return c(this,null,function*(){var i;if(this.pluginAddInProgress){let r=(i=e.getName)==null?void 0:i.call(e);if(!r||r===\"\"){l.w(\"no name provided by the plugin\");return}let s=S.MediaPluginErrors.AddAlreadyInProgress(\"VIDEO_PLUGINS\",\"Add Plugin is already in Progress\");throw this.analytics.failure(r,s),l.w(\"can't add another plugin when previous add is in progress\"),s}this.pluginAddInProgress=!0;try{yield this.addPluginInternal(e,t)}finally{this.pluginAddInProgress=!1}})}addPluginInternal(e,t){return c(this,null,function*(){var o,n;let i=(o=e.getName)==null?void 0:o.call(e);if(!i||i===\"\"){l.w(\"no name provided by the plugin\");return}if(this.pluginsMap.has(i)){l.w(this.TAG,`plugin - ${e.getName()} already added.`);return}let r=this.hmsTrack.getMediaTrackSettings().frameRate||Xs,s=0;t&&t>0?(l.i(this.TAG,`adding plugin ${e.getName()} with framerate ${t}`),t<r&&(s=Math.ceil(r/t)-1),this.analytics.added(i,r,t)):(l.i(this.TAG,`adding plugin ${e.getName()}`),this.analytics.added(i,r)),l.i(this.TAG,\"numFrames to skip processing\",s),this.pluginNumFramesToSkip[i]=s,this.pluginNumFramesSkipped[i]=s,this.validateAndThrow(i,e);try{if(yield this.analytics.initWithTime(i,()=>c(this,null,function*(){return yield e.init()})),this.pluginsMap.set(i,e),this.pluginsMap.size+1>this.canvases.length)for(let d=this.canvases.length;d<=this.pluginsMap.size;d++)this.canvases[d]=document.createElement(\"canvas\");yield this.startPluginsLoop((n=e.getContextType)==null?void 0:n.call(e))}catch(d){throw l.e(this.TAG,\"failed to add plugin\",d),yield this.removePlugin(e),d}})}validatePlugin(e){return e.checkSupport()}validateAndThrow(e,t){let i=this.validatePlugin(t);if(i.isSupported)l.i(this.TAG,`plugin is supported,- ${t.getName()}`);else{let r;switch(i.errType){case\"PLATFORM_NOT_SUPPORTED\":throw r=S.MediaPluginErrors.PlatformNotSupported(\"VIDEO_PLUGINS\",\"platform not supported, see docs\"),this.analytics.failure(e,r),r;case\"DEVICE_NOT_SUPPORTED\":throw r=S.MediaPluginErrors.DeviceNotSupported(\"VIDEO_PLUGINS\",\"video device not supported, see docs\"),this.analytics.failure(e,r),r}}}removePlugin(e){return c(this,null,function*(){let t=e.getName();if(!this.pluginsMap.get(t)){l.w(this.TAG,`plugin - ${t} not found to remove.`);return}l.i(this.TAG,`removing plugin ${t}`),this.removePluginEntry(t),this.pluginsMap.size===0&&(l.i(this.TAG,\"No plugins left, stopping plugins loop\"),yield this.stopPluginsLoop()),e.stop(),this.analytics.removed(t)})}removePluginEntry(e){this.pluginsMap.delete(e),this.pluginNumFramesToSkip[e]&&delete this.pluginNumFramesToSkip[e],this.pluginNumFramesSkipped[e]&&delete this.pluginNumFramesSkipped[e]}waitForRestart(){return c(this,null,function*(){if(!(!this.pluginsLoopRunning||this.pluginsLoopState===\"running\"))for(;this.pluginsLoopState===\"paused\";)yield Oe(100)})}cleanup(){return c(this,null,function*(){var e;for(let t of this.pluginsMap.values())yield this.removePlugin(t);(e=this.outputTrack)==null||e.stop()})}initElementsAndStream(e){this.inputCanvas||(this.inputCanvas=document.createElement(\"canvas\")),this.outputCanvas=document.createElement(\"canvas\"),this.inputVideo||(this.inputVideo=document.createElement(\"video\")),this.inputCanvas.getContext(\"2d\"),this.outputCanvas.getContext(e||\"2d\");let t=this.outputCanvas.captureStream();this.outputTrack=t.getVideoTracks()[0]}startPluginsLoop(e){return c(this,null,function*(){if(!this.pluginsLoopRunning){this.initElementsAndStream(e),this.pluginsLoopRunning=!0;try{yield this.hmsTrack.setProcessedTrack(this.outputTrack)}catch(t){throw this.pluginsLoopRunning=!1,l.e(this.TAG,\"error in setting processed track\",t),t}this.pluginsLoop().then(()=>{l.d(this.TAG,\"processLoop stopped\")})}})}stopPluginsLoop(){return c(this,null,function*(){var e;this.pluginsLoopRunning=!1,yield this.hmsTrack.setProcessedTrack(void 0),this.resetCanvases(),(e=this.outputTrack)==null||e.stop(),this.inputVideo&&(this.inputVideo.srcObject=null,this.inputVideo=void 0)})}pluginsLoop(){return c(this,null,function*(){for(;this.pluginsLoopRunning;){let e=this.hmsTrack.getMediaTrackSettings().frameRate||Xs,t=Math.floor(1e3/e);if(!this.hmsTrack.enabled||this.hmsTrack.nativeTrack.readyState===\"ended\"){this.pluginsLoopState===\"running\"&&this.resetCanvases(),this.pluginsLoopState=\"paused\",yield this.reusableWorker.sleep(t);continue}let i=0;try{yield this.analytics.preProcessWithTime(()=>c(this,null,function*(){return yield this.doPreProcessing()}));let r=Date.now();yield this.processFramesThroughPlugins(),i=Math.floor(Date.now()-r),i>t&&(i=t)}catch(r){l.e(this.TAG,\"error in plugins loop\",r)}this.pluginsLoopState=\"running\",yield this.reusableWorker.sleep(t-i)}})}doPreProcessing(){return c(this,null,function*(){yield this.addTrackToVideo(),yield this.updateInputCanvas()})}processFramesThroughPlugins(){return c(this,null,function*(){this.canvases[0]=this.inputCanvas;let e=0;for(let t of this.pluginsMap.values()){let i=t.getName();if(t){try{let r=this.checkIfSkipRequired(i);if(t.getPluginType()===\"TRANSFORM\"){let s=(o,n)=>c(this,null,function*(){try{yield t.processVideoFrame(o,n,r)}catch(d){l.e(this.TAG,`error in processing plugin ${i}`,d)}});if(r)e===this.pluginsMap.size-1?yield s(this.canvases[e],this.outputCanvas):yield s(this.canvases[e],this.canvases[e+1]);else{let o=this.canvases[e],n=this.canvases[e+1];e===this.pluginsMap.size-1?yield this.analytics.processWithTime(i,()=>c(this,null,function*(){return s(o,this.outputCanvas)})):yield this.analytics.processWithTime(i,()=>c(this,null,function*(){return s(o,n)}))}}else t.getPluginType()===\"ANALYZE\"&&!r&&(yield this.analytics.processWithTime(i,()=>c(this,null,function*(){return yield t.processVideoFrame(this.inputCanvas)})))}catch(r){l.e(this.TAG,`error in processing plugin ${i}`,r),yield this.removePlugin(t)}e++}}})}addTrackToVideo(){return c(this,null,function*(){var t;if(!this.inputVideo)return;let e=this.inputVideo.srcObject;e!==null&&e instanceof MediaStream&&((t=e.getVideoTracks()[0])==null?void 0:t.id)===this.hmsTrack.nativeTrack.id||(this.inputVideo.pause(),this.inputVideo.srcObject=new MediaStream([this.hmsTrack.nativeTrack]),this.inputVideo.muted=!0,this.inputVideo.playsInline=!0,yield this.inputVideo.play())})}updateInputCanvas(){return c(this,null,function*(){if(!this.inputCanvas||!this.inputVideo)return;let{width:e=wo,height:t=_o}=this.hmsTrack.getMediaTrackSettings();this.inputCanvas.height!==t&&(this.inputCanvas.height=t),this.inputCanvas.width!==e&&(this.inputCanvas.width=e),this.inputCanvas.getContext(\"2d\").drawImage(this.inputVideo,0,0,e,t)})}resetCanvases(){if(!this.outputCanvas||!this.inputCanvas)return;let e=this.inputCanvas.getContext(\"2d\");e&&(e.fillStyle=\"rgb(0, 0, 0)\",e.fillRect(0,0,this.outputCanvas.width,this.outputCanvas.height)),this.canvases=[]}checkIfSkipRequired(e){let t=!1;return this.pluginNumFramesSkipped[e]<this.pluginNumFramesToSkip[e]?(this.pluginNumFramesSkipped[e]++,t=!0):(t=!1,this.pluginNumFramesSkipped[e]=0),t}};var gi=class{constructor(e,t){this.TAG=\"[MediaStreamPluginsManager]\";this.plugins=new Set,this.analytics=new it(e),this.room=t}addPlugins(e){e.forEach(t=>{var i;switch(t.getName()){case\"HMSEffectsPlugin\":if(!((i=this.room)!=null&&i.isEffectsEnabled)){let r=\"Effects Virtual Background is not enabled for this room\";if(this.plugins.size===0)throw Error(r);l.w(this.TAG,r);return}break;default:}this.plugins.add(t)})}removePlugins(e){e.forEach(t=>{t.stop(),this.analytics.removed(t.getName()),this.plugins.delete(t)})}applyPlugins(e){let t=e;for(let i of this.plugins){let r=i.getName();try{t=i.apply(t),this.analytics.added(r)}catch(s){this.analytics.failure(r,s),l.e(\"Could not apply plugin\",s,r)}}return t}getPlugins(){return Array.from(this.plugins).map(e=>e.getName())}cleanup(){return c(this,null,function*(){this.removePlugins(Array.from(this.plugins))})}};var No=[\"init_response_time\",\"ws_connect_time\",\"on_policy_change_time\",\"local_audio_track_time\",\"local_video_track_time\",\"peer_list_time\",\"room_state_time\",\"join_response_time\"],Ti=class{constructor(){this.eventPerformanceMeasures={}}start(e){performance.mark(e)}end(e){var t;try{this.eventPerformanceMeasures[e]=performance.measure(e,e),l.d(\"[HMSPerformanceTiming]\",e,(t=this.eventPerformanceMeasures[e])==null?void 0:t.duration)}catch(i){l.w(\"[AnalyticsTimer]\",`Error in measuring performance for event ${e}`,{error:i})}}getTimeTaken(e){var t;return(t=this.eventPerformanceMeasures[e])==null?void 0:t.duration}getTimes(...e){return[...No,...e].reduce((t,i)=>M(m({},t),{[i]:this.getTimeTaken(i)}),{})}cleanup(){this.eventPerformanceMeasures={}}};var Gr={isAudioMuted:!1,isVideoMuted:!1,audioInputDeviceId:\"default\",audioOutputDeviceId:\"default\",videoDeviceId:\"default\",audioMode:\"voice\"},Me,fi,be=class a{constructor(e,t,i,r,s){this.store=e;this.observer=t;this.deviceManager=i;this.eventBus=r;this.analyticsTimer=s;this.TAG=\"[LocalTrackManager]\";this.setScreenCaptureHandleConfig()}getTracksToPublish(){return c(this,arguments,function*(e=Gr){let t=this.getAVTrackSettings(e);if(!t)return[];let i=!!t.audio,r=!!t.video,s=[],{videoTrack:o,audioTrack:n}=yield this.updateCurrentLocalTrackSettings(t),d=(o==null?void 0:o.stream)||(n==null?void 0:n.stream),u=!!(o&&this.store.getTrackById(o.trackId)),p=!!(n&&this.store.getTrackById(n.trackId));if(u&&p)return[];let h={audio:i&&!n&&(e.isAudioMuted?\"empty\":!0),video:r&&!o&&(e.isVideoMuted?\"empty\":!0)};h.audio&&this.analyticsTimer.start(\"local_audio_track_time\"),h.video&&this.analyticsTimer.start(\"local_video_track_time\");try{l.d(this.TAG,\"Init Local Tracks\",{fetchTrackOptions:h}),s=yield this.getLocalTracks(h,t,d)}catch(T){s=yield this.retryGetLocalTracks(T,t,h,d)}return h.audio&&this.analyticsTimer.end(\"local_audio_track_time\"),h.video&&this.analyticsTimer.end(\"local_video_track_time\"),o&&r&&!u&&s.push(o),n&&i&&!p&&s.push(n),s})}getLocalTracks(){return c(this,arguments,function*(e={audio:!0,video:!0},t,i){try{let r=yield this.getNativeLocalTracks(e,t);return this.createHMSLocalTracks(r,t,i)}catch(r){throw this.eventBus.analytics.publish(y.publish({devices:this.deviceManager.getDevices(),error:r,settings:t})),r}})}getNativeLocalTracks(){return c(this,arguments,function*(e={audio:!1,video:!1},t){let i=new Ze(e.video===!0?t.video:null,e.audio===!0?t.audio:null,t.simulcast),r=[];return(i.audio||i.video)&&r.push(...yield this.getAVTracks(i)),r.push(...this.getEmptyTracks(e)),r})}optimizeScreenShareConstraint(e,t){return c(this,null,function*(){var s,o,n;if(typeof t.video==\"boolean\"||!((s=t.video)!=null&&s.width)||!((o=t.video)!=null&&o.height))return;let i=this.store.getPublishParams();if(!i||!((n=i.allowed)!=null&&n.includes(\"screen\")))return;let r=document.createElement(\"video\");r.srcObject=e,r.addEventListener(\"loadedmetadata\",()=>c(this,null,function*(){let{videoWidth:d,videoHeight:u}=r,p=i.screen,h=p.width*p.height,T=d/u,g=p.width/p.height;if(T>g){let f=t.video,E=T/g,v=Math.sqrt(E);d*u>h?(f.width=d/v,f.height=u/v):(f.height=u*v,f.width=d*v),yield e.getVideoTracks()[0].applyConstraints(f)}}))})}getLocalScreen(e,t=!1){return c(this,null,function*(){var T;let i=yield this.getOrDefaultScreenshareConfig(e),r=this.getScreenshareSettings(i.videoOnly),s={video:M(m({},r==null?void 0:r.video.toConstraints(!0)),{displaySurface:i.displaySurface}),preferCurrentTab:i.preferCurrentTab,selfBrowserSurface:i.selfBrowserSurface,surfaceSwitching:i.surfaceSwitching,systemAudio:i.systemAudio};if(r!=null&&r.audio){let g=(T=r==null?void 0:r.audio)==null?void 0:T.toConstraints();delete g.advanced,s.audio=M(m({},g),{autoGainControl:!1,noiseSuppression:!1,googAutoGainControl:!1,echoCancellation:!1})}else e!=null&&e.forceCurrentTab&&e.preferCurrentTab&&e.cropElement&&(s.audio={echoCancellation:!0,noiseSuppression:!0});let o;try{l.d(\"retrieving screenshare with \",{config:i},{constraints:s}),o=yield navigator.mediaDevices.getDisplayMedia(s),t&&(yield this.optimizeScreenShareConstraint(o,s))}catch(g){l.w(this.TAG,\"error in getting screenshare - \",g);let f=_e(g,\"screen\");throw this.eventBus.analytics.publish(y.publish({error:f,devices:this.deviceManager.getDevices(),settings:new Ze(r==null?void 0:r.video,r==null?void 0:r.audio,!1)})),f}let n=[],d=new Se(o),u=o.getVideoTracks()[0],p=new G(d,u,\"screen\",this.eventBus,r==null?void 0:r.video,this.store.getRoom());p.setSimulcastDefinitons(this.store.getSimulcastDefinitionsForPeer(this.store.getLocalPeer(),\"screen\"));try{let g=this.validateCurrentTabCapture(p,i.forceCurrentTab);p.isCurrentTab=g,yield p.cropTo(i.cropTarget)}catch(g){throw o.getTracks().forEach(f=>f.stop()),g}n.push(p);let h=o.getAudioTracks()[0];if(h){let g=new de(d,h,\"screen\",this.eventBus,r==null?void 0:r.audio,this.store.getRoom());n.push(g)}return l.v(this.TAG,\"getLocalScreen\",n),n})}setScreenCaptureHandleConfig(e){var t;!((t=navigator.mediaDevices)!=null&&t.setCaptureHandleConfig)||this.isInIframe()||(e=e||{},Object.assign(e,{handle:(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),exposeOrigin:!1,permittedOrigins:[window.location.origin]}),l.d(\"setting capture handle - \",e.handle),navigator.mediaDevices.setCaptureHandleConfig(e),this.captureHandleIdentifier=e.handle)}validateCurrentTabCapture(e,t){let i=e.getCaptureHandle(),r=!!(this.captureHandleIdentifier&&(i==null?void 0:i.handle)===this.captureHandleIdentifier);if(t&&!r)throw l.e(this.TAG,\"current tab was not shared with forceCurrentTab as true\"),S.TracksErrors.CurrentTabNotShared();return r}requestPermissions(){return c(this,null,function*(){try{(yield navigator.mediaDevices.getUserMedia({audio:!0,video:!0})).getTracks().forEach(t=>t.stop())}catch(e){l.e(this.TAG,e)}})}static getEmptyVideoTrack(e){var n,d,u;let t=((n=e==null?void 0:e.getSettings())==null?void 0:n.width)||320,i=((d=e==null?void 0:e.getSettings())==null?void 0:d.height)||240,r=1;Me||(Me=document.createElement(\"canvas\"),Me.width=t,Me.height=i,(u=Me.getContext(\"2d\"))==null||u.fillRect(0,0,t,i)),fi||(fi=setInterval(()=>{let p=Me==null?void 0:Me.getContext(\"2d\");p&&p.fillRect(0,0,1,1)},1e3/r));let o=Me.captureStream(r).getVideoTracks()[0];return o.enabled=!1,o}static getEmptyAudioTrack(){let e=ce.getAudioContext(),t=e.createOscillator(),i=e.createMediaStreamDestination();t.connect(i),t.start();let r=i.stream.getAudioTracks()[0];return r.enabled=!1,r}static cleanup(){clearInterval(fi),fi=void 0,Me=void 0}getAVTracks(e){return c(this,null,function*(){try{let t=yield navigator.mediaDevices.getUserMedia({audio:e.audio?e.audio.toConstraints():!1,video:e.video?e.video.toConstraints():!1});return t.getVideoTracks().concat(t.getAudioTracks())}catch(t){yield this.deviceManager.init();let i=!!(!this.deviceManager.hasWebcamPermission&&e.video),r=!!(!this.deviceManager.hasMicrophonePermission&&e.audio),s=this.getErrorType(i,r);throw _e(t,s)}})}getAVTrackSettings(e){let t=this.getAudioSettings(e),i=this.getVideoSettings(e);return!t&&!i?null:new xe().video(i).audio(t).build()}isInIframe(){try{return window.self!==window.top}catch(e){return!0}}retryGetLocalTracks(e,t,i,r){return c(this,null,function*(){if(e instanceof k&&e.action===\"TRACK\"){this.observer.onFailure(e);let s=e.code===P.TracksErrors.OVER_CONSTRAINED,o=e.message.includes(\"audio\"),n=e.message.includes(\"video\");if(s){let d=new xe().video(new Ke).audio(new $e).build();l.w(this.TAG,\"Fetch AV Tracks failed with overconstrained error\",{fetchTrackOptions:i},{error:e});try{return yield this.getLocalTracks(i,d,r)}catch(u){let p=u instanceof k?u.nativeError:u,h=u;if((p==null?void 0:p.name)===\"OverconstrainedError\"){let T=S.TracksErrors.GenericTrack(\"TRACK\",\"Overconstrained error after dropping all constraints\");T.addNativeError(p),h=T}return yield this.retryGetLocalTracks(h,t,i,r)}}i.audio=o?\"empty\":i.audio,i.video=n?\"empty\":i.video,l.w(this.TAG,\"Fetch AV Tracks failed\",{fetchTrackOptions:i},e);try{return yield this.getLocalTracks(i,t,r)}catch(d){return l.w(this.TAG,\"Fetch empty tacks failed\",d),i.audio=i.audio&&\"empty\",i.video=i.video&&\"empty\",this.observer.onFailure(d),yield this.getLocalTracks(i,t,r)}}else return l.w(this.TAG,\"Fetch AV Tracks failed - unknown exception\",e),this.observer.onFailure(e),[]})}getErrorType(e,t){return e&&t?\"audio, video\":e?\"video\":t?\"audio\":\"audio, video\"}getEmptyTracks(e){let t=[];return e.audio===\"empty\"&&t.push(a.getEmptyAudioTrack()),e.video===\"empty\"&&t.push(a.getEmptyVideoTrack()),t}updateCurrentLocalTrackSettings(e){return c(this,null,function*(){let t=this.store.getLocalPeerTracks(),i=t.find(n=>n.type===\"video\"&&n.source===\"regular\"),r=t.find(n=>n.type===\"audio\"&&n.source===\"regular\"),s=t.find(n=>n.type===\"video\"&&n.source===\"screen\");e!=null&&e.video&&(yield i==null?void 0:i.setSettings(e.video)),e!=null&&e.audio&&(yield r==null?void 0:r.setSettings(e.audio));let o=this.getScreenshareSettings(!0);return o!=null&&o.video&&(yield s==null?void 0:s.setSettings(o==null?void 0:o.video)),{videoTrack:i,audioTrack:r}})}getAudioSettings(e){var o;let t=this.store.getPublishParams();if(!t||!((o=t.allowed)!=null&&o.includes(\"audio\")))return null;let i=this.store.getLocalPeer(),r=i==null?void 0:i.audioTrack,s=(r==null?void 0:r.settings.deviceId)||e.audioInputDeviceId;return new Q().codec(t.audio.codec).maxBitrate(t.audio.bitRate).deviceId(s||Gr.audioInputDeviceId).build()}getVideoSettings(e){var n;let t=this.store.getPublishParams();if(!t||!((n=t.allowed)!=null&&n.includes(\"video\")))return null;let i=this.store.getLocalPeer(),r=i==null?void 0:i.videoTrack,s=(r==null?void 0:r.settings.deviceId)||e.videoDeviceId,o=t.video;return new q().codec(o.codec).maxBitrate(o.bitRate).maxFramerate(o.frameRate).setWidth(o.width).setHeight(o.height).deviceId(s||Gr.videoDeviceId).build()}getScreenshareSettings(e=!1){var r;let t=this.store.getPublishParams();if(!t||!((r=t.allowed)!=null&&r.includes(\"screen\")))return null;let i=t.screen;return{video:new q().maxBitrate(i.bitRate,!1).codec(i.codec).maxFramerate(i.frameRate).setWidth(i.width).setHeight(i.height).build(),audio:e?void 0:new Q().build()}}getOrDefaultScreenshareConfig(e){return c(this,null,function*(){var i;let t=Object.assign({videoOnly:!1,audioOnly:!1,forceCurrentTab:!1,preferCurrentTab:!1,selfBrowserSurface:\"exclude\",surfaceSwitching:\"include\",systemAudio:\"exclude\",displaySurface:\"monitor\"},e||{});return t.forceCurrentTab&&(t.videoOnly=!0,t.preferCurrentTab=!0,t.selfBrowserSurface=\"include\",t.surfaceSwitching=\"exclude\"),t.preferCurrentTab&&(t.selfBrowserSurface=\"include\",t.displaySurface=void 0),t.cropElement&&((i=window.CropTarget)!=null&&i.fromElement)&&(t.cropTarget=yield window.CropTarget.fromElement(t.cropElement)),t})}createHMSLocalTracks(e,t,i){let r=e.find(n=>n.kind===\"video\"),s=e.find(n=>n.kind===\"audio\");i?e.forEach(n=>i==null?void 0:i.nativeStream.addTrack(n)):i=new Se(new MediaStream(e));let o=[];if(s&&(t!=null&&t.audio)){let n=new de(i,s,\"regular\",this.eventBus,t.audio,this.store.getRoom());o.push(n)}if(r&&(t!=null&&t.video)){let n=new G(i,r,\"regular\",this.eventBus,t.video,this.store.getRoom());n.setSimulcastDefinitons(this.store.getSimulcastDefinitionsForPeer(this.store.getLocalPeer(),\"regular\")),o.push(n)}return o}};function Zs(a,e){return function(i){return!lodash_isequal__WEBPACK_IMPORTED_MODULE_3___default()(a[i],e[i])}}var G=class a extends et{constructor(t,i,r,s,o=new q().build(),n){super(t,i,r);this.eventBus=s;this.room=n;this._layerDefinitions=[];this.TAG=\"[HMSLocalVideoTrack]\";this.enabledStateBeforeBackground=!1;this.isCurrentTab=!1;this.isPublished=!1;this.replaceSenderTrack=t=>c(this,null,function*(){if(!this.transceiver||this.transceiver.direction!==\"sendonly\"){l.d(this.TAG,`transceiver for ${this.trackId} not available or not connected yet`);return}yield this.transceiver.sender.replaceTrack(t)});this.buildNewSettings=t=>{let{width:i,height:r,codec:s,maxFramerate:o,maxBitrate:n,deviceId:d,advanced:u,facingMode:p}=m(m({},this.settings),t);return new Ke(i,r,s,o,d,u,n,p)};this.handleSettingsChange=t=>c(this,null,function*(){let i=this.stream,r=Zs(t,this.settings);if(r(\"maxBitrate\")&&t.maxBitrate&&(yield i.setMaxBitrateAndFramerate(this)),r(\"width\")||r(\"height\")||r(\"advanced\"))if(this.source===\"video\"){let s=yield this.replaceTrackWith(t);yield this.replaceSender(s,this.enabled),this.nativeTrack=s,yield this.processPlugins(),this.videoHandler.updateSinks()}else yield this.nativeTrack.applyConstraints(t.toConstraints())});this.handleDeviceChange=(t,i=!1)=>c(this,null,function*(){if(Zs(t,this.settings)(\"deviceId\")&&this.source===\"regular\"){if(this.enabled){delete t.facingMode;let o=yield this.replaceTrackWith(t);yield this.replaceSender(o,this.enabled),this.nativeTrack=o,yield this.processPlugins(),this.videoHandler.updateSinks()}let s=this.nativeTrack.getSettings().groupId;!i&&t.deviceId&&(X.updateSelection(\"videoInput\",{deviceId:t.deviceId,groupId:s}),this.eventBus.deviceChange.publish({isUserSelection:!0,type:\"video\",selection:{deviceId:t.deviceId,groupId:s}}))}});this.trackPermissions=()=>{hi(\"camera\",t=>{this.eventBus.analytics.publish(y.permissionChange(this.type,t)),t===\"denied\"&&this.eventBus.localVideoEnabled.publish({enabled:!1,track:this})})};this.handleTrackMute=()=>{l.d(this.TAG,\"muted natively\",document.visibilityState);let t=document.visibilityState===\"hidden\"?\"visibility-change\":\"incoming-call\";this.eventBus.analytics.publish(this.sendInterruptionEvent({started:!0,reason:t})),this.eventBus.localVideoEnabled.publish({enabled:!1,track:this})};this.handleTrackUnmuteNatively=()=>c(this,null,function*(){l.d(this.TAG,\"unmuted natively\");let t=document.visibilityState===\"hidden\"?\"visibility-change\":\"incoming-call\";this.eventBus.analytics.publish(this.sendInterruptionEvent({started:!1,reason:t})),this.handleTrackUnmute(),this.eventBus.localVideoEnabled.publish({enabled:this.enabled,track:this}),this.eventBus.localVideoUnmutedNatively.publish(),yield this.setEnabled(this.enabled)});this.removeOrReplaceProcessedTrack=t=>c(this,null,function*(){t?t!==this.processedTrack&&(this.processedTrack=t):this.processedTrack=void 0,yield this.replaceSenderTrack(this.processedTrack||this.nativeTrack)});this.handleVisibilityChange=()=>c(this,null,function*(){if(document.visibilityState===\"hidden\")this.enabledStateBeforeBackground=this.enabled,this.enabled&&(yield this.setEnabled(!1)),this.eventBus.analytics.publish(this.sendInterruptionEvent({started:!0,reason:\"visibility-change\"}));else{if(l.d(this.TAG,\"visibility visible, restoring track state\",this.enabledStateBeforeBackground),this.enabledStateBeforeBackground)try{yield this.setEnabled(!0)}catch(t){this.eventBus.error.publish(t)}this.eventBus.analytics.publish(this.sendInterruptionEvent({started:!1,reason:\"visibility-change\"}))}});this.addTrackEventListeners(i),this.trackPermissions(),t.tracks.push(this),this.setVideoHandler(new tt(this)),this.settings=o,o.deviceId!==i.getSettings().deviceId&&i.enabled&&(this.settings=this.buildNewSettings({deviceId:i.getSettings().deviceId})),this.pluginsManager=new It(this,s),this.mediaStreamPluginsManager=new gi(s,n),this.setFirstTrackId(this.trackId),this.eventBus.localAudioUnmutedNatively.subscribe(this.handleTrackUnmute),U&&r===\"regular\"&&Mt()&&document.addEventListener(\"visibilitychange\",this.handleVisibilityChange)}clone(t){let i=this.nativeTrack.clone();t.nativeStream.addTrack(i);let r=new a(t,i,this.source,this.eventBus,this.settings,this.room);return r.peerId=this.peerId,this.pluginsManager.pluginsMap.size>0&&this.pluginsManager.pluginsMap.forEach(s=>{r.addPlugin(s).catch(o=>l.e(this.TAG,\"Plugin add failed while migrating\",s,o))}),this.mediaStreamPluginsManager.plugins.size>0&&r.addStreamPlugins(Array.from(this.mediaStreamPluginsManager.plugins)),r}setSimulcastDefinitons(t){this._layerDefinitions=t}getSimulcastDefinitions(){return this._layerDefinitions}setEnabled(t){return c(this,null,function*(){var i;if(t!==this.enabled){if(this.source===\"regular\"){let r;t?r=yield this.replaceTrackWith(this.settings):r=yield this.replaceTrackWithBlank(),yield this.replaceSender(r,t),(i=this.nativeTrack)==null||i.stop(),this.nativeTrack=r,yield ne(a.prototype,this,\"setEnabled\").call(this,t),t&&(yield this.pluginsManager.waitForRestart(),yield this.processPlugins(),this.settings=this.buildNewSettings({deviceId:r.getSettings().deviceId})),this.videoHandler.updateSinks()}this.eventBus.localVideoEnabled.publish({enabled:t,track:this})}})}processPlugins(){return c(this,null,function*(){try{if(this.pluginsManager.getPlugins().length>0)return;if(this.mediaStreamPluginsManager.getPlugins().length>0){let r=this.mediaStreamPluginsManager.applyPlugins(new MediaStream([this.nativeTrack])).getVideoTracks()[0];yield this.setProcessedTrack(r)}else yield this.setProcessedTrack();this.videoHandler.updateSinks()}catch(t){console.error(\"error in processing plugin(s)\",t)}})}addStreamPlugins(t){return c(this,null,function*(){if(this.pluginsManager.getPlugins().length>0)throw Error(\"Plugins of type HMSMediaStreamPlugin and HMSVideoPlugin cannot be used together\");this.mediaStreamPluginsManager.addPlugins(t),yield this.processPlugins()})}removeStreamPlugins(t){return c(this,null,function*(){this.mediaStreamPluginsManager.removePlugins(t),yield this.processPlugins()})}isPublishedTrackId(t){return this.publishedTrackId===t}addSink(t){this.addSinkInternal(t,this.processedTrack||this.nativeTrack)}setSettings(t,i=!1){return c(this,null,function*(){let r=this.buildNewSettings(t);if(yield this.handleDeviceChange(r,i),!this.enabled||ve(this.nativeTrack)){this.settings=r;return}else yield this.pluginsManager.waitForRestart();yield this.handleSettingsChange(r),this.settings=r})}getPlugins(){return this.mediaStreamPluginsManager.getPlugins().length>0?this.mediaStreamPluginsManager.getPlugins():this.pluginsManager.getPlugins()}addPlugin(t,i){return c(this,null,function*(){if(this.mediaStreamPluginsManager.getPlugins().length>0)throw Error(\"Plugins of type HMSVideoPlugin and HMSMediaStreamPlugin cannot be used together\");return this.pluginsManager.addPlugin(t,i)})}removePlugin(t){return c(this,null,function*(){return this.pluginsManager.removePlugin(t)})}validatePlugin(t){return this.pluginsManager.validatePlugin(t)}cleanup(){return c(this,null,function*(){var t;this.eventBus.localAudioUnmutedNatively.unsubscribe(this.handleTrackUnmute),this.removeTrackEventListeners(this.nativeTrack),yield this.mediaStreamPluginsManager.cleanup(),yield this.pluginsManager.cleanup(),ne(a.prototype,this,\"cleanup\").call(this),this.transceiver=void 0,(t=this.processedTrack)==null||t.stop(),this.isPublished=!1,U&&Mt()&&document.removeEventListener(\"visibilitychange\",this.handleVisibilityChange)})}cropTo(t){return c(this,null,function*(){if(t&&this.source===\"screen\")try{this.nativeTrack.cropTo&&(yield this.nativeTrack.cropTo(t))}catch(i){throw l.e(this.TAG,\"failed to crop screenshare capture - \",i),S.TracksErrors.GenericTrack(\"TRACK\",\"failed to crop screenshare capture\")}})}getCaptureHandle(){if(this.nativeTrack.getCaptureHandle)return this.nativeTrack.getCaptureHandle()}setProcessedTrack(t){return c(this,null,function*(){if(!this.nativeTrack.enabled){this.processedTrack=t;return}yield this.removeOrReplaceProcessedTrack(t),this.videoHandler.updateSinks()})}getTrackIDBeingSent(){return this.getTrackBeingSent().id}getTrackBeingSent(){return this.enabled?this.processedTrack||this.nativeTrack:this.nativeTrack}switchCamera(){return c(this,null,function*(){var s;let t=this.getMediaTrackSettings().facingMode;if(!t||this.source!==\"regular\"){l.d(this.TAG,\"facingMode not supported\");return}let i=t===\"environment\"?\"user\":\"environment\";(s=this.nativeTrack)==null||s.stop();let r=yield this.replaceTrackWith(this.buildNewSettings({facingMode:i,deviceId:void 0}));yield this.replaceSender(r,this.enabled),this.nativeTrack=r,yield this.processPlugins(),this.videoHandler.updateSinks(),this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId,facingMode:i}),X.updateSelection(\"videoInput\",{deviceId:this.settings.deviceId,groupId:this.nativeTrack.getSettings().groupId})})}replaceTrackWith(t){return c(this,null,function*(){let i=this.nativeTrack;this.removeTrackEventListeners(i),i==null||i.stop();try{let r=yield wr(t);return this.addTrackEventListeners(r),l.d(this.TAG,\"replaceTrack, Previous track stopped\",i,\"newTrack\",r),this.settings.deviceId===\"default\"&&(this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId})),r}catch(r){let s=yield wr(this.settings);throw this.addTrackEventListeners(s),yield this.replaceSender(s,this.enabled),this.nativeTrack=s,yield this.processPlugins(),this.videoHandler.updateSinks(),this.isPublished&&this.eventBus.analytics.publish(y.publish({error:r})),r}})}replaceTrackWithBlank(){return c(this,null,function*(){let t=this.nativeTrack,i=be.getEmptyVideoTrack(t);return this.removeTrackEventListeners(t),this.addTrackEventListeners(i),t==null||t.stop(),l.d(this.TAG,\"replaceTrackWithBlank, Previous track stopped\",t,\"newTrack\",i),i})}replaceSender(t,i){return c(this,null,function*(){i?yield this.replaceSenderTrack(this.processedTrack||t):yield this.replaceSenderTrack(t),this.stream.replaceStreamTrack(this.nativeTrack,t)})}addTrackEventListeners(t){t.addEventListener(\"mute\",this.handleTrackMute),t.addEventListener(\"unmute\",this.handleTrackUnmuteNatively)}removeTrackEventListeners(t){t.removeEventListener(\"mute\",this.handleTrackMute),t.removeEventListener(\"unmute\",this.handleTrackUnmuteNatively)}};var rt=\"renegotiation-callback-id\",vi=\"ion-sfu\";var st=\"SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID\";var ea=\"https://event.100ms.live/v2/client/report\",ta=\"https://event-nonprod.100ms.live/v2/client/report\";var Rt=Math.pow(2,31)-1,V={DEVICE_CHANGE:\"device-change\",LOCAL_AUDIO_ENABLED:\"local-audio-enabled\",LOCAL_VIDEO_ENABLED:\"local-video-enabled\",LOCAL_VIDEO_UNMUTED_NATIVELY:\"local-video-unmuted-natively\",LOCAL_AUDIO_UNMUTED_NATIVELY:\"local-audio-unmuted-natively\",STATS_UPDATE:\"stats-update\",RTC_STATS_UPDATE:\"rtc-stats-update\",TRACK_DEGRADED:\"track-degraded\",TRACK_RESTORED:\"track-restored\",TRACK_AUDIO_LEVEL_UPDATE:\"track-audio-level-update\",LOCAL_AUDIO_SILENCE:\"local-audio-silence\",ANALYTICS:\"analytics\",AUDIO_PLUGIN_FAILED:\"audio-plugin-failed\",POLICY_CHANGE:\"policy-change\",LOCAL_ROLE_UPDATE:\"local-role-update\",AUDIO_TRACK_UPDATE:\"audio-track-update\",AUDIO_TRACK_ADDED:\"audio-track-added\",AUDIO_TRACK_REMOVED:\"audio-track-removed\",AUTOPLAY_ERROR:\"autoplay-error\",LEAVE:\"leave\",ERROR:\"error\"},ia=\"2.5\",ra=\"20250115\",Ae=\"_handraise\",$r=1e3,Kr=64,sa=\"https://whiteboard.100ms.live\",aa=\"https://whiteboard-qa.100ms.live\";var O=class a extends et{constructor(t,i,r,s){super(t,i,r);this._degraded=!1;this._degradedAt=null;this._layerDefinitions=[];this.history=new qr;this.preferredLayer=\"high\";this.disableNoneLayerRequest=!1;this.disableNoneLayerRequest=!!s,this.setVideoHandler(new tt(this))}setTrackId(t){this.bizTrackId=t}get trackId(){return this.bizTrackId||super.trackId}get degraded(){return this._degraded}get degradedAt(){return this._degradedAt}setEnabled(t){return c(this,null,function*(){t!==this.enabled&&(ne(a.prototype,this,\"setEnabled\").call(this,t),this.videoHandler.updateSinks(!0))})}setPreferredLayer(t){return c(this,null,function*(){if(t===\"none\"){l.w(\"layer none will be ignored\");return}if(this.preferredLayer=t,!!this.shouldSendVideoLayer(t,\"preferLayer\")){if(!this.hasSinks()){l.d(`[Remote Track] ${this.logIdentifier}\n        streamId=${this.stream.id} \n        trackId=${this.trackId}\n        saving ${t}, source=${this.source}\n        Track does not have any sink`);return}yield this.requestLayer(t,\"preferLayer\"),this.pushInHistory(`uiPreferLayer-${t}`)}})}getSimulcastLayer(){return this.stream.getSimulcastLayer()}getLayer(){return this.stream.getVideoLayer()}getPreferredLayer(){return this.preferredLayer}getPreferredLayerDefinition(){return this._layerDefinitions.find(t=>t.layer===this.preferredLayer)}replaceTrack(t){this.nativeTrack=t.nativeTrack,t.transceiver&&(this.transceiver=t.transceiver,this.stream.updateId(t.stream.id)),this.videoHandler.updateSinks()}addSink(t,i=!0){return c(this,null,function*(){ve(this.nativeTrack)?yield this.requestLayer(this.preferredLayer,\"addSink\"):(ne(a.prototype,this,\"addSink\").call(this,t),i&&(yield this.updateLayer(\"addSink\"))),this.pushInHistory(\"uiSetLayer-high\")})}removeSink(t,i=!0){return c(this,null,function*(){ne(a.prototype,this,\"removeSink\").call(this,t),i&&(yield this.updateLayer(\"removeSink\")),this._degraded=!1,this.pushInHistory(\"uiSetLayer-none\")})}getSimulcastDefinitions(){return[...this._layerDefinitions]}setSimulcastDefinitons(t){this._layerDefinitions=t}setLayerFromServer(t){this._degraded=this.getDegradationValue(t),this._degradedAt=this._degraded?new Date:this._degradedAt;let i=t.current_layer;return l.d(`[Remote Track] ${this.logIdentifier} \n      streamId=${this.stream.id} \n      trackId=${this.trackId}\n      layer update from sfu\n      currLayer=${t.current_layer}\n      preferredLayer=${t.expected_layer}\n      sub_degraded=${t.subscriber_degraded}\n      pub_degraded=${t.publisher_degraded}\n      isDegraded=${this._degraded}`),this.stream.setVideoLayerLocally(i,this.logIdentifier,\"setLayerFromServer\"),this.pushInHistory(`sfuLayerUpdate-${i}`),this._degraded}getDegradationValue(t){return this.enabled&&(t.publisher_degraded||t.subscriber_degraded)&&t.current_layer===\"none\"}updateLayer(t){return c(this,null,function*(){let i=this.preferredLayer;this.enabled&&this.hasSinks()?i=this.preferredLayer:this.disableNoneLayerRequest||(i=\"none\"),this.shouldSendVideoLayer(i,t)&&(yield this.requestLayer(i,t))})}pushInHistory(t){ false&&0}requestLayer(t,i){return c(this,null,function*(){try{let r=yield this.stream.setVideoLayer(t,this.trackId,this.logIdentifier,i);return l.d(`[Remote Track] ${this.logIdentifier} \n      streamId=${this.stream.id}\n      trackId=${this.trackId}\n      Requested layer ${t}, source=${i}`),r}catch(r){throw l.d(`[Remote Track] ${this.logIdentifier} \n      streamId=${this.stream.id}\n      trackId=${this.trackId}\n      Failed to set layer ${t}, source=${i}\n      error=${r.message}`),r}})}shouldSendVideoLayer(t,i){let r=this.getLayer();return this.degraded&&t===\"none\"?!0:r===t?(l.d(`[Remote Track] ${this.logIdentifier}`,`Not sending update, already on layer ${t}, source=${i}`),!1):!0}},qr=class{constructor(){this.history=[]}push(e){e.time=new Date().toISOString().split(\"T\")[1],this.history.push(e)}};var Se=class extends Ye{constructor(){super(...arguments);this.TAG=\"[HMSLocalStream]\";this.connection=null}setConnection(t){this.connection=t}addTransceiver(t,i){let r=this.connection.addTransceiver(t.getTrackBeingSent(),{streams:[this.nativeStream],direction:\"sendonly\",sendEncodings:this.getTrackEncodings(t,i)});return this.setPreferredCodec(r,t.nativeTrack.kind),t.transceiver=r,r}setMaxBitrateAndFramerate(t,i){return c(this,null,function*(){var r;yield(r=this.connection)==null?void 0:r.setMaxBitrateAndFramerate(t,i)})}setPreferredCodec(t,i){}replaceStreamTrack(t,i){this.nativeStream.addTrack(i),this.nativeStream.removeTrack(t)}removeSender(t){var s,o;if(!this.connection||this.connection.connectionState===\"closed\"){l.d(this.TAG,\"publish connection is not initialised or closed\");return}let i=(s=t.transceiver)==null?void 0:s.sender;if(!i){l.w(this.TAG,`No sender found for trackId=${t.trackId}`);return}(o=this.connection)==null||o.removeTrack(i);let r=this.tracks.indexOf(t);r!==-1?this.tracks.splice(r,1):l.w(this.TAG,`Cannot find ${t.trackId} in locally stored tracks`)}getTrackEncodings(t,i){let r=[];if(t instanceof G)if(i.length>0)l.d(this.TAG,\"Simulcast enabled with layers\",i),r.push(...i);else{let s={active:this.nativeStream.active};t.settings.maxBitrate&&!Ge&&(s.maxBitrate=t.settings.maxBitrate),r.push(s)}return r}};var Pe=class extends Ye{constructor(t,i){super(t);this.audio=!0;this.video=\"none\";this.connection=i}setAudio(t,i,r){return c(this,null,function*(){this.audio!==t&&(this.audio=t,l.d(`[Remote stream] ${r||\"\"} \n    streamId=${this.id}\n    trackId=${i}\n    subscribing audio - ${this.audio}`),yield this.connection.sendOverApiDataChannelWithResponse({params:{subscribed:this.audio,track_id:i},method:\"prefer-audio-track-state\"}))})}setVideoLayerLocally(t,i,r){this.video=t,l.d(`[Remote stream] ${i}\n    streamId=${this.id}\n    source: ${r}\n    Setting layer field to=${t}`)}setVideoLayer(t,i,r,s){return l.d(`[Remote stream] ${r} \n      streamId=${this.id}\n      trackId=${i} \n      source: ${s} request ${t} layer`),this.setVideoLayerLocally(t,r,s),this.connection.sendOverApiDataChannelWithResponse({params:{max_spatial_layer:this.video,track_id:i},method:\"prefer-video-track-state\"})}getSimulcastLayer(){return this.video}getVideoLayer(){return this.video}isAudioSubscribed(){return this.audio}};var oa=(a,e,t,i)=>c(void 0,null,function*(){var o;let r,s={};if((o=e.transceiver)!=null&&o.sender.track){try{r=yield e.transceiver.sender.getStats();let n={},d={},u={};r==null||r.forEach(p=>{switch(p.type){case\"outbound-rtp\":d[p.id]=p;break;case\"remote-inbound-rtp\":u[p.ssrc]=p;break;case\"codec\":n[p.id]=p.mimeType;break;default:break}}),Object.keys(m({},d)).forEach(p=>{var v,R;let h=(v=d[p])==null?void 0:v.codecId,T=h?n[h]:void 0,g;T&&(g=T.substring(T.indexOf(\"/\")+1));let f=M(m({},d[p]),{rid:(R=d[p])==null?void 0:R.rid}),E=u[f.ssrc];s[p]=M(m({},f),{bitrate:Ht(\"bytesSent\",f,i==null?void 0:i[p]),packetsLost:E==null?void 0:E.packetsLost,jitter:E==null?void 0:E.jitter,roundTripTime:E==null?void 0:E.roundTripTime,totalRoundTripTime:E==null?void 0:E.totalRoundTripTime,peerName:t,peerID:e.peerId,enabled:e.enabled,codec:g})})}catch(n){a.analytics.publish(y.rtcStatsFailed(S.WebrtcErrors.StatsFailed(\"TRACK\",`Error getting local track stats ${e.trackId} - ${n.message}`))),l.w(\"[HMSWebrtcStats]\",\"Error in getting local track stats\",e,n,n.name)}return s}}),na=(a,e,t,i)=>c(void 0,null,function*(){var d;let r;try{r=yield(d=e.transceiver)==null?void 0:d.receiver.getStats()}catch(u){a.analytics.publish(y.rtcStatsFailed(S.WebrtcErrors.StatsFailed(\"TRACK\",`Error getting remote track stats ${e.trackId} - ${u.message}`))),l.w(\"[HMSWebrtcStats]\",\"Error in getting remote track stats\",e,u)}let s=Uo(r),o=Ht(\"bytesReceived\",s,i),n=jr(\"packetsLost\",s,i);return s!=null&&s.remote&&Object.assign(s.remote,{packetsLostRate:jr(\"packetsLost\",s.remote,i==null?void 0:i.remote)}),s&&M(m({},s),{bitrate:o,packetsLostRate:n,peerID:e.peerId,enabled:e.enabled,peerName:t,codec:s.codec})}),Uo=a=>{let e,t,i={};a==null||a.forEach(o=>{switch(o.type){case\"inbound-rtp\":e=o;break;case\"outbound-rtp\":e=o;break;case\"remote-inbound-rtp\":t=o;break;case\"codec\":i[o.id]=o.mimeType;break;default:break}});let r=e!=null&&e.codecId?i[e.codecId]:void 0,s;return r&&(s=r.substring(r.indexOf(\"/\")+1)),e&&Object.assign(e,{remote:t,codec:s})},Jr=(a,e,t)=>{let i=Bo(e),r=Ht(a===\"publish\"?\"bytesSent\":\"bytesReceived\",i,t&&t[a]);return i&&Object.assign(i,{bitrate:r})},Bo=a=>{let e;return a==null||a.forEach(t=>{t.type===\"transport\"&&(e=a==null?void 0:a.get(t.selectedCandidatePairId))}),e||a==null||a.forEach(t=>{t.type===\"candidate-pair\"&&t.selected&&(e=t)}),e},ca=a=>{let e={packetsLost:0,jitter:0};return a==null||a.forEach(t=>{t.packetsLost&&(e.packetsLost+=t.packetsLost),t.jitter>e.jitter&&(e.jitter=t.jitter)}),e},da=(a,e)=>Array.from(new Set(a.concat(e))),Ht=(a,e,t)=>jr(a,e,t)*8,jr=(a,e,t)=>{let i=e&&e[a],r=t?t[a]:null;return[e,t,he(i),he(r)].every(o=>!!o)?Qr(i,r,e==null?void 0:e.timestamp,t==null?void 0:t.timestamp)*1e3:0},Qr=(a,e,t,i)=>he(a)&&he(e)&&t&&i?(a-e)/(t-i):0;var Mi=class{constructor(e,t,i,r){this.store=e;this.eventBus=t;this.publishConnection=i;this.subscribeConnection=r;this.TAG=\"[HMSWebrtcStats]\";this.peerStats={};this.remoteTrackStats={};this.localTrackStats={};this.getLocalPeerStats=()=>this.peerStats[this.localPeerID];this.getRemoteTrackStats=e=>this.remoteTrackStats[e];this.getAllRemoteTracksStats=()=>this.remoteTrackStats;this.getLocalTrackStats=()=>this.localTrackStats;this.updateStats=()=>c(this,null,function*(){yield this.updateLocalPeerStats(),yield this.updateLocalTrackStats(),yield this.updateRemoteTrackStats()});this.updateLocalPeerStats=()=>c(this,null,function*(){var p,h,T,g;let e=this.getLocalPeerStats(),t;try{t=yield(p=this.publishConnection)==null?void 0:p.getStats()}catch(f){this.eventBus.analytics.publish(y.rtcStatsFailed(S.WebrtcErrors.StatsFailed(\"PUBLISH\",f.message))),l.w(this.TAG,\"Error in getting publish stats\",f)}let i=t&&Jr(\"publish\",t,e),r;try{r=yield(h=this.subscribeConnection)==null?void 0:h.getStats()}catch(f){this.eventBus.analytics.publish(y.rtcStatsFailed(S.WebrtcErrors.StatsFailed(\"SUBSCRIBE\",f.message))),l.w(this.TAG,\"Error in getting subscribe stats\",f)}let s=r&&Jr(\"subscribe\",r,e),{packetsLost:o,jitter:n}=ca(r),d=Qr(o,(T=e==null?void 0:e.subscribe)==null?void 0:T.packetsLost,s==null?void 0:s.timestamp,(g=e==null?void 0:e.subscribe)==null?void 0:g.timestamp),u=s&&Object.assign(s,{packetsLostRate:d,jitter:n,packetsLost:o});this.peerStats[this.localPeerID]={publish:i,subscribe:u}});this.updateRemoteTrackStats=()=>c(this,null,function*(){var i;let e=Array.from(this.store.getTracksMap().values()).filter(r=>r instanceof O||r instanceof ie),t=e.map(r=>r.trackId);Object.keys(this.remoteTrackStats).forEach(r=>{t.includes(r)||delete this.remoteTrackStats[r]});for(let r of e){let s=r.peerId&&((i=this.store.getPeerById(r.peerId))==null?void 0:i.name),o=this.getRemoteTrackStats(r.trackId),n=yield na(this.eventBus,r,s,o);n&&(this.remoteTrackStats[r.trackId]=n)}});this.updateLocalTrackStats=()=>c(this,null,function*(){var i;let e=this.store.getLocalPeerTracks().reduce((r,s)=>(r[s.getTrackIDBeingSent()]=s,r),{}),t=da(Object.keys(this.localTrackStats),Object.keys(e));for(let r of t){let s=e[r];if(s){let o=(i=this.store.getLocalPeer())==null?void 0:i.name,n=yield oa(this.eventBus,s,o,this.localTrackStats[r]);n&&(this.localTrackStats[r]=n)}else delete this.localTrackStats[r]}});var s;this.localPeerID=(s=this.store.getLocalPeer())==null?void 0:s.peerId}setPeerConnections({publish:e,subscribe:t}){this.publishConnection=e,this.subscribeConnection=t}getPublishPeerConnection(){return this.publishConnection}getSubscribePeerConnection(){return this.subscribeConnection}};var yi=class{constructor(e,t){this.store=e;this.eventBus=t;this.TAG=\"[HMSWebrtcInternals]\";this.interval=1e3;this.isMonitored=!1;this.handleStatsUpdate=()=>c(this,null,function*(){var e;yield(e=this.hmsStats)==null?void 0:e.updateStats(),this.hmsStats&&this.eventBus.statsUpdate.publish(this.hmsStats)})}getCurrentStats(){return this.hmsStats}getPublishPeerConnection(){var e;return(e=this.hmsStats)==null?void 0:e.getPublishPeerConnection()}getSubscribePeerConnection(){var e;return(e=this.hmsStats)==null?void 0:e.getSubscribePeerConnection()}onStatsChange(e){return this.eventBus.statsUpdate.subscribe(e),()=>{this.eventBus.statsUpdate.unsubscribe(e)}}setPeerConnections({publish:e,subscribe:t}){this.hmsStats?this.hmsStats.setPeerConnections({publish:e,subscribe:t}):this.hmsStats=new Mi(this.store,this.eventBus,e,t)}start(){return c(this,null,function*(){if(this.isMonitored){l.d(this.TAG,\"Already started\");return}this.stop(),this.isMonitored=!0,l.d(this.TAG,\"Starting Webrtc Stats Monitor\"),this.startLoop().then(()=>l.d(this.TAG,\"Stopping Webrtc Stats Monitor\")).catch(e=>{this.eventBus.analytics.publish(y.rtcStatsFailed(S.WebrtcErrors.StatsFailed(\"PUBLISH\",e.message))),l.e(this.TAG,e.message)})})}stop(){this.isMonitored=!1}startLoop(){return c(this,null,function*(){for(;this.isMonitored;)yield this.handleStatsUpdate(),yield J(this.interval)})}cleanup(){this.stop(),this.eventBus.statsUpdate.removeAllListeners()}};var at=class{constructor({peerId:e,name:t,isLocal:i,customerUserId:r,metadata:s,role:o,joinedAt:n,groups:d,realtime:u,type:p}){this.customerUserId=\"\";this.metadata=\"\";this.auxiliaryTracks=[];this.name=t,this.peerId=e,this.isLocal=i,this.customerUserId=r,this.metadata=s,this.joinedAt=n,this.groups=d,this.realtime=u,this.type=p,o&&(this.role=o)}get isHandRaised(){var e;return!!((e=this.groups)!=null&&e.includes(Ae))}updateRole(e){this.role=e}updateName(e){this.name=e}updateNetworkQuality(e){this.networkQuality=e}updateMetadata(e){this.metadata=e}updateGroups(e){this.groups=e}toString(){var e,t,i,r;return`{\n      name: ${this.name};\n      role: ${(e=this.role)==null?void 0:e.name};\n      peerId: ${this.peerId};\n      customerUserId: ${this.customerUserId};\n      ${this.audioTrack?`audioTrack: ${(t=this.audioTrack)==null?void 0:t.trackId};`:\"\"}\n      ${this.videoTrack?`videoTrack: ${(i=this.videoTrack)==null?void 0:i.trackId};`:\"\"}\n      groups: ${(r=this.groups)==null?void 0:r.join()}\n    }`}};var ot=class{};ot.makePeerId=()=>(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();var qe=class extends at{constructor(t){super(M(m({},t),{peerId:ot.makePeerId(),isLocal:!0}));this.isLocal=!0;this.auxiliaryTracks=[];this.asRole=t.asRole}isInPreview(){return!!this.asRole}toString(){var t,i,r;return`{\n      name: ${this.name};\n      role: ${(t=this.role)==null?void 0:t.name};\n      peerId: ${this.peerId};\n      customerUserId: ${this.customerUserId};\n      ${this.asRole?`asRole: ${this.asRole.name};`:\"\"}\n      ${this.audioTrack?`audioTrack: ${(i=this.audioTrack)==null?void 0:i.trackId};`:\"\"}\n      ${this.videoTrack?`videoTrack: ${(r=this.videoTrack)==null?void 0:r.trackId};`:\"\"}\n    }`}};var Ct=class extends at{constructor(t){super(M(m({},t),{isLocal:!1}));this.isLocal=!1;this.auxiliaryTracks=[];this.fromRoomState=!1;this.fromRoomState=!!t.fromRoomState}};var ye=(a,e)=>new Ct({peerId:a.peer_id,name:a.info.name,role:e.getPolicyForRole(a.role),customerUserId:a.info.user_id,metadata:a.info.data,groups:a.groups,type:a.info.type});var ki=class{constructor(e,t,i){this.transport=e;this.store=t;this.options=i;this.isEnd=!1;this.iterator=null;this.total=0;this.defaultPaginationLimit=10}validateConnection(){if(!this.transport||!this.store)throw Error(\"Use usePaginatedParticipants or hmsActions.getPeerListIterator after preview or join has happened\")}hasNext(){return!this.isEnd}getTotal(){return this.total}findPeers(){return c(this,null,function*(){var t;this.validateConnection();let e=yield this.transport.signal.findPeers(M(m({},this.options||{}),{limit:((t=this.options)==null?void 0:t.limit)||this.defaultPaginationLimit}));return this.updateState(e),this.processPeers(e.peers)})}next(){return c(this,null,function*(){var t;this.validateConnection();let e;return!this.iterator&&!this.isEnd?yield this.findPeers():this.iterator?(e=yield this.transport.signal.peerIterNext({iterator:this.iterator,limit:((t=this.options)==null?void 0:t.limit)||this.defaultPaginationLimit}),this.updateState(e),this.processPeers(e.peers)):[]})}processPeers(e){let t=[];return e.forEach(i=>{let r=ye(i,this.store);t.push(r)}),t}updateState(e){this.isEnd=e.eof,this.total=e.total,e.iterator&&(this.iterator=e.iterator)}};var nt=class{constructor(e){this.TAG=\"[AudioContextManager]\";this.audioContext=new AudioContext,this.source=this.audioContext.createMediaElementSource(e),this.source.connect(this.audioContext.destination)}resumeContext(){return c(this,null,function*(){this.audioContext.state===\"suspended\"&&(yield this.audioContext.resume(),l.d(this.TAG,\"AudioContext is resumed\"))})}getAudioTrack(){return this.destinationNode&&this.source.disconnect(this.destinationNode),this.destinationNode=this.audioContext.createMediaStreamDestination(),this.source.connect(this.destinationNode),this.destinationNode.stream.getAudioTracks()[0]}cleanup(){this.audioContext.state!==\"closed\"&&this.audioContext.close().catch(e=>{l.d(this.TAG,\"AudioContext close error\",e.message)})}};var Ue=class extends eventemitter2__WEBPACK_IMPORTED_MODULE_5__.EventEmitter2{on(e,t){return super.on(e,t)}off(e,t){return super.off(e,t)}emit(e,t){return super.emit(e,t)}listeners(e){return super.listeners(e)}};var Ei=class extends Ue{constructor(){super(...arguments);this.audioElement=null;this.TAG=\"[PlaylistAudioManager]\";this.seeked=!1}play(t){return c(this,null,function*(){return this.audioElement=this.getAudioElement(),new Promise((i,r)=>{this.audioElement=this.getAudioElement(),this.audioElement.src=t,this.seeked=!1,this.audioElement.onerror=()=>{let s=`Error loading ${t}`;l.e(this.TAG,s),this.stop(),r(s)},this.audioElement.oncanplaythrough=()=>c(this,null,function*(){try{if(!this.audioElement)return;if(this.audioContextManager.resumeContext(),this.track)this.seeked?this.seeked=!1:(yield this.audioElement.play(),i([this.track]));else{yield this.audioElement.play();let s=this.audioContextManager.getAudioTrack();this.track=s,i([s])}}catch(s){l.e(this.TAG,\"Error playing audio\",t,s.message),r(s)}}),this.audioElement.onseeked=()=>{this.seeked=!0}})})}getTracks(){return this.track?[this.track.id]:[]}getElement(){return this.audioElement||(this.audioElement=this.getAudioElement()),this.audioElement}stop(){var t,i,r;(t=this.audioElement)==null||t.pause(),(i=this.audioElement)==null||i.removeAttribute(\"src\"),this.audioElement=null,(r=this.audioContextManager)==null||r.cleanup(),this.track=void 0}getAudioElement(){if(this.audioElement)return this.audioElement;let t=document.createElement(\"audio\");return t.crossOrigin=\"anonymous\",t.addEventListener(\"timeupdate\",i=>this.emit(\"progress\",i)),t.addEventListener(\"ended\",()=>{this.emit(\"ended\",null)}),this.audioContextManager=new nt(t),t}};var Pi=class extends Ue{constructor(){super(...arguments);this.TAG=\"[PlaylistVideoManager]\";this.videoElement=null;this.canvasContext=null;this.tracks=[];this.DEFAUL_FPS=24;this.seeked=!1;this.drawImage=()=>{var t,i,r;this.videoElement&&!this.videoElement.paused&&!this.videoElement.ended&&((r=this.canvasContext)==null||r.drawImage(this.videoElement,0,0,(t=this.canvas)==null?void 0:t.width,(i=this.canvas)==null?void 0:i.height),this.timer=setTimeout(()=>{this.drawImage()},1e3/this.DEFAUL_FPS))}}play(t){return this.videoElement=this.getVideoElement(),this.createCanvas(),new Promise((i,r)=>{this.videoElement=this.getVideoElement(),this.videoElement.src=t,this.seeked=!1,this.videoElement.onerror=()=>{let s=`Error loading ${t}`;l.e(this.TAG,s),this.stop(),r(s)},this.videoElement.oncanplaythrough=()=>c(this,null,function*(){var s,o,n;try{if(!this.videoElement)return;if(this.canvas.width=this.videoElement.videoWidth,this.canvas.height=this.videoElement.videoHeight,this.tracks.length===0){this.clearCanvasAndTracks();let d=this.canvas.captureStream();if(!d){l.e(this.TAG,\"Browser does not support captureStream\");return}this.videoElement.onplay=this.drawImage,yield this.audioContextManager.resumeContext(),yield this.videoElement.play();let u=this.audioContextManager.getAudioTrack();d.addTrack(u),d.getTracks().forEach(p=>{this.tracks.push(p)}),i(this.tracks)}else this.seeked?(this.seeked=!1,(n=this.canvasContext)==null||n.drawImage(this.videoElement,0,0,(s=this.canvas)==null?void 0:s.width,(o=this.canvas)==null?void 0:o.height)):(yield this.videoElement.play(),i(this.tracks))}catch(d){l.e(this.TAG,\"Error playing video\",t,d.message),r(d)}}),this.videoElement.onseeked=()=>{this.seeked=!0}})}getTracks(){return this.tracks.map(t=>t.id)}getElement(){return this.videoElement||(this.videoElement=this.getVideoElement()),this.videoElement}stop(){var t,i,r;(t=this.videoElement)==null||t.pause(),(i=this.videoElement)==null||i.removeAttribute(\"src\"),this.videoElement=null,(r=this.audioContextManager)==null||r.cleanup(),this.clearCanvasAndTracks()}clearCanvasAndTracks(){var t;this.tracks=[],(t=this.canvasContext)==null||t.clearRect(0,0,this.canvas.width,this.canvas.height),clearTimeout(this.timer)}getVideoElement(){if(this.videoElement)return this.videoElement;let t=document.createElement(\"video\");return t.crossOrigin=\"anonymous\",t.addEventListener(\"timeupdate\",i=>this.emit(\"progress\",i)),t.addEventListener(\"ended\",()=>{this.emit(\"ended\",null)}),this.audioContextManager=new nt(t),t}createCanvas(){this.canvas||(this.canvas=document.createElement(\"canvas\"),this.canvasContext=this.canvas.getContext(\"2d\"))}};var bi={audio:{list:[],currentIndex:-1,isAutoplayOn:!0},video:{list:[],currentIndex:-1,isAutoplayOn:!0}},Lt=class extends Ue{constructor(t,i){super();this.sdk=t;this.eventBus=i;this.state={audio:m({},bi.audio),video:m({},bi.video)};this.TAG=\"[PlaylistManager]\";this.handlePausePlaylist=r=>c(this,[r],function*({enabled:t,track:i}){var o;if(t)return;let s;i.source===\"audioplaylist\"&&(s=\"audio\"),i.source===\"videoplaylist\"&&(s=\"video\"),s&&((o=this.getElement(s))==null||o.pause())});this.addTrack=(t,i)=>c(this,null,function*(){yield this.sdk.addTrack(t,i),l.d(this.TAG,\"Playlist track added\",ui(t))});this.removeTrack=t=>c(this,null,function*(){yield this.sdk.removeTrack(t,!0),l.d(this.TAG,\"Playlist track removed\",t)});this.audioManager=new Ei,this.videoManager=new Pi,this.addListeners()}getList(t=\"audio\"){return this.state[t].list}setList(t){if(!t||t.length===0){l.w(this.TAG,\"Please pass in a list of HMSPlaylistItem's\");return}t.forEach(i=>{this.state[i.type].list.find(r=>r.id===i.id)||this.state[i.type].list.push(i)})}clearList(t){return c(this,null,function*(){this.isPlaying(t)&&(yield this.stop(t)),this.state[t].list=[]})}removeItem(t,i){return c(this,null,function*(){let{list:r,currentIndex:s}=this.state[i],o=r.findIndex(n=>t===n.id);return o>-1?(s===o&&this.isPlaying(i)&&(yield this.stop(i)),r.splice(o,1),!0):!1})}seek(t,i=\"audio\"){let{currentIndex:r}=this.state[i];if(r===-1)throw S.PlaylistErrors.NoEntryToPlay(\"PLAYLIST\",\"No item is currently playing\");let s=this.getElement(i);if(s){let o=Math.max(s.currentTime+t,0);s.currentTime=Math.min(o,s.duration)}}seekTo(t,i=\"audio\"){let{currentIndex:r}=this.state[i];if(r===-1)throw S.PlaylistErrors.NoEntryToPlay(\"PLAYLIST\",\"No item is currently playing\");if(t<0)throw Error(\"value cannot be negative\");let s=this.getElement(i);s&&(s.currentTime=Math.min(t,s.duration))}setVolume(t,i=\"audio\"){if(t<0||t>100)throw Error(\"Please pass a valid number between 0-100\");let r=this.getElement(i);r&&(r.volume=t*.01)}getVolume(t=\"audio\"){let i=this.getElement(t);return i?Math.floor(i.volume*100):0}getCurrentTime(t=\"audio\"){let i=this.getElement(t);return(i==null?void 0:i.currentTime)||0}getCurrentIndex(t=\"audio\"){return this.state[t].currentIndex}getCurrentProgress(t=\"audio\"){var n;let{list:i,currentIndex:r}=this.state[t],s=(n=i[r])==null?void 0:n.url,o=this.getElement(t);return!s||!o?0:Math.floor(100*(o.currentTime/o.duration))}getCurrentSelection(t=\"audio\"){let{list:i,currentIndex:r}=this.state[t];if(r!==-1)return i[r]}isPlaying(t=\"audio\"){let i=this.getElement(t);return!!i&&!i.paused}setIsAutoplayOn(t=\"audio\",i){this.state[t].isAutoplayOn=i}getPlaybackRate(t=\"audio\"){let i=this.getElement(t);return i?i.playbackRate:1}setPlaybackRate(t=\"audio\",i){if(i<.25||i>2)throw Error(\"Please pass a value between 0.25 and 2.0\");let r=this.getElement(t);r&&(r.playbackRate=i)}setEnabled(s,o){return c(this,arguments,function*(t,{id:i,type:r=\"audio\"}){let d=this.state[r].list.findIndex(p=>p.id===i);if(!i||d===-1){l.w(this.TAG,\"Pass a valid id\");return}let u=this.state[r].list[d].url;t?yield this.play(u,r):yield this.pause(u,r),this.state[r].currentIndex=d,this.setDuration(r)})}playNext(){return c(this,arguments,function*(t=\"audio\"){let{list:i,currentIndex:r}=this.state[t];if(r>=i.length-1)throw S.PlaylistErrors.NoEntryToPlay(\"PLAYLIST\",\"Reached end of playlist\");yield this.play(i[r+1].url,t),this.state[t].currentIndex=r+1,this.setDuration(t)})}playPrevious(){return c(this,arguments,function*(t=\"audio\"){let{list:i,currentIndex:r}=this.state[t];if(r<=0)throw S.PlaylistErrors.NoEntryToPlay(\"PLAYLIST\",\"Reached start of playlist\");yield this.play(i[r-1].url,t),this.state[t].currentIndex=r-1,this.setDuration(t)})}stop(){return c(this,arguments,function*(t=\"audio\"){var r;let i=t===\"audio\"?this.audioManager:this.videoManager;(r=i.getElement())==null||r.pause(),yield this.removeTracks(t),i.stop(),this.state[t].currentIndex=-1})}cleanup(){this.state={audio:m({},bi.audio),video:m({},bi.video)},this.eventBus.localAudioEnabled.unsubscribe(this.handlePausePlaylist),this.eventBus.localVideoEnabled.unsubscribe(this.handlePausePlaylist),this.audioManager.stop(),this.videoManager.stop()}onProgress(t){this.videoManager.on(\"progress\",()=>{try{t({type:\"video\",progress:this.getCurrentProgress(\"video\")})}catch(i){l.e(this.TAG,\"Error in onProgress callback\")}}),this.audioManager.on(\"progress\",()=>{try{t({type:\"audio\",progress:this.getCurrentProgress(\"audio\")})}catch(i){l.e(this.TAG,\"Error in onProgress callback\")}})}onNewTrackStart(t){this.on(\"newTrackStart\",t)}onPlaylistEnded(t){this.on(\"playlistEnded\",t)}onCurrentTrackEnded(t){this.on(\"currentTrackEnded\",t)}getElement(t=\"audio\"){return t===\"audio\"?this.audioManager.getElement():this.videoManager.getElement()}removeTracks(){return c(this,arguments,function*(t=\"audio\"){let r=(t===\"audio\"?this.audioManager:this.videoManager).getTracks();for(let s of r)yield this.removeTrack(s)})}play(r){return c(this,arguments,function*(t,i=\"audio\"){let s=i===\"audio\"?this.audioManager:this.videoManager,o=s.getElement();if(this.isItemCurrentlyPlaying(t,i)){l.w(this.TAG,`The ${i} is currently playing`);return}if(o!=null&&o.src.includes(t))yield o.play();else{o==null||o.pause();let n=yield s.play(t);for(let d of n)yield this.addTrack(d,i===\"audio\"?\"audioplaylist\":\"videoplaylist\")}})}isItemCurrentlyPlaying(t,i){let r=this.getElement(i);return!!(r&&!r.paused&&r.src.includes(t))}setDuration(t=\"audio\"){let i=this.getElement(t),{list:r,currentIndex:s}=this.state[t];r[s]&&(r[s].duration=(i==null?void 0:i.duration)||0),this.emit(\"newTrackStart\",r[s])}pause(r){return c(this,arguments,function*(t,i=\"audio\"){let s=this.getElement(i);s&&!s.paused&&s.src.includes(t)?(s.pause(),l.d(this.TAG,\"paused url\",t)):l.w(this.TAG,\"The passed in url is not currently playing\")})}addListeners(){this.audioManager.on(\"ended\",()=>this.handleEnded(\"audio\")),this.videoManager.on(\"ended\",()=>this.handleEnded(\"video\")),this.eventBus.localAudioEnabled.subscribe(this.handlePausePlaylist),this.eventBus.localVideoEnabled.subscribe(this.handlePausePlaylist)}handleEnded(){return c(this,arguments,function*(t=\"audio\"){let{list:i,currentIndex:r,isAutoplayOn:s}=this.state[t];r===i.length-1?(yield this.stop(t),this.emit(\"playlistEnded\",t)):s?this.playNext(t):yield this.pause(i[r].url,t),this.emit(\"currentTrackEnded\",i[r])})}};var F=a=>a.room,Go=a=>a.errors,Tm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Go,a=>a.length===0?null:a.at(-1)),fm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>a.id),z=a=>a.peers,Ai=a=>a.messages.byID,la=a=>a.messages.allIDs,N=a=>a.tracks,ua=a=>a.settings,zr=a=>a.appData,vm=a=>a.devices,Wo=a=>a.speakers,Mm=a=>a.connectionQualities,Be=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([F],a=>a&&a.isConnected),ym=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Be,F],(a,e)=>a?e.peerCount!==void 0?e.peerCount||1:e.peers.length:Math.max(e.peerCount!==void 0?e.peerCount:e.peers.length-1,0)),$o=a=>a.hideLocalPeer,ke=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([F,z,$o],(a,e,t)=>t?a.peers.filter(i=>a.localPeer!==i).map(i=>e[i]):a.peers.map(i=>e[i])),Ko=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(N,a=>Object.values(a)),re=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,z,(a,e)=>e[a.localPeer]),Ie=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>a.localPeer),km=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(re,a=>a==null?void 0:a.name),Em=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(re,a=>a==null?void 0:a.roleName),le=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(re,a=>a==null?void 0:a.audioTrack),Z=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(re,a=>a==null?void 0:a.videoTrack),qo=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(re,a=>a==null?void 0:a.auxiliaryTracks),pa=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([le,Z,qo],(a,e,t)=>{let i=t?[...t]:[];return a&&i.unshift(a),e&&i.unshift(e),i}),Pm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ke,a=>a.filter(e=>!e.isLocal)),bm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(z,Wo,(a,e)=>{let t=Object.entries(e).sort((i,r)=>{var n,d;let s=((n=i[1])==null?void 0:n.audioLevel)||0;return(((d=r[1])==null?void 0:d.audioLevel)||0)>s?1:-1});if(t.length>0&&t[0][1].audioLevel&&t[0][1].audioLevel>0){let i=t[0][1].peerID;if(i in a)return a[i]}return null}),Am=a=>{let e=re(a);return ze(a,e==null?void 0:e.audioTrack)},Yr=a=>{let e=re(a);return ze(a,e==null?void 0:e.videoTrack)},ha=a=>{let e=re(a);return ys(a,e==null?void 0:e.videoTrack)},Xr=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(re,N,(a,e)=>{let{video:t,audio:i}=Fe(e,a);return!!(t||i)}),jo=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(z,N,(a,e)=>{let t;for(let i in a){let r=a[i],{video:s,audio:o}=Fe(e,r);if(s)return r;o&&!t&&(t=r)}return t}),Im=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(jo,a=>!!a),Rm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(z,N,(a,e)=>{for(let t in a){let i=a[t],{audio:r,video:s}=Fe(e,i);if(!s&&r)return i}}),Hm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(z,N,(a,e)=>{let t=[],i=[];for(let r in a){let s=a[r],{video:o,audio:n}=Fe(e,s);o?t.push(s):n&&i.push(s)}return t.concat(i)}),Cm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(z,N,(a,e)=>{for(let t in e){let i=e[t];if(ft(i)&&Tt(i)&&i.peerId)return a[i.peerId]}}),Lm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(z,N,(a,e)=>{for(let t in e){let i=e[t];if(ci(i)&&i.peerId)return a[i.peerId]}}),Dm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Ko,a=>a.filter(Ms)),wm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(la,a=>a.length),_m=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Ai,a=>Object.values(a).filter(e=>!e.read).length),Dt=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(la,Ai,(a,e)=>{let t=[];return a.forEach(i=>{t.push(e[i])}),t}),Jo=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Dt,a=>a.filter(e=>{var t;return!e.recipientPeer&&!(e.recipientRoles&&((t=e.recipientRoles)==null?void 0:t.length)>0)})),Nm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Jo,a=>a.filter(e=>!e.read).length),se=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([F],a=>a&&a.roomState),ma=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(se,a=>a===\"Preview\"),Om=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>a.roomState!==\"Disconnected\"),xm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>!a.transcriptions||a.transcriptions.length<=0?!1:a.transcriptions.some(e=>e.mode===\"caption\"&&e.state===\"started\")),Ee=a=>a.roles,Um=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Ee],a=>Object.keys(a)),ct=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([re,Ee],(a,e)=>a!=null&&a.roleName?e[a.roleName]:null),Qo=a=>{var e;return(e=a.preview)==null?void 0:e.asRole},Sa=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Qo,Ee],(a,e)=>a?e[a]:null),Bm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([ct],a=>{var e;return(e=a==null?void 0:a.subscribeParams)!=null&&e.subscribeToRoles?a.subscribeParams.subscribeToRoles.length>0:!1}),ga=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ct,a=>a==null?void 0:a.permissions),Vm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>a.recording),Fm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>a.rtmp),Gm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>a.hls),Wm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>a.transcriptions),$m=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>a.sessionId),Km=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>a.startedAt),qm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>!!a.isLargeRoom),jm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>!!a.isEffectsEnabled),Jm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>!!a.isVBEnabled),Qm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,a=>a.effectsKey),zm=a=>a.templateAppData,Ym=a=>a.sessionMetadata,Ta=a=>a.polls,Xm=a=>Object.values(a.polls),Zm=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ke,a=>a.filter(e=>e.isHandRaised)),zo=a=>a.whiteboards,eS=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(zo,a=>Object.values(a)[0]);var va=(a=\"audio\")=>e=>e.playlist[a].list,Zr=(a=\"audio\")=>e=>e.playlist[a].selection,Ma=(a=\"audio\")=>e=>e.playlist[a].progress,ya=(a=\"audio\")=>e=>e.playlist[a].currentTime,ka=(a=\"audio\")=>e=>e.playlist[a].playbackRate,Ea=(a=\"audio\")=>e=>e.playlist[a].volume,Pa=(a=\"audio\")=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(va(a),e=>Object.values(e)),ba=(a=\"audio\")=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(va(a),Zr(a),(e,t)=>{if(t.id)return e[t.id]}),Aa={selection:Zr(\"audio\"),progress:Ma(\"audio\"),currentTime:ya(\"audio\"),playbackRate:ka(\"audio\"),volume:Ea(\"audio\"),list:Pa(\"audio\"),selectedItem:ba(\"audio\")},Ia={selection:Zr(\"video\"),progress:Ma(\"video\"),currentTime:ya(\"video\"),playbackRate:ka(\"video\"),volume:Ea(\"video\"),list:Pa(\"video\"),selectedItem:ba(\"video\")};function H(a){return e=>t=>a(t,e)}var wt=\"HMS-Store:\",b=class{static v(e,...t){this.log(0,e,...t)}static d(...e){this.log(1,...e)}static i(...e){this.log(2,...e)}static w(...e){this.log(3,...e)}static e(...e){this.log(6,...e)}static time(e){this.log(4,\"[HMSPerformanceTiming]\",e)}static timeEnd(e){this.log(5,\"[HMSPerformanceTiming]\",e,e)}static cleanup(){performance.clearMarks(),performance.clearMeasures()}static log(e,...t){if(!(this.level.valueOf()>e.valueOf()))switch(e){case 0:{console.log(wt,...t);break}case 1:{console.debug(wt,...t);break}case 2:{console.info(wt,...t);break}case 3:{console.warn(wt,...t);break}case 6:{console.error(wt,...t);break}case 4:{performance.mark(t[1]);break}case 5:{let i=t[0],r=t[1];try{let s=performance.measure(r,r);this.log(1,i,r,s==null?void 0:s.duration),performance.clearMarks(r),performance.clearMeasures(r)}catch(s){this.log(1,i,r,s)}break}}}};b.level=0;var es=(a,e)=>e,_t=(a,e)=>e,Ra=(a,e)=>e,Yo=(a,e)=>e,Xo=(a,e)=>e,Y=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([z,es],(a,e)=>e?a[e]:null),ts=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([N,_t],(a,e)=>e?a[e]:null),Zo=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([N,_t],(a,e)=>{if(!e)return null;let t=a[e];return(t==null?void 0:t.type)===\"video\"?t:null}),en=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([N,_t],(a,e)=>{if(!e)return null;let t=a[e];return(t==null?void 0:t.type)===\"audio\"?t:null}),tn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([N,_t],(a,e)=>{if(!e)return null;let t=a[e];return(t==null?void 0:t.type)===\"audio\"&&(t==null?void 0:t.source)===\"screen\"?t:null}),rn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([N,_t],(a,e)=>{if(!e)return null;let t=a[e];return(t==null?void 0:t.type)===\"video\"&&(t==null?void 0:t.source)===\"screen\"?t:null}),sn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Ta,Xo],(a,e)=>e?a[e]:null),ee=H(Y),uS=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([zr,Yo],(a,e)=>{if(a)return e?a[e]:a}));function pS(a){return e=>{if(e.sessionStore)return a?e.sessionStore[a]:e.sessionStore}}var hS=(...a)=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([zr],e=>{if(e){if(a&&a.length>0){let t=e;for(let i of a){if(!i)return t;t=t==null?void 0:t[i]}return t}return e}}),mS=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Y,a=>a==null?void 0:a.name)),SS=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Y,a=>a==null?void 0:a.type)),Ii=H(ts),Ha=H(Zo),gS=H(en),TS=H(tn),fS=H(rn),an=H((a,e)=>{let t=Y(a,e);if(t&&t.videoTrack&&t.videoTrack!==\"\")return a.tracks[t.videoTrack]}),on=H((a,e)=>{let t=Y(a,e);if(t&&t.audioTrack&&t.audioTrack!==\"\")return a.tracks[t.audioTrack]}),vS=an,MS=H((a,e)=>{let t=Y(a,e);return(t==null?void 0:t.auxiliaryTracks.map(i=>a.tracks[i]))||[]}),Ca=(a,e)=>e?a.speakers[e]:null,yS=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Ca,a=>(a==null?void 0:a.audioLevel)||0)),nn=(a,e)=>{let t=on(e)(a);return Ca(a,t==null?void 0:t.id)},kS=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(nn,a=>(a==null?void 0:a.audioLevel)||0)),ES=H((a,e)=>{if(e)return a.connectionQualities[e]}),PS=H((a,e)=>{let t=Y(a,e);if(t){let i=t==null?void 0:t.auxiliaryTracks.find(r=>gt(a.tracks[r]));return i?a.tracks[i]:void 0}}),bS=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(N,Y,(a,e)=>{let t=e==null?void 0:e.auxiliaryTracks.find(i=>{let r=a[i];return ft(r)&&Tt(r)});return t?a[t]:void 0})),AS=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(N,Y,(a,e)=>{let t=e==null?void 0:e.auxiliaryTracks.find(i=>{let r=a[i];return ft(r)&&gt(r)});return t?a[t]:void 0})),IS=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(N,Y,(a,e)=>{let t=e==null?void 0:e.auxiliaryTracks.find(i=>{let r=a[i];return ci(r)&&gt(r)});return t?a[t]:void 0})),La=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(N,Y,(a,e)=>Fe(a,e))),RS=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(La(a),e=>e.video),Da=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(La(a),e=>e.audio),HS=H((a,e)=>{let t=Y(a,e);return ze(a,t==null?void 0:t.audioTrack)}),CS=H((a,e)=>{let t=Y(a,e);return ze(a,t==null?void 0:t.videoTrack)}),wa=H((a,e)=>{if(e&&a.tracks[e])return a.tracks[e].volume===0}),LS=H((a,e)=>{let t=Y(a,e);return wa(t==null?void 0:t.audioTrack)(a)}),DS=H((a,e)=>{let t=Da(e)(a);return wa(t==null?void 0:t.id)(a)}),_a=H((a,e)=>{let t=ts(a,e);if(t){if(t.type!==\"audio\"){b.w(\"Please pass audio track here\");return}return t.volume}}),wS=H((a,e)=>{let t=Y(a,e);return _a(t==null?void 0:t.audioTrack)(a)}),_S=H((a,e)=>{let t=Da(e)(a);return _a(t==null?void 0:t.id)(a)}),NS=H((a,e)=>{let t=ts(a,e);if(t){if(t.type!==\"video\"){b.w(\"Please pass video track here\");return}return t.layer}}),Na=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Dt,Ie,es],(a,e,t)=>{if(t)return a.filter(i=>{var r;return!i.recipientPeer&&!((r=i.recipientRoles)!=null&&r.length)||i.sender&&![e,t].includes(i.sender)?!1:[e,t].includes(i.recipientPeer)})}),Oa=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Dt,Ra],(a,e)=>{if(e)return a.filter(t=>{var i,r;return(i=t.recipientRoles)!=null&&i.length?(r=t.recipientRoles)==null?void 0:r.includes(e):!1})}),cn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Dt,a=>a.filter(e=>{var t;return!e.recipientPeer&&!((t=e.recipientRoles)!=null&&t.length)})),dn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Oa,Ra],a=>a?a.filter(e=>!e.read).length:0),ln=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Na,es],a=>a?a.filter(e=>!e.read).length:0),OS=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(cn,a=>a.filter(e=>!e.read).length),xS=H(Na),US=H(Oa),BS=H(dn),VS=H(ln),FS=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([ke],e=>e.filter(t=>t.roleName===a)),GS=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([ke],e=>e.filter(t=>t.roleName?a.includes(t.roleName):!1)),WS=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ee(a),e=>{try{return e!=null&&e.metadata&&e.metadata!==\"\"?JSON.parse(e.metadata):{}}catch(t){return console.error(\"cannot parse peer metadata\",t),{}}}),$S=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ee(a),e=>!!(e!=null&&e.isHandRaised)),KS=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ee(a),e=>e==null?void 0:e.name),xa=H(sn),qS=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Ai,e=>e[a]),jS=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ct,e=>e!=null&&e.permissions.transcriptions?e.permissions.transcriptions[a].length>0:!1);var XS=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([z,N],(a,e)=>Object.values(a).map(i=>{var r;return{peer:i,isAudioEnabled:i.audioTrack?(r=e[i.audioTrack])==null?void 0:r.enabled:!1}})),un=a=>a.roleChangeRequests[0]||null,ZS=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([un,z,Ee],(a,e,t)=>a?{requestedBy:a.requestedBy?e[a.requestedBy]:void 0,role:t[a.roleName],token:a.token}:null),eg=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([ct],a=>vt(a)),tg=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Sa],a=>vt(a));var pn=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Ee],e=>e[a]),og=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(pn(a),e=>vt(e)),hn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Z,N],(a,e)=>{let t=null;return a&&(t=e[a]),(t==null?void 0:t.plugins)||[]}),mn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([le,N],(a,e)=>{let t=null;return a&&(t=e[a]),(t==null?void 0:t.plugins)||[]}),ng=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([hn],e=>e.includes(a)),cg=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([mn],e=>e.includes(a)),dg=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ke,e=>e.find(a)),lg=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ke,e=>e.filter(a)),ug=a=>(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(F,e=>e.joinedAt&&Date.now()-e.joinedAt.getTime()<=a);var Hi={0:\"PEER_JOINED\",1:\"PEER_LEFT\",8:\"ROLE_UPDATED\",10:\"NAME_UPDATED\",11:\"METADATA_UPDATED\",12:\"HAND_RAISE_CHANGED\"},Nt={0:\"TRACK_ADDED\",1:\"TRACK_REMOVED\",2:\"TRACK_MUTED\",3:\"TRACK_UNMUTED\",5:\"TRACK_DEGRADED\",6:\"TRACK_RESTORED\",4:\"TRACK_DESCRIPTION_CHANGED\"},Ci={0:\"POLL_CREATED\",1:\"POLL_STARTED\",2:\"POLL_STOPPED\",4:\"POLL_VOTES_UPDATED\",3:\"POLLS_LIST\"},Ua={TRANSCRIPTION_STATE_UPDATED:\"TRANSCRIPTION_STATE_UPDATED\"};var is=\"hmsNotification\",Li=class{constructor(e){this.id=0;this.onNotification=(e,t)=>{let i=r=>{if(t){let s;if(Array.isArray(t)?s=t.includes(r.type):s=t===r.type,!s)return}e(r)};return this.eventEmitter.addListener(is,i),()=>{this.eventEmitter.removeListener(is,i)}};this.store=e,this.eventEmitter=new eventemitter2__WEBPACK_IMPORTED_MODULE_5__.EventEmitter2({maxListeners:Object.keys(Pr).length})}sendPlaylistTrackEnded(e){let t=this.createNotification(\"PLAYLIST_TRACK_ENDED\",e,\"info\");this.emitEvent(t)}sendDeviceChange(e){var i;let t=this.createNotification(\"DEVICE_CHANGE_UPDATE\",e,e.error?\"error\":\"info\",`Selected ${e.type} device - ${(i=e.selection)==null?void 0:i.label}`);this.emitEvent(t)}sendLeaveRoom(e){var r;let t=(r=e.requestedBy)==null?void 0:r.name,i=this.createNotification(e.roomEnded||!t?\"ROOM_ENDED\":\"REMOVED_FROM_ROOM\",e,\"info\",`${e.roomEnded?\"Room ended\":\"Removed from room\"} ${t?`by ${t}`:\"\"}`);this.emitEvent(i)}sendPeerList(e){if(e.length===0)return;let t=this.createNotification(\"PEER_LIST\",e,\"info\");this.emitEvent(t)}sendPeerUpdate(e,t){let i=this.store.getState(ee(t==null?void 0:t.id))||t,r=Hi[e];if(r&&i){let s=this.createNotification(r,i,\"info\");this.emitEvent(s)}}sendTrackUpdate(e,t){let i=this.store.getState(Ii(t)),r=Nt[e];if(r){let s=this.createNotification(r,i,\"info\");this.emitEvent(s)}}sendMessageReceived(e){let t=this.createNotification(\"NEW_MESSAGE\",e,\"info\");this.emitEvent(t)}sendError(e){let t=this.createNotification(\"ERROR\",e,\"error\");this.emitEvent(t)}sendReconnecting(e){let t=this.createNotification(\"RECONNECTING\",e,\"error\");this.emitEvent(t)}sendReconnected(){let e=this.createNotification(\"RECONNECTED\",null,\"info\");this.emitEvent(e)}sendChangeTrackStateRequest(e){let t=this.createNotification(\"CHANGE_TRACK_STATE_REQUEST\",e,\"info\");this.emitEvent(t)}sendChangeMultiTrackStateRequest(e){let t=this.createNotification(\"CHANGE_MULTI_TRACK_STATE_REQUEST\",e,\"info\");this.emitEvent(t)}sendPollUpdate(e,t){let i=Ci[e],r=this.store.getState(xa(t));if(i){let s=this.createNotification(i,r,\"info\");this.emitEvent(s)}}sendTranscriptionUpdate(e){let t=this.createNotification(Ua.TRANSCRIPTION_STATE_UPDATED,e,\"info\");this.emitEvent(t)}emitEvent(e){this.eventEmitter.emit(is,e)}createNotification(e,t,i,r=\"\"){return this.id++,{id:this.id,type:e,message:r,data:t,severity:i}}};var Di=class{constructor(e){this.queuedUpdates={};this.timers={};this.DEFAULT_INTERVAL_MS=50;this.store=e}setState(e,t,i=this.DEFAULT_INTERVAL_MS){this.queuedUpdates[t]=this.queuedUpdates[t]||[],this.queuedUpdates[t].push(e),!this.timers[t]&&(window?this.timers[t]=window.setTimeout(()=>this.setStateBatched(t),i):this.setStateBatched(t))}setStateBatched(e){var t;if(((t=this.queuedUpdates[e])==null?void 0:t.length)>0){let i=r=>{this.queuedUpdates[e].forEach(s=>{try{s(r)}catch(o){b.w(\"failed to update store\",o)}})};console.time(`timed-${e}`),this.store.namedSetState(i,e),console.timeEnd(`timed-${e}`)}delete this.queuedUpdates[e],window&&this.timers[e]&&(window.clearTimeout(this.timers[e]),delete this.timers[e])}};function Ba(a){return a instanceof ie||a instanceof O}var Va=(a,e)=>{let t=Ot(Object.keys(a),Object.keys(e));for(let i of t){let r=a[i],s=e[i];je(r,s)?(ae(r.auxiliaryTracks,s.auxiliaryTracks)&&(s.auxiliaryTracks=r.auxiliaryTracks),r.groups&&ae(r.groups,s.groups)&&(s.groups=r.groups),Object.assign(r,s)):as(r,s)?delete a[i]:wi(r,s)&&(a[i]=s)}},Fa=(a,e)=>{let t=Ot(Object.keys(a),Object.keys(e));for(let i of t){let r=a[i],s=e[i];je(r,s)?(ss(r,s),Object.assign(r,s)):as(r,s)?delete a[i]:wi(r,s)&&(a[i]=s)}},Ga=(a,e)=>{let t=Ot(Object.keys(a),Object.keys(e));for(let i of t){let r=a[i],s=e[i];je(r,s)?(r.questions&&ae(r.questions,s.questions)&&(s.questions=r.questions),Object.assign(r,s)):wi(r,s)&&(a[i]=s)}},rs=(a,e)=>{let t=Ot(Object.keys(a),Object.keys(e));for(let i of t){let r=a[i],s=e[i];je(r,s)?Object.assign(r,s):as(r,s)?delete a[i]:wi(r,s)&&(a[i]=s)}},Wa=(a,e,t)=>{let i=t.reduce((s,o)=>(s[o.firstTrackId]=Object.values(e[o.getTrackIDBeingSent()]||{}).sort((n,d)=>!n.rid||!d.rid?0:n.rid<d.rid?-1:1),s),{}),r=Ot(Object.keys(a),Object.keys(i));for(let s of r){if(!i[s]){delete a[s];continue}a[s]=i[s]}},ss=(a,e)=>{a.plugins&&ae(a.plugins,e.plugins)&&(e.plugins=a.plugins),a.type===\"video\"&&a.layerDefinitions&&ae(a.layerDefinitions,e.layerDefinitions)&&(e.layerDefinitions=a.layerDefinitions)},je=(a,e)=>a&&e,as=(a,e)=>a&&!e,wi=(a,e)=>!a&&e,ae=(a,e)=>{if(a===e||a.length===0&&(e==null?void 0:e.length)===0)return!0;if(!a||!e||a.length!==e.length)return!1;for(let t=0;t<a.length;t++)if(a[t]!==e[t])return!1;return!0},Ot=(a,e)=>{let t=new Set;for(let i of a)t.add(i);for(let i of e)t.add(i);return Array.from(t)};var _=class a{static convertPeer(e){var t,i,r;return{id:e.peerId,name:e.name,roleName:(t=e.role)==null?void 0:t.name,isLocal:e.isLocal,videoTrack:(i=e.videoTrack)==null?void 0:i.trackId,audioTrack:(r=e.audioTrack)==null?void 0:r.trackId,auxiliaryTracks:e.auxiliaryTracks.map(s=>s.trackId),customerUserId:e.customerUserId,metadata:e.metadata,joinedAt:e.joinedAt,groups:e.groups,isHandRaised:e.isHandRaised,type:e.type}}static convertTrack(e,t){let i={id:e.trackId,source:e.source,type:e.type,enabled:e.enabled,displayEnabled:e.enabled,peerId:e.peerId||t};return this.enrichTrack(i,e),i}static enrichTrack(e,t){let i=t.getMediaTrackSettings();t instanceof ie&&(e.volume=t.getVolume()||0),a.updateDeviceID(e,t),a.enrichLocalTrack(e,t),e.type===\"video\"&&(e.source===\"screen\"?(e.displaySurface=i.displaySurface,a.enrichScreenTrack(e,t)):e.source===\"regular\"&&(e.facingMode=i.facingMode),e.height=i.height,e.width=i.width,a.enrichVideoTrack(e,t)),a.enrichPluginsDetails(e,t)}static enrichLocalTrack(e,t){(t instanceof G||t instanceof de)&&(e.isPublished=t.isPublished)}static updateDeviceID(e,t){var i;t instanceof G||t instanceof de?e.deviceID=t.settings.deviceId:e.deviceID=(i=t.getMediaTrackSettings())==null?void 0:i.deviceId}static enrichVideoTrack(e,t){t instanceof O&&(e.layer=t.getLayer(),e.preferredLayer=t.getPreferredLayer(),e.degraded=t.degraded),(t instanceof O||t instanceof G)&&(ae(t.getSimulcastDefinitions(),e.layerDefinitions)||(e.layerDefinitions=t.getSimulcastDefinitions()))}static enrichScreenTrack(e,t){var i,r;if(t instanceof G){let s=(i=t.getCaptureHandle)==null?void 0:i.call(t);(s==null?void 0:s.handle)!==((r=e.captureHandle)==null?void 0:r.handle)&&(e.captureHandle=s),t.isCurrentTab&&(e.displaySurface=\"selfBrowser\")}}static enrichPluginsDetails(e,t){(t instanceof G||t instanceof de)&&(ae(t.getPlugins(),e.plugins)||(e.plugins=t.getPlugins()))}static convertRoom(e,t){let{recording:i,rtmp:r,hls:s,transcriptions:o}=a.convertRecordingStreamingState(e.recording,e.rtmp,e.hls,e.transcriptions);return{id:e.id,name:e.name,localPeer:t,recording:i,rtmp:r,hls:s,transcriptions:o,sessionId:e.sessionId,startedAt:e.startedAt,joinedAt:e.joinedAt,peerCount:e.peerCount,isLargeRoom:e.large_room_optimization,isEffectsEnabled:e.isEffectsEnabled,disableNoneLayerRequest:e.disableNoneLayerRequest,isVBEnabled:e.isVBEnabled,effectsKey:e.effectsKey,isHipaaEnabled:e.isHipaaEnabled,isNoiseCancellationEnabled:e.isNoiseCancellationEnabled}}static convertMessage(e,t){var i,r,s,o;return{sender:(i=e.peer)==null?void 0:i.peer_id,senderName:(r=e.peer)==null?void 0:r.info.name,senderRole:(s=e.peer)==null?void 0:s.role,senderUserId:(o=e.peer)==null?void 0:o.info.user_id,recipientPeer:e.private?t:void 0,recipientRoles:e.roles,time:new Date(e.timestamp),type:e.info.type,message:e.info.message,id:e.message_id}}static convertRoles(e){let t={};return e&&e.forEach(i=>{t[i.name]=i}),t}static convertRoleChangeRequest(e){var t;return{requestedBy:(t=e.requestedBy)==null?void 0:t.peerId,roleName:e.role.name,token:e.token}}static convertException(e){let t=\"trackType\"in e,i={code:e.code,action:e.action,name:e.name,message:e.message,description:e.description,isTerminal:e.isTerminal,nativeError:e.nativeError,timestamp:new Date};return t&&(i.trackType=e==null?void 0:e.trackType),i}static convertDeviceChangeUpdate(e){let t={devices:e.devices,selection:e.selection,type:e.type};return e.error&&(t.error=this.convertException(e.error)),t}static convertPlaylist(e){let t=this.getConvertedPlaylistType(e,\"audio\"),i=this.getConvertedPlaylistType(e,\"video\");return{audio:t,video:i}}static convertPlaylistItem(e,t){let i=t.type,r=e.getCurrentSelection(i),s=e.isPlaying(i),o=t.url===(r==null?void 0:r.url);return M(m({},t),{type:t.type,selected:o,playing:o&&s})}static getConvertedPlaylistType(e,t){let i={},r=e.getCurrentSelection(t),s=e.getCurrentProgress(t),o=e.getVolume(t),n=e.getList(t),d=e.getCurrentIndex(t);return e.getList(t).forEach(u=>{i[u.id]=a.convertPlaylistItem(e,u)}),{list:i,selection:{id:r==null?void 0:r.id,hasPrevious:d>0,hasNext:d<n.length-1},progress:s,volume:o,currentTime:e.getCurrentTime(t),playbackRate:e.getPlaybackRate(t)}}static convertRecordingStreamingState(e,t,i,r){var s;return{recording:{browser:m({running:!1},e==null?void 0:e.browser),server:m({running:!1},e==null?void 0:e.server),hls:m({running:!1},e==null?void 0:e.hls)},rtmp:m({running:!1},t),hls:{variants:((s=i==null?void 0:i.variants)==null?void 0:s.map(o=>o))||[],running:!!(i!=null&&i.running),error:i==null?void 0:i.error},transcriptions:r||[]}}};var xt=class{constructor(e,t,i,r){this.playlistManager=e;this.syncPlaylistState=i;this.store=r;this.type=t}play(e){return c(this,null,function*(){if(!e){b.w(\"Please pass id to play\");return}yield this.playlistManager.setEnabled(!0,{id:e,type:this.type})})}pause(){return c(this,null,function*(){let e=this.type===\"audio\"?Aa:Ia,t=this.store.getState(e.selection);if(!t.id){b.w(\"No item is currently playing to pause\");return}yield this.playlistManager.setEnabled(!1,{id:t.id,type:this.type})})}playNext(){return c(this,null,function*(){yield this.playlistManager.playNext(this.type)})}playPrevious(){return c(this,null,function*(){yield this.playlistManager.playPrevious(this.type)})}seek(e){this.playlistManager.seek(e,this.type),this.syncPlaylistState(`seekOn${this.type}Playlist`)}seekTo(e){this.playlistManager.seekTo(e,this.type),this.syncPlaylistState(`seekToOn${this.type}Playlist`)}setVolume(e){this.playlistManager.setVolume(e,this.type),this.syncPlaylistState(`setVolumeOn${this.type}Playlist`)}setList(e){this.playlistManager.setList(e),this.syncPlaylistState(`setListOn${this.type}Playlist`)}stop(){return c(this,null,function*(){yield this.playlistManager.stop(this.type),this.syncPlaylistState(`stop${this.type}Playlist`)})}setIsAutoplayOn(e){this.playlistManager.setIsAutoplayOn(this.type,e)}setPlaybackRate(e){this.playlistManager.setPlaybackRate(this.type,e),this.syncPlaylistState(`set${this.type}PlaybackRate`)}removeItem(e){return c(this,null,function*(){let t=yield this.playlistManager.removeItem(e,this.type);return t&&this.syncPlaylistState(`remove${this.type}PlaylistItem`),t})}clearList(){return c(this,null,function*(){yield this.playlistManager.clearList(this.type),this.syncPlaylistState(`clear${this.type}Playlist`)})}};var _i=class{constructor(e,t){this.sdk=e;this.setLocally=t}get sdkSessionStore(){return this.sdk.getSessionStore()}set(e,t){return c(this,null,function*(){let{value:i}=yield this.sdkSessionStore.set(String(e),t);this.setLocally({key:e,value:i})})}observe(e){return c(this,null,function*(){let t=Array.isArray(e)?e.map(i=>String(i)):[String(e)];yield this.sdkSessionStore.observe(t)})}unobserve(e){return c(this,null,function*(){let t=Array.isArray(e)?e.map(i=>String(i)):[String(e)];yield this.sdkSessionStore.unobserve(t)})}};var Ni=class{constructor(e,t){this.TAG=\"[BeamSpeakerLabelsLogger]\";this.intervalMs=100,this.shouldMonitor=!1,this.hasStarted=!1,this.unsubs=[],this.analysers={},this.store=e,this.actions=t}start(){return c(this,null,function*(){if(this.hasStarted)return;this.hasStarted=!0,b.d(\"starting audio level monitor for remote peers\",this.store);let e=this.store.getState(Be);b.d(\"starting audio levels is connected to room\",e),e&&(yield this.monitorAudioLevels());let t=this.store.subscribe(this.monitorAudioLevels.bind(this),Be);this.unsubs.push(t)})}stop(){return c(this,null,function*(){this.hasStarted&&(this.hasStarted=!1,this.shouldMonitor=!1,this.unsubs.forEach(e=>e()),b.d(\"stopped audio level monitor for remote peers\"))})}monitorAudioLevels(){return c(this,null,function*(){if(!this.store.getState(Be)){this.shouldMonitor&&(b.i(\"room no longer connected, stopping audio level monitoring for remote\"),this.shouldMonitor=!1);return}if(this.shouldMonitor)return;b.i(\"monitoring audio levels\"),this.shouldMonitor=!0;let t=()=>{this.shouldMonitor?(this.logAllPeersAudioLevels(),setTimeout(t,this.intervalMs)):b.i(\"stopped monitoring audio levels\")};setTimeout(t,1e3)})}logAllPeersAudioLevels(){return c(this,null,function*(){var r;if(!window.__triggerBeamEvent__)return;let e=this.store.getState(ke),t=e.filter(s=>!!s.audioTrack);b.d(this.TAG,\"Peers Without audio track\",e.filter(s=>!s.audioTrack).map(s=>s.id).join(\",\"));let i=[];for(let s of t){let o=this.actions.getTrackById(s.audioTrack||\"\"),n=(r=o==null?void 0:o.stream)==null?void 0:r.nativeStream;if(s.joinedAt&&n){let d=yield this.getAudioLevel(s,n);b.d(this.TAG,s.id,d),d.level>0&&i.push(d)}}if(i.length>0){let s={event:\"app-audio-level\",data:i};b.d(\"logging audio levels\",JSON.stringify(i)),window.__triggerBeamEvent__(JSON.stringify(s))}})}getAudioLevel(e,t){return c(this,null,function*(){this.analysers[t.id]||(this.analysers[t.id]=this.createAnalyserNode(t));let i=this.analysers[t.id],r=this.calculateAudioLevel(i);return{peerId:e.id,peerName:e.name,level:r}})}createAnalyserNode(e){this.audioContext||(this.audioContext=new AudioContext);let t=this.audioContext.createAnalyser();return this.audioContext.createMediaStreamSource(e).connect(t),t}calculateAudioLevel(e){let t=new Uint8Array(e.fftSize);e.getByteTimeDomainData(t);let i=.009,r=i;for(let n of t)r=Math.max(r,(n-128)/128);let s=(Math.log(i)-Math.log(r))/Math.log(i);return Math.ceil(Math.min(Math.max(s*100,0),100))}};var $a=2e4,Ka=1e4,dt={name:\"diagnostics-role\",priority:1,publishParams:{allowed:[\"audio\",\"video\"],audio:{bitRate:32,codec:\"opus\"},video:{bitRate:100,codec:\"vp8\",frameRate:30,height:720,width:1280},screen:{bitRate:100,codec:\"vp8\",frameRate:10,height:1080,width:1920}},subscribeParams:{subscribeToRoles:[],maxSubsBitRate:3200},permissions:{browserRecording:!1,changeRole:!1,endRoom:!1,hlsStreaming:!1,mute:!1,pollRead:!1,pollWrite:!1,removeOthers:!1,rtmpStreaming:!1,unmute:!1}},qa=\"https://100ms.live/test-audio.wav\";var Oi=class{constructor(){this.networkScores=[];this.lastPushedAt=0}pushScore(e){!e||e<0||(this.networkScores.length===0?(this.networkScores.push(e),this.lastPushedAt=Date.now()):this.addPendingCQSTillNow())}addPendingCQSTillNow(){if(this.networkScores.length>0){let e=(Date.now()-this.lastPushedAt)/1e3;for(;e>0;)this.networkScores.push(this.networkScores[this.networkScores.length-1]),e-=1;this.lastPushedAt=Date.now()}}getCQS(){return this.networkScores.reduce((e,t)=>e+t,0)/this.networkScores.length}};var gn=a=>!!a&&!isNaN(a),oe=a=>a[a.length-1],Ve=(a,e)=>{let t=a.filter(i=>gn(e(i)));return t.reduce((i,r)=>i+(e(r)||0),0)/t.length},xi=class{constructor(e){this.sdk=e;this.peerStatsList=[];this.localAudioTrackStatsList=[];this.localVideoTrackStatsList=[];this.remoteAudioTrackStatsList=[];this.remoteVideoTrackStatsList=[]}handleStatsUpdate(e){return c(this,null,function*(){var n,d,u,p,h,T,g,f;let t=e.getLocalPeerStats();t&&this.peerStatsList.push(t);let i=(u=(d=(n=this.sdk.getLocalPeer())==null?void 0:n.audioTrack)==null?void 0:d.nativeTrack)==null?void 0:u.id,r=(T=(h=(p=this.sdk.getLocalPeer())==null?void 0:p.videoTrack)==null?void 0:h.nativeTrack)==null?void 0:T.id,s=e.getLocalTrackStats();s&&(i&&this.localAudioTrackStatsList.push(s[i]),r&&this.localVideoTrackStatsList.push(s[r]));let o=yield(f=(g=this.sdk.getWebrtcInternals())==null?void 0:g.getSubscribePeerConnection())==null?void 0:f.getStats();o==null||o.forEach(E=>{if(E.type===\"inbound-rtp\"){let v=E.kind===\"audio\"?this.remoteAudioTrackStatsList:this.remoteVideoTrackStatsList,R=Ht(\"bytesReceived\",E,oe(v));v.push(M(m({},E),{bitrate:R}))}})})}buildReport(){var E,v,R,$,ue,ge,pe,St,hs,ms;let e=(E=oe(this.peerStatsList))==null?void 0:E.publish,t=(v=oe(this.peerStatsList))==null?void 0:v.subscribe,i=e!=null&&e.responsesReceived?((e==null?void 0:e.totalRoundTripTime)||0)/e.responsesReceived:0,r=t!=null&&t.responsesReceived?((t==null?void 0:t.totalRoundTripTime)||0)/t.responsesReceived:0,s=Number(((i+r)/2*1e3).toFixed(2)),o=((R=oe(this.remoteAudioTrackStatsList))==null?void 0:R.packetsReceived)||0,n=(($=oe(this.remoteVideoTrackStatsList))==null?void 0:$.packetsReceived)||0,d=this.localAudioTrackStatsList.map(B=>B?Ve(Object.values(B),te=>te.bitrate):0),u=this.localVideoTrackStatsList.map(B=>B?Ve(Object.values(B),te=>te.bitrate):0),p=((ue=oe(this.remoteAudioTrackStatsList))==null?void 0:ue.jitter)||0,h=((ge=oe(this.remoteVideoTrackStatsList))==null?void 0:ge.jitter)||0,T=Math.max(p,h),g=oe(this.localAudioTrackStatsList),f=oe(this.localVideoTrackStatsList);return{combined:{roundTripTime:s,packetsReceived:o+n,packetsLost:(t==null?void 0:t.packetsLost)||0,bytesSent:(e==null?void 0:e.bytesSent)||0,bytesReceived:(t==null?void 0:t.bytesReceived)||0,bitrateSent:Ve(this.peerStatsList,B=>{var te;return(te=B.publish)==null?void 0:te.bitrate}),bitrateReceived:Ve(this.peerStatsList,B=>{var te;return(te=B.subscribe)==null?void 0:te.bitrate}),jitter:T},audio:{roundTripTime:s,packetsReceived:o,packetsLost:((pe=oe(this.remoteAudioTrackStatsList))==null?void 0:pe.packetsLost)||0,bytesReceived:((St=oe(this.remoteAudioTrackStatsList))==null?void 0:St.bytesReceived)||0,bitrateSent:Ve(d,B=>B),bitrateReceived:Ve(this.remoteAudioTrackStatsList,B=>B.bitrate),bytesSent:g?Object.values(g).reduce((B,te)=>B+(te.bytesSent||0),0):0,jitter:p},video:{roundTripTime:s,packetsLost:((hs=oe(this.remoteVideoTrackStatsList))==null?void 0:hs.packetsLost)||0,bytesReceived:((ms=oe(this.remoteVideoTrackStatsList))==null?void 0:ms.bytesReceived)||0,packetsReceived:n,bitrateSent:Ve(u,B=>B),bitrateReceived:Ve(this.remoteVideoTrackStatsList,B=>B.bitrate),bytesSent:f?Object.values(f).reduce((B,te)=>B+(te.bytesSent||0),0):0,jitter:h}}}};var Tn=(n=>(n[n.STARTING=0]=\"STARTING\",n[n.INIT_FETCHED=1]=\"INIT_FETCHED\",n[n.SIGNAL_CONNECTED=2]=\"SIGNAL_CONNECTED\",n[n.ICE_ESTABLISHED=3]=\"ICE_ESTABLISHED\",n[n.MEDIA_CAPTURED=4]=\"MEDIA_CAPTURED\",n[n.MEDIA_PUBLISHED=5]=\"MEDIA_PUBLISHED\",n[n.COMPLETED=6]=\"COMPLETED\",n))(Tn||{});var ja,Ja,Ui=class{constructor(e,t,i,r,s=$a){this.sdk=e;this.sdkListener=t;this.progressCallback=i;this.completionCallback=r;this.connectivityDuration=s;this.wsConnected=!1;this.initConnected=!1;this.isPublishICEConnected=!1;this.isSubscribeICEConnected=!1;this.gatheredPublishICECandidates=[];this.gatheredSubscribeICECandidates=[];this.errors=[];this.isAudioTrackCaptured=!1;this.isVideoTrackCaptured=!1;this.isAudioTrackPublished=!1;this.isVideoTrackPublished=!1;this.cqsCalculator=new Oi;this.timestamp=Date.now();this.onRoomUpdate=this.sdkListener.onRoomUpdate.bind(this.sdkListener);this.onPeerUpdate=this.sdkListener.onPeerUpdate.bind(this.sdkListener);this.onMessageReceived=this.sdkListener.onMessageReceived.bind(this.sdkListener);this.onReconnected=this.sdkListener.onReconnected.bind(this.sdkListener);this.onRoleChangeRequest=this.sdkListener.onRoleChangeRequest.bind(this.sdkListener);this.onRoleUpdate=this.sdkListener.onRoleUpdate.bind(this.sdkListener);this.onChangeTrackStateRequest=this.sdkListener.onChangeTrackStateRequest.bind(this.sdkListener);this.onChangeMultiTrackStateRequest=this.sdkListener.onChangeMultiTrackStateRequest.bind(this.sdkListener);this.onRemovedFromRoom=this.sdkListener.onRemovedFromRoom.bind(this.sdkListener);this.onNetworkQuality=(ja=this.sdkListener.onNetworkQuality)==null?void 0:ja.bind(this.sdkListener);this.onPreview=this.sdkListener.onPreview.bind(this.sdkListener);this.onDeviceChange=(Ja=this.sdkListener.onDeviceChange)==null?void 0:Ja.bind(this.sdkListener);this.onSessionStoreUpdate=this.sdkListener.onSessionStoreUpdate.bind(this.sdkListener);this.onPollsUpdate=this.sdkListener.onPollsUpdate.bind(this.sdkListener);this.onWhiteboardUpdate=this.sdkListener.onWhiteboardUpdate.bind(this.sdkListener);this.handleConnectionQualityUpdate=e=>{let t=e.find(i=>{var r,s;return i.peerID===((s=(r=this.sdk)==null?void 0:r.store.getLocalPeer())==null?void 0:s.peerId)});this.cqsCalculator.pushScore(t==null?void 0:t.downlinkQuality)};this.statsCollector=new xi(e),this.state=0}get state(){return this._state}set state(e){var t;e===void 0||this._state!==void 0&&e<this._state||(this._state=e,(t=this.progressCallback)==null||t.call(this,e))}onICESuccess(e){e?this.isPublishICEConnected=!0:this.isSubscribeICEConnected=!0,this.isPublishICEConnected&&this.isSubscribeICEConnected&&(this.state=3)}onSelectedICECandidatePairChange(e,t){t?this.selectedPublishICECandidate=e:this.selectedSubscribeICECandidate=e}onICECandidate(e,t){t?this.gatheredPublishICECandidates.push(e):this.gatheredSubscribeICECandidates.push(e)}onMediaPublished(e){switch(e.type){case\"audio\":this.isAudioTrackPublished=!0;break;case\"video\":this.isVideoTrackPublished=!0;break;default:break}this.isVideoTrackPublished&&this.isAudioTrackPublished&&(this.state=5)}onInitSuccess(e){this.websocketURL=e,this.initConnected=!0,this.state=1}onSignallingSuccess(){this.wsConnected=!0,this.state=2}onJoin(e){var t,i;this.sdkListener.onJoin(e),(t=this.sdk.getWebrtcInternals())==null||t.onStatsChange(r=>this.statsCollector.handleStatsUpdate(r)),(i=this.sdk.getWebrtcInternals())==null||i.start(),this.cleanupTimer=window.setTimeout(()=>{this.cleanupAndReport()},this.connectivityDuration)}onError(e){this.sdkListener.onError(e),this.errors.push(e),e!=null&&e.isTerminal&&this.cleanupAndReport()}onTrackUpdate(e,t,i){if(this.sdkListener.onTrackUpdate(e,t,i),i.isLocal&&e===0){switch(t.type){case\"audio\":this.isAudioTrackCaptured=!0;break;case\"video\":this.isVideoTrackCaptured=!0;break;default:break}this.isVideoTrackCaptured&&this.isAudioTrackCaptured&&(this.state=4)}}onReconnecting(e){this.sdkListener.onReconnecting(e),this.cqsCalculator.addPendingCQSTillNow()}cleanupAndReport(){var e;clearTimeout(this.cleanupTimer),this.cleanupTimer=void 0,this.state===5&&(this.state=6),(e=this.completionCallback)==null||e.call(this,this.buildReport()),this.sdk.leave()}buildReport(){this.cqsCalculator.addPendingCQSTillNow();let e=this.cqsCalculator.getCQS(),t=this.statsCollector.buildReport();return{testTimestamp:this.timestamp,connectivityState:this.state,errors:this.errors,signallingReport:{isConnected:this.wsConnected,isInitConnected:this.initConnected,websocketUrl:this.websocketURL},mediaServerReport:{stats:t,connectionQualityScore:e,isPublishICEConnected:this.isPublishICEConnected,isSubscribeICEConnected:this.isSubscribeICEConnected,publishICECandidatePairSelected:this.selectedPublishICECandidate,subscribeICECandidatePairSelected:this.selectedSubscribeICECandidate,publishIceCandidatesGathered:this.gatheredPublishICECandidates,subscribeIceCandidatesGathered:this.gatheredSubscribeICECandidates}}}};var Je=class{constructor(e){this.recording={server:{running:!1},browser:{running:!1},hls:{running:!1}};this.rtmp={running:!1};this.hls={running:!1,variants:[]};this.transcriptions=[];this.id=e}};var Bi=(a,e,t)=>c(void 0,null,function*(){let r=Error(\"something went wrong during fetch\");for(let s=0;s<4;s++)try{let o=yield fetch(a,e),n=yield o.clone().json();if(t&&t.length&&!o.ok&&t.includes(n.code))throw S.APIErrors.ServerErrors(n.code,\"GET_TOKEN\",n.message,!1);return o}catch(o){r=o}throw[\"Failed to fetch\",\"NetworkError\"].some(s=>r.message.includes(s))?S.APIErrors.EndpointUnreachable(\"GET_TOKEN\",r.message):r});var Ut=class{constructor(e,t){this.sdk=e;this.sdkListener=t;this.recordedAudio=qa;this.sdk.setIsDiagnostics(!0),this.initSdkWithLocalPeer()}get localPeer(){var e;return(e=this.sdk)==null?void 0:e.store.getLocalPeer()}checkBrowserSupport(){kt(),yt()}requestPermission(e){return c(this,null,function*(){try{let t=yield navigator.mediaDevices.getUserMedia(e);return t.getTracks().forEach(i=>i.stop()),yield this.sdk.deviceManager.init(!0),{audio:t.getAudioTracks().length>0,video:t.getVideoTracks().length>0}}catch(t){throw _e(t,this.sdk.localTrackManager.getErrorType(!!e.video,!!e.audio))}})}startCameraCheck(e){return c(this,null,function*(){var s,o,n,d;if(this.initSdkWithLocalPeer(),!this.localPeer)throw new Error(\"Local peer not found\");this.sdk.store.setSimulcastEnabled(!1),this.localPeer.role=M(m({},dt),{publishParams:M(m({},dt.publishParams),{allowed:[\"video\"]})});let t=new xe().video(new q().deviceId(e||\"default\").build()).build(),i=yield(s=this.sdk)==null?void 0:s.localTrackManager.getLocalTracks({audio:!1,video:!0},t),r=i==null?void 0:i.find(u=>u.type===\"video\");if(!r)throw new Error(\"No video track found\");(o=this.sdk)==null||o.deviceManager.init(!0),this.localPeer.videoTrack=r,(d=(n=this.sdk)==null?void 0:n.listener)==null||d.onPeerUpdate(9,[this.localPeer])})}stopCameraCheck(){var e,t;(t=(e=this.localPeer)==null?void 0:e.videoTrack)==null||t.cleanup(),this.localPeer&&(this.localPeer.videoTrack=void 0)}startMicCheck(s){return c(this,arguments,function*({inputDevice:e,onError:t,onStop:i,time:r=Ka}){var u,p,h,T;this.initSdkWithLocalPeer(g=>{this.stopMicCheck(),t==null||t(g)});let o=yield this.getLocalAudioTrack(e);if((u=this.sdk)==null||u.deviceManager.init(!0),!this.localPeer)throw new Error(\"Local peer not found\");if(!o)throw new Error(\"No audio track found\");this.localPeer.audioTrack=o,(p=this.sdk)==null||p.initPreviewTrackAudioLevelMonitor(),(T=(h=this.sdk)==null?void 0:h.listener)==null||T.onPeerUpdate(9,[this.localPeer]),this.mediaRecorder=new MediaRecorder(o.stream.nativeStream);let n=[];this.mediaRecorder.ondataavailable=function(g){n.push(g.data)},this.mediaRecorder.onstop=()=>{var f,E;let g=new Blob(n,{type:(f=this.mediaRecorder)==null?void 0:f.mimeType});this.recordedAudio=URL.createObjectURL(g),(E=this.onStopMicCheck)==null||E.call(this)},this.mediaRecorder.start();let d=setTimeout(()=>{this.stopMicCheck()},r);this.onStopMicCheck=()=>{clearTimeout(d),i==null||i()}})}stopMicCheck(){var e,t,i;(e=this.mediaRecorder)==null||e.stop(),(i=(t=this.localPeer)==null?void 0:t.audioTrack)==null||i.cleanup(),this.localPeer&&(this.localPeer.audioTrack=void 0)}getRecordedAudio(){return this.recordedAudio}startConnectivityCheck(e,t,i,r){return c(this,null,function*(){if(!this.sdk)throw new Error(\"SDK not found\");this.connectivityCheck=new Ui(this.sdk,this.sdkListener,e,t,r);let s=yield this.getAuthToken(i);yield this.sdk.leave(),yield this.sdk.join({authToken:s,userName:\"diagnostics-test\"},this.connectivityCheck),this.sdk.addConnectionQualityListener({onConnectionQualityUpdate:o=>{var n;(n=this.connectivityCheck)==null||n.handleConnectionQualityUpdate(o)}})})}stopConnectivityCheck(){return c(this,null,function*(){var e;return(e=this.connectivityCheck)==null?void 0:e.cleanupAndReport()})}initSdkWithLocalPeer(e){var r,s,o;this.sdkListener&&((r=this.sdk)==null||r.initStoreAndManagers(M(m({},this.sdkListener),{onError:n=>{e==null||e(n),this.sdkListener.onError(n)}})));let t=new qe({name:\"diagnostics-peer\",role:dt,type:\"regular\"});(s=this.sdk)==null||s.store.addPeer(t);let i=new Je(\"diagnostics-room\");this.sdk.store.setRoom(i),this.sdkListener.onRoomUpdate(\"ROOM_PEER_COUNT_UPDATED\",i),(o=this.sdk)==null||o.deviceManager.init(!0)}getAuthToken(e){return c(this,null,function*(){let t=new URL(\"https://api.100ms.live/v2/diagnostics/token\");e&&t.searchParams.append(\"region\",e);let i=yield Bi(t.toString(),{method:\"GET\"},[429,500,501,502,503,504,505,506,507,508,509,510,511]),r=yield i.json();if(!i.ok)throw S.APIErrors.ServerErrors(r.code,\"GET_TOKEN\",r.message,!1);let{token:s}=r;if(!s)throw Error(r.message);return s})}getLocalAudioTrack(e){return c(this,null,function*(){var r;if(!this.localPeer)return;this.localPeer.role=M(m({},dt),{publishParams:M(m({},dt.publishParams),{allowed:[\"audio\"]})});let t=new xe().audio(new Q().deviceId(e||\"default\").build()).build(),i=yield(r=this.sdk)==null?void 0:r.localTrackManager.getLocalTracks({audio:!0,video:!1},t);return i==null?void 0:i.find(s=>s.type===\"audio\")})}};var Vi=class{constructor(e,t,i){this.isRoomJoinCalled=!1;this.ignoredMessageTypes=[];this.setProgress=({type:e,progress:t})=>{this.setState(i=>{i.playlist[e].progress=t,i.playlist[e].currentTime=this.sdk.getPlaylistManager().getCurrentTime(e)},\"playlistProgress\")};this.syncPlaylistState=e=>{this.setState(t=>{Object.assign(t.playlist,_.convertPlaylist(this.sdk.getPlaylistManager()))},e)};this.sendPeerUpdateNotification=(e,t)=>{let i=this.store.getState(ee(t.peerId)),r=Hi[e]||\"peerUpdate\";if(e===8)this.syncRoomState(r),this.updateMidCallPreviewRoomState(e,t);else if([0,1].includes(e))this.syncRoomState(r),i||(i=this.store.getState(ee(t.peerId)));else if([12,13,14].includes(e))this.syncRoomState(r),i||(i=this.store.getState(ee(t.peerId)));else{let s=_.convertPeer(t);this.setState(o=>{let n=o.peers[s.id];je(n,s)&&(ae(n.auxiliaryTracks,s.auxiliaryTracks)&&(n.auxiliaryTracks=s.auxiliaryTracks),Object.assign(n,s)),i=s},r)}this.hmsNotifications.sendPeerUpdate(e,i)};this.getSDKHMSPeer=e=>this.sdk.getPeerMap()[e];this.setState=(e,t)=>this.store.namedSetState(e,t);this.store=e,this.sdk=t,this.hmsNotifications=i,this.sessionStore=new _i(this.sdk,this.setSessionStoreValueLocally.bind(this)),this.actionBatcher=new Di(e)}submitSessionFeedback(e,t){return this.sdk.submitSessionFeedback(e,t)}getLocalTrack(e){return this.sdk.store.getLocalPeerTracks().find(t=>t.trackId===e)}get interactivityCenter(){return this.sdk.getInteractivityCenter()}setPlaylistSettings(e){this.sdk.updatePlaylistSettings(e)}refreshDevices(){return c(this,null,function*(){yield this.sdk.refreshDevices()})}unblockAudio(){return c(this,null,function*(){yield this.sdk.getAudioOutput().unblockAutoplay()})}setVolume(e,t){return c(this,null,function*(){t?yield this.setTrackVolume(e,t):(yield this.sdk.getAudioOutput().setVolume(e),this.syncRoomState(\"setOutputVolume\"))})}setAudioOutputDevice(e){return c(this,null,function*(){(yield this.sdk.getAudioOutput().setDevice(e))&&this.setState(i=>{i.settings.audioOutputDeviceId=e},\"setAudioOutputDevice\")})}setPreferredLayer(e,t){return c(this,null,function*(){var r;let i=this.getTrackById(e);if(i)if(i instanceof O){if(t===\"none\"){b.d(\"layer none will be ignored\");return}if(((r=this.store.getState(Ha(e)))==null?void 0:r.preferredLayer)===t){b.d(`preferred layer is already ${t}`);return}this.setState(o=>{let n=o.tracks[e];n&&(n.preferredLayer=t)},\"setPreferredLayer\"),yield i.setPreferredLayer(t)}else b.d(`track ${e} is not a remote video track`);else this.logPossibleInconsistency(`track ${e} not present, unable to set preffer layer`)})}getNativeTrackById(e){var t;return(t=this.sdk.store.getTrackById(e))==null?void 0:t.nativeTrack}getTrackById(e){return this.sdk.store.getTrackById(e)}getAuthTokenByRoomCode(e,t){return this.sdk.getAuthTokenByRoomCode(e,t)}preview(e){return c(this,null,function*(){let t=this.store.getState(se);if(t===\"Preview\"||t===\"Connecting\"){this.logPossibleInconsistency(\"attempting to call preview while room is in preview/connecting\");return}try{t!==\"Connected\"&&this.setState(i=>{i.room.roomState=\"Connecting\"},\"connecting\"),yield this.sdkPreviewWithListeners(e)}catch(i){throw b.e(\"Cannot show preview. Failed to connect to room - \",i),i}})}cancelMidCallPreview(){return c(this,null,function*(){return this.sdk.cancelMidCallPreview()})}join(e){return c(this,null,function*(){if(this.isRoomJoinCalled){this.logPossibleInconsistency(\"room join is called again\");return}try{this.isRoomJoinCalled=!0,this.setState(t=>{t.room.roomState=\"Connecting\"},\"join\"),yield this.sdkJoinWithListeners(e)}catch(t){throw this.isRoomJoinCalled=!1,b.e(\"Failed to connect to room - \",t),t}})}leave(){return c(this,null,function*(){let e=this.store.getState(Be),t=!0;e||(t=!1,this.logPossibleInconsistency(\"room leave is called when no room is connected\"));let i=this.store.getState(se);return this.setState(r=>{r.room.roomState=\"Disconnecting\"},\"leaving\"),this.sdk.leave(t).then(()=>{this.resetState(\"leave\"),this.beamSpeakerLabelsLogger&&this.beamSpeakerLabelsLogger.stop().catch(b.e),b.i(\"left room\")}).catch(r=>{b.e(\"error in leaving room - \",r),this.setState(s=>{s.room.roomState=i},\"revertLeave\")})})}setScreenShareEnabled(e,t){return c(this,null,function*(){typeof t==\"boolean\"&&(t={audioOnly:t});try{e?yield this.startScreenShare(t):yield this.stopScreenShare()}catch(i){throw this.hmsNotifications.sendError(_.convertException(i)),i}})}addTrack(e,t=\"regular\"){return c(this,null,function*(){yield this.sdk.addTrack(e,t),this.syncRoomState(\"addTrack\")})}removeTrack(e){return c(this,null,function*(){yield this.sdk.removeTrack(e),this.syncRoomState(\"removeTrack\")})}setLocalAudioEnabled(e){return c(this,null,function*(){let t=this.store.getState(le);t&&(yield this.setEnabledTrack(t,e))})}setLocalVideoEnabled(e){return c(this,null,function*(){let t=this.store.getState(Z);t&&(yield this.setEnabledTrack(t,e))})}setEnabledTrack(e,t){return c(this,null,function*(){var s;if(((s=this.store.getState().tracks[e])==null?void 0:s.enabled)===t){this.logPossibleInconsistency(`local track[${e}] enabled state - ${t}`);return}this.setState(o=>{o.tracks[e]?o.tracks[e].displayEnabled=t:this.logPossibleInconsistency(\"track id not found for setEnabled\")},\"displayEnabled\");try{yield this.setEnabledSDKTrack(e,t),this.syncRoomState(\"setEnabled\")}catch(o){throw this.setState(n=>{n.tracks[e].displayEnabled=!t},\"rollbackDisplayEnabled\"),this.hmsNotifications.sendError(_.convertException(o)),o}let r=t?3:2;this.hmsNotifications.sendTrackUpdate(r,e)})}autoSelectAudioOutput(e){return c(this,null,function*(){yield this.sdk.autoSelectAudioOutput(e)})}setAudioSettings(e){return c(this,null,function*(){let t=this.store.getState(le);t&&(yield this.setSDKLocalAudioTrackSettings(t,e),this.syncRoomState(\"setAudioSettings\"))})}setVideoSettings(e){return c(this,null,function*(){let t=this.store.getState(Z);t&&(yield this.setSDKLocalVideoTrackSettings(t,e),this.syncRoomState(\"setVideoSettings\"))})}switchCamera(){return c(this,null,function*(){let e=this.store.getState(Z);if(e){let t=this.sdk.store.getLocalPeerTracks().find(i=>i.trackId===e);t&&(yield t.switchCamera(),this.syncRoomState(\"switchCamera\"))}})}sendMessage(e){this.sendBroadcastMessage(e)}sendBroadcastMessage(e,t){return c(this,null,function*(){let{message_id:i,timestamp:r}=yield this.sdk.sendBroadcastMessage(e,t);this.updateMessageInStore({message:e,type:t,id:i,time:r})})}sendGroupMessage(e,t,i){return c(this,null,function*(){let r=this.store.getState(Ee),s=t.map(d=>r[d]),{message_id:o,timestamp:n}=yield this.sdk.sendGroupMessage(e,s,i);this.updateMessageInStore({message:e,recipientRoles:t,type:i,id:o,time:n})})}sendDirectMessage(e,t,i){return c(this,null,function*(){let{message_id:r,timestamp:s}=yield this.sdk.sendDirectMessage(e,t,i);this.updateMessageInStore({message:e,recipientPeer:t,type:i,id:r,time:s})})}updateMessageInStore(e){var s;if(!e.message)throw b.w(\"sendMessage\",\"Failed to send message\",e),Error(`sendMessage Failed - ${JSON.stringify(e)}`);if(!!e.type&&this.ignoredMessageTypes.includes(e.type))return;let i=this.sdk.getLocalPeer(),r={read:!0,id:e.id,time:new Date(e.time),message:e.message,type:e.type||\"chat\",recipientPeer:e.recipientPeer,recipientRoles:e.recipientRoles,senderName:i==null?void 0:i.name,sender:i==null?void 0:i.peerId,senderRole:(s=i==null?void 0:i.role)==null?void 0:s.name,ignored:!1};this.setState(o=>{o.messages.byID[r.id]=r,o.messages.allIDs.push(r.id)},\"newMessage\")}setMessageRead(e,t){this.setState(i=>{t?i.messages.byID[t]?i.messages.byID[t].read=e:this.logPossibleInconsistency(\"no message with id is found\"):i.messages.allIDs.forEach(r=>{i.messages.byID[r].read=e})},\"setMessageRead\")}attachVideo(e,t){return c(this,null,function*(){if(this.localAndVideoUnmuting(e))return new Promise(i=>{let r=this.store.subscribe(s=>c(this,null,function*(){s&&(yield this.attachVideoInternal(e,t),r(),i())}),Yr)});yield this.attachVideoInternal(e,t)})}detachVideo(e,t){return c(this,null,function*(){let i=this.getTrackById(e);(i==null?void 0:i.type)===\"video\"?yield this.sdk.detachVideo(i,t):(t&&(t.srcObject=null),b.d(\"possible inconsistency detected - no video track found to remove sink\"))})}addPluginToVideoTrack(e,t){return c(this,null,function*(){return this.addRemoveVideoPlugin(e,\"add\",t)})}addPluginsToVideoStream(e){return c(this,null,function*(){return this.addRemoveMediaStreamVideoPlugins(e,\"add\")})}removePluginsFromVideoStream(e){return c(this,null,function*(){return this.addRemoveMediaStreamVideoPlugins(e,\"remove\")})}addPluginToAudioTrack(e){return c(this,null,function*(){return this.addRemoveAudioPlugin(e,\"add\")})}validateVideoPluginSupport(e){let t={};if(t.isSupported=!1,!e)return b.w(\"no plugin passed in for checking support\"),t.errMsg=\"no plugin passed in for checking support\",t;let i=this.store.getState(Z);if(!i)return b.w(\"video Track not added to local peer yet\"),t.errMsg=\"call this function only after local peer has video track\",t;let r=this.getTrackById(i);return r?t=r.validatePlugin(e):(b.w(`track ${i} not present, unable to validate plugin`),t.errMsg=`track ${i} not present, unable to validate plugin`),t}validateAudioPluginSupport(e){let t={};if(t.isSupported=!1,!e)return b.w('no plugin passed in for checking support\"'),t.errMsg='no plugin passed in for checking support\"',t;let i=this.store.getState(le);if(!i)return b.w(\"audio track not added to local peer yet\"),t.errMsg=\"call this function only after local peer has audio track\",t;let r=this.getTrackById(i);return r?t=r.validatePlugin(e):(b.w(`track ${i} not present, unable to validate plugin`),t.errMsg=`track ${i} not present, unable to validate plugin`),t}removePluginFromVideoTrack(e){return c(this,null,function*(){return this.addRemoveVideoPlugin(e,\"remove\")})}removePluginFromAudioTrack(e){return c(this,null,function*(){return this.addRemoveAudioPlugin(e,\"remove\")})}changeRole(e,t,i=!1){return c(this,null,function*(){yield this.sdk.changeRoleOfPeer(e,t,i)})}changeRoleOfPeer(e,t,i=!1){return c(this,null,function*(){yield this.sdk.changeRoleOfPeer(e,t,i)})}changeRoleOfPeersWithRoles(e,t){return c(this,null,function*(){let i=this.sdk.getRoles().filter(r=>e.includes(r.name));yield this.sdk.changeRoleOfPeersWithRoles(i,t)})}acceptChangeRole(e){return c(this,null,function*(){let t=e.requestedBy?this.getSDKHMSPeer(e.requestedBy.id):void 0;t||b.w(`peer for which role change is requested no longer available - ${e.requestedBy}`);let i={requestedBy:t,role:e.role,token:e.token};yield this.sdk.acceptChangeRole(i),this.removeRoleChangeRequest(e)})}raiseLocalPeerHand(){return c(this,null,function*(){yield this.sdk.raiseLocalPeerHand()})}lowerLocalPeerHand(){return c(this,null,function*(){yield this.sdk.lowerLocalPeerHand()})}raiseRemotePeerHand(e){return c(this,null,function*(){yield this.sdk.raiseRemotePeerHand(e)})}lowerRemotePeerHand(e){return c(this,null,function*(){yield this.sdk.lowerRemotePeerHand(e)})}getPeer(e){return c(this,null,function*(){let t=yield this.sdk.getPeer(e);if(t)return _.convertPeer(t)})}findPeerByName(e){return c(this,null,function*(){let{offset:t,peers:i,eof:r}=yield this.sdk.findPeerByName(e);return{offset:t,eof:r,peers:i.map(s=>_.convertPeer(s))}})}getPeerListIterator(e){let t=this.sdk.getPeerListIterator(e);return{hasNext:()=>t.hasNext(),next:()=>c(this,null,function*(){return(yield t.next()).map(r=>_.convertPeer(r))}),findPeers:()=>c(this,null,function*(){return(yield t.findPeers()).map(r=>_.convertPeer(r))}),getTotal:()=>t.getTotal()}}initAppData(e){this.setState(t=>{t.appData=e},\"initAppData\")}setAppData(e,t,i){let r=(t==null?void 0:t.constructor.name)===\"Object\";this.setState(s=>{if(s.appData)i&&r?Object.assign(s.appData[e],t):s.appData[e]=t;else{let o={[e]:t};s.appData=o}},`setAppData-${e}`)}rejectChangeRole(e){this.removeRoleChangeRequest(e)}endRoom(e,t){return c(this,null,function*(){let i=this.store.getState(ga);if(!(i!=null&&i.endRoom)){b.w(\"You are not allowed to perform this action - endRoom\");return}let r=this.store.getState(se);this.setState(s=>{s.room.roomState=\"Disconnecting\"},\"endingRoom\");try{yield this.sdk.endRoom(e,t),this.resetState(\"endRoom\")}catch(s){b.e(\"error in ending room - \",s),this.setState(o=>{o.room.roomState=r},\"revertEndRoom\")}})}removePeer(e,t){return c(this,null,function*(){var r;let i=(r=this.sdk.getLocalPeer())==null?void 0:r.peerId;e!==i&&(yield this.sdk.removePeer(e,t))})}startRTMPOrRecording(e){return c(this,null,function*(){yield this.sdk.startRTMPOrRecording(e)})}stopRTMPAndRecording(){return c(this,null,function*(){yield this.sdk.stopRTMPAndRecording()})}startHLSStreaming(e){return c(this,null,function*(){yield this.sdk.startHLSStreaming(e)})}stopHLSStreaming(e){return c(this,null,function*(){yield this.sdk.stopHLSStreaming(e)})}startTranscription(e){return c(this,null,function*(){yield this.sdk.startTranscription(e)})}stopTranscription(e){return c(this,null,function*(){yield this.sdk.stopTranscription(e)})}sendHLSTimedMetadata(e){return c(this,null,function*(){yield this.sdk.sendHLSTimedMetadata(e)})}changeName(e){return c(this,null,function*(){yield this.sdk.changeName(e)})}changeMetadata(e){return c(this,null,function*(){typeof e!=\"string\"&&(e=JSON.stringify(e)),yield this.sdk.changeMetadata(e)})}setSessionMetadata(e){return c(this,null,function*(){yield this.sdk.setSessionMetadata(e),this.setState(t=>{t.sessionMetadata=e},\"setSessionMetadata\"),this.setSessionStoreValueLocally({key:\"default\",value:e},\"setSessionMetadata\")})}populateSessionMetadata(){return c(this,null,function*(){let e=yield this.sdk.getSessionMetadata();this.setState(t=>{t.sessionMetadata=e},\"populateSessionMetadata\"),this.setSessionStoreValueLocally({key:\"default\",value:e},\"populateSessionmetadata\")})}setRemoteTrackEnabled(e,t){return c(this,null,function*(){if(typeof e==\"string\"){let i=this.getTrackById(e);i&&Ba(i)?yield this.sdk.changeTrackState(i,t):this.logPossibleInconsistency(`No remote track with ID ${e} found for change track state`)}else Array.isArray(e)&&e.forEach(i=>this.setRemoteTrackEnabled(i,t))})}setRemoteTracksEnabled(e){return c(this,null,function*(){let t={enabled:e.enabled,type:e.type,source:e.source};if(e.roles){let i=this.store.getState(Ee);t.roles=e.roles.map(r=>i[r])}yield this.sdk.changeMultiTrackState(t)})}setLogLevel(e){b.level=e,this.sdk.setLogLevel(e)}setFrameworkInfo(e){this.sdk.setFrameworkInfo(e)}ignoreMessageTypes(e,t=!1){if(t)this.ignoredMessageTypes=e;else for(let i of e)this.ignoredMessageTypes.includes(i)||this.ignoredMessageTypes.push(i)}enableBeamSpeakerLabelsLogging(){return c(this,null,function*(){this.beamSpeakerLabelsLogger||(b.i(\"enabling beam speaker labels logging\"),this.beamSpeakerLabelsLogger=new Ni(this.store,this),yield this.beamSpeakerLabelsLogger.start())})}initDiagnostics(){let e=new Ut(this.sdk,{onJoin:this.onJoin.bind(this),onPreview:this.onPreview.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onTrackUpdate:this.onTrackUpdate.bind(this),onMessageReceived:this.onMessageReceived.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onRoleChangeRequest:this.onRoleChangeRequest.bind(this),onRoleUpdate:this.onRoleUpdate.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onChangeTrackStateRequest:this.onChangeTrackStateRequest.bind(this),onChangeMultiTrackStateRequest:this.onChangeMultiTrackStateRequest.bind(this),onRemovedFromRoom:this.onRemovedFromRoom.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this),onSessionStoreUpdate:this.onSessionStoreUpdate.bind(this),onPollsUpdate:this.onPollsUpdate.bind(this),onWhiteboardUpdate:this.onWhiteboardUpdate.bind(this)});return this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)}),this.sdk.addConnectionQualityListener({onConnectionQualityUpdate:this.onConnectionQualityUpdate.bind(this)}),e}resetState(e=\"resetState\"){this.isRoomJoinCalled=!1,b.cleanup(),this.setState(t=>{Object.assign(t,oi())},e)}getDebugInfo(){return this.sdk.getDebugInfo()}sdkJoinWithListeners(e){return c(this,null,function*(){yield this.sdk.join(e,{onJoin:this.onJoin.bind(this),onPreview:this.onPreview.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onTrackUpdate:this.onTrackUpdate.bind(this),onMessageReceived:this.onMessageReceived.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onRoleChangeRequest:this.onRoleChangeRequest.bind(this),onRoleUpdate:this.onRoleUpdate.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onChangeTrackStateRequest:this.onChangeTrackStateRequest.bind(this),onChangeMultiTrackStateRequest:this.onChangeMultiTrackStateRequest.bind(this),onRemovedFromRoom:this.onRemovedFromRoom.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this),onSessionStoreUpdate:this.onSessionStoreUpdate.bind(this),onPollsUpdate:this.onPollsUpdate.bind(this),onWhiteboardUpdate:this.onWhiteboardUpdate.bind(this),onSFUMigration:this.onSFUMigration.bind(this)}),this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)}),this.sdk.addConnectionQualityListener({onConnectionQualityUpdate:this.onConnectionQualityUpdate.bind(this)})})}onSFUMigration(){this.syncRoomState(\"SFUMigration\")}onRemovedFromRoom(e){var r;let t=this.store.getState(ee((r=e.requestedBy)==null?void 0:r.peerId));this.hmsNotifications.sendLeaveRoom(M(m({},e),{requestedBy:t||void 0}));let i=e.roomEnded||!t?\"roomEnded\":\"removedFromRoom\";b.i(`resetting state after peer removed ${i}`,e),this.resetState(i)}onDeviceChange(e){let t=e.devices;if(!t)return;let i=this.store.getState(re);if(this.setState(r=>{ae(r.devices.audioInput,t.audioInput)||(r.devices.audioInput=t.audioInput),ae(r.devices.videoInput,t.videoInput)||(r.devices.videoInput=t.videoInput),ae(r.devices.audioOutput,t.audioOutput)||(r.devices.audioOutput=t.audioOutput);let s=this.sdk.getLocalPeer();i!=null&&i.id&&s&&Object.assign(r.settings,this.getMediaSettings(s))},\"deviceChange\"),e.selection&&!e.internal){let r=_.convertDeviceChangeUpdate(e);this.hmsNotifications.sendDeviceChange(r)}}sdkPreviewWithListeners(e){return c(this,null,function*(){yield this.sdk.preview(e,{onPreview:this.onPreview.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this),onTrackUpdate:this.onTrackUpdate.bind(this)}),this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)})})}onNetworkQuality(e){this.setState(t=>{var r;let i=t.room.localPeer||((r=this.sdk.getLocalPeer())==null?void 0:r.peerId);i&&(t.connectionQualities[i]={peerID:i,downlinkQuality:e})},\"ConnectionQuality\")}onSessionStoreUpdate(e){this.setSessionStoreValueLocally(e,\"sessionStoreUpdate\")}onPollsUpdate(e,t){let i=Ci[e];this.setState(r=>{let s=t.reduce((o,n)=>{var d;return o[n.id]=M(m({},n),{questions:(d=n.questions)==null?void 0:d.map(u=>{var p,h;return M(m({},u),{answer:u.answer?m({},u.answer):void 0,options:(p=u.options)==null?void 0:p.map(T=>m({},T)),responses:(h=u.responses)==null?void 0:h.map(T=>m({},T))})})}),o},{});Ga(r.polls,s)},i),t.forEach(r=>this.hmsNotifications.sendPollUpdate(e,r.id))}onWhiteboardUpdate(e){this.setState(t=>{t.whiteboards[e.id]=e},\"whiteboardUpdate\")}startScreenShare(e){return c(this,null,function*(){this.store.getState(Xr)?this.logPossibleInconsistency(\"start screenshare is called while it's on\"):(yield this.sdk.startScreenShare(()=>this.syncRoomState(\"screenshareStopped\"),e),this.syncRoomState(\"startScreenShare\"))})}stopScreenShare(){return c(this,null,function*(){this.store.getState(Xr)?(yield this.sdk.stopScreenShare(),this.syncRoomState(\"stopScreenShare\")):this.logPossibleInconsistency(\"stop screenshare is called while it's not on\")})}attachVideoInternal(e,t){return c(this,null,function*(){let i=this.getTrackById(e);i||(i=this.getLocalTrack(e)),i&&i.type===\"video\"?yield this.sdk.attachVideo(i,t):this.logPossibleInconsistency(\"no video track found to add sink\")})}syncRoomState(e){e=`${e}_fullSync`,b.time(`store-sync-${e}`);let t={},i=[],r={},s={},o={},n,d=this.sdk.getPeers();for(let g of d){let f=_.convertPeer(g);t[f.id]=f,i.push(f.id),o[f.id]={peerID:f.id,downlinkQuality:g.networkQuality||-1};let E=[g.audioTrack,g.videoTrack,...g.auxiliaryTracks];for(let v of E){if(!v)continue;let R=_.convertTrack(v);r[R.id]=R}if(g.isLocal){let v=g;n=this.getPreviewFields(v),Object.assign(s,this.getMediaSettings(v))}}let u=this.sdk.getRecordingState(),p=this.sdk.getRTMPState(),h=this.sdk.getHLSState(),T=this.sdk.getTranscriptionState();this.setState(g=>{var v;g.room.peers=i;let f=g.peers,E=g.tracks;Va(f,t),Fa(E,r),Object.assign(g.settings,s),g.room.isConnected&&Object.assign(g.connectionQualities,o),(v=g.preview)!=null&&v.localPeer&&(n!=null&&n.localPeer)?Object.assign(g.preview,n):g.preview=n,Object.assign(g.roles,_.convertRoles(this.sdk.getRoles())),Object.assign(g.playlist,_.convertPlaylist(this.sdk.getPlaylistManager())),Object.assign(g.room,_.convertRecordingStreamingState(u,p,h,T)),Object.assign(g.templateAppData,this.sdk.getTemplateAppData())},e),b.timeEnd(`store-sync-${e}`)}onPreview(e){this.setState(t=>{var i;Object.assign(t.room,_.convertRoom(e,(i=this.sdk.getLocalPeer())==null?void 0:i.peerId)),t.room.roomState=\"Preview\"},\"previewStart\"),this.syncRoomState(\"previewSync\")}onJoin(e){let t=this.sdk.getPlaylistManager();this.audioPlaylist=new xt(t,\"audio\",this.syncPlaylistState.bind(this),this.store),this.videoPlaylist=new xt(t,\"video\",this.syncRoomState.bind(this),this.store),this.syncRoomState(\"joinSync\"),this.setState(i=>{var r;Object.assign(i.room,_.convertRoom(e,(r=this.sdk.getLocalPeer())==null?void 0:r.peerId)),i.room.isConnected=!0,i.room.roomState=\"Connected\"},\"joined\"),t.onProgress(this.setProgress),t.onNewTrackStart(i=>{this.syncPlaylistState(`${i.type}PlaylistUpdate`)}),t.onPlaylistEnded(i=>{this.syncPlaylistState(`${i}PlaylistEnded`)}),t.onCurrentTrackEnded(i=>{this.hmsNotifications.sendPlaylistTrackEnded(_.convertPlaylistItem(t,i)),this.syncPlaylistState(`${i.type}PlaylistItemEnded`)})}onRoomUpdate(e,t){this.setState(i=>{var r;Object.assign(i.room,_.convertRoom(t,(r=this.sdk.getLocalPeer())==null?void 0:r.peerId))},e),e===\"TRANSCRIPTION_STATE_UPDATED\"&&this.hmsNotifications.sendTranscriptionUpdate(t.transcriptions)}onPeerUpdate(e,t){if(![4,5].includes(e)){if(Array.isArray(t)){let i=this.store.getState(z),r=t.filter(o=>!i[o.peerId]);if(this.syncRoomState(\"peersJoined\"),this.store.getState(Be)){let o=[];for(let n of t){let d=this.store.getState(ee(n.peerId));d&&o.push(d)}this.hmsNotifications.sendPeerList(o)}else r.forEach(o=>{let n=this.store.getState(ee(o.peerId));n&&this.hmsNotifications.sendPeerUpdate(0,n)});return}this.sendPeerUpdateNotification(e,t)}}onTrackUpdate(e,t,i){if(e===1)this.hmsNotifications.sendTrackUpdate(e,t.trackId),this.handleTrackRemove(t,i);else if([0,1].includes(e)){let r=Nt[e];this.syncRoomState(r),this.hmsNotifications.sendTrackUpdate(e,t.trackId)}else{let r=Nt[e]||\"trackUpdate\",s=_.convertTrack(t);this.setState(o=>{let n=o.tracks[s.id];je(n,s)&&(ss(n,s),Object.assign(n,s))},r),this.hmsNotifications.sendTrackUpdate(e,t.trackId)}}onMessageReceived(e){let t=_.convertMessage(e,this.store.getState(Ie));t.read=!1,t.ignored=this.ignoredMessageTypes.includes(t.type),t.type===\"hms_transcript\"&&(t.ignored=!0),this.putMessageInStore(t),this.hmsNotifications.sendMessageReceived(t)}putMessageInStore(e){e.ignored||this.actionBatcher.setState(t=>{t.messages.byID[e.id]=e,t.messages.allIDs.push(e.id)},\"newMessage\",150)}onAudioLevelUpdate(e){this.setState(t=>{let i={};e.forEach(s=>{if(!s.track||!s.peer)return;let o=s.track.trackId;i[o]=s.audioLevel,t.speakers[o]||(t.speakers[o]={audioLevel:s.audioLevel,peerID:s.peer.peerId,trackID:o})});let r=Object.entries(t.speakers);for(let[s,o]of r)o.audioLevel=i[s]||0,o.audioLevel===0&&delete t.speakers[s]},\"audioLevel\")}onConnectionQualityUpdate(e){this.setState(t=>{e.forEach(i=>{let r=i.peerID;r&&(t.connectionQualities[r]?Object.assign(t.connectionQualities[r],i):t.connectionQualities[r]=i)})},\"connectionQuality\")}onChangeTrackStateRequest(e){var s;let t=this.store.getState(ee((s=e.requestedBy)==null?void 0:s.peerId)),i=this.getStoreLocalTrackIDfromSDKTrack(e.track),r=this.store.getState(Ii(i));if(!r)return this.logPossibleInconsistency(`Not found track for which track state change was requested, ${e.track}`);e.enabled||this.syncRoomState(\"changeTrackStateRequest\"),this.hmsNotifications.sendChangeTrackStateRequest({requestedBy:t||void 0,track:r,enabled:e.enabled})}onChangeMultiTrackStateRequest(e){var s;let t=this.store.getState(ee((s=e.requestedBy)==null?void 0:s.peerId));e.enabled||this.syncRoomState(\"changeMultiTrackStateRequest\");let i=[],r=this.store.getState(N);for(let o of e.tracks){let n=this.getStoreLocalTrackIDfromSDKTrack(o);n&&r[n]&&i.push(r[n])}this.hmsNotifications.sendChangeMultiTrackStateRequest({requestedBy:t||void 0,tracks:i,enabled:e.enabled,type:e.type,source:e.source})}onReconnected(){this.syncRoomState(\"reconnectedSync\"),this.hmsNotifications.sendReconnected(),this.setState(e=>{e.room.roomState=e.room.isConnected?\"Connected\":\"Preview\"},\"reconnected\")}onReconnecting(e){let t=_.convertException(e);b.e(\"Reconnection: received error from sdk\",t),this.hmsNotifications.sendReconnecting(t),this.setState(i=>{i.room.roomState=\"Reconnecting\",i.errors.push(t)},\"reconnecting\")}onError(e){let t=_.convertException(e);t.isTerminal?(this.leave().then(()=>b.e(\"error from SDK, left room.\")),this.setState(i=>{i.room.roomState=\"Failed\",i.errors.push(t)},\"errorTerminal\")):this.store.getState().errors.length<50&&this.setState(r=>{r.errors.push(t)},\"error\"),this.syncRoomState(\"errorSync\"),this.hmsNotifications.sendError(t),b.e(\"received error from sdk\",t instanceof k?`${t}`:t)}handleTrackRemove(e,t){this.setState(i=>{let r=i.peers[t.peerId],s=i.tracks,o=e.trackId;if(r)if(o===r.audioTrack)delete r.audioTrack;else if(o===r.videoTrack)delete r.videoTrack;else{let n=r.auxiliaryTracks.indexOf(o);n>-1&&r.auxiliaryTracks.splice(n,1)}delete s[o]},\"trackRemoved\")}setEnabledSDKTrack(e,t){return c(this,null,function*(){let i=this.getLocalTrack(e);i?yield i.setEnabled(t):this.logPossibleInconsistency(`track ${e} not present, unable to enabled/disable`)})}setSDKLocalVideoTrackSettings(e,t){return c(this,null,function*(){let i=this.getLocalTrack(e);i?yield i.setSettings(t):this.logPossibleInconsistency(`local track ${e} not present, unable to set settings`)})}setSDKLocalAudioTrackSettings(e,t){return c(this,null,function*(){let i=this.getLocalTrack(e);i?yield i.setSettings(t):this.logPossibleInconsistency(`local track ${e} not present, unable to set settings`)})}getMediaSettings(e){var s;let t=this.store.getState(ua),i=e.audioTrack,r=e.videoTrack;return{audioInputDeviceId:(i==null?void 0:i.settings.deviceId)||t.audioInputDeviceId,videoInputDeviceId:(r==null?void 0:r.settings.deviceId)||t.videoInputDeviceId,audioOutputDeviceId:(s=this.sdk.getAudioOutput().getDevice())==null?void 0:s.deviceId,audioMode:(i==null?void 0:i.settings.audioMode)||\"voice\"}}getPreviewFields(e){var i,r;if(!e.isInPreview())return;let t=_.convertPeer(e);return{localPeer:t.id,audioTrack:t.audioTrack,videoTrack:t.videoTrack,asRole:((i=e.asRole)==null?void 0:i.name)||((r=e.role)==null?void 0:r.name)}}setTrackVolume(e,t){return c(this,null,function*(){let i=this.getTrackById(t);i?i instanceof we?(yield i.setVolume(e),this.setState(r=>{let s=r.tracks[t];s&&s.type===\"audio\"&&(s.volume=e)},\"trackVolume\")):b.w(`track ${t} is not an audio track`):this.logPossibleInconsistency(`track ${t} not present, unable to set volume`)})}localAndVideoUnmuting(e){let t=this.store.getState(re);if((t==null?void 0:t.videoTrack)!==e)return!1;let i=this.store.getState(ha),r=this.store.getState(Yr);return i&&!r}logPossibleInconsistency(e){b.w(\"possible inconsistency detected - \",e)}addRemoveVideoPlugin(e,t,i){return c(this,null,function*(){if(!e){b.w(\"Invalid plugin received in store\");return}let r=this.store.getState(Z);if(r){let s=this.getLocalTrack(r);s?(t===\"add\"?yield s.addPlugin(e,i):t===\"remove\"&&(yield s.removePlugin(e)),this.syncRoomState(`${t}VideoPlugin`)):this.logPossibleInconsistency(`track ${r} not present, unable to ${t} plugin`)}})}addRemoveMediaStreamVideoPlugins(e,t){return c(this,null,function*(){if(e.length===0){b.w(\"Invalid plugin received in store\");return}let i=this.store.getState(Z);if(i){let r=this.getLocalTrack(i);r?(t===\"add\"?yield r.addStreamPlugins(e):t===\"remove\"&&(yield r.removeStreamPlugins(e)),this.syncRoomState(`${t}MediaStreamPlugin`)):this.logPossibleInconsistency(`track ${i} not present, unable to ${t} plugin`)}})}addRemoveAudioPlugin(e,t){return c(this,null,function*(){try{if(!e){b.w(\"Invalid plugin received in store\");return}let i=this.store.getState(le);if(i){let r=this.getLocalTrack(i);r?(t===\"add\"?yield r.addPlugin(e):t===\"remove\"&&(yield r.removePlugin(e)),this.syncRoomState(`${t}AudioPlugin`)):this.logPossibleInconsistency(`track ${i} not present, unable to ${t} plugin`)}}catch(i){console.error(i)}})}onRoleChangeRequest(e){this.setState(t=>{t.roleChangeRequests.length===0&&t.roleChangeRequests.push(_.convertRoleChangeRequest(e))},\"roleChangeRequest\")}removeRoleChangeRequest(e){this.setState(t=>{let i=t.roleChangeRequests.findIndex(r=>r.token===e.token);i!==-1&&t.roleChangeRequests.splice(i,1)},\"removeRoleChangeRequest\")}onRoleUpdate(){this.syncRoomState(\"roleUpdate\")}getStoreLocalTrackIDfromSDKTrack(e){return this.store.getState(pa).find(i=>{var r;return((r=this.getTrackById(i))==null?void 0:r.trackId)===e.trackId})}updateMidCallPreviewRoomState(e,t){t.isLocal&&e===8&&this.store.getState(ma)&&this.setState(i=>{i.room.roomState=\"Connected\"},\"midCallPreviewCompleted\")}setSessionStoreValueLocally(e,t=\"setSessionStore\"){let i=Array.isArray(e)?e:[e];this.setState(r=>{i.forEach(s=>{r.sessionStore[s.key]=s.value})},t)}hasActiveElements(e){let t=Object.keys(this.store.getState().whiteboards).length>0,i=Object.keys(this.store.getState().polls).length>0,r=Object.keys(this.store.getState().peers).length>0,s=e.getState().remoteTrackStats;return r&&(t||i||Object.values(s).some(o=>o&&typeof o.bitrate==\"number\"&&o.bitrate>0))}};var Fi=a=>U?`${a} ${document.title}`:a;var Gi=class{constructor(e,t){this.eventBus=e;this.listener=t;this.TAG=\"[NetworkTestManager]\";this.controller=new AbortController;this.start=e=>c(this,null,function*(){var u;if(!e)return;let{url:t,timeout:i,scoreMap:r}=e,s=this.controller.signal,o=Date.now(),n=0,d=J(i).then(()=>{this.controller.abort()});try{let h=(u=(yield fetch(`${t}?${Date.now()}`,{signal:s})).body)==null?void 0:u.getReader();if(!h)throw Error(\"unable to process request\");let T=()=>c(this,null,function*(){if(h)try{let g=!1;for(;!g;){let{value:f,done:E}=yield h.read();g=E,f&&(n+=f.byteLength,this.sendScore({scoreMap:r,downloadedSize:n,startTime:o}))}}catch(g){g.name!==\"AbortError\"&&l.d(this.TAG,g)}});return Promise.race([T(),d]).then(()=>{this.sendScore({scoreMap:r,downloadedSize:n,startTime:o,finished:!0})}).catch(g=>{l.d(this.TAG,g),this.updateScoreToListener(0),this.eventBus.analytics.publish(y.previewNetworkQuality({error:g.message}))})}catch(p){p.name!==\"AbortError\"?(l.d(this.TAG,p),this.updateScoreToListener(0),this.eventBus.analytics.publish(y.previewNetworkQuality({error:p.message}))):l.d(this.TAG,p)}});this.stop=()=>{this.controller.signal.aborted||this.controller.abort()};this.sendScore=({scoreMap:e,downloadedSize:t,startTime:i,finished:r=!1})=>{let s=(Date.now()-i)/1e3,n=t/1024/s*8,d=-1;for(let u in e){let p=e[u];n>=p.low&&(!p.high||n<=p.high)&&(d=Number(u))}this.updateScoreToListener(d),r&&this.eventBus.analytics.publish(y.previewNetworkQuality({score:d,downLink:n.toFixed(2)}))}}updateScoreToListener(e){var t,i;e!==this.score&&(this.score=e,(i=(t=this.listener)==null?void 0:t.onNetworkQuality)==null||i.call(t,e))}};var Bt=class{constructor(e,t,i,r,s,o){this.store=e;this.transport=t;this.deviceManager=i;this.publish=r;this.removeAuxiliaryTrack=s;this.listener=o;this.handleLocalPeerRoleUpdate=i=>c(this,[i],function*({oldRole:e,newRole:t}){var s;let r=this.store.getLocalPeer();r&&(yield this.diffRolesAndPublishTracks({oldRole:e,newRole:t}),(s=this.listener)==null||s.onPeerUpdate(8,r))});this.diffRolesAndPublishTracks=i=>c(this,[i],function*({oldRole:e,newRole:t}){var g,f,E,v,R,$;let r=new Set(e.publishParams.allowed),s=new Set(t.publishParams.allowed),o=this.removeTrack(r,s,\"video\"),n=this.removeTrack(r,s,\"audio\"),d=this.removeTrack(r,s,\"screen\"),u=this.hasSimulcastDifference((g=e.publishParams.simulcast)==null?void 0:g.video,(f=t.publishParams.simulcast)==null?void 0:f.video),p=this.hasSimulcastDifference((E=e.publishParams.simulcast)==null?void 0:E.screen,(v=t.publishParams.simulcast)==null?void 0:v.screen),h=($=(R=this.store.getLocalPeer())==null?void 0:R.videoTrack)==null?void 0:$.enabled;yield this.removeAudioTrack(n),yield this.removeVideoTracks(o||u),yield this.removeScreenTracks(d||p);let T=this.getSettings();u&&(T.isVideoMuted=!h),yield this.publish(T),yield this.syncDevices(T,t)})}syncDevices(e,t){return c(this,null,function*(){(!e.isAudioMuted||!e.isVideoMuted)&&t.publishParams.allowed.length>0&&(yield this.deviceManager.init(!0))})}removeVideoTracks(e){return c(this,null,function*(){var i;if(!e)return;let t=this.store.getLocalPeer();t!=null&&t.videoTrack&&(t.videoTrack.isPublished?yield this.transport.unpublish([t.videoTrack]):yield t.videoTrack.cleanup(),(i=this.listener)==null||i.onTrackUpdate(1,t.videoTrack,t),t.videoTrack=void 0),yield this.removeAuxTracks(r=>r.source!==\"screen\"&&r.type===\"video\")})}removeAudioTrack(e){return c(this,null,function*(){var i;if(!e)return;let t=this.store.getLocalPeer();t!=null&&t.audioTrack&&(t.audioTrack.isPublished?yield this.transport.unpublish([t.audioTrack]):yield t.audioTrack.cleanup(),(i=this.listener)==null||i.onTrackUpdate(1,t.audioTrack,t),t.audioTrack=void 0),yield this.removeAuxTracks(r=>r.source!==\"screen\"&&r.type===\"audio\")})}removeScreenTracks(e){return c(this,null,function*(){e&&(yield this.removeAuxTracks(t=>t.source===\"screen\"))})}removeAuxTracks(e){return c(this,null,function*(){let t=this.store.getLocalPeer();if(t!=null&&t.auxiliaryTracks){let i=[...t.auxiliaryTracks];for(let r of i)e(r)&&(yield this.removeAuxiliaryTrack(r.trackId))}})}removeTrack(e,t,i){return e.has(i)&&!t.has(i)}hasSimulcastDifference(e,t){var i,r,s;return!e&&!t?!1:((i=e==null?void 0:e.layers)==null?void 0:i.length)!==((r=t==null?void 0:t.layers)==null?void 0:r.length)?!0:!!((s=e==null?void 0:e.layers)!=null&&s.some(o=>{var d;let n=(d=t==null?void 0:t.layers)==null?void 0:d.find(u=>u.rid===o.rid);return(n==null?void 0:n.maxBitrate)!==o.maxBitrate||(n==null?void 0:n.maxFramerate)!==o.maxFramerate}))}getSettings(){let{isAudioMuted:e,isVideoMuted:t}=this.getMutedStatus(),{audioInputDeviceId:i,audioOutputDeviceId:r}=this.getAudioDeviceSettings(),s=this.getVideoInputDeviceId();return{isAudioMuted:e,isVideoMuted:t,audioInputDeviceId:i,audioOutputDeviceId:r,videoDeviceId:s}}getMutedStatus(){var t,i,r;let e=(t=this.store.getConfig())==null?void 0:t.settings;return{isAudioMuted:(i=e==null?void 0:e.isAudioMuted)!=null?i:!0,isVideoMuted:(r=e==null?void 0:e.isVideoMuted)!=null?r:!0}}getAudioDeviceSettings(){var r,s,o;let e=(r=this.store.getConfig())==null?void 0:r.settings,t=((s=this.deviceManager.currentSelection.audioInput)==null?void 0:s.deviceId)||(e==null?void 0:e.audioInputDeviceId)||\"default\",i=((o=this.deviceManager.currentSelection.audioOutput)==null?void 0:o.deviceId)||(e==null?void 0:e.audioOutputDeviceId)||\"default\";return{audioInputDeviceId:t,audioOutputDeviceId:i}}getVideoInputDeviceId(){var t,i;let e=(t=this.store.getConfig())==null?void 0:t.settings;return((i=this.deviceManager.currentSelection.videoInput)==null?void 0:i.deviceId)||(e==null?void 0:e.videoDeviceId)||\"default\"}};var os=class{constructor(){this.TAG=\"[HTTPAnalyticsTransport]\";this.failedEvents=new fe(\"client-events\");this.isConnected=!0;this.env=null;this.websocketURL=\"\"}setEnv(e){this.env=e,this.flushFailedEvents()}setWebsocketEndpoint(e){this.websocketURL=e}sendEvent(e){if(!this.env){this.addEventToStorage(e);return}let t={event:e.name,payload:e.properties,event_id:String(e.timestamp),peer:e.metadata.peer,timestamp:e.timestamp,device_id:e.device_id,cluster:{websocket_url:this.websocketURL}},i=this.env===\"prod\"?ea:ta;fetch(i,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${e.metadata.token}`,user_agent_v2:e.metadata.userAgent},body:JSON.stringify(t)}).then(r=>{if(r.status===401){this.removeFromStorage(e);return}if(r.status!==200)throw Error(r.statusText);this.removeFromStorage(e)}).catch(r=>{l.v(this.TAG,\"Failed to send event\",r,e),this.addEventToStorage(e)})}flushFailedEvents(){let e=this.failedEvents.get();e==null||e.forEach(t=>this.sendEvent(t))}addEventToStorage(e){let t=this.failedEvents.get()||[];t.find(i=>i.timestamp===e.timestamp)||(t.length===100&&t.shift(),t.push(e),this.failedEvents.set(t))}removeFromStorage(e){let t=this.failedEvents.get()||[],i=t.findIndex(r=>r.timestamp===e.timestamp);i>-1&&(t.splice(i,1),this.failedEvents.set(t))}},He=new os;var Vt=class{constructor(e){this.type=e.type,this.source=e.source||\"regular\",this.description=\"\",e instanceof De?(this.mute=!e.enabled,this.track_id=e.publishedTrackId,this.stream_id=e.stream.id):(this.mute=e.mute,this.track_id=e.track_id,this.stream_id=e.stream_id)}};var Ft=class{constructor(){this.TAG=\"[Store]:\";this.knownRoles={};this.peers={};this.tracks=new Map;this.peerTrackStates={};this.speakers=[];this.roleDetailsArrived=!1;this.env=\"prod\";this.simulcastEnabled=!1;this.userAgent=Et(this.env);this.polls=new Map;this.whiteboards=new Map;this.addPermissionToRole=(e,t,i,r)=>{var o;if(!this.knownRoles[e]){l.d(this.TAG,`role ${e} is not present in given roles`,this.knownRoles);return}let s=this.knownRoles[e].permissions;t===\"transcriptions\"&&r?s[t]=M(m({},s[t]),{[r]:[i]}):t===\"whiteboard\"&&(s[t]||(s[t]=[]),(o=s[t])==null||o.push(i))};this.addWhiteboardPluginToRole=e=>{var i,r,s;let t=e==null?void 0:e.permissions;(i=t==null?void 0:t.admin)==null||i.forEach(o=>this.addPermissionToRole(o,\"whiteboard\",\"admin\")),(r=t==null?void 0:t.reader)==null||r.forEach(o=>this.addPermissionToRole(o,\"whiteboard\",\"read\")),(s=t==null?void 0:t.writer)==null||s.forEach(o=>this.addPermissionToRole(o,\"whiteboard\",\"write\"))};this.addTranscriptionsPluginToRole=(e=[])=>{var t,i;for(let r of e)(i=(t=r.permissions)==null?void 0:t.admin)==null||i.forEach(s=>this.addPermissionToRole(s,\"transcriptions\",\"admin\",r.mode))};this.handleNoiseCancellationPlugin=e=>{this.room&&(this.room.isNoiseCancellationEnabled=!!(e!=null&&e.enabled)&&!!this.room.isNoiseCancellationEnabled)}}getConfig(){return this.config}setSimulcastEnabled(e){this.simulcastEnabled=e}removeRemoteTracks(){this.tracks.forEach(e=>{(e instanceof ie||e instanceof O)&&(this.removeTrack(e),delete this.peerTrackStates[e.trackId])})}getEnv(){return this.env}getPublishParams(){let e=this.getLocalPeer(),t=(e==null?void 0:e.asRole)||(e==null?void 0:e.role);return t==null?void 0:t.publishParams}getRoom(){return this.room}getPolicyForRole(e){return this.knownRoles[e]}getKnownRoles(){return this.knownRoles}getTemplateAppData(){return this.templateAppData}getLocalPeer(){if(this.localPeerId&&this.peers[this.localPeerId])return this.peers[this.localPeerId]}getRemotePeers(){return Object.values(this.peers).filter(e=>!e.isLocal)}getPeers(){return Object.values(this.peers)}getPeerMap(){return this.peers}getPeerById(e){if(this.peers[e])return this.peers[e]}getTracksMap(){return this.tracks}getTracks(){return Array.from(this.tracks.values())}getVideoTracks(){return this.getTracks().filter(e=>e.type===\"video\")}getRemoteVideoTracks(){return this.getTracks().filter(e=>e instanceof O)}getAudioTracks(){return this.getTracks().filter(e=>e.type===\"audio\")}getPeerTracks(e){let t=e?this.peers[e]:void 0,i=[];return t!=null&&t.videoTrack&&i.push(t.videoTrack),t!=null&&t.audioTrack&&i.push(t.audioTrack),i.concat((t==null?void 0:t.auxiliaryTracks)||[])}getLocalPeerTracks(){return this.getPeerTracks(this.localPeerId)}hasTrack(e){return this.tracks.has(e)}getTrackById(e){var r,s;let t=Array.from(this.tracks.values()).find(o=>o.trackId===e);if(t)return t;let i=this.getLocalPeer();if(i){if((r=i.audioTrack)!=null&&r.isPublishedTrackId(e))return i.audioTrack;if((s=i.videoTrack)!=null&&s.isPublishedTrackId(e))return i.videoTrack}}getPeerByTrackId(e){let t=Array.from(this.tracks.values()).find(i=>i.trackId===e);return t!=null&&t.peerId?this.peers[t.peerId]:void 0}getSpeakers(){return this.speakers}getSpeakerPeers(){return this.speakers.map(e=>e.peer)}getUserAgent(){return this.userAgent}createAndSetUserAgent(e){this.userAgent=Et(this.env,e)}setRoom(e){this.room=e}setKnownRoles(e){var i,r;if(this.knownRoles=e.known_roles,this.addPluginsToRoles(e.plugins),this.roleDetailsArrived=!0,this.templateAppData=e.app_data,!this.simulcastEnabled)return;let t=(i=this.knownRoles[e.name])==null?void 0:i.publishParams;this.videoLayers=this.convertSimulcastLayers((r=t.simulcast)==null?void 0:r.video),this.updatePeersPolicy()}hasRoleDetailsArrived(){return this.roleDetailsArrived}setConfig(e){var t,i,r;if(X.rememberDevices(!!e.rememberDeviceSelection),e.rememberDeviceSelection){let s=X.getSelection();s&&(e.settings||(e.settings={}),(t=s.audioInput)!=null&&t.deviceId&&(e.settings.audioInputDeviceId=e.settings.audioInputDeviceId||s.audioInput.deviceId),(i=s.audioOutput)!=null&&i.deviceId&&(e.settings.audioOutputDeviceId=e.settings.audioOutputDeviceId||s.audioOutput.deviceId),(r=s.videoInput)!=null&&r.deviceId&&(e.settings.videoDeviceId=e.settings.videoDeviceId||s.videoInput.deviceId))}e.autoManageVideo=e.autoManageVideo!==!1,e.autoManageWakeLock=e.autoManageWakeLock!==!1,this.config=e,this.setEnv()}addPeer(e){this.peers[e.peerId]=e,e.isLocal&&(this.localPeerId=e.peerId)}addTrack(e){this.tracks.set(e,e)}getTrackState(e){return this.peerTrackStates[e]}setTrackState(e){this.peerTrackStates[e.trackInfo.track_id]=e}removeTrackState(e){delete this.peerTrackStates[e]}removePeer(e){this.localPeerId===e&&(this.localPeerId=void 0),delete this.peers[e]}removeTrack(e){this.tracks.delete(e)}updateSpeakers(e){this.speakers=e}updateAudioOutputVolume(e){return c(this,null,function*(){for(let t of this.getAudioTracks())yield t.setVolume(e)})}updateAudioOutputDevice(e){return c(this,null,function*(){let t=[];this.getAudioTracks().forEach(i=>{i instanceof ie&&t.push(i.setOutputDevice(e))}),yield Promise.all(t)})}getSimulcastLayers(e){var t;return!this.simulcastEnabled||![\"screen\",\"regular\"].includes(e)?[]:e===\"screen\"?[]:((t=this.videoLayers)==null?void 0:t.layers)||[]}convertSimulcastLayers(e){if(e)return M(m({},e),{layers:(e.layers||[]).map(t=>M(m({},t),{maxBitrate:t.maxBitrate*1e3}))})}getSimulcastDefinitionsForPeer(e,t){var n,d,u;if([!e||!e.role,t===\"screen\",!this.simulcastEnabled].some(p=>!!p))return[];let i=this.getPolicyForRole(e.role.name).publishParams,r,s,o;return t===\"regular\"?(r=(n=i.simulcast)==null?void 0:n.video,s=i.video.width,o=i.video.height):t===\"screen\"&&(r=(d=i.simulcast)==null?void 0:d.screen,s=i.screen.width,o=i.screen.height),((u=r==null?void 0:r.layers)==null?void 0:u.map(p=>{let h=We[p.rid],T={width:Math.floor(s/p.scaleResolutionDownBy),height:Math.floor(o/p.scaleResolutionDownBy)};return{layer:h,resolution:T}}))||[]}setPoll(e){this.polls.set(e.id,e)}getPoll(e){return this.polls.get(e)}setWhiteboard(e){this.whiteboards.set(e.id,e)}getWhiteboards(){return this.whiteboards}getWhiteboard(e){return e?this.whiteboards.get(e):this.whiteboards.values().next().value}getErrorListener(){return this.errorListener}cleanup(){let e=this.getTracks();for(let t of e)t.cleanup();this.room=void 0,this.config=void 0,this.localPeerId=void 0,this.roleDetailsArrived=!1}setErrorListener(e){this.errorListener=e}updatePeersPolicy(){this.getPeers().forEach(e=>{var t;if(!e.role){(t=this.errorListener)==null||t.onError(S.GenericErrors.InvalidRole(\"VALIDATION\",\"\"));return}e.role=this.getPolicyForRole(e.role.name)})}addPluginsToRoles(e){e&&Object.keys(e).forEach(t=>{let i=t;switch(i){case\"whiteboard\":{this.addWhiteboardPluginToRole(e[i]);break}case\"transcriptions\":{this.addTranscriptionsPluginToRole(e[i]);break}case\"noiseCancellation\":{this.handleNoiseCancellationPlugin(e[i]);break}default:break}})}setEnv(){var r;let t=((r=this.config)==null?void 0:r.initEndpoint).split(\"https://\")[1],i=\"prod\";t.startsWith(\"prod\")?i=\"prod\":t.startsWith(\"qa\")?i=\"qa\":t.startsWith(\"dev\")&&(i=\"dev\"),this.env=i,He.setEnv(i)}};var Wi=class{constructor(){this.TAG=\"[WakeLockManager]\";this.wakeLock=null;this.acquireLock=()=>c(this,null,function*(){yield this.requestWakeLock(),document==null||document.addEventListener(\"visibilitychange\",this.visibilityHandler)});this.cleanup=()=>c(this,null,function*(){if(this.wakeLock&&!this.wakeLock.released)try{yield this.wakeLock.release(),l.d(this.TAG,\"Wake lock released\")}catch(e){let t=e;l.w(this.TAG,\"Error while releasing wake lock\",`name=${t.name}, message=${t.message}`)}document==null||document.removeEventListener(\"visibilitychange\",this.visibilityHandler),this.wakeLock=null});this.visibilityHandler=()=>c(this,null,function*(){(document==null?void 0:document.visibilityState)===\"visible\"&&(!this.wakeLock||this.wakeLock.released)&&(l.d(this.TAG,\"Re-acquiring wake lock due to visibility change\"),yield this.requestWakeLock())});this.requestWakeLock=()=>c(this,null,function*(){try{if(!(\"wakeLock\"in navigator)){l.d(this.TAG,\"Wake lock feature not supported\");return}this.wakeLock=yield navigator.wakeLock.request(\"screen\"),l.d(this.TAG,\"Wake lock acquired\")}catch(e){let t=e;l.w(this.TAG,\"Error acquiring wake lock\",`name=${t.name}, message=${t.message}`)}})}};var $i=class{constructor(e){this.store=e;this.bufferSize=100;this.TAG=\"[AnalyticsEventsService]\";this.transport=null;this.pendingEvents=[];this.level=1}setTransport(e){this.transport=e}reset(){this.transport=null,this.pendingEvents=[]}queue(e){if(e.level>=this.level&&(this.pendingEvents.push(e),this.pendingEvents.length>this.bufferSize)){let t=this.pendingEvents.shift();l.d(this.TAG,\"Max buffer size reached\",\"Removed event to accommodate new events\",t)}return this}flushFailedClientEvents(){He.flushFailedEvents()}flush(){var e;try{for(;this.pendingEvents.length>0;){let t=this.pendingEvents.shift();t&&(t.metadata.peer.peer_id=(e=this.store.getLocalPeer())==null?void 0:e.peerId,t.metadata.userAgent=this.store.getUserAgent(),this.transport&&this.transport.transportProvider.isConnected?this.transport.sendEvent(t):this.sendClientEventOnHTTP(t))}}catch(t){l.w(this.TAG,\"Flush Failed\",t)}}sendClientEventOnHTTP(e){var r,s,o,n;let t=this.store.getRoom(),i=this.store.getLocalPeer();e.metadata.token=(r=this.store.getConfig())==null?void 0:r.authToken,e.metadata.peer={session_id:t==null?void 0:t.sessionId,room_id:t==null?void 0:t.id,room_name:t==null?void 0:t.name,template_id:t==null?void 0:t.templateId,joined_at:(s=t==null?void 0:t.joinedAt)==null?void 0:s.getTime(),session_started_at:(o=t==null?void 0:t.startedAt)==null?void 0:o.getTime(),role:(n=i==null?void 0:i.role)==null?void 0:n.name,user_name:i==null?void 0:i.name,user_data:i==null?void 0:i.metadata,peer_id:i==null?void 0:i.peerId},He.sendEvent(e)}};var Qa={autoplayFailed:void 0,initialized:!1,autoplayCheckPromise:void 0},Gt=class{constructor(e,t,i){this.store=e;this.deviceManager=t;this.eventBus=i;this.autoPausedTracks=new Set;this.TAG=\"[AudioSinkManager]:\";this.volume=100;this.state=m({},Qa);this.handleAudioPaused=e=>c(this,null,function*(){l.d(this.TAG,\"Audio Paused\",e.target.id);let t=this.store.getTrackById(e.target.id);t&&this.autoPausedTracks.add(t)});this.handleTrackUpdate=({track:e})=>{l.d(this.TAG,\"Track updated\",`${e}`)};this.handleTrackAdd=r=>c(this,[r],function*({track:e,peer:t,callListener:i=!0}){var o,n;let s=document.createElement(\"audio\");s.style.display=\"none\",s.id=e.trackId,s.addEventListener(\"pause\",this.handleAudioPaused),s.onerror=()=>c(this,null,function*(){var u,p;l.e(this.TAG,\"error on audio element\",s.error);let d=S.TracksErrors.AudioPlaybackError(`Audio playback error for track - ${e.trackId} code - ${(u=s==null?void 0:s.error)==null?void 0:u.code}`);this.eventBus.analytics.publish(y.audioPlaybackError(d)),((p=s==null?void 0:s.error)==null?void 0:p.code)===MediaError.MEDIA_ERR_DECODE&&(this.removeAudioElement(s,e),yield J(500),yield this.handleTrackAdd({track:e,peer:t,callListener:!1}),this.state.autoplayFailed||this.eventBus.analytics.publish(y.audioRecovered(\"Audio recovered after media decode error\")))}),e.setAudioElement(s),yield e.setVolume(this.volume),l.d(this.TAG,\"Audio track added\",`${e}`),this.init(),(o=this.audioSink)==null||o.append(s),this.outputDevice&&(yield e.setOutputDevice(this.outputDevice)),s.srcObject=new MediaStream([e.nativeTrack]),i&&((n=this.listener)==null||n.onTrackUpdate(0,e,t)),yield this.handleAutoplayError(e)});this.handleAutoplayError=e=>c(this,null,function*(){if(this.state.autoplayFailed===void 0&&(this.state.autoplayCheckPromise||(this.state.autoplayCheckPromise=new Promise(t=>{this.playAudioFor(e).then(t)})),yield this.state.autoplayCheckPromise),this.state.autoplayFailed){this.autoPausedTracks.add(e);return}yield this.playAudioFor(e)});this.handleAudioDeviceChange=e=>c(this,null,function*(){e.isUserSelection||e.error||!e.selection||e.type===\"video\"||(yield this.unpauseAudioTracks())});this.handleTrackRemove=e=>{this.autoPausedTracks.delete(e);let t=document.getElementById(e.trackId);t&&this.removeAudioElement(t,e),this.audioSink&&this.audioSink.childElementCount===0&&(this.state.autoplayCheckPromise=void 0,this.state.autoplayFailed=void 0),l.d(this.TAG,\"Audio track removed\",`${e}`)};this.unpauseAudioTracks=()=>c(this,null,function*(){let e=[];this.autoPausedTracks.forEach(t=>{e.push(this.playAudioFor(t))}),yield Promise.all(e)});this.removeAudioElement=(e,t)=>{e&&(l.d(this.TAG,\"removing audio element\",`${t}`),e.removeEventListener(\"pause\",this.handleAudioPaused),e.srcObject=null,e.remove(),t.setAudioElement(null))};this.eventBus.audioTrackAdded.subscribe(this.handleTrackAdd),this.eventBus.audioTrackRemoved.subscribe(this.handleTrackRemove),this.eventBus.audioTrackUpdate.subscribe(this.handleTrackUpdate),this.eventBus.deviceChange.subscribe(this.handleAudioDeviceChange),this.eventBus.localVideoUnmutedNatively.subscribe(this.unpauseAudioTracks),this.eventBus.localAudioUnmutedNatively.subscribe(this.unpauseAudioTracks)}setListener(e){this.listener=e}get outputDevice(){return this.deviceManager.outputDevice}getVolume(){return this.volume}setVolume(e){return c(this,null,function*(){yield this.store.updateAudioOutputVolume(e),this.volume=e})}unblockAutoplay(){return c(this,null,function*(){this.autoPausedTracks.size>0&&(yield this.unpauseAudioTracks()),yield ce.resumeContext()})}init(e){if(this.state.initialized||this.audioSink)return;this.state.initialized=!0;let t=document.createElement(\"div\");t.id=`HMS-SDK-audio-sink-${(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])()}`,(e&&document.getElementById(e)||document.body).append(t),this.audioSink=t,l.d(this.TAG,\"audio sink created\",this.audioSink)}cleanup(){var e;(e=this.audioSink)==null||e.remove(),this.audioSink=void 0,this.eventBus.audioTrackAdded.unsubscribe(this.handleTrackAdd),this.eventBus.audioTrackRemoved.unsubscribe(this.handleTrackRemove),this.eventBus.audioTrackUpdate.unsubscribe(this.handleTrackUpdate),this.eventBus.deviceChange.unsubscribe(this.handleAudioDeviceChange),this.eventBus.localVideoUnmutedNatively.unsubscribe(this.unpauseAudioTracks),this.eventBus.localAudioUnmutedNatively.unsubscribe(this.unpauseAudioTracks),this.autoPausedTracks=new Set,this.state=m({},Qa)}playAudioFor(e){return c(this,null,function*(){let t=e.getAudioElement();if(!t){l.w(this.TAG,\"No audio element found on track\",e.trackId);return}try{yield t.play(),this.state.autoplayFailed=!1,this.autoPausedTracks.delete(e),l.d(this.TAG,\"Played track\",`${e}`)}catch(i){this.autoPausedTracks.add(e),l.w(this.TAG,\"Failed to play track\",`${e}`,i);let r=i;if(!this.state.autoplayFailed&&r.name===\"NotAllowedError\"){this.state.autoplayFailed=!0;let s=S.TracksErrors.AutoplayBlocked(\"AUTOPLAY\",\"\");s.addNativeError(r),this.eventBus.analytics.publish(y.autoplayError()),this.eventBus.autoplayError.publish(s)}}})}};var Ki=class{constructor(e){this.eventBus=e;this.pluginUsage=new Map;this.pluginLastAddedAt=new Map;this.getPluginUsage=e=>{if(this.pluginUsage.has(e)||this.pluginUsage.set(e,0),this.pluginLastAddedAt.has(e)){let i=this.pluginLastAddedAt.get(e)||0,r=i?Date.now()-i:0;this.pluginUsage.set(e,(this.pluginUsage.get(e)||0)+r),this.pluginLastAddedAt.delete(e)}return this.pluginUsage.get(e)};this.updatePluginUsageData=e=>{var i;let t=((i=e.properties)==null?void 0:i.plugin_name)||\"\";switch(e.name){case\"mediaPlugin.toggled.on\":case\"mediaPlugin.added\":{let r=e.properties.added_at||Date.now();this.pluginLastAddedAt.set(t,r);break}case\"mediaPlugin.toggled.off\":case\"mediaPlugin.stats\":{if(this.pluginLastAddedAt.has(t)){let r=e.properties.duration||(Date.now()-(this.pluginLastAddedAt.get(t)||0))/1e3;this.pluginUsage.set(t,(this.pluginUsage.get(t)||0)+Math.max(r,0)*1e3),this.pluginLastAddedAt.delete(t)}break}default:}};this.cleanup=()=>{this.pluginLastAddedAt.clear(),this.pluginUsage.clear()};this.eventBus.analytics.subscribe(t=>this.updatePluginUsageData(t))}};var Wt=class{constructor(e,t){this.store=e;this.eventBus=t;this.audioInput=[];this.audioOutput=[];this.videoInput=[];this.hasWebcamPermission=!1;this.hasMicrophonePermission=!1;this.currentSelection={audioInput:void 0,videoInput:void 0,audioOutput:void 0};this.TAG=\"[Device Manager]:\";this.initialized=!1;this.videoInputChanged=!1;this.audioInputChanged=!1;this.earpieceSelected=!1;this.timer=null;this.updateOutputDevice=(e,t)=>c(this,null,function*(){let i=this.audioOutput.find(r=>r.deviceId===e);return i&&(this.outputDevice=i,yield this.store.updateAudioOutputDevice(i),this.eventBus.analytics.publish(y.deviceChange({isUserSelection:t,selection:{audioOutput:i},devices:this.getDevices(),type:\"audioOutput\"})),X.updateSelection(\"audioOutput\",{deviceId:i.deviceId,groupId:i.groupId})),i});this.getCurrentSelection=()=>{var o,n;let e=this.store.getLocalPeer(),t=this.createIdentifier((o=e==null?void 0:e.audioTrack)==null?void 0:o.getMediaTrackSettings()),i=this.createIdentifier((n=e==null?void 0:e.videoTrack)==null?void 0:n.getMediaTrackSettings()),r=this.audioInput.find(d=>this.createIdentifier(d)===t),s=this.videoInput.find(d=>this.createIdentifier(d)===i);return{audioInput:r,videoInput:s,audioOutput:this.outputDevice}};this.computeChange=(e,t)=>e.length!==t.length?!0:t.some(i=>!e.includes(this.createIdentifier(i)));this.enumerateDevices=()=>c(this,null,function*(){try{let e=yield navigator.mediaDevices.enumerateDevices(),t=this.videoInput.map(this.createIdentifier),i=this.audioInput.map(this.createIdentifier);this.audioInput=[],this.audioOutput=[],this.videoInput=[],e.forEach(r=>{r.kind===\"audioinput\"&&r.label?(this.hasMicrophonePermission=!0,this.audioInput.push(r)):r.kind===\"audiooutput\"?this.audioOutput.push(r):r.kind===\"videoinput\"&&r.label&&(this.hasWebcamPermission=!0,this.videoInput.push(r))}),this.videoInputChanged=this.computeChange(t,this.videoInput),this.audioInputChanged=this.computeChange(i,this.audioInput),X.setDevices({videoInput:[...this.videoInput],audioInput:[...this.audioInput],audioOutput:[...this.audioOutput]}),this.logDevices(\"Enumerate Devices\")}catch(e){l.e(this.TAG,\"Failed enumerating devices\",e)}});this.updateToActualDefaultDevice=()=>c(this,null,function*(){var r,s,o,n,d;let e=this.store.getLocalPeer();if(!((s=(r=this.store.getConfig())==null?void 0:r.settings)==null?void 0:s.videoDeviceId)&&(e!=null&&e.videoTrack)&&(yield e.videoTrack.setSettings({deviceId:(o=this.videoInput[0])==null?void 0:o.deviceId},!0)),!((d=(n=this.store.getConfig())==null?void 0:n.settings)==null?void 0:d.audioInputDeviceId)&&(e!=null&&e.audioTrack)){let u=()=>{var T;let h=this.audioInput.find(g=>!g.label.toLowerCase().includes(\"iphone\"));return Hs()&&h?h==null?void 0:h.deviceId:(T=this.getNewAudioInputDevice())==null?void 0:T.deviceId};u()&&(yield e.audioTrack.setSettings({deviceId:u()},!0))}});this.handleDeviceChange=mi(()=>c(this,null,function*(){yield this.enumerateDevices(),this.logDevices(\"After Device Change\");let e=this.store.getLocalPeer();yield this.setOutputDevice(!0),yield this.handleAudioInputDeviceChange(e==null?void 0:e.audioTrack),yield this.handleVideoInputDeviceChange(e==null?void 0:e.videoTrack),this.eventBus.analytics.publish(y.deviceChange({selection:this.getCurrentSelection(),type:\"change\",devices:this.getDevices()}))}),500).bind(this);this.handleAudioInputDeviceChange=e=>c(this,null,function*(){if(!e){l.d(this.TAG,\"No Audio track on local peer\");return}if(!this.audioInputChanged){l.d(this.TAG,\"No Change in AudioInput Device\");return}let t=this.getNewAudioInputDevice();if(!t||!t.deviceId){this.eventBus.analytics.publish(y.deviceChange({selection:{audioInput:t},error:S.TracksErrors.SelectedDeviceMissing(\"audio\"),devices:this.getDevices(),type:\"audioInput\"})),l.e(this.TAG,\"Audio device not found\");return}let{settings:i}=e,r=new Q().codec(i.codec).maxBitrate(i.maxBitrate).deviceId(t.deviceId).audioMode(i.audioMode).build();try{yield e.setSettings(r,!0),this.eventBus.deviceChange.publish({devices:this.getDevices(),selection:t,type:\"audioInput\"}),this.logDevices(\"Audio Device Change Success\")}catch(s){l.e(this.TAG,\"[Audio Device Change]\",s),this.eventBus.analytics.publish(y.deviceChange({selection:{audioInput:t},devices:this.getDevices(),type:\"audioInput\",error:s})),this.eventBus.deviceChange.publish({error:s,selection:t,type:\"audioInput\",devices:this.getDevices()})}});this.handleVideoInputDeviceChange=e=>c(this,null,function*(){if(!e){l.d(this.TAG,\"No video track on local peer\");return}if(!this.videoInputChanged){l.d(this.TAG,\"No Change in VideoInput Device\");return}let t=this.videoInput[0];if(!t||!t.deviceId){this.eventBus.analytics.publish(y.deviceChange({selection:{videoInput:t},error:S.TracksErrors.SelectedDeviceMissing(\"video\"),devices:this.getDevices(),type:\"video\"})),l.e(this.TAG,\"Video device not found\");return}let{settings:i}=e,r=new q().codec(i.codec).maxBitrate(i.maxBitrate).maxFramerate(i.maxFramerate).setWidth(i.width).setHeight(i.height).deviceId(t.deviceId).build();try{yield e.setSettings(r,!0),this.eventBus.deviceChange.publish({devices:this.getDevices(),selection:t,type:\"video\"}),this.logDevices(\"Video Device Change Success\")}catch(s){l.e(this.TAG,\"[Video Device Change]\",s),this.eventBus.analytics.publish(y.deviceChange({selection:{videoInput:t},devices:this.getDevices(),type:\"video\",error:s})),this.eventBus.deviceChange.publish({error:s,type:\"video\",selection:t,devices:this.getDevices()})}});this.startPollingForDevices=()=>c(this,null,function*(){let{earpiece:e}=this.categorizeAudioInputDevices();e&&(this.timer=setTimeout(()=>{c(this,null,function*(){yield this.enumerateDevices(),yield this.autoSelectAudioOutput(),this.startPollingForDevices()})},5e3))});this.autoSelectAudioOutput=e=>c(this,null,function*(){var u,p;let{bluetoothDevice:t,earpiece:i,speakerPhone:r,wired:s}=this.categorizeAudioInputDevices(),o=(u=this.store.getLocalPeer())==null?void 0:u.audioTrack;if(!o||!i)return;let n=this.getManuallySelectedAudioDevice(),d=(n==null?void 0:n.deviceId)||(t==null?void 0:t.deviceId)||(s==null?void 0:s.deviceId)||(r==null?void 0:r.deviceId);if(!(!e&&o.settings.deviceId===d&&this.earpieceSelected))try{(!this.earpieceSelected||e)&&((t==null?void 0:t.deviceId)===d?this.earpieceSelected=!0:(l.d(this.TAG,\"selecting earpiece\"),yield o.setSettings({deviceId:i==null?void 0:i.deviceId},!0),e&&(yield J(e)),this.earpieceSelected=!0)),yield o.setSettings({deviceId:d},!0);let h=(p=this.audioInput.find(T=>T.deviceId===d))==null?void 0:p.groupId;this.eventBus.deviceChange.publish({isUserSelection:!1,type:\"audioInput\",selection:{deviceId:d,groupId:h},devices:this.getDevices(),internal:!0})}catch(h){this.eventBus.error.publish(h)}});let i=({enabled:r,track:s})=>r&&s.source===\"regular\";this.eventBus.localVideoEnabled.waitFor(i).then(()=>{this.videoInput.length===0&&this.init(!0)}),this.eventBus.localAudioEnabled.waitFor(i).then(()=>{this.audioInput.length===0&&this.init(!0)}),this.eventBus.deviceChange.subscribe(({type:r,isUserSelection:s,selection:o})=>{if(s){let n=r===\"video\"?\"videoInput\":r,d=this[n].find(u=>this.createIdentifier(u)===this.createIdentifier(o));this.eventBus.analytics.publish(y.deviceChange({selection:{[n]:d},devices:this.getDevices(),type:r,isUserSelection:s}))}})}init(e=!1,t=!0){return c(this,null,function*(){this.initialized&&!e||(!this.initialized&&navigator.mediaDevices.addEventListener(\"devicechange\",this.handleDeviceChange),this.initialized=!0,yield this.enumerateDevices(),e||(yield this.updateToActualDefaultDevice(),this.startPollingForDevices()),yield this.autoSelectAudioOutput(),this.logDevices(\"Init\"),yield this.setOutputDevice(),this.eventBus.deviceChange.publish({devices:this.getDevices()}),t&&this.eventBus.analytics.publish(y.deviceChange({selection:this.getCurrentSelection(),type:\"list\",devices:this.getDevices()})))})}getDevices(){return{audioInput:this.audioInput,audioOutput:this.audioOutput,videoInput:this.videoInput}}cleanup(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.initialized=!1,this.earpieceSelected=!1,this.audioInput=[],this.audioOutput=[],this.videoInput=[],this.outputDevice=void 0,navigator.mediaDevices.removeEventListener(\"devicechange\",this.handleDeviceChange)}createIdentifier(e){return e?`${e.deviceId}${e.groupId}`:\"\"}getNewAudioInputDevice(){var i,r;let e=this.getManuallySelectedAudioDevice();if(e)return e;(r=(i=this.store.getLocalPeer())==null?void 0:i.audioTrack)==null||r.resetManuallySelectedDeviceId();let t=this.audioInput.find(s=>s.deviceId===\"default\");return t?this.audioInput.find(o=>o.deviceId!==\"default\"&&t.label.includes(o.label)):this.audioInput[0]}setOutputDevice(e=!1){return c(this,null,function*(){let t=this.getNewAudioInputDevice(),i=this.createIdentifier(this.outputDevice);this.outputDevice=this.getAudioOutputDeviceMatchingInput(t),this.outputDevice||(this.outputDevice=this.audioOutput.find(r=>this.createIdentifier(r)===i),this.outputDevice||(this.outputDevice=this.audioOutput.find(r=>r.deviceId===\"default\")||this.audioOutput[0])),yield this.store.updateAudioOutputDevice(this.outputDevice),e&&i!==this.createIdentifier(this.outputDevice)&&(this.eventBus.analytics.publish(y.deviceChange({selection:{audioOutput:this.outputDevice},devices:this.getDevices(),type:\"audioOutput\"})),this.eventBus.deviceChange.publish({selection:this.outputDevice,type:\"audioOutput\",devices:this.getDevices()}))})}getManuallySelectedAudioDevice(){let e=this.store.getLocalPeer(),t=e==null?void 0:e.audioTrack;return this.audioInput.find(i=>i.deviceId===(t==null?void 0:t.getManuallySelectedDeviceId()))}categorizeAudioInputDevices(){let e=null,t=null,i=null,r=null;for(let s of this.audioInput){let o=Nr(s.label);o===\"SPEAKERPHONE\"?t=s:o===\"WIRED\"?i=s:o===\"BLUETOOTH\"?e=s:o===\"EARPIECE\"&&(r=s)}return{bluetoothDevice:e,speakerPhone:t,wired:i,earpiece:r}}getAudioOutputDeviceMatchingInput(e){var o,n;let t=((n=(o=this.store.getConfig())==null?void 0:o.settings)==null?void 0:n.speakerAutoSelectionBlacklist)||[];if(t===\"all\"||!e)return;let i=e.label.toLowerCase()||\"\";if(t.some(d=>i.includes(d.toLowerCase())))return;let r=this.audioOutput.find(d=>e.deviceId!==\"default\"&&d.label===e.label);if(r)return r;let s=this.audioOutput.find(d=>d.groupId===e.groupId);if(s&&this.audioOutput[0].deviceId===\"default\"&&s.groupId===this.audioOutput[0].groupId)return s}logDevices(e=\"\"){l.d(this.TAG,e,JSON.stringify({videoInput:[...this.videoInput],audioInput:[...this.audioInput],audioOutput:[...this.audioOutput],selected:this.getCurrentSelection()},null,4))}};var qi=class{constructor(e,t){this.deviceManager=e;this.audioSinkManager=t}getVolume(){return this.audioSinkManager.getVolume()}setVolume(e){if(e<0||e>100)throw Error(\"Please pass a valid number between 0-100\");this.audioSinkManager.setVolume(e)}getDevice(){return this.deviceManager.outputDevice}setDevice(e){return this.deviceManager.updateOutputDevice(e,!0)}unblockAutoplay(){return c(this,null,function*(){yield this.audioSinkManager.unblockAutoplay(),yield ce.resumeContext()})}};var $t=class{static handleError(e){if(e.status===404)throw S.APIErrors.EndpointUnreachable(\"FEEDBACK\",e.statusText);if(e.status>=400)throw S.APIErrors.ServerErrors(e.status,\"FEEDBACK\",e==null?void 0:e.statusText)}static sendFeedback(s){return c(this,arguments,function*({token:e,eventEndpoint:t=\"https://event.100ms.live\",info:i,feedback:r}){l.d(this.TAG,`sendFeedback: feedbackEndpoint=${t} peerId=${i.peer.peer_id} session=${i.peer.session_id} `);let o=new URL(\"v2/client/feedback\",t),n=M(m({},i),{payload:r});try{let d=yield fetch(o,{headers:{Authorization:`Bearer ${e}`},body:JSON.stringify(n),method:\"POST\"});try{this.handleError(d);return}catch(u){throw l.e(this.TAG,\"error\",u.message,d.status),u instanceof k?u:S.APIErrors.ServerErrors(d.status,\"FEEDBACK\",u.message)}}catch(d){let u=d;throw[\"Failed to fetch\",\"NetworkError\",\"ECONNRESET\"].some(p=>u.message.includes(p))?S.APIErrors.EndpointUnreachable(\"FEEDBACK\",u.message):u}})}};$t.TAG=\"[FeedbackService]\";var x=class{constructor(e,t){this.eventName=e;this.eventEmitter=t;this.publish=e=>{this.eventEmitter.emit(this.eventName,e)};this.subscribe=e=>{this.eventEmitter.on(this.eventName,e)};this.subscribeOnce=e=>{this.eventEmitter.once(this.eventName,e)};this.unsubscribe=e=>{this.eventEmitter.off(this.eventName,e)};this.waitFor=e=>this.eventEmitter.waitFor(this.eventName,{filter:e});this.removeAllListeners=()=>{this.eventEmitter.removeAllListeners(this.eventName)}}};var Kt=class{constructor(){this.eventEmitter=new eventemitter2__WEBPACK_IMPORTED_MODULE_5__.EventEmitter2;this.analytics=new x(V.ANALYTICS,this.eventEmitter);this.deviceChange=new x(V.DEVICE_CHANGE,this.eventEmitter);this.localAudioEnabled=new x(V.LOCAL_AUDIO_ENABLED,this.eventEmitter);this.localVideoEnabled=new x(V.LOCAL_VIDEO_ENABLED,this.eventEmitter);this.localVideoUnmutedNatively=new x(V.LOCAL_VIDEO_UNMUTED_NATIVELY,this.eventEmitter);this.localAudioUnmutedNatively=new x(V.LOCAL_AUDIO_UNMUTED_NATIVELY,this.eventEmitter);this.statsUpdate=new x(V.STATS_UPDATE,this.eventEmitter);this.trackDegraded=new x(V.TRACK_DEGRADED,this.eventEmitter);this.trackRestored=new x(V.TRACK_RESTORED,this.eventEmitter);this.trackAudioLevelUpdate=new x(V.TRACK_AUDIO_LEVEL_UPDATE,this.eventEmitter);this.audioPluginFailed=new x(V.AUDIO_PLUGIN_FAILED,this.eventEmitter);this.localAudioSilence=new x(V.LOCAL_AUDIO_SILENCE,this.eventEmitter);this.policyChange=new x(V.POLICY_CHANGE,this.eventEmitter);this.localRoleUpdate=new x(V.LOCAL_ROLE_UPDATE,this.eventEmitter);this.audioTrackUpdate=new x(V.AUDIO_TRACK_UPDATE,this.eventEmitter);this.audioTrackAdded=new x(V.AUDIO_TRACK_ADDED,this.eventEmitter);this.audioTrackRemoved=new x(V.AUDIO_TRACK_REMOVED,this.eventEmitter);this.autoplayError=new x(V.AUTOPLAY_ERROR,this.eventEmitter);this.leave=new x(V.LEAVE,this.eventEmitter);this.error=new x(V.ERROR,this.eventEmitter)}};var ji=class{constructor(e,t,i){this.store=e;this.listener=t;this.audioListener=i}handleActiveSpeakers(e){var s,o,n;let t=e[\"speaker-list\"],i=t.map(d=>({audioLevel:d.level,peer:this.store.getPeerById(d.peer_id),track:this.store.getTrackById(d.track_id)}));(s=this.audioListener)==null||s.onAudioLevelUpdate(i),this.store.updateSpeakers(i);let r=t[0];if(r){let d=this.store.getPeerById(r.peer_id);(o=this.listener)==null||o.onPeerUpdate(4,d)}else(n=this.listener)==null||n.onPeerUpdate(5,null)}};var Ji=class{constructor(e){this.listener=e;this.TAG=\"[BroadcastManager]\"}handleNotification(e,t){e===\"on-broadcast\"&&this.handleBroadcast(t)}handleBroadcast(e){var t,i;l.d(this.TAG,`Received Message from sender=${(t=e==null?void 0:e.peer)==null?void 0:t.peer_id}: ${e}`),(i=this.listener)==null||i.onMessageReceived(e)}};var Qi=class{constructor(e,t){this.store=e;this.listener=t}handleQualityUpdate(e){var r;let i=e.peers.map(s=>{let o=this.store.getPeerById(s.peer_id);return o&&o.updateNetworkQuality(s.downlink_score),{peerID:s.peer_id,downlinkQuality:s.downlink_score}});(r=this.listener)==null||r.onConnectionQualityUpdate(i)}};var lt=class{constructor(e,t,i){this.store=e;this.eventBus=t;this.listener=i;this.TAG=\"[TrackManager]\";this.tracksToProcess=new Map;this.handleTrackAdd=e=>{l.d(this.TAG,\"ONTRACKADD\",`${e}`),this.tracksToProcess.set(e.trackId,e),this.processPendingTracks()};this.handleTrackRemovedPermanently=e=>{l.d(this.TAG,\"ONTRACKREMOVE permanently\",e),Object.keys(e.tracks).forEach(i=>{var n;let r=this.store.getTrackState(i);if(!r)return;let s=this.store.getTrackById(i);if(!s){l.d(this.TAG,\"Track not found in store\");return}s.type===\"audio\"&&this.eventBus.audioTrackRemoved.publish(s),this.store.removeTrack(s);let o=this.store.getPeerById(r.peerId);o&&(this.removePeerTracks(o,s),(n=this.listener)==null||n.onTrackUpdate(1,s,o))})};this.handleTrackLayerUpdate=e=>{for(let t in e.tracks){let i=e.tracks[t],r=this.store.getTrackById(t);!r||!this.store.getPeerByTrackId(t)||r instanceof O&&this.setLayer(r,i)}};this.handleTrackUpdate=(e,t=!0)=>{var s,o;let i=this.store.getPeerById(e.peer.peer_id),r=e.peer;if(!i&&!r){l.d(this.TAG,\"Track Update ignored - Peer not added to store\");return}i||(i=ye(r,this.store),this.store.addPeer(i));for(let n in e.tracks){let d=Object.assign({},(s=this.store.getTrackState(n))==null?void 0:s.trackInfo),u=e.tracks[n],p=this.store.getTrackById(n);if(this.store.setTrackState({peerId:e.peer.peer_id,trackInfo:m(m({},d),u)}),!p||this.tracksToProcess.has(n))this.processTrackInfo(u,e.peer.peer_id,t),this.processPendingTracks();else{p.setEnabled(!u.mute);let h=this.processTrackUpdate(p,d,u);h&&((o=this.listener)==null||o.onTrackUpdate(h,p,i))}}};this.processTrackInfo=(e,t,i)=>{};this.processPendingTracks=()=>{new Map(this.tracksToProcess).forEach(t=>{var s;let i=this.store.getTrackState(t.trackId);if(!i){l.d(this.TAG,\"TrackState not added to store\",`peerId - ${t.peerId}`,`trackId -${t.trackId}`);return}let r=this.store.getPeerById(i.peerId);if(!r){l.d(this.TAG,\"Peer not added to store, peerId\",i.peerId);return}t.source=i.trackInfo.source,t.peerId=r.peerId,t.logIdentifier=r.name,t.setEnabled(!i.trackInfo.mute),this.addAudioTrack(r,t),this.addVideoTrack(r,t),t.type===\"audio\"?this.eventBus.audioTrackAdded.publish({track:t,peer:r}):(s=this.listener)==null||s.onTrackUpdate(0,t,r),this.tracksToProcess.delete(t.trackId)})}}handleTrackMetadataAdd(e){l.d(this.TAG,\"TRACK_METADATA_ADD\",JSON.stringify(e,null,2));for(let t in e.tracks){let i=e.tracks[t];this.store.setTrackState({peerId:e.peer.peer_id,trackInfo:i})}this.processPendingTracks()}handleTrackRemove(e,t=!0){var s;l.d(this.TAG,\"ONTRACKREMOVE\",`${e}`);let i=this.store.getTrackState(e.trackId);if(!i)return;if(!this.store.hasTrack(e)){l.d(this.TAG,\"Track not found in store\");return}if(t){this.store.removeTrack(e);let o=this.store.getPeerById(i.peerId);if(!o)return;this.removePeerTracks(o,e),(s=this.listener)==null||s.onTrackUpdate(1,e,o),e.type===\"audio\"&&this.eventBus.audioTrackRemoved.publish(e)}}setLayer(e,t){var s,o;let i=this.store.getPeerByTrackId(e.trackId);if(!i)return;e.setLayerFromServer(t)?(s=this.listener)==null||s.onTrackUpdate(5,e,i):(o=this.listener)==null||o.onTrackUpdate(6,e,i)}removePeerTracks(e,t){let i=e.auxiliaryTracks.indexOf(t);i>-1?(e.auxiliaryTracks.splice(i,1),l.d(this.TAG,\"auxiliary track removed\",`${t}`)):t.type===\"audio\"&&e.audioTrack===t?(e.audioTrack=void 0,l.d(this.TAG,\"audio track removed\",`${t}`)):t.type===\"video\"&&e.videoTrack===t&&(e.videoTrack=void 0,l.d(this.TAG,\"video track removed\",`${t}`))}addAudioTrack(e,t){var i;t.type===\"audio\"&&(t.source===\"regular\"&&(!e.audioTrack||((i=e.audioTrack)==null?void 0:i.trackId)===t.trackId)?e.audioTrack=t:e.auxiliaryTracks.push(t),this.store.addTrack(t),l.d(this.TAG,\"audio track added\",`${t}`))}addVideoTrack(e,t){if(t.type!==\"video\")return;let i=t,r=this.store.getSimulcastDefinitionsForPeer(e,i.source);if(i.setSimulcastDefinitons(r),this.addAsPrimaryVideoTrack(e,i))e.videoTrack?e.videoTrack.replaceTrack(i):e.videoTrack=i,this.store.addTrack(e.videoTrack);else{let s=e.auxiliaryTracks.findIndex(o=>o.trackId===i.trackId);s===-1?(e.auxiliaryTracks.push(i),this.store.addTrack(i)):(e.auxiliaryTracks[s].replaceTrack(i),this.store.addTrack(e.auxiliaryTracks[s]))}l.d(this.TAG,\"video track added\",`${t}`)}addAsPrimaryVideoTrack(e,t){var i;return t.source===\"regular\"&&(!e.videoTrack||((i=e.videoTrack)==null?void 0:i.trackId)===t.trackId)}processTrackUpdate(e,t,i){let r;return t.mute!==i.mute?(r=i.mute?2:3,e.type===\"audio\"&&this.eventBus.audioTrackUpdate.publish({track:e,enabled:!i.mute})):t.description!==i.description&&(r=4),r}};var zi=class extends lt{constructor(t,i,r,s){super(t,i,s);this.transport=r;this.TAG=\"[OnDemandTrackManager]\";this.processTrackInfo=(t,i,r=!0)=>{var u,p;if(t.type!==\"video\")return;let s=this.store.getPeerById(i);if(!s||!this.isPeerRoleSubscribed(i)){l.d(this.TAG,`no peer in store for peerId: ${i}`);return}let o=new Pe(new MediaStream,this.transport.getSubscribeConnection()),n=be.getEmptyVideoTrack();n.enabled=!t.mute;let d=new O(o,n,t.source,(u=this.store.getRoom())==null?void 0:u.disableNoneLayerRequest);d.setTrackId(t.track_id),d.peerId=s.peerId,d.logIdentifier=s.name,this.addVideoTrack(s,d),r&&((p=this.listener)==null||p.onTrackUpdate(0,s.videoTrack,s))}}handleTrackMetadataAdd(t){super.handleTrackMetadataAdd(t);for(let i in t.tracks)t.tracks[i].type===\"video\"&&this.processTrackInfo(t.tracks[i],t.peer.peer_id)}handleTrackRemove(t){let i=t.type===\"video\"&&t.source===\"regular\";super.handleTrackRemove(t,!i),i&&this.processTrackInfo({track_id:t.trackId,mute:!t.enabled,type:t.type,source:t.source,stream_id:t.stream.id},t.peerId,!1)}addAsPrimaryVideoTrack(t,i){return i.source!==\"regular\"?!1:!t.videoTrack||t.videoTrack.trackId===i.trackId?!0:t.videoTrack.enabled&&ve(t.videoTrack.nativeTrack)}isPeerRoleSubscribed(t){var s,o,n,d;if(!t)return!0;let i=this.store.getLocalPeer(),r=this.store.getPeerById(t);return r&&((d=(o=(s=i==null?void 0:i.role)==null?void 0:s.subscribeParams)==null?void 0:o.subscribeToRoles)==null?void 0:d.includes((n=r.role)==null?void 0:n.name))}};var Yi=class{constructor(e,t,i,r){this.store=e;this.peerManager=t;this.trackManager=i;this.listener=r;this.TAG=\"[PeerListManager]\";this.handleInitialPeerList=e=>{let t=Object.values(e.peers);this.peerManager.handlePeerList(t)};this.handleReconnectPeerList=e=>{this.handleRepeatedPeerList(e.peers)};this.handlePreviewRoomState=e=>{if(!this.store.hasRoleDetailsArrived())return;let t=e.peers;if(t==null){e.peer_count===0&&this.handleRepeatedPeerList({});return}Object.keys(t).forEach(i=>{t[i].tracks={},t[i].is_from_room_state=!0}),this.handleRepeatedPeerList(t)};this.handleRepeatedPeerList=e=>{let t=this.store.getRemotePeers(),i=Object.values(e),r=t.filter(o=>!e[o.peerId]);r.length>0&&l.d(this.TAG,`${r}`),r.forEach(o=>{var d;let n={peer_id:o.peerId,role:((d=o.role)==null?void 0:d.name)||\"\",info:{name:o.name,data:o.metadata||\"\",user_id:o.customerUserId||\"\",type:o.type},tracks:{},groups:[],realtime:o.realtime};this.peerManager.handlePeerLeave(n)});let s=[];i.forEach(o=>{let n=this.store.getPeerById(o.peer_id),d=Object.values(o.tracks);n&&(this.store.getPeerTracks(n.peerId).forEach(p=>{var h;o.tracks[p.trackId]||(this.removePeerTrack(n,p.trackId),(h=this.listener)==null||h.onTrackUpdate(1,p,n))}),d.forEach(p=>{this.store.getTrackById(p.track_id)||this.store.setTrackState({peerId:n.peerId,trackInfo:p})}),this.trackManager.handleTrackUpdate({peer:o,tracks:o.tracks},!1),this.peerManager.handlePeerUpdate(o)),s.push(o)}),s.length>0&&this.peerManager.handlePeerList(s)}}handleNotification(e,t,i){if(e===\"peer-list\"){let r=t;i?(l.d(this.TAG,\"RECONNECT_PEER_LIST event\",JSON.stringify(r,null,2)),this.handleReconnectPeerList(r)):(l.d(this.TAG,\"PEER_LIST event\",JSON.stringify(r,null,2)),this.handleInitialPeerList(r))}else if(e===\"room-state\"){let r=t;this.handlePreviewRoomState(r)}}removePeerTrack(e,t){var i,r;if(l.d(this.TAG,`removing track - ${t} from ${e}`),((i=e.audioTrack)==null?void 0:i.trackId)===t)e.audioTrack=void 0;else if(((r=e.videoTrack)==null?void 0:r.trackId)===t)e.videoTrack=void 0;else{let s=e.auxiliaryTracks.findIndex(o=>o.trackId===t);s>=0&&e.auxiliaryTracks.splice(s,1)}}};var L=a=>a?new Date(a):void 0;var Xi=class{constructor(e,t,i){this.store=e;this.trackManager=t;this.listener=i;this.TAG=\"[PeerManager]\";this.handlePeerList=e=>{var r,s;if(e.length===0){(r=this.listener)==null||r.onPeerUpdate(9,[]);return}let t=[],i=new Set(e.map(o=>o.peer_id));this.store.getRemotePeers().forEach(({peerId:o,fromRoomState:n})=>{!i.has(o)&&n&&this.store.removePeer(o)});for(let o of e)t.push(this.makePeer(o));(s=this.listener)==null||s.onPeerUpdate(9,t),this.trackManager.processPendingTracks()};this.handlePeerJoin=e=>{var i;let t=this.makePeer(e);(i=this.listener)==null||i.onPeerUpdate(0,t),this.trackManager.processPendingTracks()};this.handlePeerLeave=e=>{var i,r,s,o;let t=this.store.getPeerById(e.peer_id);this.store.removePeer(e.peer_id),l.d(this.TAG,\"PEER_LEAVE\",e.peer_id,`remainingPeers=${this.store.getPeers().length}`),t&&(t.audioTrack&&((i=this.listener)==null||i.onTrackUpdate(1,t.audioTrack,t)),t.videoTrack&&((r=this.listener)==null||r.onTrackUpdate(1,t.videoTrack,t)),(s=t.auxiliaryTracks)==null||s.forEach(n=>{var d;(d=this.listener)==null||d.onTrackUpdate(1,n,t)}),(o=this.listener)==null||o.onPeerUpdate(1,t))}}handleNotification(e,t){switch(e){case\"on-peer-join\":{let i=t;this.handlePeerJoin(i);break}case\"on-peer-leave\":{let i=t;this.handlePeerLeave(i);break}case\"on-peer-update\":this.handlePeerUpdate(t);break;default:break}}handlePeerUpdate(e){var s,o,n,d,u;let t=this.store.getPeerById(e.peer_id);if(!t&&e.realtime){t=this.makePeer(e),(s=this.listener)==null||s.onPeerUpdate(t.isHandRaised?12:14,t);return}if(t&&!t.isLocal&&!e.realtime){this.store.removePeer(t.peerId),(o=this.listener)==null||o.onPeerUpdate(13,t);return}if(!t){l.d(this.TAG,`peer ${e.peer_id} not found`);return}if(t.role&&t.role.name!==e.role){let p=this.store.getPolicyForRole(e.role);t.updateRole(p),this.updateSimulcastLayersForPeer(t),(n=this.listener)==null||n.onPeerUpdate(8,t)}let i=t.isHandRaised;t.updateGroups(e.groups);let r=(d=e.groups)==null?void 0:d.includes(Ae);i!==r&&((u=this.listener)==null||u.onPeerUpdate(12,t)),this.handlePeerInfoUpdate(m({peer:t},e.info))}handlePeerInfoUpdate({peer:e,name:t,data:i}){var r,s;e&&(t&&e.name!==t&&(e.updateName(t),(r=this.listener)==null||r.onPeerUpdate(10,e)),i&&e.metadata!==i&&(e.updateMetadata(i),(s=this.listener)==null||s.onPeerUpdate(11,e)))}makePeer(e){let t=this.store.getPeerById(e.peer_id);t||(t=ye(e,this.store),t.realtime=e.realtime,t.joinedAt=L(e.joined_at),t.fromRoomState=!!e.is_from_room_state,this.store.addPeer(t),l.d(this.TAG,\"adding to the peerList\",`${t}`));for(let i in e.tracks){let r=e.tracks[i];this.store.setTrackState({peerId:e.peer_id,trackInfo:r}),r.type===\"video\"&&this.trackManager.processTrackInfo(r,e.peer_id,!1)}return t}updateSimulcastLayersForPeer(e){this.store.getPeerTracks(e.peerId).forEach(t=>{if(t.type===\"video\"&&[\"regular\",\"screen\"].includes(t.source)){let i=t,r=this.store.getSimulcastDefinitionsForPeer(e,i.source);i.setSimulcastDefinitons(r)}})}};var Zi=class{constructor(e,t){this.store=e;this.eventBus=t}handlePolicyChange(e){let t=this.store.getLocalPeer();if(t&&!t.role){let r=e.known_roles[e.name];t.updateRole(r)}this.store.setKnownRoles(e);let i=this.store.getRoom();i?i.templateId=e.template_id:l.w(\"[PolicyChangeManager]\",\"on policy change - room not present\"),this.updateLocalPeerRole(e),this.eventBus.policyChange.publish(e)}updateLocalPeerRole(e){var i;let t=this.store.getLocalPeer();if(t!=null&&t.role&&t.role.name!==e.name){let r=this.store.getPolicyForRole(e.name),s=t.role;t.updateRole(r),r.name===((i=t.asRole)==null?void 0:i.name)&&delete t.asRole,this.eventBus.localRoleUpdate.publish({oldRole:s,newRole:r})}}};var ns=(f=>(f.FLAG_SERVER_SUB_DEGRADATION=\"subscribeDegradation\",f.FLAG_SERVER_SIMULCAST=\"simulcast\",f.FLAG_NON_WEBRTC_DISABLE_OFFER=\"nonWebRTCDisableOffer\",f.FLAG_PUBLISH_STATS=\"publishStats\",f.FLAG_SUBSCRIBE_STATS=\"subscribeStats\",f.FLAG_ON_DEMAND_TRACKS=\"onDemandTracks\",f.FLAG_DISABLE_VIDEO_TRACK_AUTO_UNSUBSCRIBE=\"disableVideoTrackAutoUnsubscribe\",f.FLAG_WHITEBOARD_ENABLED=\"whiteboardEnabled\",f.FLAG_EFFECTS_SDK_ENABLED=\"effectsSDKEnabled\",f.FLAG_VB_ENABLED=\"vb\",f.FLAG_HIPAA_ENABLED=\"hipaa\",f.FLAG_NOISE_CANCELLATION=\"noiseCancellation\",f.FLAG_SCALE_SCREENSHARE_BASED_ON_PIXELS=\"scaleScreenshareBasedOnPixels\",f.FLAG_DISABLE_NONE_LAYER_REQUEST=\"disableNoneLayerRequest\",f))(ns||{});var qt=(a,e,t)=>{let i=t===\"qa\"?aa:sa,r=new URL(i);return r.searchParams.set(\"endpoint\",`https://${e}`),r.searchParams.set(\"token\",a),r.toString()};var er=class{constructor(e,t,i){this.transport=e;this.store=t;this.listener=i;this.TAG=\"[HMSWhiteboardInteractivityCenter]\"}get isEnabled(){return this.transport.isFlagEnabled(\"whiteboardEnabled\")}open(e){return c(this,null,function*(){var o;if(!this.isEnabled)return l.w(this.TAG,\"Whiteboard is not enabled for customer\");let t=this.store.getWhiteboard(e==null?void 0:e.id),i=t==null?void 0:t.id;if(t||(i=(yield this.transport.signal.createWhiteboard(this.getCreateOptionsWithDefaults(e))).id),!i)throw new Error(`Whiteboard ID: ${i} not found`);let r=yield this.transport.signal.getWhiteboard({id:i}),s=M(m({},t),{title:e==null?void 0:e.title,attributes:e==null?void 0:e.attributes,id:r.id,url:qt(r.token,r.addr,this.store.getEnv()),token:r.token,addr:r.addr,owner:r.owner,permissions:r.permissions||[],open:!0});this.store.setWhiteboard(s),(o=this.listener)==null||o.onWhiteboardUpdate(s)})}close(e){return c(this,null,function*(){var r;if(!this.isEnabled)return l.w(this.TAG,\"Whiteboard is not enabled for customer\");let t=this.store.getWhiteboard(e);if(!t)throw new Error(`Whiteboard ID: ${e} not found`);let i={id:t.id,title:t.title,open:!1};this.store.setWhiteboard(i),(r=this.listener)==null||r.onWhiteboardUpdate(i)})}setListener(e){this.listener=e}handleLocalRoleUpdate(){return c(this,null,function*(){var t,i,r;let e=this.store.getWhiteboards();for(let s of e.values())if(s.url){let o=yield this.transport.signal.getWhiteboard({id:s.id}),n=this.store.getLocalPeer(),u=(n==null?void 0:n.customerUserId)===o.owner?(i=(t=n.role)==null?void 0:t.permissions.whiteboard)==null?void 0:i.includes(\"admin\"):o.permissions.length>0,p=M(m({},s),{id:o.id,url:qt(o.token,o.addr,this.store.getEnv()),token:o.token,addr:o.addr,owner:o.owner,permissions:o.permissions,open:u});this.store.setWhiteboard(p),(r=this.listener)==null||r.onWhiteboardUpdate(p)}})}getCreateOptionsWithDefaults(e){var o;let t=Object.values(this.store.getKnownRoles()),i=[],r=[],s=[];return t.forEach(n=>{var d,u,p;(d=n.permissions.whiteboard)!=null&&d.includes(\"read\")&&i.push(n.name),(u=n.permissions.whiteboard)!=null&&u.includes(\"write\")&&r.push(n.name),(p=n.permissions.whiteboard)!=null&&p.includes(\"admin\")&&s.push(n.name)}),{title:(e==null?void 0:e.title)||`${(o=this.store.getRoom())==null?void 0:o.id} Whiteboard`,reader:(e==null?void 0:e.reader)||i,writer:(e==null?void 0:e.writer)||r,admin:(e==null?void 0:e.admin)||s}}};var jt=class{constructor(e,t,i){this.transport=e;this.store=t;this.listener=i;this.whiteboard=new er(e,t,i)}setListener(e){this.listener=e,this.whiteboard.setListener(e)}createPoll(e){return c(this,null,function*(){var o,n;let t={customerID:\"userid\",peerID:\"peerid\",userName:\"username\"},{poll_id:i}=yield this.transport.signal.setPollInfo(M(m({},e),{mode:e.mode?t[e.mode]:void 0,poll_id:e.id,vote:e.rolesThatCanVote,responses:e.rolesThatCanViewResponses}));e.id||(e.id=i),Array.isArray(e.questions)&&(yield this.addQuestionsToPoll(e.id,e.questions));let r=yield this.transport.signal.getPollQuestions({poll_id:e.id,index:0,count:50}),s=tr(M(m({},e),{poll_id:e.id,state:\"created\",created_by:(o=this.store.getLocalPeer())==null?void 0:o.peerId}));s.questions=r.questions.map(({question:d,options:u,answer:p})=>M(m({},d),{options:u,answer:p})),(n=this.listener)==null||n.onPollsUpdate(0,[s])})}startPoll(e){return c(this,null,function*(){typeof e==\"string\"?yield this.transport.signal.startPoll({poll_id:e}):(yield this.createPoll(e),yield this.transport.signal.startPoll({poll_id:e.id}))})}addQuestionsToPoll(e,t){return c(this,null,function*(){t.length>0&&(yield this.transport.signal.setPollQuestions({poll_id:e,questions:t.map((i,r)=>this.createQuestionSetParams(i,r))}))})}stopPoll(e){return c(this,null,function*(){yield this.transport.signal.stopPoll({poll_id:e})})}addResponsesToPoll(e,t){return c(this,null,function*(){let i=this.store.getPoll(e);if(!i)throw new Error(\"Invalid poll ID - Poll not found\");let r=t.map(s=>{var n,d;let o=this.getQuestionInPoll(i,s.questionIndex);return o.type===\"single-choice\"?(s.option=s.option||((n=s.options)==null?void 0:n[0])||-1,delete s.text,delete s.options):o.type===\"multiple-choice\"?((d=s.options)==null||d.sort(),delete s.text,delete s.option):(delete s.option,delete s.options),s.skipped&&(delete s.option,delete s.options,delete s.text),m({duration:0,type:o.type,question:s.questionIndex},s)});yield this.transport.signal.setPollResponses({poll_id:e,responses:r})})}fetchLeaderboard(e,t,i){return c(this,null,function*(){var p,h;let r=this.store.getPoll(e);if(!r)throw new Error(\"Invalid poll ID - Poll not found\");let s=(h=(p=this.store.getLocalPeer())==null?void 0:p.role)==null?void 0:h.permissions,o=!!(s!=null&&s.pollRead||s!=null&&s.pollWrite);if(r.anonymous||r.state!==\"stopped\"||!o)return{entries:[],hasNext:!1};let n=yield this.transport.signal.fetchPollLeaderboard({poll_id:r.id,count:i,offset:t}),d={avgScore:n.avg_score,avgTime:n.avg_time,votedUsers:n.voted_users,totalUsers:n.total_users,correctUsers:n.correct_users};return{entries:n.questions.map(T=>({position:T.position,totalResponses:T.total_responses,correctResponses:T.correct_responses,duration:T.duration,peer:T.peer,score:T.score})),hasNext:!n.last,summary:d}})}getPollResponses(e,t){return c(this,null,function*(){var s,o;let i=yield this.transport.signal.getPollResponses({poll_id:e.id,index:0,count:50,self:t}),r=JSON.parse(JSON.stringify(e));(s=i.responses)==null||s.forEach(({response:n,peer:d,final:u})=>{var h,T;let p=(h=e==null?void 0:e.questions)==null?void 0:h.find(g=>g.index===n.question);if(p){let g={id:n.response_id,questionIndex:n.question,option:n.option,options:n.options,text:n.text,responseFinal:u,peer:{peerid:d.peerid,userHash:d.hash,userid:d.userid,username:d.username},skipped:n.skipped,type:n.type,update:n.update},f=p.responses&&!t?[...p.responses]:[];(T=r.questions)!=null&&T[n.question-1]&&(r.questions[n.question-1].responses=[...f,g])}}),this.store.setPoll(r),(o=this.listener)==null||o.onPollsUpdate(4,[r])})}getPolls(){return c(this,null,function*(){var s,o,n;let e=yield this.transport.signal.getPollsList({count:50,state:\"started\"}),t=[],i=(o=(s=this.store.getLocalPeer())==null?void 0:s.role)==null?void 0:o.permissions.pollWrite,r=[...e.polls];if(i){let d=yield this.transport.signal.getPollsList({count:50,state:\"created\"}),u=yield this.transport.signal.getPollsList({count:50,state:\"stopped\"});r=[...d.polls,...r,...u.polls]}for(let d of r){let u=yield this.transport.signal.getPollQuestions({poll_id:d.poll_id,index:0,count:50}),p=tr(d),h=this.store.getPoll(d.poll_id);p.questions=u.questions.map(({question:T,options:g,answer:f},E)=>{var v,R;return M(m({},T),{options:g,answer:f,responses:(R=(v=h==null?void 0:h.questions)==null?void 0:v[E])==null?void 0:R.responses})}),t.push(p),this.store.setPoll(p)}return(n=this.listener)==null||n.onPollsUpdate(3,t),t})}createQuestionSetParams(e,t){var o,n;if(e.index){let d=(o=e.options)==null?void 0:o.map((u,p)=>M(m({},u),{index:p+1}));return{question:M(m({},e),{index:t+1}),options:d,answer:e.answer}}let i=M(m({},e),{index:t+1}),r,s=e.answer||{hidden:!1};return Array.isArray(e.options)&&[\"single-choice\",\"multiple-choice\"].includes(e.type)?(r=(n=e.options)==null?void 0:n.map((d,u)=>({index:u+1,text:d.text,weight:d.weight})),e.type===\"single-choice\"?s.option=e.options.findIndex(d=>d.isCorrectAnswer)+1||void 0:s.options=e.options.map((d,u)=>d.isCorrectAnswer?u+1:void 0).filter(d=>!!d)):(s==null||delete s.options,s==null||delete s.option),{question:i,options:r,answer:s}}getQuestionInPoll(e,t){var r;let i=(r=e==null?void 0:e.questions)==null?void 0:r.find(s=>s.index===t);if(!i)throw new Error(\"Invalid question index - Question not found in poll\");return i}},tr=a=>{let e={userid:\"customerID\",peerid:\"peerID\",username:\"userName\"};return{id:a.poll_id,title:a.title,startedBy:a.started_by,createdBy:a.created_by,anonymous:a.anonymous,type:a.type,duration:a.duration,locked:a.locked,mode:a.mode?e[a.mode]:void 0,visibility:a.visibility,rolesThatCanVote:a.vote||[],rolesThatCanViewResponses:a.responses||[],state:a.state,stoppedBy:a.stopped_by,startedAt:L(a.started_at),stoppedAt:L(a.stopped_at),createdAt:L(a.created_at)}};var ir=class{constructor(e,t,i){this.store=e;this.transport=t;this.listener=i}handleNotification(e,t){switch(e){case\"on-poll-start\":{this.handlePollStart(t);break}case\"on-poll-stop\":{this.handlePollStop(t);break}case\"on-poll-stats\":this.handlePollStats(t);break;default:break}}handlePollStart(e){return c(this,null,function*(){var i,r;let t=[];for(let s of e.polls){let o=this.store.getPoll(s.poll_id);if(o&&o.state===\"started\"){(i=this.listener)==null||i.onPollsUpdate(1,[o]);return}let n=yield this.transport.signal.getPollQuestions({poll_id:s.poll_id,index:0,count:50}),d=tr(s);d.questions=n.questions.map(({question:u,options:p,answer:h})=>M(m({},u),{options:p,answer:h})),yield this.updatePollResponses(d,!0),t.push(d),this.store.setPoll(d)}(r=this.listener)==null||r.onPollsUpdate(1,t)})}handlePollStop(e){return c(this,null,function*(){var i;let t=[];for(let r of e.polls){let s=this.store.getPoll(r.poll_id);if(s){s.state=\"stopped\",s.stoppedAt=L(r.stopped_at),s.stoppedBy=r.stopped_by;let o=yield this.transport.signal.getPollResult({poll_id:r.poll_id});this.updatePollResult(s,o),t.push(s)}}t.length>0&&((i=this.listener)==null||i.onPollsUpdate(2,t))})}handlePollStats(e){return c(this,null,function*(){var i;let t=[];for(let r of e.polls){let s=this.store.getPoll(r.poll_id);if(!s)return;this.updatePollResult(s,r),t.push(s)}t.length>0&&((i=this.listener)==null||i.onPollsUpdate(4,t))})}updatePollResult(e,t){var i;e.result=m({},e.result),e.result.totalUsers=t.user_count,e.result.maxUsers=t.max_user,e.result.totalResponses=t.total_response,(i=t.questions)==null||i.forEach(r=>{var o,n;let s=(o=e.questions)==null?void 0:o.find(d=>d.index===r.question);s&&(s.result=m({},s.result),s.result.correctResponses=r.correct,s.result.skippedCount=r.skipped,s.result.totalResponses=r.total,(n=r.options)==null||n.forEach((d,u)=>{var h;let p=(h=s.options)==null?void 0:h[u];p&&p.voteCount!==d&&(p.voteCount=d)}))})}updatePollResponses(e,t){return c(this,null,function*(){var r;(r=(yield this.transport.signal.getPollResponses({poll_id:e.id,index:0,count:50,self:t})).responses)==null||r.forEach(({response:s,peer:o,final:n})=>{var p;let d=(p=e==null?void 0:e.questions)==null?void 0:p.find(h=>h.index===s.question);if(!d)return;let u={id:s.response_id,questionIndex:s.question,option:s.option,options:s.options,text:s.text,responseFinal:n,peer:{peerid:o.peerid,userHash:o.hash,userid:o.userid,username:o.username},skipped:s.skipped,type:s.type,update:s.update};Array.isArray(d.responses)&&d.responses.length>0?d.responses.find(({id:h})=>h===u.id)||d.responses.push(u):d.responses=[u]})})}};var rr=class{constructor(e,t){this.store=e;this.listener=t}handleNotification(e,t){switch(e){case\"on-role-change-request\":this.handleRoleChangeRequest(t);break;case\"on-track-update-request\":this.handleTrackUpdateRequest(t);break;case\"on-change-track-mute-state-request\":this.handleChangeTrackStateRequest(t);break;default:return}}handleRoleChangeRequest(e){var i;let t={requestedBy:e.requested_by?this.store.getPeerById(e.requested_by):void 0,role:this.store.getPolicyForRole(e.role),token:e.token};(i=this.listener)==null||i.onRoleChangeRequest(t)}handleTrackUpdateRequest(e){let{requested_by:t,track_id:i,mute:r}=e,s=t?this.store.getPeerById(t):void 0,o=this.store.getLocalPeerTracks().find(d=>d.publishedTrackId===i);if(!o)return;let n=()=>{var d;(d=this.listener)==null||d.onChangeTrackStateRequest({requestedBy:s,track:o,enabled:!r})};if(r){if(o.enabled===!r)return;o.setEnabled(!r).then(n)}else n()}handleChangeTrackStateRequest(e){var u;let{type:t,source:i,value:r,requested_by:s}=e,o=s?this.store.getPeerById(s):void 0,n=!r,d=this.getTracksToBeUpdated({type:t,source:i,enabled:n});if(d.length!==0)if(n)(u=this.listener)==null||u.onChangeMultiTrackStateRequest({requestedBy:o,tracks:d,type:t,source:i,enabled:!0});else{let p=[];for(let h of d)p.push(h.setEnabled(!1));Promise.all(p).then(()=>{var h;(h=this.listener)==null||h.onChangeMultiTrackStateRequest({requestedBy:o,tracks:d,enabled:!1})})}}getTracksToBeUpdated({type:e,source:t,enabled:i}){let s=this.store.getLocalPeerTracks();return e&&(s=s.filter(o=>o.type===e)),t&&(s=s.filter(o=>o.source===t)),s.filter(o=>o.enabled!==i)}};var sr=class{constructor(e,t){this.store=e;this.listener=t;this.TAG=\"[RoomUpdateManager]\"}handleNotification(e,t){switch(e){case\"peer-list\":this.onRoomState(t.room);break;case\"on-rtmp-update\":this.updateRTMPStatus(t);break;case\"on-record-update\":this.updateRecordingStatus(t);break;case\"room-state\":this.handlePreviewRoomState(t);break;case\"room-info\":this.handleRoomInfo(t);break;case\"session-info\":this.handleSessionInfo(t);break;case\"on-hls-update\":this.updateHLSStatus(t);break;case\"on-transcription-update\":this.handleTranscriptionStatus([t]);break;default:break}}handleRoomInfo(e){let t=this.store.getRoom();if(!t){l.w(this.TAG,\"on session info - room not present\");return}t.description=e.description,t.large_room_optimization=e.large_room_optimization,t.max_size=e.max_size,t.name=e.name}handleSessionInfo(e){var i;let t=this.store.getRoom();if(!t){l.w(this.TAG,\"on session info - room not present\");return}t.sessionId=e.session_id,t.peerCount!==e.peer_count&&(t.peerCount=e.peer_count,(i=this.listener)==null||i.onRoomUpdate(\"ROOM_PEER_COUNT_UPDATED\",t))}handlePreviewRoomState(e){let{room:t}=e;this.onRoomState(t)}onRoomState(e){var u,p,h,T;let{recording:t,streaming:i,transcriptions:r,session_id:s,started_at:o,name:n}=e,d=this.store.getRoom();if(!d){l.w(this.TAG,\"on room state - room not present\");return}d.name=n,d.rtmp.running=this.isStreamingRunning((u=i==null?void 0:i.rtmp)==null?void 0:u.state),d.rtmp.startedAt=L((p=i==null?void 0:i.rtmp)==null?void 0:p.started_at),d.rtmp.state=(h=i==null?void 0:i.rtmp)==null?void 0:h.state,d.recording.server=this.getPeerListSFURecording(t),d.recording.browser=this.getPeerListBrowserRecording(t),d.recording.hls=this.getPeerListHLSRecording(t),d.hls=this.convertHls(i==null?void 0:i.hls),d.transcriptions=this.addTranscriptionDetail(r),d.sessionId=s,d.startedAt=L(o),(T=this.listener)==null||T.onRoomUpdate(\"RECORDING_STATE_UPDATED\",d)}addTranscriptionDetail(e){return e?e.map(t=>({state:t.state,mode:t.mode,initialised_at:L(t.initialised_at),started_at:L(t.started_at),stopped_at:L(t.stopped_at),updated_at:L(t.updated_at),error:this.toSdkError(t==null?void 0:t.error)})):[]}isRecordingRunning(e){return e?![\"none\",\"paused\",\"stopped\",\"failed\"].includes(e):!1}isStreamingRunning(e){return e?![\"none\",\"stopped\",\"failed\"].includes(e):!1}initHLS(e){let t=this.store.getRoom(),i={running:!0,variants:[]};return t?(e!=null&&e.variants&&e.variants.forEach((r,s)=>{var o,n,d;r.state!==\"initialised\"?i.variants.push({meetingURL:r==null?void 0:r.meetingURL,url:r==null?void 0:r.url,metadata:r==null?void 0:r.metadata,playlist_type:r==null?void 0:r.playlist_type,startedAt:L((o=e==null?void 0:e.variants)==null?void 0:o[s].started_at),initialisedAt:L((n=e==null?void 0:e.variants)==null?void 0:n[s].initialised_at),state:r.state,stream_type:r==null?void 0:r.stream_type}):i.variants.push({initialisedAt:L((d=e==null?void 0:e.variants)==null?void 0:d[s].initialised_at),url:\"\"})}),i):(l.w(this.TAG,\"on hls - room not present\"),i)}updateHLSStatus(e){var r;let t=this.store.getRoom(),i=e.variants&&e.variants.length>0?e.variants.some(s=>this.isStreamingRunning(s.state)):!1;if(!t){l.w(this.TAG,\"on hls - room not present\");return}e.enabled=i,t.hls=this.convertHls(e),(r=this.listener)==null||r.onRoomUpdate(\"HLS_STREAMING_STATE_UPDATED\",t)}handleTranscriptionStatus(e){var i;let t=this.store.getRoom();if(!t){l.w(this.TAG,\"on transcription - room not present\");return}t.transcriptions=this.addTranscriptionDetail(e)||[],(i=this.listener)==null||i.onRoomUpdate(\"TRANSCRIPTION_STATE_UPDATED\",t)}convertHls(e){var r;if(e!=null&&e.variants&&e.variants.length>0?e.variants.some(s=>s.state===\"initialised\"):!1)return this.initHLS(e);let i={running:!!(e!=null&&e.enabled),variants:[],error:this.toSdkError(e==null?void 0:e.error)};return(r=e==null?void 0:e.variants)==null||r.forEach(s=>{i.variants.push({meetingURL:s==null?void 0:s.meeting_url,url:s==null?void 0:s.url,metadata:s==null?void 0:s.metadata,playlist_type:s==null?void 0:s.playlist_type,startedAt:L(s==null?void 0:s.started_at),initialisedAt:L(s==null?void 0:s.initialised_at),state:s.state,stream_type:s==null?void 0:s.stream_type})}),i}getHLSRecording(e){var r,s;let t={running:!1},i=this.isRecordingRunning(e==null?void 0:e.state);return(i||(e==null?void 0:e.state)===\"paused\")&&(t={running:i,singleFilePerLayer:!!((r=e==null?void 0:e.hls_recording)!=null&&r.single_file_per_layer),hlsVod:!!((s=e==null?void 0:e.hls_recording)!=null&&s.hls_vod),startedAt:L(e==null?void 0:e.started_at),initialisedAt:L(e==null?void 0:e.initialised_at),state:e==null?void 0:e.state,error:this.toSdkError(e==null?void 0:e.error)}),t}getPeerListHLSRecording(e){var r,s;let t=e==null?void 0:e.hls;return{running:this.isRecordingRunning(t==null?void 0:t.state),startedAt:L(t==null?void 0:t.started_at),initialisedAt:L(t==null?void 0:t.initialised_at),state:t==null?void 0:t.state,singleFilePerLayer:(r=t==null?void 0:t.config)==null?void 0:r.single_file_per_layer,hlsVod:(s=t==null?void 0:t.config)==null?void 0:s.hls_vod}}getPeerListBrowserRecording(e){let t=e==null?void 0:e.browser;return{running:this.isRecordingRunning(t==null?void 0:t.state),startedAt:L(t==null?void 0:t.started_at),state:t==null?void 0:t.state}}getPeerListSFURecording(e){let t=e==null?void 0:e.sfu;return{running:this.isRecordingRunning(t==null?void 0:t.state),startedAt:L(t==null?void 0:t.started_at),state:t==null?void 0:t.state}}updateRecordingStatus(e){var s;let t=this.store.getRoom(),i=this.isRecordingRunning(e.state);if(!t){l.w(this.TAG,`set recording status running=${i} - room not present`);return}let r;e.type===\"sfu\"?(t.recording.server={running:i,startedAt:i?L(e.started_at):void 0,error:this.toSdkError(e.error),state:e.state},r=\"SERVER_RECORDING_STATE_UPDATED\"):e.type===\"HLS\"?(t.recording.hls=this.getHLSRecording(e),r=\"RECORDING_STATE_UPDATED\"):(t.recording.browser={running:i,startedAt:i?L(e.started_at):void 0,error:this.toSdkError(e.error),state:e==null?void 0:e.state},r=\"BROWSER_RECORDING_STATE_UPDATED\"),(s=this.listener)==null||s.onRoomUpdate(r,t)}updateRTMPStatus(e){var r,s;let t=this.store.getRoom(),i=this.isStreamingRunning(e.state);if(!t){l.w(this.TAG,\"on policy change - room not present\");return}if(!i){t.rtmp={running:i,state:e.state,error:this.toSdkError(e.error)},(r=this.listener)==null||r.onRoomUpdate(\"RTMP_STREAMING_STATE_UPDATED\",t);return}t.rtmp={running:i,startedAt:i?L(e.started_at):void 0,state:e.state,error:this.toSdkError(e.error)},(s=this.listener)==null||s.onRoomUpdate(\"RTMP_STREAMING_STATE_UPDATED\",t)}toSdkError(e){if(!(e!=null&&e.code))return;let t=e.message||\"error in streaming/recording\",i=new k(e.code,\"ServerErrors\",\"NONE\",t,t);return l.e(this.TAG,\"error in streaming/recording\",i),i}};var ar=class{constructor(e,t){this.store=e;this.listener=t}handleNotification(e,t){e===\"on-metadata-change\"&&this.handleMetadataChange(t)}handleMetadataChange(e){var i;let t=e.values.map(r=>({key:r.key,value:r.data,updatedAt:L(r.updated_at),updatedBy:r.updated_by?this.store.getPeerById(r.updated_by):void 0}));(i=this.listener)==null||i.onSessionStoreUpdate(t)}};var or=class{constructor(e,t,i){this.store=e;this.transport=t;this.listener=i}handleNotification(e,t){switch(e){case\"on-whiteboard-update\":{this.handleWhiteboardUpdate(t);break}default:break}}handleWhiteboardUpdate(e){return c(this,null,function*(){var n;let t=this.store.getLocalPeer(),i=this.store.getWhiteboard(e.id),r=e.owner===(t==null?void 0:t.peerId)||e.owner===(t==null?void 0:t.customerUserId),s=e.state===\"open\",o={id:e.id,title:e.title,attributes:e.attributes};if(o.open=r?i==null?void 0:i.open:s,o.owner=o.open?e.owner:void 0,o.open)if(r)o.url=i==null?void 0:i.url,o.token=i==null?void 0:i.token,o.addr=i==null?void 0:i.addr,o.permissions=i==null?void 0:i.permissions;else{let d=yield this.transport.signal.getWhiteboard({id:e.id});o.url=qt(d.token,d.addr,this.store.getEnv()),o.token=d.token,o.addr=d.addr,o.permissions=d.permissions,o.open=d.permissions.length>0}this.store.setWhiteboard(o),(n=this.listener)==null||n.onWhiteboardUpdate(o)})}};var nr=class{constructor(e,t,i,r,s,o){this.store=e;this.transport=i;this.listener=r;this.audioListener=s;this.connectionQualityListener=o;this.TAG=\"[HMSNotificationManager]\";this.hasConsistentRoomStateArrived=!1;this.ignoreNotification=e=>{if(e===\"peer-list\")this.hasConsistentRoomStateArrived=!0;else if(e===\"room-state\")return this.hasConsistentRoomStateArrived;return!1};this.handleTrackAdd=e=>{this.trackManager.handleTrackAdd(e)};this.handleTrackRemove=e=>{this.trackManager.handleTrackRemove(e)};this.updateLocalPeer=({name:e,metadata:t})=>{let i=this.store.getLocalPeer();this.peerManager.handlePeerInfoUpdate({peer:i,name:e,data:t})};let n=this.transport.isFlagEnabled(\"onDemandTracks\");this.trackManager=n?new zi(this.store,t,this.transport,this.listener):new lt(this.store,t,this.listener),this.peerManager=new Xi(this.store,this.trackManager,this.listener),this.peerListManager=new Yi(this.store,this.peerManager,this.trackManager,this.listener),this.broadcastManager=new Ji(this.listener),this.policyChangeManager=new Zi(this.store,t),this.requestManager=new rr(this.store,this.listener),this.activeSpeakerManager=new ji(this.store,this.listener,this.audioListener),this.connectionQualityManager=new Qi(this.store,this.connectionQualityListener),this.roomUpdateManager=new sr(this.store,this.listener),this.sessionMetadataManager=new ar(this.store,this.listener),this.pollsManager=new ir(this.store,this.transport,this.listener),this.whiteboardManager=new or(this.store,this.transport,this.listener)}setListener(e){this.listener=e,this.trackManager.listener=e,this.peerManager.listener=e,this.peerListManager.listener=e,this.broadcastManager.listener=e,this.requestManager.listener=e,this.activeSpeakerManager.listener=e,this.roomUpdateManager.listener=e,this.sessionMetadataManager.listener=e,this.pollsManager.listener=e,this.whiteboardManager.listener=e}setAudioListener(e){this.audioListener=e,this.activeSpeakerManager.audioListener=e}setConnectionQualityListener(e){this.connectionQualityListener=e,this.connectionQualityManager.listener=e}handleNotification(e,t=!1){var s,o;let i=e.method,r=e.params;[\"active-speakers\",\"sfu-stats\",\"on-connection-quality-update\",void 0].includes(i)||l.d(this.TAG,`Received notification - ${i}`,{notification:r}),i===\"sfu-stats\"&&(s=window.HMS)!=null&&s.ON_SFU_STATS&&typeof((o=window.HMS)==null?void 0:o.ON_SFU_STATS)==\"function\"&&window.HMS.ON_SFU_STATS(e.params),!this.ignoreNotification(i)&&(this.roomUpdateManager.handleNotification(i,r),this.peerManager.handleNotification(i,r),this.requestManager.handleNotification(i,r),this.peerListManager.handleNotification(i,r,t),this.broadcastManager.handleNotification(i,r),this.sessionMetadataManager.handleNotification(i,r),this.pollsManager.handleNotification(i,r),this.whiteboardManager.handleNotification(i,r),this.handleIsolatedMethods(i,r))}handleIsolatedMethods(e,t){switch(e){case\"on-track-add\":{this.trackManager.handleTrackMetadataAdd(t);break}case\"on-track-update\":{this.trackManager.handleTrackUpdate(t);break}case\"on-track-remove\":{if(!t.peer){l.d(this.TAG,`Ignoring sfu notification - ${e}`,{notification:t});return}this.trackManager.handleTrackRemovedPermanently(t);break}case\"on-track-layer-update\":{this.trackManager.handleTrackLayerUpdate(t);break}case\"active-speakers\":this.activeSpeakerManager.handleActiveSpeakers(t);break;case\"on-connection-quality-update\":this.connectionQualityManager.handleQualityUpdate(t);break;case\"on-policy-change\":this.policyChangeManager.handlePolicyChange(t);break;case\"node-info\":this.transport.setSFUNodeId(t.sfu_node_id);break;default:break}}};var cr=class{constructor(e){this.transport=e;this.observedKeys=new Set}get(e){return c(this,null,function*(){let{data:t,updated_at:i}=yield this.transport.signal.getSessionMetadata(e);return{value:t,updatedAt:L(i)}})}set(e,t){return c(this,null,function*(){let{data:i,updated_at:r}=yield this.transport.signal.setSessionMetadata({key:e,data:t}),s=L(r);return{value:i,updatedAt:s}})}observe(e){return c(this,null,function*(){let t=new Set(this.observedKeys);if(e.forEach(i=>this.observedKeys.add(i)),this.observedKeys.size!==t.size)try{yield this.transport.signal.listenMetadataChange(Array.from(this.observedKeys))}catch(i){throw this.observedKeys=t,i}})}unobserve(e){return c(this,null,function*(){let t=new Set(this.observedKeys);if(this.observedKeys=new Set([...this.observedKeys].filter(i=>!e.includes(i))),this.observedKeys.size!==t.size)try{yield this.transport.signal.listenMetadataChange(Array.from(this.observedKeys))}catch(i){throw this.observedKeys=t,i}})}};var dr=class{constructor(e,t,i=\"\",r=\"\",s=\"https://prod-init.100ms.live/init\",o=!1,n){this.authToken=e;this.peerId=t;this.peerName=i;this.data=r;this.endpoint=s;this.autoSubscribeVideo=o;this.iceServers=n}};var j=(s=>(s[s.ConnectFailed=0]=\"ConnectFailed\",s[s.SignalDisconnect=1]=\"SignalDisconnect\",s[s.JoinWSMessageFailed=2]=\"JoinWSMessageFailed\",s[s.PublishIceConnectionFailed=3]=\"PublishIceConnectionFailed\",s[s.SubscribeIceConnectionFailed=4]=\"SubscribeIceConnectionFailed\",s))(j||{}),za={0:[],1:[],2:[1],3:[1],4:[1]};var lr=(n=>(n.Disconnected=\"Disconnected\",n.Connecting=\"Connecting\",n.Joined=\"Joined\",n.Preview=\"Preview\",n.Failed=\"Failed\",n.Reconnecting=\"Reconnecting\",n.Leaving=\"Leaving\",n))(lr||{});var ur=class{constructor(e){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i,e(t,i)})}};var pr=class{constructor(e,t){this.onStateChange=e;this.sendEvent=t;this.TAG=\"[RetryScheduler]\";this.inProgress=new Map;this.retryTaskIds=[]}schedule(n){return c(this,arguments,function*({category:e,error:t,task:i,originalState:r,maxRetryTime:s=6e4,changeState:o=!0}){yield this.scheduleTask({category:e,error:t,changeState:o,task:i,originalState:r,maxRetryTime:s,failedAt:Date.now()})})}reset(){this.retryTaskIds.forEach(e=>clearTimeout(e)),this.retryTaskIds=[],this.inProgress.clear()}isTaskInProgress(e){return!!this.inProgress.get(e)}scheduleTask(u){return c(this,arguments,function*({category:e,error:t,changeState:i,task:r,originalState:s,failedAt:o,maxRetryTime:n=6e4,failedRetryCount:d=0}){if(l.d(this.TAG,\"schedule: \",{category:j[e],error:t}),d===0){let v=this.inProgress.get(e);if(v){l.d(this.TAG,`schedule: Already a task for ${j[e]} scheduled, waiting for its completion`),yield v.promise;return}let R=new ur(($,ue)=>{});this.inProgress.set(e,R),this.sendEvent(t,e)}let p=!1,h=za[e];for(let v in h){let R=h[parseInt(v)];try{let $=this.inProgress.get(R);$&&(l.d(this.TAG,`schedule: Suspending retry task of ${j[e]}, waiting for ${j[R]} to recover`),yield $.promise,l.d(this.TAG,`schedule: Resuming retry task ${j[e]} as it's dependency ${j[R]} is recovered`))}catch($){l.d(this.TAG,`schedule: Stopping retry task of ${j[e]} as it's dependency ${j[R]} failed to recover`),p=!0;break}}let T=v=>{if(this.inProgress.delete(e),this.sendEvent(v,e),this.reset(),i)this.onStateChange(\"Failed\",v);else throw v},g=Date.now()-o;if(g>=n||p)return t.description+=`. [${j[e]}] Could not recover after ${g} milliseconds`,p&&(t.description+=` Could not recover all of it's required dependencies - [${h.map(v=>j[v]).toString()}]`),t.isTerminal=!0,T(t);i&&this.onStateChange(\"Reconnecting\",t);let f=this.getDelayForRetryCount(e);l.d(this.TAG,`schedule: [${j[e]}] [failedRetryCount=${d}] Scheduling retry task in ${f}ms`);let E;try{E=yield this.setTimeoutPromise(r,f)}catch(v){E=!1;let R=v;if(R.isTerminal)return l.e(this.TAG,`[${j[e]}] Un-caught terminal exception ${R.name} in retry-task`,v),T(R);l.w(this.TAG,`[${j[e]}] Un-caught exception ${R.name} in retry-task, initiating retry`,v)}if(E){let v=this.inProgress.get(e);this.inProgress.delete(e),v==null||v.resolve(d),i&&this.inProgress.size===0&&this.onStateChange(s),l.d(this.TAG,`schedule: [${j[e]}] [failedRetryCount=${d}] Recovered \\u267B\\uFE0F after ${g}ms`)}else yield this.scheduleTask({category:e,error:t,changeState:i,task:r,originalState:s,maxRetryTime:n,failedAt:o,failedRetryCount:d+1})})}getDelayForRetryCount(e){let t=e===2?Math.random()*2:Math.random(),i=0;return e===2?i=2+t:e===1&&(i=1),i*1e3}setTimeoutPromise(e,t){return c(this,null,function*(){return new Promise((i,r)=>{let s=window.setTimeout(()=>c(this,null,function*(){try{let o=yield e();o&&this.retryTaskIds.splice(this.retryTaskIds.indexOf(s),1),i(o)}catch(o){r(o)}}),t);this.retryTaskIds.push(s)})})}};var hr=class extends Ne{constructor(){super(100);this.localStorage=new fe(\"hms-analytics\");this.localStorage.clear(),this.initLocalStorageQueue()}enqueue(t){super.enqueue(t),this.localStorage.set(this.storage)}dequeue(){let t=super.dequeue();return this.localStorage.set(this.storage),t}initLocalStorageQueue(){var t;(t=this.localStorage.get())==null||t.forEach(i=>{let r=new C(i);super.enqueue(r)})}};var mr=class{constructor(){this.TAG=\"[AnalyticsTransport]\";this.eventCount=0;this.lastResetTime=Date.now();this.MAX_EVENTS_PER_MINUTE=200;this.RESET_INTERVAL_MS=6e4}checkRateLimit(){let e=Date.now();if(e-this.lastResetTime>=this.RESET_INTERVAL_MS&&(this.eventCount=0,this.lastResetTime=e),this.eventCount>=this.MAX_EVENTS_PER_MINUTE)throw new Error(\"Too many events being sent, please check the implementation.\");this.eventCount++}sendEvent(e){try{this.checkRateLimit()}catch(t){throw l.w(this.TAG,\"Rate limit exceeded\",t),t}try{this.sendSingleEvent(e),this.flushFailedEvents()}catch(t){l.w(this.TAG,\"sendEvent failed\",t)}}flushFailedEvents(e){var t;try{for(l.d(this.TAG,\"Flushing failed events\",this.failedEvents);this.failedEvents.size()>0;){let i=this.failedEvents.dequeue();i&&(((t=i.metadata)==null?void 0:t.peer.peer_id)===e||!i.metadata.peer.peer_id?this.sendSingleEvent(i):He.sendEvent(i))}}catch(i){l.w(this.TAG,\"flushFailedEvents failed\",i)}}sendSingleEvent(e){try{this.transportProvider.sendEvent(e),l.d(this.TAG,\"Sent event\",e.name,e)}catch(t){throw l.w(this.TAG,`${this.transportProvider.TAG}.sendEvent failed, adding to local storage events`,{event:e,error:t}),this.failedEvents.enqueue(e),t}}};var Sr=class extends mr{constructor(t){super();this.transportProvider=t;this.failedEvents=new hr}};var ut=class{constructor(e,t,i,r){this.store=e;this.eventBus=t;this.sampleWindowSize=i;this.pushInterval=r;this.shouldSendEvent=!1;this.sequenceNum=1;this.stop=()=>{this.shouldSendEvent&&this.sendEvent(),this.eventBus.statsUpdate.unsubscribe(this.handleStatsUpdate.bind(this)),this.shouldSendEvent=!1};this.start()}start(){this.shouldSendEvent||(this.stop(),this.shouldSendEvent=!0,this.eventBus.statsUpdate.subscribe(this.handleStatsUpdate.bind(this)),this.startLoop().catch(e=>l.e(\"[StatsAnalytics]\",e.message)))}startLoop(){return c(this,null,function*(){for(;this.shouldSendEvent;)yield J(this.pushInterval*1e3),this.sendEvent()})}sendEvent(){this.trackAnalytics.forEach(e=>{e.clearSamples()})}cleanTrackAnalyticsAndCreateSample(e){this.trackAnalytics.forEach(t=>{!this.store.hasTrack(t.track)&&!(t.samples.length>0)&&this.trackAnalytics.delete(t.track_id)}),e&&this.trackAnalytics.forEach(t=>{t.createSample()})}},pt=class{constructor({track:e,ssrc:t,rid:i,kind:r,sampleWindowSize:s}){this.samples=[];this.tempStats=[];this.track=e,this.ssrc=t,this.rid=i,this.kind=r,this.track_id=this.track.trackId,this.source=this.track.source,this.sampleWindowSize=s}pushTempStat(e){this.tempStats.push(e)}createSample(){this.tempStats.length!==0&&(this.samples.push(this.collateSample()),this.prevLatestStat=this.getLatestStat(),this.tempStats.length=0)}clearSamples(){this.samples.length=0}getLatestStat(){return this.tempStats[this.tempStats.length-1]}getFirstStat(){return this.tempStats[0]}calculateSum(e){if(typeof this.getLatestStat()[e]==\"number\")return this.tempStats.reduce((i,r)=>i+(r[e]||0),0)}calculateAverage(e,t=!0){let i=this.calculateSum(e),r=i!==void 0?i/this.tempStats.length:void 0;return r?t?Math.round(r):r:void 0}calculateDifferenceForSample(e){var r;let t=Number((r=this.prevLatestStat)==null?void 0:r[e])||0;return(Number(this.getLatestStat()[e])||0)-t}calculateDifferenceAverage(e,t=!0){let i=this.calculateDifferenceForSample(e)/this.tempStats.length;return t?Math.round(i):i}calculateInstancesOfHigh(e,t){if(typeof this.getLatestStat()[e]==\"number\")return this.tempStats.reduce((r,s)=>r+((s[e]||0)>t?1:0),0)}},gr=(a,e)=>a&&e&&(a.frameWidth!==e.frameWidth||a.frameHeight!==e.frameHeight),Tr=(a,e)=>a&&e&&a.enabled!==e.enabled,Jt=a=>Object.entries(a).filter(([,e])=>e!==void 0).reduce((e,[t,i])=>(e[t]=i,e),{});var Qt=class extends ut{constructor(){super(...arguments);this.trackAnalytics=new Map}toAnalytics(){var r,s;let t=[],i=[];return this.trackAnalytics.forEach(o=>{o.track.type===\"audio\"?t.push(o.toAnalytics()):o.track.type===\"video\"&&i.push(o.toAnalytics())}),{audio:t,video:i,joined_at:(s=(r=this.store.getRoom())==null?void 0:r.joinedAt)==null?void 0:s.getTime(),sequence_num:this.sequenceNum++,max_window_sec:30}}sendEvent(){this.eventBus.analytics.publish(y.publishStats(this.toAnalytics())),super.sendEvent()}handleStatsUpdate(t){let i=!1,r=t.getLocalTrackStats();Object.keys(r).forEach(s=>{let o=r[s],n=this.store.getLocalPeerTracks().find(d=>d.getTrackIDBeingSent()===s);Object.keys(o).forEach(d=>{var g,f,E;let u=o[d];if(!n)return;let p=this.getTrackIdentifier(n.trackId,u),h=M(m({},u),{availableOutgoingBitrate:(f=(g=t.getLocalPeerStats())==null?void 0:g.publish)==null?void 0:f.availableOutgoingBitrate});if(p&&this.trackAnalytics.has(p))(E=this.trackAnalytics.get(p))==null||E.pushTempStat(h);else if(n){let v=new cs({track:n,sampleWindowSize:this.sampleWindowSize,rid:u.rid,ssrc:u.ssrc.toString(),kind:u.kind});v.pushTempStat(h),this.trackAnalytics.set(this.getTrackIdentifier(n.trackId,u),v)}let T=this.trackAnalytics.get(p);T!=null&&T.shouldCreateSample()&&(i=!0)})}),this.cleanTrackAnalyticsAndCreateSample(i)}getTrackIdentifier(t,i){return i.rid?`${t}:${i.rid}`:t}},cs=class extends pt{constructor(){super(...arguments);this.samples=[];this.collateSample=()=>{let t=this.getLatestStat(),i=t.qualityLimitationDurations,r=i&&{bandwidth_sec:i.bandwidth,cpu_sec:i.cpu,other_sec:i.other},s=t.frameHeight?{height_px:this.getLatestStat().frameHeight,width_px:this.getLatestStat().frameWidth}:void 0,o=this.calculateAverage(\"jitter\",!1),n=o?Math.round(o*1e3):void 0,d=this.calculateAverage(\"roundTripTime\",!1),u=d?Math.round(d*1e3):void 0;return Jt({timestamp:Date.now(),avg_available_outgoing_bitrate_bps:this.calculateAverage(\"availableOutgoingBitrate\"),avg_bitrate_bps:this.calculateAverage(\"bitrate\"),avg_fps:this.calculateAverage(\"framesPerSecond\"),total_packets_lost:this.getLatestStat().packetsLost,total_packets_sent:this.getLatestStat().packetsSent,total_packet_sent_delay_sec:parseFloat(this.calculateDifferenceForSample(\"totalPacketSendDelay\").toFixed(4)),total_fir_count:this.calculateDifferenceForSample(\"firCount\"),total_pli_count:this.calculateDifferenceForSample(\"pliCount\"),total_nack_count:this.calculateDifferenceForSample(\"nackCount\"),avg_jitter_ms:n,avg_round_trip_time_ms:u,total_quality_limitation:r,resolution:s})};this.shouldCreateSample=()=>{let t=this.tempStats.length,i=this.tempStats[t-1],r=this.tempStats[t-2];return t===30||Tr(i,r)||i.kind===\"video\"&&gr(i,r)};this.toAnalytics=()=>({track_id:this.track_id,ssrc:this.ssrc,source:this.source,rid:this.rid,samples:this.samples})}};var zt=class extends ut{constructor(){super(...arguments);this.trackAnalytics=new Map}toAnalytics(){var r,s;let t=[],i=[];return this.trackAnalytics.forEach(o=>{o.track.type===\"audio\"?t.push(o.toAnalytics()):o.track.type===\"video\"&&i.push(o.toAnalytics())}),{audio:t,video:i,joined_at:(s=(r=this.store.getRoom())==null?void 0:r.joinedAt)==null?void 0:s.getTime(),sequence_num:this.sequenceNum++,max_window_sec:10}}sendEvent(){this.eventBus.analytics.publish(y.subscribeStats(this.toAnalytics())),super.sendEvent()}handleStatsUpdate(t){let i=t.getAllRemoteTracksStats(),r=!1;Object.keys(i).forEach(s=>{var f,E;let o=this.store.getTrackById(s),n=i[s],d=(f=this.trackAnalytics.get(s))==null?void 0:f.getLatestStat(),p=((v,R)=>{let $=(R==null?void 0:R.jitterBufferDelay)||0,ue=(R==null?void 0:R.jitterBufferEmittedCount)||0,ge=((v==null?void 0:v.jitterBufferDelay)||0)-$,pe=((v==null?void 0:v.jitterBufferEmittedCount)||0)-ue;return pe>0?ge*1e3/pe:(R==null?void 0:R.calculatedJitterBufferDelay)||0})(n,d),h=this.calculateAvSyncForStat(n,t),T=M(m({},n),{calculatedJitterBufferDelay:p,avSync:h});if(n.kind===\"video\"){let v=o.getPreferredLayerDefinition();T.expectedFrameHeight=v==null?void 0:v.resolution.height,T.expectedFrameWidth=v==null?void 0:v.resolution.width}if(this.trackAnalytics.has(s))(E=this.trackAnalytics.get(s))==null||E.pushTempStat(T);else if(o){let v=new ls({track:o,sampleWindowSize:this.sampleWindowSize,ssrc:n.ssrc.toString(),kind:n.kind});v.pushTempStat(T),this.trackAnalytics.set(s,v)}let g=this.trackAnalytics.get(s);g!=null&&g.shouldCreateSample()&&(r=!0)}),this.cleanTrackAnalyticsAndCreateSample(r)}calculateAvSyncForStat(t,i){if(!t.peerID||!t.estimatedPlayoutTimestamp||t.kind!==\"video\")return;let r=this.store.getPeerById(t.peerID),s=r==null?void 0:r.audioTrack,o=r==null?void 0:r.videoTrack;if(!(s&&o&&s.enabled&&o.enabled))return Rt;let d=i.getRemoteTrackStats(s.trackId);if(!d)return Rt;if(d.estimatedPlayoutTimestamp)return d.estimatedPlayoutTimestamp-t.estimatedPlayoutTimestamp}},ls=class extends pt{constructor(){super(...arguments);this.samples=[];this.collateSample=()=>{let t=this.getLatestStat(),i=this.getFirstStat(),r={timestamp:Date.now(),total_pli_count:this.calculateDifferenceForSample(\"pliCount\"),total_nack_count:this.calculateDifferenceForSample(\"nackCount\"),avg_jitter_buffer_delay:this.calculateAverage(\"calculatedJitterBufferDelay\",!1)};if(t.kind===\"video\")return Jt(M(m({},r),{avg_av_sync_ms:this.calculateAvgAvSyncForSample(),avg_frames_received_per_sec:this.calculateDifferenceAverage(\"framesReceived\"),avg_frames_dropped_per_sec:this.calculateDifferenceAverage(\"framesDropped\"),avg_frames_decoded_per_sec:this.calculateDifferenceAverage(\"framesDecoded\"),frame_width:this.calculateAverage(\"frameWidth\"),frame_height:this.calculateAverage(\"frameHeight\"),expected_frame_width:this.calculateAverage(\"expectedFrameWidth\"),expected_frame_height:this.calculateAverage(\"expectedFrameHeight\"),pause_count:this.calculateDifferenceForSample(\"pauseCount\"),pause_duration_seconds:this.calculateDifferenceForSample(\"totalPausesDuration\"),freeze_count:this.calculateDifferenceForSample(\"freezeCount\"),freeze_duration_seconds:this.calculateDifferenceForSample(\"totalFreezesDuration\")}));{let s=(t.concealedSamples||0)-(t.silentConcealedSamples||0)-((i.concealedSamples||0)-(i.silentConcealedSamples||0));return Jt(M(m({},r),{audio_level:this.calculateInstancesOfHigh(\"audioLevel\",.05),audio_concealed_samples:s,audio_total_samples_received:this.calculateDifferenceForSample(\"totalSamplesReceived\"),audio_concealment_events:this.calculateDifferenceForSample(\"concealmentEvents\"),fec_packets_discarded:this.calculateDifferenceForSample(\"fecPacketsDiscarded\"),fec_packets_received:this.calculateDifferenceForSample(\"fecPacketsReceived\"),total_samples_duration:this.calculateDifferenceForSample(\"totalSamplesDuration\"),total_packets_received:this.calculateDifferenceForSample(\"packetsReceived\"),total_packets_lost:this.calculateDifferenceForSample(\"packetsLost\")}))}};this.shouldCreateSample=()=>{let t=this.tempStats.length,i=this.tempStats[t-1],r=this.tempStats[t-2];return t===10||Tr(i,r)||i.kind===\"video\"&&gr(i,r)};this.toAnalytics=()=>({track_id:this.track_id,ssrc:this.ssrc,source:this.source,rid:this.rid,samples:this.samples})}calculateAvgAvSyncForSample(){let i=this.tempStats.map(r=>r.avSync).filter(r=>r!==void 0&&r!==Rt);return i.length===0?Rt:i.reduce((r,s)=>r+s,0)/i.length}};var ht=(t=>(t[t.Publish=0]=\"Publish\",t[t.Subscribe=1]=\"Subscribe\",t))(ht||{});function Ya(a,e){var r;let t=sdp_transform__WEBPACK_IMPORTED_MODULE_6__.parse(a.sdp);if(!((r=t.origin)!=null&&r.username.startsWith(\"mozilla\")))return a;let i=e?Array.from(e.values()):[];return t.media.forEach(s=>{var d,u,p;let o=(d=s.msid)==null?void 0:d.split(\" \")[0],n=(u=i.find(h=>h.type===s.type&&h.stream_id===o))==null?void 0:u.track_id;n&&(s.msid=(p=s.msid)==null?void 0:p.replace(/\\s(.+)/,` ${n}`))}),{type:a.type,sdp:sdp_transform__WEBPACK_IMPORTED_MODULE_6__.write(t)}}function Xa(a,e){var s;if(!(a!=null&&a.sdp)||!e)return;let i=sdp_transform__WEBPACK_IMPORTED_MODULE_6__.parse(a.sdp).media.find(o=>he(o.mid)&&parseInt(o.mid)===parseInt(e));return(s=i==null?void 0:i.msid)==null?void 0:s.split(\" \")[1]}function Za(a){return a.sdp.includes(\"usedtx=1\")?a:{type:a.type,sdp:a.sdp.replace(\"useinbandfec=1\",\"useinbandfec=1;usedtx=1\")}}var Ce=\"[HMSConnection]\",Qe=class{constructor(e,t){this.candidates=new Array;this.role=e,this.signal=t}get iceConnectionState(){return this.nativeConnection.iceConnectionState}get connectionState(){return this.nativeConnection.connectionState}get action(){return this.role===0?\"PUBLISH\":\"SUBSCRIBE\"}setSfuNodeId(e){this.sfuNodeId=e}addTransceiver(e,t){return this.nativeConnection.addTransceiver(e,t)}createOffer(e,t){return c(this,null,function*(){try{let i=yield this.nativeConnection.createOffer(t);return l.d(Ce,`[role=${this.role}] createOffer offer=${JSON.stringify(i,null,1)}`),Za(Ya(i,e))}catch(i){throw S.WebrtcErrors.CreateOfferFailed(this.action,i.message)}})}createAnswer(e=void 0){return c(this,null,function*(){try{let t=yield this.nativeConnection.createAnswer(e);return l.d(Ce,`[role=${this.role}] createAnswer answer=${JSON.stringify(t,null,1)}`),t}catch(t){throw S.WebrtcErrors.CreateAnswerFailed(this.action,t.message)}})}setLocalDescription(e){return c(this,null,function*(){try{l.d(Ce,`[role=${this.role}] setLocalDescription description=${JSON.stringify(e,null,1)}`),yield this.nativeConnection.setLocalDescription(e)}catch(t){throw S.WebrtcErrors.SetLocalDescriptionFailed(this.action,t.message)}})}setRemoteDescription(e){return c(this,null,function*(){try{l.d(Ce,`[role=${this.role}] setRemoteDescription description=${JSON.stringify(e,null,1)}`),yield this.nativeConnection.setRemoteDescription(e)}catch(t){throw S.WebrtcErrors.SetRemoteDescriptionFailed(this.action,t.message)}})}addIceCandidate(e){return c(this,null,function*(){if(this.nativeConnection.signalingState===\"closed\"){l.d(Ce,`[role=${this.role}] addIceCandidate signalling state closed`);return}l.d(Ce,`[role=${this.role}] addIceCandidate candidate=${JSON.stringify(e,null,1)}`),yield this.nativeConnection.addIceCandidate(e)})}get remoteDescription(){return this.nativeConnection.remoteDescription}getSenders(){return this.nativeConnection.getSenders()}handleSelectedIceCandidatePairs(){try{(this.role===0?this.getSenders():this.getReceivers()).forEach(t=>{var r;let i=(r=t.track)==null?void 0:r.kind;if(t.transport){let s=t.transport.iceTransport,o=()=>{typeof s.getSelectedCandidatePair==\"function\"&&(this.selectedCandidatePair=s.getSelectedCandidatePair(),this.selectedCandidatePair&&(this.observer.onSelectedCandidatePairChange(this.selectedCandidatePair),l.d(Ce,`${ht[this.role]} connection`,`selected ${i||\"unknown\"} candidate pair`,JSON.stringify(this.selectedCandidatePair,null,2))))};typeof s.onselectedcandidatepairchange==\"function\"&&(s.onselectedcandidatepairchange=o),o()}})}catch(e){l.w(Ce,`Error in logging selected ice candidate pair for ${ht[this.role]} connection`,e)}}removeTrack(e){this.nativeConnection.signalingState!==\"closed\"&&this.nativeConnection.removeTrack(e)}setMaxBitrateAndFramerate(e,t){return c(this,null,function*(){let i=(t==null?void 0:t.maxBitrate)||e.settings.maxBitrate,r=e instanceof G&&e.settings.maxFramerate,s=this.getSenders().find(o=>{var n;return((n=o==null?void 0:o.track)==null?void 0:n.id)===e.getTrackIDBeingSent()});if(s){let o=s.getParameters();o.encodings.length===1&&(i&&(o.encodings[0].maxBitrate=i*1e3),r&&(o.encodings[0].maxFramerate=r)),yield s.setParameters(o)}else l.w(Ce,`no sender found to setMaxBitrate for track - ${e.trackId}, sentTrackId - ${e.getTrackIDBeingSent()}`)})}getStats(){return c(this,null,function*(){return yield this.nativeConnection.getStats()})}close(){this.nativeConnection.close()}getReceivers(){return this.nativeConnection.getReceivers()}};var Xt=class extends Qe{constructor(t,i,r){super(0,t);this.TAG=\"[HMSPublishConnection]\";this.observer=r,this.nativeConnection=new RTCPeerConnection(i),this.channel=this.nativeConnection.createDataChannel(vi,{protocol:\"SCTP\"}),this.channel.onerror=s=>l.e(this.TAG,`publish data channel onerror ${s}`,s),this.nativeConnection.onicecandidate=({candidate:s})=>{s&&(this.observer.onIceCandidate(s),t.trickle(this.role,s))},this.nativeConnection.oniceconnectionstatechange=()=>{this.observer.onIceConnectionChange(this.nativeConnection.iceConnectionState)},this.nativeConnection.onconnectionstatechange=()=>{this.observer.onConnectionStateChange(this.nativeConnection.connectionState),this.nativeConnection.sctp&&(this.nativeConnection.sctp.transport.onstatechange=()=>{var s;this.observer.onDTLSTransportStateChange((s=this.nativeConnection.sctp)==null?void 0:s.transport.state)},this.nativeConnection.sctp.transport.onerror=s=>{var o;this.observer.onDTLSTransportError(new Error((o=s==null?void 0:s.error)==null?void 0:o.errorDetail)||\"DTLS Transport failed\")})}}close(){super.close(),this.channel.close()}initAfterJoin(){this.nativeConnection.onnegotiationneeded=()=>c(this,null,function*(){l.d(this.TAG,\"onnegotiationneeded\"),yield this.observer.onRenegotiationNeeded()})}};var Zt=class{constructor(e,t,i=\"\"){this.TAG=\"[HMSDataChannel]\";this.nativeChannel=e,this.observer=t,this.metadata=i,e.onmessage=r=>{this.observer.onMessage(r.data)}}get id(){return this.nativeChannel.id}get label(){return this.nativeChannel.label}get readyState(){return this.nativeChannel.readyState}send(e){l.d(this.TAG,`[${this.metadata}] Sending [size=${e.length}] message=${e}`),this.nativeChannel.send(e)}close(){this.nativeChannel.close()}};var ei=class extends Qe{constructor(t,i,r,s){super(1,t);this.isFlagEnabled=r;this.TAG=\"[HMSSubscribeConnection]\";this.remoteStreams=new Map;this.MAX_RETRIES=3;this.pendingMessageQueue=[];this.eventEmitter=new (eventemitter2__WEBPACK_IMPORTED_MODULE_5___default())({maxListeners:60});this.handlePendingApiMessages=()=>{this.eventEmitter.emit(\"open\",!0),this.pendingMessageQueue.length>0&&(l.d(this.TAG,\"Found pending message queue, sending messages\"),this.pendingMessageQueue.forEach(t=>this.sendOverApiDataChannel(t)),this.pendingMessageQueue.length=0)};this.sendMessage=(t,i)=>c(this,null,function*(){var s;((s=this.apiChannel)==null?void 0:s.readyState)!==\"open\"&&(yield this.eventEmitter.waitFor(\"open\"));let r;for(let o=0;o<this.MAX_RETRIES;o++){this.apiChannel.send(t),r=yield this.waitForResponse(i);let n=r.error;if(n){if(n.code===404){l.d(this.TAG,`Track not found ${i}`,{request:t,try:o+1,error:n});break}if(l.d(this.TAG,`Failed sending ${i}`,{request:t,try:o+1,error:n}),!(n.code/100===5||n.code===429))throw Error(`code=${n.code}, message=${n.message}`);let u=(2+Math.random()*2)*1e3;yield Oe(u)}else break}return r});this.waitForResponse=t=>c(this,null,function*(){let i=yield this.eventEmitter.waitFor(\"message\",function(s){return s.includes(t)}),r=JSON.parse(i[0]);return l.d(this.TAG,`response for ${t} -`,JSON.stringify(r,null,2)),r});this.observer=s,this.nativeConnection=new RTCPeerConnection(i),this.initNativeConnectionCallbacks()}initNativeConnectionCallbacks(){this.nativeConnection.oniceconnectionstatechange=()=>{this.observer.onIceConnectionChange(this.nativeConnection.iceConnectionState)},this.nativeConnection.onconnectionstatechange=()=>{this.observer.onConnectionStateChange(this.nativeConnection.connectionState)},this.nativeConnection.ondatachannel=t=>{t.channel.label===vi&&(this.apiChannel=new Zt(t.channel,{onMessage:i=>{this.eventEmitter.emit(\"message\",i),this.observer.onApiChannelMessage(i)}},`role=${this.role}`),t.channel.onopen=this.handlePendingApiMessages)},this.nativeConnection.onicecandidate=t=>{t.candidate!==null&&(this.observer.onIceCandidate(t.candidate),this.signal.trickle(this.role,t.candidate))},this.nativeConnection.ontrack=t=>{var p;let i=t.streams[0],r=i.id;if(!this.remoteStreams.has(r)){let h=new Pe(i,this);this.remoteStreams.set(r,h)}i.addEventListener(\"removetrack\",h=>{if(h.track.id!==t.track.id)return;let T=s.tracks.findIndex(g=>{var f;return g.nativeTrack.id===h.track.id&&t.transceiver.mid===((f=g.transceiver)==null?void 0:f.mid)});if(T>=0){let g=s.tracks[T];this.observer.onTrackRemove(g),s.tracks.splice(T,1),s.tracks.length===0&&this.remoteStreams.delete(r)}});let s=this.remoteStreams.get(r),o=t.track.kind===\"audio\",n=o?ie:O,d=o?new n(s,t.track):new n(s,t.track,void 0,this.isFlagEnabled(\"disableNoneLayerRequest\"));t.track.kind===\"video\"&&s.setVideoLayerLocally(\"none\",\"addTrack\",\"subscribeConnection\"),d.transceiver=t.transceiver;let u=Xa(this.remoteDescription,(p=t.transceiver)==null?void 0:p.mid);u&&d.setSdpTrackId(u),s.tracks.push(d),this.observer.onTrackAdd(d)}}sendOverApiDataChannel(t){this.apiChannel&&this.apiChannel.readyState===\"open\"?this.apiChannel.send(t):(l.w(this.TAG,`API Data channel not ${this.apiChannel?\"open\":\"present\"}, queueing`,t),this.pendingMessageQueue.push(t))}sendOverApiDataChannelWithResponse(t,i){return c(this,null,function*(){let r=(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();if(t.method===\"prefer-video-track-state\"&&this.isFlagEnabled(\"disableVideoTrackAutoUnsubscribe\")&&t.params.max_spatial_layer===\"none\")return l.d(this.TAG,\"video auto unsubscribe is disabled, request is ignored\"),{id:r};let s=JSON.stringify(m({id:i||r,jsonrpc:\"2.0\"},t));return this.sendMessage(s,r)})}close(){var t;super.close(),(t=this.apiChannel)==null||t.close()}};var eo=(a,e)=>!e||e.length===0?a:e.map(i=>({urls:i.urls,credentialType:\"password\",credential:i.password,username:i.userName}));var vr=\"[InitService]\",ti=class{static handleError(e,t){switch(e.status){case 404:throw S.APIErrors.EndpointUnreachable(\"INIT\",t.message||e.statusText);case 200:break;default:throw S.APIErrors.ServerErrors(t.code||e.status,\"INIT\",t.message||(e==null?void 0:e.statusText))}}static fetchInitConfig(n){return c(this,arguments,function*({token:e,peerId:t,userAgent:i,initEndpoint:r=\"https://prod-init.100ms.live\",region:s=\"\",iceServers:o}){l.d(vr,`fetchInitConfig: initEndpoint=${r} token=${e} peerId=${t} region=${s} `);let d=bn(r,t,i,s);try{let u=yield fetch(d,{headers:{Authorization:`Bearer ${e}`}});try{let p=yield u.clone().json();return this.handleError(u,p),l.d(vr,`config is ${JSON.stringify(p,null,2)}`),An(p,o)}catch(p){let h=yield u.text();throw l.e(vr,\"json error\",p.message,h),p instanceof k?p:S.APIErrors.ServerErrors(u.status,\"INIT\",p.message)}}catch(u){let p=u;throw[\"Failed to fetch\",\"NetworkError\",\"ECONNRESET\"].some(h=>p.message.includes(h))?S.APIErrors.EndpointUnreachable(\"INIT\",p.message):p}})}};function bn(a,e,t,i){try{let r=new URL(\"/init\",a);return i&&i.trim().length>0&&r.searchParams.set(\"region\",i.trim()),r.searchParams.set(\"peer_id\",e),r.searchParams.set(\"user_agent_v2\",t),r.toString()}catch(r){let s=r;throw l.e(vr,s.name,s.message),s}}function An(a,e){var t;return M(m({},a),{rtcConfiguration:M(m({},a.rtcConfiguration),{iceServers:eo((t=a.rtcConfiguration)==null?void 0:t.ice_servers,e)})})}var ii=class{constructor(e){this.TAG=\"[SIGNAL]: \";this.pongResponseTimes=new Ne(5);this.isJoinCompleted=!1;this.pendingTrickle=[];this.socket=null;this.callbacks=new Map;this._isConnected=!1;this.id=0;this.onCloseHandler=()=>{};this.resolvePingOnAnyResponse=()=>{this.callbacks.forEach((e,t)=>{var i;((i=e.metadata)==null?void 0:i.method)===\"ping\"&&(e.resolve({timestamp:Date.now()}),this.callbacks.delete(t))})};this.offlineListener=()=>{l.d(this.TAG,\"Window network offline\"),this.setIsConnected(!1,\"Window network offline\")};this.onlineListener=()=>{l.d(this.TAG,\"Window network online\"),this.observer.onNetworkOnline()};this.observer=e,window.addEventListener(\"offline\",this.offlineListener),window.addEventListener(\"online\",this.onlineListener),this.onMessageHandler=this.onMessageHandler.bind(this)}get isConnected(){return this._isConnected}setSfuNodeId(e){this.sfuNodeId=e}setIsConnected(e,t=\"\"){l.d(this.TAG,`isConnected set id: ${this.id}, oldValue: ${this._isConnected}, newValue: ${e}`),this._isConnected!==e&&(this._isConnected&&!e?(this._isConnected=e,this.rejectPendingCalls(t),this.observer.onOffline(t)):!this._isConnected&&e&&(this._isConnected=e,this.observer.onOnline()))}getPongResponseTimes(){return this.pongResponseTimes.toList()}internalCall(e,t){return c(this,null,function*(){var s;let i=(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(),r={method:e,params:t,id:i,jsonrpc:\"2.0\"};(s=this.socket)==null||s.send(JSON.stringify(r));try{return yield new Promise((n,d)=>{this.callbacks.set(i,{resolve:n,reject:d,metadata:{method:e}})})}catch(o){if(o instanceof k)throw o;let n=o;throw S.WebsocketMethodErrors.ServerErrors(Number(n.code),br(e),n.message)}})}notify(e,t){var r,s;let i={method:e,params:t};((r=this.socket)==null?void 0:r.readyState)===WebSocket.OPEN&&((s=this.socket)==null||s.send(JSON.stringify(i)))}open(e){return new Promise((t,i)=>{let r=!1;this.socket&&(this.socket.close(),this.socket.removeEventListener(\"close\",this.onCloseHandler),this.socket.removeEventListener(\"message\",this.onMessageHandler)),this.socket=new WebSocket(e);let s=()=>{l.e(this.TAG,\"Error from websocket\"),r=!0,i(S.WebSocketConnectionErrors.FailedToConnect(\"JOIN\",\"Error opening websocket connection\"))};this.onCloseHandler=n=>{l.w(`Websocket closed code=${n.code}`),r?this.setIsConnected(!1,`code: ${n.code}${n.code!==1e3?\", unexpected websocket close\":\"\"}`):(r=!0,i(S.WebSocketConnectionErrors.AbnormalClose(\"JOIN\",`Error opening websocket connection - websocket closed unexpectedly with code=${n.code}`)))},this.socket.addEventListener(\"error\",s);let o=()=>{var n,d;r=!0,t(),this.setIsConnected(!0),this.id++,(n=this.socket)==null||n.removeEventListener(\"open\",o),(d=this.socket)==null||d.removeEventListener(\"error\",s),this.pingPongLoop(this.id)};this.socket.addEventListener(\"open\",o),this.socket.addEventListener(\"close\",this.onCloseHandler),this.socket.addEventListener(\"message\",this.onMessageHandler)})}close(){return c(this,null,function*(){window.removeEventListener(\"offline\",this.offlineListener),window.removeEventListener(\"online\",this.onlineListener),this.socket?(this.socket.close(1e3,\"Normal Close\"),this.setIsConnected(!1,\"code: 1000, normal websocket close\"),this.socket.removeEventListener(\"close\",this.onCloseHandler),this.socket.removeEventListener(\"message\",this.onMessageHandler)):this.setIsConnected(!1,\"websocket not connected yet\")})}join(e,t,i,r,s,o,n){return c(this,null,function*(){if(!this.isConnected)throw S.WebSocketConnectionErrors.WebSocketConnectionLost(\"JOIN\",\"Failed to send join over WS connection\");let d={name:e,disableVidAutoSub:i,data:t,offer:n,server_sub_degrade:r,simulcast:s,onDemandTracks:o},u=yield this.internalCall(\"join\",d);return this.isJoinCompleted=!0,this.pendingTrickle.forEach(({target:p,candidate:h})=>this.trickle(p,h)),this.pendingTrickle.length=0,l.d(this.TAG,`join: response=${JSON.stringify(u,null,1)}`),u})}trickle(e,t){this.isJoinCompleted?this.notify(\"trickle\",{target:e,candidate:t,sfu_node_id:this.sfuNodeId}):this.pendingTrickle.push({target:e,candidate:t})}offer(e,t){return c(this,null,function*(){return yield this.call(\"offer\",{desc:e,tracks:Object.fromEntries(t),sfu_node_id:this.sfuNodeId})})}answer(e){this.notify(\"answer\",{desc:e,sfu_node_id:this.sfuNodeId})}trackUpdate(e){this.notify(\"track-update\",{tracks:Object.fromEntries(e)})}broadcast(e){return c(this,null,function*(){return yield this.call(\"broadcast\",e)})}leave(e){this.notify(\"leave\",{client_reason:e})}endRoom(e,t){return c(this,null,function*(){yield this.call(\"end-room\",{lock:e,reason:t})})}sendEvent(e){if(!this.isConnected)throw Error(`${this.TAG} not connected. Could not send event ${e}`);this.notify(\"analytics\",e.toSignalParams())}ping(e){let t=Date.now(),i=new Promise(s=>{setTimeout(()=>{s(Date.now()-t)},e+1)}),r=this.internalCall(\"ping\",{timestamp:t}).then(()=>Date.now()-t).catch(()=>Date.now()-t);return Promise.race([i,r])}requestRoleChange(e){return c(this,null,function*(){yield this.call(\"role-change-request\",e)})}requestBulkRoleChange(e){return c(this,null,function*(){yield this.call(\"role-change-request\",e)})}acceptRoleChangeRequest(e){return c(this,null,function*(){yield this.call(\"role-change\",e)})}requestTrackStateChange(e){return c(this,null,function*(){yield this.call(\"track-update-request\",e)})}requestMultiTrackStateChange(e){return c(this,null,function*(){yield this.call(\"change-track-mute-state-request\",e)})}removePeer(e){return c(this,null,function*(){yield this.call(\"peer-leave-request\",e)})}startRTMPOrRecording(e){return c(this,null,function*(){yield this.call(\"rtmp-start\",m({},e))})}stopRTMPAndRecording(){return c(this,null,function*(){yield this.call(\"rtmp-stop\",{})})}startHLSStreaming(e){return c(this,null,function*(){yield this.call(\"hls-start\",m({},e))})}stopHLSStreaming(e){return c(this,null,function*(){yield this.call(\"hls-stop\",m({},e))})}startTranscription(e){return c(this,null,function*(){yield this.call(\"transcription-start\",m({},e))})}stopTranscription(e){return c(this,null,function*(){yield this.call(\"transcription-stop\",m({},e))})}sendHLSTimedMetadata(e){return c(this,null,function*(){yield this.call(\"hls-timed-metadata\",m({},e))})}updatePeer(e){return c(this,null,function*(){yield this.call(\"peer-update\",m({},e))})}getPeer(e){return c(this,null,function*(){return yield this.call(\"get-peer\",m({},e))})}joinGroup(e){return c(this,null,function*(){return yield this.call(\"group-join\",{name:e})})}leaveGroup(e){return c(this,null,function*(){return yield this.call(\"group-leave\",{name:e})})}addToGroup(e,t){return c(this,null,function*(){yield this.call(\"group-add\",{name:t,peer_id:e})})}removeFromGroup(e,t){return c(this,null,function*(){yield this.call(\"group-remove\",{name:t,peer_id:e})})}peerIterNext(e){return c(this,null,function*(){return yield this.call(\"peer-iter-next\",e)})}findPeers(e){return c(this,null,function*(){return yield this.call(\"find-peer\",e)})}findPeerByName(e){return c(this,null,function*(){return yield this.call(\"peer-name-search\",e)})}setSessionMetadata(e){if(!this.isConnected)throw S.WebSocketConnectionErrors.WebSocketConnectionLost(\"RECONNECT_SIGNAL\",\"Failed to set session store value due to network disconnection\");return this.call(\"set-metadata\",m({},e))}listenMetadataChange(e){if(!this.isConnected)throw S.WebSocketConnectionErrors.WebSocketConnectionLost(\"RECONNECT_SIGNAL\",\"Failed to observe session store key due to network disconnection\");return this.call(\"listen-metadata-change\",{keys:e})}getSessionMetadata(e){if(!this.isConnected)throw S.WebSocketConnectionErrors.WebSocketConnectionLost(\"RECONNECT_SIGNAL\",\"Failed to set session store value due to network disconnection\");return this.call(\"get-metadata\",{key:e})}setPollInfo(e){return this.call(\"poll-info-set\",m({},e))}getPollInfo(e){return this.call(\"poll-info-get\",m({},e))}setPollQuestions(e){return this.call(\"poll-questions-set\",m({},e))}startPoll(e){return this.call(\"poll-start\",m({},e))}stopPoll(e){return this.call(\"poll-stop\",m({},e))}getPollQuestions(e){return this.call(\"poll-questions-get\",m({},e))}setPollResponses(e){return this.call(\"poll-response\",m({},e))}getPollResponses(e){return this.call(\"poll-responses\",m({},e))}getPollsList(e){return this.call(\"poll-list\",m({},e))}getPollResult(e){return this.call(\"poll-result\",m({},e))}createWhiteboard(e){return this.validateConnection(),this.call(\"whiteboard-create\",m({},e))}getWhiteboard(e){return this.validateConnection(),this.call(\"whiteboard-get\",m({},e))}fetchPollLeaderboard(e){return this.call(\"poll-leaderboard\",m({},e))}validateConnection(){if(!this.isConnected)throw S.WebSocketConnectionErrors.WebSocketConnectionLost(\"RECONNECT_SIGNAL\",\"Failed to send message due to network disconnection\")}onMessageHandler(e){let t=e.data,i=JSON.parse(t);if(this.resolvePingOnAnyResponse(),i.id)this.handleResponseWithId(i);else if(i.method)this.handleResponseWithMethod(i);else throw Error(`WebSocket message has no 'method' or 'id' field, message=${i}`)}handleResponseWithId(e){let t=e,i=t.id;if(this.callbacks.has(i)){let r=this.callbacks.get(i);this.callbacks.delete(i),t.result?r.resolve(t.result):r.reject(t.error)}else this.observer.onNotification(t)}handleResponseWithMethod(e){switch(e.method){case\"offer\":this.observer.onOffer(e.params);break;case\"trickle\":this.observer.onTrickle(e.params);break;case\"on-error\":this.observer.onServerError(S.WebsocketMethodErrors.ServerErrors(Number(e.params.code),\"on-error\",e.params.message));break;case\"on-warning\":l.w(this.TAG,e.params);break;default:this.observer.onNotification(e);break}}rejectPendingCalls(e=\"\"){this.callbacks.forEach((t,i)=>{var r,s,o,n;((r=t.metadata)==null?void 0:r.method)!==\"ping\"&&(l.e(this.TAG,`rejecting pending callback ${(s=t.metadata)==null?void 0:s.method}, id=${i}`),t.reject(S.WebSocketConnectionErrors.WebSocketConnectionLost((o=t.metadata)!=null&&o.method?br((n=t.metadata)==null?void 0:n.method):\"RECONNECT_SIGNAL\",e)),this.callbacks.delete(i))})}pingPongLoop(e){return c(this,null,function*(){var i,r;let t=((i=window.HMS)==null?void 0:i.PING_TIMEOUT)||12e3;if(this.isConnected){let s=yield this.ping(t);this.pongResponseTimes.enqueue(s),s>t?(l.d(this.TAG,`Pong timeout ${e}, pageHidden=${Rs()}`),this.id===e&&this.setIsConnected(!1,\"ping pong failure\")):setTimeout(()=>this.pingPongLoop(e),((r=window.HMS)==null?void 0:r.PING_INTERVAL)||3e3)}})}call(e,t){return c(this,null,function*(){let r=S.WebsocketMethodErrors.ServerErrors(500,e,`Default ${e} error`),s;for(s=1;s<=3;s++)try{return this.validateConnection(),l.d(this.TAG,`Try number ${s} sending ${e}`,t),yield this.internalCall(e,t)}catch(o){if(r=o,l.e(this.TAG,`Failed sending ${e} try: ${s}`,{method:e,params:t,error:r}),!(parseInt(`${r.code/100}`)===5||r.code===429||r.code===1003))break;let d=(2+Math.random()*2)*1e3;yield Oe(d)}throw l.e(`Sending ${e} over WS failed after ${Math.min(s,3)} retries`,{method:e,params:t,error:r}),r})}};var to=()=>{if(!U||typeof navigator.connection==\"undefined\")return;let a=navigator.connection;return{downlink:a.downlink,downlinkMax:a.downlinkMax,effectiveType:a.effectiveType,rtt:a.rtt,saveData:a.saveData,type:a.type}};var I=\"[HMSTransport]:\",ri=class{constructor(e,t,i,r,s,o,n){this.observer=e;this.deviceManager=t;this.store=i;this.eventBus=r;this.analyticsEventsService=s;this.analyticsTimer=o;this.pluginUsageTracker=n;this.state=\"Disconnected\";this.trackStates=new Map;this.publishConnection=null;this.subscribeConnection=null;this.maxSubscribeBitrate=0;this.joinRetryCount=0;this.publishDisconnectTimer=0;this.onScreenshareStop=()=>{};this.screenStream=new Set;this.callbacks=new Map;this.setListener=e=>{this.listener=e};this.setOnScreenshareStop=e=>{this.onScreenshareStop=e};this.signalObserver={onOffer:e=>c(this,null,function*(){try{if(!this.subscribeConnection)return;if(e.sfu_node_id&&this.subscribeConnection.sfuNodeId&&this.subscribeConnection.sfuNodeId!==e.sfu_node_id){l.d(I,\"ignoring old offer\");return}yield this.subscribeConnection.setRemoteDescription(e),l.d(I,`[SUBSCRIBE] Adding ${this.subscribeConnection.candidates.length} ice-candidates`,this.subscribeConnection.candidates);for(let i of this.subscribeConnection.candidates)yield this.subscribeConnection.addIceCandidate(i);this.subscribeConnection.candidates.length=0;let t=yield this.subscribeConnection.createAnswer();yield this.subscribeConnection.setLocalDescription(t),this.signal.answer(t),l.d(I,\"[role=SUBSCRIBE] onOffer renegotiation DONE \\u2705\")}catch(t){l.d(I,\"[role=SUBSCRIBE] onOffer renegotiation FAILED \\u274C\",t),this.state=\"Failed\";let i;t instanceof k?i=t:i=S.GenericErrors.Unknown(\"SUBSCRIBE\",t.message),this.observer.onFailure(i),this.eventBus.analytics.publish(y.subscribeFail(i))}}),onTrickle:e=>c(this,null,function*(){let t=e.target===0?this.publishConnection:this.subscribeConnection;t!=null&&t.remoteDescription?yield t.addIceCandidate(e.candidate):t==null||t.candidates.push(e.candidate)}),onNotification:e=>this.observer.onNotification(e),onServerError:e=>c(this,null,function*(){yield this.observer.onStateChange(\"Failed\",e)}),onFailure:e=>{this.joinParameters&&this.retryScheduler.schedule({category:1,error:e,task:this.retrySignalDisconnectTask,originalState:this.state})},onOffline:e=>c(this,null,function*(){l.d(I,\"socket offline\",lr[this.state]);try{this.state!==\"Leaving\"&&this.joinParameters&&this.retryScheduler.schedule({category:1,error:S.WebSocketConnectionErrors.WebSocketConnectionLost(\"RECONNECT_SIGNAL\",e),task:this.retrySignalDisconnectTask,originalState:this.state})}catch(t){console.error(t)}}),onOnline:()=>{var e;l.d(I,\"socket online\",lr[this.state]),this.analyticsSignalTransport.flushFailedEvents((e=this.store.getLocalPeer())==null?void 0:e.peerId)},onNetworkOnline:()=>{this.analyticsEventsService.flushFailedClientEvents()}};this.signal=new ii(this.signalObserver);this.analyticsSignalTransport=new Sr(this.signal);this.publishDtlsStateTimer=0;this.lastPublishDtlsState=\"new\";this.handleLocalRoleUpdate=i=>c(this,[i],function*({oldRole:e,newRole:t}){!this.doesRoleNeedWebRTC(e)&&this.doesRoleNeedWebRTC(t)&&(l.d(I,\"Local peer role updated to webrtc role, creating PeerConnections and performing inital publish negotiation \\u23F3\"),this.createPeerConnections(),yield this.negotiateOnFirstPublish())});this.retryPublishIceFailedTask=()=>c(this,null,function*(){if(this.publishConnection){let e=new Promise((t,i)=>{this.callbacks.set(rt,{promise:{resolve:t,reject:i},action:\"RESTART_ICE\",extra:{}})});yield this.performPublishRenegotiation({iceRestart:this.publishConnection.connectionState!==\"connected\"}),yield e}return!0});this.retrySubscribeIceFailedTask=()=>c(this,null,function*(){if(this.subscribeConnection&&this.subscribeConnection.connectionState!==\"connected\"){let e=new Promise((i,r)=>{this.callbacks.set(st,{promise:{resolve:i,reject:r},action:\"RESTART_ICE\",extra:{}})}),t=new Promise(i=>{setTimeout(i,6e4,!1)});return Promise.race([e,t])}return!0});this.retrySignalDisconnectTask=()=>c(this,null,function*(){var t;l.d(I,\"retrySignalDisconnectTask\",{signalConnected:this.signal.isConnected}),this.signal.isConnected||(yield this.internalConnect(this.joinParameters.authToken,this.joinParameters.endpoint,this.joinParameters.peerId,this.joinParameters.iceServers));let e=(t=this.store.getRoom())!=null&&t.joinedAt?this.signal.isConnected&&(yield this.retryPublishIceFailedTask()):this.signal.isConnected;return this.signal.trackUpdate(this.trackStates),e});this.webrtcInternals=new yi(this.store,this.eventBus);let d=(u,p)=>c(this,null,function*(){u!==this.state&&(this.state=u,yield this.observer.onStateChange(this.state,p))});this.retryScheduler=new pr(d,this.sendErrorAnalyticsEvent.bind(this)),this.eventBus.statsUpdate.subscribe(u=>{var h,T;let p=((T=(h=u.getLocalPeerStats())==null?void 0:h.subscribe)==null?void 0:T.bitrate)||0;this.maxSubscribeBitrate=Math.max(this.maxSubscribeBitrate,p)}),this.eventBus.localAudioEnabled.subscribe(({track:u,enabled:p})=>this.trackUpdate(u,p)),this.eventBus.localVideoEnabled.subscribe(({track:u,enabled:p})=>this.trackUpdate(u,p))}getWebsocketEndpoint(){if(this.initConfig)return this.initConfig.endpoint}getWebrtcInternals(){return this.webrtcInternals}isFlagEnabled(e){var r;let t=(r=this.initConfig)==null?void 0:r.config;return((t==null?void 0:t.enabledFlags)||[]).includes(e)}setConnectivityListener(e){this.connectivityListener=e}preview(e,t,i,r,s=!1,o){return c(this,null,function*(){let n=yield this.connect(e,t,i,r,s,o);return this.state=\"Preview\",this.observer.onStateChange(this.state),n})}join(e,t,i,r,s=!1,o){return c(this,null,function*(){l.d(I,\"join: started \\u23F0\");try{(!this.signal.isConnected||!this.initConfig)&&(yield this.connect(e,r,t,i,s,o)),this.validateNotDisconnected(\"connect\"),this.initConfig&&(yield this.waitForLocalRoleAvailability(),yield this.createConnectionsAndNegotiateJoin(i,s),this.initStatsAnalytics(),l.d(I,\"\\u2705 join: Negotiated over PUBLISH connection\"))}catch(n){l.e(I,`join: failed \\u274C [token=${e}]`,n),this.state=\"Failed\";let d=n;throw d.isTerminal=d.isTerminal||d.code===500,yield this.observer.onStateChange(this.state,d),d}l.d(I,\"\\u2705 join: successful\"),this.state=\"Joined\",this.observer.onStateChange(this.state)})}connect(e,t,i,r,s=!1,o){return c(this,null,function*(){this.setTransportStateForConnect(),this.joinParameters=new dr(e,i,r.name,r.metaData,t,s,o);try{return yield this.internalConnect(e,t,i,o)}catch(n){if(n instanceof k&&([P.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,P.WebSocketConnectionErrors.FAILED_TO_CONNECT,P.WebSocketConnectionErrors.ABNORMAL_CLOSE,P.APIErrors.ENDPOINT_UNREACHABLE].includes(n.code)||n.code.toString().startsWith(\"5\")||n.code.toString().startsWith(\"429\"))){let u=()=>c(this,null,function*(){return yield this.internalConnect(e,t,i,o),!!(this.initConfig&&this.initConfig.endpoint)});yield this.retryScheduler.schedule({category:0,error:n,task:u,originalState:this.state,changeState:!1})}else throw n}})}leave(i){return c(this,arguments,function*(e,t=\"user request\"){var r,s,o;this.retryScheduler.reset(),this.joinParameters=void 0,l.d(I,\"leaving in transport\");try{let n=this.pluginUsageTracker.getPluginUsage(\"HMSKrispPlugin\");if(n&&this.eventBus.analytics.publish(y.getKrispUsage(n)),this.state=\"Leaving\",(r=this.publishStatsAnalytics)==null||r.stop(),(s=this.subscribeStatsAnalytics)==null||s.stop(),(o=this.webrtcInternals)==null||o.cleanup(),this.clearPeerConnections(),e)try{this.signal.leave(t),l.d(I,\"signal leave done\")}catch(d){l.w(I,\"failed to send leave on websocket to server\",d)}this.analyticsEventsService.flushFailedClientEvents(),this.analyticsEventsService.reset(),yield this.signal.close()}catch(n){this.eventBus.analytics.publish(y.disconnect(n)),l.e(I,\"leave: FAILED \\u274C\",n)}finally{this.state=\"Disconnected\",this.observer.onStateChange(this.state)}})}publish(e){return c(this,null,function*(){var t;for(let i of e)try{yield this.publishTrack(i),(t=this.connectivityListener)==null||t.onMediaPublished(i)}catch(r){this.eventBus.analytics.publish(y.publish({devices:this.deviceManager.getDevices(),error:r}))}})}unpublish(e){return c(this,null,function*(){for(let t of e)yield this.unpublishTrack(t)})}setSFUNodeId(e){var t,i;this.signal.setSfuNodeId(e),this.sfuNodeId?e&&this.sfuNodeId!==e&&(this.sfuNodeId=e,this.handleSFUMigration()):(this.sfuNodeId=e,(t=this.publishConnection)==null||t.setSfuNodeId(e),(i=this.subscribeConnection)==null||i.setSfuNodeId(e))}handleSFUMigration(){return c(this,null,function*(){var s,o;l.time(\"sfu migration\"),this.clearPeerConnections();let e=this.store.getPeerMap();this.store.removeRemoteTracks();for(let n in e){let d=e[n];d.isLocal||(d.audioTrack=void 0,d.videoTrack=void 0,d.auxiliaryTracks=[])}let t=this.store.getLocalPeer();if(!t)return;this.createPeerConnections(),this.trackStates.clear(),yield this.negotiateOnFirstPublish();let i=new Map;if(t.audioTrack){let n=t.audioTrack.stream;i.get(n.id)||i.set(n.id,new Se(new MediaStream));let d=t.audioTrack.clone(i.get(n.id));this.store.removeTrack(t.audioTrack),t.audioTrack.cleanup(),yield this.publishTrack(d),t.audioTrack=d}if(t.videoTrack){let n=t.videoTrack.stream;i.get(n.id)||i.set(n.id,new Se(new MediaStream)),this.store.removeTrack(t.videoTrack);let d=t.videoTrack.clone(i.get(n.id));t.videoTrack.cleanup(),yield this.publishTrack(d),t.videoTrack=d}let r=[];for(;t.auxiliaryTracks.length>0;){let n=t.auxiliaryTracks.shift();if(n){let d=n.stream;i.get(d.id)||i.set(d.id,new Se(n.source===\"screen\"?d.nativeStream.clone():new MediaStream)),this.store.removeTrack(n);let u=n.clone(i.get(d.id));u.type===\"video\"&&u.source===\"screen\"&&(this.screenStream.add(d.nativeStream),this.screenStream.add(u.stream.nativeStream),u.nativeTrack.addEventListener(\"ended\",this.onScreenshareStop)),n.cleanup(),yield this.publishTrack(u),r.push(u)}}t.auxiliaryTracks=r,i.clear(),(o=(s=this.listener)==null?void 0:s.onSFUMigration)==null||o.call(s),l.timeEnd(\"sfu migration\")})}trackUpdate(e,t){var s;let r=Array.from(this.trackStates.values()).find(o=>e.type===o.type&&e.source===o.source);if(r){let o=new Vt(M(m({},r),{mute:!t}));this.trackStates.set(r.track_id,o),l.d(I,\"Track Update\",this.trackStates,e),this.signal.trackUpdate(new Map([[r.track_id,o]]));let n=this.store.getLocalPeer();n&&t===e.enabled&&((s=this.listener)==null||s.onTrackUpdate(t?3:2,e,n))}}publishTrack(e){return c(this,null,function*(){e.publishedTrackId=e.getTrackIDBeingSent(),l.d(I,`\\u23F3 publishTrack: trackId=${e.trackId}, toPublishTrackId=${e.publishedTrackId}`,`${e}`),this.trackStates.set(e.publishedTrackId,new Vt(e));let t=new Promise((s,o)=>{this.callbacks.set(rt,{promise:{resolve:s,reject:o},action:\"PUBLISH\",extra:{}})}),i=e.stream;i.setConnection(this.publishConnection);let r=this.store.getSimulcastLayers(e.source);i.addTransceiver(e,r),l.time(`publish-${e.trackId}-${e.type}`),yield t,l.timeEnd(`publish-${e.trackId}-${e.type}`),this.store.addTrack(e),yield i.setMaxBitrateAndFramerate(e).then(()=>{l.d(I,`Setting maxBitrate=${e.settings.maxBitrate} kpbs${e instanceof G?` and maxFramerate=${e.settings.maxFramerate}`:\"\"} for ${e.source} ${e.type} ${e.trackId}`)}).catch(s=>l.w(I,\"Failed setting maxBitrate and maxFramerate\",s)),e.isPublished=!0,l.d(I,`\\u2705 publishTrack: trackId=${e.trackId}`,`${e}`,this.callbacks)})}unpublishTrack(e){return c(this,null,function*(){if(l.d(I,`\\u23F3 unpublishTrack: trackId=${e.trackId}`,`${e}`),e.publishedTrackId&&this.trackStates.has(e.publishedTrackId))this.trackStates.delete(e.publishedTrackId);else{let s=Array.from(this.trackStates.values()).find(o=>e.type===o.type&&e.source===o.source);s&&this.trackStates.delete(s.track_id)}let t=new Promise((r,s)=>{this.callbacks.set(rt,{promise:{resolve:r,reject:s},action:\"UNPUBLISH\",extra:{}})});e.stream.removeSender(e),yield t,yield e.cleanup(),e.source===\"screen\"&&this.screenStream&&this.screenStream.forEach(r=>{r.getTracks().forEach(s=>{s.stop()}),this.screenStream.delete(r)}),this.store.removeTrack(e),l.d(I,`\\u2705 unpublishTrack: trackId=${e.trackId}`,this.callbacks)})}clearPeerConnections(){return c(this,null,function*(){var e,t;clearTimeout(this.publishDtlsStateTimer),this.publishDtlsStateTimer=0,clearTimeout(this.publishDisconnectTimer),this.publishDisconnectTimer=0,this.lastPublishDtlsState=\"new\",(e=this.publishConnection)==null||e.close(),(t=this.subscribeConnection)==null||t.close(),this.publishConnection=null,this.subscribeConnection=null})}waitForLocalRoleAvailability(){if(!this.store.hasRoleDetailsArrived())return new Promise(e=>{this.eventBus.policyChange.subscribeOnce(()=>e())})}createConnectionsAndNegotiateJoin(e,t=!1){return c(this,null,function*(){let i=this.doesLocalPeerNeedWebRTC();i&&this.createPeerConnections(),this.analyticsTimer.start(\"join_response_time\"),yield this.negotiateJoinWithRetry({name:e.name,data:e.metaData,autoSubscribeVideo:t,isWebRTC:i}),this.analyticsTimer.end(\"join_response_time\")})}createPeerConnections(){var t,i,r;let e=(s,o,n=!1)=>{([\"disconnected\",\"failed\"].includes(o)?l.w.bind(l):l.d.bind(l))(I,`${ht[s]} ${n?\"ice\":\"\"} connection state change: ${o}`)};if(this.initConfig){let s={onRenegotiationNeeded:()=>c(this,null,function*(){yield this.performPublishRenegotiation()}),onDTLSTransportStateChange:n=>{var p,h,T;if((n===\"failed\"?l.w.bind(l):l.d.bind(l))(I,`Publisher on dtls transport state change: ${n}`),!n||this.lastPublishDtlsState===n||(this.lastPublishDtlsState=n,this.publishDtlsStateTimer!==0&&(clearTimeout(this.publishDtlsStateTimer),this.publishDtlsStateTimer=0),n!==\"connecting\"&&n!==\"failed\"))return;let u=(T=(h=(p=this.initConfig)==null?void 0:p.config)==null?void 0:h.dtlsStateTimeouts)==null?void 0:T[n];!u||u<=0||(this.publishDtlsStateTimer=window.setTimeout(()=>{var f;let g=(f=this.publishConnection)==null?void 0:f.nativeConnection.connectionState;if(g&&n&&g===n){let E=S.WebrtcErrors.ICEFailure(\"PUBLISH\",`DTLS transport state ${n} timeout:${u}ms`,!0);this.eventBus.analytics.publish(y.disconnect(E)),this.observer.onFailure(E)}},u))},onDTLSTransportError:n=>{l.e(I,`onDTLSTransportError ${n.name} ${n.message}`,n),this.eventBus.analytics.publish(y.disconnect(n))},onIceConnectionChange:n=>c(this,null,function*(){e(0,n,!0)}),onConnectionStateChange:n=>c(this,null,function*(){var d,u,p,h,T,g,f,E;e(0,n,!1),n!==\"new\"&&(n===\"connected\"?((d=this.connectivityListener)==null||d.onICESuccess(!0),(u=this.publishConnection)==null||u.handleSelectedIceCandidatePairs()):n===\"failed\"?yield this.handleIceConnectionFailure(0,S.WebrtcErrors.ICEFailure(\"PUBLISH\",`local candidate - ${(T=(h=(p=this.publishConnection)==null?void 0:p.selectedCandidatePair)==null?void 0:h.local)==null?void 0:T.candidate}; remote candidate - ${(E=(f=(g=this.publishConnection)==null?void 0:g.selectedCandidatePair)==null?void 0:f.remote)==null?void 0:E.candidate}`)):this.publishDisconnectTimer=window.setTimeout(()=>{var v,R,$,ue,ge,pe,St;((v=this.publishConnection)==null?void 0:v.connectionState)!==\"connected\"&&this.handleIceConnectionFailure(0,S.WebrtcErrors.ICEDisconnected(\"PUBLISH\",`local candidate - ${(ue=($=(R=this.publishConnection)==null?void 0:R.selectedCandidatePair)==null?void 0:$.local)==null?void 0:ue.candidate}; remote candidate - ${(St=(pe=(ge=this.publishConnection)==null?void 0:ge.selectedCandidatePair)==null?void 0:pe.remote)==null?void 0:St.candidate}`))},5e3))}),onIceCandidate:n=>{var d;(d=this.connectivityListener)==null||d.onICECandidate(n,!0)},onSelectedCandidatePairChange:n=>{var d;(d=this.connectivityListener)==null||d.onSelectedICECandidatePairChange(n,!0)}},o={onApiChannelMessage:n=>{this.observer.onNotification(JSON.parse(n))},onTrackAdd:n=>{l.d(I,\"[Subscribe] onTrackAdd\",`${n}`),this.observer.onTrackAdd(n)},onTrackRemove:n=>{l.d(I,\"[Subscribe] onTrackRemove\",`${n}`),this.observer.onTrackRemove(n)},onIceConnectionChange:n=>c(this,null,function*(){var d;if(e(1,n,!0),n===\"connected\"){let u=this.callbacks.get(st);this.callbacks.delete(st),(d=this.connectivityListener)==null||d.onICESuccess(!1),u&&u.promise.resolve(!0)}}),onConnectionStateChange:n=>c(this,null,function*(){var d,u,p,h,T,g,f;if(e(1,n,!1),n===\"failed\")yield this.handleIceConnectionFailure(1,S.WebrtcErrors.ICEFailure(\"SUBSCRIBE\",`local candidate - ${(p=(u=(d=this.subscribeConnection)==null?void 0:d.selectedCandidatePair)==null?void 0:u.local)==null?void 0:p.candidate}; remote candidate - ${(g=(T=(h=this.subscribeConnection)==null?void 0:h.selectedCandidatePair)==null?void 0:T.remote)==null?void 0:g.candidate}`));else if(n===\"disconnected\")setTimeout(()=>{var E,v,R,$,ue,ge,pe;((E=this.subscribeConnection)==null?void 0:E.connectionState)===\"disconnected\"&&this.handleIceConnectionFailure(1,S.WebrtcErrors.ICEDisconnected(\"SUBSCRIBE\",`local candidate - ${($=(R=(v=this.subscribeConnection)==null?void 0:v.selectedCandidatePair)==null?void 0:R.local)==null?void 0:$.candidate}; remote candidate - ${(pe=(ge=(ue=this.subscribeConnection)==null?void 0:ue.selectedCandidatePair)==null?void 0:ge.remote)==null?void 0:pe.candidate}`))},5e3);else if(n===\"connected\"){(f=this.subscribeConnection)==null||f.handleSelectedIceCandidatePairs();let E=this.callbacks.get(st);this.callbacks.delete(st),E&&E.promise.resolve(!0)}}),onIceCandidate:n=>{var d;(d=this.connectivityListener)==null||d.onICECandidate(n,!1)},onSelectedCandidatePairChange:n=>{var d;(d=this.connectivityListener)==null||d.onSelectedICECandidatePairChange(n,!1)}};this.publishConnection||(this.publishConnection=new Xt(this.signal,this.initConfig.rtcConfiguration,s)),this.subscribeConnection||(this.subscribeConnection=new ei(this.signal,this.initConfig.rtcConfiguration,this.isFlagEnabled.bind(this),o))}(r=this.webrtcInternals)==null||r.setPeerConnections({publish:(t=this.publishConnection)==null?void 0:t.nativeConnection,subscribe:(i=this.subscribeConnection)==null?void 0:i.nativeConnection})}negotiateJoinWithRetry(s){return c(this,arguments,function*({name:e,data:t,autoSubscribeVideo:i,isWebRTC:r=!0}){try{yield this.negotiateJoin({name:e,data:t,autoSubscribeVideo:i,isWebRTC:r})}catch(o){l.e(I,\"Join negotiation failed \\u274C\",o);let n=o instanceof k?o:S.WebsocketMethodErrors.ServerErrors(500,\"JOIN\",`Websocket join error - ${o.message}`),d=parseInt(`${n.code/100}`)===5||[P.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,429].includes(n.code);if(n.code===410&&(n.isTerminal=!0),d){this.joinRetryCount=0,n.isTerminal=!1;let u=()=>c(this,null,function*(){return this.joinRetryCount++,yield this.negotiateJoin({name:e,data:t,autoSubscribeVideo:i,isWebRTC:r})});yield this.retryScheduler.schedule({category:2,error:n,task:u,originalState:\"Joined\",changeState:!1})}else throw o}})}negotiateJoin(s){return c(this,arguments,function*({name:e,data:t,autoSubscribeVideo:i,isWebRTC:r=!0}){return r?yield this.negotiateJoinWebRTC({name:e,data:t,autoSubscribeVideo:i}):yield this.negotiateJoinNonWebRTC({name:e,data:t,autoSubscribeVideo:i})})}negotiateJoinWebRTC(r){return c(this,arguments,function*({name:e,data:t,autoSubscribeVideo:i}){if(l.d(I,\"\\u23F3 join: Negotiating over PUBLISH connection\"),!this.publishConnection)return l.e(I,\"Publish peer connection not found, cannot negotiate\"),!1;let s=yield this.publishConnection.createOffer();yield this.publishConnection.setLocalDescription(s);let o=this.isFlagEnabled(\"subscribeDegradation\"),n=this.isFlagEnabled(\"simulcast\"),d=this.isFlagEnabled(\"onDemandTracks\"),u=yield this.signal.join(e,t,!i,o,n,d,s);this.setSFUNodeId(u==null?void 0:u.sfu_node_id),yield this.publishConnection.setRemoteDescription(u);for(let p of this.publishConnection.candidates)yield this.publishConnection.addIceCandidate(p);return this.publishConnection.initAfterJoin(),!!u})}negotiateJoinNonWebRTC(r){return c(this,arguments,function*({name:e,data:t,autoSubscribeVideo:i}){l.d(I,\"\\u23F3 join: Negotiating Non-WebRTC\");let s=this.isFlagEnabled(\"subscribeDegradation\"),o=this.isFlagEnabled(\"simulcast\"),n=this.isFlagEnabled(\"onDemandTracks\"),d=yield this.signal.join(e,t,!i,s,o,n);return this.setSFUNodeId(d==null?void 0:d.sfu_node_id),!!d})}negotiateOnFirstPublish(){return c(this,null,function*(){if(l.d(I,\"\\u23F3 Negotiating offer over PUBLISH connection\"),!this.publishConnection)return l.e(I,\"Publish peer connection not found, cannot negotiate\"),!1;try{let e=yield this.publishConnection.createOffer(this.trackStates);yield this.publishConnection.setLocalDescription(e);let t=yield this.signal.offer(e,this.trackStates);yield this.publishConnection.setRemoteDescription(t);for(let i of this.publishConnection.candidates)yield this.publishConnection.addIceCandidate(i);return this.publishConnection.initAfterJoin(),!!t}catch(e){if(e instanceof k&&e.code===421)return!0;throw e}})}performPublishRenegotiation(e){return c(this,null,function*(){l.d(I,\"\\u23F3 [role=PUBLISH] onRenegotiationNeeded START\",this.trackStates);let t=this.callbacks.get(rt);if(!t){l.w(I,\"no callback found for renegotiation\");return}if(!this.publishConnection){l.e(I,\"Publish peer connection not found, cannot renegotiate\");return}try{let i=yield this.publishConnection.createOffer(this.trackStates,e);yield this.publishConnection.setLocalDescription(i),l.time(\"renegotiation-offer-exchange\");let r=yield this.signal.offer(i,this.trackStates);this.callbacks.delete(rt),l.timeEnd(\"renegotiation-offer-exchange\"),yield this.publishConnection.setRemoteDescription(r),t.promise.resolve(!0),l.d(I,\"[role=PUBLISH] onRenegotiationNeeded DONE \\u2705\")}catch(i){let r;i instanceof k?r=i:r=S.GenericErrors.Unknown(\"PUBLISH\",i.message),r.code===421?t.promise.resolve(!0):t.promise.reject(r),l.d(I,\"[role=PUBLISH] onRenegotiationNeeded FAILED \\u274C\")}})}handleIceConnectionFailure(e,t){return c(this,null,function*(){this.retryScheduler.isTaskInProgress( false?0:4)||(e===0?this.retryScheduler.schedule({category:3,error:t,task:this.retryPublishIceFailedTask,originalState:\"Joined\"}):this.retryScheduler.schedule({category:4,error:t,task:this.retrySubscribeIceFailedTask,originalState:\"Joined\"}))})}internalConnect(e,t,i,r){return c(this,null,function*(){var o,n,d;l.d(I,\"connect: started \\u23F0\");let s=new Date;try{this.analyticsTimer.start(\"init_response_time\"),this.initConfig=yield ti.fetchInitConfig({token:e,peerId:i,userAgent:this.store.getUserAgent(),initEndpoint:t,iceServers:r}),(o=this.connectivityListener)==null||o.onInitSuccess(this.initConfig.endpoint);let u=this.store.getRoom();return u&&(u.effectsKey=(n=this.initConfig.config.vb)==null?void 0:n.effectsKey,u.isEffectsEnabled=this.isFlagEnabled(\"effectsSDKEnabled\"),u.disableNoneLayerRequest=this.isFlagEnabled(\"disableNoneLayerRequest\"),u.isVBEnabled=this.isFlagEnabled(\"vb\"),u.isHipaaEnabled=this.isFlagEnabled(\"hipaa\"),u.isNoiseCancellationEnabled=this.isFlagEnabled(\"noiseCancellation\")),this.analyticsTimer.end(\"init_response_time\"),He.setWebsocketEndpoint(this.initConfig.endpoint),this.validateNotDisconnected(\"post init\"),yield this.openSignal(e,i),this.observer.onConnected(),(d=this.connectivityListener)==null||d.onSignallingSuccess(),this.store.setSimulcastEnabled(this.isFlagEnabled(\"simulcast\")),l.d(I,\"Adding Analytics Transport: JsonRpcSignal\"),this.analyticsEventsService.setTransport(this.analyticsSignalTransport),this.analyticsEventsService.flush(),this.initConfig}catch(u){throw this.state!==\"Reconnecting\"&&this.eventBus.analytics.publish(y.connect(u,this.getAdditionalAnalyticsProperties(),s,new Date,t)),l.e(I,\"\\u274C internal connect: failed\",u),u}})}validateNotDisconnected(e){if(this.state===\"Disconnected\")throw l.w(I,\"aborting join as transport state is disconnected\"),S.GenericErrors.ValidationFailed(`leave called before join could complete - stage=${e}`)}openSignal(e,t){return c(this,null,function*(){if(!this.initConfig)throw S.APIErrors.InitConfigNotAvailable(\"INIT\",\"Init Config not found\");l.d(I,\"\\u23F3 internal connect: connecting to ws endpoint\",this.initConfig.endpoint);let i=new URL(this.initConfig.endpoint);i.searchParams.set(\"peer\",t),i.searchParams.set(\"token\",e),i.searchParams.set(\"user_agent_v2\",this.store.getUserAgent()),i.searchParams.set(\"protocol_version\",ia),i.searchParams.set(\"protocol_spec\",ra),this.endpoint=i.toString(),this.analyticsTimer.start(\"ws_connect_time\"),yield this.signal.open(this.endpoint),this.analyticsTimer.end(\"ws_connect_time\"),this.analyticsTimer.start(\"on_policy_change_time\"),this.analyticsTimer.start(\"room_state_time\"),l.d(I,\"\\u2705 internal connect: connected to ws endpoint\")})}initStatsAnalytics(){var e,t;this.isFlagEnabled(\"publishStats\")&&(this.publishStatsAnalytics=new Qt(this.store,this.eventBus,this.getValueFromInitConfig(\"publishStats\",\"maxSampleWindowSize\",30),this.getValueFromInitConfig(\"publishStats\",\"maxSamplePushInterval\",300)),(e=this.getWebrtcInternals())==null||e.start()),this.isFlagEnabled(\"subscribeStats\")&&(this.subscribeStatsAnalytics=new zt(this.store,this.eventBus,this.getValueFromInitConfig(\"subscribeStats\",\"maxSampleWindowSize\",10),this.getValueFromInitConfig(\"subscribeStats\",\"maxSamplePushInterval\",60)),(t=this.getWebrtcInternals())==null||t.start())}getValueFromInitConfig(e,t,i){var r,s;return((s=(r=this.initConfig)==null?void 0:r.config[e])==null?void 0:s[t])||i}doesRoleNeedWebRTC(e){var r,s;if(!this.isFlagEnabled(\"nonWebRTCDisableOffer\"))return!0;let t=!!(e.publishParams.allowed&&((r=e.publishParams.allowed)==null?void 0:r.length)>0),i=!!(e.subscribeParams.subscribeToRoles&&((s=e.subscribeParams.subscribeToRoles)==null?void 0:s.length)>0);return t||i}doesLocalPeerNeedWebRTC(){var t;let e=(t=this.store.getLocalPeer())==null?void 0:t.role;return e?this.doesRoleNeedWebRTC(e):!0}setTransportStateForConnect(){if(this.state===\"Failed\"&&(this.state=\"Disconnected\"),this.state!==\"Disconnected\"&&this.state!==\"Reconnecting\")throw S.WebsocketMethodErrors.AlreadyJoined(\"JOIN\",`Cannot join a meeting in ${this.state} state`);this.state===\"Disconnected\"&&(this.state=\"Connecting\",this.observer.onStateChange(this.state))}sendErrorAnalyticsEvent(e,t){let i=this.getAdditionalAnalyticsProperties(),r;switch(t){case 0:r=y.connect(e,i);break;case 1:r=y.disconnect(e,i);break;case 2:r=y.join({error:e,time:this.analyticsTimer.getTimeTaken(\"join_time\"),init_response_time:this.analyticsTimer.getTimeTaken(\"init_response_time\"),ws_connect_time:this.analyticsTimer.getTimeTaken(\"ws_connect_time\"),on_policy_change_time:this.analyticsTimer.getTimeTaken(\"on_policy_change_time\"),local_audio_track_time:this.analyticsTimer.getTimeTaken(\"local_audio_track_time\"),local_video_track_time:this.analyticsTimer.getTimeTaken(\"local_video_track_time\"),retries_join:this.joinRetryCount});break;case 3:r=y.publish({error:e});break;case 4:r=y.subscribeFail(e);break}this.eventBus.analytics.publish(r)}getSubscribeConnection(){return this.subscribeConnection}getAdditionalAnalyticsProperties(){var o,n,d,u,p,h,T,g;let e=to(),t=typeof document!=\"undefined\"&&document.hidden,i=this.store.getRemoteVideoTracks().filter(f=>f.degraded).length,r=(u=(d=(n=(o=this.getWebrtcInternals())==null?void 0:o.getCurrentStats())==null?void 0:n.getLocalPeerStats())==null?void 0:d.publish)==null?void 0:u.bitrate,s=(g=(T=(h=(p=this.getWebrtcInternals())==null?void 0:p.getCurrentStats())==null?void 0:h.getLocalPeerStats())==null?void 0:T.subscribe)==null?void 0:g.bitrate;return{network_info:e,document_hidden:t,num_degraded_tracks:i,bitrate:{publish:r,subscribe:s},max_sub_bitrate:this.maxSubscribeBitrate,recent_pong_response_times:this.signal.getPongResponseTimes(),transport_state:this.state}}};function Mr(a){if(!a||a.length===0)throw S.APIErrors.InvalidTokenFormat(\"INIT\",\"Token cannot be an empty string or undefined or null\");let e=a.split(\".\");if(e.length!==3)throw S.APIErrors.InvalidTokenFormat(\"INIT\",\"Expected 3 '.' separate fields - header, payload and signature respectively\");let t=atob(e[1]);try{let i=JSON.parse(t);return{roomId:i.room_id,userId:i.user_id,role:i.role}}catch(i){throw S.APIErrors.InvalidTokenFormat(\"INIT\",`couldn't parse to json - ${i.message}`)}}var ro={published:!1,isInitialised:!1,isReconnecting:!1,isPreviewInProgress:!1,isPreviewCalled:!1,isJoinInProgress:!1,deviceManagersInitialised:!1},yr=class{constructor(){this.TAG=\"[HMSSdk]:\";this.transportState=\"Disconnected\";this.analyticsTimer=new Ti;this.sdkState=m({},ro);this.isDiagnostics=!1;this.playlistSettings={video:{bitrate:$r},audio:{bitrate:Kr}};this.handleAutoplayError=e=>{var t,i;(i=(t=this.errorListener)==null?void 0:t.onError)==null||i.call(t,e)};this.observer={onNotification:e=>{var t;if(e.method===\"on-peer-leave-request\"){this.handlePeerLeaveRequest(e.params);return}switch(e.method){case\"on-policy-change\":this.analyticsTimer.end(\"on_policy_change_time\");break;case\"peer-list\":this.analyticsTimer.end(\"peer_list_time\"),this.sendJoinAnalyticsEvent(this.sdkState.isPreviewCalled);break;case\"room-state\":this.analyticsTimer.end(\"room_state_time\");break;default:}(t=this.notificationManager)==null||t.handleNotification(e,this.sdkState.isReconnecting)},onConnected:()=>{this.initNotificationManager()},onTrackAdd:e=>{var t;(t=this.notificationManager)==null||t.handleTrackAdd(e)},onTrackRemove:e=>{var t;(t=this.notificationManager)==null||t.handleTrackRemove(e)},onFailure:e=>{var t;(t=this.errorListener)==null||t.onError(e)},onStateChange:(e,t)=>c(this,null,function*(){var r,s;let i=o=>c(this,null,function*(){var n,d;yield this.internalLeave(!0,o),!this.sdkState.isPreviewInProgress&&!this.sdkState.isJoinInProgress&&((d=(n=this.errorListener)==null?void 0:n.onError)==null||d.call(n,o)),this.sdkState.isReconnecting=!1});switch(e){case\"Preview\":case\"Joined\":this.initNotificationManager(),this.transportState===\"Reconnecting\"&&((r=this.listener)==null||r.onReconnected());break;case\"Failed\":yield i(t);break;case\"Reconnecting\":this.sdkState.isReconnecting=!0,(s=this.listener)==null||s.onReconnecting(t);break}this.transportState=e,l.d(this.TAG,\"Transport State Change\",this.transportState)})};this.handlePeerLeaveRequest=e=>{var r;let t=e.requested_by?this.store.getPeerById(e.requested_by):void 0,i={roomEnded:e.room_end,reason:e.reason,requestedBy:t};(r=this.listener)==null||r.onRemovedFromRoom(i),this.internalLeave(!1)};this.handlePreviewError=e=>{var t;this.analyticsTimer.end(\"preview_time\"),e&&((t=this.errorListener)==null||t.onError(e)),this.sendPreviewAnalyticsEvent(e),this.sdkState.isPreviewInProgress=!1};this.handleDeviceChange=e=>{var i,r;if(e.isUserSelection)return;l.d(this.TAG,\"Device Change event\",e),(r=(i=this.deviceChangeListener)==null?void 0:i.onDeviceChange)==null||r.call(i,e),(()=>{var s,o,n,d;if(e.error&&e.type){let u=e.type.includes(\"audio\")?(s=this.localPeer)==null?void 0:s.audioTrack:(o=this.localPeer)==null?void 0:o.videoTrack;(n=this.errorListener)==null||n.onError(e.error),[P.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,P.TracksErrors.DEVICE_IN_USE,P.TracksErrors.DEVICE_NOT_AVAILABLE].includes(e.error.code)&&u&&(u.setEnabled(!1),(d=this.listener)==null||d.onTrackUpdate(2,u,this.localPeer))}})()};this.handleAudioPluginError=e=>{var t;l.e(this.TAG,\"Audio Plugin Error event\",e),(t=this.errorListener)==null||t.onError(e)};this.handleError=e=>{var t;l.e(this.TAG,e),(t=this.errorListener)==null||t.onError(e)};this.handleLocalRoleUpdate=i=>c(this,[i],function*({oldRole:e,newRole:t}){var r;this.deviceManager.currentSelection=this.deviceManager.getCurrentSelection(),yield this.transport.handleLocalRoleUpdate({oldRole:e,newRole:t}),yield(r=this.roleChangeManager)==null?void 0:r.handleLocalPeerRoleUpdate({oldRole:e,newRole:t}),yield this.interactivityCenter.whiteboard.handleLocalRoleUpdate()});this.unpauseRemoteVideoTracks=()=>{this.store.getRemoteVideoTracks().forEach(e=>e.handleTrackUnmute())};this.sendAudioPresenceFailed=()=>{var t;let e=S.TracksErrors.NoAudioDetected(\"PREVIEW\");l.w(this.TAG,\"Audio Presence Failure\",this.transportState,e),this.isDiagnostics&&((t=this.listener)==null||t.onError(e))};this.sendJoinAnalyticsEvent=(e=!1,t)=>{this.eventBus.analytics.publish(y.join(M(m({error:t},this.analyticsTimer.getTimes()),{time:this.analyticsTimer.getTimeTaken(\"join_time\"),is_preview_called:e,retries_join:this.transport.joinRetryCount})))};this.sendPreviewAnalyticsEvent=e=>{this.eventBus.analytics.publish(y.preview(M(m({error:e},this.analyticsTimer.getTimes()),{time:this.analyticsTimer.getTimeTaken(\"preview_time\")})))};this.sendAnalyticsEvent=e=>{this.isDiagnostics||this.analyticsEventsService.queue(e).flush()}}setSessionPeerInfo(e,t){var r,s,o,n;let i=this.store.getRoom();if(!t||!i){l.e(this.TAG,\"setSessionPeerInfo> Local peer or room is undefined\");return}this.sessionPeerInfo={peer:{peer_id:t.peerId,role:(r=t.role)==null?void 0:r.name,joined_at:((s=t.joinedAt)==null?void 0:s.valueOf())||0,room_name:i.name,session_started_at:((o=i.startedAt)==null?void 0:o.valueOf())||0,user_data:t.customerUserId,user_name:t.name,template_id:i.templateId,session_id:i.sessionId,token:(n=this.store.getConfig())==null?void 0:n.authToken},agent:this.store.getUserAgent(),device_id:li(),cluster:{websocket_url:e},timestamp:Date.now()}}initNotificationManager(){this.notificationManager||(this.notificationManager=new nr(this.store,this.eventBus,this.transport,this.listener,this.audioListener))}initStoreAndManagers(e){var t,i;if(this.listener=e,this.errorListener=e,this.deviceChangeListener=e,(t=this.store)==null||t.setErrorListener(this.errorListener),this.sdkState.isInitialised){(i=this.notificationManager)==null||i.setListener(this.listener),this.audioSinkManager.setListener(this.listener),this.interactivityCenter.setListener(this.listener),this.transport.setListener(this.listener);return}this.sdkState.isInitialised=!0,this.store=new Ft,this.store.setErrorListener(this.errorListener),this.eventBus=new Kt,this.pluginUsageTracker=new Ki(this.eventBus),this.wakeLockManager=new Wi,this.networkTestManager=new Gi(this.eventBus,this.listener),this.playlistManager=new Lt(this,this.eventBus),this.deviceManager=new Wt(this.store,this.eventBus),this.audioSinkManager=new Gt(this.store,this.deviceManager,this.eventBus),this.audioOutput=new qi(this.deviceManager,this.audioSinkManager),this.audioSinkManager.setListener(this.listener),this.eventBus.autoplayError.subscribe(this.handleAutoplayError),this.localTrackManager=new be(this.store,this.observer,this.deviceManager,this.eventBus,this.analyticsTimer),this.analyticsEventsService=new $i(this.store),this.transport=new ri(this.observer,this.deviceManager,this.store,this.eventBus,this.analyticsEventsService,this.analyticsTimer,this.pluginUsageTracker),\"onInitSuccess\"in e&&this.transport.setConnectivityListener(e),this.sessionStore=new cr(this.transport),this.interactivityCenter=new jt(this.transport,this.store,this.listener),this.eventBus.analytics.subscribe(this.sendAnalyticsEvent),this.eventBus.deviceChange.subscribe(this.handleDeviceChange),this.eventBus.localVideoUnmutedNatively.subscribe(this.unpauseRemoteVideoTracks),this.eventBus.localAudioUnmutedNatively.subscribe(this.unpauseRemoteVideoTracks),this.eventBus.audioPluginFailed.subscribe(this.handleAudioPluginError),this.eventBus.error.subscribe(this.handleError)}validateJoined(e){if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",`Not connected - ${e}`)}sendHLSAnalytics(e){this.sendAnalyticsEvent(y.hlsPlayerError(e))}refreshDevices(){return c(this,null,function*(){this.validateJoined(\"refreshDevices\"),yield this.deviceManager.init(!0)})}getWebrtcInternals(){var e;return(e=this.transport)==null?void 0:e.getWebrtcInternals()}getDebugInfo(){var r;if(!this.transport)throw l.e(this.TAG,\"Transport is not defined\"),new Error(\"getDebugInfo can only be called after join\");let e=this.transport.getWebsocketEndpoint(),t=Object.values(ns).filter(s=>this.transport.isFlagEnabled(s)),i=(r=this.store.getConfig())==null?void 0:r.initEndpoint;return{websocketURL:e,enabledFlags:t,initEndpoint:i}}getSessionStore(){return this.sessionStore}getPlaylistManager(){return this.playlistManager}getRecordingState(){var e;return(e=this.store.getRoom())==null?void 0:e.recording}getRTMPState(){var e;return(e=this.store.getRoom())==null?void 0:e.rtmp}getHLSState(){var e;return(e=this.store.getRoom())==null?void 0:e.hls}getTranscriptionState(){var e;return(e=this.store.getRoom())==null?void 0:e.transcriptions}getTemplateAppData(){return this.store.getTemplateAppData()}getInteractivityCenter(){return this.interactivityCenter}getPeerListIterator(e){return new ki(this.transport,this.store,e)}updatePlaylistSettings(e){e.video&&Object.assign(this.playlistSettings.video,e.video),e.audio&&Object.assign(this.playlistSettings.audio,e.audio)}get localPeer(){var e;return(e=this.store)==null?void 0:e.getLocalPeer()}preview(e,t){return c(this,null,function*(){if(kt(),yt(),this.sdkState.isPreviewInProgress)return Promise.reject(S.GenericErrors.PreviewAlreadyInProgress(\"PREVIEW\",\"Preview already called\"));if([\"Joined\",\"Reconnecting\"].includes(this.transportState))return this.midCallPreview(e.asRole,e.settings);this.analyticsTimer.start(\"preview_time\"),this.setUpPreview(e,t);let i=!1,r=!1,s=setTimeout(()=>{var o,n;(!i||!r)&&((n=(o=this.listener)==null?void 0:o.onNetworkQuality)==null||n.call(o,-1))},3e3);return new Promise((o,n)=>{let d=()=>c(this,null,function*(){var h;if(this.localPeer){let T=e.asRole&&this.store.getPolicyForRole(e.asRole);this.localPeer.asRole=T||this.localPeer.role}let u=yield this.localTrackManager.getTracksToPublish(e.settings);u.forEach(T=>{var g;if(this.setLocalPeerTrack(T),T.isTrackNotPublishing()){let f=S.TracksErrors.NoDataInTrack(`${T.type} track has no data. muted: ${T.nativeTrack.muted}, readyState: ${T.nativeTrack.readyState}`);l.e(this.TAG,f),this.sendAnalyticsEvent(y.publish({devices:this.deviceManager.getDevices(),error:f})),(g=this.listener)==null||g.onError(f)}}),(h=this.localPeer)!=null&&h.audioTrack&&this.initPreviewTrackAudioLevelMonitor(),yield this.initDeviceManagers(),this.sdkState.isPreviewInProgress=!1,this.analyticsTimer.end(\"preview_time\");let p=this.store.getRoom();p&&t.onPreview(p,u),this.sendPreviewAnalyticsEvent(),o()});this.eventBus.policyChange.subscribeOnce(d),this.eventBus.leave.subscribeOnce(this.handlePreviewError),this.eventBus.leave.subscribeOnce(u=>n(u)),this.transport.preview(e.authToken,e.initEndpoint,this.localPeer.peerId,{name:e.userName,metaData:e.metaData||\"\"},e.autoVideoSubscribe,e.iceServers).then(u=>{var p;i=!0,clearTimeout(s),u&&e.captureNetworkQualityInPreview&&this.networkTestManager.start((p=u.config)==null?void 0:p.networkHealth).then(()=>{r=!0})}).catch(u=>{this.handlePreviewError(u),n(u)})})})}midCallPreview(e,t){return c(this,null,function*(){var s,o;if(!this.localPeer||this.transportState!==\"Joined\")throw S.GenericErrors.NotConnected(\"VALIDATION\",\"Not connected - midCallPreview\");let i=e&&this.store.getPolicyForRole(e);if(!i)throw S.GenericErrors.InvalidRole(\"PREVIEW\",`role ${e} does not exist in policy`);this.localPeer.asRole=i;let r=yield this.localTrackManager.getTracksToPublish(t);r.forEach(n=>this.setLocalPeerTrack(n)),(s=this.localPeer)!=null&&s.audioTrack&&this.initPreviewTrackAudioLevelMonitor(),yield this.initDeviceManagers(),(o=this.listener)==null||o.onPreview(this.store.getRoom(),r)})}cancelMidCallPreview(){return c(this,null,function*(){var e,t,i;if((!this.localPeer||!this.localPeer.isInPreview())&&l.w(this.TAG,\"Cannot cancel mid call preview as preview is not in progress\"),(e=this.localPeer)!=null&&e.asRole&&this.localPeer.role){let r=this.localPeer.asRole,s=this.localPeer.role;delete this.localPeer.asRole,yield(t=this.roleChangeManager)==null?void 0:t.diffRolesAndPublishTracks({oldRole:r,newRole:s}),(i=this.listener)==null||i.onPeerUpdate(8,this.localPeer)}})}join(e,t){return c(this,null,function*(){var d,u,p,h,T,g,f,E;if(kt(),yt(),this.sdkState.isPreviewInProgress)throw S.GenericErrors.NotReady(\"JOIN\",\"Preview is in progress, can't join\");(u=(d=this.eventBus)==null?void 0:d.leave)==null||u.unsubscribe(this.handlePreviewError),this.analyticsTimer.start(\"join_time\"),this.sdkState.isJoinInProgress=!0;let{roomId:i,userId:r,role:s}=Mr(e.authToken),o=((h=(p=this.localPeer)==null?void 0:p.asRole)==null?void 0:h.name)||((g=(T=this.localPeer)==null?void 0:T.role)==null?void 0:g.name);(f=this.networkTestManager)==null||f.stop(),this.commonSetup(e,i,t),this.removeDevicesFromConfig(e),this.store.setConfig(e),this.store.createAndSetUserAgent(this.frameworkInfo),ce.resumeContext();let n=this.store.getConfig();n!=null&&n.autoManageWakeLock&&this.wakeLockManager.acquireLock(),this.localPeer?(this.localPeer.name=e.userName,this.localPeer.role=this.store.getPolicyForRole(s),this.localPeer.customerUserId=r,this.localPeer.metadata=e.metaData,delete this.localPeer.asRole):this.createAndAddLocalPeerToStore(e,s,r),this.roleChangeManager=new Bt(this.store,this.transport,this.deviceManager,this.getAndPublishTracks.bind(this),this.removeTrack.bind(this),this.listener),this.eventBus.localRoleUpdate.subscribe(this.handleLocalRoleUpdate),l.d(this.TAG,`\\u23F3 Joining room ${i}`),l.time(`join-room-${i}`);try{yield this.transport.join(e.authToken,this.localPeer.peerId,{name:e.userName,metaData:e.metaData},e.initEndpoint,e.autoVideoSubscribe,e.iceServers),l.d(this.TAG,`\\u2705 Joined room ${i}`),this.analyticsTimer.start(\"peer_list_time\"),yield this.notifyJoin(),this.sdkState.isJoinInProgress=!1,yield this.publish(e.settings,o)}catch(v){throw this.analyticsTimer.end(\"join_time\"),this.sdkState.isJoinInProgress=!1,(E=this.listener)==null||E.onError(v),this.sendJoinAnalyticsEvent(this.sdkState.isPreviewCalled,v),l.e(this.TAG,\"Unable to join room\",v),v}l.timeEnd(`join-room-${i}`)})}stringifyMetadata(e){e.metaData&&typeof e.metaData!=\"string\"?e.metaData=JSON.stringify(e.metaData):e.metaData||(e.metaData=\"\")}cleanup(){var e,t,i;this.cleanDeviceManagers(),this.eventBus.analytics.unsubscribe(this.sendAnalyticsEvent),this.eventBus.localVideoUnmutedNatively.unsubscribe(this.unpauseRemoteVideoTracks),this.eventBus.localAudioUnmutedNatively.unsubscribe(this.unpauseRemoteVideoTracks),this.eventBus.error.unsubscribe(this.handleError),this.analyticsTimer.cleanup(),X.cleanup(),this.playlistManager.cleanup(),(e=this.wakeLockManager)==null||e.cleanup(),be.cleanup(),this.notificationManager=void 0,l.cleanup(),this.sdkState=m({},ro),this.localPeer&&((t=this.localPeer.audioTrack)==null||t.cleanup(),this.localPeer.audioTrack=void 0,(i=this.localPeer.videoTrack)==null||i.cleanup(),this.localPeer.videoTrack=void 0),this.store.cleanup(),this.listener=void 0,this.roleChangeManager&&this.eventBus.localRoleUpdate.unsubscribe(this.handleLocalRoleUpdate)}leave(e){return this.internalLeave(e)}internalLeave(e=!0,t){return c(this,null,function*(){var r,s,o,n;let i=(r=this.store)==null?void 0:r.getRoom();if(i){for(;(this.sdkState.isPreviewInProgress||this.sdkState.isJoinInProgress)&&!(t!=null&&t.isTerminal);)yield Oe(100);let d=i.id;this.setSessionPeerInfo(this.transport.getWebsocketEndpoint()||\"\",this.localPeer),(s=this.networkTestManager)==null||s.stop(),this.eventBus.leave.publish(t);let u=(o=this.localPeer)==null?void 0:o.peerId;l.d(this.TAG,`\\u23F3 Leaving room ${d}, peerId=${u}`),yield(n=this.transport)==null?void 0:n.leave(e,t?\"sdk request\":\"user request\"),this.cleanup(),l.d(this.TAG,`\\u2705 Left room ${d}, peerId=${u}`)}})}getAuthTokenByRoomCode(e,t){return c(this,null,function*(){let i=(t||{}).endpoint||\"https://auth.100ms.live/v2/token\";this.analyticsTimer.start(\"GET_TOKEN\");let r=yield Bi(i,{method:\"POST\",body:JSON.stringify({code:e.roomCode,user_id:e.userId})},[429,500,501,502,503,504,505,506,507,508,509,510,511]),s=yield r.json();if(this.analyticsTimer.end(\"GET_TOKEN\"),!r.ok)throw S.APIErrors.ServerErrors(s.code,\"GET_TOKEN\",s.message,!1);let{token:o}=s;if(!o)throw Error(s.message);return o})}getLocalPeer(){return this.store.getLocalPeer()}getPeers(){return this.store.getPeers()}getPeerMap(){return this.store.getPeerMap()}getAudioOutput(){return this.audioOutput}sendMessage(e,t){this.sendMessageInternal({message:t,type:e})}sendBroadcastMessage(e,t){return c(this,null,function*(){return yield this.sendMessageInternal({message:e,type:t})})}sendGroupMessage(e,t,i){return c(this,null,function*(){let r=this.store.getKnownRoles();if((t.filter(o=>r[o.name])||[]).length===0)throw S.GenericErrors.ValidationFailed(\"No valid role is present\",t);return yield this.sendMessageInternal({message:e,recipientRoles:t,type:i})})}sendDirectMessage(e,t,i){return c(this,null,function*(){var o,n;if(((o=this.localPeer)==null?void 0:o.peerId)===t)throw S.GenericErrors.ValidationFailed(\"Cannot send message to self\");let r=!!((n=this.store.getRoom())!=null&&n.large_room_optimization),s=this.store.getPeerById(t);if(!s)if(r){let d=yield this.transport.signal.getPeer({peer_id:t});if(!d)throw S.GenericErrors.ValidationFailed(\"Invalid peer - peer not present in the room\",t);s=ye(d,this.store)}else throw S.GenericErrors.ValidationFailed(\"Invalid peer - peer not present in the room\",t);return yield this.sendMessageInternal({message:e,recipientPeer:s,type:i})})}submitSessionFeedback(e,t){return c(this,null,function*(){if(!this.sessionPeerInfo)throw l.e(this.TAG,\"submitSessionFeedback> session is undefined\"),new Error(\"session is undefined\");let i=this.sessionPeerInfo.peer.token;if(!i)throw l.e(this.TAG,\"submitSessionFeedback> token is undefined\"),new Error(\"Internal error, token is not present\");try{yield $t.sendFeedback({token:i,info:this.sessionPeerInfo,feedback:e,eventEndpoint:t}),l.i(this.TAG,\"submitSessionFeedback> submitted feedback\"),this.sessionPeerInfo=void 0}catch(r){throw l.e(this.TAG,\"submitSessionFeedback> error occured \",r),new Error(\"Unable to submit feedback\")}})}getPeer(e){return c(this,null,function*(){let t=yield this.transport.signal.getPeer({peer_id:e});if(t)return ye(t,this.store)})}findPeerByName(r){return c(this,arguments,function*({query:e,limit:t=10,offset:i}){let{peers:s,offset:o,eof:n}=yield this.transport.signal.findPeerByName({query:e==null?void 0:e.toLowerCase(),limit:t,offset:i});return s.length>0?{offset:o,eof:n,peers:s.map(d=>ye({peer_id:d.peer_id,role:d.role,groups:[],info:{name:d.name,data:\"\",user_id:\"\",type:d.type}},this.store))}:{offset:o,peers:[]}})}sendMessageInternal(s){return c(this,arguments,function*({recipientRoles:e,recipientPeer:t,type:i=\"chat\",message:r}){if(r.replace(/\\u200b/g,\" \").trim()===\"\")throw l.w(this.TAG,\"sendMessage\",\"Ignoring empty message send\"),S.GenericErrors.ValidationFailed(\"Empty message not allowed\");let o={info:{message:r,type:i}};return e!=null&&e.length&&(o.roles=e.map(n=>n.name)),t!=null&&t.peerId&&(o.peer_id=t.peerId),l.d(this.TAG,\"Sending Message: \",o),yield this.transport.signal.broadcast(o)})}startScreenShare(e,t){return c(this,null,function*(){var n,d,u;let i=this.store.getPublishParams();if(!i)return;let{allowed:r}=i;if(!(r&&r.includes(\"screen\"))){l.e(this.TAG,`Role ${(n=this.localPeer)==null?void 0:n.role} cannot share screen`);return}if((u=(d=this.localPeer)==null?void 0:d.auxiliaryTracks)!=null&&u.find(p=>p.source===\"screen\"))throw Error(\"Cannot share multiple screens\");let o=yield this.getScreenshareTracks(e,t);if(!this.localPeer){l.d(this.TAG,\"Screenshared when not connected\"),o.forEach(p=>{p.cleanup()});return}this.transport.setOnScreenshareStop(()=>{this.stopEndedScreenshare(e)}),yield this.transport.publish(o),o.forEach(p=>{var h,T,g;p.peerId=(h=this.localPeer)==null?void 0:h.peerId,(T=this.localPeer)==null||T.auxiliaryTracks.push(p),(g=this.listener)==null||g.onTrackUpdate(0,p,this.localPeer)})})}stopEndedScreenshare(e){return c(this,null,function*(){l.d(this.TAG,\"\\u2705 Screenshare ended natively\"),yield this.stopScreenShare(),e()})}stopScreenShare(){return c(this,null,function*(){var t;l.d(this.TAG,\"\\u2705 Screenshare ended from app\");let e=(t=this.localPeer)==null?void 0:t.auxiliaryTracks.filter(i=>i.source===\"screen\");if(e)for(let i of e)yield this.removeTrack(i.trackId)})}addTrack(e,t=\"regular\"){return c(this,null,function*(){var u,p,h,T;if(!e){l.w(this.TAG,\"Please pass a valid MediaStreamTrack\");return}if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",\"No local peer present, cannot addTrack\");if(this.localPeer.auxiliaryTracks.find(g=>g.trackId===e.id))return;let r=e.kind,s=new MediaStream([e]),o=new Se(s),n=r===\"audio\"?de:G,d=new n(o,e,t,this.eventBus);yield this.applySettings(d),yield this.setPlaylistSettings({track:e,hmsTrack:d,source:t}),yield(u=this.transport)==null?void 0:u.publish([d]),d.peerId=(p=this.localPeer)==null?void 0:p.peerId,(h=this.localPeer)==null||h.auxiliaryTracks.push(d),(T=this.listener)==null||T.onTrackUpdate(0,d,this.localPeer)})}removeTrack(e,t=!1){return c(this,null,function*(){var r;if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",\"No local peer present, cannot removeTrack\");let i=this.localPeer.auxiliaryTracks.findIndex(s=>s.trackId===e);if(i>-1){let s=this.localPeer.auxiliaryTracks[i];s.isPublished?yield this.transport.unpublish([s]):yield s.cleanup(),t||this.stopPlaylist(s),this.localPeer.auxiliaryTracks.splice(i,1),(r=this.listener)==null||r.onTrackUpdate(1,s,this.localPeer)}else l.w(this.TAG,`No track found for ${e}`)})}setAnalyticsLevel(e){this.analyticsEventsService.level=e}setLogLevel(e){l.level=e}autoSelectAudioOutput(e){var t;(t=this.deviceManager)==null||t.autoSelectAudioOutput(e)}addAudioListener(e){var t;this.audioListener=e,(t=this.notificationManager)==null||t.setAudioListener(e)}addConnectionQualityListener(e){var t;(t=this.notificationManager)==null||t.setConnectionQualityListener(e)}setIsDiagnostics(e){this.isDiagnostics=e}changeRole(e,t,i=!1){return c(this,null,function*(){var r;yield(r=this.transport)==null?void 0:r.signal.requestRoleChange({requested_for:e,role:t,force:i})})}changeRoleOfPeer(e,t,i=!1){return c(this,null,function*(){var r;yield(r=this.transport)==null?void 0:r.signal.requestRoleChange({requested_for:e,role:t,force:i})})}changeRoleOfPeersWithRoles(e,t){return c(this,null,function*(){var i;e.length<=0||!t||(yield(i=this.transport)==null?void 0:i.signal.requestBulkRoleChange({roles:e.map(r=>r.name),role:t,force:!0}))})}acceptChangeRole(e){return c(this,null,function*(){var t,i;yield(i=this.transport)==null?void 0:i.signal.acceptRoleChangeRequest({requested_by:(t=e.requestedBy)==null?void 0:t.peerId,role:e.role.name,token:e.token})})}endRoom(e,t){return c(this,null,function*(){var i;if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",\"No local peer present, cannot end room\");yield(i=this.transport)==null?void 0:i.signal.endRoom(e,t),yield this.leave()})}removePeer(e,t){return c(this,null,function*(){var i;if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",\"No local peer present, cannot remove peer\");yield(i=this.transport)==null?void 0:i.signal.removePeer({requested_for:e,reason:t})})}startRTMPOrRecording(e){return c(this,null,function*(){var i,r;if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",\"No local peer present, cannot start streaming or recording\");let t={meeting_url:e.meetingURL,record:e.record};(i=e.rtmpURLs)!=null&&i.length&&(t.rtmp_urls=e.rtmpURLs),e.resolution&&(t.resolution=e.resolution),yield(r=this.transport)==null?void 0:r.signal.startRTMPOrRecording(t)})}stopRTMPAndRecording(){return c(this,null,function*(){var e;if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",\"No local peer present, cannot stop streaming or recording\");yield(e=this.transport)==null?void 0:e.signal.stopRTMPAndRecording()})}startHLSStreaming(e){return c(this,null,function*(){var i;if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",\"No local peer present, cannot start HLS streaming\");let t={};e&&e.variants&&e.variants.length>0&&(t.variants=e.variants.map(r=>{let s={meeting_url:r.meetingURL};return r.metadata&&(s.metadata=r.metadata),s})),e!=null&&e.recording&&(t.hls_recording={single_file_per_layer:e.recording.singleFilePerLayer,hls_vod:e.recording.hlsVod}),yield(i=this.transport)==null?void 0:i.signal.startHLSStreaming(t)})}stopHLSStreaming(e){return c(this,null,function*(){var t,i,r;if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",\"No local peer present, cannot stop HLS streaming\");if(e){let s={variants:(t=e==null?void 0:e.variants)==null?void 0:t.map(o=>{let n={meeting_url:o.meetingURL};return o.metadata&&(n.metadata=o.metadata),n}),stop_reason:e.stop_reason};yield(i=this.transport)==null?void 0:i.signal.stopHLSStreaming(s)}else yield(r=this.transport)==null?void 0:r.signal.stopHLSStreaming()})}startTranscription(e){return c(this,null,function*(){var i;if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",\"No local peer present, cannot start transcriptions\");let t={mode:e.mode};yield(i=this.transport)==null?void 0:i.signal.startTranscription(t)})}stopTranscription(e){return c(this,null,function*(){var i;if(!this.localPeer)throw S.GenericErrors.NotConnected(\"VALIDATION\",\"No local peer present, cannot stop transcriptions\");if(!e)throw S.GenericErrors.Signalling(\"VALIDATION\",\"No mode is passed to stop the transcription\");let t={mode:e.mode};yield(i=this.transport)==null?void 0:i.signal.stopTranscription(t)})}sendHLSTimedMetadata(e){return c(this,null,function*(){var t;if(this.validateJoined(\"sendHLSTimedMetadata\"),e.length>0){let i={metadata_objs:e};yield(t=this.transport)==null?void 0:t.signal.sendHLSTimedMetadata(i)}})}changeName(e){return c(this,null,function*(){var i,r;this.validateJoined(\"changeName\");let t=this.store.getLocalPeer();t&&t.name!==e&&(yield(i=this.transport)==null?void 0:i.signal.updatePeer({name:e}),(r=this.notificationManager)==null||r.updateLocalPeer({name:e}))})}changeMetadata(e){return c(this,null,function*(){var t,i;this.validateJoined(\"changeMetadata\"),yield(t=this.transport)==null?void 0:t.signal.updatePeer({data:e}),(i=this.notificationManager)==null||i.updateLocalPeer({metadata:e})})}setSessionMetadata(e){return c(this,null,function*(){var t;yield(t=this.transport)==null?void 0:t.signal.setSessionMetadata({key:\"default\",data:e})})}getSessionMetadata(){return c(this,null,function*(){var t;return(yield(t=this.transport)==null?void 0:t.signal.getSessionMetadata(\"default\")).data})}getRoles(){return Object.values(this.store.getKnownRoles())}changeTrackState(e,t){return c(this,null,function*(){var r;if(e.type===\"video\"&&e.source!==\"regular\"){l.w(this.TAG,\"Muting non-regular video tracks is currently not supported\");return}if(e.enabled===t){l.w(this.TAG,`Aborting change track state, track already has enabled - ${t}`,e);return}if(!this.store.getTrackById(e.trackId))throw S.GenericErrors.ValidationFailed(\"No track found for change track state\",e);let i=this.store.getPeerByTrackId(e.trackId);if(!i)throw S.GenericErrors.ValidationFailed(\"No peer found for change track state\",e);yield(r=this.transport)==null?void 0:r.signal.requestTrackStateChange({requested_for:i.peerId,track_id:e.trackId,stream_id:e.stream.id,mute:!t})})}changeMultiTrackState(e){return c(this,null,function*(){var o;if(typeof e.enabled!=\"boolean\")throw S.GenericErrors.ValidationFailed(\"Pass a boolean for enabled\");let{enabled:t,roles:i,type:r,source:s}=e;yield(o=this.transport)==null?void 0:o.signal.requestMultiTrackStateChange({value:!t,type:r,source:s,roles:i==null?void 0:i.map(n=>n==null?void 0:n.name)})})}raiseLocalPeerHand(){return c(this,null,function*(){var e;this.validateJoined(\"raiseLocalPeerHand\"),yield(e=this.transport)==null?void 0:e.signal.joinGroup(Ae)})}lowerLocalPeerHand(){return c(this,null,function*(){var e;this.validateJoined(\"lowerLocalPeerHand\"),yield(e=this.transport)==null?void 0:e.signal.leaveGroup(Ae)})}raiseRemotePeerHand(e){return c(this,null,function*(){var t;yield(t=this.transport)==null?void 0:t.signal.addToGroup(e,Ae)})}lowerRemotePeerHand(e){return c(this,null,function*(){var t;yield(t=this.transport)==null?void 0:t.signal.removeFromGroup(e,Ae)})}setFrameworkInfo(e){this.frameworkInfo=m(m({},this.frameworkInfo),e)}attachVideo(e,t){return c(this,null,function*(){let i=this.store.getConfig();i!=null&&i.autoManageVideo?e.attach(t):yield e.addSink(t)})}detachVideo(e,t){return c(this,null,function*(){let i=this.store.getConfig();i!=null&&i.autoManageVideo?e.detach(t):yield e.removeSink(t)})}publish(e,t){return c(this,null,function*(){var i,r,s;if([this.store.getPublishParams(),!this.sdkState.published,!Ge].every(o=>!!o)){let o=t&&t!==((r=(i=this.localPeer)==null?void 0:i.role)==null?void 0:r.name)?()=>{var n;return(n=this.roleChangeManager)==null?void 0:n.diffRolesAndPublishTracks({oldRole:this.store.getPolicyForRole(t),newRole:this.localPeer.role})}:()=>this.getAndPublishTracks(e);yield(s=o==null?void 0:o())==null?void 0:s.catch(n=>{var d;l.e(this.TAG,\"Error in publish\",n),(d=this.listener)==null||d.onError(n)})}})}getAndPublishTracks(e){return c(this,null,function*(){var i,r;let t=yield this.localTrackManager.getTracksToPublish(e);yield this.initDeviceManagers(),yield this.setAndPublishTracks(t),(r=(i=this.localPeer)==null?void 0:i.audioTrack)==null||r.initAudioLevelMonitor(),this.sdkState.published=!0})}setAndPublishTracks(e){return c(this,null,function*(){var t,i;for(let r of e){if(yield this.transport.publish([r]),r.isTrackNotPublishing()){let s=S.TracksErrors.NoDataInTrack(`${r.type} track has no data. muted: ${r.nativeTrack.muted}, readyState: ${r.nativeTrack.readyState}`);l.e(this.TAG,s),this.sendAnalyticsEvent(y.publish({devices:this.deviceManager.getDevices(),error:s})),(t=this.listener)==null||t.onError(s)}yield this.setLocalPeerTrack(r),(i=this.listener)==null||i.onTrackUpdate(0,r,this.localPeer)}})}setLocalPeerTrack(e){return c(this,null,function*(){var t;switch(e.peerId=(t=this.localPeer)==null?void 0:t.peerId,e.type){case\"audio\":this.localPeer.audioTrack=e,yield this.deviceManager.autoSelectAudioOutput();break;case\"video\":this.localPeer.videoTrack=e;break}})}initDeviceManagers(){return c(this,null,function*(){var e,t,i,r,s;this.sdkState.deviceManagersInitialised||(this.sdkState.deviceManagersInitialised=!0,yield this.deviceManager.init(),(yield this.deviceManager.updateOutputDevice((t=(e=this.store.getConfig())==null?void 0:e.settings)==null?void 0:t.audioOutputDeviceId))||(yield this.deviceManager.updateOutputDevice((r=(i=X.getSelection())==null?void 0:i.audioOutput)==null?void 0:r.deviceId)),this.audioSinkManager.init((s=this.store.getConfig())==null?void 0:s.audioSinkElementId))})}cleanDeviceManagers(){this.eventBus.deviceChange.unsubscribe(this.handleDeviceChange),this.eventBus.audioPluginFailed.unsubscribe(this.handleAudioPluginError),this.eventBus.autoplayError.unsubscribe(this.handleAutoplayError),this.deviceManager.cleanup(),this.audioSinkManager.cleanup()}initPreviewTrackAudioLevelMonitor(){var t;let e=(t=this.localPeer)==null?void 0:t.audioTrack;e==null||e.initAudioLevelMonitor(),this.eventBus.trackAudioLevelUpdate.subscribe(i=>{var s;let r=i&&i.track.trackId===(e==null?void 0:e.trackId)?[{audioLevel:i.audioLevel,peer:this.localPeer,track:e}]:[];this.store.updateSpeakers(r),(s=this.audioListener)==null||s.onAudioLevelUpdate(r)}),this.eventBus.localAudioSilence.subscribe(this.sendAudioPresenceFailed)}notifyJoin(){var i;let e=this.store.getLocalPeer(),t=this.store.getRoom();if(!t){l.w(this.TAG,\"notify join - room not present\");return}if(t.joinedAt=new Date,e&&(e.joinedAt=t.joinedAt),e!=null&&e.role){this.analyticsTimer.end(\"join_time\"),(i=this.listener)==null||i.onJoin(t);return}return new Promise((r,s)=>{this.eventBus.policyChange.subscribeOnce(()=>{var o;this.analyticsTimer.end(\"join_time\"),(o=this.listener)==null||o.onJoin(t),r()}),this.eventBus.leave.subscribeOnce(o=>{s(o)})})}setUpPreview(e,t){this.sdkState.isPreviewCalled=!0,this.sdkState.isPreviewInProgress=!0;let{roomId:i,userId:r,role:s}=Mr(e.authToken);this.commonSetup(e,i,t),this.store.setConfig(e),this.store.createAndSetUserAgent(this.frameworkInfo),this.createAndAddLocalPeerToStore(e,s,r,e.asRole)}setPlaylistSettings(r){return c(this,arguments,function*({track:e,hmsTrack:t,source:i}){var s,o;if(i===\"videoplaylist\"){let n={};if(e.kind===\"audio\")n.maxBitrate=((s=this.playlistSettings.audio)==null?void 0:s.bitrate)||Kr;else{n.maxBitrate=((o=this.playlistSettings.video)==null?void 0:o.bitrate)||$r;let{width:d,height:u}=e.getSettings();n.width=d,n.height=u}yield t.setSettings(n)}else i===\"audioplaylist\"&&(yield t.setSettings({maxBitrate:64}))})}createAndAddLocalPeerToStore(e,t,i,r){let s=this.store.getPolicyForRole(t),o=r?this.store.getPolicyForRole(r):void 0,n=new qe({name:e.userName||\"\",customerUserId:i,metadata:e.metaData||\"\",role:s,asRole:o||s,type:\"regular\"});this.store.addPeer(n)}commonSetup(e,t,i){this.stringifyMetadata(e),e.initEndpoint||(e.initEndpoint=\"https://prod-init.100ms.live\"),this.initStoreAndManagers(i),this.store.getRoom()||this.store.setRoom(new Je(t))}removeDevicesFromConfig(e){this.store.getConfig()&&e.settings&&(delete e.settings.audioOutputDeviceId,delete e.settings.videoDeviceId,delete e.settings.audioInputDeviceId)}getScreenshareTracks(e,t){return c(this,null,function*(){let i=this.transport.isFlagEnabled(\"scaleScreenshareBasedOnPixels\"),[r,s]=yield this.localTrackManager.getLocalScreen(t,i),o=()=>{this.stopEndedScreenshare(e)},n=[];if(t!=null&&t.audioOnly){if(r.nativeTrack.stop(),!s)throw S.TracksErrors.NothingToReturn(\"TRACK\",\"Select share audio when sharing screen\",\"No audio found\");n.push(s),s.nativeTrack.addEventListener(\"ended\",o)}else n.push(r),r.nativeTrack.addEventListener(\"ended\",o),s&&n.push(s);return n})}stopPlaylist(e){e.source===\"audioplaylist\"?this.playlistManager.stop(\"audio\"):e.source===\"videoplaylist\"&&this.playlistManager.stop(\"video\")}applySettings(e){return c(this,null,function*(){Ns(this.store);let t=this.store.getPublishParams();if(t){if(e instanceof G){let i=e.source===\"regular\"?\"video\":e.source===\"screen\"?\"screen\":\"\";if(!i||!t.allowed.includes(i))return;let r=t[i];if(!r)return;let s=new q().codec(r.codec).maxBitrate(r.bitRate).maxFramerate(r.frameRate).setWidth(r.width).setHeight(r.height).build();yield e.setSettings(s)}else if(e instanceof de){if(!t.allowed.includes(\"audio\"))return;let i=new Q().codec(t.audio.codec).maxBitrate(t.audio.bitRate).build();yield e.setSettings(i)}}})}};var mt=class a{constructor(e,t,i){this.getStats=()=>(this.stats||(this.stats=new si(this.store,this.sdk)),this.stats);this.getDiagnosticsSDK=()=>(this.diagnostics||(this.diagnostics=this.actions.initDiagnostics()),this.diagnostics);e?this.store=e:this.store=a.createNewHMSStore(Fi(\"HMSStore\"),oi),i?this.notifications=i:this.notifications=new Li(this.store),t?this.actions=t:(this.sdk=new yr,this.actions=new Vi(this.store,this.sdk,this.notifications)),this.actions.setFrameworkInfo({type:\"js\",sdkVersion:Ir().version}),this.initialTriggerOnSubscribe=!1,U&&(window.__hms=this)}triggerOnSubscribe(){this.initialTriggerOnSubscribe||(a.makeStoreTriggerOnSubscribe(this.store),this.initialTriggerOnSubscribe=!0)}getStore(){return this.store}getHMSActions(){return this.actions}getActions(){return this.actions}getNotifications(){return{onNotification:this.notifications.onNotification}}static createNewHMSStore(e,t){let i=(0,zustand_vanilla__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(()=>t()),r=i.setState;i.setState=n=>{let d=typeof n==\"function\"?(0,immer__WEBPACK_IMPORTED_MODULE_8__.produce)(n):n;r(d)};let s=i.getState;i.getState=n=>n?n(s()):s(),a.compareWithShallowCheckInSubscribe(i);let o=a.setUpDevtools(i,e);return M(m({},i),{namedSetState:o})}static makeStoreTriggerOnSubscribe(e){let t=e.subscribe;e.subscribe=(i,r,s)=>(i(e.getState(r),void 0),t(i,r,s))}static compareWithShallowCheckInSubscribe(e){let t=e.subscribe;e.subscribe=(i,r,s)=>(r||(r=o=>o),s=s||zustand_shallow__WEBPACK_IMPORTED_MODULE_9__[\"default\"],t(i,r,s))}static setUpDevtools(e,t){let i;try{i=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__}catch(o){}if(!i)return o=>{e.setState(o)};let r=i.connect(a.devtoolsOptions(t));r.prefix=t?`${t} > `:\"\";let s=e.setState;return e.setState=o=>{s(o),r.send(`${r.prefix}setState`,e.getState())},r.subscribe(a.devtoolsSubscribe(r,e,s)),r.send(\"setUpStore\",e.getState()),(o,n)=>{s(o);let d=n||`${r.prefix}action`;r.send(d,e.getState())}}static devtoolsOptions(e){return{name:e,actionsBlacklist:[\"audioLevel\",\"playlistProgress\",\"connectionQuality\"]}}static devtoolsSubscribe(e,t,i){return r=>{var s,o,n,d;if(r.type===\"DISPATCH\"&&r.state)[\"JUMP_TO_ACTION\",\"JUMP_TO_STATE\"].includes(r.payload.type)?i(JSON.parse(r.state)):t.setState(JSON.parse(r.state));else if(r.type===\"DISPATCH\"&&((s=r.payload)==null?void 0:s.type)===\"COMMIT\")e.init(t.getState());else if(r.type===\"DISPATCH\"&&((o=r.payload)==null?void 0:o.type)===\"IMPORT_STATE\"){let u=(n=r.payload.nextLiftedState)==null?void 0:n.actionsById;(((d=r.payload.nextLiftedState)==null?void 0:d.computedStates)||[]).forEach(({state:h},T)=>{let g=u[T]||`${e.prefix}setState`;T===0?e.init(h):(i(h),e.send(g,t.getState()))})}}}};var ao=(a,e,t)=>{let i;t.getState(se)===\"Connected\"&&(i=so(a,e,t)),t.subscribe(r=>{[\"Connected\",\"Reconnecting\"].includes(r)?i||(i=so(a,e,t)):[\"Disconnected\",\"Failed\"].includes(r)&&i&&(xn(e,r),i(),i=void 0)},se)},so=(a,e,t)=>{var s,o;let i=Nn(t,e);(s=a.getWebrtcInternals())==null||s.start();let r=(o=a.getWebrtcInternals())==null?void 0:o.onStatsChange(n=>On(e,n,t,a));return()=>{i(),r&&r()}},Nn=(a,e)=>{let t,i,r;return a.getState(Ie)?e.namedSetState(s=>{s.localPeer.id=a.getState(Ie)},\"localpeer-id\"):t=a.subscribe(s=>{s&&e.namedSetState(o=>{o.localPeer.id=s},\"localpeer-id\")},Ie),a.getState(Z)?e.namedSetState(s=>{s.localPeer.videoTrack=a.getState(Z)},\"localpeer-videotrack-id\"):i=a.subscribe(s=>{s&&e.namedSetState(o=>{o.localPeer.videoTrack=s},\"localpeer-videotrack-id\")},Z),a.getState(le)?e.namedSetState(s=>{s.localPeer.audioTrack=a.getState(le)},\"localpeer-audiotrack-id\"):r=a.subscribe(s=>{s&&e.namedSetState(o=>{o.localPeer.audioTrack=s},\"localpeer-audiotrack-id\")},le),()=>{t==null||t(),i==null||i(),r==null||r()}},On=(a,e,t,i)=>{let r=t.getState(N);a.namedSetState(s=>{let o=t.getState(Ie),n={},d=Object.keys(r).filter(p=>r[p].peerId!==o);for(let p of d){let h=e.getRemoteTrackStats(p);h&&(n[p]=h)}rs(s.remoteTrackStats,n);let u={[o]:e.getLocalPeerStats()};rs(s.peerStats,u),Wa(s.localTrackStats,e.getLocalTrackStats(),i.store.getLocalPeerTracks())},\"webrtc-stats\")},xn=(a,e=\"resetState\")=>{a.namedSetState(t=>{Object.assign(t,ni())},e)};var si=class{constructor(e,t){this.hmsStore=e;this.sdk=t;this.store=mt.createNewHMSStore(Fi(\"HMSStatsStore\"),ni),this.getState=this.store.getState,this.subscribe=this.store.subscribe,this.getPublishPeerConnection=()=>new Promise(i=>{var r,s;this.hmsStore.getState(se)===\"Connected\"?i((s=(r=this.sdk)==null?void 0:r.getWebrtcInternals())==null?void 0:s.getPublishPeerConnection()):this.hmsStore.subscribe(o=>{var n,d;o===\"Connected\"&&i((d=(n=this.sdk)==null?void 0:n.getWebrtcInternals())==null?void 0:d.getPublishPeerConnection())},se)}),this.getSubscribePeerConnection=()=>new Promise(i=>{var r,s;this.hmsStore.getState(se)===\"Connected\"?i((s=(r=this.sdk)==null?void 0:r.getWebrtcInternals())==null?void 0:s.getSubscribePeerConnection()):this.hmsStore.subscribe(o=>{var n,d;o===\"Connected\"&&i((d=(n=this.sdk)==null?void 0:n.getWebrtcInternals())==null?void 0:d.getSubscribePeerConnection())},se)}),this.sdk&&ao(this.sdk,this.store,this.hmsStore)}};var Un=a=>a.localPeer.id,Bn=a=>a.localPeer.audioTrack,Vn=a=>a.localPeer.videoTrack,Fn=(a,e)=>e,oo=(a,e)=>e,Gn=a=>a.remoteTrackStats,no=a=>a.peerStats,us=a=>a.localTrackStats,Le=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([no,Un],(a,e)=>a[e]),Wn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Le,a=>{var e;return(e=a==null?void 0:a.subscribe)==null?void 0:e.packetsLost}),$n=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Le,a=>{var e;return(e=a==null?void 0:a.subscribe)==null?void 0:e.jitter}),Kn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Le,a=>{var e;return(e=a==null?void 0:a.publish)==null?void 0:e.bitrate}),qn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Le,a=>{var e;return(e=a==null?void 0:a.subscribe)==null?void 0:e.bitrate}),jn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Le,a=>{var e;return(e=a==null?void 0:a.publish)==null?void 0:e.availableOutgoingBitrate}),Jn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Le,a=>{var e;return(e=a==null?void 0:a.subscribe)==null?void 0:e.availableIncomingBitrate}),Qn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Le,a=>{var e;return(e=a==null?void 0:a.publish)==null?void 0:e.bytesSent}),zn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(Le,a=>{var e;return(e=a==null?void 0:a.subscribe)==null?void 0:e.bytesReceived}),Yn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([no,Fn],(a,e)=>e?a[e]:void 0),Xn=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([Gn,oo],(a,e)=>e?a[e]:void 0),ps=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([us,oo],(a,e)=>e?a[e]:void 0),Zn=H(Yn),ec=H(Xn),tc=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([us,Bn],(a,e)=>{var t;return e?(t=a[e])==null?void 0:t[0]:void 0}),ic=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ps,a=>a==null?void 0:a[0])),rc=(0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)([us,Vn],(a,e)=>{var t;return e?(t=a[e])==null?void 0:t[0]:void 0}),sc=H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ps,a=>a)),ac=a=>H((0,reselect__WEBPACK_IMPORTED_MODULE_0__.createSelector)(ps,e=>{let t=Object.keys(We).find(i=>We[i]===a);return a&&(e==null?void 0:e.find(i=>i.rid===t))||(e==null?void 0:e[0])})),oc={localPeerStats:Le,packetsLost:Wn,jitter:$n,publishBitrate:Kn,subscribeBitrate:qn,availablePublishBitrate:jn,availableSubscribeBitrate:Jn,totalBytesSent:Qn,totalBytesReceived:zn,peerStatsByID:Zn,trackStatsByID:ec,localAudioTrackStatsByID:ic,localVideoTrackStatsByID:sc,localVideoTrackStatsByLayer:ac,localAudioTrackStats:tc,localVideoTrackStats:rc};\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL2htcy12aWRlby1zdG9yZS9kaXN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsd0RBQXdELHdDQUF3Qyx3SkFBd0osK0JBQStCLGtEQUFrRCxtQkFBbUIscUJBQXFCLDZCQUE2QixvREFBb0QsU0FBUyxzQkFBc0IsZUFBZSxTQUFTLHlEQUF5RCw0RUFBNEUsVUFBVSw0QkFBNEIsV0FBVyx3QkFBd0IsOEJBQThCLG1DQUFtQyxVQUFVLElBQUksYUFBYSxTQUFTLE1BQU0sT0FBTyxJQUFJLGNBQWMsU0FBUyxNQUFNLDJEQUEyRCwyQkFBMkIsRUFBRSxvQkFBb0IsWUFBWSw0Q0FBNEMsZ0dBQWdHLHlHQUF5RyxZQUFZLFVBQVUsS0FBSyxrRkFBa0YseUJBQXlCLGtzQkFBa3NCLGdFQUFnRSwyTEFBMkwsa0JBQWtCLGtPQUFrTywwUUFBMFEsRUFBRSwwTUFBME0sRUFBRSxhQUFhLE1BQU0sdUZBQXVGLFNBQVMsV0FBVyxTQUFTLFdBQVcsTUFBTSxZQUFZLE9BQU8sV0FBVyxNQUFNLHVCQUF1QixjQUFjLFNBQVMsVUFBVSxXQUFXLE9BQU8sT0FBTyxZQUFZLGdDQUFnQyxrREFBa0QsUUFBUSxPQUFPLFlBQVksZ0NBQWdDLG1EQUFtRCxXQUFXLE9BQU8sV0FBVyxZQUFZLHVCQUF1QixXQUFXLG1FQUFtRSxVQUFVLDJDQUEyQyxTQUFTLGdEQUFnRCxtQkFBbUIsU0FBUyxlQUFlLGtCQUFrQixXQUFXLFlBQVksb0JBQW9CLG1CQUFtQixZQUFZLE9BQU8sRUFBRSxvQ0FB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UUFBUSxNQUFNLGdFQUFnRSxLQUFLLHdEQUFDLFFBQVEsTUFBTSwyREFBMkQsS0FBSyx3REFBQyxRQUFRLE1BQU0sMERBQTBELEtBQUssd0RBQUMsUUFBUSxNQUFNLDREQUE0RCxLQUFLLHdEQUFDLFFBQVEsTUFBTSwyRUFBMkUsS0FBSyx3REFBQyxRQUFRLE1BQU0sNkVBQTZFLEtBQUssd0RBQUMsUUFBUSxNQUFNLDREQUE0RCxLQUFLLHdEQUFDLFFBQVEsTUFBTSxrRUFBa0UsS0FBSyx3REFBQyxrQ0FBa0Msd0RBQUMsa0NBQWtDLHdEQUFDLG9EQUFvRCx3REFBQyxpQkFBaUIsTUFBTSwyQ0FBMkMsT0FBTyx3REFBQyxnQ0FBZ0Msd0RBQUMsaUJBQWlCLE1BQU0sMkNBQTJDLE9BQU8sd0RBQUMsbUJBQW1CLHdEQUFDLFFBQVEseUNBQXlDLHVFQUF1RSxPQUFPLDRWQUErd0o7QUFDMXNxUSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQDEwMG1zbGl2ZS9obXMtdmlkZW8tc3RvcmUvZGlzdC9pbmRleC5qcz9jN2NjIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBjbz1PYmplY3QuZGVmaW5lUHJvcGVydHksbG89T2JqZWN0LmRlZmluZVByb3BlcnRpZXM7dmFyIHVvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzO3ZhciBhaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLHBvPU9iamVjdC5nZXRQcm90b3R5cGVPZixncz1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFRzPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsaG89UmVmbGVjdC5nZXQ7dmFyIFNzPShhLGUsdCk9PmUgaW4gYT9jbyhhLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTphW2VdPXQsbT0oYSxlKT0+e2Zvcih2YXIgdCBpbiBlfHwoZT17fSkpZ3MuY2FsbChlLHQpJiZTcyhhLHQsZVt0XSk7aWYoYWkpZm9yKHZhciB0IG9mIGFpKGUpKVRzLmNhbGwoZSx0KSYmU3MoYSx0LGVbdF0pO3JldHVybiBhfSxNPShhLGUpPT5sbyhhLHVvKGUpKTt2YXIga3I9KGEsZSk9Pnt2YXIgdD17fTtmb3IodmFyIGkgaW4gYSlncy5jYWxsKGEsaSkmJmUuaW5kZXhPZihpKTwwJiYodFtpXT1hW2ldKTtpZihhIT1udWxsJiZhaSlmb3IodmFyIGkgb2YgYWkoYSkpZS5pbmRleE9mKGkpPDAmJlRzLmNhbGwoYSxpKSYmKHRbaV09YVtpXSk7cmV0dXJuIHR9O3ZhciBtbz0oYSxlKT0+KCk9PihlfHxhKChlPXtleHBvcnRzOnt9fSkuZXhwb3J0cyxlKSxlLmV4cG9ydHMpO3ZhciBuZT0oYSxlLHQpPT5obyhwbyhhKSx0LGUpO3ZhciBjPShhLGUsdCk9Pm5ldyBQcm9taXNlKChpLHIpPT57dmFyIHM9ZD0+e3RyeXtuKHQubmV4dChkKSl9Y2F0Y2godSl7cih1KX19LG89ZD0+e3RyeXtuKHQudGhyb3coZCkpfWNhdGNoKHUpe3IodSl9fSxuPWQ9PmQuZG9uZT9pKGQudmFsdWUpOlByb21pc2UucmVzb2x2ZShkLnZhbHVlKS50aGVuKHMsbyk7bigodD10LmFwcGx5KGEsZSkpLm5leHQoKSl9KTt2YXIgSXI9bW8oKEpjLEVvKT0+e0VvLmV4cG9ydHM9e3ZlcnNpb246XCIwLjEyLjM2XCIsbGljZW5zZTpcIk1JVFwiLHJlcG9zaXRvcnk6e3R5cGU6XCJnaXRcIix1cmw6XCJodHRwczovL2dpdGh1Yi5jb20vMTAwbXNsaXZlL3dlYi1zZGtzLmdpdFwiLGRpcmVjdG9yeTpcInBhY2thZ2VzL2htcy12aWRlby1zdG9yZVwifSxtYWluOlwiZGlzdC9pbmRleC5janMuanNcIixtb2R1bGU6XCJkaXN0L2luZGV4LmpzXCIsdHlwaW5nczpcImRpc3QvaW5kZXguZC50c1wiLGZpbGVzOltcImRpc3RcIixcInNyY1wiXSxlbmdpbmVzOntub2RlOlwiPj0xMlwifSxleHBvcnRzOntcIi5cIjp7cmVxdWlyZTpcIi4vZGlzdC9pbmRleC5janMuanNcIixpbXBvcnQ6XCIuL2Rpc3QvaW5kZXguanNcIixkZWZhdWx0OlwiLi9kaXN0L2luZGV4LmpzXCJ9fSxzaWRlRWZmZWN0czohMSxzY3JpcHRzOntwcmVzdGFydDpcInJtIC1yZiBkaXN0ICYmIHlhcm4gdHlwZXM6YnVpbGRcIixzdGFydDonY29uY3VycmVudGx5IFwieWFybiBkZXZcIiBcInlhcm4gdHlwZXNcIicsZGV2Olwibm9kZSAuLi8uLi9zY3JpcHRzL2RldlwiLFwiYnVpbGQ6b25seVwiOlwibm9kZSAuLi8uLi9zY3JpcHRzL2J1aWxkXCIsYnVpbGQ6XCJ5YXJuIGJ1aWxkOm9ubHkgJiYgeWFybiB0eXBlczpidWlsZFwiLHR5cGVzOlwidHNjIC13XCIsXCJ0eXBlczpidWlsZFwiOlwidHNjIC1wIHRzY29uZmlnLmpzb25cIixmb3JtYXQ6XCJwcmV0dGllciAtLXdyaXRlIHNyYy8qKi8qLnRzXCIsdGVzdDpcImplc3QgLS1tYXhXb3JrZXJzPTFcIixcInRlc3Q6d2F0Y2hcIjpcImplc3QgLS13YXRjaFwiLFwidGVzdDpjb3ZlcmFnZVwiOlwiamVzdCAtLWNvdmVyYWdlXCIsbGludDpcImVzbGludCAtYyAuLi8uLi8uZXNsaW50cmMgLlwiLFwibGludDpmaXhcIjpcInlhcm4gbGludCAtLWZpeFwiLHByZXBhcmU6XCJ5YXJuIGJ1aWxkXCIsc2l6ZTpcInNpemUtbGltaXRcIixhbmFseXplOlwic2l6ZS1saW1pdCAtLXdoeVwiLGRvY3M6XCJybSAtcmYgLi9kb2NzICYmIHR5cGVkb2MgJiYgcm0gLWYgLi9kb2NzL1JFQURNRS5tZCAmJiBta2RpciAuL2RvY3MvaG9tZSAmJm12IC4vZG9jcy9tb2R1bGVzLm1kIC4vZG9jcy9ob21lL2NvbnRlbnQubWQgJiYgbm9kZSAuLi8uLi9zY3JpcHRzL2RvY3Mtc3RvcmUgJiYgbnB4IHByZXR0aWVyIC0td3JpdGUgJy4vZG9jcy8qKi8qJ1wifSxuYW1lOlwiQDEwMG1zbGl2ZS9obXMtdmlkZW8tc3RvcmVcIixhdXRob3I6XCIxMDBtc1wiLGRlcGVuZGVuY2llczp7ZXZlbnRlbWl0dGVyMjpcIl42LjQuOVwiLGltbWVyOlwiXjkuMC42XCIsXCJsb2Rhc2guaXNlcXVhbFwiOlwiXjQuNS4wXCIscmVzZWxlY3Q6XCI0LjAuMFwiLFwic2RwLXRyYW5zZm9ybVwiOlwiXjIuMTQuMVwiLFwidWEtcGFyc2VyLWpzXCI6XCJeMS4wLjFcIix1dWlkOlwiXjguMy4yXCIsXCJ3ZWJydGMtYWRhcHRlclwiOlwiXjguMC4wXCIsenVzdGFuZDpcIjMuNS43XCJ9LGRldkRlcGVuZGVuY2llczp7XCJAdHlwZXMvZG9tLXNjcmVlbi13YWtlLWxvY2tcIjpcIl4xLjAuMVwiLFwiQHR5cGVzL2xvZGFzaC5pc2VxdWFsXCI6XCJeNC41LjhcIixcIkB0eXBlcy9zZHAtdHJhbnNmb3JtXCI6XCJeMi40LjRcIixcIkB0eXBlcy91YS1wYXJzZXItanNcIjpcIl4wLjcuMzZcIixcIkB0eXBlcy91dWlkXCI6XCJeOC4zLjBcIixcImplc3QtY2FudmFzLW1vY2tcIjpcIl4yLjMuMVwiLFwianNkb20td29ya2VyXCI6XCJeMC4zLjBcIix0c2xpYjpcIl4yLjIuMFwifSxkZXNjcmlwdGlvbjpcIkAxMDBtc2xpdmUgQ29yZSBTREsgd2hpY2ggYWJzdHJhY3RzIHRoZSBjb21wbGV4aXRpZXMgb2Ygd2ViUlRDIHdoaWxlIHByb3ZpZGluZyBhIHJlYWN0aXZlIHN0b3JlIGZvciBkYXRhIG1hbmFnZW1lbnQgd2l0aCBhIHVuaWRpcmVjdGlvbmFsIGRhdGEgZmxvd1wiLGtleXdvcmRzOltcInZpZGVvXCIsXCJ3ZWJydGNcIixcImNvbmZlcmVuY2luZ1wiLFwiMTAwbXNcIl0sZ2l0SGVhZDpcIjc3N2ZiZTQzMjM1YTM0ODhiMzEwY2QwYTM5MGE3ZTM2MTUwZjYyMjlcIn19KTt2YXIgRXI9KG49PihuLkRpc2Nvbm5lY3RlZD1cIkRpc2Nvbm5lY3RlZFwiLG4uUHJldmlldz1cIlByZXZpZXdcIixuLkNvbm5lY3Rpbmc9XCJDb25uZWN0aW5nXCIsbi5Db25uZWN0ZWQ9XCJDb25uZWN0ZWRcIixuLlJlY29ubmVjdGluZz1cIlJlY29ubmVjdGluZ1wiLG4uRGlzY29ubmVjdGluZz1cIkRpc2Nvbm5lY3RpbmdcIixuLkZhaWxlZD1cIkZhaWxlZFwiLG4pKShFcnx8e30pO3ZhciBvaT0oKT0+KHtyb29tOntpZDpcIlwiLGlzQ29ubmVjdGVkOiExLG5hbWU6XCJcIixwZWVyczpbXSxsb2NhbFBlZXI6XCJcIixyb29tU3RhdGU6XCJEaXNjb25uZWN0ZWRcIixyZWNvcmRpbmc6e2Jyb3dzZXI6e3J1bm5pbmc6ITF9LHNlcnZlcjp7cnVubmluZzohMX0saGxzOntydW5uaW5nOiExfX0scnRtcDp7cnVubmluZzohMX0saGxzOntydW5uaW5nOiExLHZhcmlhbnRzOltdfSxzZXNzaW9uSWQ6XCJcIn0scGVlcnM6e30sdHJhY2tzOnt9LHBsYXlsaXN0OnthdWRpbzp7bGlzdDp7fSxzZWxlY3Rpb246e2lkOlwiXCIsaGFzUHJldmlvdXM6ITEsaGFzTmV4dDohMX0scHJvZ3Jlc3M6MCx2b2x1bWU6MCxjdXJyZW50VGltZTowLHBsYXliYWNrUmF0ZToxfSx2aWRlbzp7bGlzdDp7fSxzZWxlY3Rpb246e2lkOlwiXCIsaGFzUHJldmlvdXM6ITEsaGFzTmV4dDohMX0scHJvZ3Jlc3M6MCx2b2x1bWU6MCxjdXJyZW50VGltZTowLHBsYXliYWNrUmF0ZToxfX0sbWVzc2FnZXM6e2J5SUQ6e30sYWxsSURzOltdfSxzcGVha2Vyczp7fSxjb25uZWN0aW9uUXVhbGl0aWVzOnt9LHNldHRpbmdzOnthdWRpb0lucHV0RGV2aWNlSWQ6XCJcIixhdWRpb091dHB1dERldmljZUlkOlwiXCIsdmlkZW9JbnB1dERldmljZUlkOlwiXCJ9LGRldmljZXM6e2F1ZGlvSW5wdXQ6W10sYXVkaW9PdXRwdXQ6W10sdmlkZW9JbnB1dDpbXX0scm9sZXM6e30scm9sZUNoYW5nZVJlcXVlc3RzOltdLGVycm9yczpbXSxzZXNzaW9uU3RvcmU6e30sdGVtcGxhdGVBcHBEYXRhOnt9LHBvbGxzOnt9LHdoaXRlYm9hcmRzOnt9LGhpZGVMb2NhbFBlZXI6ITF9KSxuaT0oKT0+KHtwZWVyU3RhdHM6e30scmVtb3RlVHJhY2tTdGF0czp7fSxsb2NhbFRyYWNrU3RhdHM6e30sbG9jYWxQZWVyOntpZDpcIlwifX0pO3ZhciBTbz0oZT0+KGUuQ0hBVD1cImNoYXRcIixlKSkoU298fHt9KTt2YXIgZnM9KHQ9Pih0LklORk89XCJpbmZvXCIsdC5FUlJPUj1cImVycm9yXCIsdCkpKGZzfHx7fSksUHI9KHc9Pih3LlBFRVJfSk9JTkVEPVwiUEVFUl9KT0lORURcIix3LlBFRVJfTEVGVD1cIlBFRVJfTEVGVFwiLHcuUEVFUl9MSVNUPVwiUEVFUl9MSVNUXCIsdy5ORVdfTUVTU0FHRT1cIk5FV19NRVNTQUdFXCIsdy5FUlJPUj1cIkVSUk9SXCIsdy5SRUNPTk5FQ1RJTkc9XCJSRUNPTk5FQ1RJTkdcIix3LlJFQ09OTkVDVEVEPVwiUkVDT05ORUNURURcIix3LlRSQUNLX0FEREVEPVwiVFJBQ0tfQURERURcIix3LlRSQUNLX1JFTU9WRUQ9XCJUUkFDS19SRU1PVkVEXCIsdy5UUkFDS19NVVRFRD1cIlRSQUNLX01VVEVEXCIsdy5UUkFDS19VTk1VVEVEPVwiVFJBQ0tfVU5NVVRFRFwiLHcuVFJBQ0tfREVHUkFERUQ9XCJUUkFDS19ERUdSQURFRFwiLHcuVFJBQ0tfUkVTVE9SRUQ9XCJUUkFDS19SRVNUT1JFRFwiLHcuVFJBQ0tfREVTQ1JJUFRJT05fQ0hBTkdFRD1cIlRSQUNLX0RFU0NSSVBUSU9OX0NIQU5HRURcIix3LlJPTEVfVVBEQVRFRD1cIlJPTEVfVVBEQVRFRFwiLHcuQ0hBTkdFX1RSQUNLX1NUQVRFX1JFUVVFU1Q9XCJDSEFOR0VfVFJBQ0tfU1RBVEVfUkVRVUVTVFwiLHcuQ0hBTkdFX01VTFRJX1RSQUNLX1NUQVRFX1JFUVVFU1Q9XCJDSEFOR0VfTVVMVElfVFJBQ0tfU1RBVEVfUkVRVUVTVFwiLHcuUk9PTV9FTkRFRD1cIlJPT01fRU5ERURcIix3LlJFTU9WRURfRlJPTV9ST09NPVwiUkVNT1ZFRF9GUk9NX1JPT01cIix3LkRFVklDRV9DSEFOR0VfVVBEQVRFPVwiREVWSUNFX0NIQU5HRV9VUERBVEVcIix3LlBMQVlMSVNUX1RSQUNLX0VOREVEPVwiUExBWUxJU1RfVFJBQ0tfRU5ERURcIix3Lk5BTUVfVVBEQVRFRD1cIk5BTUVfVVBEQVRFRFwiLHcuTUVUQURBVEFfVVBEQVRFRD1cIk1FVEFEQVRBX1VQREFURURcIix3LlBPTExfQ1JFQVRFRD1cIlBPTExfQ1JFQVRFRFwiLHcuUE9MTF9TVEFSVEVEPVwiUE9MTF9TVEFSVEVEXCIsdy5QT0xMX1NUT1BQRUQ9XCJQT0xMX1NUT1BQRURcIix3LlBPTExfVk9URVNfVVBEQVRFRD1cIlBPTExfVk9URVNfVVBEQVRFRFwiLHcuUE9MTFNfTElTVD1cIlBPTExTX0xJU1RcIix3LkhBTkRfUkFJU0VfQ0hBTkdFRD1cIkhBTkRfUkFJU0VfQ0hBTkdFRFwiLHcuVFJBTlNDUklQVElPTl9TVEFURV9VUERBVEVEPVwiVFJBTlNDUklQVElPTl9TVEFURV9VUERBVEVEXCIsdykpKFByfHx7fSk7dmFyIHZzPSh0PT4odC5hdWRpbz1cImF1ZGlvXCIsdC52aWRlbz1cInZpZGVvXCIsdCkpKHZzfHx7fSk7aW1wb3J0e2NyZWF0ZVNlbGVjdG9yIGFzIEF9ZnJvbVwicmVzZWxlY3RcIjtmdW5jdGlvbiBGZShhLGUpe2xldCB0LGk7aWYoZSlmb3IobGV0IHIgb2YgZS5hdXhpbGlhcnlUcmFja3Mpe2xldCBzPWFbcl07Z28ocykmJihpPWd0KHMpP3M6aSx0PVR0KHMpP3M6dCl9cmV0dXJue3ZpZGVvOnQsYXVkaW86aX19ZnVuY3Rpb24gZ3QoYSl7cmV0dXJuIGEmJmEudHlwZT09PVwiYXVkaW9cIn1mdW5jdGlvbiBUdChhKXtyZXR1cm4gYSYmYS50eXBlPT09XCJ2aWRlb1wifWZ1bmN0aW9uIGdvKGEpe3JldHVybiBhJiZhLnNvdXJjZT09PVwic2NyZWVuXCJ9ZnVuY3Rpb24gY2koYSl7cmV0dXJuIGEmJmEuc291cmNlPT09XCJhdWRpb3BsYXlsaXN0XCJ9ZnVuY3Rpb24gZnQoYSl7cmV0dXJuIGEmJmEuc291cmNlPT09XCJ2aWRlb3BsYXlsaXN0XCJ9ZnVuY3Rpb24gTXMoYSl7cmV0dXJuIGE/ISEoYSE9bnVsbCYmYS5kZWdyYWRlZCk6ITF9ZnVuY3Rpb24gemUoYSxlKXtyZXR1cm4gZSYmYS50cmFja3NbZV0/YS50cmFja3NbZV0uZW5hYmxlZDohMX1mdW5jdGlvbiB5cyhhLGUpe3JldHVybiBlJiZhLnRyYWNrc1tlXT9hLnRyYWNrc1tlXS5kaXNwbGF5RW5hYmxlZDohMX1mdW5jdGlvbiB2dChhKXt2YXIgcjtsZXQgZT0hMSx0PSExLGk9ITE7cmV0dXJuKHI9YT09bnVsbD92b2lkIDA6YS5wdWJsaXNoUGFyYW1zKSE9bnVsbCYmci5hbGxvd2VkJiYoZT1hLnB1Ymxpc2hQYXJhbXMuYWxsb3dlZC5pbmNsdWRlcyhcInZpZGVvXCIpLHQ9YS5wdWJsaXNoUGFyYW1zLmFsbG93ZWQuaW5jbHVkZXMoXCJhdWRpb1wiKSxpPWEucHVibGlzaFBhcmFtcy5hbGxvd2VkLmluY2x1ZGVzKFwic2NyZWVuXCIpKSx7dmlkZW86ZSxhdWRpbzp0LHNjcmVlbjppfX12YXIga3M9KGQ9PihkW2QuVkVSQk9TRT0wXT1cIlZFUkJPU0VcIixkW2QuREVCVUc9MV09XCJERUJVR1wiLGRbZC5JTkZPPTJdPVwiSU5GT1wiLGRbZC5XQVJOPTNdPVwiV0FSTlwiLGRbZC5USU1FPTRdPVwiVElNRVwiLGRbZC5USU1FRU5EPTVdPVwiVElNRUVORFwiLGRbZC5FUlJPUj02XT1cIkVSUk9SXCIsZFtkLk5PTkU9N109XCJOT05FXCIsZCkpKGtzfHx7fSksVG89dHlwZW9mIHdpbmRvdyE9XCJ1bmRlZmluZWRcIiYmdHlwZW9mIHdpbmRvdy5leHBlY3QhPVwidW5kZWZpbmVkXCIsbD1jbGFzc3tzdGF0aWMgdihlLC4uLnQpe3RoaXMubG9nKDAsZSwuLi50KX1zdGF0aWMgZChlLC4uLnQpe3RoaXMubG9nKDEsZSwuLi50KX1zdGF0aWMgaShlLC4uLnQpe3RoaXMubG9nKDIsZSwuLi50KX1zdGF0aWMgdyhlLC4uLnQpe3RoaXMubG9nKDMsZSwuLi50KX1zdGF0aWMgZShlLC4uLnQpe3RoaXMubG9nKDYsZSwuLi50KX1zdGF0aWMgdGltZShlKXt0aGlzLmxvZyg0LFwiW0hNU1BlcmZvcm1hbmNlVGltaW5nXVwiLGUpfXN0YXRpYyB0aW1lRW5kKGUpe3RoaXMubG9nKDUsXCJbSE1TUGVyZm9ybWFuY2VUaW1pbmddXCIsZSxlKX1zdGF0aWMgY2xlYW51cCgpe3BlcmZvcm1hbmNlLmNsZWFyTWFya3MoKSxwZXJmb3JtYW5jZS5jbGVhck1lYXN1cmVzKCl9c3RhdGljIGxvZyhlLHQsLi4uaSl7aWYoISh0aGlzLmxldmVsLnZhbHVlT2YoKT5lLnZhbHVlT2YoKSkpc3dpdGNoKGUpe2Nhc2UgMDp7Y29uc29sZS5sb2codCwuLi5pKTticmVha31jYXNlIDE6e2NvbnNvbGUuZGVidWcodCwuLi5pKTticmVha31jYXNlIDI6e2NvbnNvbGUuaW5mbyh0LC4uLmkpO2JyZWFrfWNhc2UgMzp7Y29uc29sZS53YXJuKHQsLi4uaSk7YnJlYWt9Y2FzZSA2Ontjb25zb2xlLmVycm9yKHQsLi4uaSk7YnJlYWt9Y2FzZSA0OntwZXJmb3JtYW5jZS5tYXJrKGlbMF0pO2JyZWFrfWNhc2UgNTp7bGV0IHI9aVswXTt0cnl7bGV0IHM9cGVyZm9ybWFuY2UubWVhc3VyZShyLHIpO3RoaXMubG9nKDEsdCxyLHM9PW51bGw/dm9pZCAwOnMuZHVyYXRpb24pLHBlcmZvcm1hbmNlLmNsZWFyTWFya3MocikscGVyZm9ybWFuY2UuY2xlYXJNZWFzdXJlcyhyKX1jYXRjaChzKXt0aGlzLmxvZygxLHQscixzKX1icmVha319fX07bC5sZXZlbD1Ubz83OjA7dmFyIFllPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMudHJhY2tzPW5ldyBBcnJheTt0aGlzLm5hdGl2ZVN0cmVhbT1lLHRoaXMuaWQ9ZS5pZH11cGRhdGVJZChlKXt0aGlzLmlkPWV9fTtpbXBvcnR7VUFQYXJzZXIgYXMgZm99ZnJvbVwidWEtcGFyc2VyLWpzXCI7dmFyIFRlPW5ldyBmbyxVPXR5cGVvZiB3aW5kb3chPVwidW5kZWZpbmVkXCIsRXMsR2U9dHlwZW9mIHdpbmRvdz09XCJ1bmRlZmluZWRcIiYmISgoRXM9VGUuZ2V0QnJvd3NlcigpLm5hbWUpIT1udWxsJiZFcy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiZWxlY3Ryb25cIikpO3ZhciB2bz0oKT0+IUdlLFRjPXZvKCksTXQ9KCk9PlRlLmdldERldmljZSgpLnR5cGU9PT1cIm1vYmlsZVwiLFJzPSgpPT50eXBlb2YgZG9jdW1lbnQhPVwidW5kZWZpbmVkXCImJmRvY3VtZW50LmhpZGRlbixIcz0oKT0+e3ZhciBhO3JldHVybigoYT1UZS5nZXRPUygpLm5hbWUpPT1udWxsP3ZvaWQgMDphLnRvTG93ZXJDYXNlKCkpPT09XCJpb3NcIn0sUHMsYnMsQ3M9KGJzPShQcz1UZS5nZXRCcm93c2VyKCkpPT1udWxsP3ZvaWQgMDpQcy5uYW1lKT09bnVsbD92b2lkIDA6YnMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInNhZmFyaVwiKSxBcyxJcyxkaT0oKElzPShBcz1UZS5nZXRCcm93c2VyKCkpPT1udWxsP3ZvaWQgMDpBcy5uYW1lKT09bnVsbD92b2lkIDA6SXMudG9Mb3dlckNhc2UoKSk9PT1cImZpcmVmb3hcIjtpbXBvcnR7djQgYXMgUG99ZnJvbVwidXVpZFwiO3ZhciBMcz0oaT0+KGkuQ1VTVE9NPVwiQ1VTVE9NXCIsaS5MT0NBTD1cIkxPQ0FMXCIsaS5ITVM9XCJITVNcIixpKSkoTHN8fHt9KTtmdW5jdGlvbiBNbygpe2lmKFUmJndpbmRvdyl7bGV0IGE9d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lO3JldHVybiBhPT09XCJsb2NhbGhvc3RcInx8YT09PVwiMTI3LjAuMC4xXCI/XCJMT0NBTFwiOmEuaW5jbHVkZXMoXCJhcHAuMTAwbXMubGl2ZVwiKT9cIkhNU1wiOlwiQ1VTVE9NXCJ9cmV0dXJuXCJDVVNUT01cIn12YXIgWGU9TW8oKTtpbXBvcnR7djQgYXMga299ZnJvbVwidXVpZFwiO3ZhciBQPXtXZWJTb2NrZXRDb25uZWN0aW9uRXJyb3JzOntGQUlMRURfVE9fQ09OTkVDVDoxZTMsV0VCU09DS0VUX0NPTk5FQ1RJT05fTE9TVDoxMDAzLEFCTk9STUFMX0NMT1NFOjEwMDZ9LEFQSUVycm9yczp7U0VSVkVSX0VSUk9SUzoyZTMsSU5JVF9DT05GSUdfTk9UX0FWQUlMQUJMRToyMDAyLEVORFBPSU5UX1VOUkVBQ0hBQkxFOjIwMDMsSU5WQUxJRF9UT0tFTl9GT1JNQVQ6MjAwNH0sVHJhY2tzRXJyb3JzOntHRU5FUklDX1RSQUNLOjNlMyxDQU5UX0FDQ0VTU19DQVBUVVJFX0RFVklDRTozMDAxLERFVklDRV9OT1RfQVZBSUxBQkxFOjMwMDIsREVWSUNFX0lOX1VTRTozMDAzLERFVklDRV9MT1NUX01JRFdBWTozMDA0LE5PVEhJTkdfVE9fUkVUVVJOOjMwMDUsSU5WQUxJRF9WSURFT19TRVRUSU5HUzozMDA2LENPREVDX0NIQU5HRV9OT1RfUEVSTUlUVEVEOjMwMDcsQVVUT1BMQVlfRVJST1I6MzAwOCxPVkVSX0NPTlNUUkFJTkVEOjMwMDksTk9fQVVESU9fREVURUNURUQ6MzAxMCxTWVNURU1fREVOSUVEX1BFUk1JU1NJT046MzAxMSxDVVJSRU5UX1RBQl9OT1RfU0hBUkVEOjMwMTIsQVVESU9fUExBWUJBQ0tfRVJST1I6MzAxMyxTRUxFQ1RFRF9ERVZJQ0VfTUlTU0lORzozMDE0LE5PX0RBVEE6MzAxNX0sV2VicnRjRXJyb3JzOntDUkVBVEVfT0ZGRVJfRkFJTEVEOjQwMDEsQ1JFQVRFX0FOU1dFUl9GQUlMRUQ6NDAwMixTRVRfTE9DQUxfREVTQ1JJUFRJT05fRkFJTEVEOjQwMDMsU0VUX1JFTU9URV9ERVNDUklQVElPTl9GQUlMRUQ6NDAwNCxJQ0VfRkFJTFVSRTo0MDA1LElDRV9ESVNDT05ORUNURUQ6NDAwNixTVEFUU19GQUlMRUQ6NDAwN30sV2Vic29ja2V0TWV0aG9kRXJyb3JzOntTRVJWRVJfRVJST1JTOjVlMyxBTFJFQURZX0pPSU5FRDo1MDAxLENBTk5PVF9KT0lOX1BSRVZJRVdfSU5fUFJPR1JFU1M6NTAwMn0sR2VuZXJpY0Vycm9yczp7Tk9UX0NPTk5FQ1RFRDo2ZTMsU0lHTkFMTElORzo2MDAxLFVOS05PV046NjAwMixOT1RfUkVBRFk6NjAwMyxKU09OX1BBUlNJTkdfRkFJTEVEOjYwMDQsVFJBQ0tfTUVUQURBVEFfTUlTU0lORzo2MDA1LFJUQ19UUkFDS19NSVNTSU5HOjYwMDYsUEVFUl9NRVRBREFUQV9NSVNTSU5HOjYwMDcsSU5WQUxJRF9ST0xFOjYwMDgsUFJFVklFV19JTl9QUk9HUkVTUzo2MDA5LE1JU1NJTkdfTUVESUFERVZJQ0VTOjYwMTAsTUlTU0lOR19SVENQRUVSQ09OTkVDVElPTjo2MDExLExPQ0FMX1NUT1JBR0VfQUNDRVNTX0RFTklFRDo2MDEyLFZBTElEQVRJT05fRkFJTEVEOjYwMTN9LFBsYXlsaXN0RXJyb3JzOntOT19FTlRSWV9UT19QTEFZOjgwMDEsTk9fRU5UUllfSVNfUExBWUlORzo4MDAyfX07dmFyIGs9Y2xhc3MgYSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQsaSxyLHMsbyxuPSExKXtzdXBlcihzKTt0aGlzLmNvZGU9dDt0aGlzLm5hbWU9aTt0aGlzLm1lc3NhZ2U9czt0aGlzLmRlc2NyaXB0aW9uPW87dGhpcy5pc1Rlcm1pbmFsPW47T2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsYS5wcm90b3R5cGUpLHRoaXMuYWN0aW9uPXIudG9TdHJpbmcoKX10b0FuYWx5dGljc1Byb3BlcnRpZXMoKXtyZXR1cm57ZXJyb3JfbmFtZTp0aGlzLm5hbWUsZXJyb3JfY29kZTp0aGlzLmNvZGUsZXJyb3JfbWVzc2FnZTp0aGlzLm1lc3NhZ2UsZXJyb3JfZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixhY3Rpb246dGhpcy5hY3Rpb24saXNfdGVybWluYWw6dGhpcy5pc1Rlcm1pbmFsfX1hZGROYXRpdmVFcnJvcih0KXt0aGlzLm5hdGl2ZUVycm9yPXR9dG9TdHJpbmcoKXt2YXIgdDtyZXR1cm5ge1xuICAgICAgICBjb2RlOiAke3RoaXMuY29kZX07XG4gICAgICAgIG5hbWU6ICR7dGhpcy5uYW1lfTtcbiAgICAgICAgYWN0aW9uOiAke3RoaXMuYWN0aW9ufTtcbiAgICAgICAgbWVzc2FnZTogJHt0aGlzLm1lc3NhZ2V9O1xuICAgICAgICBkZXNjcmlwdGlvbjogJHt0aGlzLmRlc2NyaXB0aW9ufTtcbiAgICAgICAgaXNUZXJtaW5hbDogJHt0aGlzLmlzVGVybWluYWx9O1xuICAgICAgICBuYXRpdmVFcnJvcjogJHsodD10aGlzLm5hdGl2ZUVycm9yKT09bnVsbD92b2lkIDA6dC5tZXNzYWdlfTtcbiAgICAgIH1gfX07dmFyIFc9Y2xhc3MgZXh0ZW5kcyBre2NvbnN0cnVjdG9yKHQsaSxyLHMsbyxuKXtzdXBlcih0LGkscixzLG8sITEpO3RoaXMuY29kZT10O3RoaXMubmFtZT1pO3RoaXMubWVzc2FnZT1zO3RoaXMuZGVzY3JpcHRpb249bzt0aGlzLnRyYWNrVHlwZT1ufXRvQW5hbHl0aWNzUHJvcGVydGllcygpe3JldHVybiBNKG0oe30sc3VwZXIudG9BbmFseXRpY3NQcm9wZXJ0aWVzKCkpLHt0cmFja190eXBlOnRoaXMudHJhY2tUeXBlfSl9dG9TdHJpbmcoKXt2YXIgdDtyZXR1cm5ge1xuICAgICAgICBjb2RlOiAke3RoaXMuY29kZX07XG4gICAgICAgIG5hbWU6ICR7dGhpcy5uYW1lfTtcbiAgICAgICAgYWN0aW9uOiAke3RoaXMuYWN0aW9ufTtcbiAgICAgICAgbWVzc2FnZTogJHt0aGlzLm1lc3NhZ2V9O1xuICAgICAgICBkZXNjcmlwdGlvbjogJHt0aGlzLmRlc2NyaXB0aW9ufTtcbiAgICAgICAgaXNUZXJtaW5hbDogJHt0aGlzLmlzVGVybWluYWx9O1xuICAgICAgICBuYXRpdmVFcnJvcjogJHsodD10aGlzLm5hdGl2ZUVycm9yKT09bnVsbD92b2lkIDA6dC5tZXNzYWdlfTtcbiAgICAgICAgdHJhY2tUeXBlOiAke3RoaXMudHJhY2tUeXBlfTtcbiAgICAgIH1gfX07dmFyIERzPShyPT4oci5BVURJTz1cImF1ZGlvXCIsci5WSURFTz1cInZpZGVvXCIsci5BVURJT19WSURFTz1cImF1ZGlvLCB2aWRlb1wiLHIuU0NSRUVOPVwic2NyZWVuXCIscikpKERzfHx7fSk7ZnVuY3Rpb24gYnIoYSl7c3dpdGNoKGEpe2Nhc2VcImpvaW5cIjpyZXR1cm5cIkpPSU5cIjtjYXNlXCJvZmZlclwiOnJldHVyblwiUFVCTElTSFwiO2Nhc2VcImFuc3dlclwiOnJldHVyblwiU1VCU0NSSUJFXCI7Y2FzZVwidHJhY2stdXBkYXRlXCI6cmV0dXJuXCJUUkFDS1wiO2RlZmF1bHQ6cmV0dXJuXCJOT05FXCJ9fXZhciB5bz1bXCJqb2luXCIsXCJvZmZlclwiLFwiYW5zd2VyXCIsXCJ0cmlja2xlXCIsXCJvbi1lcnJvclwiLFwiSk9JTlwiXSxTPXtXZWJTb2NrZXRDb25uZWN0aW9uRXJyb3JzOntGYWlsZWRUb0Nvbm5lY3QoYSxlPVwiXCIpe3JldHVybiBuZXcgayhQLldlYlNvY2tldENvbm5lY3Rpb25FcnJvcnMuRkFJTEVEX1RPX0NPTk5FQ1QsXCJXZWJzb2NrZXRGYWlsZWRUb0Nvbm5lY3RcIixhLGBbV1NdOiAke2V9YCxgW1dTXTogJHtlfWApfSxXZWJTb2NrZXRDb25uZWN0aW9uTG9zdChhLGU9XCJcIil7cmV0dXJuIG5ldyBrKFAuV2ViU29ja2V0Q29ubmVjdGlvbkVycm9ycy5XRUJTT0NLRVRfQ09OTkVDVElPTl9MT1NULFwiV2ViU29ja2V0Q29ubmVjdGlvbkxvc3RcIixhLFwiTmV0d29yayBjb25uZWN0aW9uIGxvc3RcIixlKX0sQWJub3JtYWxDbG9zZShhLGU9XCJcIil7cmV0dXJuIG5ldyBrKFAuV2ViU29ja2V0Q29ubmVjdGlvbkVycm9ycy5BQk5PUk1BTF9DTE9TRSxcIldlYlNvY2tldEFibm9ybWFsQ2xvc2VcIixhLFwiV2Vic29ja2V0IGNsb3NlZCBhYm5vcm1hbGx5XCIsZSl9fSxBUElFcnJvcnM6e1NlcnZlckVycm9ycyhhLGUsdD1cIlwiLGk9ITApe3JldHVybiBuZXcgayhhLFwiU2VydmVyRXJyb3JzXCIsZSxgWyR7ZX1dOiBTZXJ2ZXIgZXJyb3IgJHt0fWAsdCxpKX0sRW5kcG9pbnRVbnJlYWNoYWJsZShhLGU9XCJcIil7cmV0dXJuIG5ldyBrKFAuQVBJRXJyb3JzLkVORFBPSU5UX1VOUkVBQ0hBQkxFLFwiRW5kcG9pbnRVbnJlYWNoYWJsZVwiLGEsYEVuZHBvaW50IGlzIG5vdCByZWFjaGFibGUgLSAke2V9YCxlKX0sSW52YWxpZFRva2VuRm9ybWF0KGEsZT1cIlwiKXtyZXR1cm4gbmV3IGsoUC5BUElFcnJvcnMuSU5WQUxJRF9UT0tFTl9GT1JNQVQsXCJJbnZhbGlkVG9rZW5Gb3JtYXRcIixhLGBUb2tlbiBpcyBub3QgaW4gcHJvcGVyIEpXVCBmb3JtYXQgLSAke2V9YCxlLCEwKX0sSW5pdENvbmZpZ05vdEF2YWlsYWJsZShhLGU9XCJcIil7cmV0dXJuIG5ldyBrKFAuQVBJRXJyb3JzLklOSVRfQ09ORklHX05PVF9BVkFJTEFCTEUsXCJJbml0RXJyb3JcIixhLGBbSU5JVF06ICR7ZX1gLGBbSU5JVF06ICR7ZX1gKX19LFRyYWNrc0Vycm9yczp7R2VuZXJpY1RyYWNrKGEsZT1cIlwiKXtyZXR1cm4gbmV3IFcoUC5UcmFja3NFcnJvcnMuR0VORVJJQ19UUkFDSyxcIkdlbmVyaWNUcmFja1wiLGEsYFtUUkFDS106ICR7ZX1gLGBbVFJBQ0tdOiAke2V9YCxcImF1ZGlvLCB2aWRlb1wiKX0sQ2FudEFjY2Vzc0NhcHR1cmVEZXZpY2UoYSxlLHQ9XCJcIil7cmV0dXJuIG5ldyBXKFAuVHJhY2tzRXJyb3JzLkNBTlRfQUNDRVNTX0NBUFRVUkVfREVWSUNFLFwiQ2FudEFjY2Vzc0NhcHR1cmVEZXZpY2VcIixhLGBVc2VyIGRlbmllZCBwZXJtaXNzaW9uIHRvIGFjY2VzcyBjYXB0dXJlIGRldmljZSAtICR7ZX1gLHQsZSl9LERldmljZU5vdEF2YWlsYWJsZShhLGUsdD1cIlwiKXtyZXR1cm4gbmV3IFcoUC5UcmFja3NFcnJvcnMuREVWSUNFX05PVF9BVkFJTEFCTEUsXCJEZXZpY2VOb3RBdmFpbGFibGVcIixhLGBbVFJBQ0tdOiBDYXB0dXJlIGRldmljZSBpcyBubyBsb25nZXIgYXZhaWxhYmxlIC0gJHtlfWAsdCxlKX0sRGV2aWNlSW5Vc2UoYSxlLHQ9XCJcIil7cmV0dXJuIG5ldyBXKFAuVHJhY2tzRXJyb3JzLkRFVklDRV9JTl9VU0UsXCJEZXZpY2VJblVzZVwiLGEsYFtUUkFDS106IENhcHR1cmUgZGV2aWNlIGlzIGluIHVzZSBieSBhbm90aGVyIGFwcGxpY2F0aW9uIC0gJHtlfWAsdCxlKX0sRGV2aWNlTG9zdE1pZHdheShhLGUsdD1cIlwiKXtyZXR1cm4gbmV3IFcoUC5UcmFja3NFcnJvcnMuREVWSUNFX0xPU1RfTUlEV0FZLFwiRGV2aWNlTG9zdE1pZHdheVwiLGEsYExvc3QgYWNjZXNzIHRvIGNhcHR1cmUgZGV2aWNlIG1pZHdheSAtICR7ZX1gLHQsZSl9LE5vdGhpbmdUb1JldHVybihhLGU9XCJcIix0PVwiVGhlcmUgaXMgbm8gbWVkaWEgdG8gcmV0dXJuLiBQbGVhc2Ugc2VsZWN0IGVpdGhlciB2aWRlbyBvciBhdWRpbyBvciBib3RoLlwiKXtyZXR1cm4gbmV3IFcoUC5UcmFja3NFcnJvcnMuTk9USElOR19UT19SRVRVUk4sXCJOb3RoaW5nVG9SZXR1cm5cIixhLHQsZSxcImF1ZGlvLCB2aWRlb1wiKX0sSW52YWxpZFZpZGVvU2V0dGluZ3MoYSxlPVwiXCIpe3JldHVybiBuZXcgVyhQLlRyYWNrc0Vycm9ycy5JTlZBTElEX1ZJREVPX1NFVFRJTkdTLFwiSW52YWxpZFZpZGVvU2V0dGluZ3NcIixhLFwiQ2Fubm90IGVuYWJsZSBzaW11bGNhc3Qgd2hlbiBubyB2aWRlbyBzZXR0aW5ncyBhcmUgcHJvdmlkZWRcIixlLFwidmlkZW9cIil9LEF1dG9wbGF5QmxvY2tlZChhLGU9XCJcIil7cmV0dXJuIG5ldyBXKFAuVHJhY2tzRXJyb3JzLkFVVE9QTEFZX0VSUk9SLFwiQXV0b3BsYXlCbG9ja2VkXCIsYSxcIkF1dG9wbGF5IGJsb2NrZWQgYmVjYXVzZSB0aGUgdXNlciBkaWRuJ3QgaW50ZXJhY3Qgd2l0aCB0aGUgZG9jdW1lbnQgZmlyc3RcIixlLFwiYXVkaW9cIil9LENvZGVjQ2hhbmdlTm90UGVybWl0dGVkKGEsZT1cIlwiKXtyZXR1cm4gbmV3IFcoUC5UcmFja3NFcnJvcnMuQ09ERUNfQ0hBTkdFX05PVF9QRVJNSVRURUQsXCJDb2RlY0NoYW5nZU5vdFBlcm1pdHRlZFwiLGEsXCJDb2RlYyBjYW4ndCBiZSBjaGFuZ2VkIG1pZCBjYWxsLlwiLGUsXCJhdWRpbywgdmlkZW9cIil9LE92ZXJDb25zdHJhaW5lZChhLGUsdD1cIlwiKXtyZXR1cm4gbmV3IFcoUC5UcmFja3NFcnJvcnMuT1ZFUl9DT05TVFJBSU5FRCxcIk92ZXJDb25zdHJhaW5lZFwiLGEsYFtUUkFDS106IFJlcXVlc3RlZCBjb25zdHJhaW50cyBjYW5ub3QgYmUgc2F0aXNmaWVkIHdpdGggdGhlIGRldmljZSBoYXJkd2FyZSAtICR7ZX1gLHQsZSl9LE5vQXVkaW9EZXRlY3RlZChhLGU9XCJQbGVhc2UgY2hlY2sgdGhlIG1pYyBvciB1c2UgYW5vdGhlciBhdWRpbyBpbnB1dFwiKXtyZXR1cm4gbmV3IFcoUC5UcmFja3NFcnJvcnMuTk9fQVVESU9fREVURUNURUQsXCJOb0F1ZGlvRGV0ZWN0ZWRcIixhLFwiTm8gYXVkaW8gaW5wdXQgZGV0ZWN0ZWQgZnJvbSBtaWNyb3Bob25lXCIsZSxcImF1ZGlvXCIpfSxTeXN0ZW1EZW5pZWRQZXJtaXNzaW9uKGEsZSx0PVwiXCIpe3JldHVybiBuZXcgVyhQLlRyYWNrc0Vycm9ycy5TWVNURU1fREVOSUVEX1BFUk1JU1NJT04sXCJTeXN0ZW1EZW5pZWRQZXJtaXNzaW9uXCIsYSxgT3BlcmF0aW5nIFN5c3RlbSBkZW5pZWQgcGVybWlzc2lvbiB0byBhY2Nlc3MgY2FwdHVyZSBkZXZpY2UgLSAke2V9YCx0LGUpfSxDdXJyZW50VGFiTm90U2hhcmVkKCl7cmV0dXJuIG5ldyBXKFAuVHJhY2tzRXJyb3JzLkNVUlJFTlRfVEFCX05PVF9TSEFSRUQsXCJDdXJyZW50VGFiTm90U2hhcmVkXCIsXCJUUkFDS1wiLFwiVGhlIGFwcCByZXF1aXJlcyB5b3UgdG8gc2hhcmUgdGhlIGN1cnJlbnQgdGFiXCIsXCJZb3UgbXVzdCBzY3JlZW4gc2hhcmUgdGhlIGN1cnJlbnQgdGFiIGluIG9yZGVyIHRvIHByb2NlZWRcIixcInNjcmVlblwiKX0sQXVkaW9QbGF5YmFja0Vycm9yKGEpe3JldHVybiBuZXcgVyhQLlRyYWNrc0Vycm9ycy5BVURJT19QTEFZQkFDS19FUlJPUixcIkF1ZGlvIHBsYXliYWNrIGVycm9yXCIsXCJUUkFDS1wiLGEsYSxcImF1ZGlvXCIpfSxTZWxlY3RlZERldmljZU1pc3NpbmcoYSl7cmV0dXJuIG5ldyBXKFAuVHJhY2tzRXJyb3JzLlNFTEVDVEVEX0RFVklDRV9NSVNTSU5HLFwiU2VsZWN0ZWREZXZpY2VNaXNzaW5nXCIsXCJUUkFDS1wiLGBDb3VsZCBub3QgZGV0ZWN0IHNlbGVjdGVkICR7YX0gZGV2aWNlYCxgUGxlYXNlIGNoZWNrIGNvbm5lY3Rpb24gdG8gdGhlICR7YX0gZGV2aWNlYCxhKX0sTm9EYXRhSW5UcmFjayhhKXtyZXR1cm4gbmV3IFcoUC5UcmFja3NFcnJvcnMuTk9fREFUQSxcIlRyYWNrIGRvZXMgbm90IGhhdmUgYW55IGRhdGFcIixcIlRSQUNLXCIsYSxcIlRoaXMgY291bGQgcG9zc2liaWx5IGR1ZSB0byBhbm90aGVyIGFwcGxpY2F0aW9uIHRha2luZyBwcmlvcml0eSBvdmVyIHRoZSBhY2Nlc3MgdG8gY2FtZXJhIG9yIG1pY3JvcGhvbmUgb3IgZHVlIHRvIGFuIGluY29taW5nIGNhbGxcIixcImF1ZGlvLCB2aWRlb1wiKX19LFdlYnJ0Y0Vycm9yczp7Q3JlYXRlT2ZmZXJGYWlsZWQoYSxlPVwiXCIpe3JldHVybiBuZXcgayhQLldlYnJ0Y0Vycm9ycy5DUkVBVEVfT0ZGRVJfRkFJTEVELFwiQ3JlYXRlT2ZmZXJGYWlsZWRcIixhLGBbJHthLnRvU3RyaW5nKCl9XTogRmFpbGVkIHRvIGNyZWF0ZSBvZmZlci4gYCxlKX0sQ3JlYXRlQW5zd2VyRmFpbGVkKGEsZT1cIlwiKXtyZXR1cm4gbmV3IGsoUC5XZWJydGNFcnJvcnMuQ1JFQVRFX0FOU1dFUl9GQUlMRUQsXCJDcmVhdGVBbnN3ZXJGYWlsZWRcIixhLGBbJHthLnRvU3RyaW5nKCl9XTogRmFpbGVkIHRvIGNyZWF0ZSBhbnN3ZXIuIGAsZSl9LFNldExvY2FsRGVzY3JpcHRpb25GYWlsZWQoYSxlPVwiXCIpe3JldHVybiBuZXcgayhQLldlYnJ0Y0Vycm9ycy5TRVRfTE9DQUxfREVTQ1JJUFRJT05fRkFJTEVELFwiU2V0TG9jYWxEZXNjcmlwdGlvbkZhaWxlZFwiLGEsYFske2EudG9TdHJpbmcoKX1dOiBGYWlsZWQgdG8gc2V0IG9mZmVyLiBgLGUpfSxTZXRSZW1vdGVEZXNjcmlwdGlvbkZhaWxlZChhLGU9XCJcIil7cmV0dXJuIG5ldyBrKFAuV2VicnRjRXJyb3JzLlNFVF9SRU1PVEVfREVTQ1JJUFRJT05fRkFJTEVELFwiU2V0UmVtb3RlRGVzY3JpcHRpb25GYWlsZWRcIixhLGBbJHthLnRvU3RyaW5nKCl9XTogRmFpbGVkIHRvIHNldCBhbnN3ZXIuIGAsZSwhMCl9LElDRUZhaWx1cmUoYSxlPVwiXCIsdD0hMSl7cmV0dXJuIG5ldyBrKFAuV2VicnRjRXJyb3JzLklDRV9GQUlMVVJFLFwiSUNFRmFpbHVyZVwiLGEsYFske2EudG9TdHJpbmcoKX1dOiBJY2UgY29ubmVjdGlvbiBzdGF0ZSBGQUlMRURgLGUsdCl9LElDRURpc2Nvbm5lY3RlZChhLGU9XCJcIil7cmV0dXJuIG5ldyBrKFAuV2VicnRjRXJyb3JzLklDRV9ESVNDT05ORUNURUQsXCJJQ0VEaXNjb25uZWN0ZWRcIixhLGBbJHthLnRvU3RyaW5nKCl9XTogSWNlIGNvbm5lY3Rpb24gc3RhdGUgRElTQ09OTkVDVEVEYCxlKX0sU3RhdHNGYWlsZWQoYSxlPVwiXCIpe3JldHVybiBuZXcgayhQLldlYnJ0Y0Vycm9ycy5TVEFUU19GQUlMRUQsXCJTdGF0c0ZhaWxlZFwiLGEsYEZhaWxlZCB0byBXZWJSVEMgZ2V0IHN0YXRzIC0gJHtlfWAsZSl9fSxXZWJzb2NrZXRNZXRob2RFcnJvcnM6e1NlcnZlckVycm9ycyhhLGUsdCl7cmV0dXJuIG5ldyBrKGEsXCJTZXJ2ZXJFcnJvcnNcIixlLHQsdCx5by5pbmNsdWRlcyhlKSl9LEFscmVhZHlKb2luZWQoYSxlPVwiXCIpe3JldHVybiBuZXcgayhQLldlYnNvY2tldE1ldGhvZEVycm9ycy5BTFJFQURZX0pPSU5FRCxcIkFscmVhZHlKb2luZWRcIixhLFwiW0pPSU5dOiBZb3UgaGF2ZSBhbHJlYWR5IGpvaW5lZCB0aGlzIHJvb20uXCIsZSl9LENhbm5vdEpvaW5QcmV2aWV3SW5Qcm9ncmVzcyhhLGU9XCJcIil7cmV0dXJuIG5ldyBrKFAuV2Vic29ja2V0TWV0aG9kRXJyb3JzLkNBTk5PVF9KT0lOX1BSRVZJRVdfSU5fUFJPR1JFU1MsXCJDYW5ub3RKb2luUHJldmlld0luUHJvZ3Jlc3NcIixhLFwiW0pPSU5dOiBDYW5ub3Qgam9pbiBpZiBwcmV2aWV3IGlzIGluIHByb2dyZXNzXCIsZSl9fSxHZW5lcmljRXJyb3JzOntOb3RDb25uZWN0ZWQoYSxlPVwiXCIpe3JldHVybiBuZXcgayhQLkdlbmVyaWNFcnJvcnMuTk9UX0NPTk5FQ1RFRCxcIk5vdENvbm5lY3RlZFwiLGEsXCJDbGllbnQgaXMgbm90IGNvbm5lY3RlZFwiLGUpfSxTaWduYWxsaW5nKGEsZSl7cmV0dXJuIG5ldyBrKFAuR2VuZXJpY0Vycm9ycy5TSUdOQUxMSU5HLFwiU2lnbmFsbGluZ1wiLGEsYFVua25vd24gc2lnbmFsbGluZyBlcnJvcjogJHthLnRvU3RyaW5nKCl9ICR7ZX0gYCxlKX0sVW5rbm93bihhLGUpe3JldHVybiBuZXcgayhQLkdlbmVyaWNFcnJvcnMuVU5LTk9XTixcIlVua25vd25cIixhLGBVbmtub3duIGV4Y2VwdGlvbjogJHtlfWAsZSl9LE5vdFJlYWR5KGEsZT1cIlwiKXtyZXR1cm4gbmV3IGsoUC5HZW5lcmljRXJyb3JzLk5PVF9SRUFEWSxcIk5vdFJlYWR5XCIsYSxlLGUpfSxKc29uUGFyc2luZ0ZhaWxlZChhLGUsdD1cIlwiKXtyZXR1cm4gbmV3IGsoUC5HZW5lcmljRXJyb3JzLkpTT05fUEFSU0lOR19GQUlMRUQsXCJKc29uUGFyc2luZ0ZhaWxlZFwiLGEsYEZhaWxlZCB0byBwYXJzZSBKU09OIG1lc3NhZ2UgLSAke2V9YCx0KX0sVHJhY2tNZXRhZGF0YU1pc3NpbmcoYSxlPVwiXCIpe3JldHVybiBuZXcgayhQLkdlbmVyaWNFcnJvcnMuVFJBQ0tfTUVUQURBVEFfTUlTU0lORyxcIlRyYWNrTWV0YWRhdGFNaXNzaW5nXCIsYSxcIlRyYWNrIE1ldGFkYXRhIE1pc3NpbmdcIixlKX0sUlRDVHJhY2tNaXNzaW5nKGEsZT1cIlwiKXtyZXR1cm4gbmV3IGsoUC5HZW5lcmljRXJyb3JzLlJUQ19UUkFDS19NSVNTSU5HLFwiUlRDVHJhY2tNaXNzaW5nXCIsYSxcIlJUQyBUcmFjayBtaXNzaW5nXCIsZSl9LFBlZXJNZXRhZGF0YU1pc3NpbmcoYSxlPVwiXCIpe3JldHVybiBuZXcgayhQLkdlbmVyaWNFcnJvcnMuUEVFUl9NRVRBREFUQV9NSVNTSU5HLFwiUGVlck1ldGFkYXRhTWlzc2luZ1wiLGEsXCJQZWVyIE1ldGFkYXRhIE1pc3NpbmdcIixlKX0sVmFsaWRhdGlvbkZhaWxlZChhLGUpe3JldHVybiBuZXcgayhQLkdlbmVyaWNFcnJvcnMuVkFMSURBVElPTl9GQUlMRUQsXCJWYWxpZGF0aW9uRmFpbGVkXCIsXCJWQUxJREFUSU9OXCIsYSxlP0pTT04uc3RyaW5naWZ5KGUpOlwiXCIpfSxJbnZhbGlkUm9sZShhLGUpe3JldHVybiBuZXcgayhQLkdlbmVyaWNFcnJvcnMuSU5WQUxJRF9ST0xFLFwiSW52YWxpZFJvbGVcIixhLFwiSW52YWxpZCByb2xlLiBKb2luIHdpdGggdmFsaWQgcm9sZVwiLGUsITApfSxQcmV2aWV3QWxyZWFkeUluUHJvZ3Jlc3MoYSxlPVwiXCIpe3JldHVybiBuZXcgayhQLkdlbmVyaWNFcnJvcnMuUFJFVklFV19JTl9QUk9HUkVTUyxcIlByZXZpZXdBbHJlYWR5SW5Qcm9ncmVzc1wiLGEsXCJbUHJldmlld106IENhbm5vdCBqb2luIGlmIHByZXZpZXcgaXMgaW4gcHJvZ3Jlc3NcIixlKX0sTG9jYWxTdG9yYWdlQWNjZXNzRGVuaWVkKGE9XCJBY2Nlc3MgdG8gbG9jYWxTdG9yYWdlIGhhcyBiZWVuIGRlbmllZFwiKXtyZXR1cm4gbmV3IGsoUC5HZW5lcmljRXJyb3JzLkxPQ0FMX1NUT1JBR0VfQUNDRVNTX0RFTklFRCxcIkxvY2FsU3RvcmFnZUFjY2Vzc0RlbmllZFwiLFwiTk9ORVwiLFwiTG9jYWxTdG9yYWdlQWNjZXNzRGVuaWVkXCIsYSl9LE1pc3NpbmdNZWRpYURldmljZXMoKXtyZXR1cm4gbmV3IGsoUC5HZW5lcmljRXJyb3JzLk1JU1NJTkdfTUVESUFERVZJQ0VTLFwiTWlzc2luZ01lZGlhRGV2aWNlc1wiLFwiSk9JTlwiLFwibmF2aWdhdG9yLm1lZGlhRGV2aWNlcyBpcyB1bmRlZmluZWQuIDEwMG1zIFNESyB3b24ndCB3b3JrIG9uIHRoaXMgd2Vic2l0ZSBhcyBXZWJSVEMgaXMgbm90IHN1cHBvcnRlZCBvbiBIVFRQIGVuZHBvaW50cyhtaXNzaW5nIG5hdmlnYXRvci5tZWRpYURldmljZXMpLiBQbGVhc2UgZW5zdXJlIHlvdSdyZSB1c2luZyB0aGUgU0RLIGVpdGhlciBvbiBsb2NhbGhvc3Qgb3IgYSB2YWxpZCBIVFRQUyBlbmRwb2ludC5cIixcIlwiLCEwKX0sTWlzc2luZ1JUQ1BlZXJDb25uZWN0aW9uKCl7cmV0dXJuIG5ldyBrKFAuR2VuZXJpY0Vycm9ycy5NSVNTSU5HX1JUQ1BFRVJDT05ORUNUSU9OLFwiTWlzc2luZ1JUQ1BlZXJDb25uZWN0aW9uXCIsXCJKT0lOXCIsXCJSVENQZWVyQ29ubmVjdGlvbiB3aGljaCBpcyBhIGNvcmUgcmVxdWlyZW1lbnQgZm9yIFdlYlJUQyBjYWxsIHdhcyBub3QgZm91bmQsIHRoaXMgY291bGQgYmUgZHVlIHRvIGFuIHVuc3VwcG9ydGVkIGJyb3dzZXIgb3IgYnJvd3NlciBleHRlbnNpb25zIGJsb2NraW5nIFdlYlJUQ1wiLFwiXCIsITApfX0sTWVkaWFQbHVnaW5FcnJvcnM6e1BsYXRmb3JtTm90U3VwcG9ydGVkKGEsZT1cIlwiKXtyZXR1cm4gbmV3IGsoNzAwMSxcIlBsYXRmb3JtTm90U3VwcG9ydGVkXCIsYSxcIkNoZWNrIEhNUyBEb2NzIHRvIHNlZSB0aGUgbGlzdCBvZiBzdXBwb3J0ZWQgcGxhdGZvcm1zXCIsZSl9LEluaXRGYWlsZWQoYSxlPVwiXCIpe3JldHVybiBuZXcgayg3MDAyLFwiSW5pdEZhaWxlZFwiLGEsXCJQbHVnaW4gaW5pdCBmYWlsZWRcIixlKX0sUHJvY2Vzc2luZ0ZhaWxlZChhLGU9XCJcIil7cmV0dXJuIG5ldyBrKDcwMDMsXCJQcm9jZXNzaW5nRmFpbGVkXCIsYSxcIlBsdWdpbiBwcm9jZXNzaW5nIGZhaWxlZFwiLGUpfSxBZGRBbHJlYWR5SW5Qcm9ncmVzcyhhLGU9XCJcIil7cmV0dXJuIG5ldyBrKDcwMDQsXCJBZGRBbHJlYWR5SW5Qcm9ncmVzc1wiLGEsXCJQbHVnaW4gYWRkIGFscmVhZHkgaW4gcHJvZ3Jlc3NcIixlKX0sRGV2aWNlTm90U3VwcG9ydGVkKGEsZT1cIlwiKXtyZXR1cm4gbmV3IGsoNzAwNSxcIkRldmljZU5vdFN1cHBvcnRlZFwiLGEsXCJDaGVjayBITVMgRG9jcyB0byBzZWUgdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIGRldmljZXNcIixlKX19LFBsYXlsaXN0RXJyb3JzOntOb0VudHJ5VG9QbGF5KGEsZSl7cmV0dXJuIG5ldyBrKFAuUGxheWxpc3RFcnJvcnMuTk9fRU5UUllfVE9fUExBWSxcIk5vRW50cnlUb1BsYXlcIixhLFwiUmVhY2hlZCBlbmQgb2YgcGxheWxpc3RcIixlKX0sTm9FbnRyeVBsYXlpbmcoYSxlKXtyZXR1cm4gbmV3IGsoUC5QbGF5bGlzdEVycm9ycy5OT19FTlRSWV9JU19QTEFZSU5HLFwiTm9FbnRyeUlzUGxheWluZ1wiLGEsXCJObyBlbnRyeSBpcyBwbGF5aW5nIGF0IHRoaXMgdGltZVwiLGUpfX19O3ZhciBBcj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMudmFsdWVzTWFwPW5ldyBNYXB9Z2V0SXRlbShlKXtyZXR1cm4gdGhpcy52YWx1ZXNNYXAuaGFzKGUpP1N0cmluZyh0aGlzLnZhbHVlc01hcC5nZXQoZSkpOm51bGx9c2V0SXRlbShlLHQpe3RoaXMudmFsdWVzTWFwLnNldChlLHQpfXJlbW92ZUl0ZW0oZSl7dGhpcy52YWx1ZXNNYXAuZGVsZXRlKGUpfWNsZWFyKCl7dGhpcy52YWx1ZXNNYXAuY2xlYXIoKX1rZXkoZSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBleGVjdXRlICdrZXknIG9uICdTdG9yYWdlJzogMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LlwiKTtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnZhbHVlc01hcC5rZXlzKCkpW2VdfWdldCBsZW5ndGgoKXtyZXR1cm4gdGhpcy52YWx1ZXNNYXAuc2l6ZX19LHdzPSgpPT57dHJ5e1UmJiFsb2NhbFN0b3JhZ2UmJih3aW5kb3cubG9jYWxTdG9yYWdlPW5ldyBBcil9Y2F0Y2goYSl7bC5lKFwiRXJyb3IgaW5pdGlhbGlzaW5nIGxvY2FsU3RvcmFnZVwiLFMuR2VuZXJpY0Vycm9ycy5Mb2NhbFN0b3JhZ2VBY2Nlc3NEZW5pZWQoKSl9fTt2YXIgZmU9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5rZXk9ZTt0aGlzLnN0b3JhZ2U9bnVsbH1nZXRTdG9yYWdlKCl7dHJ5e3JldHVybiBVJiYhdGhpcy5zdG9yYWdlJiYod3MoKSx0aGlzLnN0b3JhZ2U9d2luZG93LmxvY2FsU3RvcmFnZSksdGhpcy5zdG9yYWdlfWNhdGNoKGUpe3JldHVybiBsLmUoXCJFcnJvciBpbml0aWFsaXNpbmcgbG9jYWxTdG9yYWdlXCIsUy5HZW5lcmljRXJyb3JzLkxvY2FsU3RvcmFnZUFjY2Vzc0RlbmllZCgpKSxudWxsfX1nZXQoKXt2YXIgaTtsZXQgZT0oaT10aGlzLmdldFN0b3JhZ2UoKSk9PW51bGw/dm9pZCAwOmkuZ2V0SXRlbSh0aGlzLmtleSk7cmV0dXJuIGU/SlNPTi5wYXJzZShlKTp2b2lkIDB9c2V0KGUpe3ZhciBpO2xldCB0PUpTT04uc3RyaW5naWZ5KGUpOyhpPXRoaXMuZ2V0U3RvcmFnZSgpKT09bnVsbHx8aS5zZXRJdGVtKHRoaXMua2V5LHQpfWNsZWFyKCl7dmFyIGU7KGU9dGhpcy5nZXRTdG9yYWdlKCkpPT1udWxsfHxlLnJlbW92ZUl0ZW0odGhpcy5rZXkpfX07dmFyIGxpPSgpPT57bGV0IGEsZT1uZXcgZmUoXCJobXMtYW5hbHl0aWNzLWRldmljZUlkXCIpLHQ9ZS5nZXQoKTtyZXR1cm4gdD9hPXQ6KGE9a28oKSxlLnNldChhKSksYX07dmFyIF9zPVwiW1ZBTElEQVRJT05TXVwiO2Z1bmN0aW9uIGhlKGEpe3JldHVybiBhIT1udWxsfXZhciB5dD0oKT0+e2lmKCFoZShSVENQZWVyQ29ubmVjdGlvbikpe2xldCBhPVMuR2VuZXJpY0Vycm9ycy5NaXNzaW5nUlRDUGVlckNvbm5lY3Rpb24oKTt0aHJvdyBsLmUoX3MsYSksYX19LGt0PSgpPT57aWYoIWhlKG5hdmlnYXRvci5tZWRpYURldmljZXMpKXtsZXQgYT1TLkdlbmVyaWNFcnJvcnMuTWlzc2luZ01lZGlhRGV2aWNlcygpO3Rocm93IGwuZShfcyxhKSxhfX0sTnM9YT0+e2lmKCFhLmdldFB1Ymxpc2hQYXJhbXMoKSl0aHJvdyBTLkdlbmVyaWNFcnJvcnMuTm90Q29ubmVjdGVkKFwiVkFMSURBVElPTlwiLFwiY2FsbCBhZGRUcmFjayBhZnRlciBwcmV2aWV3IG9yIGpvaW4gaXMgc3VjY2Vzc2Z1bFwiKX07dmFyIE9zPUlyKCkudmVyc2lvbjtmdW5jdGlvbiBFdChhPVwicHJvZFwiLGUpe2xldCB0PVwid2ViXCIsaT1YZSE9PVwiTE9DQUxcIiYmYT09PVwicHJvZFwiP1wicHJvZFwiOlwiZGVidWdcIjtpZihHZSlyZXR1cm4geHMoe29zOlwid2ViX25vZGVqc1wiLG9zX3ZlcnNpb246cHJvY2Vzcy52ZXJzaW9uLHNkazp0LHNka192ZXJzaW9uOk9zLGVudjppLGRvbWFpbjpYZSxpc19wcmVidWlsdDohIShlIT1udWxsJiZlLmlzUHJlYnVpbHQpLGZyYW1ld29yazpcIm5vZGVcIixmcmFtZXdvcmtfdmVyc2lvbjpwcm9jZXNzLnZlcnNpb24sZnJhbWV3b3JrX3Nka192ZXJzaW9uOmU9PW51bGw/dm9pZCAwOmUuc2RrVmVyc2lvbn0pO2xldCByPVRlLmdldE9TKCkscz1UZS5nZXREZXZpY2UoKSxvPVRlLmdldEJyb3dzZXIoKSxuPVJyKGB3ZWJfJHtyLm5hbWV9YCksZD1yLnZlcnNpb258fFwiXCIsdT1ScihgJHtvLm5hbWV9XyR7by52ZXJzaW9ufWApLHA9dTtyZXR1cm4gcy50eXBlJiYocD1gJHtScihgJHtzLnZlbmRvcn1fJHtzLnR5cGV9YCl9LyR7dX1gKSx4cyh7b3M6bixvc192ZXJzaW9uOmQsc2RrOnQsc2RrX3ZlcnNpb246T3MsZGV2aWNlX21vZGVsOnAsZW52OmksZG9tYWluOlhlLGlzX3ByZWJ1aWx0OiEhKGUhPW51bGwmJmUuaXNQcmVidWlsdCksZnJhbWV3b3JrOmU9PW51bGw/dm9pZCAwOmUudHlwZSxmcmFtZXdvcmtfdmVyc2lvbjplPT1udWxsP3ZvaWQgMDplLnZlcnNpb24sZnJhbWV3b3JrX3Nka192ZXJzaW9uOmU9PW51bGw/dm9pZCAwOmUuc2RrVmVyc2lvbn0pfWZ1bmN0aW9uIFJyKGEpe3JldHVybiBhLnJlcGxhY2UoLyAvZyxcIl9cIil9dmFyIHhzPShhLGU9XCIsXCIpPT5PYmplY3Qua2V5cyhhKS5maWx0ZXIodD0+aGUoYVt0XSkpLm1hcCh0PT5gJHt0fToke2FbdF19YCkuam9pbihlKTt2YXIgQz1jbGFzc3tjb25zdHJ1Y3Rvcih7bmFtZTplLGxldmVsOnQscHJvcGVydGllczppLGluY2x1ZGVzUElJOnIsdGltZXN0YW1wOnN9KXt0aGlzLm1ldGFkYXRhPXtwZWVyOnt9LHVzZXJBZ2VudDpFdCgpfTt0aGlzLm5hbWU9ZSx0aGlzLmxldmVsPXQsdGhpcy5pbmNsdWRlc1BJST1yfHwhMSx0aGlzLnByb3BlcnRpZXM9aXx8e30sdGhpcy50aW1lc3RhbXA9c3x8bmV3IERhdGUoKS5nZXRUaW1lKCksdGhpcy5ldmVudF9pZD1QbygpLHRoaXMuZGV2aWNlX2lkPWxpKCl9dG9TaWduYWxQYXJhbXMoKXtyZXR1cm57bmFtZTp0aGlzLm5hbWUsaW5mbzpNKG0oe30sdGhpcy5wcm9wZXJ0aWVzKSx7dGltZXN0YW1wOnRoaXMudGltZXN0YW1wLGRvbWFpbjpYZX0pLHRpbWVzdGFtcDpuZXcgRGF0ZSgpLmdldFRpbWUoKX19fTt2YXIgeT1jbGFzc3tzdGF0aWMgY29ubmVjdChlLHQsaT1uZXcgRGF0ZSxyPW5ldyBEYXRlLHMpe2xldCBvPXRoaXMuZXZlbnROYW1lRm9yKFwiY29ubmVjdFwiLGU9PT12b2lkIDApLG49ZT8yOjEsZD10aGlzLmdldFByb3BlcnRpZXNXaXRoRXJyb3IoTShtKHt9LHQpLHtbdGhpcy5LRVlfUkVRVUVTVEVEX0FUXTppPT1udWxsP3ZvaWQgMDppLmdldFRpbWUoKSxbdGhpcy5LRVlfUkVTUE9OREVEX0FUXTpyPT1udWxsP3ZvaWQgMDpyLmdldFRpbWUoKSxlbmRwb2ludDpzfSksZSk7cmV0dXJuIG5ldyBDKHtuYW1lOm8sbGV2ZWw6bixwcm9wZXJ0aWVzOmR9KX1zdGF0aWMgZGlzY29ubmVjdChlLHQpe2xldCBpPVwiZGlzY29ubmVjdGVkXCIscj1lPzI6MSxzPXRoaXMuZ2V0UHJvcGVydGllc1dpdGhFcnJvcih0LGUpO3JldHVybiBuZXcgQyh7bmFtZTppLGxldmVsOnIscHJvcGVydGllczpzfSl9c3RhdGljIHByZXZpZXcoaSl7dmFyIHI9aSx7ZXJyb3I6ZX09cix0PWtyKHIsW1wiZXJyb3JcIl0pO2xldCBzPXRoaXMuZXZlbnROYW1lRm9yKFwicHJldmlld1wiLGU9PT12b2lkIDApLG89ZT8yOjEsbj10aGlzLmdldFByb3BlcnRpZXNXaXRoRXJyb3IodCxlKTtyZXR1cm4gbmV3IEMoe25hbWU6cyxsZXZlbDpvLHByb3BlcnRpZXM6bn0pfXN0YXRpYyBqb2luKGkpe3ZhciByPWkse2Vycm9yOmV9PXIsdD1rcihyLFtcImVycm9yXCJdKTtsZXQgcz10aGlzLmV2ZW50TmFtZUZvcihcImpvaW5cIixlPT09dm9pZCAwKSxvPWU/MjoxLG49dGhpcy5nZXRQcm9wZXJ0aWVzV2l0aEVycm9yKE0obSh7fSx0KSx7aXNfcHJldmlld19jYWxsZWQ6ISF0LmlzX3ByZXZpZXdfY2FsbGVkfSksZSk7cmV0dXJuIG5ldyBDKHtuYW1lOnMsbGV2ZWw6byxwcm9wZXJ0aWVzOm59KX1zdGF0aWMgcHVibGlzaCh7ZGV2aWNlczplLHNldHRpbmdzOnQsZXJyb3I6aX0pe2xldCByPXRoaXMuZXZlbnROYW1lRm9yKFwicHVibGlzaFwiLGk9PT12b2lkIDApLHM9aT8yOjEsbz10aGlzLmdldFByb3BlcnRpZXNXaXRoRXJyb3Ioe2RldmljZXM6ZSxhdWRpbzp0PT1udWxsP3ZvaWQgMDp0LmF1ZGlvLHZpZGVvOnQ9PW51bGw/dm9pZCAwOnQudmlkZW99LGkpO3JldHVybiBuZXcgQyh7bmFtZTpyLGxldmVsOnMscHJvcGVydGllczpvfSl9c3RhdGljIGhsc1BsYXllckVycm9yKGUpe3JldHVybiBuZXcgQyh7bmFtZTpcImhsc1BsYXllckVycm9yXCIsbGV2ZWw6Mixwcm9wZXJ0aWVzOnRoaXMuZ2V0RXJyb3JQcm9wZXJ0aWVzKGUpfSl9c3RhdGljIHN1YnNjcmliZUZhaWwoZSl7bGV0IHQ9dGhpcy5ldmVudE5hbWVGb3IoXCJzdWJzY3JpYmVcIiwhMSksaT0yLHI9dGhpcy5nZXRFcnJvclByb3BlcnRpZXMoZSk7cmV0dXJuIG5ldyBDKHtuYW1lOnQsbGV2ZWw6aSxwcm9wZXJ0aWVzOnJ9KX1zdGF0aWMgbGVhdmUoKXtyZXR1cm4gbmV3IEMoe25hbWU6XCJsZWF2ZVwiLGxldmVsOjF9KX1zdGF0aWMgYXV0b3BsYXlFcnJvcigpe3JldHVybiBuZXcgQyh7bmFtZTpcImF1dG9wbGF5RXJyb3JcIixsZXZlbDoyfSl9c3RhdGljIGF1ZGlvUGxheWJhY2tFcnJvcihlKXtyZXR1cm4gbmV3IEMoe25hbWU6XCJhdWRpb1BsYXliYWNrRXJyb3JcIixsZXZlbDoyLHByb3BlcnRpZXM6dGhpcy5nZXRFcnJvclByb3BlcnRpZXMoZSl9KX1zdGF0aWMgYXVkaW9SZWNvdmVyZWQoZSl7cmV0dXJuIG5ldyBDKHtuYW1lOlwiYXVkaW9SZWNvdmVyZWRcIixsZXZlbDoxLHByb3BlcnRpZXM6e21lc3NhZ2U6ZX19KX1zdGF0aWMgcGVybWlzc2lvbkNoYW5nZShlLHQpe3JldHVybiBuZXcgQyh7bmFtZTpcInBlcm1pc3Npb25DaGFuZ2VkXCIsbGV2ZWw6MSxwcm9wZXJ0aWVzOnttZXNzYWdlOmBQZXJybWlzc2lvbiBmb3IgJHtlfSBjaGFuZ2VkIHRvICR7dH1gfX0pfXN0YXRpYyBkZXZpY2VDaGFuZ2Uoe2lzVXNlclNlbGVjdGlvbjplLHNlbGVjdGlvbjp0LHR5cGU6aSxkZXZpY2VzOnIsZXJyb3I6c30pe2xldCBvPXRoaXMuZXZlbnROYW1lRm9yKHM/XCJwdWJsaXNoXCI6YGRldmljZS4ke2l9YCxzPT09dm9pZCAwKSxuPXM/MjoxLGQ9dGhpcy5nZXRQcm9wZXJ0aWVzV2l0aEVycm9yKHtzZWxlY3Rpb246dCxkZXZpY2VzOnIsaXNVc2VyU2VsZWN0aW9uOmV9LHMpO3JldHVybiBuZXcgQyh7bmFtZTpvLGxldmVsOm4scHJvcGVydGllczpkfSl9c3RhdGljIHBlcmZvcm1hbmNlKGUpe2xldCB0PVwicGVyZi5zdGF0c1wiLGk9MSxyPWUudG9BbmFseXRpY3NQcm9wZXJ0aWVzKCk7cmV0dXJuIG5ldyBDKHtuYW1lOnQsbGV2ZWw6aSxwcm9wZXJ0aWVzOnJ9KX1zdGF0aWMgcnRjU3RhdHMoZSl7bGV0IHQ9XCJydGMuc3RhdHNcIixpPTEscj1lLnRvQW5hbHl0aWNzUHJvcGVydGllcygpO3JldHVybiBuZXcgQyh7bmFtZTp0LGxldmVsOmkscHJvcGVydGllczpyfSl9c3RhdGljIHJ0Y1N0YXRzRmFpbGVkKGUpe2xldCB0PVwicnRjLnN0YXRzLmZhaWxlZFwiLGk9MjtyZXR1cm4gbmV3IEMoe25hbWU6dCxsZXZlbDppLHByb3BlcnRpZXM6dGhpcy5nZXRFcnJvclByb3BlcnRpZXMoZSl9KX1zdGF0aWMgZGVncmFkYXRpb25TdGF0cyhlLHQpe2xldCBpPVwidmlkZW8uZGVncmFkYXRpb24uc3RhdHNcIixyPTEscz17ZGVncmFkZWRBdDplLmRlZ3JhZGVkQXQsdHJhY2tJZDplLnRyYWNrSWR9O2lmKCF0JiZlLmRlZ3JhZGVkQXQgaW5zdGFuY2VvZiBEYXRlKXtsZXQgbz1uZXcgRGF0ZSxuPW8udmFsdWVPZigpLWUuZGVncmFkZWRBdC52YWx1ZU9mKCk7cz1NKG0oe30scykse2R1cmF0aW9uOm4scmVzdG9yZWRBdDpvfSl9cmV0dXJuIG5ldyBDKHtuYW1lOmksbGV2ZWw6cixwcm9wZXJ0aWVzOnN9KX1zdGF0aWMgYXVkaW9EZXRlY3Rpb25GYWlsKGUsdCl7bGV0IGk9dGhpcy5nZXRQcm9wZXJ0aWVzV2l0aEVycm9yKHtkZXZpY2U6dH0sZSkscj0yLHM9XCJhdWRpb3ByZXNlbmNlLmZhaWxlZFwiO3JldHVybiBuZXcgQyh7bmFtZTpzLGxldmVsOnIscHJvcGVydGllczppfSl9c3RhdGljIHByZXZpZXdOZXR3b3JrUXVhbGl0eShlKXtyZXR1cm4gbmV3IEMoe25hbWU6XCJwZXJmLm5ldHdvcmtxdWFsaXR5LnByZXZpZXdcIixsZXZlbDplLmVycm9yPzI6MSxwcm9wZXJ0aWVzOmV9KX1zdGF0aWMgcHVibGlzaFN0YXRzKGUpe3JldHVybiBuZXcgQyh7bmFtZTpcInB1Ymxpc2hlci5zdGF0c1wiLGxldmVsOjEscHJvcGVydGllczplfSl9c3RhdGljIHN1YnNjcmliZVN0YXRzKGUpe3JldHVybiBuZXcgQyh7bmFtZTpcInN1YnNjcmliZXIuc3RhdHNcIixsZXZlbDoxLHByb3BlcnRpZXM6ZX0pfXN0YXRpYyBnZXRLcmlzcFVzYWdlKGUpe3JldHVybiBuZXcgQyh7bmFtZTpcImtyaXNwLnVzYWdlXCIsbGV2ZWw6MSxwcm9wZXJ0aWVzOntkdXJhdGlvbjplfX0pfXN0YXRpYyBrcmlzcFN0YXJ0KCl7cmV0dXJuIG5ldyBDKHtuYW1lOlwia3Jpc3Auc3RhcnRcIixsZXZlbDoxfSl9c3RhdGljIGtyaXNwU3RvcCgpe3JldHVybiBuZXcgQyh7bmFtZTpcImtyaXNwLnN0b3BcIixsZXZlbDoxfSl9c3RhdGljIGludGVycnVwdGlvbih7c3RhcnRlZDplLHR5cGU6dCxyZWFzb246aSxkZXZpY2VJbmZvOnJ9KXtyZXR1cm4gbmV3IEMoe25hbWU6YCR7ZT9cImludGVycnVwdGlvbi5zdGFydFwiOlwiaW50ZXJydXB0aW9uLnN0b3BcIn1gLGxldmVsOjEscHJvcGVydGllczptKHtyZWFzb246aSx0eXBlOnR9LHIpfSl9c3RhdGljIGV2ZW50TmFtZUZvcihlLHQpe3JldHVybmAke2V9LiR7dD9cInN1Y2Nlc3NcIjpcImZhaWxlZFwifWB9c3RhdGljIGdldFByb3BlcnRpZXNXaXRoRXJyb3IoZSx0KXtsZXQgaT10aGlzLmdldEVycm9yUHJvcGVydGllcyh0KTtyZXR1cm4gZT1tKG0oe30saSksZSksZX1zdGF0aWMgZ2V0RXJyb3JQcm9wZXJ0aWVzKGUpe3JldHVybiBlP2UgaW5zdGFuY2VvZiBrP2UudG9BbmFseXRpY3NQcm9wZXJ0aWVzKCk6e2Vycm9yX25hbWU6ZS5uYW1lLGVycm9yX21lc3NhZ2U6ZS5tZXNzYWdlLGVycm9yX2Rlc2NyaXB0aW9uOmUuY2F1c2V9Ont9fX07eS5LRVlfUkVRVUVTVEVEX0FUPVwicmVxdWVzdGVkX2F0XCIseS5LRVlfUkVTUE9OREVEX0FUPVwicmVzcG9uZGVkX2F0XCI7dmFyIHVpPWE9PmE/YHtcbiAgICB0cmFja0lkOiAke2EuaWR9O1xuICAgIGtpbmQ6ICR7YS5raW5kfTtcbiAgICBlbmFibGVkOiAke2EuZW5hYmxlZH07XG4gICAgbXV0ZWQ6ICR7YS5tdXRlZH07XG4gICAgcmVhZHlTdGF0ZTogJHthLnJlYWR5U3RhdGV9O1xuICB9YDpcIlwiO3ZhciBEZT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5sb2dJZGVudGlmaWVyPVwiXCI7dGhpcy5pc1RyYWNrTm90UHVibGlzaGluZz0oKT0+dGhpcy5uYXRpdmVUcmFjay5yZWFkeVN0YXRlPT09XCJlbmRlZFwifHx0aGlzLm5hdGl2ZVRyYWNrLm11dGVkO3RoaXMuc3RyZWFtPWUsdGhpcy5uYXRpdmVUcmFjaz10LHRoaXMuc291cmNlPWl9Z2V0IGVuYWJsZWQoKXtyZXR1cm4gdGhpcy5uYXRpdmVUcmFjay5lbmFibGVkfWdldCB0cmFja0lkKCl7cmV0dXJuIHRoaXMuZmlyc3RUcmFja0lkfHx0aGlzLnNkcFRyYWNrSWR8fHRoaXMubmF0aXZlVHJhY2suaWR9Z2V0TWVkaWFUcmFja1NldHRpbmdzKCl7cmV0dXJuIHRoaXMubmF0aXZlVHJhY2suZ2V0U2V0dGluZ3MoKX1zZXRFbmFibGVkKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0aGlzLm5hdGl2ZVRyYWNrLmVuYWJsZWQ9ZX0pfXNldFNkcFRyYWNrSWQoZSl7dGhpcy5zZHBUcmFja0lkPWV9c2V0Rmlyc3RUcmFja0lkKGUpe3RoaXMuZmlyc3RUcmFja0lkPWV9c2VuZEludGVycnVwdGlvbkV2ZW50KHtzdGFydGVkOmUscmVhc29uOnR9KXtyZXR1cm4geS5pbnRlcnJ1cHRpb24oe3N0YXJ0ZWQ6ZSx0eXBlOnRoaXMudHlwZSxyZWFzb246dCxkZXZpY2VJbmZvOntkZXZpY2VJZDp0aGlzLm5hdGl2ZVRyYWNrLmdldFNldHRpbmdzKCkuZGV2aWNlSWQsZ3JvdXBJZDp0aGlzLm5hdGl2ZVRyYWNrLmdldFNldHRpbmdzKCkuZ3JvdXBJZH19KX1jbGVhbnVwKCl7dmFyIGU7bC5kKFwiW0hNU1RyYWNrXVwiLFwiU3RvcHBpbmcgdHJhY2tcIix0aGlzLnRvU3RyaW5nKCkpLChlPXRoaXMubmF0aXZlVHJhY2spPT1udWxsfHxlLnN0b3AoKX10b1N0cmluZygpe3ZhciBlO3JldHVybmB7XG4gICAgICBzdHJlYW1JZDogJHt0aGlzLnN0cmVhbS5pZH07XG4gICAgICBwZWVySWQ6ICR7dGhpcy5wZWVySWR9O1xuICAgICAgdHJhY2tJZDogJHt0aGlzLnRyYWNrSWR9O1xuICAgICAgbWlkOiAkeygoZT10aGlzLnRyYW5zY2VpdmVyKT09bnVsbD92b2lkIDA6ZS5taWQpfHxcIi1cIn07XG4gICAgICBsb2dJZGVudGlmaWVyOiAke3RoaXMubG9nSWRlbnRpZmllcn07XG4gICAgICBzb3VyY2U6ICR7dGhpcy5zb3VyY2V9O1xuICAgICAgZW5hYmxlZDogJHt0aGlzLmVuYWJsZWR9O1xuICAgICAgbmF0aXZlVHJhY2s6ICR7dWkodGhpcy5uYXRpdmVUcmFjayl9O1xuICAgIH1gfX07dmFyIHdlPWNsYXNzIGV4dGVuZHMgRGV7Y29uc3RydWN0b3IodCxpLHIpe3N1cGVyKHQsaSxyKTt0aGlzLnR5cGU9XCJhdWRpb1wiO3RoaXMuYXVkaW9FbGVtZW50PW51bGw7aWYoaS5raW5kIT09XCJhdWRpb1wiKXRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkICd0cmFjaycga2luZCA9ICdhdWRpbydcIil9Z2V0Vm9sdW1lKCl7cmV0dXJuIHRoaXMuYXVkaW9FbGVtZW50P01hdGguZmxvb3IodGhpcy5hdWRpb0VsZW1lbnQudm9sdW1lKjEwMCk6bnVsbH1zZXRWb2x1bWUodCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKHQ8MHx8dD4xMDApdGhyb3cgRXJyb3IoXCJQbGVhc2UgcGFzcyBhIHZhbGlkIG51bWJlciBiZXR3ZWVuIDAtMTAwXCIpO3lpZWxkIHRoaXMuc3Vic2NyaWJlVG9BdWRpbyh0PT09MD8hMTp0aGlzLmVuYWJsZWQpLHRoaXMuYXVkaW9FbGVtZW50JiYodGhpcy5hdWRpb0VsZW1lbnQudm9sdW1lPXQvMTAwKX0pfXNldEF1ZGlvRWxlbWVudCh0KXtsLmQoXCJbSE1TQXVkaW9UcmFja11cIix0aGlzLmxvZ0lkZW50aWZpZXIsXCJhZGRpbmcgYXVkaW8gZWxlbWVudFwiLGAke3RoaXN9YCx0KSx0aGlzLmF1ZGlvRWxlbWVudD10fWdldEF1ZGlvRWxlbWVudCgpe3JldHVybiB0aGlzLmF1ZGlvRWxlbWVudH1nZXRPdXRwdXREZXZpY2UoKXtyZXR1cm4gdGhpcy5vdXRwdXREZXZpY2V9Y2xlYW51cCgpe3N1cGVyLmNsZWFudXAoKSx0aGlzLmF1ZGlvRWxlbWVudCYmKHRoaXMuYXVkaW9FbGVtZW50LnNyY09iamVjdD1udWxsLHRoaXMuYXVkaW9FbGVtZW50LnJlbW92ZSgpLHRoaXMuYXVkaW9FbGVtZW50PW51bGwpfXNldE91dHB1dERldmljZSh0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGk7aWYoIXQpe2wuZChcIltITVNBdWRpb1RyYWNrXVwiLHRoaXMubG9nSWRlbnRpZmllcixcImRldmljZSBpcyBudWxsXCIsYCR7dGhpc31gKTtyZXR1cm59aWYoIXRoaXMuYXVkaW9FbGVtZW50KXtsLmQoXCJbSE1TQXVkaW9UcmFja11cIix0aGlzLmxvZ0lkZW50aWZpZXIsXCJubyBhdWRpbyBlbGVtZW50IHRvIHNldCBvdXRwdXRcIixgJHt0aGlzfWApLHRoaXMub3V0cHV0RGV2aWNlPXQ7cmV0dXJufXRyeXt0eXBlb2YgdGhpcy5hdWRpb0VsZW1lbnQuc2V0U2lua0lkPT1cImZ1bmN0aW9uXCImJihkaXx8KHlpZWxkKGk9dGhpcy5hdWRpb0VsZW1lbnQpPT1udWxsP3ZvaWQgMDppLnNldFNpbmtJZCh0LmRldmljZUlkKSksdGhpcy5vdXRwdXREZXZpY2U9dCl9Y2F0Y2gocil7bC5kKFwiW0hNU0F1ZGlvVHJhY2tdXCIsXCJlcnJvciBpbiBzZXRTaW5rSWRcIixyKX19KX1zdWJzY3JpYmVUb0F1ZGlvKHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0aGlzLnN0cmVhbSBpbnN0YW5jZW9mIFBlJiYoeWllbGQgdGhpcy5zdHJlYW0uc2V0QXVkaW8odCx0aGlzLnRyYWNrSWQsdGhpcy5sb2dJZGVudGlmaWVyKSl9KX19O2ltcG9ydCBDbyBmcm9tXCJsb2Rhc2guaXNlcXVhbFwiO3ZhciBIcj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuc3RvcmFnZT1uZXcgZmUoXCJobXMtZGV2aWNlLXNlbGVjdGlvblwiKTt0aGlzLnJlbWVtYmVyPSExO3RoaXMuVEFHPVwiW0hNU0RldmljZVN0b3JhZ2VdXCJ9c2V0RGV2aWNlcyhlKXt0aGlzLmRldmljZXM9ZX1yZW1lbWJlckRldmljZXMoZSl7dGhpcy5yZW1lbWJlcj1lfXVwZGF0ZVNlbGVjdGlvbihlLHtkZXZpY2VJZDp0LGdyb3VwSWQ6aX0pe2lmKCF0aGlzLmRldmljZXN8fCF0aGlzLnJlbWVtYmVyKXJldHVybjtsZXQgcj10aGlzLmRldmljZXNbZV0uZmluZChvPT50aGlzLmlzU2FtZSh7ZGV2aWNlSWQ6dCxncm91cElkOml9LG8pKTtpZighcil7bC53KHRoaXMuVEFHLGBDb3VsZCBub3QgZmluZCBkZXZpY2Ugd2l0aCBkZXZpY2VJZDogJHt0fSwgZ3JvdXBJZDogJHtpfWApO3JldHVybn1sZXQgcz10aGlzLnN0b3JhZ2UuZ2V0KCl8fHt9O3NbZV09cix0aGlzLnN0b3JhZ2Uuc2V0KHMpfWdldFNlbGVjdGlvbigpe2lmKHRoaXMucmVtZW1iZXIpcmV0dXJuIHRoaXMuc3RvcmFnZS5nZXQoKX1jbGVhbnVwKCl7dGhpcy5yZW1lbWJlcj0hMSx0aGlzLmRldmljZXM9dm9pZCAwfWlzU2FtZShlLHQpe3JldHVybiBlLmRldmljZUlkPT09dC5kZXZpY2VJZCYmKGUuZ3JvdXBJZD09PXQuZ3JvdXBJZHx8IWUuZ3JvdXBJZCl9fSxYPW5ldyBIcjt2YXIgQ3I9KHQ9Pih0LlRSQU5TRk9STT1cIlRSQU5TRk9STVwiLHQuQU5BTFlaRT1cIkFOQUxZWkVcIix0KSkoQ3J8fHt9KSxMcj0odD0+KHQuUExBVEZPUk1fTk9UX1NVUFBPUlRFRD1cIlBMQVRGT1JNX05PVF9TVVBQT1JURURcIix0LkRFVklDRV9OT1RfU1VQUE9SVEVEPVwiREVWSUNFX05PVF9TVVBQT1JURURcIix0KSkoTHJ8fHt9KTt2YXIgbWU9Y2xhc3N7c3RhdGljIGZhaWx1cmUoZSx0KXtsZXQgaT1cIm1lZGlhUGx1Z2luLmZhaWxlZFwiLHI9MixzPW0oe3BsdWdpbl9uYW1lOmV9LHQudG9BbmFseXRpY3NQcm9wZXJ0aWVzKCkpO3JldHVybiBuZXcgQyh7bmFtZTppLGxldmVsOnIscHJvcGVydGllczpzfSl9c3RhdGljIGF1ZGlvUGx1Z2luRmFpbHVyZShlLHQsaSl7bGV0IHI9XCJtZWRpYVBsdWdpbi5mYWlsZWRcIixzPTIsbz1tKHtwbHVnaW5fbmFtZTplLHNhbXBsZVJhdGU6dH0saS50b0FuYWx5dGljc1Byb3BlcnRpZXMoKSk7cmV0dXJuIG5ldyBDKHtuYW1lOnIsbGV2ZWw6cyxwcm9wZXJ0aWVzOm99KX1zdGF0aWMgYXVkaW9QbHVnaW5TdGF0cyh7cGx1Z2luTmFtZTplLGR1cmF0aW9uOnQsbG9hZFRpbWU6aSxzYW1wbGVSYXRlOnJ9KXtsZXQgcz1cIm1lZGlhUGx1Z2luLnN0YXRzXCIsbz0xLG49e3BsdWdpbl9uYW1lOmUsZHVyYXRpb246dCxsb2FkX3RpbWU6aSxzYW1wbGVSYXRlOnJ9O3JldHVybiBuZXcgQyh7bmFtZTpzLGxldmVsOm8scHJvcGVydGllczpufSl9c3RhdGljIGFkZGVkKGUsdCl7bGV0IGk9XCJtZWRpYVBsdWdpbi5hZGRlZFwiLHI9MSxzPXtwbHVnaW5fbmFtZTplLGFkZGVkX2F0OnR9O3JldHVybiBuZXcgQyh7bmFtZTppLGxldmVsOnIscHJvcGVydGllczpzfSl9c3RhdGljIHN0YXRzKHtwbHVnaW5OYW1lOmUsZHVyYXRpb246dCxsb2FkVGltZTppLGF2Z1ByZVByb2Nlc3NpbmdUaW1lOnIsYXZnUHJvY2Vzc2luZ1RpbWU6cyxpbnB1dEZyYW1lUmF0ZTpvLHBsdWdpbkZyYW1lUmF0ZTpufSl7bGV0IGQ9XCJtZWRpYVBsdWdpbi5zdGF0c1wiLHU9MSxwPXtwbHVnaW5fbmFtZTplLGR1cmF0aW9uOnQsbG9hZF90aW1lOmksYXZnX3ByZXByb2Nlc3NpbmdfdGltZTpyLGF2Z19wcm9jZXNzaW5nX3RpbWU6cyxpbnB1dF9mcmFtZV9yYXRlOm8scGx1Z2luX2ZyYW1lX3JhdGU6bn07cmV0dXJuIG5ldyBDKHtuYW1lOmQsbGV2ZWw6dSxwcm9wZXJ0aWVzOnB9KX19O3ZhciBwaT1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLmV2ZW50QnVzPWU7dGhpcy5UQUc9XCJbQXVkaW9QbHVnaW5zQW5hbHl0aWNzXVwiO3RoaXMuaW5pdFRpbWU9e30sdGhpcy5hZGRlZFRpbWVzdGFtcHM9e30sdGhpcy5wbHVnaW5BZGRlZD17fSx0aGlzLnBsdWdpblNhbXBsZVJhdGU9e319YWRkZWQoZSx0KXt0aGlzLnBsdWdpbkFkZGVkW2VdPSEwLHRoaXMuYWRkZWRUaW1lc3RhbXBzW2VdPURhdGUubm93KCksdGhpcy5pbml0VGltZVtlXT0wLHRoaXMucGx1Z2luU2FtcGxlUmF0ZVtlXT10LHRoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2gobWUuYWRkZWQoZSx0aGlzLmFkZGVkVGltZXN0YW1wc1tlXSkpfXJlbW92ZWQoZSl7aWYodGhpcy5wbHVnaW5BZGRlZFtlXSl7bGV0IHQ9e3BsdWdpbk5hbWU6ZSxkdXJhdGlvbjpNYXRoLmZsb29yKChEYXRlLm5vdygpLXRoaXMuYWRkZWRUaW1lc3RhbXBzW2VdKS8xZTMpLGxvYWRUaW1lOnRoaXMuaW5pdFRpbWVbZV0sc2FtcGxlUmF0ZTp0aGlzLnBsdWdpblNhbXBsZVJhdGVbZV19O3RoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2gobWUuYXVkaW9QbHVnaW5TdGF0cyh0KSksdGhpcy5jbGVhbihlKX19ZmFpbHVyZShlLHQpe3RoaXMucGx1Z2luQWRkZWRbZV0mJih0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKG1lLmF1ZGlvUGx1Z2luRmFpbHVyZShlLHRoaXMucGx1Z2luU2FtcGxlUmF0ZVtlXSx0KSksdGhpcy5jbGVhbihlKSl9aW5pdFdpdGhUaW1lKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKHRoaXMuaW5pdFRpbWVbZV0pe2wuaSh0aGlzLlRBRyxgUGx1Z2luIEFscmVhZHkgbG9hZGVkICR7ZX0sIHRpbWUgaXQgdG9vazogJHt0aGlzLmluaXRUaW1lW2VdfWApO3JldHVybn1sZXQgaTt0cnl7aT15aWVsZCB0aGlzLnRpbWVJbk1zKHQpLGwuaSh0aGlzLlRBRyxgVGltZSB0YWtlbiBmb3IgUGx1Z2luICR7ZX0gaW5pdGlhbGl6YXRpb24gOiAke2l9YCl9Y2F0Y2gocil7bGV0IHM9Uy5NZWRpYVBsdWdpbkVycm9ycy5Jbml0RmFpbGVkKFwiQVVESU9fUExVR0lOU1wiLGBmYWlsZWQgZHVyaW5nIGluaXRpYWxpemF0aW9uIG9mIHBsdWdpbiR7ci5tZXNzYWdlfHxyfWApO3Rocm93IGwuZSh0aGlzLlRBRyxzKSx0aGlzLmZhaWx1cmUoZSxzKSxzfWkmJih0aGlzLmluaXRUaW1lW2VdPWkpfSl9dGltZUluTXMoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PURhdGUubm93KCk7cmV0dXJuIHlpZWxkIGUoKSxNYXRoLmZsb29yKERhdGUubm93KCktdCl9KX1jbGVhbihlKXtkZWxldGUgdGhpcy5hZGRlZFRpbWVzdGFtcHNbZV0sZGVsZXRlIHRoaXMuaW5pdFRpbWVbZV0sZGVsZXRlIHRoaXMucGx1Z2luQWRkZWRbZV0sZGVsZXRlIHRoaXMucGx1Z2luU2FtcGxlUmF0ZVtlXX19O3ZhciBQdD1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5ldmVudEJ1cz10O3RoaXMuVEFHPVwiW0F1ZGlvUGx1Z2luc01hbmFnZXJdXCI7dGhpcy5wbHVnaW5BZGRJblByb2dyZXNzPSExO3RoaXMuaG1zVHJhY2s9ZSx0aGlzLnBsdWdpbnNNYXA9bmV3IE1hcCx0aGlzLmFuYWx5dGljcz1uZXcgcGkodCksdGhpcy5hdWRpb0NvbnRleHQ9Y2UuZ2V0QXVkaW9Db250ZXh0KCksdGhpcy5yb29tPWl9Z2V0UGx1Z2lucygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMucGx1Z2luc01hcC5rZXlzKCkpfWFkZFBsdWdpbihlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGkscjtsZXQgdD0oaT1lLmdldE5hbWUpPT1udWxsP3ZvaWQgMDppLmNhbGwoZSk7aWYoIXQpe2wudyhcIm5vIG5hbWUgcHJvdmlkZWQgYnkgdGhlIHBsdWdpblwiKTtyZXR1cm59aWYodGhpcy5wbHVnaW5BZGRJblByb2dyZXNzKXtsZXQgcz1TLk1lZGlhUGx1Z2luRXJyb3JzLkFkZEFscmVhZHlJblByb2dyZXNzKFwiQVVESU9fUExVR0lOU1wiLFwiQWRkIFBsdWdpbiBpcyBhbHJlYWR5IGluIFByb2dyZXNzXCIpO3Rocm93IHRoaXMuYW5hbHl0aWNzLmFkZGVkKHQsdGhpcy5hdWRpb0NvbnRleHQuc2FtcGxlUmF0ZSksdGhpcy5hbmFseXRpY3MuZmFpbHVyZSh0LHMpLGwudyhcImNhbid0IGFkZCBhbm90aGVyIHBsdWdpbiB3aGVuIHByZXZpb3VzIGFkZCBpcyBpbiBwcm9ncmVzc1wiKSxzfXN3aXRjaChlLmdldE5hbWUoKSl7Y2FzZVwiSE1TS3Jpc3BQbHVnaW5cIjp7aWYoISgocj10aGlzLnJvb20pIT1udWxsJiZyLmlzTm9pc2VDYW5jZWxsYXRpb25FbmFibGVkKSl7bGV0IHM9XCJLcmlzcCBOb2lzZSBDYW5jZWxsYXRpb24gaXMgbm90IGVuYWJsZWQgZm9yIHRoaXMgcm9vbVwiO2lmKHRoaXMucGx1Z2luc01hcC5zaXplPT09MCl0aHJvdyBFcnJvcihzKTtsLncodGhpcy5UQUcscyk7cmV0dXJufXRoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5rcmlzcFN0YXJ0KCkpO2JyZWFrfWRlZmF1bHQ6fXRoaXMucGx1Z2luQWRkSW5Qcm9ncmVzcz0hMDt0cnl7eWllbGQgdGhpcy5hZGRQbHVnaW5JbnRlcm5hbChlKX1maW5hbGx5e3RoaXMucGx1Z2luQWRkSW5Qcm9ncmVzcz0hMX19KX1hZGRQbHVnaW5JbnRlcm5hbChlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGkscjtsZXQgdD0oaT1lLmdldE5hbWUpPT1udWxsP3ZvaWQgMDppLmNhbGwoZSk7aWYodGhpcy5wbHVnaW5zTWFwLmdldCh0KSl7bC53KHRoaXMuVEFHLGBwbHVnaW4gLSAke3R9IGFscmVhZHkgYWRkZWQuYCk7cmV0dXJufXlpZWxkIHRoaXMudmFsaWRhdGVBbmRUaHJvdyh0LGUpLChyPWUuc2V0RXZlbnRCdXMpPT1udWxsfHxyLmNhbGwoZSx0aGlzLmV2ZW50QnVzKTt0cnl7dGhpcy5wbHVnaW5zTWFwLnNpemU9PT0wP3lpZWxkIHRoaXMuaW5pdEF1ZGlvTm9kZXMoKTp0aGlzLnByZXZBdWRpb05vZGUmJnRoaXMucHJldkF1ZGlvTm9kZS5kaXNjb25uZWN0KCksdGhpcy5hbmFseXRpY3MuYWRkZWQodCx0aGlzLmF1ZGlvQ29udGV4dC5zYW1wbGVSYXRlKSx5aWVsZCB0aGlzLmFuYWx5dGljcy5pbml0V2l0aFRpbWUodCwoKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIGUuaW5pdCgpfSkpLHRoaXMucGx1Z2luc01hcC5zZXQodCxlKSx5aWVsZCB0aGlzLnByb2Nlc3NQbHVnaW4oZSkseWllbGQgdGhpcy5jb25uZWN0VG9EZXN0aW5hdGlvbigpLHlpZWxkIHRoaXMudXBkYXRlUHJvY2Vzc2VkVHJhY2soKX1jYXRjaChzKXt0aHJvdyBsLmUodGhpcy5UQUcsXCJmYWlsZWQgdG8gYWRkIHBsdWdpblwiLHMpLHN9fSl9dmFsaWRhdGVQbHVnaW4oZSl7cmV0dXJuIGUuY2hlY2tTdXBwb3J0KHRoaXMuYXVkaW9Db250ZXh0KX12YWxpZGF0ZUFuZFRocm93KGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBpPXRoaXMudmFsaWRhdGVQbHVnaW4odCk7aWYoaS5pc1N1cHBvcnRlZClsLmkodGhpcy5UQUcsYHBsdWdpbiBpcyBzdXBwb3J0ZWQsLSAke3QuZ2V0TmFtZSgpfWApO2Vsc2UgaWYodGhpcy5hbmFseXRpY3MuYWRkZWQoZSx0aGlzLmF1ZGlvQ29udGV4dC5zYW1wbGVSYXRlKSxpLmVyclR5cGU9PT1cIlBMQVRGT1JNX05PVF9TVVBQT1JURURcIil7bGV0IHI9Uy5NZWRpYVBsdWdpbkVycm9ycy5QbGF0Zm9ybU5vdFN1cHBvcnRlZChcIkFVRElPX1BMVUdJTlNcIixcInBsYXRmb3JtIG5vdCBzdXBwb3J0ZWQsIHNlZSBkb2NzXCIpO3Rocm93IHRoaXMuYW5hbHl0aWNzLmZhaWx1cmUoZSxyKSx5aWVsZCB0aGlzLmNsZWFudXAoKSxyfWVsc2UgaWYoaS5lcnJUeXBlPT09XCJERVZJQ0VfTk9UX1NVUFBPUlRFRFwiKXtsZXQgcj1TLk1lZGlhUGx1Z2luRXJyb3JzLkRldmljZU5vdFN1cHBvcnRlZChcIkFVRElPX1BMVUdJTlNcIixcImF1ZGlvIGRldmljZSBub3Qgc3VwcG9ydGVkLCBzZWUgZG9jc1wiKTt0aHJvdyB0aGlzLmFuYWx5dGljcy5mYWlsdXJlKGUscikseWllbGQgdGhpcy5jbGVhbnVwKCkscn19KX1yZW1vdmVQbHVnaW4oZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3N3aXRjaChlLmdldE5hbWUoKSl7Y2FzZVwiSE1TS3Jpc3BQbHVnaW5cIjp7dGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh5LmtyaXNwU3RvcCgpKTticmVha31kZWZhdWx0OmJyZWFrfXlpZWxkIHRoaXMucmVtb3ZlUGx1Z2luSW50ZXJuYWwoZSksdGhpcy5wbHVnaW5zTWFwLnNpemU9PT0wPyh5aWVsZCB0aGlzLmNsZWFudXAoKSxsLmkodGhpcy5UQUcsXCJObyBwbHVnaW5zIGxlZnQsIHN0b3BwaW5nIHBsdWdpbnMgbG9vcFwiKSx5aWVsZCB0aGlzLmhtc1RyYWNrLnNldFByb2Nlc3NlZFRyYWNrKHZvaWQgMCkpOnlpZWxkIHRoaXMucmVwcm9jZXNzUGx1Z2lucygpfSl9Y2xlYW51cCgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgZSx0LGk7Zm9yKGxldCByIG9mIHRoaXMucGx1Z2luc01hcC52YWx1ZXMoKSl5aWVsZCB0aGlzLnJlbW92ZVBsdWdpbkludGVybmFsKHIpO3lpZWxkIHRoaXMuaG1zVHJhY2suc2V0UHJvY2Vzc2VkVHJhY2sodm9pZCAwKSwoZT10aGlzLnNvdXJjZU5vZGUpPT1udWxsfHxlLmRpc2Nvbm5lY3QoKSwodD10aGlzLnByZXZBdWRpb05vZGUpPT1udWxsfHx0LmRpc2Nvbm5lY3QoKSwoaT10aGlzLm91dHB1dFRyYWNrKT09bnVsbHx8aS5zdG9wKCksdGhpcy5zb3VyY2VOb2RlPXZvaWQgMCx0aGlzLmRlc3RpbmF0aW9uTm9kZT12b2lkIDAsdGhpcy5wcmV2QXVkaW9Ob2RlPXZvaWQgMCx0aGlzLm91dHB1dFRyYWNrPXZvaWQgMH0pfWNsb3NlQ29udGV4dCgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0aGlzLmF1ZGlvQ29udGV4dD12b2lkIDB9KX1yZXByb2Nlc3NQbHVnaW5zKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKHRoaXMucGx1Z2luc01hcC5zaXplPT09MHx8IXRoaXMuc291cmNlTm9kZSlyZXR1cm47bGV0IGU9QXJyYXkuZnJvbSh0aGlzLnBsdWdpbnNNYXAudmFsdWVzKCkpO3lpZWxkIHRoaXMuY2xlYW51cCgpLHlpZWxkIHRoaXMuaW5pdEF1ZGlvTm9kZXMoKTtmb3IobGV0IHQgb2YgZSl5aWVsZCB0aGlzLmFkZFBsdWdpbih0KTt5aWVsZCB0aGlzLnVwZGF0ZVByb2Nlc3NlZFRyYWNrKCl9KX1pbml0QXVkaW9Ob2Rlcygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZih0aGlzLmF1ZGlvQ29udGV4dCl7bGV0IGU9bmV3IE1lZGlhU3RyZWFtKFt0aGlzLmhtc1RyYWNrLm5hdGl2ZVRyYWNrXSk7dGhpcy5zb3VyY2VOb2RlPXRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKGUpLHRoaXMuZGVzdGluYXRpb25Ob2RlfHwodGhpcy5kZXN0aW5hdGlvbk5vZGU9dGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbigpLHRoaXMub3V0cHV0VHJhY2s9dGhpcy5kZXN0aW5hdGlvbk5vZGUuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0pfX0pfXVwZGF0ZVByb2Nlc3NlZFRyYWNrKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RyeXt5aWVsZCB0aGlzLmhtc1RyYWNrLnNldFByb2Nlc3NlZFRyYWNrKHRoaXMub3V0cHV0VHJhY2spfWNhdGNoKGUpe3Rocm93IGwuZSh0aGlzLlRBRyxcImVycm9yIGluIHNldHRpbmcgcHJvY2Vzc2VkIHRyYWNrXCIsZSksZX19KX1wcm9jZXNzUGx1Z2luKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7bGV0IHQ9eWllbGQgZS5wcm9jZXNzQXVkaW9UcmFjayh0aGlzLmF1ZGlvQ29udGV4dCx0aGlzLnByZXZBdWRpb05vZGV8fHRoaXMuc291cmNlTm9kZSk7dGhpcy5wcmV2QXVkaW9Ob2RlJiZ0aGlzLnByZXZBdWRpb05vZGUuY29ubmVjdCh0KSx0aGlzLnByZXZBdWRpb05vZGU9dH1jYXRjaCh0KXtsZXQgaT1lLmdldE5hbWUoKTtsLmUodGhpcy5UQUcsYGVycm9yIGluIHByb2Nlc3NpbmcgcGx1Z2luICR7aX1gLHQpLHlpZWxkIHRoaXMucmVtb3ZlUGx1Z2luSW50ZXJuYWwoZSl9fSl9Y29ubmVjdFRvRGVzdGluYXRpb24oKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dHJ5e3RoaXMucHJldkF1ZGlvTm9kZSYmdGhpcy5kZXN0aW5hdGlvbk5vZGUmJnRoaXMucHJldkF1ZGlvTm9kZS5jb250ZXh0PT09dGhpcy5kZXN0aW5hdGlvbk5vZGUuY29udGV4dCYmdGhpcy5wcmV2QXVkaW9Ob2RlLmNvbm5lY3QodGhpcy5kZXN0aW5hdGlvbk5vZGUpfWNhdGNoKGUpe2wuZSh0aGlzLlRBRyxcImVycm9yIGluIGNvbm5lY3RpbmcgdG8gZGVzdGluYXRpb24gbm9kZVwiLGUpfX0pfXJlbW92ZVBsdWdpbkludGVybmFsKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgaTtsZXQgdD0oaT1lLmdldE5hbWUpPT1udWxsP3ZvaWQgMDppLmNhbGwoZSk7aWYoIXRoaXMucGx1Z2luc01hcC5nZXQodCkpe2wudyh0aGlzLlRBRyxgcGx1Z2luIC0gJHt0fSBub3QgZm91bmQgdG8gcmVtb3ZlLmApO3JldHVybn1sLmkodGhpcy5UQUcsYHJlbW92aW5nIHBsdWdpbiAke3R9YCksdGhpcy5wbHVnaW5zTWFwLmRlbGV0ZSh0KSxlLnN0b3AoKSx0aGlzLmFuYWx5dGljcy5yZW1vdmVkKHQpfSl9fTtpbXBvcnQgVXMgZnJvbVwid2VicnRjLWFkYXB0ZXJcIjtmdW5jdGlvbiBibyhhLGUpe2xldCB0PWEudG9Mb3dlckNhc2UoKSxpPVMuVHJhY2tzRXJyb3JzLkdlbmVyaWNUcmFjayhcIlRSQUNLXCIsYSk7cmV0dXJuIHQuaW5jbHVkZXMoXCJkZXZpY2Ugbm90IGZvdW5kXCIpP2k9Uy5UcmFja3NFcnJvcnMuRGV2aWNlTm90QXZhaWxhYmxlKFwiVFJBQ0tcIixlLGEpOnQuaW5jbHVkZXMoXCJwZXJtaXNzaW9uIGRlbmllZFwiKSYmKGk9Uy5UcmFja3NFcnJvcnMuQ2FudEFjY2Vzc0NhcHR1cmVEZXZpY2UoXCJUUkFDS1wiLGUsYSkpLGl9ZnVuY3Rpb24gQW8oYSxlPVwiXCIpe2lmKFVzLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXI9PT1cImNocm9tZVwiJiZhLm5hbWU9PT1cIk5vdEFsbG93ZWRFcnJvclwiJiZhLm1lc3NhZ2UuaW5jbHVkZXMoXCJkZW5pZWQgYnkgc3lzdGVtXCIpKXJldHVybiBTLlRyYWNrc0Vycm9ycy5TeXN0ZW1EZW5pZWRQZXJtaXNzaW9uKFwiVFJBQ0tcIixlLGEubWVzc2FnZSk7aWYoVXMuYnJvd3NlckRldGFpbHMuYnJvd3Nlcj09PVwiZmlyZWZveFwiJiZhLm5hbWU9PT1cIk5vdEZvdW5kRXJyb3JcIil7bGV0IGk9Uy5UcmFja3NFcnJvcnMuU3lzdGVtRGVuaWVkUGVybWlzc2lvbihcIlRSQUNLXCIsZSxhLm1lc3NhZ2UpO3JldHVybiBpLmRlc2NyaXB0aW9uPWBDYXB0dXJlIGRldmljZSBpcyBlaXRoZXIgYmxvY2tlZCBhdCBPcGVyYXRpbmcgU3lzdGVtIGxldmVsIG9yIG5vdCBhdmFpbGFibGUgLSAke2V9YCxpfXN3aXRjaChhLm5hbWUpe2Nhc2VcIk92ZXJjb25zdHJhaW5lZEVycm9yXCI6cmV0dXJuIFMuVHJhY2tzRXJyb3JzLk92ZXJDb25zdHJhaW5lZChcIlRSQUNLXCIsZSxhLmNvbnN0cmFpbnQpO2Nhc2VcIk5vdEFsbG93ZWRFcnJvclwiOnJldHVybiBTLlRyYWNrc0Vycm9ycy5DYW50QWNjZXNzQ2FwdHVyZURldmljZShcIlRSQUNLXCIsZSxhLm1lc3NhZ2UpO2Nhc2VcIk5vdEZvdW5kRXJyb3JcIjpyZXR1cm4gUy5UcmFja3NFcnJvcnMuRGV2aWNlTm90QXZhaWxhYmxlKFwiVFJBQ0tcIixlLGEubWVzc2FnZSk7Y2FzZVwiTm90UmVhZGFibGVFcnJvclwiOnJldHVybiBTLlRyYWNrc0Vycm9ycy5EZXZpY2VJblVzZShcIlRSQUNLXCIsZSxhLm1lc3NhZ2UpO2Nhc2VcIlR5cGVFcnJvclwiOnJldHVybiBTLlRyYWNrc0Vycm9ycy5Ob3RoaW5nVG9SZXR1cm4oXCJUUkFDS1wiLGEubWVzc2FnZSk7ZGVmYXVsdDpyZXR1cm4gYm8oYS5tZXNzYWdlLGUpfX1mdW5jdGlvbiBfZShhLGUpe2xldCB0PUFvKGEsZSk7cmV0dXJuIHQuYWRkTmF0aXZlRXJyb3IoYSksdH1mdW5jdGlvbiBEcihhKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dHJ5e2xldCBlPWE/YS50b0NvbnN0cmFpbnRzKCk6ITE7cmV0dXJuIGUmJnR5cGVvZiBlPT1cIm9iamVjdFwiJiYoYSE9bnVsbCYmYS5kZXZpY2VJZCkmJihlLmRldmljZUlkPXtleGFjdDphLmRldmljZUlkfSksKHlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHthdWRpbzplfSkpLmdldEF1ZGlvVHJhY2tzKClbMF19Y2F0Y2goZSl7dGhyb3cgX2UoZSxcImF1ZGlvXCIpfX0pfWZ1bmN0aW9uIHdyKGEpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7bGV0IGU9YT9hLnRvQ29uc3RyYWludHMoKTohMTtyZXR1cm4gZSYmdHlwZW9mIGU9PVwib2JqZWN0XCImJihhIT1udWxsJiZhLmRldmljZUlkKSYmKGUuZGV2aWNlSWQ9e2V4YWN0OmEuZGV2aWNlSWR9KSwoeWllbGQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe3ZpZGVvOmV9KSkuZ2V0VmlkZW9UcmFja3MoKVswXX1jYXRjaChlKXt0aHJvdyBfZShlLFwidmlkZW9cIil9fSl9ZnVuY3Rpb24gdmUoYSl7cmV0dXJuXCJjYW52YXNcImluIGF8fGEubGFiZWw9PT1cIk1lZGlhU3RyZWFtQXVkaW9EZXN0aW5hdGlvbk5vZGVcInx8YS5sYWJlbD09PVwiXCJ9dmFyIGhpPShhLGUpPT57aWYoIW5hdmlnYXRvci5wZXJtaXNzaW9ucyl7bC5kKFwiUGVybWlzc2lvbnMgQVBJIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJufW5hdmlnYXRvci5wZXJtaXNzaW9ucy5xdWVyeSh7bmFtZTphfSkudGhlbih0PT57dC5vbmNoYW5nZT0oKT0+e2UodC5zdGF0ZSl9fSkuY2F0Y2godD0+e2wuZShgJHthfSBub3Qgc3VwcG9ydGVkYCx0Lm1lc3NhZ2UpfSl9O3ZhciBJbz0zMmUzO3ZhciBjZT17YXVkaW9Db250ZXh0Om51bGwsZ2V0QXVkaW9Db250ZXh0KCl7cmV0dXJuIHRoaXMuYXVkaW9Db250ZXh0fHwodGhpcy5hdWRpb0NvbnRleHQ9ZGk/bmV3IEF1ZGlvQ29udGV4dDpuZXcgQXVkaW9Db250ZXh0KHtzYW1wbGVSYXRlOklvfSkpLHRoaXMuYXVkaW9Db250ZXh0fSxyZXN1bWVDb250ZXh0KCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RyeXtyZXR1cm4geWllbGQgdGhpcy5nZXRBdWRpb0NvbnRleHQoKS5yZXN1bWUoKX1jYXRjaChhKXtsLmUoXCJBdWRpb0NvbnRleHRcIixhKX19KX19LF9yPShyPT4oci5TUEVBS0VSUEhPTkU9XCJTUEVBS0VSUEhPTkVcIixyLldJUkVEPVwiV0lSRURcIixyLkJMVUVUT09USD1cIkJMVUVUT09USFwiLHIuRUFSUElFQ0U9XCJFQVJQSUVDRVwiLHIpKShfcnx8e30pLE5yPWE9PntpZighYSlyZXR1cm4gbC53KFwiW0RldmljZU1hbmFnZXJdOlwiLFwiTm8gZGV2aWNlIGxhYmVsIHByb3ZpZGVkXCIpLFwiU1BFQUtFUlBIT05FXCI7bGV0IGU9YS50b0xvd2VyQ2FzZSgpO3JldHVybiBlLmluY2x1ZGVzKFwic3BlYWtlcnBob25lXCIpP1wiU1BFQUtFUlBIT05FXCI6ZS5pbmNsdWRlcyhcIndpcmVkXCIpP1wiV0lSRURcIjovYWlycG9kc3xidWRzfHdpcmVsZXNzfGJsdWV0b290aC9naS50ZXN0KGUpP1wiQkxVRVRPT1RIXCI6ZS5pbmNsdWRlcyhcImVhcnBpZWNlXCIpP1wiRUFSUElFQ0VcIjpcIlNQRUFLRVJQSE9ORVwifTt2YXIgTmU9Y2xhc3N7Y29uc3RydWN0b3IoZT0xLzApe3RoaXMuY2FwYWNpdHk9ZTt0aGlzLnN0b3JhZ2U9W119c2l6ZSgpe3JldHVybiB0aGlzLnN0b3JhZ2UubGVuZ3RofXRvTGlzdCgpe3JldHVybiB0aGlzLnN0b3JhZ2Uuc2xpY2UoMCl9ZW5xdWV1ZShlKXt0aGlzLnNpemUoKT09PXRoaXMuY2FwYWNpdHkmJnRoaXMuZGVxdWV1ZSgpLHRoaXMuc3RvcmFnZS5wdXNoKGUpfWRlcXVldWUoKXtyZXR1cm4gdGhpcy5zdG9yYWdlLnNoaWZ0KCl9YWdncmVnYXRlKGUpe3JldHVybiBlKHRoaXMuc3RvcmFnZSl9fTt2YXIgQnM9YChmdW5jdGlvbiB3b3JrZXJTZXR1cCgpIHtcbiAgZnVuY3Rpb24gdGlja2VyKCkge1xuICAgIHNlbGYucG9zdE1lc3NhZ2UoJ3RpY2snKTtcbiAgfVxuICBzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNvbnN0IFtkYXRhLCB0aW1lXSA9IGV2ZW50LmRhdGE7XG4gICAgc3dpdGNoIChkYXRhKSB7XG4gICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgIHNldFRpbWVvdXQodGlja2VyLCB0aW1lKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG59KSgpYDtmdW5jdGlvbiBKKGEpe2lmKGE8MCl0aHJvdyBFcnJvcihcImBtc2Agc2hvdWxkIGJlIGEgcG9zaXRpdmUgaW50ZWdlclwiKTtyZXR1cm4gbmV3IFByb21pc2UoZT0+e3NldFRpbWVvdXQoZSxhKX0pfWZ1bmN0aW9uIE9lKGEpe2lmKGE8MCl0aHJvdyBFcnJvcihcImBtc2Agc2hvdWxkIGJlIGEgcG9zaXRpdmUgaW50ZWdlclwiKTtpZih0eXBlb2YgV29ya2VyPT1cInVuZGVmaW5lZFwiKXJldHVybiBKKGEpO2xldCBlPW5ldyBXb3JrZXIoVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbQnNdLHt0eXBlOlwiYXBwbGljYXRpb24vamF2YXNjcmlwdFwifSkpKTtyZXR1cm4gZS5wb3N0TWVzc2FnZShbXCJzdGFydFwiLGFdKSxuZXcgUHJvbWlzZSh0PT57ZS5vbm1lc3NhZ2U9aT0+e2kuZGF0YT09PVwidGlja1wiJiYodCgpLGUudGVybWluYXRlKCkpfX0pfWZ1bmN0aW9uIFZzKCl7aWYodHlwZW9mIFdvcmtlcj09XCJ1bmRlZmluZWRcIilyZXR1cm57c2xlZXA6ZT0+SihlKX07bGV0IGE9bmV3IFdvcmtlcihVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtCc10se3R5cGU6XCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0XCJ9KSkpO3JldHVybntzbGVlcDplPT4oYS5wb3N0TWVzc2FnZShbXCJzdGFydFwiLGVdKSxuZXcgUHJvbWlzZSh0PT57YS5vbm1lc3NhZ2U9aT0+e2kuZGF0YT09PVwidGlja1wiJiZ0KCl9fSkpfX1mdW5jdGlvbiBtaShhLGU9MzAwKXtsZXQgdDtyZXR1cm4gZnVuY3Rpb24oLi4uaSl7Y2xlYXJUaW1lb3V0KHQpLHQ9dm9pZCAwO2xldCByPXRoaXM7dD1zZXRUaW1lb3V0KCgpPT57YS5hcHBseShyLGkpfSxlKX19dmFyIFJvPTM1LEhvPTUsU2k9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMudHJhY2s9ZTt0aGlzLmF1ZGlvTGV2ZWxFdmVudD10O3RoaXMuc2lsZW5jZUV2ZW50PWk7dGhpcy5UQUc9XCJbVHJhY2tBdWRpb0xldmVsTW9uaXRvcl1cIjt0aGlzLmF1ZGlvTGV2ZWw9MDt0aGlzLmlzTW9uaXRvcmVkPSExO3RoaXMuaW50ZXJ2YWw9MTAwO3RoaXMuaGlzdG9yeUludGVydmFsPTcwMDt0aGlzLmhpc3Rvcnk9bmV3IE5lKHRoaXMuaGlzdG9yeUludGVydmFsL3RoaXMuaW50ZXJ2YWwpO3RoaXMuZGV0ZWN0U2lsZW5jZT0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGk9MDtmb3IoO3RoaXMuaXNNb25pdG9yZWQ7KXtpZih0aGlzLnRyYWNrLmVuYWJsZWQpaWYodGhpcy5pc1NpbGVudFRoaXNJbnN0YW50KCkpe2lmKGkrKyxpPjUwKXt0aGlzLnNpbGVuY2VFdmVudC5wdWJsaXNoKHt0cmFjazp0aGlzLnRyYWNrfSk7YnJlYWt9fWVsc2UgYnJlYWs7eWllbGQgSigyMCl9fSk7dHJ5e2xldCByPW5ldyBNZWRpYVN0cmVhbShbdGhpcy50cmFjay5uYXRpdmVUcmFja10pO3RoaXMuYW5hbHlzZXJOb2RlPXRoaXMuY3JlYXRlQW5hbHlzZXJOb2RlRm9yU3RyZWFtKHIpO2xldCBzPXRoaXMuYW5hbHlzZXJOb2RlLmZyZXF1ZW5jeUJpbkNvdW50O3RoaXMuZGF0YUFycmF5PW5ldyBVaW50OEFycmF5KHMpfWNhdGNoKHIpe2wudyh0aGlzLlRBRyxcIlVuYWJsZSB0byBpbml0aWFsaXplIEF1ZGlvQ29udGV4dFwiLHIpfX1zdGFydCgpe3RoaXMuc3RvcCgpLHRoaXMuaXNNb25pdG9yZWQ9ITAsbC5kKHRoaXMuVEFHLFwiU3RhcnRpbmcgdHJhY2sgTW9uaXRvclwiLGAke3RoaXMudHJhY2t9YCksdGhpcy5sb29wKCkudGhlbigoKT0+bC5kKHRoaXMuVEFHLFwiU3RvcHBpbmcgdHJhY2sgTW9uaXRvclwiLGAke3RoaXMudHJhY2t9YCkpfXN0b3AoKXtpZighdGhpcy5hbmFseXNlck5vZGUpe2wuZCh0aGlzLlRBRyxcIkF1ZGlvQ29udGV4dCBub3QgaW5pdGlhbGl6ZWRcIik7cmV0dXJufXRoaXMuc2VuZEF1ZGlvTGV2ZWwoMCksdGhpcy5pc01vbml0b3JlZD0hMX1sb29wKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2Zvcig7dGhpcy5pc01vbml0b3JlZDspdGhpcy5zZW5kQXVkaW9MZXZlbCh0aGlzLmdldE1heEF1ZGlvTGV2ZWxPdmVyUGVyaW9kKCkpLHlpZWxkIEoodGhpcy5pbnRlcnZhbCl9KX1zZW5kQXVkaW9MZXZlbChlPTApe2lmKGU9ZT5Sbz9lOjAsTWF0aC5hYnModGhpcy5hdWRpb0xldmVsLWUpPkhvKXt0aGlzLmF1ZGlvTGV2ZWw9ZTtsZXQgaT17dHJhY2s6dGhpcy50cmFjayxhdWRpb0xldmVsOnRoaXMuYXVkaW9MZXZlbH07dGhpcy5hdWRpb0xldmVsRXZlbnQucHVibGlzaChpKX19Z2V0TWF4QXVkaW9MZXZlbE92ZXJQZXJpb2QoKXtpZighdGhpcy5hbmFseXNlck5vZGUpe2wuZCh0aGlzLlRBRyxcIkF1ZGlvQ29udGV4dCBub3QgaW5pdGlhbGl6ZWRcIik7cmV0dXJufWxldCBlPXRoaXMuY2FsY3VsYXRlQXVkaW9MZXZlbCgpO3JldHVybiBlIT09dm9pZCAwJiZ0aGlzLmhpc3RvcnkuZW5xdWV1ZShlKSx0aGlzLmhpc3RvcnkuYWdncmVnYXRlKHQ9Pk1hdGgubWF4KC4uLnQpKX1jYWxjdWxhdGVBdWRpb0xldmVsKCl7aWYoIXRoaXMuYW5hbHlzZXJOb2RlfHwhdGhpcy5kYXRhQXJyYXkpe2wuZCh0aGlzLlRBRyxcIkF1ZGlvQ29udGV4dCBub3QgaW5pdGlhbGl6ZWRcIik7cmV0dXJufXRoaXMuYW5hbHlzZXJOb2RlLmdldEJ5dGVUaW1lRG9tYWluRGF0YSh0aGlzLmRhdGFBcnJheSk7bGV0IGU9LjAwOSx0PWU7Zm9yKGxldCBzIG9mIHRoaXMuZGF0YUFycmF5KXQ9TWF0aC5tYXgodCwocy0xMjgpLzEyOCk7bGV0IGk9KE1hdGgubG9nKGUpLU1hdGgubG9nKHQpKS9NYXRoLmxvZyhlKTtyZXR1cm4gTWF0aC5jZWlsKE1hdGgubWluKE1hdGgubWF4KGkqMTAwLDApLDEwMCkpfWlzU2lsZW50VGhpc0luc3RhbnQoKXtpZighdGhpcy5hbmFseXNlck5vZGV8fCF0aGlzLmRhdGFBcnJheSl7bC5kKHRoaXMuVEFHLFwiQXVkaW9Db250ZXh0IG5vdCBpbml0aWFsaXplZFwiKTtyZXR1cm59cmV0dXJuIHRoaXMuYW5hbHlzZXJOb2RlLmdldEJ5dGVUaW1lRG9tYWluRGF0YSh0aGlzLmRhdGFBcnJheSksdGhpcy5kYXRhQXJyYXkuZXZlcnkoZT0+ZT09PTEyOHx8ZT09PTApfWNyZWF0ZUFuYWx5c2VyTm9kZUZvclN0cmVhbShlKXtsZXQgdD1jZS5nZXRBdWRpb0NvbnRleHQoKSxpPXQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UoZSkscj10LmNyZWF0ZUFuYWx5c2VyKCk7cmV0dXJuIHIuZmZ0U2l6ZT0yMDQ4LGkuY29ubmVjdChyKSxyfX07dmFyIE9yPSh0PT4odC5TSVA9XCJzaXBcIix0LlJFR1VMQVI9XCJyZWd1bGFyXCIsdCkpKE9yfHx7fSk7dmFyIEZzPShuPT4obi5OT05FPVwibm9uZVwiLG4uSU5JVElBTElTRUQ9XCJpbml0aWFsaXNlZFwiLG4uU1RBUlRFRD1cInN0YXJ0ZWRcIixuLlBBVVNFRD1cInBhdXNlZFwiLG4uUkVTVU1FRD1cInJlc3VtZWRcIixuLlNUT1BQRUQ9XCJzdG9wcGVkXCIsbi5GQUlMRUQ9XCJmYWlsZWRcIixuKSkoRnN8fHt9KTt2YXIgR3M9KHQ9Pih0LkRWUj1cImR2clwiLHQuTk9fRFZSPVwibm8tZHZyXCIsdCkpKEdzfHx7fSksV3M9KGk9PihpLlJFR1VMQVI9XCJyZWd1bGFyXCIsaS5TQ1JFRU49XCJzY3JlZW5cIixpLkNPTVBPU0lURT1cImNvbXBvc2l0ZVwiLGkpKShXc3x8e30pLCRzPShyPT4oci5JTklUSUFMSVNFRD1cImluaXRpYWxpc2VkXCIsci5TVEFSVEVEPVwic3RhcnRlZFwiLHIuU1RPUFBFRD1cInN0b3BwZWRcIixyLkZBSUxFRD1cImZhaWxlZFwiLHIpKSgkc3x8e30pLEtzPShlPT4oZS5DQVBUSU9OPVwiY2FwdGlvblwiLGUpKShLc3x8e30pO3ZhciBXZT17ZjpcImhpZ2hcIixoOlwibWVkaXVtXCIscTpcImxvd1wifTt2YXIgeHI9KHQ9Pih0LlZPSUNFPVwidm9pY2VcIix0Lk1VU0lDPVwibXVzaWNcIix0KSkoeHJ8fHt9KTt2YXIgcXM9KGk9PihpLnZpZGVvSW5wdXQ9XCJ2aWRlb0lucHV0XCIsaS5hdWRpb0lucHV0PVwiYXVkaW9JbnB1dFwiLGkuYXVkaW9PdXRwdXQ9XCJhdWRpb091dHB1dFwiLGkpKShxc3x8e30pO3ZhciBRPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5fdm9sdW1lPTE7dGhpcy5fY29kZWM9XCJvcHVzXCI7dGhpcy5fbWF4Qml0cmF0ZT0zMjt0aGlzLl9kZXZpY2VJZD1cImRlZmF1bHRcIjt0aGlzLl9hdWRpb01vZGU9XCJ2b2ljZVwiO3RoaXMuX2FkdmFuY2VkPVt7YXV0b0dhaW5Db250cm9sOntleGFjdDohMH19LHtub2lzZVN1cHByZXNzaW9uOntleGFjdDohMH19LHtoaWdocGFzc0ZpbHRlcjp7ZXhhY3Q6ITB9fSx7YXVkaW9NaXJyb3Jpbmc6e2V4YWN0OiEwfX1dfXZvbHVtZShlKXtpZighKDA8PWUmJmU8PTEpKXRocm93IEVycm9yKFwidm9sdW1lIGNhbiBvbmx5IGJlIGluIHJhbmdlIFswLjAsIDEuMF1cIik7cmV0dXJuIHRoaXMuX3ZvbHVtZT1lLHRoaXN9Y29kZWMoZSl7cmV0dXJuIHRoaXMuX2NvZGVjPWUsdGhpc31tYXhCaXRyYXRlKGUpe2lmKGUmJmU8PTApdGhyb3cgRXJyb3IoXCJtYXhCaXRyYXRlIHNob3VsZCBiZSA+PSAxXCIpO3JldHVybiB0aGlzLl9tYXhCaXRyYXRlPXRoaXMuX2F1ZGlvTW9kZT09PVwibXVzaWNcIj8zMjA6ZSx0aGlzfWRldmljZUlkKGUpe3JldHVybiB0aGlzLl9kZXZpY2VJZD1lLHRoaXN9YXVkaW9Nb2RlKGU9XCJ2b2ljZVwiKXtyZXR1cm4gdGhpcy5fYXVkaW9Nb2RlPWUsdGhpcy5fYXVkaW9Nb2RlPT09XCJtdXNpY1wiP3RoaXMuX21heEJpdHJhdGU9MzIwOnRoaXMuX21heEJpdHJhdGU9MzIsdGhpc31hZHZhbmNlZChlKXtyZXR1cm4gdGhpcy5fYWR2YW5jZWQ9ZSx0aGlzfWJ1aWxkKCl7cmV0dXJuIG5ldyAkZSh0aGlzLl92b2x1bWUsdGhpcy5fY29kZWMsdGhpcy5fbWF4Qml0cmF0ZSx0aGlzLl9kZXZpY2VJZCx0aGlzLl9hZHZhbmNlZCx0aGlzLl9hdWRpb01vZGUpfX0sJGU9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkscixzLG8pe3RoaXMudm9sdW1lPWUsdGhpcy5jb2RlYz10LHRoaXMubWF4Qml0cmF0ZT1pLHRoaXMuZGV2aWNlSWQ9cix0aGlzLmFkdmFuY2VkPXMsdGhpcy5hdWRpb01vZGU9byx0aGlzLmF1ZGlvTW9kZT09PVwibXVzaWNcIj90aGlzLm1heEJpdHJhdGU9MzIwOnRoaXMubWF4Qml0cmF0ZT0zMn10b0NvbnN0cmFpbnRzKCl7cmV0dXJue2RldmljZUlkOnRoaXMuZGV2aWNlSWQsYWR2YW5jZWQ6dGhpcy5hdWRpb01vZGU9PT1cIm11c2ljXCI/W106dGhpcy5hZHZhbmNlZH19dG9BbmFseXRpY3NQcm9wZXJ0aWVzKCl7cmV0dXJue2F1ZGlvX2JpdHJhdGU6dGhpcy5tYXhCaXRyYXRlLGF1ZGlvX2NvZGVjOnRoaXMuY29kZWN9fX07dmFyIHE9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLl93aWR0aD0zMjA7dGhpcy5faGVpZ2h0PTE4MDt0aGlzLl9jb2RlYz1cInZwOFwiO3RoaXMuX21heEZyYW1lcmF0ZT0zMDt0aGlzLl9tYXhCaXRyYXRlPTE1MDt0aGlzLl9hZHZhbmNlZD1bXX1zZXRXaWR0aChlKXtyZXR1cm4gdGhpcy5fd2lkdGg9ZSx0aGlzfXNldEhlaWdodChlKXtyZXR1cm4gdGhpcy5faGVpZ2h0PWUsdGhpc31jb2RlYyhlKXtyZXR1cm4gdGhpcy5fY29kZWM9ZSx0aGlzfW1heEZyYW1lcmF0ZShlKXtpZihlJiZlPD0wKXRocm93IEVycm9yKFwibWF4RnJhbWVyYXRlIHNob3VsZCBiZSA+PSAxXCIpO3JldHVybiB0aGlzLl9tYXhGcmFtZXJhdGU9ZSx0aGlzfW1heEJpdHJhdGUoZSx0PSEwKXtpZih0eXBlb2YgZT09XCJudW1iZXJcIiYmZTw9MCl0aHJvdyBFcnJvcihcIm1heEJpdHJhdGUgc2hvdWxkIGJlID49IDFcIik7cmV0dXJuIHRoaXMuX21heEJpdHJhdGU9ZSwhdGhpcy5fbWF4Qml0cmF0ZSYmdCYmKHRoaXMuX21heEJpdHJhdGU9MTVlNCksdGhpc31kZXZpY2VJZChlKXtyZXR1cm4gdGhpcy5fZGV2aWNlSWQ9ZSx0aGlzfWFkdmFuY2VkKGUpe3JldHVybiB0aGlzLl9hZHZhbmNlZD1lLHRoaXN9ZmFjaW5nTW9kZShlKXtyZXR1cm4gdGhpcy5fZmFjaW5nTW9kZT1lLHRoaXN9YnVpbGQoKXtyZXR1cm4gbmV3IEtlKHRoaXMuX3dpZHRoLHRoaXMuX2hlaWdodCx0aGlzLl9jb2RlYyx0aGlzLl9tYXhGcmFtZXJhdGUsdGhpcy5fZGV2aWNlSWQsdGhpcy5fYWR2YW5jZWQsdGhpcy5fbWF4Qml0cmF0ZSx0aGlzLl9mYWNpbmdNb2RlKX19LEtlPWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpLHIscyxvLG4sZCl7dGhpcy53aWR0aD1lLHRoaXMuaGVpZ2h0PXQsdGhpcy5jb2RlYz1pLHRoaXMubWF4RnJhbWVyYXRlPXIsdGhpcy5tYXhCaXRyYXRlPW4sdGhpcy5kZXZpY2VJZD1zLHRoaXMuYWR2YW5jZWQ9byx0aGlzLmZhY2luZ01vZGU9ZH10b0NvbnN0cmFpbnRzKGUpe2xldCB0PVwiaWRlYWxcIjtlJiYodD1cIm1heFwiKTtsZXQgaT10aGlzLmltcHJvdmlzZUNvbnN0cmFpbnRzQXNwZWN0KCk7cmV0dXJue3dpZHRoOntbdF06aS53aWR0aH0saGVpZ2h0OntbdF06aS5oZWlnaHR9LGZyYW1lUmF0ZTp0aGlzLm1heEZyYW1lcmF0ZSxkZXZpY2VJZDp0aGlzLmRldmljZUlkLGZhY2luZ01vZGU6dGhpcy5mYWNpbmdNb2RlfX10b0FuYWx5dGljc1Byb3BlcnRpZXMoKXtyZXR1cm57d2lkdGg6dGhpcy53aWR0aCxoZWlnaHQ6dGhpcy5oZWlnaHQsdmlkZW9fYml0cmF0ZTp0aGlzLm1heEJpdHJhdGUsZnJhbWVyYXRlOnRoaXMubWF4RnJhbWVyYXRlLHZpZGVvX2NvZGVjOnRoaXMuY29kZWMsZmFjaW5nTW9kZTp0aGlzLmZhY2luZ01vZGV9fWltcHJvdmlzZUNvbnN0cmFpbnRzQXNwZWN0KCl7cmV0dXJuIE10KCkmJnRoaXMuaGVpZ2h0JiZ0aGlzLndpZHRoJiZ0aGlzLmhlaWdodD50aGlzLndpZHRoP3t3aWR0aDp0aGlzLmhlaWdodCxoZWlnaHQ6dGhpcy53aWR0aH06e3dpZHRoOnRoaXMud2lkdGgsaGVpZ2h0OnRoaXMuaGVpZ2h0fX19O3ZhciB4ZT1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuX3ZpZGVvPW5ldyBxKCkuYnVpbGQoKTt0aGlzLl9hdWRpbz1uZXcgUSgpLmJ1aWxkKCk7dGhpcy5fc2NyZWVuPW5ldyBxKCkuYnVpbGQoKTt0aGlzLl9zaW11bGNhc3Q9ITF9dmlkZW8oZSl7cmV0dXJuIHRoaXMuX3ZpZGVvPWUsdGhpc31hdWRpbyhlKXtyZXR1cm4gdGhpcy5fYXVkaW89ZSx0aGlzfXNjcmVlbihlKXtyZXR1cm4gdGhpcy5fc2NyZWVuPWUsdGhpc31zaW11bGNhc3QoZSl7cmV0dXJuIHRoaXMuX3NpbXVsY2FzdD1lLHRoaXN9YnVpbGQoKXtpZih0aGlzLl9hdWRpbz09PW51bGwmJnRoaXMuX3ZpZGVvPT09bnVsbCl0aHJvdyBTLlRyYWNrc0Vycm9ycy5Ob3RoaW5nVG9SZXR1cm4oXCJUUkFDS1wiKTtpZih0aGlzLl92aWRlbz09PW51bGwmJnRoaXMuX3NpbXVsY2FzdCl0aHJvdyBTLlRyYWNrc0Vycm9ycy5JbnZhbGlkVmlkZW9TZXR0aW5ncyhcIlRSQUNLXCIsXCJDYW5ub3QgZW5hYmxlIHNpbXVsY2FzdCB3aGVuIG5vIHZpZGVvIHNldHRpbmdzIGFyZSBwcm92aWRlZFwiKTtyZXR1cm4gbmV3IFplKHRoaXMuX3ZpZGVvLHRoaXMuX2F1ZGlvLHRoaXMuX3NpbXVsY2FzdCx0aGlzLl9zY3JlZW58fHZvaWQgMCl9fSxaZT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSxyPW51bGwpe3RoaXMudmlkZW89ZSx0aGlzLmF1ZGlvPXQsdGhpcy5zaW11bGNhc3Q9aSx0aGlzLnNjcmVlbj1yfXRvQW5hbHl0aWNzUHJvcGVydGllcygpe2xldCBlPXthdWRpb19lbmFibGVkOnRoaXMuYXVkaW8hPT1udWxsLHZpZGVvX2VuYWJsZWQ6dGhpcy52aWRlbyE9PW51bGx9O3JldHVybiB0aGlzLmF1ZGlvJiYoZT1tKG0oe30sdGhpcy5hdWRpby50b0FuYWx5dGljc1Byb3BlcnRpZXMoKSksZSkpLHRoaXMudmlkZW8mJihlPW0obSh7fSx0aGlzLnZpZGVvLnRvQW5hbHl0aWNzUHJvcGVydGllcygpKSxlKSksZX19O2Z1bmN0aW9uIEpzKGEsZSl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiFDbyhhW2ldLGVbaV0pfX12YXIgZGU9Y2xhc3MgYSBleHRlbmRzIHdle2NvbnN0cnVjdG9yKHQsaSxyLHMsbz1uZXcgUSgpLmJ1aWxkKCksbil7c3VwZXIodCxpLHIpO3RoaXMuZXZlbnRCdXM9czt0aGlzLnJvb209bjt0aGlzLlRBRz1cIltITVNMb2NhbEF1ZGlvVHJhY2tdXCI7dGhpcy50cmFja3NDcmVhdGVkPW5ldyBTZXQ7dGhpcy5pc1B1Ymxpc2hlZD0hMTt0aGlzLmhhbmRsZVZpc2liaWxpdHlDaGFuZ2U9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKCF0aGlzLnNob3VsZFJlYWNxdWlyZVRyYWNrKCkpe2wuZCh0aGlzLlRBRyxgdmlzaWJpbHRpeTogJHtkb2N1bWVudC52aXNpYmlsaXR5U3RhdGV9YCxgJHt0aGlzfWApO3JldHVybn1pZihkb2N1bWVudC52aXNpYmlsaXR5U3RhdGU9PT1cImhpZGRlblwiKXRoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2godGhpcy5zZW5kSW50ZXJydXB0aW9uRXZlbnQoe3N0YXJ0ZWQ6ITAscmVhc29uOlwidmlzaWJpbGl0eS1jaGFuZ2VcIn0pKTtlbHNle2wuZCh0aGlzLlRBRyxcIk9uIHZpc2liaWxlIHJlcGxhY2luZyB0cmFjayBhcyBpdCBpcyBub3QgcHVibGlzaGluZ1wiKTt0cnl7eWllbGQgdGhpcy5yZXBsYWNlVHJhY2tXaXRoKHRoaXMuc2V0dGluZ3MpfWNhdGNoKHQpe3RoaXMuZXZlbnRCdXMuZXJyb3IucHVibGlzaCh0KX10aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHRoaXMuc2VuZEludGVycnVwdGlvbkV2ZW50KHtzdGFydGVkOiExLHJlYXNvbjpcInZpc2liaWxpdHktY2hhbmdlXCJ9KSl9fSk7dGhpcy50cmFja1Blcm1pc3Npb25zPSgpPT57aGkoXCJtaWNyb3Bob25lXCIsdD0+e3RoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5wZXJtaXNzaW9uQ2hhbmdlKHRoaXMudHlwZSx0KSksdD09PVwiZGVuaWVkXCImJnRoaXMuZXZlbnRCdXMubG9jYWxBdWRpb0VuYWJsZWQucHVibGlzaCh7ZW5hYmxlZDohMSx0cmFjazp0aGlzfSl9KX07dGhpcy5oYW5kbGVUcmFja011dGU9KCk9PntsLmQodGhpcy5UQUcsXCJtdXRlZCBuYXRpdmVseVwiKTtsZXQgdD1kb2N1bWVudC52aXNpYmlsaXR5U3RhdGU9PT1cImhpZGRlblwiP1widmlzaWJpbGl0eS1jaGFuZ2VcIjpcImluY29taW5nLWNhbGxcIjt0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHRoaXMuc2VuZEludGVycnVwdGlvbkV2ZW50KHtzdGFydGVkOiEwLHJlYXNvbjp0fSkpLHRoaXMuZXZlbnRCdXMubG9jYWxBdWRpb0VuYWJsZWQucHVibGlzaCh7ZW5hYmxlZDohMSx0cmFjazp0aGlzfSl9O3RoaXMuaGFuZGxlVHJhY2tVbm11dGU9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2wuZCh0aGlzLlRBRyxcInVubXV0ZWQgbmF0aXZlbHlcIik7bGV0IHQ9ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlPT09XCJoaWRkZW5cIj9cInZpc2liaWxpdHktY2hhbmdlXCI6XCJpbmNvbWluZy1jYWxsXCI7dGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh0aGlzLnNlbmRJbnRlcnJ1cHRpb25FdmVudCh7c3RhcnRlZDohMSxyZWFzb246dH0pKTt0cnl7eWllbGQgdGhpcy5zZXRFbmFibGVkKHRoaXMuZW5hYmxlZCwhMCksdGhpcy5ldmVudEJ1cy5sb2NhbEF1ZGlvVW5tdXRlZE5hdGl2ZWx5LnB1Ymxpc2goKX1jYXRjaChpKXt0aGlzLmV2ZW50QnVzLmVycm9yLnB1Ymxpc2goaSl9fSk7dGhpcy5yZXBsYWNlU2VuZGVyVHJhY2s9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKCF0aGlzLnRyYW5zY2VpdmVyfHx0aGlzLnRyYW5zY2VpdmVyLmRpcmVjdGlvbiE9PVwic2VuZG9ubHlcIil7bC5kKHRoaXMuVEFHLGB0cmFuc2NlaXZlciBmb3IgJHt0aGlzLnRyYWNrSWR9IG5vdCBhdmFpbGFibGUgb3Igbm90IGNvbm5lY3RlZCB5ZXRgKTtyZXR1cm59eWllbGQgdGhpcy50cmFuc2NlaXZlci5zZW5kZXIucmVwbGFjZVRyYWNrKHRoaXMucHJvY2Vzc2VkVHJhY2t8fHRoaXMubmF0aXZlVHJhY2spfSk7dGhpcy5zaG91bGRSZWFjcXVpcmVUcmFjaz0oKT0+dmUodGhpcy5uYXRpdmVUcmFjayl8fHRoaXMuaXNUcmFja05vdFB1Ymxpc2hpbmcoKTt0aGlzLmhhbmRsZVNldHRpbmdzQ2hhbmdlPXQ9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBpPXRoaXMuc3RyZWFtLHI9SnModCx0aGlzLnNldHRpbmdzKTsocihcIm1heEJpdHJhdGVcIil8fHIoXCJhdWRpb01vZGVcIikpJiZ0Lm1heEJpdHJhdGUmJih5aWVsZCBpLnNldE1heEJpdHJhdGVBbmRGcmFtZXJhdGUodGhpcyx0KSksKHIoXCJhZHZhbmNlZFwiKXx8cihcImF1ZGlvTW9kZVwiKSkmJih5aWVsZCB0aGlzLnJlcGxhY2VUcmFja1dpdGgodCkpfSk7dGhpcy5oYW5kbGVEZXZpY2VDaGFuZ2U9KHQsaT0hMSk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKEpzKHQsdGhpcy5zZXR0aW5ncykoXCJkZXZpY2VJZFwiKSl7dGhpcy5tYW51YWxseVNlbGVjdGVkRGV2aWNlSWQ9aT90aGlzLm1hbnVhbGx5U2VsZWN0ZWREZXZpY2VJZDp0LmRldmljZUlkLGwuZCh0aGlzLlRBRyxcImRldmljZSBjaGFuZ2VcIixcIm1hbnVhbCBzZWxlY3Rpb246XCIsdGhpcy5tYW51YWxseVNlbGVjdGVkRGV2aWNlSWQsXCJuZXcgZGV2aWNlOlwiLHQuZGV2aWNlSWQpLHlpZWxkIHRoaXMucmVwbGFjZVRyYWNrV2l0aCh0KTtsZXQgcz10aGlzLm5hdGl2ZVRyYWNrLmdldFNldHRpbmdzKCkuZ3JvdXBJZDshaSYmdC5kZXZpY2VJZCYmKFgudXBkYXRlU2VsZWN0aW9uKFwiYXVkaW9JbnB1dFwiLHtkZXZpY2VJZDp0LmRldmljZUlkLGdyb3VwSWQ6c30pLHRoaXMuZXZlbnRCdXMuZGV2aWNlQ2hhbmdlLnB1Ymxpc2goe2lzVXNlclNlbGVjdGlvbjohMCx0eXBlOlwiYXVkaW9JbnB1dFwiLHNlbGVjdGlvbjp7ZGV2aWNlSWQ6dC5kZXZpY2VJZCxncm91cElkOnN9fSkpfX0pO3QudHJhY2tzLnB1c2godGhpcyksdGhpcy5hZGRUcmFja0V2ZW50TGlzdGVuZXJzKGkpLHRoaXMudHJhY2tQZXJtaXNzaW9ucygpLHRoaXMuc2V0dGluZ3M9byxvLmRldmljZUlkIT09aS5nZXRTZXR0aW5ncygpLmRldmljZUlkJiYhdmUoaSkmJih0aGlzLnNldHRpbmdzPXRoaXMuYnVpbGROZXdTZXR0aW5ncyh7ZGV2aWNlSWQ6aS5nZXRTZXR0aW5ncygpLmRldmljZUlkfSkpLHRoaXMucGx1Z2luc01hbmFnZXI9bmV3IFB0KHRoaXMscyxuKSx0aGlzLnNldEZpcnN0VHJhY2tJZChpLmlkKSxyPT09XCJyZWd1bGFyXCImJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsdGhpcy5oYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKX1jbG9uZSh0KXtsZXQgaT10aGlzLm5hdGl2ZVRyYWNrLmNsb25lKCk7dC5uYXRpdmVTdHJlYW0uYWRkVHJhY2soaSk7bGV0IHI9bmV3IGEodCxpLHRoaXMuc291cmNlLHRoaXMuZXZlbnRCdXMsdGhpcy5zZXR0aW5ncyx0aGlzLnJvb20pO3JldHVybiByLnBlZXJJZD10aGlzLnBlZXJJZCx0aGlzLnBsdWdpbnNNYW5hZ2VyLnBsdWdpbnNNYXAuc2l6ZT4wJiZ0aGlzLnBsdWdpbnNNYW5hZ2VyLnBsdWdpbnNNYXAuZm9yRWFjaChzPT57ci5hZGRQbHVnaW4ocykuY2F0Y2gobz0+bC5lKHRoaXMuVEFHLFwiUGx1Z2luIGFkZCBmYWlsZWQgd2hpbGUgbWlncmF0aW5nXCIscyxvKSl9KSxyfWdldE1hbnVhbGx5U2VsZWN0ZWREZXZpY2VJZCgpe3JldHVybiB0aGlzLm1hbnVhbGx5U2VsZWN0ZWREZXZpY2VJZH1yZXNldE1hbnVhbGx5U2VsZWN0ZWREZXZpY2VJZCgpe3RoaXMubWFudWFsbHlTZWxlY3RlZERldmljZUlkPXZvaWQgMH11cGRhdGVUcmFjayh0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dC5lbmFibGVkPXRoaXMuZW5hYmxlZCx5aWVsZCB0aGlzLnN0cmVhbS5yZXBsYWNlU3RyZWFtVHJhY2sodGhpcy5uYXRpdmVUcmFjayx0KSx0aGlzLm5hdGl2ZVRyYWNrPXQseWllbGQgdGhpcy5yZXBsYWNlU2VuZGVyVHJhY2soKSwhIXRoaXMuYXVkaW9MZXZlbE1vbml0b3ImJnRoaXMuaW5pdEF1ZGlvTGV2ZWxNb25pdG9yKCl9KX1yZXBsYWNlVHJhY2tXaXRoKHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgaT10aGlzLm5hdGl2ZVRyYWNrO2k9PW51bGx8fGkuc3RvcCgpLHRoaXMucmVtb3ZlVHJhY2tFdmVudExpc3RlbmVycyhpKSx0aGlzLnRyYWNrc0NyZWF0ZWQuZm9yRWFjaChyPT5yLnN0b3AoKSksdGhpcy50cmFja3NDcmVhdGVkLmNsZWFyKCk7dHJ5e2xldCByPXlpZWxkIERyKHQpO3RoaXMuYWRkVHJhY2tFdmVudExpc3RlbmVycyhyKSx0aGlzLnRyYWNrc0NyZWF0ZWQuYWRkKHIpLGwuZCh0aGlzLlRBRyxcInJlcGxhY2VUcmFjaywgUHJldmlvdXMgdHJhY2sgc3RvcHBlZFwiLGksXCJuZXdUcmFja1wiLHIpLHlpZWxkIHRoaXMudXBkYXRlVHJhY2socil9Y2F0Y2gocil7bGV0IHM9eWllbGQgRHIodGhpcy5zZXR0aW5ncyk7dGhyb3cgdGhpcy5hZGRUcmFja0V2ZW50TGlzdGVuZXJzKHMpLHRoaXMudHJhY2tzQ3JlYXRlZC5hZGQocykseWllbGQgdGhpcy51cGRhdGVUcmFjayhzKSx0aGlzLmlzUHVibGlzaGVkJiZ0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkucHVibGlzaCh7ZXJyb3I6cn0pKSxyfXRyeXt5aWVsZCB0aGlzLnBsdWdpbnNNYW5hZ2VyLnJlcHJvY2Vzc1BsdWdpbnMoKX1jYXRjaChyKXt0aGlzLmV2ZW50QnVzLmF1ZGlvUGx1Z2luRmFpbGVkLnB1Ymxpc2gocil9fSl9c2V0RW5hYmxlZCh0LGk9ITEpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0PT09dGhpcy5lbmFibGVkJiYhaXx8KHQmJnRoaXMuc2hvdWxkUmVhY3F1aXJlVHJhY2soKSYmKHlpZWxkIHRoaXMucmVwbGFjZVRyYWNrV2l0aCh0aGlzLnNldHRpbmdzKSkseWllbGQgbmUoYS5wcm90b3R5cGUsdGhpcyxcInNldEVuYWJsZWRcIikuY2FsbCh0aGlzLHQpLHQmJih0aGlzLnNldHRpbmdzPXRoaXMuYnVpbGROZXdTZXR0aW5ncyh7ZGV2aWNlSWQ6dGhpcy5uYXRpdmVUcmFjay5nZXRTZXR0aW5ncygpLmRldmljZUlkfSkpLHRoaXMuZXZlbnRCdXMubG9jYWxBdWRpb0VuYWJsZWQucHVibGlzaCh7ZW5hYmxlZDp0LHRyYWNrOnRoaXN9KSl9KX1pc1B1Ymxpc2hlZFRyYWNrSWQodCl7cmV0dXJuIHRoaXMucHVibGlzaGVkVHJhY2tJZD09PXR9c2V0U2V0dGluZ3ModCxpPSExKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHI9dGhpcy5idWlsZE5ld1NldHRpbmdzKHQpO2lmKHZlKHRoaXMubmF0aXZlVHJhY2spKXt0aGlzLnNldHRpbmdzPXI7cmV0dXJufXlpZWxkIHRoaXMuaGFuZGxlRGV2aWNlQ2hhbmdlKHIsaSkseWllbGQgdGhpcy5oYW5kbGVTZXR0aW5nc0NoYW5nZShyKSx0aGlzLnNldHRpbmdzPXJ9KX1nZXRQbHVnaW5zKCl7cmV0dXJuIHRoaXMucGx1Z2luc01hbmFnZXIuZ2V0UGx1Z2lucygpfWFkZFBsdWdpbih0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMucGx1Z2luc01hbmFnZXIuYWRkUGx1Z2luKHQpfSl9cmVtb3ZlUGx1Z2luKHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5wbHVnaW5zTWFuYWdlci5yZW1vdmVQbHVnaW4odCl9KX12YWxpZGF0ZVBsdWdpbih0KXtyZXR1cm4gdGhpcy5wbHVnaW5zTWFuYWdlci52YWxpZGF0ZVBsdWdpbih0KX1zZXRQcm9jZXNzZWRUcmFjayh0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dD90IT09dGhpcy5wcm9jZXNzZWRUcmFjayYmKHRoaXMucHJvY2Vzc2VkVHJhY2s9dCk6dGhpcy5wcm9jZXNzZWRUcmFjaz12b2lkIDAseWllbGQgdGhpcy5yZXBsYWNlU2VuZGVyVHJhY2soKX0pfWluaXRBdWRpb0xldmVsTW9uaXRvcigpe3RoaXMuYXVkaW9MZXZlbE1vbml0b3ImJnRoaXMuZGVzdHJveUF1ZGlvTGV2ZWxNb25pdG9yKCksbC5kKHRoaXMuVEFHLFwiTW9uaXRvciBBdWRpbyBMZXZlbCBmb3JcIix0aGlzLHRoaXMuZ2V0TWVkaWFUcmFja1NldHRpbmdzKCkuZGV2aWNlSWQpLHRoaXMuYXVkaW9MZXZlbE1vbml0b3I9bmV3IFNpKHRoaXMsdGhpcy5ldmVudEJ1cy50cmFja0F1ZGlvTGV2ZWxVcGRhdGUsdGhpcy5ldmVudEJ1cy5sb2NhbEF1ZGlvU2lsZW5jZSksdGhpcy5hdWRpb0xldmVsTW9uaXRvci5zdGFydCgpLHRoaXMuYXVkaW9MZXZlbE1vbml0b3IuZGV0ZWN0U2lsZW5jZSgpfWRlc3Ryb3lBdWRpb0xldmVsTW9uaXRvcigpe3ZhciB0Oyh0PXRoaXMuYXVkaW9MZXZlbE1vbml0b3IpPT1udWxsfHx0LnN0b3AoKSx0aGlzLmF1ZGlvTGV2ZWxNb25pdG9yPXZvaWQgMH1jbGVhbnVwKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciB0O25lKGEucHJvdG90eXBlLHRoaXMsXCJjbGVhbnVwXCIpLmNhbGwodGhpcykseWllbGQgdGhpcy5wbHVnaW5zTWFuYWdlci5jbGVhbnVwKCkseWllbGQgdGhpcy5wbHVnaW5zTWFuYWdlci5jbG9zZUNvbnRleHQoKSx0aGlzLnRyYW5zY2VpdmVyPXZvaWQgMCwodD10aGlzLnByb2Nlc3NlZFRyYWNrKT09bnVsbHx8dC5zdG9wKCksdGhpcy50cmFja3NDcmVhdGVkLmZvckVhY2goaT0+aS5zdG9wKCkpLHRoaXMudHJhY2tzQ3JlYXRlZC5jbGVhcigpLHRoaXMuaXNQdWJsaXNoZWQ9ITEsdGhpcy5kZXN0cm95QXVkaW9MZXZlbE1vbml0b3IoKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSl9KX1nZXRUcmFja0lEQmVpbmdTZW50KCl7cmV0dXJuIHRoaXMucHJvY2Vzc2VkVHJhY2s/dGhpcy5wcm9jZXNzZWRUcmFjay5pZDp0aGlzLm5hdGl2ZVRyYWNrLmlkfWdldFRyYWNrQmVpbmdTZW50KCl7cmV0dXJuIHRoaXMucHJvY2Vzc2VkVHJhY2t8fHRoaXMubmF0aXZlVHJhY2t9YWRkVHJhY2tFdmVudExpc3RlbmVycyh0KXt0LmFkZEV2ZW50TGlzdGVuZXIoXCJtdXRlXCIsdGhpcy5oYW5kbGVUcmFja011dGUpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInVubXV0ZVwiLHRoaXMuaGFuZGxlVHJhY2tVbm11dGUpfXJlbW92ZVRyYWNrRXZlbnRMaXN0ZW5lcnModCl7dC5yZW1vdmVFdmVudExpc3RlbmVyKFwibXV0ZVwiLHRoaXMuaGFuZGxlVHJhY2tNdXRlKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1bm11dGVcIix0aGlzLmhhbmRsZVRyYWNrVW5tdXRlKX1idWlsZE5ld1NldHRpbmdzKHQpe2xldHt2b2x1bWU6aSxjb2RlYzpyLG1heEJpdHJhdGU6cyxkZXZpY2VJZDpvLGFkdmFuY2VkOm4sYXVkaW9Nb2RlOmR9PW0obSh7fSx0aGlzLnNldHRpbmdzKSx0KTtyZXR1cm4gbmV3ICRlKGkscixzLG8sbixkKX19O3ZhciBpZT1jbGFzcyBhIGV4dGVuZHMgd2V7c2V0RW5hYmxlZChlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7ZSE9PXRoaXMuZW5hYmxlZCYmKHlpZWxkIG5lKGEucHJvdG90eXBlLHRoaXMsXCJzZXRFbmFibGVkXCIpLmNhbGwodGhpcyxlKSx5aWVsZCB0aGlzLnN1YnNjcmliZVRvQXVkaW8oZSkpfSl9fTt2YXIgZXQ9Y2xhc3MgZXh0ZW5kcyBEZXtjb25zdHJ1Y3Rvcih0LGkscil7c3VwZXIodCxpLHIpO3RoaXMudHlwZT1cInZpZGVvXCI7dGhpcy5zaW5rQ291bnQ9MDt0aGlzLmhhbmRsZVRyYWNrVW5tdXRlPSgpPT57dGhpcy5nZXRTaW5rcygpLmZvckVhY2godD0+dGhpcy5yZVRyaWdnZXJQbGF5KHt2aWRlb0VsZW1lbnQ6dH0pKX07dGhpcy5yZVRyaWdnZXJQbGF5PSh7dmlkZW9FbGVtZW50OnR9KT0+e3NldFRpbWVvdXQoKCk9Pnt0LnBsYXkoKS5jYXRjaChpPT57bC53KFwiW0hNU1ZpZGVvVHJhY2tdXCIsXCJmYWlsZWQgdG8gcGxheVwiLGkubWVzc2FnZSl9KX0sMCl9O2lmKGkua2luZCE9PVwidmlkZW9cIil0aHJvdyBuZXcgRXJyb3IoXCJFeHBlY3RlZCAndHJhY2snIGtpbmQgPSAndmlkZW8nXCIpfXNldFZpZGVvSGFuZGxlcih0KXt0aGlzLnZpZGVvSGFuZGxlcj10fWhhc1NpbmtzKCl7cmV0dXJuIHRoaXMuc2lua0NvdW50PjB9Z2V0U2lua3MoKXtyZXR1cm4gdGhpcy52aWRlb0hhbmRsZXIuZ2V0VmlkZW9FbGVtZW50cygpfHxbXX1hdHRhY2godCl7dGhpcy52aWRlb0hhbmRsZXIuYWRkVmlkZW9FbGVtZW50KHQpfWRldGFjaCh0KXt0aGlzLnZpZGVvSGFuZGxlci5yZW1vdmVWaWRlb0VsZW1lbnQodCl9YWRkU2luayh0KXt0aGlzLmFkZFNpbmtJbnRlcm5hbCh0LHRoaXMubmF0aXZlVHJhY2spfXJlbW92ZVNpbmsodCl7dC5zcmNPYmplY3QhPT1udWxsJiYodC5zcmNPYmplY3Q9bnVsbCx0aGlzLnJlZHVjZVNpbmtDb3VudCgpKX1jbGVhbnVwKCl7c3VwZXIuY2xlYW51cCgpLHRoaXMudmlkZW9IYW5kbGVyLmNsZWFudXAoKX1hZGRTaW5rSW50ZXJuYWwodCxpKXtsZXQgcj10LnNyY09iamVjdDtpZihyIT09bnVsbCYmciBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtKXtsZXQgbz1yLmdldFZpZGVvVHJhY2tzKClbMF07aWYoKG89PW51bGw/dm9pZCAwOm8uaWQpPT09aS5pZCl7aWYoIW8ubXV0ZWQmJm8ucmVhZHlTdGF0ZT09PVwibGl2ZVwiKXJldHVybjt0aGlzLnJlZHVjZVNpbmtDb3VudCgpfWVsc2UgdGhpcy5yZWR1Y2VTaW5rQ291bnQoKX10aGlzLmFkZFByb3BlcnRpZXNUb0VsZW1lbnQodCk7bGV0IHM9bmV3IE1lZGlhU3RyZWFtKFtpXSk7dC5zcmNPYmplY3Q9cyx0aGlzLnJlVHJpZ2dlclBsYXkoe3ZpZGVvRWxlbWVudDp0fSksdGhpcy5zaW5rQ291bnQrK31yZWR1Y2VTaW5rQ291bnQoKXt0aGlzLnNpbmtDb3VudD4wJiZ0aGlzLnNpbmtDb3VudC0tfWFkZFByb3BlcnRpZXNUb0VsZW1lbnQodCl7Q3N8fCh0LmF1dG9wbGF5PSEwKSx0LnBsYXlzSW5saW5lPSEwLHQubXV0ZWQ9ITAsdC5jb250cm9scz0hMX19O2ltcG9ydCB4byBmcm9tXCJsb2Rhc2guaXNlcXVhbFwiO2ltcG9ydHt2NCBhcyBEb31mcm9tXCJ1dWlkXCI7dmFyIGJ0PXtub25lOi0xLGxvdzowLG1lZGl1bToxLGhpZ2g6Mn0sTG89LjUsUXM9KGEsZSk9PntsZXQgdD1cImhpZ2hcIixpPWUud2lkdGg+ZS5oZWlnaHQ/XCJ3aWR0aFwiOlwiaGVpZ2h0XCIscj1bLi4uYV0uc29ydCgobyxuKT0+YnRbby5sYXllcl0tYnRbbi5sYXllcl0pLHM9ZVtpXSooKHdpbmRvdz09bnVsbD92b2lkIDA6d2luZG93LmRldmljZVBpeGVsUmF0aW8pfHwxKTtmb3IobGV0IG89MDtvPHIubGVuZ3RoO28rKyl7bGV0e3Jlc29sdXRpb246bixsYXllcjpkfT1yW29dLHU9bltpXTtpZihzPD11KXt0PWQ7YnJlYWt9ZWxzZXtsZXQgcD1yW28rMV0saD1wP3AucmVzb2x1dGlvbltpXTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7aWYoKHMtdSkvKGgtdSk8TG8pe3Q9ZDticmVha319fXJldHVybiB0fTt2YXIgVXI9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLlRBRz1cIltITVNJbnRlcnNlY3Rpb25PYnNlcnZlcldyYXBwZXJdXCI7dGhpcy5saXN0ZW5lcnM9bmV3IFdlYWtNYXA7dGhpcy5vYnNlcnZlPShlLHQpPT57dmFyIGk7dGhpcy5jcmVhdGVPYnNlcnZlcigpLHRoaXMudW5vYnNlcnZlKGUpLChpPXRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXIpPT1udWxsfHxpLm9ic2VydmUoZSksdGhpcy5saXN0ZW5lcnMuc2V0KGUsdCl9O3RoaXMudW5vYnNlcnZlPWU9Pnt2YXIgdDsodD10aGlzLmludGVyc2VjdGlvbk9ic2VydmVyKT09bnVsbHx8dC51bm9ic2VydmUoZSksdGhpcy5saXN0ZW5lcnMuZGVsZXRlKGUpfTt0aGlzLmNyZWF0ZU9ic2VydmVyPSgpPT57dGhpcy5pc1N1cHBvcnRlZCgpJiYhdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciYmKHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXI9bmV3IEludGVyc2VjdGlvbk9ic2VydmVyKHRoaXMuaGFuZGxlSW50ZXJzZWN0aW9uKSl9O3RoaXMuaGFuZGxlSW50ZXJzZWN0aW9uPWU9Pnt2YXIgdDtmb3IobGV0IGkgb2YgZSkodD10aGlzLmxpc3RlbmVycy5nZXQoaS50YXJnZXQpKT09bnVsbHx8dChpKX07dGhpcy5jcmVhdGVPYnNlcnZlcigpfWlzU3VwcG9ydGVkKCl7bGV0IGU9VSYmdHlwZW9mIHdpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlciE9XCJ1bmRlZmluZWRcIjtyZXR1cm4gZXx8bC53KHRoaXMuVEFHLFwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaXMgbm90IHN1cHBvcnRlZCwgZmFsbGJhY2sgd2lsbCBiZSB1c2VkIGluc3RlYWRcIiksZX19LHpzPW5ldyBVcjt2YXIgQnI9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLlRBRz1cIltITVNSZXNpemVPYnNlcnZlcldyYXBwZXJdXCI7dGhpcy5saXN0ZW5lcnM9bmV3IFdlYWtNYXA7dGhpcy5vYnNlcnZlPShlLHQsaT17Ym94OlwiYm9yZGVyLWJveFwifSk9Pnt2YXIgcjt0aGlzLmNyZWF0ZU9ic2VydmVyKCksdGhpcy51bm9ic2VydmUoZSksKHI9dGhpcy5yZXNpemVPYnNlcnZlcik9PW51bGx8fHIub2JzZXJ2ZShlLGkpLHRoaXMubGlzdGVuZXJzLnNldChlLHQpfTt0aGlzLnVub2JzZXJ2ZT1lPT57dmFyIHQ7KHQ9dGhpcy5yZXNpemVPYnNlcnZlcik9PW51bGx8fHQudW5vYnNlcnZlKGUpLHRoaXMubGlzdGVuZXJzLmRlbGV0ZShlKX07dGhpcy5jcmVhdGVPYnNlcnZlcj0oKT0+e3RoaXMuaXNTdXBwb3J0ZWQoKSYmIXRoaXMucmVzaXplT2JzZXJ2ZXImJih0aGlzLnJlc2l6ZU9ic2VydmVyPW5ldyBSZXNpemVPYnNlcnZlcihtaSh0aGlzLmhhbmRsZVJlc2l6ZSwzMDApKSl9O3RoaXMuaGFuZGxlUmVzaXplPWU9Pnt2YXIgdDtmb3IobGV0IGkgb2YgZSkodD10aGlzLmxpc3RlbmVycy5nZXQoaS50YXJnZXQpKT09bnVsbHx8dChpKX07dGhpcy5jcmVhdGVPYnNlcnZlcigpfWlzU3VwcG9ydGVkKCl7bGV0IGU9VSYmdHlwZW9mIHdpbmRvdy5SZXNpemVPYnNlcnZlciE9XCJ1bmRlZmluZWRcIjtyZXR1cm4gZXx8bC53KHRoaXMuVEFHLFwiUmVzaXplIE9ic2VydmVyIGlzIG5vdCBzdXBwb3J0ZWRcIiksZX19LFlzPW5ldyBCcjt2YXIgdHQ9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy50cmFjaz1lO3RoaXMuVEFHPVwiW1ZpZGVvRWxlbWVudE1hbmFnZXJdXCI7dGhpcy52aWRlb0VsZW1lbnRzPW5ldyBTZXQ7dGhpcy5lbnRyaWVzPW5ldyBXZWFrTWFwO3RoaXMuaGFuZGxlSW50ZXJzZWN0aW9uPWU9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PWdldENvbXB1dGVkU3R5bGUoZS50YXJnZXQpLnZpc2liaWxpdHk9PT1cInZpc2libGVcIjt0aGlzLnRyYWNrLmVuYWJsZWQmJihlLmlzSW50ZXJzZWN0aW5nJiZ0fHwhZG9jdW1lbnQuY29udGFpbnMoZS50YXJnZXQpKT8obC5kKHRoaXMuVEFHLFwiYWRkIHNpbmsgaW50ZXJzZWN0aW9uXCIsYCR7dGhpcy50cmFja31gLHRoaXMuaWQpLHRoaXMuZW50cmllcy5zZXQoZS50YXJnZXQsZS5ib3VuZGluZ0NsaWVudFJlY3QpLHlpZWxkIHRoaXMuc2VsZWN0TWF4TGF5ZXIoKSx5aWVsZCB0aGlzLnRyYWNrLmFkZFNpbmsoZS50YXJnZXQpKToobC5kKHRoaXMuVEFHLFwicmVtb3ZlIHNpbmsgaW50ZXJzZWN0aW9uXCIsYCR7dGhpcy50cmFja31gLHRoaXMuaWQpLHlpZWxkIHRoaXMudHJhY2sucmVtb3ZlU2luayhlLnRhcmdldCkpfSk7dGhpcy5oYW5kbGVSZXNpemU9ZT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7IXRoaXMudHJhY2suZW5hYmxlZHx8ISh0aGlzLnRyYWNrIGluc3RhbmNlb2YgTyl8fCh0aGlzLmVudHJpZXMuc2V0KGUudGFyZ2V0LGUuY29udGVudFJlY3QpLHlpZWxkIHRoaXMuc2VsZWN0TWF4TGF5ZXIoKSl9KTt0aGlzLmNsZWFudXA9KCk9Pnt0aGlzLnZpZGVvRWxlbWVudHMuZm9yRWFjaChlPT57dmFyIHQsaTtlLnNyY09iamVjdD1udWxsLCh0PXRoaXMucmVzaXplT2JzZXJ2ZXIpPT1udWxsfHx0LnVub2JzZXJ2ZShlKSwoaT10aGlzLmludGVyc2VjdGlvbk9ic2VydmVyKT09bnVsbHx8aS51bm9ic2VydmUoZSl9KSx0aGlzLnZpZGVvRWxlbWVudHMuY2xlYXIoKSx0aGlzLnJlc2l6ZU9ic2VydmVyPXZvaWQgMCx0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyPXZvaWQgMH07dGhpcy5pbml0KCksdGhpcy5pZD1EbygpfXVwZGF0ZVNpbmtzKGU9ITEpe2ZvcihsZXQgdCBvZiB0aGlzLnZpZGVvRWxlbWVudHMpdGhpcy50cmFjay5lbmFibGVkP3RoaXMudHJhY2suYWRkU2luayh0LGUpOnRoaXMudHJhY2sucmVtb3ZlU2luayh0LGUpfWFkZFZpZGVvRWxlbWVudChlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHQ7dGhpcy52aWRlb0VsZW1lbnRzLmhhcyhlKXx8KHRoaXMuaW5pdCgpLGwuZCh0aGlzLlRBRyxgQWRkaW5nIHZpZGVvIGVsZW1lbnQgZm9yICR7dGhpcy50cmFja31gLHRoaXMuaWQpLHRoaXMudmlkZW9FbGVtZW50cy5hZGQoZSksdGhpcy52aWRlb0VsZW1lbnRzLnNpemU+PTEwJiZsLncodGhpcy5UQUcsYCR7dGhpcy50cmFja31gLGB0aGUgdHJhY2sgaXMgYWRkZWQgdG8gJHt0aGlzLnZpZGVvRWxlbWVudHMuc2l6ZX0gdmlkZW8gZWxlbWVudHMsIHdoaWxlIHRoaXMgbWF5IGJlIGludGVudGlvbmFsLCBpdCdzIGxpa2VseSB0aGF0IHRoZXJlIGlzIGEgYnVnIGxlYWRpbmcgdG8gdW5uZWNlc3NhcnkgY3JlYXRpb24gb2YgdmlkZW8gZWxlbWVudHMgaW4gdGhlIFVJYCksKHQ9dGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcikhPW51bGwmJnQuaXNTdXBwb3J0ZWQoKT90aGlzLmludGVyc2VjdGlvbk9ic2VydmVyLm9ic2VydmUoZSx0aGlzLmhhbmRsZUludGVyc2VjdGlvbik6VSYmKHRoaXMuaXNFbGVtZW50SW5WaWV3cG9ydChlKT90aGlzLnRyYWNrLmFkZFNpbmsoZSk6dGhpcy50cmFjay5yZW1vdmVTaW5rKGUpKSx0aGlzLnJlc2l6ZU9ic2VydmVyP3RoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZShlLHRoaXMuaGFuZGxlUmVzaXplKTp0aGlzLnRyYWNrIGluc3RhbmNlb2YgTyYmKHlpZWxkIHRoaXMudHJhY2suc2V0UHJlZmVycmVkTGF5ZXIodGhpcy50cmFjay5nZXRQcmVmZXJyZWRMYXllcigpKSkpfSl9cmVtb3ZlVmlkZW9FbGVtZW50KGUpe3ZhciB0LGk7dGhpcy50cmFjay5yZW1vdmVTaW5rKGUpLHRoaXMudmlkZW9FbGVtZW50cy5kZWxldGUoZSksdGhpcy5lbnRyaWVzLmRlbGV0ZShlKSwodD10aGlzLnJlc2l6ZU9ic2VydmVyKT09bnVsbHx8dC51bm9ic2VydmUoZSksKGk9dGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcik9PW51bGx8fGkudW5vYnNlcnZlKGUpLGwuZCh0aGlzLlRBRyxgUmVtb3ZpbmcgdmlkZW8gZWxlbWVudCBmb3IgJHt0aGlzLnRyYWNrfWApfWdldFZpZGVvRWxlbWVudHMoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnZpZGVvRWxlbWVudHMpfWluaXQoKXtVJiYodGhpcy5yZXNpemVPYnNlcnZlcj1Zcyx0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyPXpzKX1pc0VsZW1lbnRJblZpZXdwb3J0KGUpe2xldCB0PWUub2Zmc2V0VG9wLGk9ZS5vZmZzZXRMZWZ0LHI9ZS5vZmZzZXRXaWR0aCxzPWUub2Zmc2V0SGVpZ2h0LHtoaWRkZW46b309ZSx7b3BhY2l0eTpuLGRpc3BsYXk6ZH09Z2V0Q29tcHV0ZWRTdHlsZShlKTtmb3IoO2Uub2Zmc2V0UGFyZW50OyllPWUub2Zmc2V0UGFyZW50LHQrPWUub2Zmc2V0VG9wLGkrPWUub2Zmc2V0TGVmdDtyZXR1cm4gdDx3aW5kb3cucGFnZVlPZmZzZXQrd2luZG93LmlubmVySGVpZ2h0JiZpPHdpbmRvdy5wYWdlWE9mZnNldCt3aW5kb3cuaW5uZXJXaWR0aCYmdCtzPndpbmRvdy5wYWdlWU9mZnNldCYmaStyPndpbmRvdy5wYWdlWE9mZnNldCYmIW8mJihuIT09XCJcIj9wYXJzZUZsb2F0KG4pPjA6ITApJiZkIT09XCJub25lXCJ9c2VsZWN0TWF4TGF5ZXIoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYoISh0aGlzLnRyYWNrIGluc3RhbmNlb2YgTyl8fHRoaXMudmlkZW9FbGVtZW50cy5zaXplPT09MClyZXR1cm47bGV0IGU7Zm9yKGxldCB0IG9mIHRoaXMudmlkZW9FbGVtZW50cyl7bGV0IGk9dGhpcy5lbnRyaWVzLmdldCh0KTtpZighaSljb250aW51ZTtsZXR7d2lkdGg6cixoZWlnaHQ6c309aTtpZihyPT09MHx8cz09PTApY29udGludWU7bGV0IG89UXModGhpcy50cmFjay5nZXRTaW11bGNhc3REZWZpbml0aW9ucygpLHt3aWR0aDpyLGhlaWdodDpzfSk7ZT9lPWJ0W29dPmJ0W2VdP286ZTplPW99ZSYmKGwuZCh0aGlzLlRBRyxgc2VsZWN0aW5nIG1heCBsYXllciAke2V9IGZvciB0aGUgdHJhY2tgLGAke3RoaXMudHJhY2t9YCkseWllbGQgdGhpcy50cmFjay5zZXRQcmVmZXJyZWRMYXllcihlKSl9KX19O3ZhciBWcj0odD0+KHQuVFJBTlNGT1JNPVwiVFJBTlNGT1JNXCIsdC5BTkFMWVpFPVwiQU5BTFlaRVwiLHQpKShWcnx8e30pLEZyPSh0PT4odFtcIjJEXCJdPVwiMmRcIix0LldFQkdMPVwid2ViZ2xcIix0LldFQkdMMj1cIndlYmdsMlwiLHQpKShGcnx8e30pO3ZhciBBdD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMudG90YWw9MDt0aGlzLmNvdW50PTB9YWRkKGUpe3RoaXMuY291bnQrKyx0aGlzLnRvdGFsKz1lfWdldEF2Zygpe3JldHVybiBNYXRoLmZsb29yKHRoaXMudG90YWwvdGhpcy5jb3VudCl9cmVzZXQoKXt0aGlzLnRvdGFsPTAsdGhpcy5jb3VudD0wfX07dmFyIGl0PWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuZXZlbnRCdXM9ZTt0aGlzLlRBRz1cIltWaWRlb1BsdWdpbnNBbmFseXRpY3NdXCI7dGhpcy5pbml0VGltZT17fSx0aGlzLnByZVByb2Nlc3NpbmdBdmdzPW5ldyBBdCx0aGlzLmFkZGVkVGltZXN0YW1wcz17fSx0aGlzLnByb2Nlc3NpbmdBdmdzPXt9LHRoaXMucGx1Z2luQWRkZWQ9e30sdGhpcy5wbHVnaW5JbnB1dEZyYW1lUmF0ZT17fSx0aGlzLnBsdWdpbkZyYW1lUmF0ZT17fX1hZGRlZChlLHQsaSl7dGhpcy5wbHVnaW5BZGRlZFtlXT0hMCx0aGlzLmFkZGVkVGltZXN0YW1wc1tlXT1EYXRlLm5vdygpLHRoaXMuaW5pdFRpbWVbZV09MCx0aGlzLnByb2Nlc3NpbmdBdmdzW2VdPW5ldyBBdCx0JiYodGhpcy5wbHVnaW5JbnB1dEZyYW1lUmF0ZVtlXT10LHRoaXMucGx1Z2luRnJhbWVSYXRlW2VdPWl8fHQpLHRoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2gobWUuYWRkZWQoZSx0aGlzLmFkZGVkVGltZXN0YW1wc1tlXSkpfXJlbW92ZWQoZSl7dmFyIHQ7aWYodGhpcy5wbHVnaW5BZGRlZFtlXSl7bGV0IGk9e3BsdWdpbk5hbWU6ZSxkdXJhdGlvbjpNYXRoLmZsb29yKChEYXRlLm5vdygpLXRoaXMuYWRkZWRUaW1lc3RhbXBzW2VdKS8xZTMpLGxvYWRUaW1lOnRoaXMuaW5pdFRpbWVbZV0sYXZnUHJlUHJvY2Vzc2luZ1RpbWU6dGhpcy5wcmVQcm9jZXNzaW5nQXZncy5nZXRBdmcoKSxhdmdQcm9jZXNzaW5nVGltZToodD10aGlzLnByb2Nlc3NpbmdBdmdzW2VdKT09bnVsbD92b2lkIDA6dC5nZXRBdmcoKSxpbnB1dEZyYW1lUmF0ZTp0aGlzLnBsdWdpbklucHV0RnJhbWVSYXRlW2VdLHBsdWdpbkZyYW1lUmF0ZTp0aGlzLnBsdWdpbkZyYW1lUmF0ZVtlXX07dGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaChtZS5zdGF0cyhpKSksdGhpcy5jbGVhbihlKX19ZmFpbHVyZShlLHQpe3RoaXMucGx1Z2luQWRkZWRbZV0mJih0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKG1lLmZhaWx1cmUoZSx0KSksdGhpcy5jbGVhbihlKSl9aW5pdFdpdGhUaW1lKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKHRoaXMuaW5pdFRpbWVbZV0pe2wuaSh0aGlzLlRBRyxgUGx1Z2luIEFscmVhZHkgbG9hZGVkICR7ZX0sIHRpbWUgaXQgdG9vazogJHt0aGlzLmluaXRUaW1lW2VdfWApO3JldHVybn1sZXQgaTt0cnl7aT15aWVsZCB0aGlzLnRpbWVJbk1zKHQpLGwuaSh0aGlzLlRBRyxgVGltZSB0YWtlbiBmb3IgUGx1Z2luICR7ZX0gaW5pdGlhbGl6YXRpb24gOiAke2l9YCl9Y2F0Y2gocil7bGV0IHM9Uy5NZWRpYVBsdWdpbkVycm9ycy5Jbml0RmFpbGVkKFwiVklERU9fUExVR0lOU1wiLGBmYWlsZWQgZHVyaW5nIGluaXRpYWxpemF0aW9uIG9mIHBsdWdpbiR7ci5tZXNzYWdlfHxyfWApO3Rocm93IGwuZSh0aGlzLlRBRyxzKSx0aGlzLmZhaWx1cmUoZSxzKSxzfWkmJih0aGlzLmluaXRUaW1lW2VdPWkpfSl9cHJlUHJvY2Vzc1dpdGhUaW1lKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgdD15aWVsZCB0aGlzLnRpbWVJbk1zKGUpO3RoaXMucHJlUHJvY2Vzc2luZ0F2Z3MuYWRkKHQpfSl9cHJvY2Vzc1dpdGhUaW1lKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciByO2xldCBpO3RyeXtpPXlpZWxkIHRoaXMudGltZUluTXModCl9Y2F0Y2gocyl7bGV0IG89Uy5NZWRpYVBsdWdpbkVycm9ycy5Qcm9jZXNzaW5nRmFpbGVkKFwiVklERU9fUExVR0lOU1wiLGBGYWlsZWQgZHVyaW5nIHByb2Nlc3Npbmcgb2YgcGx1Z2luJHtzLm1lc3NhZ2V8fHN9YCk7dGhyb3cgbC5lKHRoaXMuVEFHLG8pLHRoaXMuZmFpbHVyZShlLG8pLG99aSYmKChyPXRoaXMucHJvY2Vzc2luZ0F2Z3NbZV0pPT1udWxsfHxyLmFkZChpKSl9KX10aW1lSW5NcyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9RGF0ZS5ub3coKTtyZXR1cm4geWllbGQgZSgpLE1hdGguZmxvb3IoRGF0ZS5ub3coKS10KX0pfWNsZWFuKGUpe2RlbGV0ZSB0aGlzLmFkZGVkVGltZXN0YW1wc1tlXSxkZWxldGUgdGhpcy5pbml0VGltZVtlXSxkZWxldGUgdGhpcy5wcm9jZXNzaW5nQXZnc1tlXSxkZWxldGUgdGhpcy5wbHVnaW5BZGRlZFtlXSxkZWxldGUgdGhpcy5wbHVnaW5JbnB1dEZyYW1lUmF0ZVtlXSxkZWxldGUgdGhpcy5wbHVnaW5GcmFtZVJhdGVbZV19fTt2YXIgWHM9MjQsd289MzIwLF9vPTI0MCxJdD1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuVEFHPVwiW1ZpZGVvUGx1Z2luc01hbmFnZXJdXCI7dGhpcy5wbHVnaW5zTG9vcFJ1bm5pbmc9ITE7dGhpcy5wbHVnaW5zTG9vcFN0YXRlPVwicGF1c2VkXCI7dGhpcy5wbHVnaW5BZGRJblByb2dyZXNzPSExO3RoaXMucmV1c2FibGVXb3JrZXI9VnMoKTt0aGlzLmhtc1RyYWNrPWUsdGhpcy5wbHVnaW5zTWFwPW5ldyBNYXAsdGhpcy5wbHVnaW5OdW1GcmFtZXNUb1NraXA9e30sdGhpcy5wbHVnaW5OdW1GcmFtZXNTa2lwcGVkPXt9LHRoaXMuYW5hbHl0aWNzPW5ldyBpdCh0KSx0aGlzLmNhbnZhc2VzPW5ldyBBcnJheX1nZXRQbHVnaW5zKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5wbHVnaW5zTWFwLmtleXMoKSl9YWRkUGx1Z2luKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBpO2lmKHRoaXMucGx1Z2luQWRkSW5Qcm9ncmVzcyl7bGV0IHI9KGk9ZS5nZXROYW1lKT09bnVsbD92b2lkIDA6aS5jYWxsKGUpO2lmKCFyfHxyPT09XCJcIil7bC53KFwibm8gbmFtZSBwcm92aWRlZCBieSB0aGUgcGx1Z2luXCIpO3JldHVybn1sZXQgcz1TLk1lZGlhUGx1Z2luRXJyb3JzLkFkZEFscmVhZHlJblByb2dyZXNzKFwiVklERU9fUExVR0lOU1wiLFwiQWRkIFBsdWdpbiBpcyBhbHJlYWR5IGluIFByb2dyZXNzXCIpO3Rocm93IHRoaXMuYW5hbHl0aWNzLmZhaWx1cmUocixzKSxsLncoXCJjYW4ndCBhZGQgYW5vdGhlciBwbHVnaW4gd2hlbiBwcmV2aW91cyBhZGQgaXMgaW4gcHJvZ3Jlc3NcIiksc310aGlzLnBsdWdpbkFkZEluUHJvZ3Jlc3M9ITA7dHJ5e3lpZWxkIHRoaXMuYWRkUGx1Z2luSW50ZXJuYWwoZSx0KX1maW5hbGx5e3RoaXMucGx1Z2luQWRkSW5Qcm9ncmVzcz0hMX19KX1hZGRQbHVnaW5JbnRlcm5hbChlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgbyxuO2xldCBpPShvPWUuZ2V0TmFtZSk9PW51bGw/dm9pZCAwOm8uY2FsbChlKTtpZighaXx8aT09PVwiXCIpe2wudyhcIm5vIG5hbWUgcHJvdmlkZWQgYnkgdGhlIHBsdWdpblwiKTtyZXR1cm59aWYodGhpcy5wbHVnaW5zTWFwLmhhcyhpKSl7bC53KHRoaXMuVEFHLGBwbHVnaW4gLSAke2UuZ2V0TmFtZSgpfSBhbHJlYWR5IGFkZGVkLmApO3JldHVybn1sZXQgcj10aGlzLmhtc1RyYWNrLmdldE1lZGlhVHJhY2tTZXR0aW5ncygpLmZyYW1lUmF0ZXx8WHMscz0wO3QmJnQ+MD8obC5pKHRoaXMuVEFHLGBhZGRpbmcgcGx1Z2luICR7ZS5nZXROYW1lKCl9IHdpdGggZnJhbWVyYXRlICR7dH1gKSx0PHImJihzPU1hdGguY2VpbChyL3QpLTEpLHRoaXMuYW5hbHl0aWNzLmFkZGVkKGkscix0KSk6KGwuaSh0aGlzLlRBRyxgYWRkaW5nIHBsdWdpbiAke2UuZ2V0TmFtZSgpfWApLHRoaXMuYW5hbHl0aWNzLmFkZGVkKGkscikpLGwuaSh0aGlzLlRBRyxcIm51bUZyYW1lcyB0byBza2lwIHByb2Nlc3NpbmdcIixzKSx0aGlzLnBsdWdpbk51bUZyYW1lc1RvU2tpcFtpXT1zLHRoaXMucGx1Z2luTnVtRnJhbWVzU2tpcHBlZFtpXT1zLHRoaXMudmFsaWRhdGVBbmRUaHJvdyhpLGUpO3RyeXtpZih5aWVsZCB0aGlzLmFuYWx5dGljcy5pbml0V2l0aFRpbWUoaSwoKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIGUuaW5pdCgpfSkpLHRoaXMucGx1Z2luc01hcC5zZXQoaSxlKSx0aGlzLnBsdWdpbnNNYXAuc2l6ZSsxPnRoaXMuY2FudmFzZXMubGVuZ3RoKWZvcihsZXQgZD10aGlzLmNhbnZhc2VzLmxlbmd0aDtkPD10aGlzLnBsdWdpbnNNYXAuc2l6ZTtkKyspdGhpcy5jYW52YXNlc1tkXT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3lpZWxkIHRoaXMuc3RhcnRQbHVnaW5zTG9vcCgobj1lLmdldENvbnRleHRUeXBlKT09bnVsbD92b2lkIDA6bi5jYWxsKGUpKX1jYXRjaChkKXt0aHJvdyBsLmUodGhpcy5UQUcsXCJmYWlsZWQgdG8gYWRkIHBsdWdpblwiLGQpLHlpZWxkIHRoaXMucmVtb3ZlUGx1Z2luKGUpLGR9fSl9dmFsaWRhdGVQbHVnaW4oZSl7cmV0dXJuIGUuY2hlY2tTdXBwb3J0KCl9dmFsaWRhdGVBbmRUaHJvdyhlLHQpe2xldCBpPXRoaXMudmFsaWRhdGVQbHVnaW4odCk7aWYoaS5pc1N1cHBvcnRlZClsLmkodGhpcy5UQUcsYHBsdWdpbiBpcyBzdXBwb3J0ZWQsLSAke3QuZ2V0TmFtZSgpfWApO2Vsc2V7bGV0IHI7c3dpdGNoKGkuZXJyVHlwZSl7Y2FzZVwiUExBVEZPUk1fTk9UX1NVUFBPUlRFRFwiOnRocm93IHI9Uy5NZWRpYVBsdWdpbkVycm9ycy5QbGF0Zm9ybU5vdFN1cHBvcnRlZChcIlZJREVPX1BMVUdJTlNcIixcInBsYXRmb3JtIG5vdCBzdXBwb3J0ZWQsIHNlZSBkb2NzXCIpLHRoaXMuYW5hbHl0aWNzLmZhaWx1cmUoZSxyKSxyO2Nhc2VcIkRFVklDRV9OT1RfU1VQUE9SVEVEXCI6dGhyb3cgcj1TLk1lZGlhUGx1Z2luRXJyb3JzLkRldmljZU5vdFN1cHBvcnRlZChcIlZJREVPX1BMVUdJTlNcIixcInZpZGVvIGRldmljZSBub3Qgc3VwcG9ydGVkLCBzZWUgZG9jc1wiKSx0aGlzLmFuYWx5dGljcy5mYWlsdXJlKGUscikscn19fXJlbW92ZVBsdWdpbihlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9ZS5nZXROYW1lKCk7aWYoIXRoaXMucGx1Z2luc01hcC5nZXQodCkpe2wudyh0aGlzLlRBRyxgcGx1Z2luIC0gJHt0fSBub3QgZm91bmQgdG8gcmVtb3ZlLmApO3JldHVybn1sLmkodGhpcy5UQUcsYHJlbW92aW5nIHBsdWdpbiAke3R9YCksdGhpcy5yZW1vdmVQbHVnaW5FbnRyeSh0KSx0aGlzLnBsdWdpbnNNYXAuc2l6ZT09PTAmJihsLmkodGhpcy5UQUcsXCJObyBwbHVnaW5zIGxlZnQsIHN0b3BwaW5nIHBsdWdpbnMgbG9vcFwiKSx5aWVsZCB0aGlzLnN0b3BQbHVnaW5zTG9vcCgpKSxlLnN0b3AoKSx0aGlzLmFuYWx5dGljcy5yZW1vdmVkKHQpfSl9cmVtb3ZlUGx1Z2luRW50cnkoZSl7dGhpcy5wbHVnaW5zTWFwLmRlbGV0ZShlKSx0aGlzLnBsdWdpbk51bUZyYW1lc1RvU2tpcFtlXSYmZGVsZXRlIHRoaXMucGx1Z2luTnVtRnJhbWVzVG9Ta2lwW2VdLHRoaXMucGx1Z2luTnVtRnJhbWVzU2tpcHBlZFtlXSYmZGVsZXRlIHRoaXMucGx1Z2luTnVtRnJhbWVzU2tpcHBlZFtlXX13YWl0Rm9yUmVzdGFydCgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZighKCF0aGlzLnBsdWdpbnNMb29wUnVubmluZ3x8dGhpcy5wbHVnaW5zTG9vcFN0YXRlPT09XCJydW5uaW5nXCIpKWZvcig7dGhpcy5wbHVnaW5zTG9vcFN0YXRlPT09XCJwYXVzZWRcIjspeWllbGQgT2UoMTAwKX0pfWNsZWFudXAoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGU7Zm9yKGxldCB0IG9mIHRoaXMucGx1Z2luc01hcC52YWx1ZXMoKSl5aWVsZCB0aGlzLnJlbW92ZVBsdWdpbih0KTsoZT10aGlzLm91dHB1dFRyYWNrKT09bnVsbHx8ZS5zdG9wKCl9KX1pbml0RWxlbWVudHNBbmRTdHJlYW0oZSl7dGhpcy5pbnB1dENhbnZhc3x8KHRoaXMuaW5wdXRDYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSksdGhpcy5vdXRwdXRDYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSx0aGlzLmlucHV0VmlkZW98fCh0aGlzLmlucHV0VmlkZW89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpKSx0aGlzLmlucHV0Q2FudmFzLmdldENvbnRleHQoXCIyZFwiKSx0aGlzLm91dHB1dENhbnZhcy5nZXRDb250ZXh0KGV8fFwiMmRcIik7bGV0IHQ9dGhpcy5vdXRwdXRDYW52YXMuY2FwdHVyZVN0cmVhbSgpO3RoaXMub3V0cHV0VHJhY2s9dC5nZXRWaWRlb1RyYWNrcygpWzBdfXN0YXJ0UGx1Z2luc0xvb3AoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKCF0aGlzLnBsdWdpbnNMb29wUnVubmluZyl7dGhpcy5pbml0RWxlbWVudHNBbmRTdHJlYW0oZSksdGhpcy5wbHVnaW5zTG9vcFJ1bm5pbmc9ITA7dHJ5e3lpZWxkIHRoaXMuaG1zVHJhY2suc2V0UHJvY2Vzc2VkVHJhY2sodGhpcy5vdXRwdXRUcmFjayl9Y2F0Y2godCl7dGhyb3cgdGhpcy5wbHVnaW5zTG9vcFJ1bm5pbmc9ITEsbC5lKHRoaXMuVEFHLFwiZXJyb3IgaW4gc2V0dGluZyBwcm9jZXNzZWQgdHJhY2tcIix0KSx0fXRoaXMucGx1Z2luc0xvb3AoKS50aGVuKCgpPT57bC5kKHRoaXMuVEFHLFwicHJvY2Vzc0xvb3Agc3RvcHBlZFwiKX0pfX0pfXN0b3BQbHVnaW5zTG9vcCgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgZTt0aGlzLnBsdWdpbnNMb29wUnVubmluZz0hMSx5aWVsZCB0aGlzLmhtc1RyYWNrLnNldFByb2Nlc3NlZFRyYWNrKHZvaWQgMCksdGhpcy5yZXNldENhbnZhc2VzKCksKGU9dGhpcy5vdXRwdXRUcmFjayk9PW51bGx8fGUuc3RvcCgpLHRoaXMuaW5wdXRWaWRlbyYmKHRoaXMuaW5wdXRWaWRlby5zcmNPYmplY3Q9bnVsbCx0aGlzLmlucHV0VmlkZW89dm9pZCAwKX0pfXBsdWdpbnNMb29wKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2Zvcig7dGhpcy5wbHVnaW5zTG9vcFJ1bm5pbmc7KXtsZXQgZT10aGlzLmhtc1RyYWNrLmdldE1lZGlhVHJhY2tTZXR0aW5ncygpLmZyYW1lUmF0ZXx8WHMsdD1NYXRoLmZsb29yKDFlMy9lKTtpZighdGhpcy5obXNUcmFjay5lbmFibGVkfHx0aGlzLmhtc1RyYWNrLm5hdGl2ZVRyYWNrLnJlYWR5U3RhdGU9PT1cImVuZGVkXCIpe3RoaXMucGx1Z2luc0xvb3BTdGF0ZT09PVwicnVubmluZ1wiJiZ0aGlzLnJlc2V0Q2FudmFzZXMoKSx0aGlzLnBsdWdpbnNMb29wU3RhdGU9XCJwYXVzZWRcIix5aWVsZCB0aGlzLnJldXNhYmxlV29ya2VyLnNsZWVwKHQpO2NvbnRpbnVlfWxldCBpPTA7dHJ5e3lpZWxkIHRoaXMuYW5hbHl0aWNzLnByZVByb2Nlc3NXaXRoVGltZSgoKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuZG9QcmVQcm9jZXNzaW5nKCl9KSk7bGV0IHI9RGF0ZS5ub3coKTt5aWVsZCB0aGlzLnByb2Nlc3NGcmFtZXNUaHJvdWdoUGx1Z2lucygpLGk9TWF0aC5mbG9vcihEYXRlLm5vdygpLXIpLGk+dCYmKGk9dCl9Y2F0Y2gocil7bC5lKHRoaXMuVEFHLFwiZXJyb3IgaW4gcGx1Z2lucyBsb29wXCIscil9dGhpcy5wbHVnaW5zTG9vcFN0YXRlPVwicnVubmluZ1wiLHlpZWxkIHRoaXMucmV1c2FibGVXb3JrZXIuc2xlZXAodC1pKX19KX1kb1ByZVByb2Nlc3NpbmcoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5hZGRUcmFja1RvVmlkZW8oKSx5aWVsZCB0aGlzLnVwZGF0ZUlucHV0Q2FudmFzKCl9KX1wcm9jZXNzRnJhbWVzVGhyb3VnaFBsdWdpbnMoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dGhpcy5jYW52YXNlc1swXT10aGlzLmlucHV0Q2FudmFzO2xldCBlPTA7Zm9yKGxldCB0IG9mIHRoaXMucGx1Z2luc01hcC52YWx1ZXMoKSl7bGV0IGk9dC5nZXROYW1lKCk7aWYodCl7dHJ5e2xldCByPXRoaXMuY2hlY2tJZlNraXBSZXF1aXJlZChpKTtpZih0LmdldFBsdWdpblR5cGUoKT09PVwiVFJBTlNGT1JNXCIpe2xldCBzPShvLG4pPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7eWllbGQgdC5wcm9jZXNzVmlkZW9GcmFtZShvLG4scil9Y2F0Y2goZCl7bC5lKHRoaXMuVEFHLGBlcnJvciBpbiBwcm9jZXNzaW5nIHBsdWdpbiAke2l9YCxkKX19KTtpZihyKWU9PT10aGlzLnBsdWdpbnNNYXAuc2l6ZS0xP3lpZWxkIHModGhpcy5jYW52YXNlc1tlXSx0aGlzLm91dHB1dENhbnZhcyk6eWllbGQgcyh0aGlzLmNhbnZhc2VzW2VdLHRoaXMuY2FudmFzZXNbZSsxXSk7ZWxzZXtsZXQgbz10aGlzLmNhbnZhc2VzW2VdLG49dGhpcy5jYW52YXNlc1tlKzFdO2U9PT10aGlzLnBsdWdpbnNNYXAuc2l6ZS0xP3lpZWxkIHRoaXMuYW5hbHl0aWNzLnByb2Nlc3NXaXRoVGltZShpLCgpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm4gcyhvLHRoaXMub3V0cHV0Q2FudmFzKX0pKTp5aWVsZCB0aGlzLmFuYWx5dGljcy5wcm9jZXNzV2l0aFRpbWUoaSwoKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHMobyxuKX0pKX19ZWxzZSB0LmdldFBsdWdpblR5cGUoKT09PVwiQU5BTFlaRVwiJiYhciYmKHlpZWxkIHRoaXMuYW5hbHl0aWNzLnByb2Nlc3NXaXRoVGltZShpLCgpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdC5wcm9jZXNzVmlkZW9GcmFtZSh0aGlzLmlucHV0Q2FudmFzKX0pKSl9Y2F0Y2gocil7bC5lKHRoaXMuVEFHLGBlcnJvciBpbiBwcm9jZXNzaW5nIHBsdWdpbiAke2l9YCxyKSx5aWVsZCB0aGlzLnJlbW92ZVBsdWdpbih0KX1lKyt9fX0pfWFkZFRyYWNrVG9WaWRlbygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdDtpZighdGhpcy5pbnB1dFZpZGVvKXJldHVybjtsZXQgZT10aGlzLmlucHV0VmlkZW8uc3JjT2JqZWN0O2UhPT1udWxsJiZlIGluc3RhbmNlb2YgTWVkaWFTdHJlYW0mJigodD1lLmdldFZpZGVvVHJhY2tzKClbMF0pPT1udWxsP3ZvaWQgMDp0LmlkKT09PXRoaXMuaG1zVHJhY2submF0aXZlVHJhY2suaWR8fCh0aGlzLmlucHV0VmlkZW8ucGF1c2UoKSx0aGlzLmlucHV0VmlkZW8uc3JjT2JqZWN0PW5ldyBNZWRpYVN0cmVhbShbdGhpcy5obXNUcmFjay5uYXRpdmVUcmFja10pLHRoaXMuaW5wdXRWaWRlby5tdXRlZD0hMCx0aGlzLmlucHV0VmlkZW8ucGxheXNJbmxpbmU9ITAseWllbGQgdGhpcy5pbnB1dFZpZGVvLnBsYXkoKSl9KX11cGRhdGVJbnB1dENhbnZhcygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZighdGhpcy5pbnB1dENhbnZhc3x8IXRoaXMuaW5wdXRWaWRlbylyZXR1cm47bGV0e3dpZHRoOmU9d28saGVpZ2h0OnQ9X299PXRoaXMuaG1zVHJhY2suZ2V0TWVkaWFUcmFja1NldHRpbmdzKCk7dGhpcy5pbnB1dENhbnZhcy5oZWlnaHQhPT10JiYodGhpcy5pbnB1dENhbnZhcy5oZWlnaHQ9dCksdGhpcy5pbnB1dENhbnZhcy53aWR0aCE9PWUmJih0aGlzLmlucHV0Q2FudmFzLndpZHRoPWUpLHRoaXMuaW5wdXRDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZSh0aGlzLmlucHV0VmlkZW8sMCwwLGUsdCl9KX1yZXNldENhbnZhc2VzKCl7aWYoIXRoaXMub3V0cHV0Q2FudmFzfHwhdGhpcy5pbnB1dENhbnZhcylyZXR1cm47bGV0IGU9dGhpcy5pbnB1dENhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7ZSYmKGUuZmlsbFN0eWxlPVwicmdiKDAsIDAsIDApXCIsZS5maWxsUmVjdCgwLDAsdGhpcy5vdXRwdXRDYW52YXMud2lkdGgsdGhpcy5vdXRwdXRDYW52YXMuaGVpZ2h0KSksdGhpcy5jYW52YXNlcz1bXX1jaGVja0lmU2tpcFJlcXVpcmVkKGUpe2xldCB0PSExO3JldHVybiB0aGlzLnBsdWdpbk51bUZyYW1lc1NraXBwZWRbZV08dGhpcy5wbHVnaW5OdW1GcmFtZXNUb1NraXBbZV0/KHRoaXMucGx1Z2luTnVtRnJhbWVzU2tpcHBlZFtlXSsrLHQ9ITApOih0PSExLHRoaXMucGx1Z2luTnVtRnJhbWVzU2tpcHBlZFtlXT0wKSx0fX07dmFyIGdpPWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5UQUc9XCJbTWVkaWFTdHJlYW1QbHVnaW5zTWFuYWdlcl1cIjt0aGlzLnBsdWdpbnM9bmV3IFNldCx0aGlzLmFuYWx5dGljcz1uZXcgaXQoZSksdGhpcy5yb29tPXR9YWRkUGx1Z2lucyhlKXtlLmZvckVhY2godD0+e3ZhciBpO3N3aXRjaCh0LmdldE5hbWUoKSl7Y2FzZVwiSE1TRWZmZWN0c1BsdWdpblwiOmlmKCEoKGk9dGhpcy5yb29tKSE9bnVsbCYmaS5pc0VmZmVjdHNFbmFibGVkKSl7bGV0IHI9XCJFZmZlY3RzIFZpcnR1YWwgQmFja2dyb3VuZCBpcyBub3QgZW5hYmxlZCBmb3IgdGhpcyByb29tXCI7aWYodGhpcy5wbHVnaW5zLnNpemU9PT0wKXRocm93IEVycm9yKHIpO2wudyh0aGlzLlRBRyxyKTtyZXR1cm59YnJlYWs7ZGVmYXVsdDp9dGhpcy5wbHVnaW5zLmFkZCh0KX0pfXJlbW92ZVBsdWdpbnMoZSl7ZS5mb3JFYWNoKHQ9Pnt0LnN0b3AoKSx0aGlzLmFuYWx5dGljcy5yZW1vdmVkKHQuZ2V0TmFtZSgpKSx0aGlzLnBsdWdpbnMuZGVsZXRlKHQpfSl9YXBwbHlQbHVnaW5zKGUpe2xldCB0PWU7Zm9yKGxldCBpIG9mIHRoaXMucGx1Z2lucyl7bGV0IHI9aS5nZXROYW1lKCk7dHJ5e3Q9aS5hcHBseSh0KSx0aGlzLmFuYWx5dGljcy5hZGRlZChyKX1jYXRjaChzKXt0aGlzLmFuYWx5dGljcy5mYWlsdXJlKHIscyksbC5lKFwiQ291bGQgbm90IGFwcGx5IHBsdWdpblwiLHMscil9fXJldHVybiB0fWdldFBsdWdpbnMoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnBsdWdpbnMpLm1hcChlPT5lLmdldE5hbWUoKSl9Y2xlYW51cCgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0aGlzLnJlbW92ZVBsdWdpbnMoQXJyYXkuZnJvbSh0aGlzLnBsdWdpbnMpKX0pfX07aW1wb3J0e3Y0IGFzIE9vfWZyb21cInV1aWRcIjt2YXIgTm89W1wiaW5pdF9yZXNwb25zZV90aW1lXCIsXCJ3c19jb25uZWN0X3RpbWVcIixcIm9uX3BvbGljeV9jaGFuZ2VfdGltZVwiLFwibG9jYWxfYXVkaW9fdHJhY2tfdGltZVwiLFwibG9jYWxfdmlkZW9fdHJhY2tfdGltZVwiLFwicGVlcl9saXN0X3RpbWVcIixcInJvb21fc3RhdGVfdGltZVwiLFwiam9pbl9yZXNwb25zZV90aW1lXCJdLFRpPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5ldmVudFBlcmZvcm1hbmNlTWVhc3VyZXM9e319c3RhcnQoZSl7cGVyZm9ybWFuY2UubWFyayhlKX1lbmQoZSl7dmFyIHQ7dHJ5e3RoaXMuZXZlbnRQZXJmb3JtYW5jZU1lYXN1cmVzW2VdPXBlcmZvcm1hbmNlLm1lYXN1cmUoZSxlKSxsLmQoXCJbSE1TUGVyZm9ybWFuY2VUaW1pbmddXCIsZSwodD10aGlzLmV2ZW50UGVyZm9ybWFuY2VNZWFzdXJlc1tlXSk9PW51bGw/dm9pZCAwOnQuZHVyYXRpb24pfWNhdGNoKGkpe2wudyhcIltBbmFseXRpY3NUaW1lcl1cIixgRXJyb3IgaW4gbWVhc3VyaW5nIHBlcmZvcm1hbmNlIGZvciBldmVudCAke2V9YCx7ZXJyb3I6aX0pfX1nZXRUaW1lVGFrZW4oZSl7dmFyIHQ7cmV0dXJuKHQ9dGhpcy5ldmVudFBlcmZvcm1hbmNlTWVhc3VyZXNbZV0pPT1udWxsP3ZvaWQgMDp0LmR1cmF0aW9ufWdldFRpbWVzKC4uLmUpe3JldHVyblsuLi5ObywuLi5lXS5yZWR1Y2UoKHQsaSk9Pk0obSh7fSx0KSx7W2ldOnRoaXMuZ2V0VGltZVRha2VuKGkpfSkse30pfWNsZWFudXAoKXt0aGlzLmV2ZW50UGVyZm9ybWFuY2VNZWFzdXJlcz17fX19O3ZhciBHcj17aXNBdWRpb011dGVkOiExLGlzVmlkZW9NdXRlZDohMSxhdWRpb0lucHV0RGV2aWNlSWQ6XCJkZWZhdWx0XCIsYXVkaW9PdXRwdXREZXZpY2VJZDpcImRlZmF1bHRcIix2aWRlb0RldmljZUlkOlwiZGVmYXVsdFwiLGF1ZGlvTW9kZTpcInZvaWNlXCJ9LE1lLGZpLGJlPWNsYXNzIGF7Y29uc3RydWN0b3IoZSx0LGkscixzKXt0aGlzLnN0b3JlPWU7dGhpcy5vYnNlcnZlcj10O3RoaXMuZGV2aWNlTWFuYWdlcj1pO3RoaXMuZXZlbnRCdXM9cjt0aGlzLmFuYWx5dGljc1RpbWVyPXM7dGhpcy5UQUc9XCJbTG9jYWxUcmFja01hbmFnZXJdXCI7dGhpcy5zZXRTY3JlZW5DYXB0dXJlSGFuZGxlQ29uZmlnKCl9Z2V0VHJhY2tzVG9QdWJsaXNoKCl7cmV0dXJuIGModGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKGU9R3Ipe2xldCB0PXRoaXMuZ2V0QVZUcmFja1NldHRpbmdzKGUpO2lmKCF0KXJldHVybltdO2xldCBpPSEhdC5hdWRpbyxyPSEhdC52aWRlbyxzPVtdLHt2aWRlb1RyYWNrOm8sYXVkaW9UcmFjazpufT15aWVsZCB0aGlzLnVwZGF0ZUN1cnJlbnRMb2NhbFRyYWNrU2V0dGluZ3ModCksZD0obz09bnVsbD92b2lkIDA6by5zdHJlYW0pfHwobj09bnVsbD92b2lkIDA6bi5zdHJlYW0pLHU9ISEobyYmdGhpcy5zdG9yZS5nZXRUcmFja0J5SWQoby50cmFja0lkKSkscD0hIShuJiZ0aGlzLnN0b3JlLmdldFRyYWNrQnlJZChuLnRyYWNrSWQpKTtpZih1JiZwKXJldHVybltdO2xldCBoPXthdWRpbzppJiYhbiYmKGUuaXNBdWRpb011dGVkP1wiZW1wdHlcIjohMCksdmlkZW86ciYmIW8mJihlLmlzVmlkZW9NdXRlZD9cImVtcHR5XCI6ITApfTtoLmF1ZGlvJiZ0aGlzLmFuYWx5dGljc1RpbWVyLnN0YXJ0KFwibG9jYWxfYXVkaW9fdHJhY2tfdGltZVwiKSxoLnZpZGVvJiZ0aGlzLmFuYWx5dGljc1RpbWVyLnN0YXJ0KFwibG9jYWxfdmlkZW9fdHJhY2tfdGltZVwiKTt0cnl7bC5kKHRoaXMuVEFHLFwiSW5pdCBMb2NhbCBUcmFja3NcIix7ZmV0Y2hUcmFja09wdGlvbnM6aH0pLHM9eWllbGQgdGhpcy5nZXRMb2NhbFRyYWNrcyhoLHQsZCl9Y2F0Y2goVCl7cz15aWVsZCB0aGlzLnJldHJ5R2V0TG9jYWxUcmFja3MoVCx0LGgsZCl9cmV0dXJuIGguYXVkaW8mJnRoaXMuYW5hbHl0aWNzVGltZXIuZW5kKFwibG9jYWxfYXVkaW9fdHJhY2tfdGltZVwiKSxoLnZpZGVvJiZ0aGlzLmFuYWx5dGljc1RpbWVyLmVuZChcImxvY2FsX3ZpZGVvX3RyYWNrX3RpbWVcIiksbyYmciYmIXUmJnMucHVzaChvKSxuJiZpJiYhcCYmcy5wdXNoKG4pLHN9KX1nZXRMb2NhbFRyYWNrcygpe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKihlPXthdWRpbzohMCx2aWRlbzohMH0sdCxpKXt0cnl7bGV0IHI9eWllbGQgdGhpcy5nZXROYXRpdmVMb2NhbFRyYWNrcyhlLHQpO3JldHVybiB0aGlzLmNyZWF0ZUhNU0xvY2FsVHJhY2tzKHIsdCxpKX1jYXRjaChyKXt0aHJvdyB0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkucHVibGlzaCh7ZGV2aWNlczp0aGlzLmRldmljZU1hbmFnZXIuZ2V0RGV2aWNlcygpLGVycm9yOnIsc2V0dGluZ3M6dH0pKSxyfX0pfWdldE5hdGl2ZUxvY2FsVHJhY2tzKCl7cmV0dXJuIGModGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKGU9e2F1ZGlvOiExLHZpZGVvOiExfSx0KXtsZXQgaT1uZXcgWmUoZS52aWRlbz09PSEwP3QudmlkZW86bnVsbCxlLmF1ZGlvPT09ITA/dC5hdWRpbzpudWxsLHQuc2ltdWxjYXN0KSxyPVtdO3JldHVybihpLmF1ZGlvfHxpLnZpZGVvKSYmci5wdXNoKC4uLnlpZWxkIHRoaXMuZ2V0QVZUcmFja3MoaSkpLHIucHVzaCguLi50aGlzLmdldEVtcHR5VHJhY2tzKGUpKSxyfSl9b3B0aW1pemVTY3JlZW5TaGFyZUNvbnN0cmFpbnQoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHMsbyxuO2lmKHR5cGVvZiB0LnZpZGVvPT1cImJvb2xlYW5cInx8ISgocz10LnZpZGVvKSE9bnVsbCYmcy53aWR0aCl8fCEoKG89dC52aWRlbykhPW51bGwmJm8uaGVpZ2h0KSlyZXR1cm47bGV0IGk9dGhpcy5zdG9yZS5nZXRQdWJsaXNoUGFyYW1zKCk7aWYoIWl8fCEoKG49aS5hbGxvd2VkKSE9bnVsbCYmbi5pbmNsdWRlcyhcInNjcmVlblwiKSkpcmV0dXJuO2xldCByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTtyLnNyY09iamVjdD1lLHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZG1ldGFkYXRhXCIsKCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldHt2aWRlb1dpZHRoOmQsdmlkZW9IZWlnaHQ6dX09cixwPWkuc2NyZWVuLGg9cC53aWR0aCpwLmhlaWdodCxUPWQvdSxnPXAud2lkdGgvcC5oZWlnaHQ7aWYoVD5nKXtsZXQgZj10LnZpZGVvLEU9VC9nLHY9TWF0aC5zcXJ0KEUpO2QqdT5oPyhmLndpZHRoPWQvdixmLmhlaWdodD11L3YpOihmLmhlaWdodD11KnYsZi53aWR0aD1kKnYpLHlpZWxkIGUuZ2V0VmlkZW9UcmFja3MoKVswXS5hcHBseUNvbnN0cmFpbnRzKGYpfX0pKX0pfWdldExvY2FsU2NyZWVuKGUsdD0hMSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBUO2xldCBpPXlpZWxkIHRoaXMuZ2V0T3JEZWZhdWx0U2NyZWVuc2hhcmVDb25maWcoZSkscj10aGlzLmdldFNjcmVlbnNoYXJlU2V0dGluZ3MoaS52aWRlb09ubHkpLHM9e3ZpZGVvOk0obSh7fSxyPT1udWxsP3ZvaWQgMDpyLnZpZGVvLnRvQ29uc3RyYWludHMoITApKSx7ZGlzcGxheVN1cmZhY2U6aS5kaXNwbGF5U3VyZmFjZX0pLHByZWZlckN1cnJlbnRUYWI6aS5wcmVmZXJDdXJyZW50VGFiLHNlbGZCcm93c2VyU3VyZmFjZTppLnNlbGZCcm93c2VyU3VyZmFjZSxzdXJmYWNlU3dpdGNoaW5nOmkuc3VyZmFjZVN3aXRjaGluZyxzeXN0ZW1BdWRpbzppLnN5c3RlbUF1ZGlvfTtpZihyIT1udWxsJiZyLmF1ZGlvKXtsZXQgZz0oVD1yPT1udWxsP3ZvaWQgMDpyLmF1ZGlvKT09bnVsbD92b2lkIDA6VC50b0NvbnN0cmFpbnRzKCk7ZGVsZXRlIGcuYWR2YW5jZWQscy5hdWRpbz1NKG0oe30sZykse2F1dG9HYWluQ29udHJvbDohMSxub2lzZVN1cHByZXNzaW9uOiExLGdvb2dBdXRvR2FpbkNvbnRyb2w6ITEsZWNob0NhbmNlbGxhdGlvbjohMX0pfWVsc2UgZSE9bnVsbCYmZS5mb3JjZUN1cnJlbnRUYWImJmUucHJlZmVyQ3VycmVudFRhYiYmZS5jcm9wRWxlbWVudCYmKHMuYXVkaW89e2VjaG9DYW5jZWxsYXRpb246ITAsbm9pc2VTdXBwcmVzc2lvbjohMH0pO2xldCBvO3RyeXtsLmQoXCJyZXRyaWV2aW5nIHNjcmVlbnNoYXJlIHdpdGggXCIse2NvbmZpZzppfSx7Y29uc3RyYWludHM6c30pLG89eWllbGQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEocyksdCYmKHlpZWxkIHRoaXMub3B0aW1pemVTY3JlZW5TaGFyZUNvbnN0cmFpbnQobyxzKSl9Y2F0Y2goZyl7bC53KHRoaXMuVEFHLFwiZXJyb3IgaW4gZ2V0dGluZyBzY3JlZW5zaGFyZSAtIFwiLGcpO2xldCBmPV9lKGcsXCJzY3JlZW5cIik7dGhyb3cgdGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh5LnB1Ymxpc2goe2Vycm9yOmYsZGV2aWNlczp0aGlzLmRldmljZU1hbmFnZXIuZ2V0RGV2aWNlcygpLHNldHRpbmdzOm5ldyBaZShyPT1udWxsP3ZvaWQgMDpyLnZpZGVvLHI9PW51bGw/dm9pZCAwOnIuYXVkaW8sITEpfSkpLGZ9bGV0IG49W10sZD1uZXcgU2UobyksdT1vLmdldFZpZGVvVHJhY2tzKClbMF0scD1uZXcgRyhkLHUsXCJzY3JlZW5cIix0aGlzLmV2ZW50QnVzLHI9PW51bGw/dm9pZCAwOnIudmlkZW8sdGhpcy5zdG9yZS5nZXRSb29tKCkpO3Auc2V0U2ltdWxjYXN0RGVmaW5pdG9ucyh0aGlzLnN0b3JlLmdldFNpbXVsY2FzdERlZmluaXRpb25zRm9yUGVlcih0aGlzLnN0b3JlLmdldExvY2FsUGVlcigpLFwic2NyZWVuXCIpKTt0cnl7bGV0IGc9dGhpcy52YWxpZGF0ZUN1cnJlbnRUYWJDYXB0dXJlKHAsaS5mb3JjZUN1cnJlbnRUYWIpO3AuaXNDdXJyZW50VGFiPWcseWllbGQgcC5jcm9wVG8oaS5jcm9wVGFyZ2V0KX1jYXRjaChnKXt0aHJvdyBvLmdldFRyYWNrcygpLmZvckVhY2goZj0+Zi5zdG9wKCkpLGd9bi5wdXNoKHApO2xldCBoPW8uZ2V0QXVkaW9UcmFja3MoKVswXTtpZihoKXtsZXQgZz1uZXcgZGUoZCxoLFwic2NyZWVuXCIsdGhpcy5ldmVudEJ1cyxyPT1udWxsP3ZvaWQgMDpyLmF1ZGlvLHRoaXMuc3RvcmUuZ2V0Um9vbSgpKTtuLnB1c2goZyl9cmV0dXJuIGwudih0aGlzLlRBRyxcImdldExvY2FsU2NyZWVuXCIsbiksbn0pfXNldFNjcmVlbkNhcHR1cmVIYW5kbGVDb25maWcoZSl7dmFyIHQ7ISgodD1uYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSE9bnVsbCYmdC5zZXRDYXB0dXJlSGFuZGxlQ29uZmlnKXx8dGhpcy5pc0luSWZyYW1lKCl8fChlPWV8fHt9LE9iamVjdC5hc3NpZ24oZSx7aGFuZGxlOk9vKCksZXhwb3NlT3JpZ2luOiExLHBlcm1pdHRlZE9yaWdpbnM6W3dpbmRvdy5sb2NhdGlvbi5vcmlnaW5dfSksbC5kKFwic2V0dGluZyBjYXB0dXJlIGhhbmRsZSAtIFwiLGUuaGFuZGxlKSxuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLnNldENhcHR1cmVIYW5kbGVDb25maWcoZSksdGhpcy5jYXB0dXJlSGFuZGxlSWRlbnRpZmllcj1lLmhhbmRsZSl9dmFsaWRhdGVDdXJyZW50VGFiQ2FwdHVyZShlLHQpe2xldCBpPWUuZ2V0Q2FwdHVyZUhhbmRsZSgpLHI9ISEodGhpcy5jYXB0dXJlSGFuZGxlSWRlbnRpZmllciYmKGk9PW51bGw/dm9pZCAwOmkuaGFuZGxlKT09PXRoaXMuY2FwdHVyZUhhbmRsZUlkZW50aWZpZXIpO2lmKHQmJiFyKXRocm93IGwuZSh0aGlzLlRBRyxcImN1cnJlbnQgdGFiIHdhcyBub3Qgc2hhcmVkIHdpdGggZm9yY2VDdXJyZW50VGFiIGFzIHRydWVcIiksUy5UcmFja3NFcnJvcnMuQ3VycmVudFRhYk5vdFNoYXJlZCgpO3JldHVybiByfXJlcXVlc3RQZXJtaXNzaW9ucygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7KHlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHthdWRpbzohMCx2aWRlbzohMH0pKS5nZXRUcmFja3MoKS5mb3JFYWNoKHQ9PnQuc3RvcCgpKX1jYXRjaChlKXtsLmUodGhpcy5UQUcsZSl9fSl9c3RhdGljIGdldEVtcHR5VmlkZW9UcmFjayhlKXt2YXIgbixkLHU7bGV0IHQ9KChuPWU9PW51bGw/dm9pZCAwOmUuZ2V0U2V0dGluZ3MoKSk9PW51bGw/dm9pZCAwOm4ud2lkdGgpfHwzMjAsaT0oKGQ9ZT09bnVsbD92b2lkIDA6ZS5nZXRTZXR0aW5ncygpKT09bnVsbD92b2lkIDA6ZC5oZWlnaHQpfHwyNDAscj0xO01lfHwoTWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxNZS53aWR0aD10LE1lLmhlaWdodD1pLCh1PU1lLmdldENvbnRleHQoXCIyZFwiKSk9PW51bGx8fHUuZmlsbFJlY3QoMCwwLHQsaSkpLGZpfHwoZmk9c2V0SW50ZXJ2YWwoKCk9PntsZXQgcD1NZT09bnVsbD92b2lkIDA6TWUuZ2V0Q29udGV4dChcIjJkXCIpO3AmJnAuZmlsbFJlY3QoMCwwLDEsMSl9LDFlMy9yKSk7bGV0IG89TWUuY2FwdHVyZVN0cmVhbShyKS5nZXRWaWRlb1RyYWNrcygpWzBdO3JldHVybiBvLmVuYWJsZWQ9ITEsb31zdGF0aWMgZ2V0RW1wdHlBdWRpb1RyYWNrKCl7bGV0IGU9Y2UuZ2V0QXVkaW9Db250ZXh0KCksdD1lLmNyZWF0ZU9zY2lsbGF0b3IoKSxpPWUuY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbigpO3QuY29ubmVjdChpKSx0LnN0YXJ0KCk7bGV0IHI9aS5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTtyZXR1cm4gci5lbmFibGVkPSExLHJ9c3RhdGljIGNsZWFudXAoKXtjbGVhckludGVydmFsKGZpKSxmaT12b2lkIDAsTWU9dm9pZCAwfWdldEFWVHJhY2tzKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7bGV0IHQ9eWllbGQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe2F1ZGlvOmUuYXVkaW8/ZS5hdWRpby50b0NvbnN0cmFpbnRzKCk6ITEsdmlkZW86ZS52aWRlbz9lLnZpZGVvLnRvQ29uc3RyYWludHMoKTohMX0pO3JldHVybiB0LmdldFZpZGVvVHJhY2tzKCkuY29uY2F0KHQuZ2V0QXVkaW9UcmFja3MoKSl9Y2F0Y2godCl7eWllbGQgdGhpcy5kZXZpY2VNYW5hZ2VyLmluaXQoKTtsZXQgaT0hISghdGhpcy5kZXZpY2VNYW5hZ2VyLmhhc1dlYmNhbVBlcm1pc3Npb24mJmUudmlkZW8pLHI9ISEoIXRoaXMuZGV2aWNlTWFuYWdlci5oYXNNaWNyb3Bob25lUGVybWlzc2lvbiYmZS5hdWRpbykscz10aGlzLmdldEVycm9yVHlwZShpLHIpO3Rocm93IF9lKHQscyl9fSl9Z2V0QVZUcmFja1NldHRpbmdzKGUpe2xldCB0PXRoaXMuZ2V0QXVkaW9TZXR0aW5ncyhlKSxpPXRoaXMuZ2V0VmlkZW9TZXR0aW5ncyhlKTtyZXR1cm4hdCYmIWk/bnVsbDpuZXcgeGUoKS52aWRlbyhpKS5hdWRpbyh0KS5idWlsZCgpfWlzSW5JZnJhbWUoKXt0cnl7cmV0dXJuIHdpbmRvdy5zZWxmIT09d2luZG93LnRvcH1jYXRjaChlKXtyZXR1cm4hMH19cmV0cnlHZXRMb2NhbFRyYWNrcyhlLHQsaSxyKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYoZSBpbnN0YW5jZW9mIGsmJmUuYWN0aW9uPT09XCJUUkFDS1wiKXt0aGlzLm9ic2VydmVyLm9uRmFpbHVyZShlKTtsZXQgcz1lLmNvZGU9PT1QLlRyYWNrc0Vycm9ycy5PVkVSX0NPTlNUUkFJTkVELG89ZS5tZXNzYWdlLmluY2x1ZGVzKFwiYXVkaW9cIiksbj1lLm1lc3NhZ2UuaW5jbHVkZXMoXCJ2aWRlb1wiKTtpZihzKXtsZXQgZD1uZXcgeGUoKS52aWRlbyhuZXcgS2UpLmF1ZGlvKG5ldyAkZSkuYnVpbGQoKTtsLncodGhpcy5UQUcsXCJGZXRjaCBBViBUcmFja3MgZmFpbGVkIHdpdGggb3ZlcmNvbnN0cmFpbmVkIGVycm9yXCIse2ZldGNoVHJhY2tPcHRpb25zOml9LHtlcnJvcjplfSk7dHJ5e3JldHVybiB5aWVsZCB0aGlzLmdldExvY2FsVHJhY2tzKGksZCxyKX1jYXRjaCh1KXtsZXQgcD11IGluc3RhbmNlb2Ygaz91Lm5hdGl2ZUVycm9yOnUsaD11O2lmKChwPT1udWxsP3ZvaWQgMDpwLm5hbWUpPT09XCJPdmVyY29uc3RyYWluZWRFcnJvclwiKXtsZXQgVD1TLlRyYWNrc0Vycm9ycy5HZW5lcmljVHJhY2soXCJUUkFDS1wiLFwiT3ZlcmNvbnN0cmFpbmVkIGVycm9yIGFmdGVyIGRyb3BwaW5nIGFsbCBjb25zdHJhaW50c1wiKTtULmFkZE5hdGl2ZUVycm9yKHApLGg9VH1yZXR1cm4geWllbGQgdGhpcy5yZXRyeUdldExvY2FsVHJhY2tzKGgsdCxpLHIpfX1pLmF1ZGlvPW8/XCJlbXB0eVwiOmkuYXVkaW8saS52aWRlbz1uP1wiZW1wdHlcIjppLnZpZGVvLGwudyh0aGlzLlRBRyxcIkZldGNoIEFWIFRyYWNrcyBmYWlsZWRcIix7ZmV0Y2hUcmFja09wdGlvbnM6aX0sZSk7dHJ5e3JldHVybiB5aWVsZCB0aGlzLmdldExvY2FsVHJhY2tzKGksdCxyKX1jYXRjaChkKXtyZXR1cm4gbC53KHRoaXMuVEFHLFwiRmV0Y2ggZW1wdHkgdGFja3MgZmFpbGVkXCIsZCksaS5hdWRpbz1pLmF1ZGlvJiZcImVtcHR5XCIsaS52aWRlbz1pLnZpZGVvJiZcImVtcHR5XCIsdGhpcy5vYnNlcnZlci5vbkZhaWx1cmUoZCkseWllbGQgdGhpcy5nZXRMb2NhbFRyYWNrcyhpLHQscil9fWVsc2UgcmV0dXJuIGwudyh0aGlzLlRBRyxcIkZldGNoIEFWIFRyYWNrcyBmYWlsZWQgLSB1bmtub3duIGV4Y2VwdGlvblwiLGUpLHRoaXMub2JzZXJ2ZXIub25GYWlsdXJlKGUpLFtdfSl9Z2V0RXJyb3JUeXBlKGUsdCl7cmV0dXJuIGUmJnQ/XCJhdWRpbywgdmlkZW9cIjplP1widmlkZW9cIjp0P1wiYXVkaW9cIjpcImF1ZGlvLCB2aWRlb1wifWdldEVtcHR5VHJhY2tzKGUpe2xldCB0PVtdO3JldHVybiBlLmF1ZGlvPT09XCJlbXB0eVwiJiZ0LnB1c2goYS5nZXRFbXB0eUF1ZGlvVHJhY2soKSksZS52aWRlbz09PVwiZW1wdHlcIiYmdC5wdXNoKGEuZ2V0RW1wdHlWaWRlb1RyYWNrKCkpLHR9dXBkYXRlQ3VycmVudExvY2FsVHJhY2tTZXR0aW5ncyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXJUcmFja3MoKSxpPXQuZmluZChuPT5uLnR5cGU9PT1cInZpZGVvXCImJm4uc291cmNlPT09XCJyZWd1bGFyXCIpLHI9dC5maW5kKG49Pm4udHlwZT09PVwiYXVkaW9cIiYmbi5zb3VyY2U9PT1cInJlZ3VsYXJcIikscz10LmZpbmQobj0+bi50eXBlPT09XCJ2aWRlb1wiJiZuLnNvdXJjZT09PVwic2NyZWVuXCIpO2UhPW51bGwmJmUudmlkZW8mJih5aWVsZCBpPT1udWxsP3ZvaWQgMDppLnNldFNldHRpbmdzKGUudmlkZW8pKSxlIT1udWxsJiZlLmF1ZGlvJiYoeWllbGQgcj09bnVsbD92b2lkIDA6ci5zZXRTZXR0aW5ncyhlLmF1ZGlvKSk7bGV0IG89dGhpcy5nZXRTY3JlZW5zaGFyZVNldHRpbmdzKCEwKTtyZXR1cm4gbyE9bnVsbCYmby52aWRlbyYmKHlpZWxkIHM9PW51bGw/dm9pZCAwOnMuc2V0U2V0dGluZ3Mobz09bnVsbD92b2lkIDA6by52aWRlbykpLHt2aWRlb1RyYWNrOmksYXVkaW9UcmFjazpyfX0pfWdldEF1ZGlvU2V0dGluZ3MoZSl7dmFyIG87bGV0IHQ9dGhpcy5zdG9yZS5nZXRQdWJsaXNoUGFyYW1zKCk7aWYoIXR8fCEoKG89dC5hbGxvd2VkKSE9bnVsbCYmby5pbmNsdWRlcyhcImF1ZGlvXCIpKSlyZXR1cm4gbnVsbDtsZXQgaT10aGlzLnN0b3JlLmdldExvY2FsUGVlcigpLHI9aT09bnVsbD92b2lkIDA6aS5hdWRpb1RyYWNrLHM9KHI9PW51bGw/dm9pZCAwOnIuc2V0dGluZ3MuZGV2aWNlSWQpfHxlLmF1ZGlvSW5wdXREZXZpY2VJZDtyZXR1cm4gbmV3IFEoKS5jb2RlYyh0LmF1ZGlvLmNvZGVjKS5tYXhCaXRyYXRlKHQuYXVkaW8uYml0UmF0ZSkuZGV2aWNlSWQoc3x8R3IuYXVkaW9JbnB1dERldmljZUlkKS5idWlsZCgpfWdldFZpZGVvU2V0dGluZ3MoZSl7dmFyIG47bGV0IHQ9dGhpcy5zdG9yZS5nZXRQdWJsaXNoUGFyYW1zKCk7aWYoIXR8fCEoKG49dC5hbGxvd2VkKSE9bnVsbCYmbi5pbmNsdWRlcyhcInZpZGVvXCIpKSlyZXR1cm4gbnVsbDtsZXQgaT10aGlzLnN0b3JlLmdldExvY2FsUGVlcigpLHI9aT09bnVsbD92b2lkIDA6aS52aWRlb1RyYWNrLHM9KHI9PW51bGw/dm9pZCAwOnIuc2V0dGluZ3MuZGV2aWNlSWQpfHxlLnZpZGVvRGV2aWNlSWQsbz10LnZpZGVvO3JldHVybiBuZXcgcSgpLmNvZGVjKG8uY29kZWMpLm1heEJpdHJhdGUoby5iaXRSYXRlKS5tYXhGcmFtZXJhdGUoby5mcmFtZVJhdGUpLnNldFdpZHRoKG8ud2lkdGgpLnNldEhlaWdodChvLmhlaWdodCkuZGV2aWNlSWQoc3x8R3IudmlkZW9EZXZpY2VJZCkuYnVpbGQoKX1nZXRTY3JlZW5zaGFyZVNldHRpbmdzKGU9ITEpe3ZhciByO2xldCB0PXRoaXMuc3RvcmUuZ2V0UHVibGlzaFBhcmFtcygpO2lmKCF0fHwhKChyPXQuYWxsb3dlZCkhPW51bGwmJnIuaW5jbHVkZXMoXCJzY3JlZW5cIikpKXJldHVybiBudWxsO2xldCBpPXQuc2NyZWVuO3JldHVybnt2aWRlbzpuZXcgcSgpLm1heEJpdHJhdGUoaS5iaXRSYXRlLCExKS5jb2RlYyhpLmNvZGVjKS5tYXhGcmFtZXJhdGUoaS5mcmFtZVJhdGUpLnNldFdpZHRoKGkud2lkdGgpLnNldEhlaWdodChpLmhlaWdodCkuYnVpbGQoKSxhdWRpbzplP3ZvaWQgMDpuZXcgUSgpLmJ1aWxkKCl9fWdldE9yRGVmYXVsdFNjcmVlbnNoYXJlQ29uZmlnKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgaTtsZXQgdD1PYmplY3QuYXNzaWduKHt2aWRlb09ubHk6ITEsYXVkaW9Pbmx5OiExLGZvcmNlQ3VycmVudFRhYjohMSxwcmVmZXJDdXJyZW50VGFiOiExLHNlbGZCcm93c2VyU3VyZmFjZTpcImV4Y2x1ZGVcIixzdXJmYWNlU3dpdGNoaW5nOlwiaW5jbHVkZVwiLHN5c3RlbUF1ZGlvOlwiZXhjbHVkZVwiLGRpc3BsYXlTdXJmYWNlOlwibW9uaXRvclwifSxlfHx7fSk7cmV0dXJuIHQuZm9yY2VDdXJyZW50VGFiJiYodC52aWRlb09ubHk9ITAsdC5wcmVmZXJDdXJyZW50VGFiPSEwLHQuc2VsZkJyb3dzZXJTdXJmYWNlPVwiaW5jbHVkZVwiLHQuc3VyZmFjZVN3aXRjaGluZz1cImV4Y2x1ZGVcIiksdC5wcmVmZXJDdXJyZW50VGFiJiYodC5zZWxmQnJvd3NlclN1cmZhY2U9XCJpbmNsdWRlXCIsdC5kaXNwbGF5U3VyZmFjZT12b2lkIDApLHQuY3JvcEVsZW1lbnQmJigoaT13aW5kb3cuQ3JvcFRhcmdldCkhPW51bGwmJmkuZnJvbUVsZW1lbnQpJiYodC5jcm9wVGFyZ2V0PXlpZWxkIHdpbmRvdy5Dcm9wVGFyZ2V0LmZyb21FbGVtZW50KHQuY3JvcEVsZW1lbnQpKSx0fSl9Y3JlYXRlSE1TTG9jYWxUcmFja3MoZSx0LGkpe2xldCByPWUuZmluZChuPT5uLmtpbmQ9PT1cInZpZGVvXCIpLHM9ZS5maW5kKG49Pm4ua2luZD09PVwiYXVkaW9cIik7aT9lLmZvckVhY2gobj0+aT09bnVsbD92b2lkIDA6aS5uYXRpdmVTdHJlYW0uYWRkVHJhY2sobikpOmk9bmV3IFNlKG5ldyBNZWRpYVN0cmVhbShlKSk7bGV0IG89W107aWYocyYmKHQhPW51bGwmJnQuYXVkaW8pKXtsZXQgbj1uZXcgZGUoaSxzLFwicmVndWxhclwiLHRoaXMuZXZlbnRCdXMsdC5hdWRpbyx0aGlzLnN0b3JlLmdldFJvb20oKSk7by5wdXNoKG4pfWlmKHImJih0IT1udWxsJiZ0LnZpZGVvKSl7bGV0IG49bmV3IEcoaSxyLFwicmVndWxhclwiLHRoaXMuZXZlbnRCdXMsdC52aWRlbyx0aGlzLnN0b3JlLmdldFJvb20oKSk7bi5zZXRTaW11bGNhc3REZWZpbml0b25zKHRoaXMuc3RvcmUuZ2V0U2ltdWxjYXN0RGVmaW5pdGlvbnNGb3JQZWVyKHRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCksXCJyZWd1bGFyXCIpKSxvLnB1c2gobil9cmV0dXJuIG99fTtmdW5jdGlvbiBacyhhLGUpe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4heG8oYVtpXSxlW2ldKX19dmFyIEc9Y2xhc3MgYSBleHRlbmRzIGV0e2NvbnN0cnVjdG9yKHQsaSxyLHMsbz1uZXcgcSgpLmJ1aWxkKCksbil7c3VwZXIodCxpLHIpO3RoaXMuZXZlbnRCdXM9czt0aGlzLnJvb209bjt0aGlzLl9sYXllckRlZmluaXRpb25zPVtdO3RoaXMuVEFHPVwiW0hNU0xvY2FsVmlkZW9UcmFja11cIjt0aGlzLmVuYWJsZWRTdGF0ZUJlZm9yZUJhY2tncm91bmQ9ITE7dGhpcy5pc0N1cnJlbnRUYWI9ITE7dGhpcy5pc1B1Ymxpc2hlZD0hMTt0aGlzLnJlcGxhY2VTZW5kZXJUcmFjaz10PT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZighdGhpcy50cmFuc2NlaXZlcnx8dGhpcy50cmFuc2NlaXZlci5kaXJlY3Rpb24hPT1cInNlbmRvbmx5XCIpe2wuZCh0aGlzLlRBRyxgdHJhbnNjZWl2ZXIgZm9yICR7dGhpcy50cmFja0lkfSBub3QgYXZhaWxhYmxlIG9yIG5vdCBjb25uZWN0ZWQgeWV0YCk7cmV0dXJufXlpZWxkIHRoaXMudHJhbnNjZWl2ZXIuc2VuZGVyLnJlcGxhY2VUcmFjayh0KX0pO3RoaXMuYnVpbGROZXdTZXR0aW5ncz10PT57bGV0e3dpZHRoOmksaGVpZ2h0OnIsY29kZWM6cyxtYXhGcmFtZXJhdGU6byxtYXhCaXRyYXRlOm4sZGV2aWNlSWQ6ZCxhZHZhbmNlZDp1LGZhY2luZ01vZGU6cH09bShtKHt9LHRoaXMuc2V0dGluZ3MpLHQpO3JldHVybiBuZXcgS2UoaSxyLHMsbyxkLHUsbixwKX07dGhpcy5oYW5kbGVTZXR0aW5nc0NoYW5nZT10PT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgaT10aGlzLnN0cmVhbSxyPVpzKHQsdGhpcy5zZXR0aW5ncyk7aWYocihcIm1heEJpdHJhdGVcIikmJnQubWF4Qml0cmF0ZSYmKHlpZWxkIGkuc2V0TWF4Qml0cmF0ZUFuZEZyYW1lcmF0ZSh0aGlzKSkscihcIndpZHRoXCIpfHxyKFwiaGVpZ2h0XCIpfHxyKFwiYWR2YW5jZWRcIikpaWYodGhpcy5zb3VyY2U9PT1cInZpZGVvXCIpe2xldCBzPXlpZWxkIHRoaXMucmVwbGFjZVRyYWNrV2l0aCh0KTt5aWVsZCB0aGlzLnJlcGxhY2VTZW5kZXIocyx0aGlzLmVuYWJsZWQpLHRoaXMubmF0aXZlVHJhY2s9cyx5aWVsZCB0aGlzLnByb2Nlc3NQbHVnaW5zKCksdGhpcy52aWRlb0hhbmRsZXIudXBkYXRlU2lua3MoKX1lbHNlIHlpZWxkIHRoaXMubmF0aXZlVHJhY2suYXBwbHlDb25zdHJhaW50cyh0LnRvQ29uc3RyYWludHMoKSl9KTt0aGlzLmhhbmRsZURldmljZUNoYW5nZT0odCxpPSExKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYoWnModCx0aGlzLnNldHRpbmdzKShcImRldmljZUlkXCIpJiZ0aGlzLnNvdXJjZT09PVwicmVndWxhclwiKXtpZih0aGlzLmVuYWJsZWQpe2RlbGV0ZSB0LmZhY2luZ01vZGU7bGV0IG89eWllbGQgdGhpcy5yZXBsYWNlVHJhY2tXaXRoKHQpO3lpZWxkIHRoaXMucmVwbGFjZVNlbmRlcihvLHRoaXMuZW5hYmxlZCksdGhpcy5uYXRpdmVUcmFjaz1vLHlpZWxkIHRoaXMucHJvY2Vzc1BsdWdpbnMoKSx0aGlzLnZpZGVvSGFuZGxlci51cGRhdGVTaW5rcygpfWxldCBzPXRoaXMubmF0aXZlVHJhY2suZ2V0U2V0dGluZ3MoKS5ncm91cElkOyFpJiZ0LmRldmljZUlkJiYoWC51cGRhdGVTZWxlY3Rpb24oXCJ2aWRlb0lucHV0XCIse2RldmljZUlkOnQuZGV2aWNlSWQsZ3JvdXBJZDpzfSksdGhpcy5ldmVudEJ1cy5kZXZpY2VDaGFuZ2UucHVibGlzaCh7aXNVc2VyU2VsZWN0aW9uOiEwLHR5cGU6XCJ2aWRlb1wiLHNlbGVjdGlvbjp7ZGV2aWNlSWQ6dC5kZXZpY2VJZCxncm91cElkOnN9fSkpfX0pO3RoaXMudHJhY2tQZXJtaXNzaW9ucz0oKT0+e2hpKFwiY2FtZXJhXCIsdD0+e3RoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5wZXJtaXNzaW9uQ2hhbmdlKHRoaXMudHlwZSx0KSksdD09PVwiZGVuaWVkXCImJnRoaXMuZXZlbnRCdXMubG9jYWxWaWRlb0VuYWJsZWQucHVibGlzaCh7ZW5hYmxlZDohMSx0cmFjazp0aGlzfSl9KX07dGhpcy5oYW5kbGVUcmFja011dGU9KCk9PntsLmQodGhpcy5UQUcsXCJtdXRlZCBuYXRpdmVseVwiLGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSk7bGV0IHQ9ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlPT09XCJoaWRkZW5cIj9cInZpc2liaWxpdHktY2hhbmdlXCI6XCJpbmNvbWluZy1jYWxsXCI7dGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh0aGlzLnNlbmRJbnRlcnJ1cHRpb25FdmVudCh7c3RhcnRlZDohMCxyZWFzb246dH0pKSx0aGlzLmV2ZW50QnVzLmxvY2FsVmlkZW9FbmFibGVkLnB1Ymxpc2goe2VuYWJsZWQ6ITEsdHJhY2s6dGhpc30pfTt0aGlzLmhhbmRsZVRyYWNrVW5tdXRlTmF0aXZlbHk9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2wuZCh0aGlzLlRBRyxcInVubXV0ZWQgbmF0aXZlbHlcIik7bGV0IHQ9ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlPT09XCJoaWRkZW5cIj9cInZpc2liaWxpdHktY2hhbmdlXCI6XCJpbmNvbWluZy1jYWxsXCI7dGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh0aGlzLnNlbmRJbnRlcnJ1cHRpb25FdmVudCh7c3RhcnRlZDohMSxyZWFzb246dH0pKSx0aGlzLmhhbmRsZVRyYWNrVW5tdXRlKCksdGhpcy5ldmVudEJ1cy5sb2NhbFZpZGVvRW5hYmxlZC5wdWJsaXNoKHtlbmFibGVkOnRoaXMuZW5hYmxlZCx0cmFjazp0aGlzfSksdGhpcy5ldmVudEJ1cy5sb2NhbFZpZGVvVW5tdXRlZE5hdGl2ZWx5LnB1Ymxpc2goKSx5aWVsZCB0aGlzLnNldEVuYWJsZWQodGhpcy5lbmFibGVkKX0pO3RoaXMucmVtb3ZlT3JSZXBsYWNlUHJvY2Vzc2VkVHJhY2s9dD0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dD90IT09dGhpcy5wcm9jZXNzZWRUcmFjayYmKHRoaXMucHJvY2Vzc2VkVHJhY2s9dCk6dGhpcy5wcm9jZXNzZWRUcmFjaz12b2lkIDAseWllbGQgdGhpcy5yZXBsYWNlU2VuZGVyVHJhY2sodGhpcy5wcm9jZXNzZWRUcmFja3x8dGhpcy5uYXRpdmVUcmFjayl9KTt0aGlzLmhhbmRsZVZpc2liaWxpdHlDaGFuZ2U9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZT09PVwiaGlkZGVuXCIpdGhpcy5lbmFibGVkU3RhdGVCZWZvcmVCYWNrZ3JvdW5kPXRoaXMuZW5hYmxlZCx0aGlzLmVuYWJsZWQmJih5aWVsZCB0aGlzLnNldEVuYWJsZWQoITEpKSx0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHRoaXMuc2VuZEludGVycnVwdGlvbkV2ZW50KHtzdGFydGVkOiEwLHJlYXNvbjpcInZpc2liaWxpdHktY2hhbmdlXCJ9KSk7ZWxzZXtpZihsLmQodGhpcy5UQUcsXCJ2aXNpYmlsaXR5IHZpc2libGUsIHJlc3RvcmluZyB0cmFjayBzdGF0ZVwiLHRoaXMuZW5hYmxlZFN0YXRlQmVmb3JlQmFja2dyb3VuZCksdGhpcy5lbmFibGVkU3RhdGVCZWZvcmVCYWNrZ3JvdW5kKXRyeXt5aWVsZCB0aGlzLnNldEVuYWJsZWQoITApfWNhdGNoKHQpe3RoaXMuZXZlbnRCdXMuZXJyb3IucHVibGlzaCh0KX10aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHRoaXMuc2VuZEludGVycnVwdGlvbkV2ZW50KHtzdGFydGVkOiExLHJlYXNvbjpcInZpc2liaWxpdHktY2hhbmdlXCJ9KSl9fSk7dGhpcy5hZGRUcmFja0V2ZW50TGlzdGVuZXJzKGkpLHRoaXMudHJhY2tQZXJtaXNzaW9ucygpLHQudHJhY2tzLnB1c2godGhpcyksdGhpcy5zZXRWaWRlb0hhbmRsZXIobmV3IHR0KHRoaXMpKSx0aGlzLnNldHRpbmdzPW8sby5kZXZpY2VJZCE9PWkuZ2V0U2V0dGluZ3MoKS5kZXZpY2VJZCYmaS5lbmFibGVkJiYodGhpcy5zZXR0aW5ncz10aGlzLmJ1aWxkTmV3U2V0dGluZ3Moe2RldmljZUlkOmkuZ2V0U2V0dGluZ3MoKS5kZXZpY2VJZH0pKSx0aGlzLnBsdWdpbnNNYW5hZ2VyPW5ldyBJdCh0aGlzLHMpLHRoaXMubWVkaWFTdHJlYW1QbHVnaW5zTWFuYWdlcj1uZXcgZ2kocyxuKSx0aGlzLnNldEZpcnN0VHJhY2tJZCh0aGlzLnRyYWNrSWQpLHRoaXMuZXZlbnRCdXMubG9jYWxBdWRpb1VubXV0ZWROYXRpdmVseS5zdWJzY3JpYmUodGhpcy5oYW5kbGVUcmFja1VubXV0ZSksVSYmcj09PVwicmVndWxhclwiJiZNdCgpJiZkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMuaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSl9Y2xvbmUodCl7bGV0IGk9dGhpcy5uYXRpdmVUcmFjay5jbG9uZSgpO3QubmF0aXZlU3RyZWFtLmFkZFRyYWNrKGkpO2xldCByPW5ldyBhKHQsaSx0aGlzLnNvdXJjZSx0aGlzLmV2ZW50QnVzLHRoaXMuc2V0dGluZ3MsdGhpcy5yb29tKTtyZXR1cm4gci5wZWVySWQ9dGhpcy5wZWVySWQsdGhpcy5wbHVnaW5zTWFuYWdlci5wbHVnaW5zTWFwLnNpemU+MCYmdGhpcy5wbHVnaW5zTWFuYWdlci5wbHVnaW5zTWFwLmZvckVhY2gocz0+e3IuYWRkUGx1Z2luKHMpLmNhdGNoKG89PmwuZSh0aGlzLlRBRyxcIlBsdWdpbiBhZGQgZmFpbGVkIHdoaWxlIG1pZ3JhdGluZ1wiLHMsbykpfSksdGhpcy5tZWRpYVN0cmVhbVBsdWdpbnNNYW5hZ2VyLnBsdWdpbnMuc2l6ZT4wJiZyLmFkZFN0cmVhbVBsdWdpbnMoQXJyYXkuZnJvbSh0aGlzLm1lZGlhU3RyZWFtUGx1Z2luc01hbmFnZXIucGx1Z2lucykpLHJ9c2V0U2ltdWxjYXN0RGVmaW5pdG9ucyh0KXt0aGlzLl9sYXllckRlZmluaXRpb25zPXR9Z2V0U2ltdWxjYXN0RGVmaW5pdGlvbnMoKXtyZXR1cm4gdGhpcy5fbGF5ZXJEZWZpbml0aW9uc31zZXRFbmFibGVkKHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgaTtpZih0IT09dGhpcy5lbmFibGVkKXtpZih0aGlzLnNvdXJjZT09PVwicmVndWxhclwiKXtsZXQgcjt0P3I9eWllbGQgdGhpcy5yZXBsYWNlVHJhY2tXaXRoKHRoaXMuc2V0dGluZ3MpOnI9eWllbGQgdGhpcy5yZXBsYWNlVHJhY2tXaXRoQmxhbmsoKSx5aWVsZCB0aGlzLnJlcGxhY2VTZW5kZXIocix0KSwoaT10aGlzLm5hdGl2ZVRyYWNrKT09bnVsbHx8aS5zdG9wKCksdGhpcy5uYXRpdmVUcmFjaz1yLHlpZWxkIG5lKGEucHJvdG90eXBlLHRoaXMsXCJzZXRFbmFibGVkXCIpLmNhbGwodGhpcyx0KSx0JiYoeWllbGQgdGhpcy5wbHVnaW5zTWFuYWdlci53YWl0Rm9yUmVzdGFydCgpLHlpZWxkIHRoaXMucHJvY2Vzc1BsdWdpbnMoKSx0aGlzLnNldHRpbmdzPXRoaXMuYnVpbGROZXdTZXR0aW5ncyh7ZGV2aWNlSWQ6ci5nZXRTZXR0aW5ncygpLmRldmljZUlkfSkpLHRoaXMudmlkZW9IYW5kbGVyLnVwZGF0ZVNpbmtzKCl9dGhpcy5ldmVudEJ1cy5sb2NhbFZpZGVvRW5hYmxlZC5wdWJsaXNoKHtlbmFibGVkOnQsdHJhY2s6dGhpc30pfX0pfXByb2Nlc3NQbHVnaW5zKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RyeXtpZih0aGlzLnBsdWdpbnNNYW5hZ2VyLmdldFBsdWdpbnMoKS5sZW5ndGg+MClyZXR1cm47aWYodGhpcy5tZWRpYVN0cmVhbVBsdWdpbnNNYW5hZ2VyLmdldFBsdWdpbnMoKS5sZW5ndGg+MCl7bGV0IHI9dGhpcy5tZWRpYVN0cmVhbVBsdWdpbnNNYW5hZ2VyLmFwcGx5UGx1Z2lucyhuZXcgTWVkaWFTdHJlYW0oW3RoaXMubmF0aXZlVHJhY2tdKSkuZ2V0VmlkZW9UcmFja3MoKVswXTt5aWVsZCB0aGlzLnNldFByb2Nlc3NlZFRyYWNrKHIpfWVsc2UgeWllbGQgdGhpcy5zZXRQcm9jZXNzZWRUcmFjaygpO3RoaXMudmlkZW9IYW5kbGVyLnVwZGF0ZVNpbmtzKCl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcihcImVycm9yIGluIHByb2Nlc3NpbmcgcGx1Z2luKHMpXCIsdCl9fSl9YWRkU3RyZWFtUGx1Z2lucyh0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYodGhpcy5wbHVnaW5zTWFuYWdlci5nZXRQbHVnaW5zKCkubGVuZ3RoPjApdGhyb3cgRXJyb3IoXCJQbHVnaW5zIG9mIHR5cGUgSE1TTWVkaWFTdHJlYW1QbHVnaW4gYW5kIEhNU1ZpZGVvUGx1Z2luIGNhbm5vdCBiZSB1c2VkIHRvZ2V0aGVyXCIpO3RoaXMubWVkaWFTdHJlYW1QbHVnaW5zTWFuYWdlci5hZGRQbHVnaW5zKHQpLHlpZWxkIHRoaXMucHJvY2Vzc1BsdWdpbnMoKX0pfXJlbW92ZVN0cmVhbVBsdWdpbnModCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RoaXMubWVkaWFTdHJlYW1QbHVnaW5zTWFuYWdlci5yZW1vdmVQbHVnaW5zKHQpLHlpZWxkIHRoaXMucHJvY2Vzc1BsdWdpbnMoKX0pfWlzUHVibGlzaGVkVHJhY2tJZCh0KXtyZXR1cm4gdGhpcy5wdWJsaXNoZWRUcmFja0lkPT09dH1hZGRTaW5rKHQpe3RoaXMuYWRkU2lua0ludGVybmFsKHQsdGhpcy5wcm9jZXNzZWRUcmFja3x8dGhpcy5uYXRpdmVUcmFjayl9c2V0U2V0dGluZ3ModCxpPSExKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHI9dGhpcy5idWlsZE5ld1NldHRpbmdzKHQpO2lmKHlpZWxkIHRoaXMuaGFuZGxlRGV2aWNlQ2hhbmdlKHIsaSksIXRoaXMuZW5hYmxlZHx8dmUodGhpcy5uYXRpdmVUcmFjaykpe3RoaXMuc2V0dGluZ3M9cjtyZXR1cm59ZWxzZSB5aWVsZCB0aGlzLnBsdWdpbnNNYW5hZ2VyLndhaXRGb3JSZXN0YXJ0KCk7eWllbGQgdGhpcy5oYW5kbGVTZXR0aW5nc0NoYW5nZShyKSx0aGlzLnNldHRpbmdzPXJ9KX1nZXRQbHVnaW5zKCl7cmV0dXJuIHRoaXMubWVkaWFTdHJlYW1QbHVnaW5zTWFuYWdlci5nZXRQbHVnaW5zKCkubGVuZ3RoPjA/dGhpcy5tZWRpYVN0cmVhbVBsdWdpbnNNYW5hZ2VyLmdldFBsdWdpbnMoKTp0aGlzLnBsdWdpbnNNYW5hZ2VyLmdldFBsdWdpbnMoKX1hZGRQbHVnaW4odCxpKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYodGhpcy5tZWRpYVN0cmVhbVBsdWdpbnNNYW5hZ2VyLmdldFBsdWdpbnMoKS5sZW5ndGg+MCl0aHJvdyBFcnJvcihcIlBsdWdpbnMgb2YgdHlwZSBITVNWaWRlb1BsdWdpbiBhbmQgSE1TTWVkaWFTdHJlYW1QbHVnaW4gY2Fubm90IGJlIHVzZWQgdG9nZXRoZXJcIik7cmV0dXJuIHRoaXMucGx1Z2luc01hbmFnZXIuYWRkUGx1Z2luKHQsaSl9KX1yZW1vdmVQbHVnaW4odCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLnBsdWdpbnNNYW5hZ2VyLnJlbW92ZVBsdWdpbih0KX0pfXZhbGlkYXRlUGx1Z2luKHQpe3JldHVybiB0aGlzLnBsdWdpbnNNYW5hZ2VyLnZhbGlkYXRlUGx1Z2luKHQpfWNsZWFudXAoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHQ7dGhpcy5ldmVudEJ1cy5sb2NhbEF1ZGlvVW5tdXRlZE5hdGl2ZWx5LnVuc3Vic2NyaWJlKHRoaXMuaGFuZGxlVHJhY2tVbm11dGUpLHRoaXMucmVtb3ZlVHJhY2tFdmVudExpc3RlbmVycyh0aGlzLm5hdGl2ZVRyYWNrKSx5aWVsZCB0aGlzLm1lZGlhU3RyZWFtUGx1Z2luc01hbmFnZXIuY2xlYW51cCgpLHlpZWxkIHRoaXMucGx1Z2luc01hbmFnZXIuY2xlYW51cCgpLG5lKGEucHJvdG90eXBlLHRoaXMsXCJjbGVhbnVwXCIpLmNhbGwodGhpcyksdGhpcy50cmFuc2NlaXZlcj12b2lkIDAsKHQ9dGhpcy5wcm9jZXNzZWRUcmFjayk9PW51bGx8fHQuc3RvcCgpLHRoaXMuaXNQdWJsaXNoZWQ9ITEsVSYmTXQoKSYmZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIix0aGlzLmhhbmRsZVZpc2liaWxpdHlDaGFuZ2UpfSl9Y3JvcFRvKHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZih0JiZ0aGlzLnNvdXJjZT09PVwic2NyZWVuXCIpdHJ5e3RoaXMubmF0aXZlVHJhY2suY3JvcFRvJiYoeWllbGQgdGhpcy5uYXRpdmVUcmFjay5jcm9wVG8odCkpfWNhdGNoKGkpe3Rocm93IGwuZSh0aGlzLlRBRyxcImZhaWxlZCB0byBjcm9wIHNjcmVlbnNoYXJlIGNhcHR1cmUgLSBcIixpKSxTLlRyYWNrc0Vycm9ycy5HZW5lcmljVHJhY2soXCJUUkFDS1wiLFwiZmFpbGVkIHRvIGNyb3Agc2NyZWVuc2hhcmUgY2FwdHVyZVwiKX19KX1nZXRDYXB0dXJlSGFuZGxlKCl7aWYodGhpcy5uYXRpdmVUcmFjay5nZXRDYXB0dXJlSGFuZGxlKXJldHVybiB0aGlzLm5hdGl2ZVRyYWNrLmdldENhcHR1cmVIYW5kbGUoKX1zZXRQcm9jZXNzZWRUcmFjayh0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYoIXRoaXMubmF0aXZlVHJhY2suZW5hYmxlZCl7dGhpcy5wcm9jZXNzZWRUcmFjaz10O3JldHVybn15aWVsZCB0aGlzLnJlbW92ZU9yUmVwbGFjZVByb2Nlc3NlZFRyYWNrKHQpLHRoaXMudmlkZW9IYW5kbGVyLnVwZGF0ZVNpbmtzKCl9KX1nZXRUcmFja0lEQmVpbmdTZW50KCl7cmV0dXJuIHRoaXMuZ2V0VHJhY2tCZWluZ1NlbnQoKS5pZH1nZXRUcmFja0JlaW5nU2VudCgpe3JldHVybiB0aGlzLmVuYWJsZWQ/dGhpcy5wcm9jZXNzZWRUcmFja3x8dGhpcy5uYXRpdmVUcmFjazp0aGlzLm5hdGl2ZVRyYWNrfXN3aXRjaENhbWVyYSgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcztsZXQgdD10aGlzLmdldE1lZGlhVHJhY2tTZXR0aW5ncygpLmZhY2luZ01vZGU7aWYoIXR8fHRoaXMuc291cmNlIT09XCJyZWd1bGFyXCIpe2wuZCh0aGlzLlRBRyxcImZhY2luZ01vZGUgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm59bGV0IGk9dD09PVwiZW52aXJvbm1lbnRcIj9cInVzZXJcIjpcImVudmlyb25tZW50XCI7KHM9dGhpcy5uYXRpdmVUcmFjayk9PW51bGx8fHMuc3RvcCgpO2xldCByPXlpZWxkIHRoaXMucmVwbGFjZVRyYWNrV2l0aCh0aGlzLmJ1aWxkTmV3U2V0dGluZ3Moe2ZhY2luZ01vZGU6aSxkZXZpY2VJZDp2b2lkIDB9KSk7eWllbGQgdGhpcy5yZXBsYWNlU2VuZGVyKHIsdGhpcy5lbmFibGVkKSx0aGlzLm5hdGl2ZVRyYWNrPXIseWllbGQgdGhpcy5wcm9jZXNzUGx1Z2lucygpLHRoaXMudmlkZW9IYW5kbGVyLnVwZGF0ZVNpbmtzKCksdGhpcy5zZXR0aW5ncz10aGlzLmJ1aWxkTmV3U2V0dGluZ3Moe2RldmljZUlkOnRoaXMubmF0aXZlVHJhY2suZ2V0U2V0dGluZ3MoKS5kZXZpY2VJZCxmYWNpbmdNb2RlOml9KSxYLnVwZGF0ZVNlbGVjdGlvbihcInZpZGVvSW5wdXRcIix7ZGV2aWNlSWQ6dGhpcy5zZXR0aW5ncy5kZXZpY2VJZCxncm91cElkOnRoaXMubmF0aXZlVHJhY2suZ2V0U2V0dGluZ3MoKS5ncm91cElkfSl9KX1yZXBsYWNlVHJhY2tXaXRoKHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgaT10aGlzLm5hdGl2ZVRyYWNrO3RoaXMucmVtb3ZlVHJhY2tFdmVudExpc3RlbmVycyhpKSxpPT1udWxsfHxpLnN0b3AoKTt0cnl7bGV0IHI9eWllbGQgd3IodCk7cmV0dXJuIHRoaXMuYWRkVHJhY2tFdmVudExpc3RlbmVycyhyKSxsLmQodGhpcy5UQUcsXCJyZXBsYWNlVHJhY2ssIFByZXZpb3VzIHRyYWNrIHN0b3BwZWRcIixpLFwibmV3VHJhY2tcIixyKSx0aGlzLnNldHRpbmdzLmRldmljZUlkPT09XCJkZWZhdWx0XCImJih0aGlzLnNldHRpbmdzPXRoaXMuYnVpbGROZXdTZXR0aW5ncyh7ZGV2aWNlSWQ6dGhpcy5uYXRpdmVUcmFjay5nZXRTZXR0aW5ncygpLmRldmljZUlkfSkpLHJ9Y2F0Y2gocil7bGV0IHM9eWllbGQgd3IodGhpcy5zZXR0aW5ncyk7dGhyb3cgdGhpcy5hZGRUcmFja0V2ZW50TGlzdGVuZXJzKHMpLHlpZWxkIHRoaXMucmVwbGFjZVNlbmRlcihzLHRoaXMuZW5hYmxlZCksdGhpcy5uYXRpdmVUcmFjaz1zLHlpZWxkIHRoaXMucHJvY2Vzc1BsdWdpbnMoKSx0aGlzLnZpZGVvSGFuZGxlci51cGRhdGVTaW5rcygpLHRoaXMuaXNQdWJsaXNoZWQmJnRoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5wdWJsaXNoKHtlcnJvcjpyfSkpLHJ9fSl9cmVwbGFjZVRyYWNrV2l0aEJsYW5rKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PXRoaXMubmF0aXZlVHJhY2ssaT1iZS5nZXRFbXB0eVZpZGVvVHJhY2sodCk7cmV0dXJuIHRoaXMucmVtb3ZlVHJhY2tFdmVudExpc3RlbmVycyh0KSx0aGlzLmFkZFRyYWNrRXZlbnRMaXN0ZW5lcnMoaSksdD09bnVsbHx8dC5zdG9wKCksbC5kKHRoaXMuVEFHLFwicmVwbGFjZVRyYWNrV2l0aEJsYW5rLCBQcmV2aW91cyB0cmFjayBzdG9wcGVkXCIsdCxcIm5ld1RyYWNrXCIsaSksaX0pfXJlcGxhY2VTZW5kZXIodCxpKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aT95aWVsZCB0aGlzLnJlcGxhY2VTZW5kZXJUcmFjayh0aGlzLnByb2Nlc3NlZFRyYWNrfHx0KTp5aWVsZCB0aGlzLnJlcGxhY2VTZW5kZXJUcmFjayh0KSx0aGlzLnN0cmVhbS5yZXBsYWNlU3RyZWFtVHJhY2sodGhpcy5uYXRpdmVUcmFjayx0KX0pfWFkZFRyYWNrRXZlbnRMaXN0ZW5lcnModCl7dC5hZGRFdmVudExpc3RlbmVyKFwibXV0ZVwiLHRoaXMuaGFuZGxlVHJhY2tNdXRlKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJ1bm11dGVcIix0aGlzLmhhbmRsZVRyYWNrVW5tdXRlTmF0aXZlbHkpfXJlbW92ZVRyYWNrRXZlbnRMaXN0ZW5lcnModCl7dC5yZW1vdmVFdmVudExpc3RlbmVyKFwibXV0ZVwiLHRoaXMuaGFuZGxlVHJhY2tNdXRlKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1bm11dGVcIix0aGlzLmhhbmRsZVRyYWNrVW5tdXRlTmF0aXZlbHkpfX07dmFyIHJ0PVwicmVuZWdvdGlhdGlvbi1jYWxsYmFjay1pZFwiLHZpPVwiaW9uLXNmdVwiO3ZhciBzdD1cIlNVQlNDUklCRV9JQ0VfQ09OTkVDVElPTl9DQUxMQkFDS19JRFwiO3ZhciBlYT1cImh0dHBzOi8vZXZlbnQuMTAwbXMubGl2ZS92Mi9jbGllbnQvcmVwb3J0XCIsdGE9XCJodHRwczovL2V2ZW50LW5vbnByb2QuMTAwbXMubGl2ZS92Mi9jbGllbnQvcmVwb3J0XCI7dmFyIFJ0PU1hdGgucG93KDIsMzEpLTEsVj17REVWSUNFX0NIQU5HRTpcImRldmljZS1jaGFuZ2VcIixMT0NBTF9BVURJT19FTkFCTEVEOlwibG9jYWwtYXVkaW8tZW5hYmxlZFwiLExPQ0FMX1ZJREVPX0VOQUJMRUQ6XCJsb2NhbC12aWRlby1lbmFibGVkXCIsTE9DQUxfVklERU9fVU5NVVRFRF9OQVRJVkVMWTpcImxvY2FsLXZpZGVvLXVubXV0ZWQtbmF0aXZlbHlcIixMT0NBTF9BVURJT19VTk1VVEVEX05BVElWRUxZOlwibG9jYWwtYXVkaW8tdW5tdXRlZC1uYXRpdmVseVwiLFNUQVRTX1VQREFURTpcInN0YXRzLXVwZGF0ZVwiLFJUQ19TVEFUU19VUERBVEU6XCJydGMtc3RhdHMtdXBkYXRlXCIsVFJBQ0tfREVHUkFERUQ6XCJ0cmFjay1kZWdyYWRlZFwiLFRSQUNLX1JFU1RPUkVEOlwidHJhY2stcmVzdG9yZWRcIixUUkFDS19BVURJT19MRVZFTF9VUERBVEU6XCJ0cmFjay1hdWRpby1sZXZlbC11cGRhdGVcIixMT0NBTF9BVURJT19TSUxFTkNFOlwibG9jYWwtYXVkaW8tc2lsZW5jZVwiLEFOQUxZVElDUzpcImFuYWx5dGljc1wiLEFVRElPX1BMVUdJTl9GQUlMRUQ6XCJhdWRpby1wbHVnaW4tZmFpbGVkXCIsUE9MSUNZX0NIQU5HRTpcInBvbGljeS1jaGFuZ2VcIixMT0NBTF9ST0xFX1VQREFURTpcImxvY2FsLXJvbGUtdXBkYXRlXCIsQVVESU9fVFJBQ0tfVVBEQVRFOlwiYXVkaW8tdHJhY2stdXBkYXRlXCIsQVVESU9fVFJBQ0tfQURERUQ6XCJhdWRpby10cmFjay1hZGRlZFwiLEFVRElPX1RSQUNLX1JFTU9WRUQ6XCJhdWRpby10cmFjay1yZW1vdmVkXCIsQVVUT1BMQVlfRVJST1I6XCJhdXRvcGxheS1lcnJvclwiLExFQVZFOlwibGVhdmVcIixFUlJPUjpcImVycm9yXCJ9LGlhPVwiMi41XCIscmE9XCIyMDI1MDExNVwiLEFlPVwiX2hhbmRyYWlzZVwiLCRyPTFlMyxLcj02NCxzYT1cImh0dHBzOi8vd2hpdGVib2FyZC4xMDBtcy5saXZlXCIsYWE9XCJodHRwczovL3doaXRlYm9hcmQtcWEuMTAwbXMubGl2ZVwiO3ZhciBPPWNsYXNzIGEgZXh0ZW5kcyBldHtjb25zdHJ1Y3Rvcih0LGkscixzKXtzdXBlcih0LGkscik7dGhpcy5fZGVncmFkZWQ9ITE7dGhpcy5fZGVncmFkZWRBdD1udWxsO3RoaXMuX2xheWVyRGVmaW5pdGlvbnM9W107dGhpcy5oaXN0b3J5PW5ldyBxcjt0aGlzLnByZWZlcnJlZExheWVyPVwiaGlnaFwiO3RoaXMuZGlzYWJsZU5vbmVMYXllclJlcXVlc3Q9ITE7dGhpcy5kaXNhYmxlTm9uZUxheWVyUmVxdWVzdD0hIXMsdGhpcy5zZXRWaWRlb0hhbmRsZXIobmV3IHR0KHRoaXMpKX1zZXRUcmFja0lkKHQpe3RoaXMuYml6VHJhY2tJZD10fWdldCB0cmFja0lkKCl7cmV0dXJuIHRoaXMuYml6VHJhY2tJZHx8c3VwZXIudHJhY2tJZH1nZXQgZGVncmFkZWQoKXtyZXR1cm4gdGhpcy5fZGVncmFkZWR9Z2V0IGRlZ3JhZGVkQXQoKXtyZXR1cm4gdGhpcy5fZGVncmFkZWRBdH1zZXRFbmFibGVkKHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0IT09dGhpcy5lbmFibGVkJiYobmUoYS5wcm90b3R5cGUsdGhpcyxcInNldEVuYWJsZWRcIikuY2FsbCh0aGlzLHQpLHRoaXMudmlkZW9IYW5kbGVyLnVwZGF0ZVNpbmtzKCEwKSl9KX1zZXRQcmVmZXJyZWRMYXllcih0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYodD09PVwibm9uZVwiKXtsLncoXCJsYXllciBub25lIHdpbGwgYmUgaWdub3JlZFwiKTtyZXR1cm59aWYodGhpcy5wcmVmZXJyZWRMYXllcj10LCEhdGhpcy5zaG91bGRTZW5kVmlkZW9MYXllcih0LFwicHJlZmVyTGF5ZXJcIikpe2lmKCF0aGlzLmhhc1NpbmtzKCkpe2wuZChgW1JlbW90ZSBUcmFja10gJHt0aGlzLmxvZ0lkZW50aWZpZXJ9XG4gICAgICAgIHN0cmVhbUlkPSR7dGhpcy5zdHJlYW0uaWR9IFxuICAgICAgICB0cmFja0lkPSR7dGhpcy50cmFja0lkfVxuICAgICAgICBzYXZpbmcgJHt0fSwgc291cmNlPSR7dGhpcy5zb3VyY2V9XG4gICAgICAgIFRyYWNrIGRvZXMgbm90IGhhdmUgYW55IHNpbmtgKTtyZXR1cm59eWllbGQgdGhpcy5yZXF1ZXN0TGF5ZXIodCxcInByZWZlckxheWVyXCIpLHRoaXMucHVzaEluSGlzdG9yeShgdWlQcmVmZXJMYXllci0ke3R9YCl9fSl9Z2V0U2ltdWxjYXN0TGF5ZXIoKXtyZXR1cm4gdGhpcy5zdHJlYW0uZ2V0U2ltdWxjYXN0TGF5ZXIoKX1nZXRMYXllcigpe3JldHVybiB0aGlzLnN0cmVhbS5nZXRWaWRlb0xheWVyKCl9Z2V0UHJlZmVycmVkTGF5ZXIoKXtyZXR1cm4gdGhpcy5wcmVmZXJyZWRMYXllcn1nZXRQcmVmZXJyZWRMYXllckRlZmluaXRpb24oKXtyZXR1cm4gdGhpcy5fbGF5ZXJEZWZpbml0aW9ucy5maW5kKHQ9PnQubGF5ZXI9PT10aGlzLnByZWZlcnJlZExheWVyKX1yZXBsYWNlVHJhY2sodCl7dGhpcy5uYXRpdmVUcmFjaz10Lm5hdGl2ZVRyYWNrLHQudHJhbnNjZWl2ZXImJih0aGlzLnRyYW5zY2VpdmVyPXQudHJhbnNjZWl2ZXIsdGhpcy5zdHJlYW0udXBkYXRlSWQodC5zdHJlYW0uaWQpKSx0aGlzLnZpZGVvSGFuZGxlci51cGRhdGVTaW5rcygpfWFkZFNpbmsodCxpPSEwKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmUodGhpcy5uYXRpdmVUcmFjayk/eWllbGQgdGhpcy5yZXF1ZXN0TGF5ZXIodGhpcy5wcmVmZXJyZWRMYXllcixcImFkZFNpbmtcIik6KG5lKGEucHJvdG90eXBlLHRoaXMsXCJhZGRTaW5rXCIpLmNhbGwodGhpcyx0KSxpJiYoeWllbGQgdGhpcy51cGRhdGVMYXllcihcImFkZFNpbmtcIikpKSx0aGlzLnB1c2hJbkhpc3RvcnkoXCJ1aVNldExheWVyLWhpZ2hcIil9KX1yZW1vdmVTaW5rKHQsaT0hMCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe25lKGEucHJvdG90eXBlLHRoaXMsXCJyZW1vdmVTaW5rXCIpLmNhbGwodGhpcyx0KSxpJiYoeWllbGQgdGhpcy51cGRhdGVMYXllcihcInJlbW92ZVNpbmtcIikpLHRoaXMuX2RlZ3JhZGVkPSExLHRoaXMucHVzaEluSGlzdG9yeShcInVpU2V0TGF5ZXItbm9uZVwiKX0pfWdldFNpbXVsY2FzdERlZmluaXRpb25zKCl7cmV0dXJuWy4uLnRoaXMuX2xheWVyRGVmaW5pdGlvbnNdfXNldFNpbXVsY2FzdERlZmluaXRvbnModCl7dGhpcy5fbGF5ZXJEZWZpbml0aW9ucz10fXNldExheWVyRnJvbVNlcnZlcih0KXt0aGlzLl9kZWdyYWRlZD10aGlzLmdldERlZ3JhZGF0aW9uVmFsdWUodCksdGhpcy5fZGVncmFkZWRBdD10aGlzLl9kZWdyYWRlZD9uZXcgRGF0ZTp0aGlzLl9kZWdyYWRlZEF0O2xldCBpPXQuY3VycmVudF9sYXllcjtyZXR1cm4gbC5kKGBbUmVtb3RlIFRyYWNrXSAke3RoaXMubG9nSWRlbnRpZmllcn0gXG4gICAgICBzdHJlYW1JZD0ke3RoaXMuc3RyZWFtLmlkfSBcbiAgICAgIHRyYWNrSWQ9JHt0aGlzLnRyYWNrSWR9XG4gICAgICBsYXllciB1cGRhdGUgZnJvbSBzZnVcbiAgICAgIGN1cnJMYXllcj0ke3QuY3VycmVudF9sYXllcn1cbiAgICAgIHByZWZlcnJlZExheWVyPSR7dC5leHBlY3RlZF9sYXllcn1cbiAgICAgIHN1Yl9kZWdyYWRlZD0ke3Quc3Vic2NyaWJlcl9kZWdyYWRlZH1cbiAgICAgIHB1Yl9kZWdyYWRlZD0ke3QucHVibGlzaGVyX2RlZ3JhZGVkfVxuICAgICAgaXNEZWdyYWRlZD0ke3RoaXMuX2RlZ3JhZGVkfWApLHRoaXMuc3RyZWFtLnNldFZpZGVvTGF5ZXJMb2NhbGx5KGksdGhpcy5sb2dJZGVudGlmaWVyLFwic2V0TGF5ZXJGcm9tU2VydmVyXCIpLHRoaXMucHVzaEluSGlzdG9yeShgc2Z1TGF5ZXJVcGRhdGUtJHtpfWApLHRoaXMuX2RlZ3JhZGVkfWdldERlZ3JhZGF0aW9uVmFsdWUodCl7cmV0dXJuIHRoaXMuZW5hYmxlZCYmKHQucHVibGlzaGVyX2RlZ3JhZGVkfHx0LnN1YnNjcmliZXJfZGVncmFkZWQpJiZ0LmN1cnJlbnRfbGF5ZXI9PT1cIm5vbmVcIn11cGRhdGVMYXllcih0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGk9dGhpcy5wcmVmZXJyZWRMYXllcjt0aGlzLmVuYWJsZWQmJnRoaXMuaGFzU2lua3MoKT9pPXRoaXMucHJlZmVycmVkTGF5ZXI6dGhpcy5kaXNhYmxlTm9uZUxheWVyUmVxdWVzdHx8KGk9XCJub25lXCIpLHRoaXMuc2hvdWxkU2VuZFZpZGVvTGF5ZXIoaSx0KSYmKHlpZWxkIHRoaXMucmVxdWVzdExheWVyKGksdCkpfSl9cHVzaEluSGlzdG9yeSh0KXshMSYmdGhpcy5oaXN0b3J5LnB1c2goe25hbWU6dCxsYXllcjp0aGlzLmdldExheWVyKCksZGVncmFkZWQ6dGhpcy5kZWdyYWRlZH0pfXJlcXVlc3RMYXllcih0LGkpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7bGV0IHI9eWllbGQgdGhpcy5zdHJlYW0uc2V0VmlkZW9MYXllcih0LHRoaXMudHJhY2tJZCx0aGlzLmxvZ0lkZW50aWZpZXIsaSk7cmV0dXJuIGwuZChgW1JlbW90ZSBUcmFja10gJHt0aGlzLmxvZ0lkZW50aWZpZXJ9IFxuICAgICAgc3RyZWFtSWQ9JHt0aGlzLnN0cmVhbS5pZH1cbiAgICAgIHRyYWNrSWQ9JHt0aGlzLnRyYWNrSWR9XG4gICAgICBSZXF1ZXN0ZWQgbGF5ZXIgJHt0fSwgc291cmNlPSR7aX1gKSxyfWNhdGNoKHIpe3Rocm93IGwuZChgW1JlbW90ZSBUcmFja10gJHt0aGlzLmxvZ0lkZW50aWZpZXJ9IFxuICAgICAgc3RyZWFtSWQ9JHt0aGlzLnN0cmVhbS5pZH1cbiAgICAgIHRyYWNrSWQ9JHt0aGlzLnRyYWNrSWR9XG4gICAgICBGYWlsZWQgdG8gc2V0IGxheWVyICR7dH0sIHNvdXJjZT0ke2l9XG4gICAgICBlcnJvcj0ke3IubWVzc2FnZX1gKSxyfX0pfXNob3VsZFNlbmRWaWRlb0xheWVyKHQsaSl7bGV0IHI9dGhpcy5nZXRMYXllcigpO3JldHVybiB0aGlzLmRlZ3JhZGVkJiZ0PT09XCJub25lXCI/ITA6cj09PXQ/KGwuZChgW1JlbW90ZSBUcmFja10gJHt0aGlzLmxvZ0lkZW50aWZpZXJ9YCxgTm90IHNlbmRpbmcgdXBkYXRlLCBhbHJlYWR5IG9uIGxheWVyICR7dH0sIHNvdXJjZT0ke2l9YCksITEpOiEwfX0scXI9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmhpc3Rvcnk9W119cHVzaChlKXtlLnRpbWU9bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVsxXSx0aGlzLmhpc3RvcnkucHVzaChlKX19O3ZhciBTZT1jbGFzcyBleHRlbmRzIFlle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKTt0aGlzLlRBRz1cIltITVNMb2NhbFN0cmVhbV1cIjt0aGlzLmNvbm5lY3Rpb249bnVsbH1zZXRDb25uZWN0aW9uKHQpe3RoaXMuY29ubmVjdGlvbj10fWFkZFRyYW5zY2VpdmVyKHQsaSl7bGV0IHI9dGhpcy5jb25uZWN0aW9uLmFkZFRyYW5zY2VpdmVyKHQuZ2V0VHJhY2tCZWluZ1NlbnQoKSx7c3RyZWFtczpbdGhpcy5uYXRpdmVTdHJlYW1dLGRpcmVjdGlvbjpcInNlbmRvbmx5XCIsc2VuZEVuY29kaW5nczp0aGlzLmdldFRyYWNrRW5jb2RpbmdzKHQsaSl9KTtyZXR1cm4gdGhpcy5zZXRQcmVmZXJyZWRDb2RlYyhyLHQubmF0aXZlVHJhY2sua2luZCksdC50cmFuc2NlaXZlcj1yLHJ9c2V0TWF4Qml0cmF0ZUFuZEZyYW1lcmF0ZSh0LGkpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcjt5aWVsZChyPXRoaXMuY29ubmVjdGlvbik9PW51bGw/dm9pZCAwOnIuc2V0TWF4Qml0cmF0ZUFuZEZyYW1lcmF0ZSh0LGkpfSl9c2V0UHJlZmVycmVkQ29kZWModCxpKXt9cmVwbGFjZVN0cmVhbVRyYWNrKHQsaSl7dGhpcy5uYXRpdmVTdHJlYW0uYWRkVHJhY2soaSksdGhpcy5uYXRpdmVTdHJlYW0ucmVtb3ZlVHJhY2sodCl9cmVtb3ZlU2VuZGVyKHQpe3ZhciBzLG87aWYoIXRoaXMuY29ubmVjdGlvbnx8dGhpcy5jb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZT09PVwiY2xvc2VkXCIpe2wuZCh0aGlzLlRBRyxcInB1Ymxpc2ggY29ubmVjdGlvbiBpcyBub3QgaW5pdGlhbGlzZWQgb3IgY2xvc2VkXCIpO3JldHVybn1sZXQgaT0ocz10LnRyYW5zY2VpdmVyKT09bnVsbD92b2lkIDA6cy5zZW5kZXI7aWYoIWkpe2wudyh0aGlzLlRBRyxgTm8gc2VuZGVyIGZvdW5kIGZvciB0cmFja0lkPSR7dC50cmFja0lkfWApO3JldHVybn0obz10aGlzLmNvbm5lY3Rpb24pPT1udWxsfHxvLnJlbW92ZVRyYWNrKGkpO2xldCByPXRoaXMudHJhY2tzLmluZGV4T2YodCk7ciE9PS0xP3RoaXMudHJhY2tzLnNwbGljZShyLDEpOmwudyh0aGlzLlRBRyxgQ2Fubm90IGZpbmQgJHt0LnRyYWNrSWR9IGluIGxvY2FsbHkgc3RvcmVkIHRyYWNrc2ApfWdldFRyYWNrRW5jb2RpbmdzKHQsaSl7bGV0IHI9W107aWYodCBpbnN0YW5jZW9mIEcpaWYoaS5sZW5ndGg+MClsLmQodGhpcy5UQUcsXCJTaW11bGNhc3QgZW5hYmxlZCB3aXRoIGxheWVyc1wiLGkpLHIucHVzaCguLi5pKTtlbHNle2xldCBzPXthY3RpdmU6dGhpcy5uYXRpdmVTdHJlYW0uYWN0aXZlfTt0LnNldHRpbmdzLm1heEJpdHJhdGUmJiFHZSYmKHMubWF4Qml0cmF0ZT10LnNldHRpbmdzLm1heEJpdHJhdGUpLHIucHVzaChzKX1yZXR1cm4gcn19O3ZhciBQZT1jbGFzcyBleHRlbmRzIFlle2NvbnN0cnVjdG9yKHQsaSl7c3VwZXIodCk7dGhpcy5hdWRpbz0hMDt0aGlzLnZpZGVvPVwibm9uZVwiO3RoaXMuY29ubmVjdGlvbj1pfXNldEF1ZGlvKHQsaSxyKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dGhpcy5hdWRpbyE9PXQmJih0aGlzLmF1ZGlvPXQsbC5kKGBbUmVtb3RlIHN0cmVhbV0gJHtyfHxcIlwifSBcbiAgICBzdHJlYW1JZD0ke3RoaXMuaWR9XG4gICAgdHJhY2tJZD0ke2l9XG4gICAgc3Vic2NyaWJpbmcgYXVkaW8gLSAke3RoaXMuYXVkaW99YCkseWllbGQgdGhpcy5jb25uZWN0aW9uLnNlbmRPdmVyQXBpRGF0YUNoYW5uZWxXaXRoUmVzcG9uc2Uoe3BhcmFtczp7c3Vic2NyaWJlZDp0aGlzLmF1ZGlvLHRyYWNrX2lkOml9LG1ldGhvZDpcInByZWZlci1hdWRpby10cmFjay1zdGF0ZVwifSkpfSl9c2V0VmlkZW9MYXllckxvY2FsbHkodCxpLHIpe3RoaXMudmlkZW89dCxsLmQoYFtSZW1vdGUgc3RyZWFtXSAke2l9XG4gICAgc3RyZWFtSWQ9JHt0aGlzLmlkfVxuICAgIHNvdXJjZTogJHtyfVxuICAgIFNldHRpbmcgbGF5ZXIgZmllbGQgdG89JHt0fWApfXNldFZpZGVvTGF5ZXIodCxpLHIscyl7cmV0dXJuIGwuZChgW1JlbW90ZSBzdHJlYW1dICR7cn0gXG4gICAgICBzdHJlYW1JZD0ke3RoaXMuaWR9XG4gICAgICB0cmFja0lkPSR7aX0gXG4gICAgICBzb3VyY2U6ICR7c30gcmVxdWVzdCAke3R9IGxheWVyYCksdGhpcy5zZXRWaWRlb0xheWVyTG9jYWxseSh0LHIscyksdGhpcy5jb25uZWN0aW9uLnNlbmRPdmVyQXBpRGF0YUNoYW5uZWxXaXRoUmVzcG9uc2Uoe3BhcmFtczp7bWF4X3NwYXRpYWxfbGF5ZXI6dGhpcy52aWRlbyx0cmFja19pZDppfSxtZXRob2Q6XCJwcmVmZXItdmlkZW8tdHJhY2stc3RhdGVcIn0pfWdldFNpbXVsY2FzdExheWVyKCl7cmV0dXJuIHRoaXMudmlkZW99Z2V0VmlkZW9MYXllcigpe3JldHVybiB0aGlzLnZpZGVvfWlzQXVkaW9TdWJzY3JpYmVkKCl7cmV0dXJuIHRoaXMuYXVkaW99fTt2YXIgb2E9KGEsZSx0LGkpPT5jKHZvaWQgMCxudWxsLGZ1bmN0aW9uKigpe3ZhciBvO2xldCByLHM9e307aWYoKG89ZS50cmFuc2NlaXZlcikhPW51bGwmJm8uc2VuZGVyLnRyYWNrKXt0cnl7cj15aWVsZCBlLnRyYW5zY2VpdmVyLnNlbmRlci5nZXRTdGF0cygpO2xldCBuPXt9LGQ9e30sdT17fTtyPT1udWxsfHxyLmZvckVhY2gocD0+e3N3aXRjaChwLnR5cGUpe2Nhc2VcIm91dGJvdW5kLXJ0cFwiOmRbcC5pZF09cDticmVhaztjYXNlXCJyZW1vdGUtaW5ib3VuZC1ydHBcIjp1W3Auc3NyY109cDticmVhaztjYXNlXCJjb2RlY1wiOm5bcC5pZF09cC5taW1lVHlwZTticmVhaztkZWZhdWx0OmJyZWFrfX0pLE9iamVjdC5rZXlzKG0oe30sZCkpLmZvckVhY2gocD0+e3ZhciB2LFI7bGV0IGg9KHY9ZFtwXSk9PW51bGw/dm9pZCAwOnYuY29kZWNJZCxUPWg/bltoXTp2b2lkIDAsZztUJiYoZz1ULnN1YnN0cmluZyhULmluZGV4T2YoXCIvXCIpKzEpKTtsZXQgZj1NKG0oe30sZFtwXSkse3JpZDooUj1kW3BdKT09bnVsbD92b2lkIDA6Ui5yaWR9KSxFPXVbZi5zc3JjXTtzW3BdPU0obSh7fSxmKSx7Yml0cmF0ZTpIdChcImJ5dGVzU2VudFwiLGYsaT09bnVsbD92b2lkIDA6aVtwXSkscGFja2V0c0xvc3Q6RT09bnVsbD92b2lkIDA6RS5wYWNrZXRzTG9zdCxqaXR0ZXI6RT09bnVsbD92b2lkIDA6RS5qaXR0ZXIscm91bmRUcmlwVGltZTpFPT1udWxsP3ZvaWQgMDpFLnJvdW5kVHJpcFRpbWUsdG90YWxSb3VuZFRyaXBUaW1lOkU9PW51bGw/dm9pZCAwOkUudG90YWxSb3VuZFRyaXBUaW1lLHBlZXJOYW1lOnQscGVlcklEOmUucGVlcklkLGVuYWJsZWQ6ZS5lbmFibGVkLGNvZGVjOmd9KX0pfWNhdGNoKG4pe2EuYW5hbHl0aWNzLnB1Ymxpc2goeS5ydGNTdGF0c0ZhaWxlZChTLldlYnJ0Y0Vycm9ycy5TdGF0c0ZhaWxlZChcIlRSQUNLXCIsYEVycm9yIGdldHRpbmcgbG9jYWwgdHJhY2sgc3RhdHMgJHtlLnRyYWNrSWR9IC0gJHtuLm1lc3NhZ2V9YCkpKSxsLncoXCJbSE1TV2VicnRjU3RhdHNdXCIsXCJFcnJvciBpbiBnZXR0aW5nIGxvY2FsIHRyYWNrIHN0YXRzXCIsZSxuLG4ubmFtZSl9cmV0dXJuIHN9fSksbmE9KGEsZSx0LGkpPT5jKHZvaWQgMCxudWxsLGZ1bmN0aW9uKigpe3ZhciBkO2xldCByO3RyeXtyPXlpZWxkKGQ9ZS50cmFuc2NlaXZlcik9PW51bGw/dm9pZCAwOmQucmVjZWl2ZXIuZ2V0U3RhdHMoKX1jYXRjaCh1KXthLmFuYWx5dGljcy5wdWJsaXNoKHkucnRjU3RhdHNGYWlsZWQoUy5XZWJydGNFcnJvcnMuU3RhdHNGYWlsZWQoXCJUUkFDS1wiLGBFcnJvciBnZXR0aW5nIHJlbW90ZSB0cmFjayBzdGF0cyAke2UudHJhY2tJZH0gLSAke3UubWVzc2FnZX1gKSkpLGwudyhcIltITVNXZWJydGNTdGF0c11cIixcIkVycm9yIGluIGdldHRpbmcgcmVtb3RlIHRyYWNrIHN0YXRzXCIsZSx1KX1sZXQgcz1VbyhyKSxvPUh0KFwiYnl0ZXNSZWNlaXZlZFwiLHMsaSksbj1qcihcInBhY2tldHNMb3N0XCIscyxpKTtyZXR1cm4gcyE9bnVsbCYmcy5yZW1vdGUmJk9iamVjdC5hc3NpZ24ocy5yZW1vdGUse3BhY2tldHNMb3N0UmF0ZTpqcihcInBhY2tldHNMb3N0XCIscy5yZW1vdGUsaT09bnVsbD92b2lkIDA6aS5yZW1vdGUpfSkscyYmTShtKHt9LHMpLHtiaXRyYXRlOm8scGFja2V0c0xvc3RSYXRlOm4scGVlcklEOmUucGVlcklkLGVuYWJsZWQ6ZS5lbmFibGVkLHBlZXJOYW1lOnQsY29kZWM6cy5jb2RlY30pfSksVW89YT0+e2xldCBlLHQsaT17fTthPT1udWxsfHxhLmZvckVhY2gobz0+e3N3aXRjaChvLnR5cGUpe2Nhc2VcImluYm91bmQtcnRwXCI6ZT1vO2JyZWFrO2Nhc2VcIm91dGJvdW5kLXJ0cFwiOmU9bzticmVhaztjYXNlXCJyZW1vdGUtaW5ib3VuZC1ydHBcIjp0PW87YnJlYWs7Y2FzZVwiY29kZWNcIjppW28uaWRdPW8ubWltZVR5cGU7YnJlYWs7ZGVmYXVsdDpicmVha319KTtsZXQgcj1lIT1udWxsJiZlLmNvZGVjSWQ/aVtlLmNvZGVjSWRdOnZvaWQgMCxzO3JldHVybiByJiYocz1yLnN1YnN0cmluZyhyLmluZGV4T2YoXCIvXCIpKzEpKSxlJiZPYmplY3QuYXNzaWduKGUse3JlbW90ZTp0LGNvZGVjOnN9KX0sSnI9KGEsZSx0KT0+e2xldCBpPUJvKGUpLHI9SHQoYT09PVwicHVibGlzaFwiP1wiYnl0ZXNTZW50XCI6XCJieXRlc1JlY2VpdmVkXCIsaSx0JiZ0W2FdKTtyZXR1cm4gaSYmT2JqZWN0LmFzc2lnbihpLHtiaXRyYXRlOnJ9KX0sQm89YT0+e2xldCBlO3JldHVybiBhPT1udWxsfHxhLmZvckVhY2godD0+e3QudHlwZT09PVwidHJhbnNwb3J0XCImJihlPWE9PW51bGw/dm9pZCAwOmEuZ2V0KHQuc2VsZWN0ZWRDYW5kaWRhdGVQYWlySWQpKX0pLGV8fGE9PW51bGx8fGEuZm9yRWFjaCh0PT57dC50eXBlPT09XCJjYW5kaWRhdGUtcGFpclwiJiZ0LnNlbGVjdGVkJiYoZT10KX0pLGV9LGNhPWE9PntsZXQgZT17cGFja2V0c0xvc3Q6MCxqaXR0ZXI6MH07cmV0dXJuIGE9PW51bGx8fGEuZm9yRWFjaCh0PT57dC5wYWNrZXRzTG9zdCYmKGUucGFja2V0c0xvc3QrPXQucGFja2V0c0xvc3QpLHQuaml0dGVyPmUuaml0dGVyJiYoZS5qaXR0ZXI9dC5qaXR0ZXIpfSksZX0sZGE9KGEsZSk9PkFycmF5LmZyb20obmV3IFNldChhLmNvbmNhdChlKSkpLEh0PShhLGUsdCk9PmpyKGEsZSx0KSo4LGpyPShhLGUsdCk9PntsZXQgaT1lJiZlW2FdLHI9dD90W2FdOm51bGw7cmV0dXJuW2UsdCxoZShpKSxoZShyKV0uZXZlcnkobz0+ISFvKT9RcihpLHIsZT09bnVsbD92b2lkIDA6ZS50aW1lc3RhbXAsdD09bnVsbD92b2lkIDA6dC50aW1lc3RhbXApKjFlMzowfSxRcj0oYSxlLHQsaSk9PmhlKGEpJiZoZShlKSYmdCYmaT8oYS1lKS8odC1pKTowO3ZhciBNaT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSxyKXt0aGlzLnN0b3JlPWU7dGhpcy5ldmVudEJ1cz10O3RoaXMucHVibGlzaENvbm5lY3Rpb249aTt0aGlzLnN1YnNjcmliZUNvbm5lY3Rpb249cjt0aGlzLlRBRz1cIltITVNXZWJydGNTdGF0c11cIjt0aGlzLnBlZXJTdGF0cz17fTt0aGlzLnJlbW90ZVRyYWNrU3RhdHM9e307dGhpcy5sb2NhbFRyYWNrU3RhdHM9e307dGhpcy5nZXRMb2NhbFBlZXJTdGF0cz0oKT0+dGhpcy5wZWVyU3RhdHNbdGhpcy5sb2NhbFBlZXJJRF07dGhpcy5nZXRSZW1vdGVUcmFja1N0YXRzPWU9PnRoaXMucmVtb3RlVHJhY2tTdGF0c1tlXTt0aGlzLmdldEFsbFJlbW90ZVRyYWNrc1N0YXRzPSgpPT50aGlzLnJlbW90ZVRyYWNrU3RhdHM7dGhpcy5nZXRMb2NhbFRyYWNrU3RhdHM9KCk9PnRoaXMubG9jYWxUcmFja1N0YXRzO3RoaXMudXBkYXRlU3RhdHM9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMudXBkYXRlTG9jYWxQZWVyU3RhdHMoKSx5aWVsZCB0aGlzLnVwZGF0ZUxvY2FsVHJhY2tTdGF0cygpLHlpZWxkIHRoaXMudXBkYXRlUmVtb3RlVHJhY2tTdGF0cygpfSk7dGhpcy51cGRhdGVMb2NhbFBlZXJTdGF0cz0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHAsaCxULGc7bGV0IGU9dGhpcy5nZXRMb2NhbFBlZXJTdGF0cygpLHQ7dHJ5e3Q9eWllbGQocD10aGlzLnB1Ymxpc2hDb25uZWN0aW9uKT09bnVsbD92b2lkIDA6cC5nZXRTdGF0cygpfWNhdGNoKGYpe3RoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5ydGNTdGF0c0ZhaWxlZChTLldlYnJ0Y0Vycm9ycy5TdGF0c0ZhaWxlZChcIlBVQkxJU0hcIixmLm1lc3NhZ2UpKSksbC53KHRoaXMuVEFHLFwiRXJyb3IgaW4gZ2V0dGluZyBwdWJsaXNoIHN0YXRzXCIsZil9bGV0IGk9dCYmSnIoXCJwdWJsaXNoXCIsdCxlKSxyO3RyeXtyPXlpZWxkKGg9dGhpcy5zdWJzY3JpYmVDb25uZWN0aW9uKT09bnVsbD92b2lkIDA6aC5nZXRTdGF0cygpfWNhdGNoKGYpe3RoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5ydGNTdGF0c0ZhaWxlZChTLldlYnJ0Y0Vycm9ycy5TdGF0c0ZhaWxlZChcIlNVQlNDUklCRVwiLGYubWVzc2FnZSkpKSxsLncodGhpcy5UQUcsXCJFcnJvciBpbiBnZXR0aW5nIHN1YnNjcmliZSBzdGF0c1wiLGYpfWxldCBzPXImJkpyKFwic3Vic2NyaWJlXCIscixlKSx7cGFja2V0c0xvc3Q6byxqaXR0ZXI6bn09Y2EociksZD1RcihvLChUPWU9PW51bGw/dm9pZCAwOmUuc3Vic2NyaWJlKT09bnVsbD92b2lkIDA6VC5wYWNrZXRzTG9zdCxzPT1udWxsP3ZvaWQgMDpzLnRpbWVzdGFtcCwoZz1lPT1udWxsP3ZvaWQgMDplLnN1YnNjcmliZSk9PW51bGw/dm9pZCAwOmcudGltZXN0YW1wKSx1PXMmJk9iamVjdC5hc3NpZ24ocyx7cGFja2V0c0xvc3RSYXRlOmQsaml0dGVyOm4scGFja2V0c0xvc3Q6b30pO3RoaXMucGVlclN0YXRzW3RoaXMubG9jYWxQZWVySURdPXtwdWJsaXNoOmksc3Vic2NyaWJlOnV9fSk7dGhpcy51cGRhdGVSZW1vdGVUcmFja1N0YXRzPSgpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgaTtsZXQgZT1BcnJheS5mcm9tKHRoaXMuc3RvcmUuZ2V0VHJhY2tzTWFwKCkudmFsdWVzKCkpLmZpbHRlcihyPT5yIGluc3RhbmNlb2YgT3x8ciBpbnN0YW5jZW9mIGllKSx0PWUubWFwKHI9PnIudHJhY2tJZCk7T2JqZWN0LmtleXModGhpcy5yZW1vdGVUcmFja1N0YXRzKS5mb3JFYWNoKHI9Pnt0LmluY2x1ZGVzKHIpfHxkZWxldGUgdGhpcy5yZW1vdGVUcmFja1N0YXRzW3JdfSk7Zm9yKGxldCByIG9mIGUpe2xldCBzPXIucGVlcklkJiYoKGk9dGhpcy5zdG9yZS5nZXRQZWVyQnlJZChyLnBlZXJJZCkpPT1udWxsP3ZvaWQgMDppLm5hbWUpLG89dGhpcy5nZXRSZW1vdGVUcmFja1N0YXRzKHIudHJhY2tJZCksbj15aWVsZCBuYSh0aGlzLmV2ZW50QnVzLHIscyxvKTtuJiYodGhpcy5yZW1vdGVUcmFja1N0YXRzW3IudHJhY2tJZF09bil9fSk7dGhpcy51cGRhdGVMb2NhbFRyYWNrU3RhdHM9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBpO2xldCBlPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyVHJhY2tzKCkucmVkdWNlKChyLHMpPT4ocltzLmdldFRyYWNrSURCZWluZ1NlbnQoKV09cyxyKSx7fSksdD1kYShPYmplY3Qua2V5cyh0aGlzLmxvY2FsVHJhY2tTdGF0cyksT2JqZWN0LmtleXMoZSkpO2ZvcihsZXQgciBvZiB0KXtsZXQgcz1lW3JdO2lmKHMpe2xldCBvPShpPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCkpPT1udWxsP3ZvaWQgMDppLm5hbWUsbj15aWVsZCBvYSh0aGlzLmV2ZW50QnVzLHMsbyx0aGlzLmxvY2FsVHJhY2tTdGF0c1tyXSk7biYmKHRoaXMubG9jYWxUcmFja1N0YXRzW3JdPW4pfWVsc2UgZGVsZXRlIHRoaXMubG9jYWxUcmFja1N0YXRzW3JdfX0pO3ZhciBzO3RoaXMubG9jYWxQZWVySUQ9KHM9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKSk9PW51bGw/dm9pZCAwOnMucGVlcklkfXNldFBlZXJDb25uZWN0aW9ucyh7cHVibGlzaDplLHN1YnNjcmliZTp0fSl7dGhpcy5wdWJsaXNoQ29ubmVjdGlvbj1lLHRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbj10fWdldFB1Ymxpc2hQZWVyQ29ubmVjdGlvbigpe3JldHVybiB0aGlzLnB1Ymxpc2hDb25uZWN0aW9ufWdldFN1YnNjcmliZVBlZXJDb25uZWN0aW9uKCl7cmV0dXJuIHRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbn19O3ZhciB5aT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuc3RvcmU9ZTt0aGlzLmV2ZW50QnVzPXQ7dGhpcy5UQUc9XCJbSE1TV2VicnRjSW50ZXJuYWxzXVwiO3RoaXMuaW50ZXJ2YWw9MWUzO3RoaXMuaXNNb25pdG9yZWQ9ITE7dGhpcy5oYW5kbGVTdGF0c1VwZGF0ZT0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGU7eWllbGQoZT10aGlzLmhtc1N0YXRzKT09bnVsbD92b2lkIDA6ZS51cGRhdGVTdGF0cygpLHRoaXMuaG1zU3RhdHMmJnRoaXMuZXZlbnRCdXMuc3RhdHNVcGRhdGUucHVibGlzaCh0aGlzLmhtc1N0YXRzKX0pfWdldEN1cnJlbnRTdGF0cygpe3JldHVybiB0aGlzLmhtc1N0YXRzfWdldFB1Ymxpc2hQZWVyQ29ubmVjdGlvbigpe3ZhciBlO3JldHVybihlPXRoaXMuaG1zU3RhdHMpPT1udWxsP3ZvaWQgMDplLmdldFB1Ymxpc2hQZWVyQ29ubmVjdGlvbigpfWdldFN1YnNjcmliZVBlZXJDb25uZWN0aW9uKCl7dmFyIGU7cmV0dXJuKGU9dGhpcy5obXNTdGF0cyk9PW51bGw/dm9pZCAwOmUuZ2V0U3Vic2NyaWJlUGVlckNvbm5lY3Rpb24oKX1vblN0YXRzQ2hhbmdlKGUpe3JldHVybiB0aGlzLmV2ZW50QnVzLnN0YXRzVXBkYXRlLnN1YnNjcmliZShlKSwoKT0+e3RoaXMuZXZlbnRCdXMuc3RhdHNVcGRhdGUudW5zdWJzY3JpYmUoZSl9fXNldFBlZXJDb25uZWN0aW9ucyh7cHVibGlzaDplLHN1YnNjcmliZTp0fSl7dGhpcy5obXNTdGF0cz90aGlzLmhtc1N0YXRzLnNldFBlZXJDb25uZWN0aW9ucyh7cHVibGlzaDplLHN1YnNjcmliZTp0fSk6dGhpcy5obXNTdGF0cz1uZXcgTWkodGhpcy5zdG9yZSx0aGlzLmV2ZW50QnVzLGUsdCl9c3RhcnQoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYodGhpcy5pc01vbml0b3JlZCl7bC5kKHRoaXMuVEFHLFwiQWxyZWFkeSBzdGFydGVkXCIpO3JldHVybn10aGlzLnN0b3AoKSx0aGlzLmlzTW9uaXRvcmVkPSEwLGwuZCh0aGlzLlRBRyxcIlN0YXJ0aW5nIFdlYnJ0YyBTdGF0cyBNb25pdG9yXCIpLHRoaXMuc3RhcnRMb29wKCkudGhlbigoKT0+bC5kKHRoaXMuVEFHLFwiU3RvcHBpbmcgV2VicnRjIFN0YXRzIE1vbml0b3JcIikpLmNhdGNoKGU9Pnt0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkucnRjU3RhdHNGYWlsZWQoUy5XZWJydGNFcnJvcnMuU3RhdHNGYWlsZWQoXCJQVUJMSVNIXCIsZS5tZXNzYWdlKSkpLGwuZSh0aGlzLlRBRyxlLm1lc3NhZ2UpfSl9KX1zdG9wKCl7dGhpcy5pc01vbml0b3JlZD0hMX1zdGFydExvb3AoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7Zm9yKDt0aGlzLmlzTW9uaXRvcmVkOyl5aWVsZCB0aGlzLmhhbmRsZVN0YXRzVXBkYXRlKCkseWllbGQgSih0aGlzLmludGVydmFsKX0pfWNsZWFudXAoKXt0aGlzLnN0b3AoKSx0aGlzLmV2ZW50QnVzLnN0YXRzVXBkYXRlLnJlbW92ZUFsbExpc3RlbmVycygpfX07dmFyIGF0PWNsYXNze2NvbnN0cnVjdG9yKHtwZWVySWQ6ZSxuYW1lOnQsaXNMb2NhbDppLGN1c3RvbWVyVXNlcklkOnIsbWV0YWRhdGE6cyxyb2xlOm8sam9pbmVkQXQ6bixncm91cHM6ZCxyZWFsdGltZTp1LHR5cGU6cH0pe3RoaXMuY3VzdG9tZXJVc2VySWQ9XCJcIjt0aGlzLm1ldGFkYXRhPVwiXCI7dGhpcy5hdXhpbGlhcnlUcmFja3M9W107dGhpcy5uYW1lPXQsdGhpcy5wZWVySWQ9ZSx0aGlzLmlzTG9jYWw9aSx0aGlzLmN1c3RvbWVyVXNlcklkPXIsdGhpcy5tZXRhZGF0YT1zLHRoaXMuam9pbmVkQXQ9bix0aGlzLmdyb3Vwcz1kLHRoaXMucmVhbHRpbWU9dSx0aGlzLnR5cGU9cCxvJiYodGhpcy5yb2xlPW8pfWdldCBpc0hhbmRSYWlzZWQoKXt2YXIgZTtyZXR1cm4hISgoZT10aGlzLmdyb3VwcykhPW51bGwmJmUuaW5jbHVkZXMoQWUpKX11cGRhdGVSb2xlKGUpe3RoaXMucm9sZT1lfXVwZGF0ZU5hbWUoZSl7dGhpcy5uYW1lPWV9dXBkYXRlTmV0d29ya1F1YWxpdHkoZSl7dGhpcy5uZXR3b3JrUXVhbGl0eT1lfXVwZGF0ZU1ldGFkYXRhKGUpe3RoaXMubWV0YWRhdGE9ZX11cGRhdGVHcm91cHMoZSl7dGhpcy5ncm91cHM9ZX10b1N0cmluZygpe3ZhciBlLHQsaSxyO3JldHVybmB7XG4gICAgICBuYW1lOiAke3RoaXMubmFtZX07XG4gICAgICByb2xlOiAkeyhlPXRoaXMucm9sZSk9PW51bGw/dm9pZCAwOmUubmFtZX07XG4gICAgICBwZWVySWQ6ICR7dGhpcy5wZWVySWR9O1xuICAgICAgY3VzdG9tZXJVc2VySWQ6ICR7dGhpcy5jdXN0b21lclVzZXJJZH07XG4gICAgICAke3RoaXMuYXVkaW9UcmFjaz9gYXVkaW9UcmFjazogJHsodD10aGlzLmF1ZGlvVHJhY2spPT1udWxsP3ZvaWQgMDp0LnRyYWNrSWR9O2A6XCJcIn1cbiAgICAgICR7dGhpcy52aWRlb1RyYWNrP2B2aWRlb1RyYWNrOiAkeyhpPXRoaXMudmlkZW9UcmFjayk9PW51bGw/dm9pZCAwOmkudHJhY2tJZH07YDpcIlwifVxuICAgICAgZ3JvdXBzOiAkeyhyPXRoaXMuZ3JvdXBzKT09bnVsbD92b2lkIDA6ci5qb2luKCl9XG4gICAgfWB9fTtpbXBvcnR7djQgYXMgVm99ZnJvbVwidXVpZFwiO3ZhciBvdD1jbGFzc3t9O290Lm1ha2VQZWVySWQ9KCk9PlZvKCk7dmFyIHFlPWNsYXNzIGV4dGVuZHMgYXR7Y29uc3RydWN0b3IodCl7c3VwZXIoTShtKHt9LHQpLHtwZWVySWQ6b3QubWFrZVBlZXJJZCgpLGlzTG9jYWw6ITB9KSk7dGhpcy5pc0xvY2FsPSEwO3RoaXMuYXV4aWxpYXJ5VHJhY2tzPVtdO3RoaXMuYXNSb2xlPXQuYXNSb2xlfWlzSW5QcmV2aWV3KCl7cmV0dXJuISF0aGlzLmFzUm9sZX10b1N0cmluZygpe3ZhciB0LGkscjtyZXR1cm5ge1xuICAgICAgbmFtZTogJHt0aGlzLm5hbWV9O1xuICAgICAgcm9sZTogJHsodD10aGlzLnJvbGUpPT1udWxsP3ZvaWQgMDp0Lm5hbWV9O1xuICAgICAgcGVlcklkOiAke3RoaXMucGVlcklkfTtcbiAgICAgIGN1c3RvbWVyVXNlcklkOiAke3RoaXMuY3VzdG9tZXJVc2VySWR9O1xuICAgICAgJHt0aGlzLmFzUm9sZT9gYXNSb2xlOiAke3RoaXMuYXNSb2xlLm5hbWV9O2A6XCJcIn1cbiAgICAgICR7dGhpcy5hdWRpb1RyYWNrP2BhdWRpb1RyYWNrOiAkeyhpPXRoaXMuYXVkaW9UcmFjayk9PW51bGw/dm9pZCAwOmkudHJhY2tJZH07YDpcIlwifVxuICAgICAgJHt0aGlzLnZpZGVvVHJhY2s/YHZpZGVvVHJhY2s6ICR7KHI9dGhpcy52aWRlb1RyYWNrKT09bnVsbD92b2lkIDA6ci50cmFja0lkfTtgOlwiXCJ9XG4gICAgfWB9fTt2YXIgQ3Q9Y2xhc3MgZXh0ZW5kcyBhdHtjb25zdHJ1Y3Rvcih0KXtzdXBlcihNKG0oe30sdCkse2lzTG9jYWw6ITF9KSk7dGhpcy5pc0xvY2FsPSExO3RoaXMuYXV4aWxpYXJ5VHJhY2tzPVtdO3RoaXMuZnJvbVJvb21TdGF0ZT0hMTt0aGlzLmZyb21Sb29tU3RhdGU9ISF0LmZyb21Sb29tU3RhdGV9fTt2YXIgeWU9KGEsZSk9Pm5ldyBDdCh7cGVlcklkOmEucGVlcl9pZCxuYW1lOmEuaW5mby5uYW1lLHJvbGU6ZS5nZXRQb2xpY3lGb3JSb2xlKGEucm9sZSksY3VzdG9tZXJVc2VySWQ6YS5pbmZvLnVzZXJfaWQsbWV0YWRhdGE6YS5pbmZvLmRhdGEsZ3JvdXBzOmEuZ3JvdXBzLHR5cGU6YS5pbmZvLnR5cGV9KTt2YXIga2k9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMudHJhbnNwb3J0PWU7dGhpcy5zdG9yZT10O3RoaXMub3B0aW9ucz1pO3RoaXMuaXNFbmQ9ITE7dGhpcy5pdGVyYXRvcj1udWxsO3RoaXMudG90YWw9MDt0aGlzLmRlZmF1bHRQYWdpbmF0aW9uTGltaXQ9MTB9dmFsaWRhdGVDb25uZWN0aW9uKCl7aWYoIXRoaXMudHJhbnNwb3J0fHwhdGhpcy5zdG9yZSl0aHJvdyBFcnJvcihcIlVzZSB1c2VQYWdpbmF0ZWRQYXJ0aWNpcGFudHMgb3IgaG1zQWN0aW9ucy5nZXRQZWVyTGlzdEl0ZXJhdG9yIGFmdGVyIHByZXZpZXcgb3Igam9pbiBoYXMgaGFwcGVuZWRcIil9aGFzTmV4dCgpe3JldHVybiF0aGlzLmlzRW5kfWdldFRvdGFsKCl7cmV0dXJuIHRoaXMudG90YWx9ZmluZFBlZXJzKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciB0O3RoaXMudmFsaWRhdGVDb25uZWN0aW9uKCk7bGV0IGU9eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmZpbmRQZWVycyhNKG0oe30sdGhpcy5vcHRpb25zfHx7fSkse2xpbWl0OigodD10aGlzLm9wdGlvbnMpPT1udWxsP3ZvaWQgMDp0LmxpbWl0KXx8dGhpcy5kZWZhdWx0UGFnaW5hdGlvbkxpbWl0fSkpO3JldHVybiB0aGlzLnVwZGF0ZVN0YXRlKGUpLHRoaXMucHJvY2Vzc1BlZXJzKGUucGVlcnMpfSl9bmV4dCgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdDt0aGlzLnZhbGlkYXRlQ29ubmVjdGlvbigpO2xldCBlO3JldHVybiF0aGlzLml0ZXJhdG9yJiYhdGhpcy5pc0VuZD95aWVsZCB0aGlzLmZpbmRQZWVycygpOnRoaXMuaXRlcmF0b3I/KGU9eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLnBlZXJJdGVyTmV4dCh7aXRlcmF0b3I6dGhpcy5pdGVyYXRvcixsaW1pdDooKHQ9dGhpcy5vcHRpb25zKT09bnVsbD92b2lkIDA6dC5saW1pdCl8fHRoaXMuZGVmYXVsdFBhZ2luYXRpb25MaW1pdH0pLHRoaXMudXBkYXRlU3RhdGUoZSksdGhpcy5wcm9jZXNzUGVlcnMoZS5wZWVycykpOltdfSl9cHJvY2Vzc1BlZXJzKGUpe2xldCB0PVtdO3JldHVybiBlLmZvckVhY2goaT0+e2xldCByPXllKGksdGhpcy5zdG9yZSk7dC5wdXNoKHIpfSksdH11cGRhdGVTdGF0ZShlKXt0aGlzLmlzRW5kPWUuZW9mLHRoaXMudG90YWw9ZS50b3RhbCxlLml0ZXJhdG9yJiYodGhpcy5pdGVyYXRvcj1lLml0ZXJhdG9yKX19O3ZhciBudD1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLlRBRz1cIltBdWRpb0NvbnRleHRNYW5hZ2VyXVwiO3RoaXMuYXVkaW9Db250ZXh0PW5ldyBBdWRpb0NvbnRleHQsdGhpcy5zb3VyY2U9dGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFFbGVtZW50U291cmNlKGUpLHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5hdWRpb0NvbnRleHQuZGVzdGluYXRpb24pfXJlc3VtZUNvbnRleHQoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dGhpcy5hdWRpb0NvbnRleHQuc3RhdGU9PT1cInN1c3BlbmRlZFwiJiYoeWllbGQgdGhpcy5hdWRpb0NvbnRleHQucmVzdW1lKCksbC5kKHRoaXMuVEFHLFwiQXVkaW9Db250ZXh0IGlzIHJlc3VtZWRcIikpfSl9Z2V0QXVkaW9UcmFjaygpe3JldHVybiB0aGlzLmRlc3RpbmF0aW9uTm9kZSYmdGhpcy5zb3VyY2UuZGlzY29ubmVjdCh0aGlzLmRlc3RpbmF0aW9uTm9kZSksdGhpcy5kZXN0aW5hdGlvbk5vZGU9dGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbigpLHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5kZXN0aW5hdGlvbk5vZGUpLHRoaXMuZGVzdGluYXRpb25Ob2RlLnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdfWNsZWFudXAoKXt0aGlzLmF1ZGlvQ29udGV4dC5zdGF0ZSE9PVwiY2xvc2VkXCImJnRoaXMuYXVkaW9Db250ZXh0LmNsb3NlKCkuY2F0Y2goZT0+e2wuZCh0aGlzLlRBRyxcIkF1ZGlvQ29udGV4dCBjbG9zZSBlcnJvclwiLGUubWVzc2FnZSl9KX19O2ltcG9ydHtFdmVudEVtaXR0ZXIyIGFzIEZvfWZyb21cImV2ZW50ZW1pdHRlcjJcIjt2YXIgVWU9Y2xhc3MgZXh0ZW5kcyBGb3tvbihlLHQpe3JldHVybiBzdXBlci5vbihlLHQpfW9mZihlLHQpe3JldHVybiBzdXBlci5vZmYoZSx0KX1lbWl0KGUsdCl7cmV0dXJuIHN1cGVyLmVtaXQoZSx0KX1saXN0ZW5lcnMoZSl7cmV0dXJuIHN1cGVyLmxpc3RlbmVycyhlKX19O3ZhciBFaT1jbGFzcyBleHRlbmRzIFVle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKTt0aGlzLmF1ZGlvRWxlbWVudD1udWxsO3RoaXMuVEFHPVwiW1BsYXlsaXN0QXVkaW9NYW5hZ2VyXVwiO3RoaXMuc2Vla2VkPSExfXBsYXkodCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmF1ZGlvRWxlbWVudD10aGlzLmdldEF1ZGlvRWxlbWVudCgpLG5ldyBQcm9taXNlKChpLHIpPT57dGhpcy5hdWRpb0VsZW1lbnQ9dGhpcy5nZXRBdWRpb0VsZW1lbnQoKSx0aGlzLmF1ZGlvRWxlbWVudC5zcmM9dCx0aGlzLnNlZWtlZD0hMSx0aGlzLmF1ZGlvRWxlbWVudC5vbmVycm9yPSgpPT57bGV0IHM9YEVycm9yIGxvYWRpbmcgJHt0fWA7bC5lKHRoaXMuVEFHLHMpLHRoaXMuc3RvcCgpLHIocyl9LHRoaXMuYXVkaW9FbGVtZW50Lm9uY2FucGxheXRocm91Z2g9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RyeXtpZighdGhpcy5hdWRpb0VsZW1lbnQpcmV0dXJuO2lmKHRoaXMuYXVkaW9Db250ZXh0TWFuYWdlci5yZXN1bWVDb250ZXh0KCksdGhpcy50cmFjayl0aGlzLnNlZWtlZD90aGlzLnNlZWtlZD0hMTooeWllbGQgdGhpcy5hdWRpb0VsZW1lbnQucGxheSgpLGkoW3RoaXMudHJhY2tdKSk7ZWxzZXt5aWVsZCB0aGlzLmF1ZGlvRWxlbWVudC5wbGF5KCk7bGV0IHM9dGhpcy5hdWRpb0NvbnRleHRNYW5hZ2VyLmdldEF1ZGlvVHJhY2soKTt0aGlzLnRyYWNrPXMsaShbc10pfX1jYXRjaChzKXtsLmUodGhpcy5UQUcsXCJFcnJvciBwbGF5aW5nIGF1ZGlvXCIsdCxzLm1lc3NhZ2UpLHIocyl9fSksdGhpcy5hdWRpb0VsZW1lbnQub25zZWVrZWQ9KCk9Pnt0aGlzLnNlZWtlZD0hMH19KX0pfWdldFRyYWNrcygpe3JldHVybiB0aGlzLnRyYWNrP1t0aGlzLnRyYWNrLmlkXTpbXX1nZXRFbGVtZW50KCl7cmV0dXJuIHRoaXMuYXVkaW9FbGVtZW50fHwodGhpcy5hdWRpb0VsZW1lbnQ9dGhpcy5nZXRBdWRpb0VsZW1lbnQoKSksdGhpcy5hdWRpb0VsZW1lbnR9c3RvcCgpe3ZhciB0LGkscjsodD10aGlzLmF1ZGlvRWxlbWVudCk9PW51bGx8fHQucGF1c2UoKSwoaT10aGlzLmF1ZGlvRWxlbWVudCk9PW51bGx8fGkucmVtb3ZlQXR0cmlidXRlKFwic3JjXCIpLHRoaXMuYXVkaW9FbGVtZW50PW51bGwsKHI9dGhpcy5hdWRpb0NvbnRleHRNYW5hZ2VyKT09bnVsbHx8ci5jbGVhbnVwKCksdGhpcy50cmFjaz12b2lkIDB9Z2V0QXVkaW9FbGVtZW50KCl7aWYodGhpcy5hdWRpb0VsZW1lbnQpcmV0dXJuIHRoaXMuYXVkaW9FbGVtZW50O2xldCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKTtyZXR1cm4gdC5jcm9zc09yaWdpbj1cImFub255bW91c1wiLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRpbWV1cGRhdGVcIixpPT50aGlzLmVtaXQoXCJwcm9ncmVzc1wiLGkpKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCgpPT57dGhpcy5lbWl0KFwiZW5kZWRcIixudWxsKX0pLHRoaXMuYXVkaW9Db250ZXh0TWFuYWdlcj1uZXcgbnQodCksdH19O3ZhciBQaT1jbGFzcyBleHRlbmRzIFVle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKTt0aGlzLlRBRz1cIltQbGF5bGlzdFZpZGVvTWFuYWdlcl1cIjt0aGlzLnZpZGVvRWxlbWVudD1udWxsO3RoaXMuY2FudmFzQ29udGV4dD1udWxsO3RoaXMudHJhY2tzPVtdO3RoaXMuREVGQVVMX0ZQUz0yNDt0aGlzLnNlZWtlZD0hMTt0aGlzLmRyYXdJbWFnZT0oKT0+e3ZhciB0LGkscjt0aGlzLnZpZGVvRWxlbWVudCYmIXRoaXMudmlkZW9FbGVtZW50LnBhdXNlZCYmIXRoaXMudmlkZW9FbGVtZW50LmVuZGVkJiYoKHI9dGhpcy5jYW52YXNDb250ZXh0KT09bnVsbHx8ci5kcmF3SW1hZ2UodGhpcy52aWRlb0VsZW1lbnQsMCwwLCh0PXRoaXMuY2FudmFzKT09bnVsbD92b2lkIDA6dC53aWR0aCwoaT10aGlzLmNhbnZhcyk9PW51bGw/dm9pZCAwOmkuaGVpZ2h0KSx0aGlzLnRpbWVyPXNldFRpbWVvdXQoKCk9Pnt0aGlzLmRyYXdJbWFnZSgpfSwxZTMvdGhpcy5ERUZBVUxfRlBTKSl9fXBsYXkodCl7cmV0dXJuIHRoaXMudmlkZW9FbGVtZW50PXRoaXMuZ2V0VmlkZW9FbGVtZW50KCksdGhpcy5jcmVhdGVDYW52YXMoKSxuZXcgUHJvbWlzZSgoaSxyKT0+e3RoaXMudmlkZW9FbGVtZW50PXRoaXMuZ2V0VmlkZW9FbGVtZW50KCksdGhpcy52aWRlb0VsZW1lbnQuc3JjPXQsdGhpcy5zZWVrZWQ9ITEsdGhpcy52aWRlb0VsZW1lbnQub25lcnJvcj0oKT0+e2xldCBzPWBFcnJvciBsb2FkaW5nICR7dH1gO2wuZSh0aGlzLlRBRyxzKSx0aGlzLnN0b3AoKSxyKHMpfSx0aGlzLnZpZGVvRWxlbWVudC5vbmNhbnBsYXl0aHJvdWdoPSgpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcyxvLG47dHJ5e2lmKCF0aGlzLnZpZGVvRWxlbWVudClyZXR1cm47aWYodGhpcy5jYW52YXMud2lkdGg9dGhpcy52aWRlb0VsZW1lbnQudmlkZW9XaWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQ9dGhpcy52aWRlb0VsZW1lbnQudmlkZW9IZWlnaHQsdGhpcy50cmFja3MubGVuZ3RoPT09MCl7dGhpcy5jbGVhckNhbnZhc0FuZFRyYWNrcygpO2xldCBkPXRoaXMuY2FudmFzLmNhcHR1cmVTdHJlYW0oKTtpZighZCl7bC5lKHRoaXMuVEFHLFwiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGNhcHR1cmVTdHJlYW1cIik7cmV0dXJufXRoaXMudmlkZW9FbGVtZW50Lm9ucGxheT10aGlzLmRyYXdJbWFnZSx5aWVsZCB0aGlzLmF1ZGlvQ29udGV4dE1hbmFnZXIucmVzdW1lQ29udGV4dCgpLHlpZWxkIHRoaXMudmlkZW9FbGVtZW50LnBsYXkoKTtsZXQgdT10aGlzLmF1ZGlvQ29udGV4dE1hbmFnZXIuZ2V0QXVkaW9UcmFjaygpO2QuYWRkVHJhY2sodSksZC5nZXRUcmFja3MoKS5mb3JFYWNoKHA9Pnt0aGlzLnRyYWNrcy5wdXNoKHApfSksaSh0aGlzLnRyYWNrcyl9ZWxzZSB0aGlzLnNlZWtlZD8odGhpcy5zZWVrZWQ9ITEsKG49dGhpcy5jYW52YXNDb250ZXh0KT09bnVsbHx8bi5kcmF3SW1hZ2UodGhpcy52aWRlb0VsZW1lbnQsMCwwLChzPXRoaXMuY2FudmFzKT09bnVsbD92b2lkIDA6cy53aWR0aCwobz10aGlzLmNhbnZhcyk9PW51bGw/dm9pZCAwOm8uaGVpZ2h0KSk6KHlpZWxkIHRoaXMudmlkZW9FbGVtZW50LnBsYXkoKSxpKHRoaXMudHJhY2tzKSl9Y2F0Y2goZCl7bC5lKHRoaXMuVEFHLFwiRXJyb3IgcGxheWluZyB2aWRlb1wiLHQsZC5tZXNzYWdlKSxyKGQpfX0pLHRoaXMudmlkZW9FbGVtZW50Lm9uc2Vla2VkPSgpPT57dGhpcy5zZWVrZWQ9ITB9fSl9Z2V0VHJhY2tzKCl7cmV0dXJuIHRoaXMudHJhY2tzLm1hcCh0PT50LmlkKX1nZXRFbGVtZW50KCl7cmV0dXJuIHRoaXMudmlkZW9FbGVtZW50fHwodGhpcy52aWRlb0VsZW1lbnQ9dGhpcy5nZXRWaWRlb0VsZW1lbnQoKSksdGhpcy52aWRlb0VsZW1lbnR9c3RvcCgpe3ZhciB0LGkscjsodD10aGlzLnZpZGVvRWxlbWVudCk9PW51bGx8fHQucGF1c2UoKSwoaT10aGlzLnZpZGVvRWxlbWVudCk9PW51bGx8fGkucmVtb3ZlQXR0cmlidXRlKFwic3JjXCIpLHRoaXMudmlkZW9FbGVtZW50PW51bGwsKHI9dGhpcy5hdWRpb0NvbnRleHRNYW5hZ2VyKT09bnVsbHx8ci5jbGVhbnVwKCksdGhpcy5jbGVhckNhbnZhc0FuZFRyYWNrcygpfWNsZWFyQ2FudmFzQW5kVHJhY2tzKCl7dmFyIHQ7dGhpcy50cmFja3M9W10sKHQ9dGhpcy5jYW52YXNDb250ZXh0KT09bnVsbHx8dC5jbGVhclJlY3QoMCwwLHRoaXMuY2FudmFzLndpZHRoLHRoaXMuY2FudmFzLmhlaWdodCksY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpfWdldFZpZGVvRWxlbWVudCgpe2lmKHRoaXMudmlkZW9FbGVtZW50KXJldHVybiB0aGlzLnZpZGVvRWxlbWVudDtsZXQgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIik7cmV0dXJuIHQuY3Jvc3NPcmlnaW49XCJhbm9ueW1vdXNcIix0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0aW1ldXBkYXRlXCIsaT0+dGhpcy5lbWl0KFwicHJvZ3Jlc3NcIixpKSksdC5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIiwoKT0+e3RoaXMuZW1pdChcImVuZGVkXCIsbnVsbCl9KSx0aGlzLmF1ZGlvQ29udGV4dE1hbmFnZXI9bmV3IG50KHQpLHR9Y3JlYXRlQ2FudmFzKCl7dGhpcy5jYW52YXN8fCh0aGlzLmNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLHRoaXMuY2FudmFzQ29udGV4dD10aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikpfX07dmFyIGJpPXthdWRpbzp7bGlzdDpbXSxjdXJyZW50SW5kZXg6LTEsaXNBdXRvcGxheU9uOiEwfSx2aWRlbzp7bGlzdDpbXSxjdXJyZW50SW5kZXg6LTEsaXNBdXRvcGxheU9uOiEwfX0sTHQ9Y2xhc3MgZXh0ZW5kcyBVZXtjb25zdHJ1Y3Rvcih0LGkpe3N1cGVyKCk7dGhpcy5zZGs9dDt0aGlzLmV2ZW50QnVzPWk7dGhpcy5zdGF0ZT17YXVkaW86bSh7fSxiaS5hdWRpbyksdmlkZW86bSh7fSxiaS52aWRlbyl9O3RoaXMuVEFHPVwiW1BsYXlsaXN0TWFuYWdlcl1cIjt0aGlzLmhhbmRsZVBhdXNlUGxheWxpc3Q9cj0+Yyh0aGlzLFtyXSxmdW5jdGlvbiooe2VuYWJsZWQ6dCx0cmFjazppfSl7dmFyIG87aWYodClyZXR1cm47bGV0IHM7aS5zb3VyY2U9PT1cImF1ZGlvcGxheWxpc3RcIiYmKHM9XCJhdWRpb1wiKSxpLnNvdXJjZT09PVwidmlkZW9wbGF5bGlzdFwiJiYocz1cInZpZGVvXCIpLHMmJigobz10aGlzLmdldEVsZW1lbnQocykpPT1udWxsfHxvLnBhdXNlKCkpfSk7dGhpcy5hZGRUcmFjaz0odCxpKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZGsuYWRkVHJhY2sodCxpKSxsLmQodGhpcy5UQUcsXCJQbGF5bGlzdCB0cmFjayBhZGRlZFwiLHVpKHQpKX0pO3RoaXMucmVtb3ZlVHJhY2s9dD0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZGsucmVtb3ZlVHJhY2sodCwhMCksbC5kKHRoaXMuVEFHLFwiUGxheWxpc3QgdHJhY2sgcmVtb3ZlZFwiLHQpfSk7dGhpcy5hdWRpb01hbmFnZXI9bmV3IEVpLHRoaXMudmlkZW9NYW5hZ2VyPW5ldyBQaSx0aGlzLmFkZExpc3RlbmVycygpfWdldExpc3QodD1cImF1ZGlvXCIpe3JldHVybiB0aGlzLnN0YXRlW3RdLmxpc3R9c2V0TGlzdCh0KXtpZighdHx8dC5sZW5ndGg9PT0wKXtsLncodGhpcy5UQUcsXCJQbGVhc2UgcGFzcyBpbiBhIGxpc3Qgb2YgSE1TUGxheWxpc3RJdGVtJ3NcIik7cmV0dXJufXQuZm9yRWFjaChpPT57dGhpcy5zdGF0ZVtpLnR5cGVdLmxpc3QuZmluZChyPT5yLmlkPT09aS5pZCl8fHRoaXMuc3RhdGVbaS50eXBlXS5saXN0LnB1c2goaSl9KX1jbGVhckxpc3QodCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RoaXMuaXNQbGF5aW5nKHQpJiYoeWllbGQgdGhpcy5zdG9wKHQpKSx0aGlzLnN0YXRlW3RdLmxpc3Q9W119KX1yZW1vdmVJdGVtKHQsaSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldHtsaXN0OnIsY3VycmVudEluZGV4OnN9PXRoaXMuc3RhdGVbaV0sbz1yLmZpbmRJbmRleChuPT50PT09bi5pZCk7cmV0dXJuIG8+LTE/KHM9PT1vJiZ0aGlzLmlzUGxheWluZyhpKSYmKHlpZWxkIHRoaXMuc3RvcChpKSksci5zcGxpY2UobywxKSwhMCk6ITF9KX1zZWVrKHQsaT1cImF1ZGlvXCIpe2xldHtjdXJyZW50SW5kZXg6cn09dGhpcy5zdGF0ZVtpXTtpZihyPT09LTEpdGhyb3cgUy5QbGF5bGlzdEVycm9ycy5Ob0VudHJ5VG9QbGF5KFwiUExBWUxJU1RcIixcIk5vIGl0ZW0gaXMgY3VycmVudGx5IHBsYXlpbmdcIik7bGV0IHM9dGhpcy5nZXRFbGVtZW50KGkpO2lmKHMpe2xldCBvPU1hdGgubWF4KHMuY3VycmVudFRpbWUrdCwwKTtzLmN1cnJlbnRUaW1lPU1hdGgubWluKG8scy5kdXJhdGlvbil9fXNlZWtUbyh0LGk9XCJhdWRpb1wiKXtsZXR7Y3VycmVudEluZGV4OnJ9PXRoaXMuc3RhdGVbaV07aWYocj09PS0xKXRocm93IFMuUGxheWxpc3RFcnJvcnMuTm9FbnRyeVRvUGxheShcIlBMQVlMSVNUXCIsXCJObyBpdGVtIGlzIGN1cnJlbnRseSBwbGF5aW5nXCIpO2lmKHQ8MCl0aHJvdyBFcnJvcihcInZhbHVlIGNhbm5vdCBiZSBuZWdhdGl2ZVwiKTtsZXQgcz10aGlzLmdldEVsZW1lbnQoaSk7cyYmKHMuY3VycmVudFRpbWU9TWF0aC5taW4odCxzLmR1cmF0aW9uKSl9c2V0Vm9sdW1lKHQsaT1cImF1ZGlvXCIpe2lmKHQ8MHx8dD4xMDApdGhyb3cgRXJyb3IoXCJQbGVhc2UgcGFzcyBhIHZhbGlkIG51bWJlciBiZXR3ZWVuIDAtMTAwXCIpO2xldCByPXRoaXMuZ2V0RWxlbWVudChpKTtyJiYoci52b2x1bWU9dCouMDEpfWdldFZvbHVtZSh0PVwiYXVkaW9cIil7bGV0IGk9dGhpcy5nZXRFbGVtZW50KHQpO3JldHVybiBpP01hdGguZmxvb3IoaS52b2x1bWUqMTAwKTowfWdldEN1cnJlbnRUaW1lKHQ9XCJhdWRpb1wiKXtsZXQgaT10aGlzLmdldEVsZW1lbnQodCk7cmV0dXJuKGk9PW51bGw/dm9pZCAwOmkuY3VycmVudFRpbWUpfHwwfWdldEN1cnJlbnRJbmRleCh0PVwiYXVkaW9cIil7cmV0dXJuIHRoaXMuc3RhdGVbdF0uY3VycmVudEluZGV4fWdldEN1cnJlbnRQcm9ncmVzcyh0PVwiYXVkaW9cIil7dmFyIG47bGV0e2xpc3Q6aSxjdXJyZW50SW5kZXg6cn09dGhpcy5zdGF0ZVt0XSxzPShuPWlbcl0pPT1udWxsP3ZvaWQgMDpuLnVybCxvPXRoaXMuZ2V0RWxlbWVudCh0KTtyZXR1cm4hc3x8IW8/MDpNYXRoLmZsb29yKDEwMCooby5jdXJyZW50VGltZS9vLmR1cmF0aW9uKSl9Z2V0Q3VycmVudFNlbGVjdGlvbih0PVwiYXVkaW9cIil7bGV0e2xpc3Q6aSxjdXJyZW50SW5kZXg6cn09dGhpcy5zdGF0ZVt0XTtpZihyIT09LTEpcmV0dXJuIGlbcl19aXNQbGF5aW5nKHQ9XCJhdWRpb1wiKXtsZXQgaT10aGlzLmdldEVsZW1lbnQodCk7cmV0dXJuISFpJiYhaS5wYXVzZWR9c2V0SXNBdXRvcGxheU9uKHQ9XCJhdWRpb1wiLGkpe3RoaXMuc3RhdGVbdF0uaXNBdXRvcGxheU9uPWl9Z2V0UGxheWJhY2tSYXRlKHQ9XCJhdWRpb1wiKXtsZXQgaT10aGlzLmdldEVsZW1lbnQodCk7cmV0dXJuIGk/aS5wbGF5YmFja1JhdGU6MX1zZXRQbGF5YmFja1JhdGUodD1cImF1ZGlvXCIsaSl7aWYoaTwuMjV8fGk+Mil0aHJvdyBFcnJvcihcIlBsZWFzZSBwYXNzIGEgdmFsdWUgYmV0d2VlbiAwLjI1IGFuZCAyLjBcIik7bGV0IHI9dGhpcy5nZXRFbGVtZW50KHQpO3ImJihyLnBsYXliYWNrUmF0ZT1pKX1zZXRFbmFibGVkKHMsbyl7cmV0dXJuIGModGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKHQse2lkOmksdHlwZTpyPVwiYXVkaW9cIn0pe2xldCBkPXRoaXMuc3RhdGVbcl0ubGlzdC5maW5kSW5kZXgocD0+cC5pZD09PWkpO2lmKCFpfHxkPT09LTEpe2wudyh0aGlzLlRBRyxcIlBhc3MgYSB2YWxpZCBpZFwiKTtyZXR1cm59bGV0IHU9dGhpcy5zdGF0ZVtyXS5saXN0W2RdLnVybDt0P3lpZWxkIHRoaXMucGxheSh1LHIpOnlpZWxkIHRoaXMucGF1c2UodSxyKSx0aGlzLnN0YXRlW3JdLmN1cnJlbnRJbmRleD1kLHRoaXMuc2V0RHVyYXRpb24ocil9KX1wbGF5TmV4dCgpe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih0PVwiYXVkaW9cIil7bGV0e2xpc3Q6aSxjdXJyZW50SW5kZXg6cn09dGhpcy5zdGF0ZVt0XTtpZihyPj1pLmxlbmd0aC0xKXRocm93IFMuUGxheWxpc3RFcnJvcnMuTm9FbnRyeVRvUGxheShcIlBMQVlMSVNUXCIsXCJSZWFjaGVkIGVuZCBvZiBwbGF5bGlzdFwiKTt5aWVsZCB0aGlzLnBsYXkoaVtyKzFdLnVybCx0KSx0aGlzLnN0YXRlW3RdLmN1cnJlbnRJbmRleD1yKzEsdGhpcy5zZXREdXJhdGlvbih0KX0pfXBsYXlQcmV2aW91cygpe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih0PVwiYXVkaW9cIil7bGV0e2xpc3Q6aSxjdXJyZW50SW5kZXg6cn09dGhpcy5zdGF0ZVt0XTtpZihyPD0wKXRocm93IFMuUGxheWxpc3RFcnJvcnMuTm9FbnRyeVRvUGxheShcIlBMQVlMSVNUXCIsXCJSZWFjaGVkIHN0YXJ0IG9mIHBsYXlsaXN0XCIpO3lpZWxkIHRoaXMucGxheShpW3ItMV0udXJsLHQpLHRoaXMuc3RhdGVbdF0uY3VycmVudEluZGV4PXItMSx0aGlzLnNldER1cmF0aW9uKHQpfSl9c3RvcCgpe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih0PVwiYXVkaW9cIil7dmFyIHI7bGV0IGk9dD09PVwiYXVkaW9cIj90aGlzLmF1ZGlvTWFuYWdlcjp0aGlzLnZpZGVvTWFuYWdlcjsocj1pLmdldEVsZW1lbnQoKSk9PW51bGx8fHIucGF1c2UoKSx5aWVsZCB0aGlzLnJlbW92ZVRyYWNrcyh0KSxpLnN0b3AoKSx0aGlzLnN0YXRlW3RdLmN1cnJlbnRJbmRleD0tMX0pfWNsZWFudXAoKXt0aGlzLnN0YXRlPXthdWRpbzptKHt9LGJpLmF1ZGlvKSx2aWRlbzptKHt9LGJpLnZpZGVvKX0sdGhpcy5ldmVudEJ1cy5sb2NhbEF1ZGlvRW5hYmxlZC51bnN1YnNjcmliZSh0aGlzLmhhbmRsZVBhdXNlUGxheWxpc3QpLHRoaXMuZXZlbnRCdXMubG9jYWxWaWRlb0VuYWJsZWQudW5zdWJzY3JpYmUodGhpcy5oYW5kbGVQYXVzZVBsYXlsaXN0KSx0aGlzLmF1ZGlvTWFuYWdlci5zdG9wKCksdGhpcy52aWRlb01hbmFnZXIuc3RvcCgpfW9uUHJvZ3Jlc3ModCl7dGhpcy52aWRlb01hbmFnZXIub24oXCJwcm9ncmVzc1wiLCgpPT57dHJ5e3Qoe3R5cGU6XCJ2aWRlb1wiLHByb2dyZXNzOnRoaXMuZ2V0Q3VycmVudFByb2dyZXNzKFwidmlkZW9cIil9KX1jYXRjaChpKXtsLmUodGhpcy5UQUcsXCJFcnJvciBpbiBvblByb2dyZXNzIGNhbGxiYWNrXCIpfX0pLHRoaXMuYXVkaW9NYW5hZ2VyLm9uKFwicHJvZ3Jlc3NcIiwoKT0+e3RyeXt0KHt0eXBlOlwiYXVkaW9cIixwcm9ncmVzczp0aGlzLmdldEN1cnJlbnRQcm9ncmVzcyhcImF1ZGlvXCIpfSl9Y2F0Y2goaSl7bC5lKHRoaXMuVEFHLFwiRXJyb3IgaW4gb25Qcm9ncmVzcyBjYWxsYmFja1wiKX19KX1vbk5ld1RyYWNrU3RhcnQodCl7dGhpcy5vbihcIm5ld1RyYWNrU3RhcnRcIix0KX1vblBsYXlsaXN0RW5kZWQodCl7dGhpcy5vbihcInBsYXlsaXN0RW5kZWRcIix0KX1vbkN1cnJlbnRUcmFja0VuZGVkKHQpe3RoaXMub24oXCJjdXJyZW50VHJhY2tFbmRlZFwiLHQpfWdldEVsZW1lbnQodD1cImF1ZGlvXCIpe3JldHVybiB0PT09XCJhdWRpb1wiP3RoaXMuYXVkaW9NYW5hZ2VyLmdldEVsZW1lbnQoKTp0aGlzLnZpZGVvTWFuYWdlci5nZXRFbGVtZW50KCl9cmVtb3ZlVHJhY2tzKCl7cmV0dXJuIGModGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKHQ9XCJhdWRpb1wiKXtsZXQgcj0odD09PVwiYXVkaW9cIj90aGlzLmF1ZGlvTWFuYWdlcjp0aGlzLnZpZGVvTWFuYWdlcikuZ2V0VHJhY2tzKCk7Zm9yKGxldCBzIG9mIHIpeWllbGQgdGhpcy5yZW1vdmVUcmFjayhzKX0pfXBsYXkocil7cmV0dXJuIGModGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKHQsaT1cImF1ZGlvXCIpe2xldCBzPWk9PT1cImF1ZGlvXCI/dGhpcy5hdWRpb01hbmFnZXI6dGhpcy52aWRlb01hbmFnZXIsbz1zLmdldEVsZW1lbnQoKTtpZih0aGlzLmlzSXRlbUN1cnJlbnRseVBsYXlpbmcodCxpKSl7bC53KHRoaXMuVEFHLGBUaGUgJHtpfSBpcyBjdXJyZW50bHkgcGxheWluZ2ApO3JldHVybn1pZihvIT1udWxsJiZvLnNyYy5pbmNsdWRlcyh0KSl5aWVsZCBvLnBsYXkoKTtlbHNle289PW51bGx8fG8ucGF1c2UoKTtsZXQgbj15aWVsZCBzLnBsYXkodCk7Zm9yKGxldCBkIG9mIG4peWllbGQgdGhpcy5hZGRUcmFjayhkLGk9PT1cImF1ZGlvXCI/XCJhdWRpb3BsYXlsaXN0XCI6XCJ2aWRlb3BsYXlsaXN0XCIpfX0pfWlzSXRlbUN1cnJlbnRseVBsYXlpbmcodCxpKXtsZXQgcj10aGlzLmdldEVsZW1lbnQoaSk7cmV0dXJuISEociYmIXIucGF1c2VkJiZyLnNyYy5pbmNsdWRlcyh0KSl9c2V0RHVyYXRpb24odD1cImF1ZGlvXCIpe2xldCBpPXRoaXMuZ2V0RWxlbWVudCh0KSx7bGlzdDpyLGN1cnJlbnRJbmRleDpzfT10aGlzLnN0YXRlW3RdO3Jbc10mJihyW3NdLmR1cmF0aW9uPShpPT1udWxsP3ZvaWQgMDppLmR1cmF0aW9uKXx8MCksdGhpcy5lbWl0KFwibmV3VHJhY2tTdGFydFwiLHJbc10pfXBhdXNlKHIpe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih0LGk9XCJhdWRpb1wiKXtsZXQgcz10aGlzLmdldEVsZW1lbnQoaSk7cyYmIXMucGF1c2VkJiZzLnNyYy5pbmNsdWRlcyh0KT8ocy5wYXVzZSgpLGwuZCh0aGlzLlRBRyxcInBhdXNlZCB1cmxcIix0KSk6bC53KHRoaXMuVEFHLFwiVGhlIHBhc3NlZCBpbiB1cmwgaXMgbm90IGN1cnJlbnRseSBwbGF5aW5nXCIpfSl9YWRkTGlzdGVuZXJzKCl7dGhpcy5hdWRpb01hbmFnZXIub24oXCJlbmRlZFwiLCgpPT50aGlzLmhhbmRsZUVuZGVkKFwiYXVkaW9cIikpLHRoaXMudmlkZW9NYW5hZ2VyLm9uKFwiZW5kZWRcIiwoKT0+dGhpcy5oYW5kbGVFbmRlZChcInZpZGVvXCIpKSx0aGlzLmV2ZW50QnVzLmxvY2FsQXVkaW9FbmFibGVkLnN1YnNjcmliZSh0aGlzLmhhbmRsZVBhdXNlUGxheWxpc3QpLHRoaXMuZXZlbnRCdXMubG9jYWxWaWRlb0VuYWJsZWQuc3Vic2NyaWJlKHRoaXMuaGFuZGxlUGF1c2VQbGF5bGlzdCl9aGFuZGxlRW5kZWQoKXtyZXR1cm4gYyh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbioodD1cImF1ZGlvXCIpe2xldHtsaXN0OmksY3VycmVudEluZGV4OnIsaXNBdXRvcGxheU9uOnN9PXRoaXMuc3RhdGVbdF07cj09PWkubGVuZ3RoLTE/KHlpZWxkIHRoaXMuc3RvcCh0KSx0aGlzLmVtaXQoXCJwbGF5bGlzdEVuZGVkXCIsdCkpOnM/dGhpcy5wbGF5TmV4dCh0KTp5aWVsZCB0aGlzLnBhdXNlKGlbcl0udXJsLHQpLHRoaXMuZW1pdChcImN1cnJlbnRUcmFja0VuZGVkXCIsaVtyXSl9KX19O3ZhciBGPWE9PmEucm9vbSxHbz1hPT5hLmVycm9ycyxUbT1BKEdvLGE9PmEubGVuZ3RoPT09MD9udWxsOmEuYXQoLTEpKSxmbT1BKEYsYT0+YS5pZCksej1hPT5hLnBlZXJzLEFpPWE9PmEubWVzc2FnZXMuYnlJRCxsYT1hPT5hLm1lc3NhZ2VzLmFsbElEcyxOPWE9PmEudHJhY2tzLHVhPWE9PmEuc2V0dGluZ3MsenI9YT0+YS5hcHBEYXRhLHZtPWE9PmEuZGV2aWNlcyxXbz1hPT5hLnNwZWFrZXJzLE1tPWE9PmEuY29ubmVjdGlvblF1YWxpdGllcyxCZT1BKFtGXSxhPT5hJiZhLmlzQ29ubmVjdGVkKSx5bT1BKFtCZSxGXSwoYSxlKT0+YT9lLnBlZXJDb3VudCE9PXZvaWQgMD9lLnBlZXJDb3VudHx8MTplLnBlZXJzLmxlbmd0aDpNYXRoLm1heChlLnBlZXJDb3VudCE9PXZvaWQgMD9lLnBlZXJDb3VudDplLnBlZXJzLmxlbmd0aC0xLDApKSwkbz1hPT5hLmhpZGVMb2NhbFBlZXIsa2U9QShbRix6LCRvXSwoYSxlLHQpPT50P2EucGVlcnMuZmlsdGVyKGk9PmEubG9jYWxQZWVyIT09aSkubWFwKGk9PmVbaV0pOmEucGVlcnMubWFwKGk9PmVbaV0pKSxLbz1BKE4sYT0+T2JqZWN0LnZhbHVlcyhhKSkscmU9QShGLHosKGEsZSk9PmVbYS5sb2NhbFBlZXJdKSxJZT1BKEYsYT0+YS5sb2NhbFBlZXIpLGttPUEocmUsYT0+YT09bnVsbD92b2lkIDA6YS5uYW1lKSxFbT1BKHJlLGE9PmE9PW51bGw/dm9pZCAwOmEucm9sZU5hbWUpLGxlPUEocmUsYT0+YT09bnVsbD92b2lkIDA6YS5hdWRpb1RyYWNrKSxaPUEocmUsYT0+YT09bnVsbD92b2lkIDA6YS52aWRlb1RyYWNrKSxxbz1BKHJlLGE9PmE9PW51bGw/dm9pZCAwOmEuYXV4aWxpYXJ5VHJhY2tzKSxwYT1BKFtsZSxaLHFvXSwoYSxlLHQpPT57bGV0IGk9dD9bLi4udF06W107cmV0dXJuIGEmJmkudW5zaGlmdChhKSxlJiZpLnVuc2hpZnQoZSksaX0pLFBtPUEoa2UsYT0+YS5maWx0ZXIoZT0+IWUuaXNMb2NhbCkpLGJtPUEoeixXbywoYSxlKT0+e2xldCB0PU9iamVjdC5lbnRyaWVzKGUpLnNvcnQoKGkscik9Pnt2YXIgbixkO2xldCBzPSgobj1pWzFdKT09bnVsbD92b2lkIDA6bi5hdWRpb0xldmVsKXx8MDtyZXR1cm4oKChkPXJbMV0pPT1udWxsP3ZvaWQgMDpkLmF1ZGlvTGV2ZWwpfHwwKT5zPzE6LTF9KTtpZih0Lmxlbmd0aD4wJiZ0WzBdWzFdLmF1ZGlvTGV2ZWwmJnRbMF1bMV0uYXVkaW9MZXZlbD4wKXtsZXQgaT10WzBdWzFdLnBlZXJJRDtpZihpIGluIGEpcmV0dXJuIGFbaV19cmV0dXJuIG51bGx9KSxBbT1hPT57bGV0IGU9cmUoYSk7cmV0dXJuIHplKGEsZT09bnVsbD92b2lkIDA6ZS5hdWRpb1RyYWNrKX0sWXI9YT0+e2xldCBlPXJlKGEpO3JldHVybiB6ZShhLGU9PW51bGw/dm9pZCAwOmUudmlkZW9UcmFjayl9LGhhPWE9PntsZXQgZT1yZShhKTtyZXR1cm4geXMoYSxlPT1udWxsP3ZvaWQgMDplLnZpZGVvVHJhY2spfSxYcj1BKHJlLE4sKGEsZSk9PntsZXR7dmlkZW86dCxhdWRpbzppfT1GZShlLGEpO3JldHVybiEhKHR8fGkpfSksam89QSh6LE4sKGEsZSk9PntsZXQgdDtmb3IobGV0IGkgaW4gYSl7bGV0IHI9YVtpXSx7dmlkZW86cyxhdWRpbzpvfT1GZShlLHIpO2lmKHMpcmV0dXJuIHI7byYmIXQmJih0PXIpfXJldHVybiB0fSksSW09QShqbyxhPT4hIWEpLFJtPUEoeixOLChhLGUpPT57Zm9yKGxldCB0IGluIGEpe2xldCBpPWFbdF0se2F1ZGlvOnIsdmlkZW86c309RmUoZSxpKTtpZighcyYmcilyZXR1cm4gaX19KSxIbT1BKHosTiwoYSxlKT0+e2xldCB0PVtdLGk9W107Zm9yKGxldCByIGluIGEpe2xldCBzPWFbcl0se3ZpZGVvOm8sYXVkaW86bn09RmUoZSxzKTtvP3QucHVzaChzKTpuJiZpLnB1c2gocyl9cmV0dXJuIHQuY29uY2F0KGkpfSksQ209QSh6LE4sKGEsZSk9Pntmb3IobGV0IHQgaW4gZSl7bGV0IGk9ZVt0XTtpZihmdChpKSYmVHQoaSkmJmkucGVlcklkKXJldHVybiBhW2kucGVlcklkXX19KSxMbT1BKHosTiwoYSxlKT0+e2ZvcihsZXQgdCBpbiBlKXtsZXQgaT1lW3RdO2lmKGNpKGkpJiZpLnBlZXJJZClyZXR1cm4gYVtpLnBlZXJJZF19fSksRG09QShLbyxhPT5hLmZpbHRlcihNcykpLHdtPUEobGEsYT0+YS5sZW5ndGgpLF9tPUEoQWksYT0+T2JqZWN0LnZhbHVlcyhhKS5maWx0ZXIoZT0+IWUucmVhZCkubGVuZ3RoKSxEdD1BKGxhLEFpLChhLGUpPT57bGV0IHQ9W107cmV0dXJuIGEuZm9yRWFjaChpPT57dC5wdXNoKGVbaV0pfSksdH0pLEpvPUEoRHQsYT0+YS5maWx0ZXIoZT0+e3ZhciB0O3JldHVybiFlLnJlY2lwaWVudFBlZXImJiEoZS5yZWNpcGllbnRSb2xlcyYmKCh0PWUucmVjaXBpZW50Um9sZXMpPT1udWxsP3ZvaWQgMDp0Lmxlbmd0aCk+MCl9KSksTm09QShKbyxhPT5hLmZpbHRlcihlPT4hZS5yZWFkKS5sZW5ndGgpLHNlPUEoW0ZdLGE9PmEmJmEucm9vbVN0YXRlKSxtYT1BKHNlLGE9PmE9PT1cIlByZXZpZXdcIiksT209QShGLGE9PmEucm9vbVN0YXRlIT09XCJEaXNjb25uZWN0ZWRcIikseG09QShGLGE9PiFhLnRyYW5zY3JpcHRpb25zfHxhLnRyYW5zY3JpcHRpb25zLmxlbmd0aDw9MD8hMTphLnRyYW5zY3JpcHRpb25zLnNvbWUoZT0+ZS5tb2RlPT09XCJjYXB0aW9uXCImJmUuc3RhdGU9PT1cInN0YXJ0ZWRcIikpLEVlPWE9PmEucm9sZXMsVW09QShbRWVdLGE9Pk9iamVjdC5rZXlzKGEpKSxjdD1BKFtyZSxFZV0sKGEsZSk9PmEhPW51bGwmJmEucm9sZU5hbWU/ZVthLnJvbGVOYW1lXTpudWxsKSxRbz1hPT57dmFyIGU7cmV0dXJuKGU9YS5wcmV2aWV3KT09bnVsbD92b2lkIDA6ZS5hc1JvbGV9LFNhPUEoW1FvLEVlXSwoYSxlKT0+YT9lW2FdOm51bGwpLEJtPUEoW2N0XSxhPT57dmFyIGU7cmV0dXJuKGU9YT09bnVsbD92b2lkIDA6YS5zdWJzY3JpYmVQYXJhbXMpIT1udWxsJiZlLnN1YnNjcmliZVRvUm9sZXM/YS5zdWJzY3JpYmVQYXJhbXMuc3Vic2NyaWJlVG9Sb2xlcy5sZW5ndGg+MDohMX0pLGdhPUEoY3QsYT0+YT09bnVsbD92b2lkIDA6YS5wZXJtaXNzaW9ucyksVm09QShGLGE9PmEucmVjb3JkaW5nKSxGbT1BKEYsYT0+YS5ydG1wKSxHbT1BKEYsYT0+YS5obHMpLFdtPUEoRixhPT5hLnRyYW5zY3JpcHRpb25zKSwkbT1BKEYsYT0+YS5zZXNzaW9uSWQpLEttPUEoRixhPT5hLnN0YXJ0ZWRBdCkscW09QShGLGE9PiEhYS5pc0xhcmdlUm9vbSksam09QShGLGE9PiEhYS5pc0VmZmVjdHNFbmFibGVkKSxKbT1BKEYsYT0+ISFhLmlzVkJFbmFibGVkKSxRbT1BKEYsYT0+YS5lZmZlY3RzS2V5KSx6bT1hPT5hLnRlbXBsYXRlQXBwRGF0YSxZbT1hPT5hLnNlc3Npb25NZXRhZGF0YSxUYT1hPT5hLnBvbGxzLFhtPWE9Pk9iamVjdC52YWx1ZXMoYS5wb2xscyksWm09QShrZSxhPT5hLmZpbHRlcihlPT5lLmlzSGFuZFJhaXNlZCkpLHpvPWE9PmEud2hpdGVib2FyZHMsZVM9QSh6byxhPT5PYmplY3QudmFsdWVzKGEpWzBdKTtpbXBvcnR7Y3JlYXRlU2VsZWN0b3IgYXMgZmF9ZnJvbVwicmVzZWxlY3RcIjt2YXIgdmE9KGE9XCJhdWRpb1wiKT0+ZT0+ZS5wbGF5bGlzdFthXS5saXN0LFpyPShhPVwiYXVkaW9cIik9PmU9PmUucGxheWxpc3RbYV0uc2VsZWN0aW9uLE1hPShhPVwiYXVkaW9cIik9PmU9PmUucGxheWxpc3RbYV0ucHJvZ3Jlc3MseWE9KGE9XCJhdWRpb1wiKT0+ZT0+ZS5wbGF5bGlzdFthXS5jdXJyZW50VGltZSxrYT0oYT1cImF1ZGlvXCIpPT5lPT5lLnBsYXlsaXN0W2FdLnBsYXliYWNrUmF0ZSxFYT0oYT1cImF1ZGlvXCIpPT5lPT5lLnBsYXlsaXN0W2FdLnZvbHVtZSxQYT0oYT1cImF1ZGlvXCIpPT5mYSh2YShhKSxlPT5PYmplY3QudmFsdWVzKGUpKSxiYT0oYT1cImF1ZGlvXCIpPT5mYSh2YShhKSxacihhKSwoZSx0KT0+e2lmKHQuaWQpcmV0dXJuIGVbdC5pZF19KSxBYT17c2VsZWN0aW9uOlpyKFwiYXVkaW9cIikscHJvZ3Jlc3M6TWEoXCJhdWRpb1wiKSxjdXJyZW50VGltZTp5YShcImF1ZGlvXCIpLHBsYXliYWNrUmF0ZTprYShcImF1ZGlvXCIpLHZvbHVtZTpFYShcImF1ZGlvXCIpLGxpc3Q6UGEoXCJhdWRpb1wiKSxzZWxlY3RlZEl0ZW06YmEoXCJhdWRpb1wiKX0sSWE9e3NlbGVjdGlvbjpacihcInZpZGVvXCIpLHByb2dyZXNzOk1hKFwidmlkZW9cIiksY3VycmVudFRpbWU6eWEoXCJ2aWRlb1wiKSxwbGF5YmFja1JhdGU6a2EoXCJ2aWRlb1wiKSx2b2x1bWU6RWEoXCJ2aWRlb1wiKSxsaXN0OlBhKFwidmlkZW9cIiksc2VsZWN0ZWRJdGVtOmJhKFwidmlkZW9cIil9O2ltcG9ydHtjcmVhdGVTZWxlY3RvciBhcyBEfWZyb21cInJlc2VsZWN0XCI7ZnVuY3Rpb24gSChhKXtyZXR1cm4gZT0+dD0+YSh0LGUpfXZhciB3dD1cIkhNUy1TdG9yZTpcIixiPWNsYXNze3N0YXRpYyB2KGUsLi4udCl7dGhpcy5sb2coMCxlLC4uLnQpfXN0YXRpYyBkKC4uLmUpe3RoaXMubG9nKDEsLi4uZSl9c3RhdGljIGkoLi4uZSl7dGhpcy5sb2coMiwuLi5lKX1zdGF0aWMgdyguLi5lKXt0aGlzLmxvZygzLC4uLmUpfXN0YXRpYyBlKC4uLmUpe3RoaXMubG9nKDYsLi4uZSl9c3RhdGljIHRpbWUoZSl7dGhpcy5sb2coNCxcIltITVNQZXJmb3JtYW5jZVRpbWluZ11cIixlKX1zdGF0aWMgdGltZUVuZChlKXt0aGlzLmxvZyg1LFwiW0hNU1BlcmZvcm1hbmNlVGltaW5nXVwiLGUsZSl9c3RhdGljIGNsZWFudXAoKXtwZXJmb3JtYW5jZS5jbGVhck1hcmtzKCkscGVyZm9ybWFuY2UuY2xlYXJNZWFzdXJlcygpfXN0YXRpYyBsb2coZSwuLi50KXtpZighKHRoaXMubGV2ZWwudmFsdWVPZigpPmUudmFsdWVPZigpKSlzd2l0Y2goZSl7Y2FzZSAwOntjb25zb2xlLmxvZyh3dCwuLi50KTticmVha31jYXNlIDE6e2NvbnNvbGUuZGVidWcod3QsLi4udCk7YnJlYWt9Y2FzZSAyOntjb25zb2xlLmluZm8od3QsLi4udCk7YnJlYWt9Y2FzZSAzOntjb25zb2xlLndhcm4od3QsLi4udCk7YnJlYWt9Y2FzZSA2Ontjb25zb2xlLmVycm9yKHd0LC4uLnQpO2JyZWFrfWNhc2UgNDp7cGVyZm9ybWFuY2UubWFyayh0WzFdKTticmVha31jYXNlIDU6e2xldCBpPXRbMF0scj10WzFdO3RyeXtsZXQgcz1wZXJmb3JtYW5jZS5tZWFzdXJlKHIscik7dGhpcy5sb2coMSxpLHIscz09bnVsbD92b2lkIDA6cy5kdXJhdGlvbikscGVyZm9ybWFuY2UuY2xlYXJNYXJrcyhyKSxwZXJmb3JtYW5jZS5jbGVhck1lYXN1cmVzKHIpfWNhdGNoKHMpe3RoaXMubG9nKDEsaSxyLHMpfWJyZWFrfX19fTtiLmxldmVsPTA7dmFyIGVzPShhLGUpPT5lLF90PShhLGUpPT5lLFJhPShhLGUpPT5lLFlvPShhLGUpPT5lLFhvPShhLGUpPT5lLFk9RChbeixlc10sKGEsZSk9PmU/YVtlXTpudWxsKSx0cz1EKFtOLF90XSwoYSxlKT0+ZT9hW2VdOm51bGwpLFpvPUQoW04sX3RdLChhLGUpPT57aWYoIWUpcmV0dXJuIG51bGw7bGV0IHQ9YVtlXTtyZXR1cm4odD09bnVsbD92b2lkIDA6dC50eXBlKT09PVwidmlkZW9cIj90Om51bGx9KSxlbj1EKFtOLF90XSwoYSxlKT0+e2lmKCFlKXJldHVybiBudWxsO2xldCB0PWFbZV07cmV0dXJuKHQ9PW51bGw/dm9pZCAwOnQudHlwZSk9PT1cImF1ZGlvXCI/dDpudWxsfSksdG49RChbTixfdF0sKGEsZSk9PntpZighZSlyZXR1cm4gbnVsbDtsZXQgdD1hW2VdO3JldHVybih0PT1udWxsP3ZvaWQgMDp0LnR5cGUpPT09XCJhdWRpb1wiJiYodD09bnVsbD92b2lkIDA6dC5zb3VyY2UpPT09XCJzY3JlZW5cIj90Om51bGx9KSxybj1EKFtOLF90XSwoYSxlKT0+e2lmKCFlKXJldHVybiBudWxsO2xldCB0PWFbZV07cmV0dXJuKHQ9PW51bGw/dm9pZCAwOnQudHlwZSk9PT1cInZpZGVvXCImJih0PT1udWxsP3ZvaWQgMDp0LnNvdXJjZSk9PT1cInNjcmVlblwiP3Q6bnVsbH0pLHNuPUQoW1RhLFhvXSwoYSxlKT0+ZT9hW2VdOm51bGwpLGVlPUgoWSksdVM9SChEKFt6cixZb10sKGEsZSk9PntpZihhKXJldHVybiBlP2FbZV06YX0pKTtmdW5jdGlvbiBwUyhhKXtyZXR1cm4gZT0+e2lmKGUuc2Vzc2lvblN0b3JlKXJldHVybiBhP2Uuc2Vzc2lvblN0b3JlW2FdOmUuc2Vzc2lvblN0b3JlfX12YXIgaFM9KC4uLmEpPT5EKFt6cl0sZT0+e2lmKGUpe2lmKGEmJmEubGVuZ3RoPjApe2xldCB0PWU7Zm9yKGxldCBpIG9mIGEpe2lmKCFpKXJldHVybiB0O3Q9dD09bnVsbD92b2lkIDA6dFtpXX1yZXR1cm4gdH1yZXR1cm4gZX19KSxtUz1IKEQoWSxhPT5hPT1udWxsP3ZvaWQgMDphLm5hbWUpKSxTUz1IKEQoWSxhPT5hPT1udWxsP3ZvaWQgMDphLnR5cGUpKSxJaT1IKHRzKSxIYT1IKFpvKSxnUz1IKGVuKSxUUz1IKHRuKSxmUz1IKHJuKSxhbj1IKChhLGUpPT57bGV0IHQ9WShhLGUpO2lmKHQmJnQudmlkZW9UcmFjayYmdC52aWRlb1RyYWNrIT09XCJcIilyZXR1cm4gYS50cmFja3NbdC52aWRlb1RyYWNrXX0pLG9uPUgoKGEsZSk9PntsZXQgdD1ZKGEsZSk7aWYodCYmdC5hdWRpb1RyYWNrJiZ0LmF1ZGlvVHJhY2shPT1cIlwiKXJldHVybiBhLnRyYWNrc1t0LmF1ZGlvVHJhY2tdfSksdlM9YW4sTVM9SCgoYSxlKT0+e2xldCB0PVkoYSxlKTtyZXR1cm4odD09bnVsbD92b2lkIDA6dC5hdXhpbGlhcnlUcmFja3MubWFwKGk9PmEudHJhY2tzW2ldKSl8fFtdfSksQ2E9KGEsZSk9PmU/YS5zcGVha2Vyc1tlXTpudWxsLHlTPUgoRChDYSxhPT4oYT09bnVsbD92b2lkIDA6YS5hdWRpb0xldmVsKXx8MCkpLG5uPShhLGUpPT57bGV0IHQ9b24oZSkoYSk7cmV0dXJuIENhKGEsdD09bnVsbD92b2lkIDA6dC5pZCl9LGtTPUgoRChubixhPT4oYT09bnVsbD92b2lkIDA6YS5hdWRpb0xldmVsKXx8MCkpLEVTPUgoKGEsZSk9PntpZihlKXJldHVybiBhLmNvbm5lY3Rpb25RdWFsaXRpZXNbZV19KSxQUz1IKChhLGUpPT57bGV0IHQ9WShhLGUpO2lmKHQpe2xldCBpPXQ9PW51bGw/dm9pZCAwOnQuYXV4aWxpYXJ5VHJhY2tzLmZpbmQocj0+Z3QoYS50cmFja3Nbcl0pKTtyZXR1cm4gaT9hLnRyYWNrc1tpXTp2b2lkIDB9fSksYlM9SChEKE4sWSwoYSxlKT0+e2xldCB0PWU9PW51bGw/dm9pZCAwOmUuYXV4aWxpYXJ5VHJhY2tzLmZpbmQoaT0+e2xldCByPWFbaV07cmV0dXJuIGZ0KHIpJiZUdChyKX0pO3JldHVybiB0P2FbdF06dm9pZCAwfSkpLEFTPUgoRChOLFksKGEsZSk9PntsZXQgdD1lPT1udWxsP3ZvaWQgMDplLmF1eGlsaWFyeVRyYWNrcy5maW5kKGk9PntsZXQgcj1hW2ldO3JldHVybiBmdChyKSYmZ3Qocil9KTtyZXR1cm4gdD9hW3RdOnZvaWQgMH0pKSxJUz1IKEQoTixZLChhLGUpPT57bGV0IHQ9ZT09bnVsbD92b2lkIDA6ZS5hdXhpbGlhcnlUcmFja3MuZmluZChpPT57bGV0IHI9YVtpXTtyZXR1cm4gY2kocikmJmd0KHIpfSk7cmV0dXJuIHQ/YVt0XTp2b2lkIDB9KSksTGE9SChEKE4sWSwoYSxlKT0+RmUoYSxlKSkpLFJTPWE9PkQoTGEoYSksZT0+ZS52aWRlbyksRGE9YT0+RChMYShhKSxlPT5lLmF1ZGlvKSxIUz1IKChhLGUpPT57bGV0IHQ9WShhLGUpO3JldHVybiB6ZShhLHQ9PW51bGw/dm9pZCAwOnQuYXVkaW9UcmFjayl9KSxDUz1IKChhLGUpPT57bGV0IHQ9WShhLGUpO3JldHVybiB6ZShhLHQ9PW51bGw/dm9pZCAwOnQudmlkZW9UcmFjayl9KSx3YT1IKChhLGUpPT57aWYoZSYmYS50cmFja3NbZV0pcmV0dXJuIGEudHJhY2tzW2VdLnZvbHVtZT09PTB9KSxMUz1IKChhLGUpPT57bGV0IHQ9WShhLGUpO3JldHVybiB3YSh0PT1udWxsP3ZvaWQgMDp0LmF1ZGlvVHJhY2spKGEpfSksRFM9SCgoYSxlKT0+e2xldCB0PURhKGUpKGEpO3JldHVybiB3YSh0PT1udWxsP3ZvaWQgMDp0LmlkKShhKX0pLF9hPUgoKGEsZSk9PntsZXQgdD10cyhhLGUpO2lmKHQpe2lmKHQudHlwZSE9PVwiYXVkaW9cIil7Yi53KFwiUGxlYXNlIHBhc3MgYXVkaW8gdHJhY2sgaGVyZVwiKTtyZXR1cm59cmV0dXJuIHQudm9sdW1lfX0pLHdTPUgoKGEsZSk9PntsZXQgdD1ZKGEsZSk7cmV0dXJuIF9hKHQ9PW51bGw/dm9pZCAwOnQuYXVkaW9UcmFjaykoYSl9KSxfUz1IKChhLGUpPT57bGV0IHQ9RGEoZSkoYSk7cmV0dXJuIF9hKHQ9PW51bGw/dm9pZCAwOnQuaWQpKGEpfSksTlM9SCgoYSxlKT0+e2xldCB0PXRzKGEsZSk7aWYodCl7aWYodC50eXBlIT09XCJ2aWRlb1wiKXtiLncoXCJQbGVhc2UgcGFzcyB2aWRlbyB0cmFjayBoZXJlXCIpO3JldHVybn1yZXR1cm4gdC5sYXllcn19KSxOYT1EKFtEdCxJZSxlc10sKGEsZSx0KT0+e2lmKHQpcmV0dXJuIGEuZmlsdGVyKGk9Pnt2YXIgcjtyZXR1cm4haS5yZWNpcGllbnRQZWVyJiYhKChyPWkucmVjaXBpZW50Um9sZXMpIT1udWxsJiZyLmxlbmd0aCl8fGkuc2VuZGVyJiYhW2UsdF0uaW5jbHVkZXMoaS5zZW5kZXIpPyExOltlLHRdLmluY2x1ZGVzKGkucmVjaXBpZW50UGVlcil9KX0pLE9hPUQoW0R0LFJhXSwoYSxlKT0+e2lmKGUpcmV0dXJuIGEuZmlsdGVyKHQ9Pnt2YXIgaSxyO3JldHVybihpPXQucmVjaXBpZW50Um9sZXMpIT1udWxsJiZpLmxlbmd0aD8ocj10LnJlY2lwaWVudFJvbGVzKT09bnVsbD92b2lkIDA6ci5pbmNsdWRlcyhlKTohMX0pfSksY249RChEdCxhPT5hLmZpbHRlcihlPT57dmFyIHQ7cmV0dXJuIWUucmVjaXBpZW50UGVlciYmISgodD1lLnJlY2lwaWVudFJvbGVzKSE9bnVsbCYmdC5sZW5ndGgpfSkpLGRuPUQoW09hLFJhXSxhPT5hP2EuZmlsdGVyKGU9PiFlLnJlYWQpLmxlbmd0aDowKSxsbj1EKFtOYSxlc10sYT0+YT9hLmZpbHRlcihlPT4hZS5yZWFkKS5sZW5ndGg6MCksT1M9RChjbixhPT5hLmZpbHRlcihlPT4hZS5yZWFkKS5sZW5ndGgpLHhTPUgoTmEpLFVTPUgoT2EpLEJTPUgoZG4pLFZTPUgobG4pLEZTPWE9PkQoW2tlXSxlPT5lLmZpbHRlcih0PT50LnJvbGVOYW1lPT09YSkpLEdTPWE9PkQoW2tlXSxlPT5lLmZpbHRlcih0PT50LnJvbGVOYW1lP2EuaW5jbHVkZXModC5yb2xlTmFtZSk6ITEpKSxXUz1hPT5EKGVlKGEpLGU9Pnt0cnl7cmV0dXJuIGUhPW51bGwmJmUubWV0YWRhdGEmJmUubWV0YWRhdGEhPT1cIlwiP0pTT04ucGFyc2UoZS5tZXRhZGF0YSk6e319Y2F0Y2godCl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJjYW5ub3QgcGFyc2UgcGVlciBtZXRhZGF0YVwiLHQpLHt9fX0pLCRTPWE9PkQoZWUoYSksZT0+ISEoZSE9bnVsbCYmZS5pc0hhbmRSYWlzZWQpKSxLUz1hPT5EKGVlKGEpLGU9PmU9PW51bGw/dm9pZCAwOmUubmFtZSkseGE9SChzbikscVM9YT0+RChBaSxlPT5lW2FdKSxqUz1hPT5EKGN0LGU9PmUhPW51bGwmJmUucGVybWlzc2lvbnMudHJhbnNjcmlwdGlvbnM/ZS5wZXJtaXNzaW9ucy50cmFuc2NyaXB0aW9uc1thXS5sZW5ndGg+MDohMSk7aW1wb3J0e2NyZWF0ZVNlbGVjdG9yIGFzIFJpfWZyb21cInJlc2VsZWN0XCI7dmFyIFhTPVJpKFt6LE5dLChhLGUpPT5PYmplY3QudmFsdWVzKGEpLm1hcChpPT57dmFyIHI7cmV0dXJue3BlZXI6aSxpc0F1ZGlvRW5hYmxlZDppLmF1ZGlvVHJhY2s/KHI9ZVtpLmF1ZGlvVHJhY2tdKT09bnVsbD92b2lkIDA6ci5lbmFibGVkOiExfX0pKSx1bj1hPT5hLnJvbGVDaGFuZ2VSZXF1ZXN0c1swXXx8bnVsbCxaUz1SaShbdW4seixFZV0sKGEsZSx0KT0+YT97cmVxdWVzdGVkQnk6YS5yZXF1ZXN0ZWRCeT9lW2EucmVxdWVzdGVkQnldOnZvaWQgMCxyb2xlOnRbYS5yb2xlTmFtZV0sdG9rZW46YS50b2tlbn06bnVsbCksZWc9UmkoW2N0XSxhPT52dChhKSksdGc9UmkoW1NhXSxhPT52dChhKSk7aW1wb3J0e2NyZWF0ZVNlbGVjdG9yIGFzIFJlfWZyb21cInJlc2VsZWN0XCI7dmFyIHBuPWE9PlJlKFtFZV0sZT0+ZVthXSksb2c9YT0+UmUocG4oYSksZT0+dnQoZSkpLGhuPVJlKFtaLE5dLChhLGUpPT57bGV0IHQ9bnVsbDtyZXR1cm4gYSYmKHQ9ZVthXSksKHQ9PW51bGw/dm9pZCAwOnQucGx1Z2lucyl8fFtdfSksbW49UmUoW2xlLE5dLChhLGUpPT57bGV0IHQ9bnVsbDtyZXR1cm4gYSYmKHQ9ZVthXSksKHQ9PW51bGw/dm9pZCAwOnQucGx1Z2lucyl8fFtdfSksbmc9YT0+UmUoW2huXSxlPT5lLmluY2x1ZGVzKGEpKSxjZz1hPT5SZShbbW5dLGU9PmUuaW5jbHVkZXMoYSkpLGRnPWE9PlJlKGtlLGU9PmUuZmluZChhKSksbGc9YT0+UmUoa2UsZT0+ZS5maWx0ZXIoYSkpLHVnPWE9PlJlKEYsZT0+ZS5qb2luZWRBdCYmRGF0ZS5ub3coKS1lLmpvaW5lZEF0LmdldFRpbWUoKTw9YSk7aW1wb3J0e3Byb2R1Y2UgYXMgRG59ZnJvbVwiaW1tZXJcIjtpbXBvcnQgd24gZnJvbVwienVzdGFuZC9zaGFsbG93XCI7aW1wb3J0IF9uIGZyb21cInp1c3RhbmQvdmFuaWxsYVwiO2ltcG9ydHtFdmVudEVtaXR0ZXIyIGFzIFNufWZyb21cImV2ZW50ZW1pdHRlcjJcIjt2YXIgSGk9ezA6XCJQRUVSX0pPSU5FRFwiLDE6XCJQRUVSX0xFRlRcIiw4OlwiUk9MRV9VUERBVEVEXCIsMTA6XCJOQU1FX1VQREFURURcIiwxMTpcIk1FVEFEQVRBX1VQREFURURcIiwxMjpcIkhBTkRfUkFJU0VfQ0hBTkdFRFwifSxOdD17MDpcIlRSQUNLX0FEREVEXCIsMTpcIlRSQUNLX1JFTU9WRURcIiwyOlwiVFJBQ0tfTVVURURcIiwzOlwiVFJBQ0tfVU5NVVRFRFwiLDU6XCJUUkFDS19ERUdSQURFRFwiLDY6XCJUUkFDS19SRVNUT1JFRFwiLDQ6XCJUUkFDS19ERVNDUklQVElPTl9DSEFOR0VEXCJ9LENpPXswOlwiUE9MTF9DUkVBVEVEXCIsMTpcIlBPTExfU1RBUlRFRFwiLDI6XCJQT0xMX1NUT1BQRURcIiw0OlwiUE9MTF9WT1RFU19VUERBVEVEXCIsMzpcIlBPTExTX0xJU1RcIn0sVWE9e1RSQU5TQ1JJUFRJT05fU1RBVEVfVVBEQVRFRDpcIlRSQU5TQ1JJUFRJT05fU1RBVEVfVVBEQVRFRFwifTt2YXIgaXM9XCJobXNOb3RpZmljYXRpb25cIixMaT1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLmlkPTA7dGhpcy5vbk5vdGlmaWNhdGlvbj0oZSx0KT0+e2xldCBpPXI9PntpZih0KXtsZXQgcztpZihBcnJheS5pc0FycmF5KHQpP3M9dC5pbmNsdWRlcyhyLnR5cGUpOnM9dD09PXIudHlwZSwhcylyZXR1cm59ZShyKX07cmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyLmFkZExpc3RlbmVyKGlzLGkpLCgpPT57dGhpcy5ldmVudEVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoaXMsaSl9fTt0aGlzLnN0b3JlPWUsdGhpcy5ldmVudEVtaXR0ZXI9bmV3IFNuKHttYXhMaXN0ZW5lcnM6T2JqZWN0LmtleXMoUHIpLmxlbmd0aH0pfXNlbmRQbGF5bGlzdFRyYWNrRW5kZWQoZSl7bGV0IHQ9dGhpcy5jcmVhdGVOb3RpZmljYXRpb24oXCJQTEFZTElTVF9UUkFDS19FTkRFRFwiLGUsXCJpbmZvXCIpO3RoaXMuZW1pdEV2ZW50KHQpfXNlbmREZXZpY2VDaGFuZ2UoZSl7dmFyIGk7bGV0IHQ9dGhpcy5jcmVhdGVOb3RpZmljYXRpb24oXCJERVZJQ0VfQ0hBTkdFX1VQREFURVwiLGUsZS5lcnJvcj9cImVycm9yXCI6XCJpbmZvXCIsYFNlbGVjdGVkICR7ZS50eXBlfSBkZXZpY2UgLSAkeyhpPWUuc2VsZWN0aW9uKT09bnVsbD92b2lkIDA6aS5sYWJlbH1gKTt0aGlzLmVtaXRFdmVudCh0KX1zZW5kTGVhdmVSb29tKGUpe3ZhciByO2xldCB0PShyPWUucmVxdWVzdGVkQnkpPT1udWxsP3ZvaWQgMDpyLm5hbWUsaT10aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbihlLnJvb21FbmRlZHx8IXQ/XCJST09NX0VOREVEXCI6XCJSRU1PVkVEX0ZST01fUk9PTVwiLGUsXCJpbmZvXCIsYCR7ZS5yb29tRW5kZWQ/XCJSb29tIGVuZGVkXCI6XCJSZW1vdmVkIGZyb20gcm9vbVwifSAke3Q/YGJ5ICR7dH1gOlwiXCJ9YCk7dGhpcy5lbWl0RXZlbnQoaSl9c2VuZFBlZXJMaXN0KGUpe2lmKGUubGVuZ3RoPT09MClyZXR1cm47bGV0IHQ9dGhpcy5jcmVhdGVOb3RpZmljYXRpb24oXCJQRUVSX0xJU1RcIixlLFwiaW5mb1wiKTt0aGlzLmVtaXRFdmVudCh0KX1zZW5kUGVlclVwZGF0ZShlLHQpe2xldCBpPXRoaXMuc3RvcmUuZ2V0U3RhdGUoZWUodD09bnVsbD92b2lkIDA6dC5pZCkpfHx0LHI9SGlbZV07aWYociYmaSl7bGV0IHM9dGhpcy5jcmVhdGVOb3RpZmljYXRpb24ocixpLFwiaW5mb1wiKTt0aGlzLmVtaXRFdmVudChzKX19c2VuZFRyYWNrVXBkYXRlKGUsdCl7bGV0IGk9dGhpcy5zdG9yZS5nZXRTdGF0ZShJaSh0KSkscj1OdFtlXTtpZihyKXtsZXQgcz10aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbihyLGksXCJpbmZvXCIpO3RoaXMuZW1pdEV2ZW50KHMpfX1zZW5kTWVzc2FnZVJlY2VpdmVkKGUpe2xldCB0PXRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKFwiTkVXX01FU1NBR0VcIixlLFwiaW5mb1wiKTt0aGlzLmVtaXRFdmVudCh0KX1zZW5kRXJyb3IoZSl7bGV0IHQ9dGhpcy5jcmVhdGVOb3RpZmljYXRpb24oXCJFUlJPUlwiLGUsXCJlcnJvclwiKTt0aGlzLmVtaXRFdmVudCh0KX1zZW5kUmVjb25uZWN0aW5nKGUpe2xldCB0PXRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKFwiUkVDT05ORUNUSU5HXCIsZSxcImVycm9yXCIpO3RoaXMuZW1pdEV2ZW50KHQpfXNlbmRSZWNvbm5lY3RlZCgpe2xldCBlPXRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKFwiUkVDT05ORUNURURcIixudWxsLFwiaW5mb1wiKTt0aGlzLmVtaXRFdmVudChlKX1zZW5kQ2hhbmdlVHJhY2tTdGF0ZVJlcXVlc3QoZSl7bGV0IHQ9dGhpcy5jcmVhdGVOb3RpZmljYXRpb24oXCJDSEFOR0VfVFJBQ0tfU1RBVEVfUkVRVUVTVFwiLGUsXCJpbmZvXCIpO3RoaXMuZW1pdEV2ZW50KHQpfXNlbmRDaGFuZ2VNdWx0aVRyYWNrU3RhdGVSZXF1ZXN0KGUpe2xldCB0PXRoaXMuY3JlYXRlTm90aWZpY2F0aW9uKFwiQ0hBTkdFX01VTFRJX1RSQUNLX1NUQVRFX1JFUVVFU1RcIixlLFwiaW5mb1wiKTt0aGlzLmVtaXRFdmVudCh0KX1zZW5kUG9sbFVwZGF0ZShlLHQpe2xldCBpPUNpW2VdLHI9dGhpcy5zdG9yZS5nZXRTdGF0ZSh4YSh0KSk7aWYoaSl7bGV0IHM9dGhpcy5jcmVhdGVOb3RpZmljYXRpb24oaSxyLFwiaW5mb1wiKTt0aGlzLmVtaXRFdmVudChzKX19c2VuZFRyYW5zY3JpcHRpb25VcGRhdGUoZSl7bGV0IHQ9dGhpcy5jcmVhdGVOb3RpZmljYXRpb24oVWEuVFJBTlNDUklQVElPTl9TVEFURV9VUERBVEVELGUsXCJpbmZvXCIpO3RoaXMuZW1pdEV2ZW50KHQpfWVtaXRFdmVudChlKXt0aGlzLmV2ZW50RW1pdHRlci5lbWl0KGlzLGUpfWNyZWF0ZU5vdGlmaWNhdGlvbihlLHQsaSxyPVwiXCIpe3JldHVybiB0aGlzLmlkKysse2lkOnRoaXMuaWQsdHlwZTplLG1lc3NhZ2U6cixkYXRhOnQsc2V2ZXJpdHk6aX19fTt2YXIgRGk9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5xdWV1ZWRVcGRhdGVzPXt9O3RoaXMudGltZXJzPXt9O3RoaXMuREVGQVVMVF9JTlRFUlZBTF9NUz01MDt0aGlzLnN0b3JlPWV9c2V0U3RhdGUoZSx0LGk9dGhpcy5ERUZBVUxUX0lOVEVSVkFMX01TKXt0aGlzLnF1ZXVlZFVwZGF0ZXNbdF09dGhpcy5xdWV1ZWRVcGRhdGVzW3RdfHxbXSx0aGlzLnF1ZXVlZFVwZGF0ZXNbdF0ucHVzaChlKSwhdGhpcy50aW1lcnNbdF0mJih3aW5kb3c/dGhpcy50aW1lcnNbdF09d2luZG93LnNldFRpbWVvdXQoKCk9PnRoaXMuc2V0U3RhdGVCYXRjaGVkKHQpLGkpOnRoaXMuc2V0U3RhdGVCYXRjaGVkKHQpKX1zZXRTdGF0ZUJhdGNoZWQoZSl7dmFyIHQ7aWYoKCh0PXRoaXMucXVldWVkVXBkYXRlc1tlXSk9PW51bGw/dm9pZCAwOnQubGVuZ3RoKT4wKXtsZXQgaT1yPT57dGhpcy5xdWV1ZWRVcGRhdGVzW2VdLmZvckVhY2gocz0+e3RyeXtzKHIpfWNhdGNoKG8pe2IudyhcImZhaWxlZCB0byB1cGRhdGUgc3RvcmVcIixvKX19KX07Y29uc29sZS50aW1lKGB0aW1lZC0ke2V9YCksdGhpcy5zdG9yZS5uYW1lZFNldFN0YXRlKGksZSksY29uc29sZS50aW1lRW5kKGB0aW1lZC0ke2V9YCl9ZGVsZXRlIHRoaXMucXVldWVkVXBkYXRlc1tlXSx3aW5kb3cmJnRoaXMudGltZXJzW2VdJiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLnRpbWVyc1tlXSksZGVsZXRlIHRoaXMudGltZXJzW2VdKX19O2Z1bmN0aW9uIEJhKGEpe3JldHVybiBhIGluc3RhbmNlb2YgaWV8fGEgaW5zdGFuY2VvZiBPfXZhciBWYT0oYSxlKT0+e2xldCB0PU90KE9iamVjdC5rZXlzKGEpLE9iamVjdC5rZXlzKGUpKTtmb3IobGV0IGkgb2YgdCl7bGV0IHI9YVtpXSxzPWVbaV07amUocixzKT8oYWUoci5hdXhpbGlhcnlUcmFja3Mscy5hdXhpbGlhcnlUcmFja3MpJiYocy5hdXhpbGlhcnlUcmFja3M9ci5hdXhpbGlhcnlUcmFja3MpLHIuZ3JvdXBzJiZhZShyLmdyb3VwcyxzLmdyb3VwcykmJihzLmdyb3Vwcz1yLmdyb3VwcyksT2JqZWN0LmFzc2lnbihyLHMpKTphcyhyLHMpP2RlbGV0ZSBhW2ldOndpKHIscykmJihhW2ldPXMpfX0sRmE9KGEsZSk9PntsZXQgdD1PdChPYmplY3Qua2V5cyhhKSxPYmplY3Qua2V5cyhlKSk7Zm9yKGxldCBpIG9mIHQpe2xldCByPWFbaV0scz1lW2ldO2plKHIscyk/KHNzKHIscyksT2JqZWN0LmFzc2lnbihyLHMpKTphcyhyLHMpP2RlbGV0ZSBhW2ldOndpKHIscykmJihhW2ldPXMpfX0sR2E9KGEsZSk9PntsZXQgdD1PdChPYmplY3Qua2V5cyhhKSxPYmplY3Qua2V5cyhlKSk7Zm9yKGxldCBpIG9mIHQpe2xldCByPWFbaV0scz1lW2ldO2plKHIscyk/KHIucXVlc3Rpb25zJiZhZShyLnF1ZXN0aW9ucyxzLnF1ZXN0aW9ucykmJihzLnF1ZXN0aW9ucz1yLnF1ZXN0aW9ucyksT2JqZWN0LmFzc2lnbihyLHMpKTp3aShyLHMpJiYoYVtpXT1zKX19LHJzPShhLGUpPT57bGV0IHQ9T3QoT2JqZWN0LmtleXMoYSksT2JqZWN0LmtleXMoZSkpO2ZvcihsZXQgaSBvZiB0KXtsZXQgcj1hW2ldLHM9ZVtpXTtqZShyLHMpP09iamVjdC5hc3NpZ24ocixzKTphcyhyLHMpP2RlbGV0ZSBhW2ldOndpKHIscykmJihhW2ldPXMpfX0sV2E9KGEsZSx0KT0+e2xldCBpPXQucmVkdWNlKChzLG8pPT4oc1tvLmZpcnN0VHJhY2tJZF09T2JqZWN0LnZhbHVlcyhlW28uZ2V0VHJhY2tJREJlaW5nU2VudCgpXXx8e30pLnNvcnQoKG4sZCk9PiFuLnJpZHx8IWQucmlkPzA6bi5yaWQ8ZC5yaWQ/LTE6MSkscykse30pLHI9T3QoT2JqZWN0LmtleXMoYSksT2JqZWN0LmtleXMoaSkpO2ZvcihsZXQgcyBvZiByKXtpZighaVtzXSl7ZGVsZXRlIGFbc107Y29udGludWV9YVtzXT1pW3NdfX0sc3M9KGEsZSk9PnthLnBsdWdpbnMmJmFlKGEucGx1Z2lucyxlLnBsdWdpbnMpJiYoZS5wbHVnaW5zPWEucGx1Z2lucyksYS50eXBlPT09XCJ2aWRlb1wiJiZhLmxheWVyRGVmaW5pdGlvbnMmJmFlKGEubGF5ZXJEZWZpbml0aW9ucyxlLmxheWVyRGVmaW5pdGlvbnMpJiYoZS5sYXllckRlZmluaXRpb25zPWEubGF5ZXJEZWZpbml0aW9ucyl9LGplPShhLGUpPT5hJiZlLGFzPShhLGUpPT5hJiYhZSx3aT0oYSxlKT0+IWEmJmUsYWU9KGEsZSk9PntpZihhPT09ZXx8YS5sZW5ndGg9PT0wJiYoZT09bnVsbD92b2lkIDA6ZS5sZW5ndGgpPT09MClyZXR1cm4hMDtpZighYXx8IWV8fGEubGVuZ3RoIT09ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCB0PTA7dDxhLmxlbmd0aDt0KyspaWYoYVt0XSE9PWVbdF0pcmV0dXJuITE7cmV0dXJuITB9LE90PShhLGUpPT57bGV0IHQ9bmV3IFNldDtmb3IobGV0IGkgb2YgYSl0LmFkZChpKTtmb3IobGV0IGkgb2YgZSl0LmFkZChpKTtyZXR1cm4gQXJyYXkuZnJvbSh0KX07dmFyIF89Y2xhc3MgYXtzdGF0aWMgY29udmVydFBlZXIoZSl7dmFyIHQsaSxyO3JldHVybntpZDplLnBlZXJJZCxuYW1lOmUubmFtZSxyb2xlTmFtZToodD1lLnJvbGUpPT1udWxsP3ZvaWQgMDp0Lm5hbWUsaXNMb2NhbDplLmlzTG9jYWwsdmlkZW9UcmFjazooaT1lLnZpZGVvVHJhY2spPT1udWxsP3ZvaWQgMDppLnRyYWNrSWQsYXVkaW9UcmFjazoocj1lLmF1ZGlvVHJhY2spPT1udWxsP3ZvaWQgMDpyLnRyYWNrSWQsYXV4aWxpYXJ5VHJhY2tzOmUuYXV4aWxpYXJ5VHJhY2tzLm1hcChzPT5zLnRyYWNrSWQpLGN1c3RvbWVyVXNlcklkOmUuY3VzdG9tZXJVc2VySWQsbWV0YWRhdGE6ZS5tZXRhZGF0YSxqb2luZWRBdDplLmpvaW5lZEF0LGdyb3VwczplLmdyb3Vwcyxpc0hhbmRSYWlzZWQ6ZS5pc0hhbmRSYWlzZWQsdHlwZTplLnR5cGV9fXN0YXRpYyBjb252ZXJ0VHJhY2soZSx0KXtsZXQgaT17aWQ6ZS50cmFja0lkLHNvdXJjZTplLnNvdXJjZSx0eXBlOmUudHlwZSxlbmFibGVkOmUuZW5hYmxlZCxkaXNwbGF5RW5hYmxlZDplLmVuYWJsZWQscGVlcklkOmUucGVlcklkfHx0fTtyZXR1cm4gdGhpcy5lbnJpY2hUcmFjayhpLGUpLGl9c3RhdGljIGVucmljaFRyYWNrKGUsdCl7bGV0IGk9dC5nZXRNZWRpYVRyYWNrU2V0dGluZ3MoKTt0IGluc3RhbmNlb2YgaWUmJihlLnZvbHVtZT10LmdldFZvbHVtZSgpfHwwKSxhLnVwZGF0ZURldmljZUlEKGUsdCksYS5lbnJpY2hMb2NhbFRyYWNrKGUsdCksZS50eXBlPT09XCJ2aWRlb1wiJiYoZS5zb3VyY2U9PT1cInNjcmVlblwiPyhlLmRpc3BsYXlTdXJmYWNlPWkuZGlzcGxheVN1cmZhY2UsYS5lbnJpY2hTY3JlZW5UcmFjayhlLHQpKTplLnNvdXJjZT09PVwicmVndWxhclwiJiYoZS5mYWNpbmdNb2RlPWkuZmFjaW5nTW9kZSksZS5oZWlnaHQ9aS5oZWlnaHQsZS53aWR0aD1pLndpZHRoLGEuZW5yaWNoVmlkZW9UcmFjayhlLHQpKSxhLmVucmljaFBsdWdpbnNEZXRhaWxzKGUsdCl9c3RhdGljIGVucmljaExvY2FsVHJhY2soZSx0KXsodCBpbnN0YW5jZW9mIEd8fHQgaW5zdGFuY2VvZiBkZSkmJihlLmlzUHVibGlzaGVkPXQuaXNQdWJsaXNoZWQpfXN0YXRpYyB1cGRhdGVEZXZpY2VJRChlLHQpe3ZhciBpO3QgaW5zdGFuY2VvZiBHfHx0IGluc3RhbmNlb2YgZGU/ZS5kZXZpY2VJRD10LnNldHRpbmdzLmRldmljZUlkOmUuZGV2aWNlSUQ9KGk9dC5nZXRNZWRpYVRyYWNrU2V0dGluZ3MoKSk9PW51bGw/dm9pZCAwOmkuZGV2aWNlSWR9c3RhdGljIGVucmljaFZpZGVvVHJhY2soZSx0KXt0IGluc3RhbmNlb2YgTyYmKGUubGF5ZXI9dC5nZXRMYXllcigpLGUucHJlZmVycmVkTGF5ZXI9dC5nZXRQcmVmZXJyZWRMYXllcigpLGUuZGVncmFkZWQ9dC5kZWdyYWRlZCksKHQgaW5zdGFuY2VvZiBPfHx0IGluc3RhbmNlb2YgRykmJihhZSh0LmdldFNpbXVsY2FzdERlZmluaXRpb25zKCksZS5sYXllckRlZmluaXRpb25zKXx8KGUubGF5ZXJEZWZpbml0aW9ucz10LmdldFNpbXVsY2FzdERlZmluaXRpb25zKCkpKX1zdGF0aWMgZW5yaWNoU2NyZWVuVHJhY2soZSx0KXt2YXIgaSxyO2lmKHQgaW5zdGFuY2VvZiBHKXtsZXQgcz0oaT10LmdldENhcHR1cmVIYW5kbGUpPT1udWxsP3ZvaWQgMDppLmNhbGwodCk7KHM9PW51bGw/dm9pZCAwOnMuaGFuZGxlKSE9PSgocj1lLmNhcHR1cmVIYW5kbGUpPT1udWxsP3ZvaWQgMDpyLmhhbmRsZSkmJihlLmNhcHR1cmVIYW5kbGU9cyksdC5pc0N1cnJlbnRUYWImJihlLmRpc3BsYXlTdXJmYWNlPVwic2VsZkJyb3dzZXJcIil9fXN0YXRpYyBlbnJpY2hQbHVnaW5zRGV0YWlscyhlLHQpeyh0IGluc3RhbmNlb2YgR3x8dCBpbnN0YW5jZW9mIGRlKSYmKGFlKHQuZ2V0UGx1Z2lucygpLGUucGx1Z2lucyl8fChlLnBsdWdpbnM9dC5nZXRQbHVnaW5zKCkpKX1zdGF0aWMgY29udmVydFJvb20oZSx0KXtsZXR7cmVjb3JkaW5nOmkscnRtcDpyLGhsczpzLHRyYW5zY3JpcHRpb25zOm99PWEuY29udmVydFJlY29yZGluZ1N0cmVhbWluZ1N0YXRlKGUucmVjb3JkaW5nLGUucnRtcCxlLmhscyxlLnRyYW5zY3JpcHRpb25zKTtyZXR1cm57aWQ6ZS5pZCxuYW1lOmUubmFtZSxsb2NhbFBlZXI6dCxyZWNvcmRpbmc6aSxydG1wOnIsaGxzOnMsdHJhbnNjcmlwdGlvbnM6byxzZXNzaW9uSWQ6ZS5zZXNzaW9uSWQsc3RhcnRlZEF0OmUuc3RhcnRlZEF0LGpvaW5lZEF0OmUuam9pbmVkQXQscGVlckNvdW50OmUucGVlckNvdW50LGlzTGFyZ2VSb29tOmUubGFyZ2Vfcm9vbV9vcHRpbWl6YXRpb24saXNFZmZlY3RzRW5hYmxlZDplLmlzRWZmZWN0c0VuYWJsZWQsZGlzYWJsZU5vbmVMYXllclJlcXVlc3Q6ZS5kaXNhYmxlTm9uZUxheWVyUmVxdWVzdCxpc1ZCRW5hYmxlZDplLmlzVkJFbmFibGVkLGVmZmVjdHNLZXk6ZS5lZmZlY3RzS2V5LGlzSGlwYWFFbmFibGVkOmUuaXNIaXBhYUVuYWJsZWQsaXNOb2lzZUNhbmNlbGxhdGlvbkVuYWJsZWQ6ZS5pc05vaXNlQ2FuY2VsbGF0aW9uRW5hYmxlZH19c3RhdGljIGNvbnZlcnRNZXNzYWdlKGUsdCl7dmFyIGkscixzLG87cmV0dXJue3NlbmRlcjooaT1lLnBlZXIpPT1udWxsP3ZvaWQgMDppLnBlZXJfaWQsc2VuZGVyTmFtZToocj1lLnBlZXIpPT1udWxsP3ZvaWQgMDpyLmluZm8ubmFtZSxzZW5kZXJSb2xlOihzPWUucGVlcik9PW51bGw/dm9pZCAwOnMucm9sZSxzZW5kZXJVc2VySWQ6KG89ZS5wZWVyKT09bnVsbD92b2lkIDA6by5pbmZvLnVzZXJfaWQscmVjaXBpZW50UGVlcjplLnByaXZhdGU/dDp2b2lkIDAscmVjaXBpZW50Um9sZXM6ZS5yb2xlcyx0aW1lOm5ldyBEYXRlKGUudGltZXN0YW1wKSx0eXBlOmUuaW5mby50eXBlLG1lc3NhZ2U6ZS5pbmZvLm1lc3NhZ2UsaWQ6ZS5tZXNzYWdlX2lkfX1zdGF0aWMgY29udmVydFJvbGVzKGUpe2xldCB0PXt9O3JldHVybiBlJiZlLmZvckVhY2goaT0+e3RbaS5uYW1lXT1pfSksdH1zdGF0aWMgY29udmVydFJvbGVDaGFuZ2VSZXF1ZXN0KGUpe3ZhciB0O3JldHVybntyZXF1ZXN0ZWRCeToodD1lLnJlcXVlc3RlZEJ5KT09bnVsbD92b2lkIDA6dC5wZWVySWQscm9sZU5hbWU6ZS5yb2xlLm5hbWUsdG9rZW46ZS50b2tlbn19c3RhdGljIGNvbnZlcnRFeGNlcHRpb24oZSl7bGV0IHQ9XCJ0cmFja1R5cGVcImluIGUsaT17Y29kZTplLmNvZGUsYWN0aW9uOmUuYWN0aW9uLG5hbWU6ZS5uYW1lLG1lc3NhZ2U6ZS5tZXNzYWdlLGRlc2NyaXB0aW9uOmUuZGVzY3JpcHRpb24saXNUZXJtaW5hbDplLmlzVGVybWluYWwsbmF0aXZlRXJyb3I6ZS5uYXRpdmVFcnJvcix0aW1lc3RhbXA6bmV3IERhdGV9O3JldHVybiB0JiYoaS50cmFja1R5cGU9ZT09bnVsbD92b2lkIDA6ZS50cmFja1R5cGUpLGl9c3RhdGljIGNvbnZlcnREZXZpY2VDaGFuZ2VVcGRhdGUoZSl7bGV0IHQ9e2RldmljZXM6ZS5kZXZpY2VzLHNlbGVjdGlvbjplLnNlbGVjdGlvbix0eXBlOmUudHlwZX07cmV0dXJuIGUuZXJyb3ImJih0LmVycm9yPXRoaXMuY29udmVydEV4Y2VwdGlvbihlLmVycm9yKSksdH1zdGF0aWMgY29udmVydFBsYXlsaXN0KGUpe2xldCB0PXRoaXMuZ2V0Q29udmVydGVkUGxheWxpc3RUeXBlKGUsXCJhdWRpb1wiKSxpPXRoaXMuZ2V0Q29udmVydGVkUGxheWxpc3RUeXBlKGUsXCJ2aWRlb1wiKTtyZXR1cm57YXVkaW86dCx2aWRlbzppfX1zdGF0aWMgY29udmVydFBsYXlsaXN0SXRlbShlLHQpe2xldCBpPXQudHlwZSxyPWUuZ2V0Q3VycmVudFNlbGVjdGlvbihpKSxzPWUuaXNQbGF5aW5nKGkpLG89dC51cmw9PT0ocj09bnVsbD92b2lkIDA6ci51cmwpO3JldHVybiBNKG0oe30sdCkse3R5cGU6dC50eXBlLHNlbGVjdGVkOm8scGxheWluZzpvJiZzfSl9c3RhdGljIGdldENvbnZlcnRlZFBsYXlsaXN0VHlwZShlLHQpe2xldCBpPXt9LHI9ZS5nZXRDdXJyZW50U2VsZWN0aW9uKHQpLHM9ZS5nZXRDdXJyZW50UHJvZ3Jlc3ModCksbz1lLmdldFZvbHVtZSh0KSxuPWUuZ2V0TGlzdCh0KSxkPWUuZ2V0Q3VycmVudEluZGV4KHQpO3JldHVybiBlLmdldExpc3QodCkuZm9yRWFjaCh1PT57aVt1LmlkXT1hLmNvbnZlcnRQbGF5bGlzdEl0ZW0oZSx1KX0pLHtsaXN0Omksc2VsZWN0aW9uOntpZDpyPT1udWxsP3ZvaWQgMDpyLmlkLGhhc1ByZXZpb3VzOmQ+MCxoYXNOZXh0OmQ8bi5sZW5ndGgtMX0scHJvZ3Jlc3M6cyx2b2x1bWU6byxjdXJyZW50VGltZTplLmdldEN1cnJlbnRUaW1lKHQpLHBsYXliYWNrUmF0ZTplLmdldFBsYXliYWNrUmF0ZSh0KX19c3RhdGljIGNvbnZlcnRSZWNvcmRpbmdTdHJlYW1pbmdTdGF0ZShlLHQsaSxyKXt2YXIgcztyZXR1cm57cmVjb3JkaW5nOnticm93c2VyOm0oe3J1bm5pbmc6ITF9LGU9PW51bGw/dm9pZCAwOmUuYnJvd3Nlciksc2VydmVyOm0oe3J1bm5pbmc6ITF9LGU9PW51bGw/dm9pZCAwOmUuc2VydmVyKSxobHM6bSh7cnVubmluZzohMX0sZT09bnVsbD92b2lkIDA6ZS5obHMpfSxydG1wOm0oe3J1bm5pbmc6ITF9LHQpLGhsczp7dmFyaWFudHM6KChzPWk9PW51bGw/dm9pZCAwOmkudmFyaWFudHMpPT1udWxsP3ZvaWQgMDpzLm1hcChvPT5vKSl8fFtdLHJ1bm5pbmc6ISEoaSE9bnVsbCYmaS5ydW5uaW5nKSxlcnJvcjppPT1udWxsP3ZvaWQgMDppLmVycm9yfSx0cmFuc2NyaXB0aW9uczpyfHxbXX19fTt2YXIgeHQ9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkscil7dGhpcy5wbGF5bGlzdE1hbmFnZXI9ZTt0aGlzLnN5bmNQbGF5bGlzdFN0YXRlPWk7dGhpcy5zdG9yZT1yO3RoaXMudHlwZT10fXBsYXkoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKCFlKXtiLncoXCJQbGVhc2UgcGFzcyBpZCB0byBwbGF5XCIpO3JldHVybn15aWVsZCB0aGlzLnBsYXlsaXN0TWFuYWdlci5zZXRFbmFibGVkKCEwLHtpZDplLHR5cGU6dGhpcy50eXBlfSl9KX1wYXVzZSgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgZT10aGlzLnR5cGU9PT1cImF1ZGlvXCI/QWE6SWEsdD10aGlzLnN0b3JlLmdldFN0YXRlKGUuc2VsZWN0aW9uKTtpZighdC5pZCl7Yi53KFwiTm8gaXRlbSBpcyBjdXJyZW50bHkgcGxheWluZyB0byBwYXVzZVwiKTtyZXR1cm59eWllbGQgdGhpcy5wbGF5bGlzdE1hbmFnZXIuc2V0RW5hYmxlZCghMSx7aWQ6dC5pZCx0eXBlOnRoaXMudHlwZX0pfSl9cGxheU5leHQoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wbGF5bGlzdE1hbmFnZXIucGxheU5leHQodGhpcy50eXBlKX0pfXBsYXlQcmV2aW91cygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnBsYXlsaXN0TWFuYWdlci5wbGF5UHJldmlvdXModGhpcy50eXBlKX0pfXNlZWsoZSl7dGhpcy5wbGF5bGlzdE1hbmFnZXIuc2VlayhlLHRoaXMudHlwZSksdGhpcy5zeW5jUGxheWxpc3RTdGF0ZShgc2Vla09uJHt0aGlzLnR5cGV9UGxheWxpc3RgKX1zZWVrVG8oZSl7dGhpcy5wbGF5bGlzdE1hbmFnZXIuc2Vla1RvKGUsdGhpcy50eXBlKSx0aGlzLnN5bmNQbGF5bGlzdFN0YXRlKGBzZWVrVG9PbiR7dGhpcy50eXBlfVBsYXlsaXN0YCl9c2V0Vm9sdW1lKGUpe3RoaXMucGxheWxpc3RNYW5hZ2VyLnNldFZvbHVtZShlLHRoaXMudHlwZSksdGhpcy5zeW5jUGxheWxpc3RTdGF0ZShgc2V0Vm9sdW1lT24ke3RoaXMudHlwZX1QbGF5bGlzdGApfXNldExpc3QoZSl7dGhpcy5wbGF5bGlzdE1hbmFnZXIuc2V0TGlzdChlKSx0aGlzLnN5bmNQbGF5bGlzdFN0YXRlKGBzZXRMaXN0T24ke3RoaXMudHlwZX1QbGF5bGlzdGApfXN0b3AoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wbGF5bGlzdE1hbmFnZXIuc3RvcCh0aGlzLnR5cGUpLHRoaXMuc3luY1BsYXlsaXN0U3RhdGUoYHN0b3Ake3RoaXMudHlwZX1QbGF5bGlzdGApfSl9c2V0SXNBdXRvcGxheU9uKGUpe3RoaXMucGxheWxpc3RNYW5hZ2VyLnNldElzQXV0b3BsYXlPbih0aGlzLnR5cGUsZSl9c2V0UGxheWJhY2tSYXRlKGUpe3RoaXMucGxheWxpc3RNYW5hZ2VyLnNldFBsYXliYWNrUmF0ZSh0aGlzLnR5cGUsZSksdGhpcy5zeW5jUGxheWxpc3RTdGF0ZShgc2V0JHt0aGlzLnR5cGV9UGxheWJhY2tSYXRlYCl9cmVtb3ZlSXRlbShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9eWllbGQgdGhpcy5wbGF5bGlzdE1hbmFnZXIucmVtb3ZlSXRlbShlLHRoaXMudHlwZSk7cmV0dXJuIHQmJnRoaXMuc3luY1BsYXlsaXN0U3RhdGUoYHJlbW92ZSR7dGhpcy50eXBlfVBsYXlsaXN0SXRlbWApLHR9KX1jbGVhckxpc3QoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wbGF5bGlzdE1hbmFnZXIuY2xlYXJMaXN0KHRoaXMudHlwZSksdGhpcy5zeW5jUGxheWxpc3RTdGF0ZShgY2xlYXIke3RoaXMudHlwZX1QbGF5bGlzdGApfSl9fTt2YXIgX2k9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnNkaz1lO3RoaXMuc2V0TG9jYWxseT10fWdldCBzZGtTZXNzaW9uU3RvcmUoKXtyZXR1cm4gdGhpcy5zZGsuZ2V0U2Vzc2lvblN0b3JlKCl9c2V0KGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldHt2YWx1ZTppfT15aWVsZCB0aGlzLnNka1Nlc3Npb25TdG9yZS5zZXQoU3RyaW5nKGUpLHQpO3RoaXMuc2V0TG9jYWxseSh7a2V5OmUsdmFsdWU6aX0pfSl9b2JzZXJ2ZShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9QXJyYXkuaXNBcnJheShlKT9lLm1hcChpPT5TdHJpbmcoaSkpOltTdHJpbmcoZSldO3lpZWxkIHRoaXMuc2RrU2Vzc2lvblN0b3JlLm9ic2VydmUodCl9KX11bm9ic2VydmUoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PUFycmF5LmlzQXJyYXkoZSk/ZS5tYXAoaT0+U3RyaW5nKGkpKTpbU3RyaW5nKGUpXTt5aWVsZCB0aGlzLnNka1Nlc3Npb25TdG9yZS51bm9ic2VydmUodCl9KX19O3ZhciBOaT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuVEFHPVwiW0JlYW1TcGVha2VyTGFiZWxzTG9nZ2VyXVwiO3RoaXMuaW50ZXJ2YWxNcz0xMDAsdGhpcy5zaG91bGRNb25pdG9yPSExLHRoaXMuaGFzU3RhcnRlZD0hMSx0aGlzLnVuc3Vicz1bXSx0aGlzLmFuYWx5c2Vycz17fSx0aGlzLnN0b3JlPWUsdGhpcy5hY3Rpb25zPXR9c3RhcnQoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYodGhpcy5oYXNTdGFydGVkKXJldHVybjt0aGlzLmhhc1N0YXJ0ZWQ9ITAsYi5kKFwic3RhcnRpbmcgYXVkaW8gbGV2ZWwgbW9uaXRvciBmb3IgcmVtb3RlIHBlZXJzXCIsdGhpcy5zdG9yZSk7bGV0IGU9dGhpcy5zdG9yZS5nZXRTdGF0ZShCZSk7Yi5kKFwic3RhcnRpbmcgYXVkaW8gbGV2ZWxzIGlzIGNvbm5lY3RlZCB0byByb29tXCIsZSksZSYmKHlpZWxkIHRoaXMubW9uaXRvckF1ZGlvTGV2ZWxzKCkpO2xldCB0PXRoaXMuc3RvcmUuc3Vic2NyaWJlKHRoaXMubW9uaXRvckF1ZGlvTGV2ZWxzLmJpbmQodGhpcyksQmUpO3RoaXMudW5zdWJzLnB1c2godCl9KX1zdG9wKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RoaXMuaGFzU3RhcnRlZCYmKHRoaXMuaGFzU3RhcnRlZD0hMSx0aGlzLnNob3VsZE1vbml0b3I9ITEsdGhpcy51bnN1YnMuZm9yRWFjaChlPT5lKCkpLGIuZChcInN0b3BwZWQgYXVkaW8gbGV2ZWwgbW9uaXRvciBmb3IgcmVtb3RlIHBlZXJzXCIpKX0pfW1vbml0b3JBdWRpb0xldmVscygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZighdGhpcy5zdG9yZS5nZXRTdGF0ZShCZSkpe3RoaXMuc2hvdWxkTW9uaXRvciYmKGIuaShcInJvb20gbm8gbG9uZ2VyIGNvbm5lY3RlZCwgc3RvcHBpbmcgYXVkaW8gbGV2ZWwgbW9uaXRvcmluZyBmb3IgcmVtb3RlXCIpLHRoaXMuc2hvdWxkTW9uaXRvcj0hMSk7cmV0dXJufWlmKHRoaXMuc2hvdWxkTW9uaXRvcilyZXR1cm47Yi5pKFwibW9uaXRvcmluZyBhdWRpbyBsZXZlbHNcIiksdGhpcy5zaG91bGRNb25pdG9yPSEwO2xldCB0PSgpPT57dGhpcy5zaG91bGRNb25pdG9yPyh0aGlzLmxvZ0FsbFBlZXJzQXVkaW9MZXZlbHMoKSxzZXRUaW1lb3V0KHQsdGhpcy5pbnRlcnZhbE1zKSk6Yi5pKFwic3RvcHBlZCBtb25pdG9yaW5nIGF1ZGlvIGxldmVsc1wiKX07c2V0VGltZW91dCh0LDFlMyl9KX1sb2dBbGxQZWVyc0F1ZGlvTGV2ZWxzKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciByO2lmKCF3aW5kb3cuX190cmlnZ2VyQmVhbUV2ZW50X18pcmV0dXJuO2xldCBlPXRoaXMuc3RvcmUuZ2V0U3RhdGUoa2UpLHQ9ZS5maWx0ZXIocz0+ISFzLmF1ZGlvVHJhY2spO2IuZCh0aGlzLlRBRyxcIlBlZXJzIFdpdGhvdXQgYXVkaW8gdHJhY2tcIixlLmZpbHRlcihzPT4hcy5hdWRpb1RyYWNrKS5tYXAocz0+cy5pZCkuam9pbihcIixcIikpO2xldCBpPVtdO2ZvcihsZXQgcyBvZiB0KXtsZXQgbz10aGlzLmFjdGlvbnMuZ2V0VHJhY2tCeUlkKHMuYXVkaW9UcmFja3x8XCJcIiksbj0ocj1vPT1udWxsP3ZvaWQgMDpvLnN0cmVhbSk9PW51bGw/dm9pZCAwOnIubmF0aXZlU3RyZWFtO2lmKHMuam9pbmVkQXQmJm4pe2xldCBkPXlpZWxkIHRoaXMuZ2V0QXVkaW9MZXZlbChzLG4pO2IuZCh0aGlzLlRBRyxzLmlkLGQpLGQubGV2ZWw+MCYmaS5wdXNoKGQpfX1pZihpLmxlbmd0aD4wKXtsZXQgcz17ZXZlbnQ6XCJhcHAtYXVkaW8tbGV2ZWxcIixkYXRhOml9O2IuZChcImxvZ2dpbmcgYXVkaW8gbGV2ZWxzXCIsSlNPTi5zdHJpbmdpZnkoaSkpLHdpbmRvdy5fX3RyaWdnZXJCZWFtRXZlbnRfXyhKU09OLnN0cmluZ2lmeShzKSl9fSl9Z2V0QXVkaW9MZXZlbChlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0aGlzLmFuYWx5c2Vyc1t0LmlkXXx8KHRoaXMuYW5hbHlzZXJzW3QuaWRdPXRoaXMuY3JlYXRlQW5hbHlzZXJOb2RlKHQpKTtsZXQgaT10aGlzLmFuYWx5c2Vyc1t0LmlkXSxyPXRoaXMuY2FsY3VsYXRlQXVkaW9MZXZlbChpKTtyZXR1cm57cGVlcklkOmUuaWQscGVlck5hbWU6ZS5uYW1lLGxldmVsOnJ9fSl9Y3JlYXRlQW5hbHlzZXJOb2RlKGUpe3RoaXMuYXVkaW9Db250ZXh0fHwodGhpcy5hdWRpb0NvbnRleHQ9bmV3IEF1ZGlvQ29udGV4dCk7bGV0IHQ9dGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTtyZXR1cm4gdGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UoZSkuY29ubmVjdCh0KSx0fWNhbGN1bGF0ZUF1ZGlvTGV2ZWwoZSl7bGV0IHQ9bmV3IFVpbnQ4QXJyYXkoZS5mZnRTaXplKTtlLmdldEJ5dGVUaW1lRG9tYWluRGF0YSh0KTtsZXQgaT0uMDA5LHI9aTtmb3IobGV0IG4gb2YgdClyPU1hdGgubWF4KHIsKG4tMTI4KS8xMjgpO2xldCBzPShNYXRoLmxvZyhpKS1NYXRoLmxvZyhyKSkvTWF0aC5sb2coaSk7cmV0dXJuIE1hdGguY2VpbChNYXRoLm1pbihNYXRoLm1heChzKjEwMCwwKSwxMDApKX19O3ZhciAkYT0yZTQsS2E9MWU0LGR0PXtuYW1lOlwiZGlhZ25vc3RpY3Mtcm9sZVwiLHByaW9yaXR5OjEscHVibGlzaFBhcmFtczp7YWxsb3dlZDpbXCJhdWRpb1wiLFwidmlkZW9cIl0sYXVkaW86e2JpdFJhdGU6MzIsY29kZWM6XCJvcHVzXCJ9LHZpZGVvOntiaXRSYXRlOjEwMCxjb2RlYzpcInZwOFwiLGZyYW1lUmF0ZTozMCxoZWlnaHQ6NzIwLHdpZHRoOjEyODB9LHNjcmVlbjp7Yml0UmF0ZToxMDAsY29kZWM6XCJ2cDhcIixmcmFtZVJhdGU6MTAsaGVpZ2h0OjEwODAsd2lkdGg6MTkyMH19LHN1YnNjcmliZVBhcmFtczp7c3Vic2NyaWJlVG9Sb2xlczpbXSxtYXhTdWJzQml0UmF0ZTozMjAwfSxwZXJtaXNzaW9uczp7YnJvd3NlclJlY29yZGluZzohMSxjaGFuZ2VSb2xlOiExLGVuZFJvb206ITEsaGxzU3RyZWFtaW5nOiExLG11dGU6ITEscG9sbFJlYWQ6ITEscG9sbFdyaXRlOiExLHJlbW92ZU90aGVyczohMSxydG1wU3RyZWFtaW5nOiExLHVubXV0ZTohMX19LHFhPVwiaHR0cHM6Ly8xMDBtcy5saXZlL3Rlc3QtYXVkaW8ud2F2XCI7dmFyIE9pPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5uZXR3b3JrU2NvcmVzPVtdO3RoaXMubGFzdFB1c2hlZEF0PTB9cHVzaFNjb3JlKGUpeyFlfHxlPDB8fCh0aGlzLm5ldHdvcmtTY29yZXMubGVuZ3RoPT09MD8odGhpcy5uZXR3b3JrU2NvcmVzLnB1c2goZSksdGhpcy5sYXN0UHVzaGVkQXQ9RGF0ZS5ub3coKSk6dGhpcy5hZGRQZW5kaW5nQ1FTVGlsbE5vdygpKX1hZGRQZW5kaW5nQ1FTVGlsbE5vdygpe2lmKHRoaXMubmV0d29ya1Njb3Jlcy5sZW5ndGg+MCl7bGV0IGU9KERhdGUubm93KCktdGhpcy5sYXN0UHVzaGVkQXQpLzFlMztmb3IoO2U+MDspdGhpcy5uZXR3b3JrU2NvcmVzLnB1c2godGhpcy5uZXR3b3JrU2NvcmVzW3RoaXMubmV0d29ya1Njb3Jlcy5sZW5ndGgtMV0pLGUtPTE7dGhpcy5sYXN0UHVzaGVkQXQ9RGF0ZS5ub3coKX19Z2V0Q1FTKCl7cmV0dXJuIHRoaXMubmV0d29ya1Njb3Jlcy5yZWR1Y2UoKGUsdCk9PmUrdCwwKS90aGlzLm5ldHdvcmtTY29yZXMubGVuZ3RofX07dmFyIGduPWE9PiEhYSYmIWlzTmFOKGEpLG9lPWE9PmFbYS5sZW5ndGgtMV0sVmU9KGEsZSk9PntsZXQgdD1hLmZpbHRlcihpPT5nbihlKGkpKSk7cmV0dXJuIHQucmVkdWNlKChpLHIpPT5pKyhlKHIpfHwwKSwwKS90Lmxlbmd0aH0seGk9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5zZGs9ZTt0aGlzLnBlZXJTdGF0c0xpc3Q9W107dGhpcy5sb2NhbEF1ZGlvVHJhY2tTdGF0c0xpc3Q9W107dGhpcy5sb2NhbFZpZGVvVHJhY2tTdGF0c0xpc3Q9W107dGhpcy5yZW1vdGVBdWRpb1RyYWNrU3RhdHNMaXN0PVtdO3RoaXMucmVtb3RlVmlkZW9UcmFja1N0YXRzTGlzdD1bXX1oYW5kbGVTdGF0c1VwZGF0ZShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIG4sZCx1LHAsaCxULGcsZjtsZXQgdD1lLmdldExvY2FsUGVlclN0YXRzKCk7dCYmdGhpcy5wZWVyU3RhdHNMaXN0LnB1c2godCk7bGV0IGk9KHU9KGQ9KG49dGhpcy5zZGsuZ2V0TG9jYWxQZWVyKCkpPT1udWxsP3ZvaWQgMDpuLmF1ZGlvVHJhY2spPT1udWxsP3ZvaWQgMDpkLm5hdGl2ZVRyYWNrKT09bnVsbD92b2lkIDA6dS5pZCxyPShUPShoPShwPXRoaXMuc2RrLmdldExvY2FsUGVlcigpKT09bnVsbD92b2lkIDA6cC52aWRlb1RyYWNrKT09bnVsbD92b2lkIDA6aC5uYXRpdmVUcmFjayk9PW51bGw/dm9pZCAwOlQuaWQscz1lLmdldExvY2FsVHJhY2tTdGF0cygpO3MmJihpJiZ0aGlzLmxvY2FsQXVkaW9UcmFja1N0YXRzTGlzdC5wdXNoKHNbaV0pLHImJnRoaXMubG9jYWxWaWRlb1RyYWNrU3RhdHNMaXN0LnB1c2goc1tyXSkpO2xldCBvPXlpZWxkKGY9KGc9dGhpcy5zZGsuZ2V0V2VicnRjSW50ZXJuYWxzKCkpPT1udWxsP3ZvaWQgMDpnLmdldFN1YnNjcmliZVBlZXJDb25uZWN0aW9uKCkpPT1udWxsP3ZvaWQgMDpmLmdldFN0YXRzKCk7bz09bnVsbHx8by5mb3JFYWNoKEU9PntpZihFLnR5cGU9PT1cImluYm91bmQtcnRwXCIpe2xldCB2PUUua2luZD09PVwiYXVkaW9cIj90aGlzLnJlbW90ZUF1ZGlvVHJhY2tTdGF0c0xpc3Q6dGhpcy5yZW1vdGVWaWRlb1RyYWNrU3RhdHNMaXN0LFI9SHQoXCJieXRlc1JlY2VpdmVkXCIsRSxvZSh2KSk7di5wdXNoKE0obSh7fSxFKSx7Yml0cmF0ZTpSfSkpfX0pfSl9YnVpbGRSZXBvcnQoKXt2YXIgRSx2LFIsJCx1ZSxnZSxwZSxTdCxocyxtcztsZXQgZT0oRT1vZSh0aGlzLnBlZXJTdGF0c0xpc3QpKT09bnVsbD92b2lkIDA6RS5wdWJsaXNoLHQ9KHY9b2UodGhpcy5wZWVyU3RhdHNMaXN0KSk9PW51bGw/dm9pZCAwOnYuc3Vic2NyaWJlLGk9ZSE9bnVsbCYmZS5yZXNwb25zZXNSZWNlaXZlZD8oKGU9PW51bGw/dm9pZCAwOmUudG90YWxSb3VuZFRyaXBUaW1lKXx8MCkvZS5yZXNwb25zZXNSZWNlaXZlZDowLHI9dCE9bnVsbCYmdC5yZXNwb25zZXNSZWNlaXZlZD8oKHQ9PW51bGw/dm9pZCAwOnQudG90YWxSb3VuZFRyaXBUaW1lKXx8MCkvdC5yZXNwb25zZXNSZWNlaXZlZDowLHM9TnVtYmVyKCgoaStyKS8yKjFlMykudG9GaXhlZCgyKSksbz0oKFI9b2UodGhpcy5yZW1vdGVBdWRpb1RyYWNrU3RhdHNMaXN0KSk9PW51bGw/dm9pZCAwOlIucGFja2V0c1JlY2VpdmVkKXx8MCxuPSgoJD1vZSh0aGlzLnJlbW90ZVZpZGVvVHJhY2tTdGF0c0xpc3QpKT09bnVsbD92b2lkIDA6JC5wYWNrZXRzUmVjZWl2ZWQpfHwwLGQ9dGhpcy5sb2NhbEF1ZGlvVHJhY2tTdGF0c0xpc3QubWFwKEI9PkI/VmUoT2JqZWN0LnZhbHVlcyhCKSx0ZT0+dGUuYml0cmF0ZSk6MCksdT10aGlzLmxvY2FsVmlkZW9UcmFja1N0YXRzTGlzdC5tYXAoQj0+Qj9WZShPYmplY3QudmFsdWVzKEIpLHRlPT50ZS5iaXRyYXRlKTowKSxwPSgodWU9b2UodGhpcy5yZW1vdGVBdWRpb1RyYWNrU3RhdHNMaXN0KSk9PW51bGw/dm9pZCAwOnVlLmppdHRlcil8fDAsaD0oKGdlPW9lKHRoaXMucmVtb3RlVmlkZW9UcmFja1N0YXRzTGlzdCkpPT1udWxsP3ZvaWQgMDpnZS5qaXR0ZXIpfHwwLFQ9TWF0aC5tYXgocCxoKSxnPW9lKHRoaXMubG9jYWxBdWRpb1RyYWNrU3RhdHNMaXN0KSxmPW9lKHRoaXMubG9jYWxWaWRlb1RyYWNrU3RhdHNMaXN0KTtyZXR1cm57Y29tYmluZWQ6e3JvdW5kVHJpcFRpbWU6cyxwYWNrZXRzUmVjZWl2ZWQ6bytuLHBhY2tldHNMb3N0Oih0PT1udWxsP3ZvaWQgMDp0LnBhY2tldHNMb3N0KXx8MCxieXRlc1NlbnQ6KGU9PW51bGw/dm9pZCAwOmUuYnl0ZXNTZW50KXx8MCxieXRlc1JlY2VpdmVkOih0PT1udWxsP3ZvaWQgMDp0LmJ5dGVzUmVjZWl2ZWQpfHwwLGJpdHJhdGVTZW50OlZlKHRoaXMucGVlclN0YXRzTGlzdCxCPT57dmFyIHRlO3JldHVybih0ZT1CLnB1Ymxpc2gpPT1udWxsP3ZvaWQgMDp0ZS5iaXRyYXRlfSksYml0cmF0ZVJlY2VpdmVkOlZlKHRoaXMucGVlclN0YXRzTGlzdCxCPT57dmFyIHRlO3JldHVybih0ZT1CLnN1YnNjcmliZSk9PW51bGw/dm9pZCAwOnRlLmJpdHJhdGV9KSxqaXR0ZXI6VH0sYXVkaW86e3JvdW5kVHJpcFRpbWU6cyxwYWNrZXRzUmVjZWl2ZWQ6byxwYWNrZXRzTG9zdDooKHBlPW9lKHRoaXMucmVtb3RlQXVkaW9UcmFja1N0YXRzTGlzdCkpPT1udWxsP3ZvaWQgMDpwZS5wYWNrZXRzTG9zdCl8fDAsYnl0ZXNSZWNlaXZlZDooKFN0PW9lKHRoaXMucmVtb3RlQXVkaW9UcmFja1N0YXRzTGlzdCkpPT1udWxsP3ZvaWQgMDpTdC5ieXRlc1JlY2VpdmVkKXx8MCxiaXRyYXRlU2VudDpWZShkLEI9PkIpLGJpdHJhdGVSZWNlaXZlZDpWZSh0aGlzLnJlbW90ZUF1ZGlvVHJhY2tTdGF0c0xpc3QsQj0+Qi5iaXRyYXRlKSxieXRlc1NlbnQ6Zz9PYmplY3QudmFsdWVzKGcpLnJlZHVjZSgoQix0ZSk9PkIrKHRlLmJ5dGVzU2VudHx8MCksMCk6MCxqaXR0ZXI6cH0sdmlkZW86e3JvdW5kVHJpcFRpbWU6cyxwYWNrZXRzTG9zdDooKGhzPW9lKHRoaXMucmVtb3RlVmlkZW9UcmFja1N0YXRzTGlzdCkpPT1udWxsP3ZvaWQgMDpocy5wYWNrZXRzTG9zdCl8fDAsYnl0ZXNSZWNlaXZlZDooKG1zPW9lKHRoaXMucmVtb3RlVmlkZW9UcmFja1N0YXRzTGlzdCkpPT1udWxsP3ZvaWQgMDptcy5ieXRlc1JlY2VpdmVkKXx8MCxwYWNrZXRzUmVjZWl2ZWQ6bixiaXRyYXRlU2VudDpWZSh1LEI9PkIpLGJpdHJhdGVSZWNlaXZlZDpWZSh0aGlzLnJlbW90ZVZpZGVvVHJhY2tTdGF0c0xpc3QsQj0+Qi5iaXRyYXRlKSxieXRlc1NlbnQ6Zj9PYmplY3QudmFsdWVzKGYpLnJlZHVjZSgoQix0ZSk9PkIrKHRlLmJ5dGVzU2VudHx8MCksMCk6MCxqaXR0ZXI6aH19fX07dmFyIFRuPShuPT4obltuLlNUQVJUSU5HPTBdPVwiU1RBUlRJTkdcIixuW24uSU5JVF9GRVRDSEVEPTFdPVwiSU5JVF9GRVRDSEVEXCIsbltuLlNJR05BTF9DT05ORUNURUQ9Ml09XCJTSUdOQUxfQ09OTkVDVEVEXCIsbltuLklDRV9FU1RBQkxJU0hFRD0zXT1cIklDRV9FU1RBQkxJU0hFRFwiLG5bbi5NRURJQV9DQVBUVVJFRD00XT1cIk1FRElBX0NBUFRVUkVEXCIsbltuLk1FRElBX1BVQkxJU0hFRD01XT1cIk1FRElBX1BVQkxJU0hFRFwiLG5bbi5DT01QTEVURUQ9Nl09XCJDT01QTEVURURcIixuKSkoVG58fHt9KTt2YXIgamEsSmEsVWk9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkscixzPSRhKXt0aGlzLnNkaz1lO3RoaXMuc2RrTGlzdGVuZXI9dDt0aGlzLnByb2dyZXNzQ2FsbGJhY2s9aTt0aGlzLmNvbXBsZXRpb25DYWxsYmFjaz1yO3RoaXMuY29ubmVjdGl2aXR5RHVyYXRpb249czt0aGlzLndzQ29ubmVjdGVkPSExO3RoaXMuaW5pdENvbm5lY3RlZD0hMTt0aGlzLmlzUHVibGlzaElDRUNvbm5lY3RlZD0hMTt0aGlzLmlzU3Vic2NyaWJlSUNFQ29ubmVjdGVkPSExO3RoaXMuZ2F0aGVyZWRQdWJsaXNoSUNFQ2FuZGlkYXRlcz1bXTt0aGlzLmdhdGhlcmVkU3Vic2NyaWJlSUNFQ2FuZGlkYXRlcz1bXTt0aGlzLmVycm9ycz1bXTt0aGlzLmlzQXVkaW9UcmFja0NhcHR1cmVkPSExO3RoaXMuaXNWaWRlb1RyYWNrQ2FwdHVyZWQ9ITE7dGhpcy5pc0F1ZGlvVHJhY2tQdWJsaXNoZWQ9ITE7dGhpcy5pc1ZpZGVvVHJhY2tQdWJsaXNoZWQ9ITE7dGhpcy5jcXNDYWxjdWxhdG9yPW5ldyBPaTt0aGlzLnRpbWVzdGFtcD1EYXRlLm5vdygpO3RoaXMub25Sb29tVXBkYXRlPXRoaXMuc2RrTGlzdGVuZXIub25Sb29tVXBkYXRlLmJpbmQodGhpcy5zZGtMaXN0ZW5lcik7dGhpcy5vblBlZXJVcGRhdGU9dGhpcy5zZGtMaXN0ZW5lci5vblBlZXJVcGRhdGUuYmluZCh0aGlzLnNka0xpc3RlbmVyKTt0aGlzLm9uTWVzc2FnZVJlY2VpdmVkPXRoaXMuc2RrTGlzdGVuZXIub25NZXNzYWdlUmVjZWl2ZWQuYmluZCh0aGlzLnNka0xpc3RlbmVyKTt0aGlzLm9uUmVjb25uZWN0ZWQ9dGhpcy5zZGtMaXN0ZW5lci5vblJlY29ubmVjdGVkLmJpbmQodGhpcy5zZGtMaXN0ZW5lcik7dGhpcy5vblJvbGVDaGFuZ2VSZXF1ZXN0PXRoaXMuc2RrTGlzdGVuZXIub25Sb2xlQ2hhbmdlUmVxdWVzdC5iaW5kKHRoaXMuc2RrTGlzdGVuZXIpO3RoaXMub25Sb2xlVXBkYXRlPXRoaXMuc2RrTGlzdGVuZXIub25Sb2xlVXBkYXRlLmJpbmQodGhpcy5zZGtMaXN0ZW5lcik7dGhpcy5vbkNoYW5nZVRyYWNrU3RhdGVSZXF1ZXN0PXRoaXMuc2RrTGlzdGVuZXIub25DaGFuZ2VUcmFja1N0YXRlUmVxdWVzdC5iaW5kKHRoaXMuc2RrTGlzdGVuZXIpO3RoaXMub25DaGFuZ2VNdWx0aVRyYWNrU3RhdGVSZXF1ZXN0PXRoaXMuc2RrTGlzdGVuZXIub25DaGFuZ2VNdWx0aVRyYWNrU3RhdGVSZXF1ZXN0LmJpbmQodGhpcy5zZGtMaXN0ZW5lcik7dGhpcy5vblJlbW92ZWRGcm9tUm9vbT10aGlzLnNka0xpc3RlbmVyLm9uUmVtb3ZlZEZyb21Sb29tLmJpbmQodGhpcy5zZGtMaXN0ZW5lcik7dGhpcy5vbk5ldHdvcmtRdWFsaXR5PShqYT10aGlzLnNka0xpc3RlbmVyLm9uTmV0d29ya1F1YWxpdHkpPT1udWxsP3ZvaWQgMDpqYS5iaW5kKHRoaXMuc2RrTGlzdGVuZXIpO3RoaXMub25QcmV2aWV3PXRoaXMuc2RrTGlzdGVuZXIub25QcmV2aWV3LmJpbmQodGhpcy5zZGtMaXN0ZW5lcik7dGhpcy5vbkRldmljZUNoYW5nZT0oSmE9dGhpcy5zZGtMaXN0ZW5lci5vbkRldmljZUNoYW5nZSk9PW51bGw/dm9pZCAwOkphLmJpbmQodGhpcy5zZGtMaXN0ZW5lcik7dGhpcy5vblNlc3Npb25TdG9yZVVwZGF0ZT10aGlzLnNka0xpc3RlbmVyLm9uU2Vzc2lvblN0b3JlVXBkYXRlLmJpbmQodGhpcy5zZGtMaXN0ZW5lcik7dGhpcy5vblBvbGxzVXBkYXRlPXRoaXMuc2RrTGlzdGVuZXIub25Qb2xsc1VwZGF0ZS5iaW5kKHRoaXMuc2RrTGlzdGVuZXIpO3RoaXMub25XaGl0ZWJvYXJkVXBkYXRlPXRoaXMuc2RrTGlzdGVuZXIub25XaGl0ZWJvYXJkVXBkYXRlLmJpbmQodGhpcy5zZGtMaXN0ZW5lcik7dGhpcy5oYW5kbGVDb25uZWN0aW9uUXVhbGl0eVVwZGF0ZT1lPT57bGV0IHQ9ZS5maW5kKGk9Pnt2YXIgcixzO3JldHVybiBpLnBlZXJJRD09PSgocz0ocj10aGlzLnNkayk9PW51bGw/dm9pZCAwOnIuc3RvcmUuZ2V0TG9jYWxQZWVyKCkpPT1udWxsP3ZvaWQgMDpzLnBlZXJJZCl9KTt0aGlzLmNxc0NhbGN1bGF0b3IucHVzaFNjb3JlKHQ9PW51bGw/dm9pZCAwOnQuZG93bmxpbmtRdWFsaXR5KX07dGhpcy5zdGF0c0NvbGxlY3Rvcj1uZXcgeGkoZSksdGhpcy5zdGF0ZT0wfWdldCBzdGF0ZSgpe3JldHVybiB0aGlzLl9zdGF0ZX1zZXQgc3RhdGUoZSl7dmFyIHQ7ZT09PXZvaWQgMHx8dGhpcy5fc3RhdGUhPT12b2lkIDAmJmU8dGhpcy5fc3RhdGV8fCh0aGlzLl9zdGF0ZT1lLCh0PXRoaXMucHJvZ3Jlc3NDYWxsYmFjayk9PW51bGx8fHQuY2FsbCh0aGlzLGUpKX1vbklDRVN1Y2Nlc3MoZSl7ZT90aGlzLmlzUHVibGlzaElDRUNvbm5lY3RlZD0hMDp0aGlzLmlzU3Vic2NyaWJlSUNFQ29ubmVjdGVkPSEwLHRoaXMuaXNQdWJsaXNoSUNFQ29ubmVjdGVkJiZ0aGlzLmlzU3Vic2NyaWJlSUNFQ29ubmVjdGVkJiYodGhpcy5zdGF0ZT0zKX1vblNlbGVjdGVkSUNFQ2FuZGlkYXRlUGFpckNoYW5nZShlLHQpe3Q/dGhpcy5zZWxlY3RlZFB1Ymxpc2hJQ0VDYW5kaWRhdGU9ZTp0aGlzLnNlbGVjdGVkU3Vic2NyaWJlSUNFQ2FuZGlkYXRlPWV9b25JQ0VDYW5kaWRhdGUoZSx0KXt0P3RoaXMuZ2F0aGVyZWRQdWJsaXNoSUNFQ2FuZGlkYXRlcy5wdXNoKGUpOnRoaXMuZ2F0aGVyZWRTdWJzY3JpYmVJQ0VDYW5kaWRhdGVzLnB1c2goZSl9b25NZWRpYVB1Ymxpc2hlZChlKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJhdWRpb1wiOnRoaXMuaXNBdWRpb1RyYWNrUHVibGlzaGVkPSEwO2JyZWFrO2Nhc2VcInZpZGVvXCI6dGhpcy5pc1ZpZGVvVHJhY2tQdWJsaXNoZWQ9ITA7YnJlYWs7ZGVmYXVsdDpicmVha310aGlzLmlzVmlkZW9UcmFja1B1Ymxpc2hlZCYmdGhpcy5pc0F1ZGlvVHJhY2tQdWJsaXNoZWQmJih0aGlzLnN0YXRlPTUpfW9uSW5pdFN1Y2Nlc3MoZSl7dGhpcy53ZWJzb2NrZXRVUkw9ZSx0aGlzLmluaXRDb25uZWN0ZWQ9ITAsdGhpcy5zdGF0ZT0xfW9uU2lnbmFsbGluZ1N1Y2Nlc3MoKXt0aGlzLndzQ29ubmVjdGVkPSEwLHRoaXMuc3RhdGU9Mn1vbkpvaW4oZSl7dmFyIHQsaTt0aGlzLnNka0xpc3RlbmVyLm9uSm9pbihlKSwodD10aGlzLnNkay5nZXRXZWJydGNJbnRlcm5hbHMoKSk9PW51bGx8fHQub25TdGF0c0NoYW5nZShyPT50aGlzLnN0YXRzQ29sbGVjdG9yLmhhbmRsZVN0YXRzVXBkYXRlKHIpKSwoaT10aGlzLnNkay5nZXRXZWJydGNJbnRlcm5hbHMoKSk9PW51bGx8fGkuc3RhcnQoKSx0aGlzLmNsZWFudXBUaW1lcj13aW5kb3cuc2V0VGltZW91dCgoKT0+e3RoaXMuY2xlYW51cEFuZFJlcG9ydCgpfSx0aGlzLmNvbm5lY3Rpdml0eUR1cmF0aW9uKX1vbkVycm9yKGUpe3RoaXMuc2RrTGlzdGVuZXIub25FcnJvcihlKSx0aGlzLmVycm9ycy5wdXNoKGUpLGUhPW51bGwmJmUuaXNUZXJtaW5hbCYmdGhpcy5jbGVhbnVwQW5kUmVwb3J0KCl9b25UcmFja1VwZGF0ZShlLHQsaSl7aWYodGhpcy5zZGtMaXN0ZW5lci5vblRyYWNrVXBkYXRlKGUsdCxpKSxpLmlzTG9jYWwmJmU9PT0wKXtzd2l0Y2godC50eXBlKXtjYXNlXCJhdWRpb1wiOnRoaXMuaXNBdWRpb1RyYWNrQ2FwdHVyZWQ9ITA7YnJlYWs7Y2FzZVwidmlkZW9cIjp0aGlzLmlzVmlkZW9UcmFja0NhcHR1cmVkPSEwO2JyZWFrO2RlZmF1bHQ6YnJlYWt9dGhpcy5pc1ZpZGVvVHJhY2tDYXB0dXJlZCYmdGhpcy5pc0F1ZGlvVHJhY2tDYXB0dXJlZCYmKHRoaXMuc3RhdGU9NCl9fW9uUmVjb25uZWN0aW5nKGUpe3RoaXMuc2RrTGlzdGVuZXIub25SZWNvbm5lY3RpbmcoZSksdGhpcy5jcXNDYWxjdWxhdG9yLmFkZFBlbmRpbmdDUVNUaWxsTm93KCl9Y2xlYW51cEFuZFJlcG9ydCgpe3ZhciBlO2NsZWFyVGltZW91dCh0aGlzLmNsZWFudXBUaW1lciksdGhpcy5jbGVhbnVwVGltZXI9dm9pZCAwLHRoaXMuc3RhdGU9PT01JiYodGhpcy5zdGF0ZT02KSwoZT10aGlzLmNvbXBsZXRpb25DYWxsYmFjayk9PW51bGx8fGUuY2FsbCh0aGlzLHRoaXMuYnVpbGRSZXBvcnQoKSksdGhpcy5zZGsubGVhdmUoKX1idWlsZFJlcG9ydCgpe3RoaXMuY3FzQ2FsY3VsYXRvci5hZGRQZW5kaW5nQ1FTVGlsbE5vdygpO2xldCBlPXRoaXMuY3FzQ2FsY3VsYXRvci5nZXRDUVMoKSx0PXRoaXMuc3RhdHNDb2xsZWN0b3IuYnVpbGRSZXBvcnQoKTtyZXR1cm57dGVzdFRpbWVzdGFtcDp0aGlzLnRpbWVzdGFtcCxjb25uZWN0aXZpdHlTdGF0ZTp0aGlzLnN0YXRlLGVycm9yczp0aGlzLmVycm9ycyxzaWduYWxsaW5nUmVwb3J0Ontpc0Nvbm5lY3RlZDp0aGlzLndzQ29ubmVjdGVkLGlzSW5pdENvbm5lY3RlZDp0aGlzLmluaXRDb25uZWN0ZWQsd2Vic29ja2V0VXJsOnRoaXMud2Vic29ja2V0VVJMfSxtZWRpYVNlcnZlclJlcG9ydDp7c3RhdHM6dCxjb25uZWN0aW9uUXVhbGl0eVNjb3JlOmUsaXNQdWJsaXNoSUNFQ29ubmVjdGVkOnRoaXMuaXNQdWJsaXNoSUNFQ29ubmVjdGVkLGlzU3Vic2NyaWJlSUNFQ29ubmVjdGVkOnRoaXMuaXNTdWJzY3JpYmVJQ0VDb25uZWN0ZWQscHVibGlzaElDRUNhbmRpZGF0ZVBhaXJTZWxlY3RlZDp0aGlzLnNlbGVjdGVkUHVibGlzaElDRUNhbmRpZGF0ZSxzdWJzY3JpYmVJQ0VDYW5kaWRhdGVQYWlyU2VsZWN0ZWQ6dGhpcy5zZWxlY3RlZFN1YnNjcmliZUlDRUNhbmRpZGF0ZSxwdWJsaXNoSWNlQ2FuZGlkYXRlc0dhdGhlcmVkOnRoaXMuZ2F0aGVyZWRQdWJsaXNoSUNFQ2FuZGlkYXRlcyxzdWJzY3JpYmVJY2VDYW5kaWRhdGVzR2F0aGVyZWQ6dGhpcy5nYXRoZXJlZFN1YnNjcmliZUlDRUNhbmRpZGF0ZXN9fX19O3ZhciBKZT1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLnJlY29yZGluZz17c2VydmVyOntydW5uaW5nOiExfSxicm93c2VyOntydW5uaW5nOiExfSxobHM6e3J1bm5pbmc6ITF9fTt0aGlzLnJ0bXA9e3J1bm5pbmc6ITF9O3RoaXMuaGxzPXtydW5uaW5nOiExLHZhcmlhbnRzOltdfTt0aGlzLnRyYW5zY3JpcHRpb25zPVtdO3RoaXMuaWQ9ZX19O3ZhciBCaT0oYSxlLHQpPT5jKHZvaWQgMCxudWxsLGZ1bmN0aW9uKigpe2xldCByPUVycm9yKFwic29tZXRoaW5nIHdlbnQgd3JvbmcgZHVyaW5nIGZldGNoXCIpO2ZvcihsZXQgcz0wO3M8NDtzKyspdHJ5e2xldCBvPXlpZWxkIGZldGNoKGEsZSksbj15aWVsZCBvLmNsb25lKCkuanNvbigpO2lmKHQmJnQubGVuZ3RoJiYhby5vayYmdC5pbmNsdWRlcyhuLmNvZGUpKXRocm93IFMuQVBJRXJyb3JzLlNlcnZlckVycm9ycyhuLmNvZGUsXCJHRVRfVE9LRU5cIixuLm1lc3NhZ2UsITEpO3JldHVybiBvfWNhdGNoKG8pe3I9b310aHJvd1tcIkZhaWxlZCB0byBmZXRjaFwiLFwiTmV0d29ya0Vycm9yXCJdLnNvbWUocz0+ci5tZXNzYWdlLmluY2x1ZGVzKHMpKT9TLkFQSUVycm9ycy5FbmRwb2ludFVucmVhY2hhYmxlKFwiR0VUX1RPS0VOXCIsci5tZXNzYWdlKTpyfSk7dmFyIFV0PWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5zZGs9ZTt0aGlzLnNka0xpc3RlbmVyPXQ7dGhpcy5yZWNvcmRlZEF1ZGlvPXFhO3RoaXMuc2RrLnNldElzRGlhZ25vc3RpY3MoITApLHRoaXMuaW5pdFNka1dpdGhMb2NhbFBlZXIoKX1nZXQgbG9jYWxQZWVyKCl7dmFyIGU7cmV0dXJuKGU9dGhpcy5zZGspPT1udWxsP3ZvaWQgMDplLnN0b3JlLmdldExvY2FsUGVlcigpfWNoZWNrQnJvd3NlclN1cHBvcnQoKXtrdCgpLHl0KCl9cmVxdWVzdFBlcm1pc3Npb24oZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RyeXtsZXQgdD15aWVsZCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShlKTtyZXR1cm4gdC5nZXRUcmFja3MoKS5mb3JFYWNoKGk9Pmkuc3RvcCgpKSx5aWVsZCB0aGlzLnNkay5kZXZpY2VNYW5hZ2VyLmluaXQoITApLHthdWRpbzp0LmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoPjAsdmlkZW86dC5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aD4wfX1jYXRjaCh0KXt0aHJvdyBfZSh0LHRoaXMuc2RrLmxvY2FsVHJhY2tNYW5hZ2VyLmdldEVycm9yVHlwZSghIWUudmlkZW8sISFlLmF1ZGlvKSl9fSl9c3RhcnRDYW1lcmFDaGVjayhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHMsbyxuLGQ7aWYodGhpcy5pbml0U2RrV2l0aExvY2FsUGVlcigpLCF0aGlzLmxvY2FsUGVlcil0aHJvdyBuZXcgRXJyb3IoXCJMb2NhbCBwZWVyIG5vdCBmb3VuZFwiKTt0aGlzLnNkay5zdG9yZS5zZXRTaW11bGNhc3RFbmFibGVkKCExKSx0aGlzLmxvY2FsUGVlci5yb2xlPU0obSh7fSxkdCkse3B1Ymxpc2hQYXJhbXM6TShtKHt9LGR0LnB1Ymxpc2hQYXJhbXMpLHthbGxvd2VkOltcInZpZGVvXCJdfSl9KTtsZXQgdD1uZXcgeGUoKS52aWRlbyhuZXcgcSgpLmRldmljZUlkKGV8fFwiZGVmYXVsdFwiKS5idWlsZCgpKS5idWlsZCgpLGk9eWllbGQocz10aGlzLnNkayk9PW51bGw/dm9pZCAwOnMubG9jYWxUcmFja01hbmFnZXIuZ2V0TG9jYWxUcmFja3Moe2F1ZGlvOiExLHZpZGVvOiEwfSx0KSxyPWk9PW51bGw/dm9pZCAwOmkuZmluZCh1PT51LnR5cGU9PT1cInZpZGVvXCIpO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIk5vIHZpZGVvIHRyYWNrIGZvdW5kXCIpOyhvPXRoaXMuc2RrKT09bnVsbHx8by5kZXZpY2VNYW5hZ2VyLmluaXQoITApLHRoaXMubG9jYWxQZWVyLnZpZGVvVHJhY2s9ciwoZD0obj10aGlzLnNkayk9PW51bGw/dm9pZCAwOm4ubGlzdGVuZXIpPT1udWxsfHxkLm9uUGVlclVwZGF0ZSg5LFt0aGlzLmxvY2FsUGVlcl0pfSl9c3RvcENhbWVyYUNoZWNrKCl7dmFyIGUsdDsodD0oZT10aGlzLmxvY2FsUGVlcik9PW51bGw/dm9pZCAwOmUudmlkZW9UcmFjayk9PW51bGx8fHQuY2xlYW51cCgpLHRoaXMubG9jYWxQZWVyJiYodGhpcy5sb2NhbFBlZXIudmlkZW9UcmFjaz12b2lkIDApfXN0YXJ0TWljQ2hlY2socyl7cmV0dXJuIGModGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKHtpbnB1dERldmljZTplLG9uRXJyb3I6dCxvblN0b3A6aSx0aW1lOnI9S2F9KXt2YXIgdSxwLGgsVDt0aGlzLmluaXRTZGtXaXRoTG9jYWxQZWVyKGc9Pnt0aGlzLnN0b3BNaWNDaGVjaygpLHQ9PW51bGx8fHQoZyl9KTtsZXQgbz15aWVsZCB0aGlzLmdldExvY2FsQXVkaW9UcmFjayhlKTtpZigodT10aGlzLnNkayk9PW51bGx8fHUuZGV2aWNlTWFuYWdlci5pbml0KCEwKSwhdGhpcy5sb2NhbFBlZXIpdGhyb3cgbmV3IEVycm9yKFwiTG9jYWwgcGVlciBub3QgZm91bmRcIik7aWYoIW8pdGhyb3cgbmV3IEVycm9yKFwiTm8gYXVkaW8gdHJhY2sgZm91bmRcIik7dGhpcy5sb2NhbFBlZXIuYXVkaW9UcmFjaz1vLChwPXRoaXMuc2RrKT09bnVsbHx8cC5pbml0UHJldmlld1RyYWNrQXVkaW9MZXZlbE1vbml0b3IoKSwoVD0oaD10aGlzLnNkayk9PW51bGw/dm9pZCAwOmgubGlzdGVuZXIpPT1udWxsfHxULm9uUGVlclVwZGF0ZSg5LFt0aGlzLmxvY2FsUGVlcl0pLHRoaXMubWVkaWFSZWNvcmRlcj1uZXcgTWVkaWFSZWNvcmRlcihvLnN0cmVhbS5uYXRpdmVTdHJlYW0pO2xldCBuPVtdO3RoaXMubWVkaWFSZWNvcmRlci5vbmRhdGFhdmFpbGFibGU9ZnVuY3Rpb24oZyl7bi5wdXNoKGcuZGF0YSl9LHRoaXMubWVkaWFSZWNvcmRlci5vbnN0b3A9KCk9Pnt2YXIgZixFO2xldCBnPW5ldyBCbG9iKG4se3R5cGU6KGY9dGhpcy5tZWRpYVJlY29yZGVyKT09bnVsbD92b2lkIDA6Zi5taW1lVHlwZX0pO3RoaXMucmVjb3JkZWRBdWRpbz1VUkwuY3JlYXRlT2JqZWN0VVJMKGcpLChFPXRoaXMub25TdG9wTWljQ2hlY2spPT1udWxsfHxFLmNhbGwodGhpcyl9LHRoaXMubWVkaWFSZWNvcmRlci5zdGFydCgpO2xldCBkPXNldFRpbWVvdXQoKCk9Pnt0aGlzLnN0b3BNaWNDaGVjaygpfSxyKTt0aGlzLm9uU3RvcE1pY0NoZWNrPSgpPT57Y2xlYXJUaW1lb3V0KGQpLGk9PW51bGx8fGkoKX19KX1zdG9wTWljQ2hlY2soKXt2YXIgZSx0LGk7KGU9dGhpcy5tZWRpYVJlY29yZGVyKT09bnVsbHx8ZS5zdG9wKCksKGk9KHQ9dGhpcy5sb2NhbFBlZXIpPT1udWxsP3ZvaWQgMDp0LmF1ZGlvVHJhY2spPT1udWxsfHxpLmNsZWFudXAoKSx0aGlzLmxvY2FsUGVlciYmKHRoaXMubG9jYWxQZWVyLmF1ZGlvVHJhY2s9dm9pZCAwKX1nZXRSZWNvcmRlZEF1ZGlvKCl7cmV0dXJuIHRoaXMucmVjb3JkZWRBdWRpb31zdGFydENvbm5lY3Rpdml0eUNoZWNrKGUsdCxpLHIpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZighdGhpcy5zZGspdGhyb3cgbmV3IEVycm9yKFwiU0RLIG5vdCBmb3VuZFwiKTt0aGlzLmNvbm5lY3Rpdml0eUNoZWNrPW5ldyBVaSh0aGlzLnNkayx0aGlzLnNka0xpc3RlbmVyLGUsdCxyKTtsZXQgcz15aWVsZCB0aGlzLmdldEF1dGhUb2tlbihpKTt5aWVsZCB0aGlzLnNkay5sZWF2ZSgpLHlpZWxkIHRoaXMuc2RrLmpvaW4oe2F1dGhUb2tlbjpzLHVzZXJOYW1lOlwiZGlhZ25vc3RpY3MtdGVzdFwifSx0aGlzLmNvbm5lY3Rpdml0eUNoZWNrKSx0aGlzLnNkay5hZGRDb25uZWN0aW9uUXVhbGl0eUxpc3RlbmVyKHtvbkNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlOm89Pnt2YXIgbjsobj10aGlzLmNvbm5lY3Rpdml0eUNoZWNrKT09bnVsbHx8bi5oYW5kbGVDb25uZWN0aW9uUXVhbGl0eVVwZGF0ZShvKX19KX0pfXN0b3BDb25uZWN0aXZpdHlDaGVjaygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgZTtyZXR1cm4oZT10aGlzLmNvbm5lY3Rpdml0eUNoZWNrKT09bnVsbD92b2lkIDA6ZS5jbGVhbnVwQW5kUmVwb3J0KCl9KX1pbml0U2RrV2l0aExvY2FsUGVlcihlKXt2YXIgcixzLG87dGhpcy5zZGtMaXN0ZW5lciYmKChyPXRoaXMuc2RrKT09bnVsbHx8ci5pbml0U3RvcmVBbmRNYW5hZ2VycyhNKG0oe30sdGhpcy5zZGtMaXN0ZW5lcikse29uRXJyb3I6bj0+e2U9PW51bGx8fGUobiksdGhpcy5zZGtMaXN0ZW5lci5vbkVycm9yKG4pfX0pKSk7bGV0IHQ9bmV3IHFlKHtuYW1lOlwiZGlhZ25vc3RpY3MtcGVlclwiLHJvbGU6ZHQsdHlwZTpcInJlZ3VsYXJcIn0pOyhzPXRoaXMuc2RrKT09bnVsbHx8cy5zdG9yZS5hZGRQZWVyKHQpO2xldCBpPW5ldyBKZShcImRpYWdub3N0aWNzLXJvb21cIik7dGhpcy5zZGsuc3RvcmUuc2V0Um9vbShpKSx0aGlzLnNka0xpc3RlbmVyLm9uUm9vbVVwZGF0ZShcIlJPT01fUEVFUl9DT1VOVF9VUERBVEVEXCIsaSksKG89dGhpcy5zZGspPT1udWxsfHxvLmRldmljZU1hbmFnZXIuaW5pdCghMCl9Z2V0QXV0aFRva2VuKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgdD1uZXcgVVJMKFwiaHR0cHM6Ly9hcGkuMTAwbXMubGl2ZS92Mi9kaWFnbm9zdGljcy90b2tlblwiKTtlJiZ0LnNlYXJjaFBhcmFtcy5hcHBlbmQoXCJyZWdpb25cIixlKTtsZXQgaT15aWVsZCBCaSh0LnRvU3RyaW5nKCkse21ldGhvZDpcIkdFVFwifSxbNDI5LDUwMCw1MDEsNTAyLDUwMyw1MDQsNTA1LDUwNiw1MDcsNTA4LDUwOSw1MTAsNTExXSkscj15aWVsZCBpLmpzb24oKTtpZighaS5vayl0aHJvdyBTLkFQSUVycm9ycy5TZXJ2ZXJFcnJvcnMoci5jb2RlLFwiR0VUX1RPS0VOXCIsci5tZXNzYWdlLCExKTtsZXR7dG9rZW46c309cjtpZighcyl0aHJvdyBFcnJvcihyLm1lc3NhZ2UpO3JldHVybiBzfSl9Z2V0TG9jYWxBdWRpb1RyYWNrKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcjtpZighdGhpcy5sb2NhbFBlZXIpcmV0dXJuO3RoaXMubG9jYWxQZWVyLnJvbGU9TShtKHt9LGR0KSx7cHVibGlzaFBhcmFtczpNKG0oe30sZHQucHVibGlzaFBhcmFtcykse2FsbG93ZWQ6W1wiYXVkaW9cIl19KX0pO2xldCB0PW5ldyB4ZSgpLmF1ZGlvKG5ldyBRKCkuZGV2aWNlSWQoZXx8XCJkZWZhdWx0XCIpLmJ1aWxkKCkpLmJ1aWxkKCksaT15aWVsZChyPXRoaXMuc2RrKT09bnVsbD92b2lkIDA6ci5sb2NhbFRyYWNrTWFuYWdlci5nZXRMb2NhbFRyYWNrcyh7YXVkaW86ITAsdmlkZW86ITF9LHQpO3JldHVybiBpPT1udWxsP3ZvaWQgMDppLmZpbmQocz0+cy50eXBlPT09XCJhdWRpb1wiKX0pfX07dmFyIFZpPWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpKXt0aGlzLmlzUm9vbUpvaW5DYWxsZWQ9ITE7dGhpcy5pZ25vcmVkTWVzc2FnZVR5cGVzPVtdO3RoaXMuc2V0UHJvZ3Jlc3M9KHt0eXBlOmUscHJvZ3Jlc3M6dH0pPT57dGhpcy5zZXRTdGF0ZShpPT57aS5wbGF5bGlzdFtlXS5wcm9ncmVzcz10LGkucGxheWxpc3RbZV0uY3VycmVudFRpbWU9dGhpcy5zZGsuZ2V0UGxheWxpc3RNYW5hZ2VyKCkuZ2V0Q3VycmVudFRpbWUoZSl9LFwicGxheWxpc3RQcm9ncmVzc1wiKX07dGhpcy5zeW5jUGxheWxpc3RTdGF0ZT1lPT57dGhpcy5zZXRTdGF0ZSh0PT57T2JqZWN0LmFzc2lnbih0LnBsYXlsaXN0LF8uY29udmVydFBsYXlsaXN0KHRoaXMuc2RrLmdldFBsYXlsaXN0TWFuYWdlcigpKSl9LGUpfTt0aGlzLnNlbmRQZWVyVXBkYXRlTm90aWZpY2F0aW9uPShlLHQpPT57bGV0IGk9dGhpcy5zdG9yZS5nZXRTdGF0ZShlZSh0LnBlZXJJZCkpLHI9SGlbZV18fFwicGVlclVwZGF0ZVwiO2lmKGU9PT04KXRoaXMuc3luY1Jvb21TdGF0ZShyKSx0aGlzLnVwZGF0ZU1pZENhbGxQcmV2aWV3Um9vbVN0YXRlKGUsdCk7ZWxzZSBpZihbMCwxXS5pbmNsdWRlcyhlKSl0aGlzLnN5bmNSb29tU3RhdGUociksaXx8KGk9dGhpcy5zdG9yZS5nZXRTdGF0ZShlZSh0LnBlZXJJZCkpKTtlbHNlIGlmKFsxMiwxMywxNF0uaW5jbHVkZXMoZSkpdGhpcy5zeW5jUm9vbVN0YXRlKHIpLGl8fChpPXRoaXMuc3RvcmUuZ2V0U3RhdGUoZWUodC5wZWVySWQpKSk7ZWxzZXtsZXQgcz1fLmNvbnZlcnRQZWVyKHQpO3RoaXMuc2V0U3RhdGUobz0+e2xldCBuPW8ucGVlcnNbcy5pZF07amUobixzKSYmKGFlKG4uYXV4aWxpYXJ5VHJhY2tzLHMuYXV4aWxpYXJ5VHJhY2tzKSYmKG4uYXV4aWxpYXJ5VHJhY2tzPXMuYXV4aWxpYXJ5VHJhY2tzKSxPYmplY3QuYXNzaWduKG4scykpLGk9c30scil9dGhpcy5obXNOb3RpZmljYXRpb25zLnNlbmRQZWVyVXBkYXRlKGUsaSl9O3RoaXMuZ2V0U0RLSE1TUGVlcj1lPT50aGlzLnNkay5nZXRQZWVyTWFwKClbZV07dGhpcy5zZXRTdGF0ZT0oZSx0KT0+dGhpcy5zdG9yZS5uYW1lZFNldFN0YXRlKGUsdCk7dGhpcy5zdG9yZT1lLHRoaXMuc2RrPXQsdGhpcy5obXNOb3RpZmljYXRpb25zPWksdGhpcy5zZXNzaW9uU3RvcmU9bmV3IF9pKHRoaXMuc2RrLHRoaXMuc2V0U2Vzc2lvblN0b3JlVmFsdWVMb2NhbGx5LmJpbmQodGhpcykpLHRoaXMuYWN0aW9uQmF0Y2hlcj1uZXcgRGkoZSl9c3VibWl0U2Vzc2lvbkZlZWRiYWNrKGUsdCl7cmV0dXJuIHRoaXMuc2RrLnN1Ym1pdFNlc3Npb25GZWVkYmFjayhlLHQpfWdldExvY2FsVHJhY2soZSl7cmV0dXJuIHRoaXMuc2RrLnN0b3JlLmdldExvY2FsUGVlclRyYWNrcygpLmZpbmQodD0+dC50cmFja0lkPT09ZSl9Z2V0IGludGVyYWN0aXZpdHlDZW50ZXIoKXtyZXR1cm4gdGhpcy5zZGsuZ2V0SW50ZXJhY3Rpdml0eUNlbnRlcigpfXNldFBsYXlsaXN0U2V0dGluZ3MoZSl7dGhpcy5zZGsudXBkYXRlUGxheWxpc3RTZXR0aW5ncyhlKX1yZWZyZXNoRGV2aWNlcygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5yZWZyZXNoRGV2aWNlcygpfSl9dW5ibG9ja0F1ZGlvKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2RrLmdldEF1ZGlvT3V0cHV0KCkudW5ibG9ja0F1dG9wbGF5KCl9KX1zZXRWb2x1bWUoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dD95aWVsZCB0aGlzLnNldFRyYWNrVm9sdW1lKGUsdCk6KHlpZWxkIHRoaXMuc2RrLmdldEF1ZGlvT3V0cHV0KCkuc2V0Vm9sdW1lKGUpLHRoaXMuc3luY1Jvb21TdGF0ZShcInNldE91dHB1dFZvbHVtZVwiKSl9KX1zZXRBdWRpb091dHB1dERldmljZShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7KHlpZWxkIHRoaXMuc2RrLmdldEF1ZGlvT3V0cHV0KCkuc2V0RGV2aWNlKGUpKSYmdGhpcy5zZXRTdGF0ZShpPT57aS5zZXR0aW5ncy5hdWRpb091dHB1dERldmljZUlkPWV9LFwic2V0QXVkaW9PdXRwdXREZXZpY2VcIil9KX1zZXRQcmVmZXJyZWRMYXllcihlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcjtsZXQgaT10aGlzLmdldFRyYWNrQnlJZChlKTtpZihpKWlmKGkgaW5zdGFuY2VvZiBPKXtpZih0PT09XCJub25lXCIpe2IuZChcImxheWVyIG5vbmUgd2lsbCBiZSBpZ25vcmVkXCIpO3JldHVybn1pZigoKHI9dGhpcy5zdG9yZS5nZXRTdGF0ZShIYShlKSkpPT1udWxsP3ZvaWQgMDpyLnByZWZlcnJlZExheWVyKT09PXQpe2IuZChgcHJlZmVycmVkIGxheWVyIGlzIGFscmVhZHkgJHt0fWApO3JldHVybn10aGlzLnNldFN0YXRlKG89PntsZXQgbj1vLnRyYWNrc1tlXTtuJiYobi5wcmVmZXJyZWRMYXllcj10KX0sXCJzZXRQcmVmZXJyZWRMYXllclwiKSx5aWVsZCBpLnNldFByZWZlcnJlZExheWVyKHQpfWVsc2UgYi5kKGB0cmFjayAke2V9IGlzIG5vdCBhIHJlbW90ZSB2aWRlbyB0cmFja2ApO2Vsc2UgdGhpcy5sb2dQb3NzaWJsZUluY29uc2lzdGVuY3koYHRyYWNrICR7ZX0gbm90IHByZXNlbnQsIHVuYWJsZSB0byBzZXQgcHJlZmZlciBsYXllcmApfSl9Z2V0TmF0aXZlVHJhY2tCeUlkKGUpe3ZhciB0O3JldHVybih0PXRoaXMuc2RrLnN0b3JlLmdldFRyYWNrQnlJZChlKSk9PW51bGw/dm9pZCAwOnQubmF0aXZlVHJhY2t9Z2V0VHJhY2tCeUlkKGUpe3JldHVybiB0aGlzLnNkay5zdG9yZS5nZXRUcmFja0J5SWQoZSl9Z2V0QXV0aFRva2VuQnlSb29tQ29kZShlLHQpe3JldHVybiB0aGlzLnNkay5nZXRBdXRoVG9rZW5CeVJvb21Db2RlKGUsdCl9cHJldmlldyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9dGhpcy5zdG9yZS5nZXRTdGF0ZShzZSk7aWYodD09PVwiUHJldmlld1wifHx0PT09XCJDb25uZWN0aW5nXCIpe3RoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KFwiYXR0ZW1wdGluZyB0byBjYWxsIHByZXZpZXcgd2hpbGUgcm9vbSBpcyBpbiBwcmV2aWV3L2Nvbm5lY3RpbmdcIik7cmV0dXJufXRyeXt0IT09XCJDb25uZWN0ZWRcIiYmdGhpcy5zZXRTdGF0ZShpPT57aS5yb29tLnJvb21TdGF0ZT1cIkNvbm5lY3RpbmdcIn0sXCJjb25uZWN0aW5nXCIpLHlpZWxkIHRoaXMuc2RrUHJldmlld1dpdGhMaXN0ZW5lcnMoZSl9Y2F0Y2goaSl7dGhyb3cgYi5lKFwiQ2Fubm90IHNob3cgcHJldmlldy4gRmFpbGVkIHRvIGNvbm5lY3QgdG8gcm9vbSAtIFwiLGkpLGl9fSl9Y2FuY2VsTWlkQ2FsbFByZXZpZXcoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuc2RrLmNhbmNlbE1pZENhbGxQcmV2aWV3KCl9KX1qb2luKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZih0aGlzLmlzUm9vbUpvaW5DYWxsZWQpe3RoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KFwicm9vbSBqb2luIGlzIGNhbGxlZCBhZ2FpblwiKTtyZXR1cm59dHJ5e3RoaXMuaXNSb29tSm9pbkNhbGxlZD0hMCx0aGlzLnNldFN0YXRlKHQ9Pnt0LnJvb20ucm9vbVN0YXRlPVwiQ29ubmVjdGluZ1wifSxcImpvaW5cIikseWllbGQgdGhpcy5zZGtKb2luV2l0aExpc3RlbmVycyhlKX1jYXRjaCh0KXt0aHJvdyB0aGlzLmlzUm9vbUpvaW5DYWxsZWQ9ITEsYi5lKFwiRmFpbGVkIHRvIGNvbm5lY3QgdG8gcm9vbSAtIFwiLHQpLHR9fSl9bGVhdmUoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGU9dGhpcy5zdG9yZS5nZXRTdGF0ZShCZSksdD0hMDtlfHwodD0hMSx0aGlzLmxvZ1Bvc3NpYmxlSW5jb25zaXN0ZW5jeShcInJvb20gbGVhdmUgaXMgY2FsbGVkIHdoZW4gbm8gcm9vbSBpcyBjb25uZWN0ZWRcIikpO2xldCBpPXRoaXMuc3RvcmUuZ2V0U3RhdGUoc2UpO3JldHVybiB0aGlzLnNldFN0YXRlKHI9PntyLnJvb20ucm9vbVN0YXRlPVwiRGlzY29ubmVjdGluZ1wifSxcImxlYXZpbmdcIiksdGhpcy5zZGsubGVhdmUodCkudGhlbigoKT0+e3RoaXMucmVzZXRTdGF0ZShcImxlYXZlXCIpLHRoaXMuYmVhbVNwZWFrZXJMYWJlbHNMb2dnZXImJnRoaXMuYmVhbVNwZWFrZXJMYWJlbHNMb2dnZXIuc3RvcCgpLmNhdGNoKGIuZSksYi5pKFwibGVmdCByb29tXCIpfSkuY2F0Y2gocj0+e2IuZShcImVycm9yIGluIGxlYXZpbmcgcm9vbSAtIFwiLHIpLHRoaXMuc2V0U3RhdGUocz0+e3Mucm9vbS5yb29tU3RhdGU9aX0sXCJyZXZlcnRMZWF2ZVwiKX0pfSl9c2V0U2NyZWVuU2hhcmVFbmFibGVkKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3R5cGVvZiB0PT1cImJvb2xlYW5cIiYmKHQ9e2F1ZGlvT25seTp0fSk7dHJ5e2U/eWllbGQgdGhpcy5zdGFydFNjcmVlblNoYXJlKHQpOnlpZWxkIHRoaXMuc3RvcFNjcmVlblNoYXJlKCl9Y2F0Y2goaSl7dGhyb3cgdGhpcy5obXNOb3RpZmljYXRpb25zLnNlbmRFcnJvcihfLmNvbnZlcnRFeGNlcHRpb24oaSkpLGl9fSl9YWRkVHJhY2soZSx0PVwicmVndWxhclwiKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZGsuYWRkVHJhY2soZSx0KSx0aGlzLnN5bmNSb29tU3RhdGUoXCJhZGRUcmFja1wiKX0pfXJlbW92ZVRyYWNrKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5yZW1vdmVUcmFjayhlKSx0aGlzLnN5bmNSb29tU3RhdGUoXCJyZW1vdmVUcmFja1wiKX0pfXNldExvY2FsQXVkaW9FbmFibGVkKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgdD10aGlzLnN0b3JlLmdldFN0YXRlKGxlKTt0JiYoeWllbGQgdGhpcy5zZXRFbmFibGVkVHJhY2sodCxlKSl9KX1zZXRMb2NhbFZpZGVvRW5hYmxlZChlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9dGhpcy5zdG9yZS5nZXRTdGF0ZShaKTt0JiYoeWllbGQgdGhpcy5zZXRFbmFibGVkVHJhY2sodCxlKSl9KX1zZXRFbmFibGVkVHJhY2soZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHM7aWYoKChzPXRoaXMuc3RvcmUuZ2V0U3RhdGUoKS50cmFja3NbZV0pPT1udWxsP3ZvaWQgMDpzLmVuYWJsZWQpPT09dCl7dGhpcy5sb2dQb3NzaWJsZUluY29uc2lzdGVuY3koYGxvY2FsIHRyYWNrWyR7ZX1dIGVuYWJsZWQgc3RhdGUgLSAke3R9YCk7cmV0dXJufXRoaXMuc2V0U3RhdGUobz0+e28udHJhY2tzW2VdP28udHJhY2tzW2VdLmRpc3BsYXlFbmFibGVkPXQ6dGhpcy5sb2dQb3NzaWJsZUluY29uc2lzdGVuY3koXCJ0cmFjayBpZCBub3QgZm91bmQgZm9yIHNldEVuYWJsZWRcIil9LFwiZGlzcGxheUVuYWJsZWRcIik7dHJ5e3lpZWxkIHRoaXMuc2V0RW5hYmxlZFNES1RyYWNrKGUsdCksdGhpcy5zeW5jUm9vbVN0YXRlKFwic2V0RW5hYmxlZFwiKX1jYXRjaChvKXt0aHJvdyB0aGlzLnNldFN0YXRlKG49PntuLnRyYWNrc1tlXS5kaXNwbGF5RW5hYmxlZD0hdH0sXCJyb2xsYmFja0Rpc3BsYXlFbmFibGVkXCIpLHRoaXMuaG1zTm90aWZpY2F0aW9ucy5zZW5kRXJyb3IoXy5jb252ZXJ0RXhjZXB0aW9uKG8pKSxvfWxldCByPXQ/MzoyO3RoaXMuaG1zTm90aWZpY2F0aW9ucy5zZW5kVHJhY2tVcGRhdGUocixlKX0pfWF1dG9TZWxlY3RBdWRpb091dHB1dChlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZGsuYXV0b1NlbGVjdEF1ZGlvT3V0cHV0KGUpfSl9c2V0QXVkaW9TZXR0aW5ncyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9dGhpcy5zdG9yZS5nZXRTdGF0ZShsZSk7dCYmKHlpZWxkIHRoaXMuc2V0U0RLTG9jYWxBdWRpb1RyYWNrU2V0dGluZ3ModCxlKSx0aGlzLnN5bmNSb29tU3RhdGUoXCJzZXRBdWRpb1NldHRpbmdzXCIpKX0pfXNldFZpZGVvU2V0dGluZ3MoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PXRoaXMuc3RvcmUuZ2V0U3RhdGUoWik7dCYmKHlpZWxkIHRoaXMuc2V0U0RLTG9jYWxWaWRlb1RyYWNrU2V0dGluZ3ModCxlKSx0aGlzLnN5bmNSb29tU3RhdGUoXCJzZXRWaWRlb1NldHRpbmdzXCIpKX0pfXN3aXRjaENhbWVyYSgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgZT10aGlzLnN0b3JlLmdldFN0YXRlKFopO2lmKGUpe2xldCB0PXRoaXMuc2RrLnN0b3JlLmdldExvY2FsUGVlclRyYWNrcygpLmZpbmQoaT0+aS50cmFja0lkPT09ZSk7dCYmKHlpZWxkIHQuc3dpdGNoQ2FtZXJhKCksdGhpcy5zeW5jUm9vbVN0YXRlKFwic3dpdGNoQ2FtZXJhXCIpKX19KX1zZW5kTWVzc2FnZShlKXt0aGlzLnNlbmRCcm9hZGNhc3RNZXNzYWdlKGUpfXNlbmRCcm9hZGNhc3RNZXNzYWdlKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldHttZXNzYWdlX2lkOmksdGltZXN0YW1wOnJ9PXlpZWxkIHRoaXMuc2RrLnNlbmRCcm9hZGNhc3RNZXNzYWdlKGUsdCk7dGhpcy51cGRhdGVNZXNzYWdlSW5TdG9yZSh7bWVzc2FnZTplLHR5cGU6dCxpZDppLHRpbWU6cn0pfSl9c2VuZEdyb3VwTWVzc2FnZShlLHQsaSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCByPXRoaXMuc3RvcmUuZ2V0U3RhdGUoRWUpLHM9dC5tYXAoZD0+cltkXSkse21lc3NhZ2VfaWQ6byx0aW1lc3RhbXA6bn09eWllbGQgdGhpcy5zZGsuc2VuZEdyb3VwTWVzc2FnZShlLHMsaSk7dGhpcy51cGRhdGVNZXNzYWdlSW5TdG9yZSh7bWVzc2FnZTplLHJlY2lwaWVudFJvbGVzOnQsdHlwZTppLGlkOm8sdGltZTpufSl9KX1zZW5kRGlyZWN0TWVzc2FnZShlLHQsaSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldHttZXNzYWdlX2lkOnIsdGltZXN0YW1wOnN9PXlpZWxkIHRoaXMuc2RrLnNlbmREaXJlY3RNZXNzYWdlKGUsdCxpKTt0aGlzLnVwZGF0ZU1lc3NhZ2VJblN0b3JlKHttZXNzYWdlOmUscmVjaXBpZW50UGVlcjp0LHR5cGU6aSxpZDpyLHRpbWU6c30pfSl9dXBkYXRlTWVzc2FnZUluU3RvcmUoZSl7dmFyIHM7aWYoIWUubWVzc2FnZSl0aHJvdyBiLncoXCJzZW5kTWVzc2FnZVwiLFwiRmFpbGVkIHRvIHNlbmQgbWVzc2FnZVwiLGUpLEVycm9yKGBzZW5kTWVzc2FnZSBGYWlsZWQgLSAke0pTT04uc3RyaW5naWZ5KGUpfWApO2lmKCEhZS50eXBlJiZ0aGlzLmlnbm9yZWRNZXNzYWdlVHlwZXMuaW5jbHVkZXMoZS50eXBlKSlyZXR1cm47bGV0IGk9dGhpcy5zZGsuZ2V0TG9jYWxQZWVyKCkscj17cmVhZDohMCxpZDplLmlkLHRpbWU6bmV3IERhdGUoZS50aW1lKSxtZXNzYWdlOmUubWVzc2FnZSx0eXBlOmUudHlwZXx8XCJjaGF0XCIscmVjaXBpZW50UGVlcjplLnJlY2lwaWVudFBlZXIscmVjaXBpZW50Um9sZXM6ZS5yZWNpcGllbnRSb2xlcyxzZW5kZXJOYW1lOmk9PW51bGw/dm9pZCAwOmkubmFtZSxzZW5kZXI6aT09bnVsbD92b2lkIDA6aS5wZWVySWQsc2VuZGVyUm9sZToocz1pPT1udWxsP3ZvaWQgMDppLnJvbGUpPT1udWxsP3ZvaWQgMDpzLm5hbWUsaWdub3JlZDohMX07dGhpcy5zZXRTdGF0ZShvPT57by5tZXNzYWdlcy5ieUlEW3IuaWRdPXIsby5tZXNzYWdlcy5hbGxJRHMucHVzaChyLmlkKX0sXCJuZXdNZXNzYWdlXCIpfXNldE1lc3NhZ2VSZWFkKGUsdCl7dGhpcy5zZXRTdGF0ZShpPT57dD9pLm1lc3NhZ2VzLmJ5SURbdF0/aS5tZXNzYWdlcy5ieUlEW3RdLnJlYWQ9ZTp0aGlzLmxvZ1Bvc3NpYmxlSW5jb25zaXN0ZW5jeShcIm5vIG1lc3NhZ2Ugd2l0aCBpZCBpcyBmb3VuZFwiKTppLm1lc3NhZ2VzLmFsbElEcy5mb3JFYWNoKHI9PntpLm1lc3NhZ2VzLmJ5SURbcl0ucmVhZD1lfSl9LFwic2V0TWVzc2FnZVJlYWRcIil9YXR0YWNoVmlkZW8oZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYodGhpcy5sb2NhbEFuZFZpZGVvVW5tdXRpbmcoZSkpcmV0dXJuIG5ldyBQcm9taXNlKGk9PntsZXQgcj10aGlzLnN0b3JlLnN1YnNjcmliZShzPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtzJiYoeWllbGQgdGhpcy5hdHRhY2hWaWRlb0ludGVybmFsKGUsdCkscigpLGkoKSl9KSxZcil9KTt5aWVsZCB0aGlzLmF0dGFjaFZpZGVvSW50ZXJuYWwoZSx0KX0pfWRldGFjaFZpZGVvKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBpPXRoaXMuZ2V0VHJhY2tCeUlkKGUpOyhpPT1udWxsP3ZvaWQgMDppLnR5cGUpPT09XCJ2aWRlb1wiP3lpZWxkIHRoaXMuc2RrLmRldGFjaFZpZGVvKGksdCk6KHQmJih0LnNyY09iamVjdD1udWxsKSxiLmQoXCJwb3NzaWJsZSBpbmNvbnNpc3RlbmN5IGRldGVjdGVkIC0gbm8gdmlkZW8gdHJhY2sgZm91bmQgdG8gcmVtb3ZlIHNpbmtcIikpfSl9YWRkUGx1Z2luVG9WaWRlb1RyYWNrKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmFkZFJlbW92ZVZpZGVvUGx1Z2luKGUsXCJhZGRcIix0KX0pfWFkZFBsdWdpbnNUb1ZpZGVvU3RyZWFtKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5hZGRSZW1vdmVNZWRpYVN0cmVhbVZpZGVvUGx1Z2lucyhlLFwiYWRkXCIpfSl9cmVtb3ZlUGx1Z2luc0Zyb21WaWRlb1N0cmVhbShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuYWRkUmVtb3ZlTWVkaWFTdHJlYW1WaWRlb1BsdWdpbnMoZSxcInJlbW92ZVwiKX0pfWFkZFBsdWdpblRvQXVkaW9UcmFjayhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuYWRkUmVtb3ZlQXVkaW9QbHVnaW4oZSxcImFkZFwiKX0pfXZhbGlkYXRlVmlkZW9QbHVnaW5TdXBwb3J0KGUpe2xldCB0PXt9O2lmKHQuaXNTdXBwb3J0ZWQ9ITEsIWUpcmV0dXJuIGIudyhcIm5vIHBsdWdpbiBwYXNzZWQgaW4gZm9yIGNoZWNraW5nIHN1cHBvcnRcIiksdC5lcnJNc2c9XCJubyBwbHVnaW4gcGFzc2VkIGluIGZvciBjaGVja2luZyBzdXBwb3J0XCIsdDtsZXQgaT10aGlzLnN0b3JlLmdldFN0YXRlKFopO2lmKCFpKXJldHVybiBiLncoXCJ2aWRlbyBUcmFjayBub3QgYWRkZWQgdG8gbG9jYWwgcGVlciB5ZXRcIiksdC5lcnJNc2c9XCJjYWxsIHRoaXMgZnVuY3Rpb24gb25seSBhZnRlciBsb2NhbCBwZWVyIGhhcyB2aWRlbyB0cmFja1wiLHQ7bGV0IHI9dGhpcy5nZXRUcmFja0J5SWQoaSk7cmV0dXJuIHI/dD1yLnZhbGlkYXRlUGx1Z2luKGUpOihiLncoYHRyYWNrICR7aX0gbm90IHByZXNlbnQsIHVuYWJsZSB0byB2YWxpZGF0ZSBwbHVnaW5gKSx0LmVyck1zZz1gdHJhY2sgJHtpfSBub3QgcHJlc2VudCwgdW5hYmxlIHRvIHZhbGlkYXRlIHBsdWdpbmApLHR9dmFsaWRhdGVBdWRpb1BsdWdpblN1cHBvcnQoZSl7bGV0IHQ9e307aWYodC5pc1N1cHBvcnRlZD0hMSwhZSlyZXR1cm4gYi53KCdubyBwbHVnaW4gcGFzc2VkIGluIGZvciBjaGVja2luZyBzdXBwb3J0XCInKSx0LmVyck1zZz0nbm8gcGx1Z2luIHBhc3NlZCBpbiBmb3IgY2hlY2tpbmcgc3VwcG9ydFwiJyx0O2xldCBpPXRoaXMuc3RvcmUuZ2V0U3RhdGUobGUpO2lmKCFpKXJldHVybiBiLncoXCJhdWRpbyB0cmFjayBub3QgYWRkZWQgdG8gbG9jYWwgcGVlciB5ZXRcIiksdC5lcnJNc2c9XCJjYWxsIHRoaXMgZnVuY3Rpb24gb25seSBhZnRlciBsb2NhbCBwZWVyIGhhcyBhdWRpbyB0cmFja1wiLHQ7bGV0IHI9dGhpcy5nZXRUcmFja0J5SWQoaSk7cmV0dXJuIHI/dD1yLnZhbGlkYXRlUGx1Z2luKGUpOihiLncoYHRyYWNrICR7aX0gbm90IHByZXNlbnQsIHVuYWJsZSB0byB2YWxpZGF0ZSBwbHVnaW5gKSx0LmVyck1zZz1gdHJhY2sgJHtpfSBub3QgcHJlc2VudCwgdW5hYmxlIHRvIHZhbGlkYXRlIHBsdWdpbmApLHR9cmVtb3ZlUGx1Z2luRnJvbVZpZGVvVHJhY2soZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmFkZFJlbW92ZVZpZGVvUGx1Z2luKGUsXCJyZW1vdmVcIil9KX1yZW1vdmVQbHVnaW5Gcm9tQXVkaW9UcmFjayhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuYWRkUmVtb3ZlQXVkaW9QbHVnaW4oZSxcInJlbW92ZVwiKX0pfWNoYW5nZVJvbGUoZSx0LGk9ITEpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5jaGFuZ2VSb2xlT2ZQZWVyKGUsdCxpKX0pfWNoYW5nZVJvbGVPZlBlZXIoZSx0LGk9ITEpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5jaGFuZ2VSb2xlT2ZQZWVyKGUsdCxpKX0pfWNoYW5nZVJvbGVPZlBlZXJzV2l0aFJvbGVzKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBpPXRoaXMuc2RrLmdldFJvbGVzKCkuZmlsdGVyKHI9PmUuaW5jbHVkZXMoci5uYW1lKSk7eWllbGQgdGhpcy5zZGsuY2hhbmdlUm9sZU9mUGVlcnNXaXRoUm9sZXMoaSx0KX0pfWFjY2VwdENoYW5nZVJvbGUoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PWUucmVxdWVzdGVkQnk/dGhpcy5nZXRTREtITVNQZWVyKGUucmVxdWVzdGVkQnkuaWQpOnZvaWQgMDt0fHxiLncoYHBlZXIgZm9yIHdoaWNoIHJvbGUgY2hhbmdlIGlzIHJlcXVlc3RlZCBubyBsb25nZXIgYXZhaWxhYmxlIC0gJHtlLnJlcXVlc3RlZEJ5fWApO2xldCBpPXtyZXF1ZXN0ZWRCeTp0LHJvbGU6ZS5yb2xlLHRva2VuOmUudG9rZW59O3lpZWxkIHRoaXMuc2RrLmFjY2VwdENoYW5nZVJvbGUoaSksdGhpcy5yZW1vdmVSb2xlQ2hhbmdlUmVxdWVzdChlKX0pfXJhaXNlTG9jYWxQZWVySGFuZCgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5yYWlzZUxvY2FsUGVlckhhbmQoKX0pfWxvd2VyTG9jYWxQZWVySGFuZCgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5sb3dlckxvY2FsUGVlckhhbmQoKX0pfXJhaXNlUmVtb3RlUGVlckhhbmQoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2RrLnJhaXNlUmVtb3RlUGVlckhhbmQoZSl9KX1sb3dlclJlbW90ZVBlZXJIYW5kKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5sb3dlclJlbW90ZVBlZXJIYW5kKGUpfSl9Z2V0UGVlcihlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9eWllbGQgdGhpcy5zZGsuZ2V0UGVlcihlKTtpZih0KXJldHVybiBfLmNvbnZlcnRQZWVyKHQpfSl9ZmluZFBlZXJCeU5hbWUoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldHtvZmZzZXQ6dCxwZWVyczppLGVvZjpyfT15aWVsZCB0aGlzLnNkay5maW5kUGVlckJ5TmFtZShlKTtyZXR1cm57b2Zmc2V0OnQsZW9mOnIscGVlcnM6aS5tYXAocz0+Xy5jb252ZXJ0UGVlcihzKSl9fSl9Z2V0UGVlckxpc3RJdGVyYXRvcihlKXtsZXQgdD10aGlzLnNkay5nZXRQZWVyTGlzdEl0ZXJhdG9yKGUpO3JldHVybntoYXNOZXh0OigpPT50Lmhhc05leHQoKSxuZXh0OigpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm4oeWllbGQgdC5uZXh0KCkpLm1hcChyPT5fLmNvbnZlcnRQZWVyKHIpKX0pLGZpbmRQZWVyczooKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuKHlpZWxkIHQuZmluZFBlZXJzKCkpLm1hcChyPT5fLmNvbnZlcnRQZWVyKHIpKX0pLGdldFRvdGFsOigpPT50LmdldFRvdGFsKCl9fWluaXRBcHBEYXRhKGUpe3RoaXMuc2V0U3RhdGUodD0+e3QuYXBwRGF0YT1lfSxcImluaXRBcHBEYXRhXCIpfXNldEFwcERhdGEoZSx0LGkpe2xldCByPSh0PT1udWxsP3ZvaWQgMDp0LmNvbnN0cnVjdG9yLm5hbWUpPT09XCJPYmplY3RcIjt0aGlzLnNldFN0YXRlKHM9PntpZihzLmFwcERhdGEpaSYmcj9PYmplY3QuYXNzaWduKHMuYXBwRGF0YVtlXSx0KTpzLmFwcERhdGFbZV09dDtlbHNle2xldCBvPXtbZV06dH07cy5hcHBEYXRhPW99fSxgc2V0QXBwRGF0YS0ke2V9YCl9cmVqZWN0Q2hhbmdlUm9sZShlKXt0aGlzLnJlbW92ZVJvbGVDaGFuZ2VSZXF1ZXN0KGUpfWVuZFJvb20oZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGk9dGhpcy5zdG9yZS5nZXRTdGF0ZShnYSk7aWYoIShpIT1udWxsJiZpLmVuZFJvb20pKXtiLncoXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIHBlcmZvcm0gdGhpcyBhY3Rpb24gLSBlbmRSb29tXCIpO3JldHVybn1sZXQgcj10aGlzLnN0b3JlLmdldFN0YXRlKHNlKTt0aGlzLnNldFN0YXRlKHM9PntzLnJvb20ucm9vbVN0YXRlPVwiRGlzY29ubmVjdGluZ1wifSxcImVuZGluZ1Jvb21cIik7dHJ5e3lpZWxkIHRoaXMuc2RrLmVuZFJvb20oZSx0KSx0aGlzLnJlc2V0U3RhdGUoXCJlbmRSb29tXCIpfWNhdGNoKHMpe2IuZShcImVycm9yIGluIGVuZGluZyByb29tIC0gXCIscyksdGhpcy5zZXRTdGF0ZShvPT57by5yb29tLnJvb21TdGF0ZT1yfSxcInJldmVydEVuZFJvb21cIil9fSl9cmVtb3ZlUGVlcihlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcjtsZXQgaT0ocj10aGlzLnNkay5nZXRMb2NhbFBlZXIoKSk9PW51bGw/dm9pZCAwOnIucGVlcklkO2UhPT1pJiYoeWllbGQgdGhpcy5zZGsucmVtb3ZlUGVlcihlLHQpKX0pfXN0YXJ0UlRNUE9yUmVjb3JkaW5nKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5zdGFydFJUTVBPclJlY29yZGluZyhlKX0pfXN0b3BSVE1QQW5kUmVjb3JkaW5nKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2RrLnN0b3BSVE1QQW5kUmVjb3JkaW5nKCl9KX1zdGFydEhMU1N0cmVhbWluZyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZGsuc3RhcnRITFNTdHJlYW1pbmcoZSl9KX1zdG9wSExTU3RyZWFtaW5nKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5zdG9wSExTU3RyZWFtaW5nKGUpfSl9c3RhcnRUcmFuc2NyaXB0aW9uKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5zdGFydFRyYW5zY3JpcHRpb24oZSl9KX1zdG9wVHJhbnNjcmlwdGlvbihlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZGsuc3RvcFRyYW5zY3JpcHRpb24oZSl9KX1zZW5kSExTVGltZWRNZXRhZGF0YShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZGsuc2VuZEhMU1RpbWVkTWV0YWRhdGEoZSl9KX1jaGFuZ2VOYW1lKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5jaGFuZ2VOYW1lKGUpfSl9Y2hhbmdlTWV0YWRhdGEoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3R5cGVvZiBlIT1cInN0cmluZ1wiJiYoZT1KU09OLnN0cmluZ2lmeShlKSkseWllbGQgdGhpcy5zZGsuY2hhbmdlTWV0YWRhdGEoZSl9KX1zZXRTZXNzaW9uTWV0YWRhdGEoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuc2RrLnNldFNlc3Npb25NZXRhZGF0YShlKSx0aGlzLnNldFN0YXRlKHQ9Pnt0LnNlc3Npb25NZXRhZGF0YT1lfSxcInNldFNlc3Npb25NZXRhZGF0YVwiKSx0aGlzLnNldFNlc3Npb25TdG9yZVZhbHVlTG9jYWxseSh7a2V5OlwiZGVmYXVsdFwiLHZhbHVlOmV9LFwic2V0U2Vzc2lvbk1ldGFkYXRhXCIpfSl9cG9wdWxhdGVTZXNzaW9uTWV0YWRhdGEoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGU9eWllbGQgdGhpcy5zZGsuZ2V0U2Vzc2lvbk1ldGFkYXRhKCk7dGhpcy5zZXRTdGF0ZSh0PT57dC5zZXNzaW9uTWV0YWRhdGE9ZX0sXCJwb3B1bGF0ZVNlc3Npb25NZXRhZGF0YVwiKSx0aGlzLnNldFNlc3Npb25TdG9yZVZhbHVlTG9jYWxseSh7a2V5OlwiZGVmYXVsdFwiLHZhbHVlOmV9LFwicG9wdWxhdGVTZXNzaW9ubWV0YWRhdGFcIil9KX1zZXRSZW1vdGVUcmFja0VuYWJsZWQoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYodHlwZW9mIGU9PVwic3RyaW5nXCIpe2xldCBpPXRoaXMuZ2V0VHJhY2tCeUlkKGUpO2kmJkJhKGkpP3lpZWxkIHRoaXMuc2RrLmNoYW5nZVRyYWNrU3RhdGUoaSx0KTp0aGlzLmxvZ1Bvc3NpYmxlSW5jb25zaXN0ZW5jeShgTm8gcmVtb3RlIHRyYWNrIHdpdGggSUQgJHtlfSBmb3VuZCBmb3IgY2hhbmdlIHRyYWNrIHN0YXRlYCl9ZWxzZSBBcnJheS5pc0FycmF5KGUpJiZlLmZvckVhY2goaT0+dGhpcy5zZXRSZW1vdGVUcmFja0VuYWJsZWQoaSx0KSl9KX1zZXRSZW1vdGVUcmFja3NFbmFibGVkKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgdD17ZW5hYmxlZDplLmVuYWJsZWQsdHlwZTplLnR5cGUsc291cmNlOmUuc291cmNlfTtpZihlLnJvbGVzKXtsZXQgaT10aGlzLnN0b3JlLmdldFN0YXRlKEVlKTt0LnJvbGVzPWUucm9sZXMubWFwKHI9Pmlbcl0pfXlpZWxkIHRoaXMuc2RrLmNoYW5nZU11bHRpVHJhY2tTdGF0ZSh0KX0pfXNldExvZ0xldmVsKGUpe2IubGV2ZWw9ZSx0aGlzLnNkay5zZXRMb2dMZXZlbChlKX1zZXRGcmFtZXdvcmtJbmZvKGUpe3RoaXMuc2RrLnNldEZyYW1ld29ya0luZm8oZSl9aWdub3JlTWVzc2FnZVR5cGVzKGUsdD0hMSl7aWYodCl0aGlzLmlnbm9yZWRNZXNzYWdlVHlwZXM9ZTtlbHNlIGZvcihsZXQgaSBvZiBlKXRoaXMuaWdub3JlZE1lc3NhZ2VUeXBlcy5pbmNsdWRlcyhpKXx8dGhpcy5pZ25vcmVkTWVzc2FnZVR5cGVzLnB1c2goaSl9ZW5hYmxlQmVhbVNwZWFrZXJMYWJlbHNMb2dnaW5nKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RoaXMuYmVhbVNwZWFrZXJMYWJlbHNMb2dnZXJ8fChiLmkoXCJlbmFibGluZyBiZWFtIHNwZWFrZXIgbGFiZWxzIGxvZ2dpbmdcIiksdGhpcy5iZWFtU3BlYWtlckxhYmVsc0xvZ2dlcj1uZXcgTmkodGhpcy5zdG9yZSx0aGlzKSx5aWVsZCB0aGlzLmJlYW1TcGVha2VyTGFiZWxzTG9nZ2VyLnN0YXJ0KCkpfSl9aW5pdERpYWdub3N0aWNzKCl7bGV0IGU9bmV3IFV0KHRoaXMuc2RrLHtvbkpvaW46dGhpcy5vbkpvaW4uYmluZCh0aGlzKSxvblByZXZpZXc6dGhpcy5vblByZXZpZXcuYmluZCh0aGlzKSxvblJvb21VcGRhdGU6dGhpcy5vblJvb21VcGRhdGUuYmluZCh0aGlzKSxvblBlZXJVcGRhdGU6dGhpcy5vblBlZXJVcGRhdGUuYmluZCh0aGlzKSxvblRyYWNrVXBkYXRlOnRoaXMub25UcmFja1VwZGF0ZS5iaW5kKHRoaXMpLG9uTWVzc2FnZVJlY2VpdmVkOnRoaXMub25NZXNzYWdlUmVjZWl2ZWQuYmluZCh0aGlzKSxvbkVycm9yOnRoaXMub25FcnJvci5iaW5kKHRoaXMpLG9uUmVjb25uZWN0ZWQ6dGhpcy5vblJlY29ubmVjdGVkLmJpbmQodGhpcyksb25SZWNvbm5lY3Rpbmc6dGhpcy5vblJlY29ubmVjdGluZy5iaW5kKHRoaXMpLG9uUm9sZUNoYW5nZVJlcXVlc3Q6dGhpcy5vblJvbGVDaGFuZ2VSZXF1ZXN0LmJpbmQodGhpcyksb25Sb2xlVXBkYXRlOnRoaXMub25Sb2xlVXBkYXRlLmJpbmQodGhpcyksb25EZXZpY2VDaGFuZ2U6dGhpcy5vbkRldmljZUNoYW5nZS5iaW5kKHRoaXMpLG9uQ2hhbmdlVHJhY2tTdGF0ZVJlcXVlc3Q6dGhpcy5vbkNoYW5nZVRyYWNrU3RhdGVSZXF1ZXN0LmJpbmQodGhpcyksb25DaGFuZ2VNdWx0aVRyYWNrU3RhdGVSZXF1ZXN0OnRoaXMub25DaGFuZ2VNdWx0aVRyYWNrU3RhdGVSZXF1ZXN0LmJpbmQodGhpcyksb25SZW1vdmVkRnJvbVJvb206dGhpcy5vblJlbW92ZWRGcm9tUm9vbS5iaW5kKHRoaXMpLG9uTmV0d29ya1F1YWxpdHk6dGhpcy5vbk5ldHdvcmtRdWFsaXR5LmJpbmQodGhpcyksb25TZXNzaW9uU3RvcmVVcGRhdGU6dGhpcy5vblNlc3Npb25TdG9yZVVwZGF0ZS5iaW5kKHRoaXMpLG9uUG9sbHNVcGRhdGU6dGhpcy5vblBvbGxzVXBkYXRlLmJpbmQodGhpcyksb25XaGl0ZWJvYXJkVXBkYXRlOnRoaXMub25XaGl0ZWJvYXJkVXBkYXRlLmJpbmQodGhpcyl9KTtyZXR1cm4gdGhpcy5zZGsuYWRkQXVkaW9MaXN0ZW5lcih7b25BdWRpb0xldmVsVXBkYXRlOnRoaXMub25BdWRpb0xldmVsVXBkYXRlLmJpbmQodGhpcyl9KSx0aGlzLnNkay5hZGRDb25uZWN0aW9uUXVhbGl0eUxpc3RlbmVyKHtvbkNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlOnRoaXMub25Db25uZWN0aW9uUXVhbGl0eVVwZGF0ZS5iaW5kKHRoaXMpfSksZX1yZXNldFN0YXRlKGU9XCJyZXNldFN0YXRlXCIpe3RoaXMuaXNSb29tSm9pbkNhbGxlZD0hMSxiLmNsZWFudXAoKSx0aGlzLnNldFN0YXRlKHQ9PntPYmplY3QuYXNzaWduKHQsb2koKSl9LGUpfWdldERlYnVnSW5mbygpe3JldHVybiB0aGlzLnNkay5nZXREZWJ1Z0luZm8oKX1zZGtKb2luV2l0aExpc3RlbmVycyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zZGsuam9pbihlLHtvbkpvaW46dGhpcy5vbkpvaW4uYmluZCh0aGlzKSxvblByZXZpZXc6dGhpcy5vblByZXZpZXcuYmluZCh0aGlzKSxvblJvb21VcGRhdGU6dGhpcy5vblJvb21VcGRhdGUuYmluZCh0aGlzKSxvblBlZXJVcGRhdGU6dGhpcy5vblBlZXJVcGRhdGUuYmluZCh0aGlzKSxvblRyYWNrVXBkYXRlOnRoaXMub25UcmFja1VwZGF0ZS5iaW5kKHRoaXMpLG9uTWVzc2FnZVJlY2VpdmVkOnRoaXMub25NZXNzYWdlUmVjZWl2ZWQuYmluZCh0aGlzKSxvbkVycm9yOnRoaXMub25FcnJvci5iaW5kKHRoaXMpLG9uUmVjb25uZWN0ZWQ6dGhpcy5vblJlY29ubmVjdGVkLmJpbmQodGhpcyksb25SZWNvbm5lY3Rpbmc6dGhpcy5vblJlY29ubmVjdGluZy5iaW5kKHRoaXMpLG9uUm9sZUNoYW5nZVJlcXVlc3Q6dGhpcy5vblJvbGVDaGFuZ2VSZXF1ZXN0LmJpbmQodGhpcyksb25Sb2xlVXBkYXRlOnRoaXMub25Sb2xlVXBkYXRlLmJpbmQodGhpcyksb25EZXZpY2VDaGFuZ2U6dGhpcy5vbkRldmljZUNoYW5nZS5iaW5kKHRoaXMpLG9uQ2hhbmdlVHJhY2tTdGF0ZVJlcXVlc3Q6dGhpcy5vbkNoYW5nZVRyYWNrU3RhdGVSZXF1ZXN0LmJpbmQodGhpcyksb25DaGFuZ2VNdWx0aVRyYWNrU3RhdGVSZXF1ZXN0OnRoaXMub25DaGFuZ2VNdWx0aVRyYWNrU3RhdGVSZXF1ZXN0LmJpbmQodGhpcyksb25SZW1vdmVkRnJvbVJvb206dGhpcy5vblJlbW92ZWRGcm9tUm9vbS5iaW5kKHRoaXMpLG9uTmV0d29ya1F1YWxpdHk6dGhpcy5vbk5ldHdvcmtRdWFsaXR5LmJpbmQodGhpcyksb25TZXNzaW9uU3RvcmVVcGRhdGU6dGhpcy5vblNlc3Npb25TdG9yZVVwZGF0ZS5iaW5kKHRoaXMpLG9uUG9sbHNVcGRhdGU6dGhpcy5vblBvbGxzVXBkYXRlLmJpbmQodGhpcyksb25XaGl0ZWJvYXJkVXBkYXRlOnRoaXMub25XaGl0ZWJvYXJkVXBkYXRlLmJpbmQodGhpcyksb25TRlVNaWdyYXRpb246dGhpcy5vblNGVU1pZ3JhdGlvbi5iaW5kKHRoaXMpfSksdGhpcy5zZGsuYWRkQXVkaW9MaXN0ZW5lcih7b25BdWRpb0xldmVsVXBkYXRlOnRoaXMub25BdWRpb0xldmVsVXBkYXRlLmJpbmQodGhpcyl9KSx0aGlzLnNkay5hZGRDb25uZWN0aW9uUXVhbGl0eUxpc3RlbmVyKHtvbkNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlOnRoaXMub25Db25uZWN0aW9uUXVhbGl0eVVwZGF0ZS5iaW5kKHRoaXMpfSl9KX1vblNGVU1pZ3JhdGlvbigpe3RoaXMuc3luY1Jvb21TdGF0ZShcIlNGVU1pZ3JhdGlvblwiKX1vblJlbW92ZWRGcm9tUm9vbShlKXt2YXIgcjtsZXQgdD10aGlzLnN0b3JlLmdldFN0YXRlKGVlKChyPWUucmVxdWVzdGVkQnkpPT1udWxsP3ZvaWQgMDpyLnBlZXJJZCkpO3RoaXMuaG1zTm90aWZpY2F0aW9ucy5zZW5kTGVhdmVSb29tKE0obSh7fSxlKSx7cmVxdWVzdGVkQnk6dHx8dm9pZCAwfSkpO2xldCBpPWUucm9vbUVuZGVkfHwhdD9cInJvb21FbmRlZFwiOlwicmVtb3ZlZEZyb21Sb29tXCI7Yi5pKGByZXNldHRpbmcgc3RhdGUgYWZ0ZXIgcGVlciByZW1vdmVkICR7aX1gLGUpLHRoaXMucmVzZXRTdGF0ZShpKX1vbkRldmljZUNoYW5nZShlKXtsZXQgdD1lLmRldmljZXM7aWYoIXQpcmV0dXJuO2xldCBpPXRoaXMuc3RvcmUuZ2V0U3RhdGUocmUpO2lmKHRoaXMuc2V0U3RhdGUocj0+e2FlKHIuZGV2aWNlcy5hdWRpb0lucHV0LHQuYXVkaW9JbnB1dCl8fChyLmRldmljZXMuYXVkaW9JbnB1dD10LmF1ZGlvSW5wdXQpLGFlKHIuZGV2aWNlcy52aWRlb0lucHV0LHQudmlkZW9JbnB1dCl8fChyLmRldmljZXMudmlkZW9JbnB1dD10LnZpZGVvSW5wdXQpLGFlKHIuZGV2aWNlcy5hdWRpb091dHB1dCx0LmF1ZGlvT3V0cHV0KXx8KHIuZGV2aWNlcy5hdWRpb091dHB1dD10LmF1ZGlvT3V0cHV0KTtsZXQgcz10aGlzLnNkay5nZXRMb2NhbFBlZXIoKTtpIT1udWxsJiZpLmlkJiZzJiZPYmplY3QuYXNzaWduKHIuc2V0dGluZ3MsdGhpcy5nZXRNZWRpYVNldHRpbmdzKHMpKX0sXCJkZXZpY2VDaGFuZ2VcIiksZS5zZWxlY3Rpb24mJiFlLmludGVybmFsKXtsZXQgcj1fLmNvbnZlcnREZXZpY2VDaGFuZ2VVcGRhdGUoZSk7dGhpcy5obXNOb3RpZmljYXRpb25zLnNlbmREZXZpY2VDaGFuZ2Uocil9fXNka1ByZXZpZXdXaXRoTGlzdGVuZXJzKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNkay5wcmV2aWV3KGUse29uUHJldmlldzp0aGlzLm9uUHJldmlldy5iaW5kKHRoaXMpLG9uRXJyb3I6dGhpcy5vbkVycm9yLmJpbmQodGhpcyksb25SZWNvbm5lY3RlZDp0aGlzLm9uUmVjb25uZWN0ZWQuYmluZCh0aGlzKSxvblJlY29ubmVjdGluZzp0aGlzLm9uUmVjb25uZWN0aW5nLmJpbmQodGhpcyksb25EZXZpY2VDaGFuZ2U6dGhpcy5vbkRldmljZUNoYW5nZS5iaW5kKHRoaXMpLG9uUm9vbVVwZGF0ZTp0aGlzLm9uUm9vbVVwZGF0ZS5iaW5kKHRoaXMpLG9uUGVlclVwZGF0ZTp0aGlzLm9uUGVlclVwZGF0ZS5iaW5kKHRoaXMpLG9uTmV0d29ya1F1YWxpdHk6dGhpcy5vbk5ldHdvcmtRdWFsaXR5LmJpbmQodGhpcyksb25UcmFja1VwZGF0ZTp0aGlzLm9uVHJhY2tVcGRhdGUuYmluZCh0aGlzKX0pLHRoaXMuc2RrLmFkZEF1ZGlvTGlzdGVuZXIoe29uQXVkaW9MZXZlbFVwZGF0ZTp0aGlzLm9uQXVkaW9MZXZlbFVwZGF0ZS5iaW5kKHRoaXMpfSl9KX1vbk5ldHdvcmtRdWFsaXR5KGUpe3RoaXMuc2V0U3RhdGUodD0+e3ZhciByO2xldCBpPXQucm9vbS5sb2NhbFBlZXJ8fCgocj10aGlzLnNkay5nZXRMb2NhbFBlZXIoKSk9PW51bGw/dm9pZCAwOnIucGVlcklkKTtpJiYodC5jb25uZWN0aW9uUXVhbGl0aWVzW2ldPXtwZWVySUQ6aSxkb3dubGlua1F1YWxpdHk6ZX0pfSxcIkNvbm5lY3Rpb25RdWFsaXR5XCIpfW9uU2Vzc2lvblN0b3JlVXBkYXRlKGUpe3RoaXMuc2V0U2Vzc2lvblN0b3JlVmFsdWVMb2NhbGx5KGUsXCJzZXNzaW9uU3RvcmVVcGRhdGVcIil9b25Qb2xsc1VwZGF0ZShlLHQpe2xldCBpPUNpW2VdO3RoaXMuc2V0U3RhdGUocj0+e2xldCBzPXQucmVkdWNlKChvLG4pPT57dmFyIGQ7cmV0dXJuIG9bbi5pZF09TShtKHt9LG4pLHtxdWVzdGlvbnM6KGQ9bi5xdWVzdGlvbnMpPT1udWxsP3ZvaWQgMDpkLm1hcCh1PT57dmFyIHAsaDtyZXR1cm4gTShtKHt9LHUpLHthbnN3ZXI6dS5hbnN3ZXI/bSh7fSx1LmFuc3dlcik6dm9pZCAwLG9wdGlvbnM6KHA9dS5vcHRpb25zKT09bnVsbD92b2lkIDA6cC5tYXAoVD0+bSh7fSxUKSkscmVzcG9uc2VzOihoPXUucmVzcG9uc2VzKT09bnVsbD92b2lkIDA6aC5tYXAoVD0+bSh7fSxUKSl9KX0pfSksb30se30pO0dhKHIucG9sbHMscyl9LGkpLHQuZm9yRWFjaChyPT50aGlzLmhtc05vdGlmaWNhdGlvbnMuc2VuZFBvbGxVcGRhdGUoZSxyLmlkKSl9b25XaGl0ZWJvYXJkVXBkYXRlKGUpe3RoaXMuc2V0U3RhdGUodD0+e3Qud2hpdGVib2FyZHNbZS5pZF09ZX0sXCJ3aGl0ZWJvYXJkVXBkYXRlXCIpfXN0YXJ0U2NyZWVuU2hhcmUoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RoaXMuc3RvcmUuZ2V0U3RhdGUoWHIpP3RoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KFwic3RhcnQgc2NyZWVuc2hhcmUgaXMgY2FsbGVkIHdoaWxlIGl0J3Mgb25cIik6KHlpZWxkIHRoaXMuc2RrLnN0YXJ0U2NyZWVuU2hhcmUoKCk9PnRoaXMuc3luY1Jvb21TdGF0ZShcInNjcmVlbnNoYXJlU3RvcHBlZFwiKSxlKSx0aGlzLnN5bmNSb29tU3RhdGUoXCJzdGFydFNjcmVlblNoYXJlXCIpKX0pfXN0b3BTY3JlZW5TaGFyZSgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0aGlzLnN0b3JlLmdldFN0YXRlKFhyKT8oeWllbGQgdGhpcy5zZGsuc3RvcFNjcmVlblNoYXJlKCksdGhpcy5zeW5jUm9vbVN0YXRlKFwic3RvcFNjcmVlblNoYXJlXCIpKTp0aGlzLmxvZ1Bvc3NpYmxlSW5jb25zaXN0ZW5jeShcInN0b3Agc2NyZWVuc2hhcmUgaXMgY2FsbGVkIHdoaWxlIGl0J3Mgbm90IG9uXCIpfSl9YXR0YWNoVmlkZW9JbnRlcm5hbChlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgaT10aGlzLmdldFRyYWNrQnlJZChlKTtpfHwoaT10aGlzLmdldExvY2FsVHJhY2soZSkpLGkmJmkudHlwZT09PVwidmlkZW9cIj95aWVsZCB0aGlzLnNkay5hdHRhY2hWaWRlbyhpLHQpOnRoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KFwibm8gdmlkZW8gdHJhY2sgZm91bmQgdG8gYWRkIHNpbmtcIil9KX1zeW5jUm9vbVN0YXRlKGUpe2U9YCR7ZX1fZnVsbFN5bmNgLGIudGltZShgc3RvcmUtc3luYy0ke2V9YCk7bGV0IHQ9e30saT1bXSxyPXt9LHM9e30sbz17fSxuLGQ9dGhpcy5zZGsuZ2V0UGVlcnMoKTtmb3IobGV0IGcgb2YgZCl7bGV0IGY9Xy5jb252ZXJ0UGVlcihnKTt0W2YuaWRdPWYsaS5wdXNoKGYuaWQpLG9bZi5pZF09e3BlZXJJRDpmLmlkLGRvd25saW5rUXVhbGl0eTpnLm5ldHdvcmtRdWFsaXR5fHwtMX07bGV0IEU9W2cuYXVkaW9UcmFjayxnLnZpZGVvVHJhY2ssLi4uZy5hdXhpbGlhcnlUcmFja3NdO2ZvcihsZXQgdiBvZiBFKXtpZighdiljb250aW51ZTtsZXQgUj1fLmNvbnZlcnRUcmFjayh2KTtyW1IuaWRdPVJ9aWYoZy5pc0xvY2FsKXtsZXQgdj1nO249dGhpcy5nZXRQcmV2aWV3RmllbGRzKHYpLE9iamVjdC5hc3NpZ24ocyx0aGlzLmdldE1lZGlhU2V0dGluZ3ModikpfX1sZXQgdT10aGlzLnNkay5nZXRSZWNvcmRpbmdTdGF0ZSgpLHA9dGhpcy5zZGsuZ2V0UlRNUFN0YXRlKCksaD10aGlzLnNkay5nZXRITFNTdGF0ZSgpLFQ9dGhpcy5zZGsuZ2V0VHJhbnNjcmlwdGlvblN0YXRlKCk7dGhpcy5zZXRTdGF0ZShnPT57dmFyIHY7Zy5yb29tLnBlZXJzPWk7bGV0IGY9Zy5wZWVycyxFPWcudHJhY2tzO1ZhKGYsdCksRmEoRSxyKSxPYmplY3QuYXNzaWduKGcuc2V0dGluZ3MscyksZy5yb29tLmlzQ29ubmVjdGVkJiZPYmplY3QuYXNzaWduKGcuY29ubmVjdGlvblF1YWxpdGllcyxvKSwodj1nLnByZXZpZXcpIT1udWxsJiZ2LmxvY2FsUGVlciYmKG4hPW51bGwmJm4ubG9jYWxQZWVyKT9PYmplY3QuYXNzaWduKGcucHJldmlldyxuKTpnLnByZXZpZXc9bixPYmplY3QuYXNzaWduKGcucm9sZXMsXy5jb252ZXJ0Um9sZXModGhpcy5zZGsuZ2V0Um9sZXMoKSkpLE9iamVjdC5hc3NpZ24oZy5wbGF5bGlzdCxfLmNvbnZlcnRQbGF5bGlzdCh0aGlzLnNkay5nZXRQbGF5bGlzdE1hbmFnZXIoKSkpLE9iamVjdC5hc3NpZ24oZy5yb29tLF8uY29udmVydFJlY29yZGluZ1N0cmVhbWluZ1N0YXRlKHUscCxoLFQpKSxPYmplY3QuYXNzaWduKGcudGVtcGxhdGVBcHBEYXRhLHRoaXMuc2RrLmdldFRlbXBsYXRlQXBwRGF0YSgpKX0sZSksYi50aW1lRW5kKGBzdG9yZS1zeW5jLSR7ZX1gKX1vblByZXZpZXcoZSl7dGhpcy5zZXRTdGF0ZSh0PT57dmFyIGk7T2JqZWN0LmFzc2lnbih0LnJvb20sXy5jb252ZXJ0Um9vbShlLChpPXRoaXMuc2RrLmdldExvY2FsUGVlcigpKT09bnVsbD92b2lkIDA6aS5wZWVySWQpKSx0LnJvb20ucm9vbVN0YXRlPVwiUHJldmlld1wifSxcInByZXZpZXdTdGFydFwiKSx0aGlzLnN5bmNSb29tU3RhdGUoXCJwcmV2aWV3U3luY1wiKX1vbkpvaW4oZSl7bGV0IHQ9dGhpcy5zZGsuZ2V0UGxheWxpc3RNYW5hZ2VyKCk7dGhpcy5hdWRpb1BsYXlsaXN0PW5ldyB4dCh0LFwiYXVkaW9cIix0aGlzLnN5bmNQbGF5bGlzdFN0YXRlLmJpbmQodGhpcyksdGhpcy5zdG9yZSksdGhpcy52aWRlb1BsYXlsaXN0PW5ldyB4dCh0LFwidmlkZW9cIix0aGlzLnN5bmNSb29tU3RhdGUuYmluZCh0aGlzKSx0aGlzLnN0b3JlKSx0aGlzLnN5bmNSb29tU3RhdGUoXCJqb2luU3luY1wiKSx0aGlzLnNldFN0YXRlKGk9Pnt2YXIgcjtPYmplY3QuYXNzaWduKGkucm9vbSxfLmNvbnZlcnRSb29tKGUsKHI9dGhpcy5zZGsuZ2V0TG9jYWxQZWVyKCkpPT1udWxsP3ZvaWQgMDpyLnBlZXJJZCkpLGkucm9vbS5pc0Nvbm5lY3RlZD0hMCxpLnJvb20ucm9vbVN0YXRlPVwiQ29ubmVjdGVkXCJ9LFwiam9pbmVkXCIpLHQub25Qcm9ncmVzcyh0aGlzLnNldFByb2dyZXNzKSx0Lm9uTmV3VHJhY2tTdGFydChpPT57dGhpcy5zeW5jUGxheWxpc3RTdGF0ZShgJHtpLnR5cGV9UGxheWxpc3RVcGRhdGVgKX0pLHQub25QbGF5bGlzdEVuZGVkKGk9Pnt0aGlzLnN5bmNQbGF5bGlzdFN0YXRlKGAke2l9UGxheWxpc3RFbmRlZGApfSksdC5vbkN1cnJlbnRUcmFja0VuZGVkKGk9Pnt0aGlzLmhtc05vdGlmaWNhdGlvbnMuc2VuZFBsYXlsaXN0VHJhY2tFbmRlZChfLmNvbnZlcnRQbGF5bGlzdEl0ZW0odCxpKSksdGhpcy5zeW5jUGxheWxpc3RTdGF0ZShgJHtpLnR5cGV9UGxheWxpc3RJdGVtRW5kZWRgKX0pfW9uUm9vbVVwZGF0ZShlLHQpe3RoaXMuc2V0U3RhdGUoaT0+e3ZhciByO09iamVjdC5hc3NpZ24oaS5yb29tLF8uY29udmVydFJvb20odCwocj10aGlzLnNkay5nZXRMb2NhbFBlZXIoKSk9PW51bGw/dm9pZCAwOnIucGVlcklkKSl9LGUpLGU9PT1cIlRSQU5TQ1JJUFRJT05fU1RBVEVfVVBEQVRFRFwiJiZ0aGlzLmhtc05vdGlmaWNhdGlvbnMuc2VuZFRyYW5zY3JpcHRpb25VcGRhdGUodC50cmFuc2NyaXB0aW9ucyl9b25QZWVyVXBkYXRlKGUsdCl7aWYoIVs0LDVdLmluY2x1ZGVzKGUpKXtpZihBcnJheS5pc0FycmF5KHQpKXtsZXQgaT10aGlzLnN0b3JlLmdldFN0YXRlKHopLHI9dC5maWx0ZXIobz0+IWlbby5wZWVySWRdKTtpZih0aGlzLnN5bmNSb29tU3RhdGUoXCJwZWVyc0pvaW5lZFwiKSx0aGlzLnN0b3JlLmdldFN0YXRlKEJlKSl7bGV0IG89W107Zm9yKGxldCBuIG9mIHQpe2xldCBkPXRoaXMuc3RvcmUuZ2V0U3RhdGUoZWUobi5wZWVySWQpKTtkJiZvLnB1c2goZCl9dGhpcy5obXNOb3RpZmljYXRpb25zLnNlbmRQZWVyTGlzdChvKX1lbHNlIHIuZm9yRWFjaChvPT57bGV0IG49dGhpcy5zdG9yZS5nZXRTdGF0ZShlZShvLnBlZXJJZCkpO24mJnRoaXMuaG1zTm90aWZpY2F0aW9ucy5zZW5kUGVlclVwZGF0ZSgwLG4pfSk7cmV0dXJufXRoaXMuc2VuZFBlZXJVcGRhdGVOb3RpZmljYXRpb24oZSx0KX19b25UcmFja1VwZGF0ZShlLHQsaSl7aWYoZT09PTEpdGhpcy5obXNOb3RpZmljYXRpb25zLnNlbmRUcmFja1VwZGF0ZShlLHQudHJhY2tJZCksdGhpcy5oYW5kbGVUcmFja1JlbW92ZSh0LGkpO2Vsc2UgaWYoWzAsMV0uaW5jbHVkZXMoZSkpe2xldCByPU50W2VdO3RoaXMuc3luY1Jvb21TdGF0ZShyKSx0aGlzLmhtc05vdGlmaWNhdGlvbnMuc2VuZFRyYWNrVXBkYXRlKGUsdC50cmFja0lkKX1lbHNle2xldCByPU50W2VdfHxcInRyYWNrVXBkYXRlXCIscz1fLmNvbnZlcnRUcmFjayh0KTt0aGlzLnNldFN0YXRlKG89PntsZXQgbj1vLnRyYWNrc1tzLmlkXTtqZShuLHMpJiYoc3MobixzKSxPYmplY3QuYXNzaWduKG4scykpfSxyKSx0aGlzLmhtc05vdGlmaWNhdGlvbnMuc2VuZFRyYWNrVXBkYXRlKGUsdC50cmFja0lkKX19b25NZXNzYWdlUmVjZWl2ZWQoZSl7bGV0IHQ9Xy5jb252ZXJ0TWVzc2FnZShlLHRoaXMuc3RvcmUuZ2V0U3RhdGUoSWUpKTt0LnJlYWQ9ITEsdC5pZ25vcmVkPXRoaXMuaWdub3JlZE1lc3NhZ2VUeXBlcy5pbmNsdWRlcyh0LnR5cGUpLHQudHlwZT09PVwiaG1zX3RyYW5zY3JpcHRcIiYmKHQuaWdub3JlZD0hMCksdGhpcy5wdXRNZXNzYWdlSW5TdG9yZSh0KSx0aGlzLmhtc05vdGlmaWNhdGlvbnMuc2VuZE1lc3NhZ2VSZWNlaXZlZCh0KX1wdXRNZXNzYWdlSW5TdG9yZShlKXtlLmlnbm9yZWR8fHRoaXMuYWN0aW9uQmF0Y2hlci5zZXRTdGF0ZSh0PT57dC5tZXNzYWdlcy5ieUlEW2UuaWRdPWUsdC5tZXNzYWdlcy5hbGxJRHMucHVzaChlLmlkKX0sXCJuZXdNZXNzYWdlXCIsMTUwKX1vbkF1ZGlvTGV2ZWxVcGRhdGUoZSl7dGhpcy5zZXRTdGF0ZSh0PT57bGV0IGk9e307ZS5mb3JFYWNoKHM9PntpZighcy50cmFja3x8IXMucGVlcilyZXR1cm47bGV0IG89cy50cmFjay50cmFja0lkO2lbb109cy5hdWRpb0xldmVsLHQuc3BlYWtlcnNbb118fCh0LnNwZWFrZXJzW29dPXthdWRpb0xldmVsOnMuYXVkaW9MZXZlbCxwZWVySUQ6cy5wZWVyLnBlZXJJZCx0cmFja0lEOm99KX0pO2xldCByPU9iamVjdC5lbnRyaWVzKHQuc3BlYWtlcnMpO2ZvcihsZXRbcyxvXW9mIHIpby5hdWRpb0xldmVsPWlbc118fDAsby5hdWRpb0xldmVsPT09MCYmZGVsZXRlIHQuc3BlYWtlcnNbc119LFwiYXVkaW9MZXZlbFwiKX1vbkNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlKGUpe3RoaXMuc2V0U3RhdGUodD0+e2UuZm9yRWFjaChpPT57bGV0IHI9aS5wZWVySUQ7ciYmKHQuY29ubmVjdGlvblF1YWxpdGllc1tyXT9PYmplY3QuYXNzaWduKHQuY29ubmVjdGlvblF1YWxpdGllc1tyXSxpKTp0LmNvbm5lY3Rpb25RdWFsaXRpZXNbcl09aSl9KX0sXCJjb25uZWN0aW9uUXVhbGl0eVwiKX1vbkNoYW5nZVRyYWNrU3RhdGVSZXF1ZXN0KGUpe3ZhciBzO2xldCB0PXRoaXMuc3RvcmUuZ2V0U3RhdGUoZWUoKHM9ZS5yZXF1ZXN0ZWRCeSk9PW51bGw/dm9pZCAwOnMucGVlcklkKSksaT10aGlzLmdldFN0b3JlTG9jYWxUcmFja0lEZnJvbVNES1RyYWNrKGUudHJhY2spLHI9dGhpcy5zdG9yZS5nZXRTdGF0ZShJaShpKSk7aWYoIXIpcmV0dXJuIHRoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KGBOb3QgZm91bmQgdHJhY2sgZm9yIHdoaWNoIHRyYWNrIHN0YXRlIGNoYW5nZSB3YXMgcmVxdWVzdGVkLCAke2UudHJhY2t9YCk7ZS5lbmFibGVkfHx0aGlzLnN5bmNSb29tU3RhdGUoXCJjaGFuZ2VUcmFja1N0YXRlUmVxdWVzdFwiKSx0aGlzLmhtc05vdGlmaWNhdGlvbnMuc2VuZENoYW5nZVRyYWNrU3RhdGVSZXF1ZXN0KHtyZXF1ZXN0ZWRCeTp0fHx2b2lkIDAsdHJhY2s6cixlbmFibGVkOmUuZW5hYmxlZH0pfW9uQ2hhbmdlTXVsdGlUcmFja1N0YXRlUmVxdWVzdChlKXt2YXIgcztsZXQgdD10aGlzLnN0b3JlLmdldFN0YXRlKGVlKChzPWUucmVxdWVzdGVkQnkpPT1udWxsP3ZvaWQgMDpzLnBlZXJJZCkpO2UuZW5hYmxlZHx8dGhpcy5zeW5jUm9vbVN0YXRlKFwiY2hhbmdlTXVsdGlUcmFja1N0YXRlUmVxdWVzdFwiKTtsZXQgaT1bXSxyPXRoaXMuc3RvcmUuZ2V0U3RhdGUoTik7Zm9yKGxldCBvIG9mIGUudHJhY2tzKXtsZXQgbj10aGlzLmdldFN0b3JlTG9jYWxUcmFja0lEZnJvbVNES1RyYWNrKG8pO24mJnJbbl0mJmkucHVzaChyW25dKX10aGlzLmhtc05vdGlmaWNhdGlvbnMuc2VuZENoYW5nZU11bHRpVHJhY2tTdGF0ZVJlcXVlc3Qoe3JlcXVlc3RlZEJ5OnR8fHZvaWQgMCx0cmFja3M6aSxlbmFibGVkOmUuZW5hYmxlZCx0eXBlOmUudHlwZSxzb3VyY2U6ZS5zb3VyY2V9KX1vblJlY29ubmVjdGVkKCl7dGhpcy5zeW5jUm9vbVN0YXRlKFwicmVjb25uZWN0ZWRTeW5jXCIpLHRoaXMuaG1zTm90aWZpY2F0aW9ucy5zZW5kUmVjb25uZWN0ZWQoKSx0aGlzLnNldFN0YXRlKGU9PntlLnJvb20ucm9vbVN0YXRlPWUucm9vbS5pc0Nvbm5lY3RlZD9cIkNvbm5lY3RlZFwiOlwiUHJldmlld1wifSxcInJlY29ubmVjdGVkXCIpfW9uUmVjb25uZWN0aW5nKGUpe2xldCB0PV8uY29udmVydEV4Y2VwdGlvbihlKTtiLmUoXCJSZWNvbm5lY3Rpb246IHJlY2VpdmVkIGVycm9yIGZyb20gc2RrXCIsdCksdGhpcy5obXNOb3RpZmljYXRpb25zLnNlbmRSZWNvbm5lY3RpbmcodCksdGhpcy5zZXRTdGF0ZShpPT57aS5yb29tLnJvb21TdGF0ZT1cIlJlY29ubmVjdGluZ1wiLGkuZXJyb3JzLnB1c2godCl9LFwicmVjb25uZWN0aW5nXCIpfW9uRXJyb3IoZSl7bGV0IHQ9Xy5jb252ZXJ0RXhjZXB0aW9uKGUpO3QuaXNUZXJtaW5hbD8odGhpcy5sZWF2ZSgpLnRoZW4oKCk9PmIuZShcImVycm9yIGZyb20gU0RLLCBsZWZ0IHJvb20uXCIpKSx0aGlzLnNldFN0YXRlKGk9PntpLnJvb20ucm9vbVN0YXRlPVwiRmFpbGVkXCIsaS5lcnJvcnMucHVzaCh0KX0sXCJlcnJvclRlcm1pbmFsXCIpKTp0aGlzLnN0b3JlLmdldFN0YXRlKCkuZXJyb3JzLmxlbmd0aDw1MCYmdGhpcy5zZXRTdGF0ZShyPT57ci5lcnJvcnMucHVzaCh0KX0sXCJlcnJvclwiKSx0aGlzLnN5bmNSb29tU3RhdGUoXCJlcnJvclN5bmNcIiksdGhpcy5obXNOb3RpZmljYXRpb25zLnNlbmRFcnJvcih0KSxiLmUoXCJyZWNlaXZlZCBlcnJvciBmcm9tIHNka1wiLHQgaW5zdGFuY2VvZiBrP2Ake3R9YDp0KX1oYW5kbGVUcmFja1JlbW92ZShlLHQpe3RoaXMuc2V0U3RhdGUoaT0+e2xldCByPWkucGVlcnNbdC5wZWVySWRdLHM9aS50cmFja3Msbz1lLnRyYWNrSWQ7aWYocilpZihvPT09ci5hdWRpb1RyYWNrKWRlbGV0ZSByLmF1ZGlvVHJhY2s7ZWxzZSBpZihvPT09ci52aWRlb1RyYWNrKWRlbGV0ZSByLnZpZGVvVHJhY2s7ZWxzZXtsZXQgbj1yLmF1eGlsaWFyeVRyYWNrcy5pbmRleE9mKG8pO24+LTEmJnIuYXV4aWxpYXJ5VHJhY2tzLnNwbGljZShuLDEpfWRlbGV0ZSBzW29dfSxcInRyYWNrUmVtb3ZlZFwiKX1zZXRFbmFibGVkU0RLVHJhY2soZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGk9dGhpcy5nZXRMb2NhbFRyYWNrKGUpO2k/eWllbGQgaS5zZXRFbmFibGVkKHQpOnRoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KGB0cmFjayAke2V9IG5vdCBwcmVzZW50LCB1bmFibGUgdG8gZW5hYmxlZC9kaXNhYmxlYCl9KX1zZXRTREtMb2NhbFZpZGVvVHJhY2tTZXR0aW5ncyhlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgaT10aGlzLmdldExvY2FsVHJhY2soZSk7aT95aWVsZCBpLnNldFNldHRpbmdzKHQpOnRoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KGBsb2NhbCB0cmFjayAke2V9IG5vdCBwcmVzZW50LCB1bmFibGUgdG8gc2V0IHNldHRpbmdzYCl9KX1zZXRTREtMb2NhbEF1ZGlvVHJhY2tTZXR0aW5ncyhlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgaT10aGlzLmdldExvY2FsVHJhY2soZSk7aT95aWVsZCBpLnNldFNldHRpbmdzKHQpOnRoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KGBsb2NhbCB0cmFjayAke2V9IG5vdCBwcmVzZW50LCB1bmFibGUgdG8gc2V0IHNldHRpbmdzYCl9KX1nZXRNZWRpYVNldHRpbmdzKGUpe3ZhciBzO2xldCB0PXRoaXMuc3RvcmUuZ2V0U3RhdGUodWEpLGk9ZS5hdWRpb1RyYWNrLHI9ZS52aWRlb1RyYWNrO3JldHVybnthdWRpb0lucHV0RGV2aWNlSWQ6KGk9PW51bGw/dm9pZCAwOmkuc2V0dGluZ3MuZGV2aWNlSWQpfHx0LmF1ZGlvSW5wdXREZXZpY2VJZCx2aWRlb0lucHV0RGV2aWNlSWQ6KHI9PW51bGw/dm9pZCAwOnIuc2V0dGluZ3MuZGV2aWNlSWQpfHx0LnZpZGVvSW5wdXREZXZpY2VJZCxhdWRpb091dHB1dERldmljZUlkOihzPXRoaXMuc2RrLmdldEF1ZGlvT3V0cHV0KCkuZ2V0RGV2aWNlKCkpPT1udWxsP3ZvaWQgMDpzLmRldmljZUlkLGF1ZGlvTW9kZTooaT09bnVsbD92b2lkIDA6aS5zZXR0aW5ncy5hdWRpb01vZGUpfHxcInZvaWNlXCJ9fWdldFByZXZpZXdGaWVsZHMoZSl7dmFyIGkscjtpZighZS5pc0luUHJldmlldygpKXJldHVybjtsZXQgdD1fLmNvbnZlcnRQZWVyKGUpO3JldHVybntsb2NhbFBlZXI6dC5pZCxhdWRpb1RyYWNrOnQuYXVkaW9UcmFjayx2aWRlb1RyYWNrOnQudmlkZW9UcmFjayxhc1JvbGU6KChpPWUuYXNSb2xlKT09bnVsbD92b2lkIDA6aS5uYW1lKXx8KChyPWUucm9sZSk9PW51bGw/dm9pZCAwOnIubmFtZSl9fXNldFRyYWNrVm9sdW1lKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBpPXRoaXMuZ2V0VHJhY2tCeUlkKHQpO2k/aSBpbnN0YW5jZW9mIHdlPyh5aWVsZCBpLnNldFZvbHVtZShlKSx0aGlzLnNldFN0YXRlKHI9PntsZXQgcz1yLnRyYWNrc1t0XTtzJiZzLnR5cGU9PT1cImF1ZGlvXCImJihzLnZvbHVtZT1lKX0sXCJ0cmFja1ZvbHVtZVwiKSk6Yi53KGB0cmFjayAke3R9IGlzIG5vdCBhbiBhdWRpbyB0cmFja2ApOnRoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KGB0cmFjayAke3R9IG5vdCBwcmVzZW50LCB1bmFibGUgdG8gc2V0IHZvbHVtZWApfSl9bG9jYWxBbmRWaWRlb1VubXV0aW5nKGUpe2xldCB0PXRoaXMuc3RvcmUuZ2V0U3RhdGUocmUpO2lmKCh0PT1udWxsP3ZvaWQgMDp0LnZpZGVvVHJhY2spIT09ZSlyZXR1cm4hMTtsZXQgaT10aGlzLnN0b3JlLmdldFN0YXRlKGhhKSxyPXRoaXMuc3RvcmUuZ2V0U3RhdGUoWXIpO3JldHVybiBpJiYhcn1sb2dQb3NzaWJsZUluY29uc2lzdGVuY3koZSl7Yi53KFwicG9zc2libGUgaW5jb25zaXN0ZW5jeSBkZXRlY3RlZCAtIFwiLGUpfWFkZFJlbW92ZVZpZGVvUGx1Z2luKGUsdCxpKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYoIWUpe2IudyhcIkludmFsaWQgcGx1Z2luIHJlY2VpdmVkIGluIHN0b3JlXCIpO3JldHVybn1sZXQgcj10aGlzLnN0b3JlLmdldFN0YXRlKFopO2lmKHIpe2xldCBzPXRoaXMuZ2V0TG9jYWxUcmFjayhyKTtzPyh0PT09XCJhZGRcIj95aWVsZCBzLmFkZFBsdWdpbihlLGkpOnQ9PT1cInJlbW92ZVwiJiYoeWllbGQgcy5yZW1vdmVQbHVnaW4oZSkpLHRoaXMuc3luY1Jvb21TdGF0ZShgJHt0fVZpZGVvUGx1Z2luYCkpOnRoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KGB0cmFjayAke3J9IG5vdCBwcmVzZW50LCB1bmFibGUgdG8gJHt0fSBwbHVnaW5gKX19KX1hZGRSZW1vdmVNZWRpYVN0cmVhbVZpZGVvUGx1Z2lucyhlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZihlLmxlbmd0aD09PTApe2IudyhcIkludmFsaWQgcGx1Z2luIHJlY2VpdmVkIGluIHN0b3JlXCIpO3JldHVybn1sZXQgaT10aGlzLnN0b3JlLmdldFN0YXRlKFopO2lmKGkpe2xldCByPXRoaXMuZ2V0TG9jYWxUcmFjayhpKTtyPyh0PT09XCJhZGRcIj95aWVsZCByLmFkZFN0cmVhbVBsdWdpbnMoZSk6dD09PVwicmVtb3ZlXCImJih5aWVsZCByLnJlbW92ZVN0cmVhbVBsdWdpbnMoZSkpLHRoaXMuc3luY1Jvb21TdGF0ZShgJHt0fU1lZGlhU3RyZWFtUGx1Z2luYCkpOnRoaXMubG9nUG9zc2libGVJbmNvbnNpc3RlbmN5KGB0cmFjayAke2l9IG5vdCBwcmVzZW50LCB1bmFibGUgdG8gJHt0fSBwbHVnaW5gKX19KX1hZGRSZW1vdmVBdWRpb1BsdWdpbihlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7aWYoIWUpe2IudyhcIkludmFsaWQgcGx1Z2luIHJlY2VpdmVkIGluIHN0b3JlXCIpO3JldHVybn1sZXQgaT10aGlzLnN0b3JlLmdldFN0YXRlKGxlKTtpZihpKXtsZXQgcj10aGlzLmdldExvY2FsVHJhY2soaSk7cj8odD09PVwiYWRkXCI/eWllbGQgci5hZGRQbHVnaW4oZSk6dD09PVwicmVtb3ZlXCImJih5aWVsZCByLnJlbW92ZVBsdWdpbihlKSksdGhpcy5zeW5jUm9vbVN0YXRlKGAke3R9QXVkaW9QbHVnaW5gKSk6dGhpcy5sb2dQb3NzaWJsZUluY29uc2lzdGVuY3koYHRyYWNrICR7aX0gbm90IHByZXNlbnQsIHVuYWJsZSB0byAke3R9IHBsdWdpbmApfX1jYXRjaChpKXtjb25zb2xlLmVycm9yKGkpfX0pfW9uUm9sZUNoYW5nZVJlcXVlc3QoZSl7dGhpcy5zZXRTdGF0ZSh0PT57dC5yb2xlQ2hhbmdlUmVxdWVzdHMubGVuZ3RoPT09MCYmdC5yb2xlQ2hhbmdlUmVxdWVzdHMucHVzaChfLmNvbnZlcnRSb2xlQ2hhbmdlUmVxdWVzdChlKSl9LFwicm9sZUNoYW5nZVJlcXVlc3RcIil9cmVtb3ZlUm9sZUNoYW5nZVJlcXVlc3QoZSl7dGhpcy5zZXRTdGF0ZSh0PT57bGV0IGk9dC5yb2xlQ2hhbmdlUmVxdWVzdHMuZmluZEluZGV4KHI9PnIudG9rZW49PT1lLnRva2VuKTtpIT09LTEmJnQucm9sZUNoYW5nZVJlcXVlc3RzLnNwbGljZShpLDEpfSxcInJlbW92ZVJvbGVDaGFuZ2VSZXF1ZXN0XCIpfW9uUm9sZVVwZGF0ZSgpe3RoaXMuc3luY1Jvb21TdGF0ZShcInJvbGVVcGRhdGVcIil9Z2V0U3RvcmVMb2NhbFRyYWNrSURmcm9tU0RLVHJhY2soZSl7cmV0dXJuIHRoaXMuc3RvcmUuZ2V0U3RhdGUocGEpLmZpbmQoaT0+e3ZhciByO3JldHVybigocj10aGlzLmdldFRyYWNrQnlJZChpKSk9PW51bGw/dm9pZCAwOnIudHJhY2tJZCk9PT1lLnRyYWNrSWR9KX11cGRhdGVNaWRDYWxsUHJldmlld1Jvb21TdGF0ZShlLHQpe3QuaXNMb2NhbCYmZT09PTgmJnRoaXMuc3RvcmUuZ2V0U3RhdGUobWEpJiZ0aGlzLnNldFN0YXRlKGk9PntpLnJvb20ucm9vbVN0YXRlPVwiQ29ubmVjdGVkXCJ9LFwibWlkQ2FsbFByZXZpZXdDb21wbGV0ZWRcIil9c2V0U2Vzc2lvblN0b3JlVmFsdWVMb2NhbGx5KGUsdD1cInNldFNlc3Npb25TdG9yZVwiKXtsZXQgaT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO3RoaXMuc2V0U3RhdGUocj0+e2kuZm9yRWFjaChzPT57ci5zZXNzaW9uU3RvcmVbcy5rZXldPXMudmFsdWV9KX0sdCl9aGFzQWN0aXZlRWxlbWVudHMoZSl7bGV0IHQ9T2JqZWN0LmtleXModGhpcy5zdG9yZS5nZXRTdGF0ZSgpLndoaXRlYm9hcmRzKS5sZW5ndGg+MCxpPU9iamVjdC5rZXlzKHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5wb2xscykubGVuZ3RoPjAscj1PYmplY3Qua2V5cyh0aGlzLnN0b3JlLmdldFN0YXRlKCkucGVlcnMpLmxlbmd0aD4wLHM9ZS5nZXRTdGF0ZSgpLnJlbW90ZVRyYWNrU3RhdHM7cmV0dXJuIHImJih0fHxpfHxPYmplY3QudmFsdWVzKHMpLnNvbWUobz0+byYmdHlwZW9mIG8uYml0cmF0ZT09XCJudW1iZXJcIiYmby5iaXRyYXRlPjApKX19O3ZhciBGaT1hPT5VP2Ake2F9ICR7ZG9jdW1lbnQudGl0bGV9YDphO3ZhciBHaT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuZXZlbnRCdXM9ZTt0aGlzLmxpc3RlbmVyPXQ7dGhpcy5UQUc9XCJbTmV0d29ya1Rlc3RNYW5hZ2VyXVwiO3RoaXMuY29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyO3RoaXMuc3RhcnQ9ZT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHU7aWYoIWUpcmV0dXJuO2xldHt1cmw6dCx0aW1lb3V0Omksc2NvcmVNYXA6cn09ZSxzPXRoaXMuY29udHJvbGxlci5zaWduYWwsbz1EYXRlLm5vdygpLG49MCxkPUooaSkudGhlbigoKT0+e3RoaXMuY29udHJvbGxlci5hYm9ydCgpfSk7dHJ5e2xldCBoPSh1PSh5aWVsZCBmZXRjaChgJHt0fT8ke0RhdGUubm93KCl9YCx7c2lnbmFsOnN9KSkuYm9keSk9PW51bGw/dm9pZCAwOnUuZ2V0UmVhZGVyKCk7aWYoIWgpdGhyb3cgRXJyb3IoXCJ1bmFibGUgdG8gcHJvY2VzcyByZXF1ZXN0XCIpO2xldCBUPSgpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZihoKXRyeXtsZXQgZz0hMTtmb3IoOyFnOyl7bGV0e3ZhbHVlOmYsZG9uZTpFfT15aWVsZCBoLnJlYWQoKTtnPUUsZiYmKG4rPWYuYnl0ZUxlbmd0aCx0aGlzLnNlbmRTY29yZSh7c2NvcmVNYXA6cixkb3dubG9hZGVkU2l6ZTpuLHN0YXJ0VGltZTpvfSkpfX1jYXRjaChnKXtnLm5hbWUhPT1cIkFib3J0RXJyb3JcIiYmbC5kKHRoaXMuVEFHLGcpfX0pO3JldHVybiBQcm9taXNlLnJhY2UoW1QoKSxkXSkudGhlbigoKT0+e3RoaXMuc2VuZFNjb3JlKHtzY29yZU1hcDpyLGRvd25sb2FkZWRTaXplOm4sc3RhcnRUaW1lOm8sZmluaXNoZWQ6ITB9KX0pLmNhdGNoKGc9PntsLmQodGhpcy5UQUcsZyksdGhpcy51cGRhdGVTY29yZVRvTGlzdGVuZXIoMCksdGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh5LnByZXZpZXdOZXR3b3JrUXVhbGl0eSh7ZXJyb3I6Zy5tZXNzYWdlfSkpfSl9Y2F0Y2gocCl7cC5uYW1lIT09XCJBYm9ydEVycm9yXCI/KGwuZCh0aGlzLlRBRyxwKSx0aGlzLnVwZGF0ZVNjb3JlVG9MaXN0ZW5lcigwKSx0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkucHJldmlld05ldHdvcmtRdWFsaXR5KHtlcnJvcjpwLm1lc3NhZ2V9KSkpOmwuZCh0aGlzLlRBRyxwKX19KTt0aGlzLnN0b3A9KCk9Pnt0aGlzLmNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWR8fHRoaXMuY29udHJvbGxlci5hYm9ydCgpfTt0aGlzLnNlbmRTY29yZT0oe3Njb3JlTWFwOmUsZG93bmxvYWRlZFNpemU6dCxzdGFydFRpbWU6aSxmaW5pc2hlZDpyPSExfSk9PntsZXQgcz0oRGF0ZS5ub3coKS1pKS8xZTMsbj10LzEwMjQvcyo4LGQ9LTE7Zm9yKGxldCB1IGluIGUpe2xldCBwPWVbdV07bj49cC5sb3cmJighcC5oaWdofHxuPD1wLmhpZ2gpJiYoZD1OdW1iZXIodSkpfXRoaXMudXBkYXRlU2NvcmVUb0xpc3RlbmVyKGQpLHImJnRoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5wcmV2aWV3TmV0d29ya1F1YWxpdHkoe3Njb3JlOmQsZG93bkxpbms6bi50b0ZpeGVkKDIpfSkpfX11cGRhdGVTY29yZVRvTGlzdGVuZXIoZSl7dmFyIHQsaTtlIT09dGhpcy5zY29yZSYmKHRoaXMuc2NvcmU9ZSwoaT0odD10aGlzLmxpc3RlbmVyKT09bnVsbD92b2lkIDA6dC5vbk5ldHdvcmtRdWFsaXR5KT09bnVsbHx8aS5jYWxsKHQsZSkpfX07dmFyIEJ0PWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpLHIscyxvKXt0aGlzLnN0b3JlPWU7dGhpcy50cmFuc3BvcnQ9dDt0aGlzLmRldmljZU1hbmFnZXI9aTt0aGlzLnB1Ymxpc2g9cjt0aGlzLnJlbW92ZUF1eGlsaWFyeVRyYWNrPXM7dGhpcy5saXN0ZW5lcj1vO3RoaXMuaGFuZGxlTG9jYWxQZWVyUm9sZVVwZGF0ZT1pPT5jKHRoaXMsW2ldLGZ1bmN0aW9uKih7b2xkUm9sZTplLG5ld1JvbGU6dH0pe3ZhciBzO2xldCByPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCk7ciYmKHlpZWxkIHRoaXMuZGlmZlJvbGVzQW5kUHVibGlzaFRyYWNrcyh7b2xkUm9sZTplLG5ld1JvbGU6dH0pLChzPXRoaXMubGlzdGVuZXIpPT1udWxsfHxzLm9uUGVlclVwZGF0ZSg4LHIpKX0pO3RoaXMuZGlmZlJvbGVzQW5kUHVibGlzaFRyYWNrcz1pPT5jKHRoaXMsW2ldLGZ1bmN0aW9uKih7b2xkUm9sZTplLG5ld1JvbGU6dH0pe3ZhciBnLGYsRSx2LFIsJDtsZXQgcj1uZXcgU2V0KGUucHVibGlzaFBhcmFtcy5hbGxvd2VkKSxzPW5ldyBTZXQodC5wdWJsaXNoUGFyYW1zLmFsbG93ZWQpLG89dGhpcy5yZW1vdmVUcmFjayhyLHMsXCJ2aWRlb1wiKSxuPXRoaXMucmVtb3ZlVHJhY2socixzLFwiYXVkaW9cIiksZD10aGlzLnJlbW92ZVRyYWNrKHIscyxcInNjcmVlblwiKSx1PXRoaXMuaGFzU2ltdWxjYXN0RGlmZmVyZW5jZSgoZz1lLnB1Ymxpc2hQYXJhbXMuc2ltdWxjYXN0KT09bnVsbD92b2lkIDA6Zy52aWRlbywoZj10LnB1Ymxpc2hQYXJhbXMuc2ltdWxjYXN0KT09bnVsbD92b2lkIDA6Zi52aWRlbykscD10aGlzLmhhc1NpbXVsY2FzdERpZmZlcmVuY2UoKEU9ZS5wdWJsaXNoUGFyYW1zLnNpbXVsY2FzdCk9PW51bGw/dm9pZCAwOkUuc2NyZWVuLCh2PXQucHVibGlzaFBhcmFtcy5zaW11bGNhc3QpPT1udWxsP3ZvaWQgMDp2LnNjcmVlbiksaD0oJD0oUj10aGlzLnN0b3JlLmdldExvY2FsUGVlcigpKT09bnVsbD92b2lkIDA6Ui52aWRlb1RyYWNrKT09bnVsbD92b2lkIDA6JC5lbmFibGVkO3lpZWxkIHRoaXMucmVtb3ZlQXVkaW9UcmFjayhuKSx5aWVsZCB0aGlzLnJlbW92ZVZpZGVvVHJhY2tzKG98fHUpLHlpZWxkIHRoaXMucmVtb3ZlU2NyZWVuVHJhY2tzKGR8fHApO2xldCBUPXRoaXMuZ2V0U2V0dGluZ3MoKTt1JiYoVC5pc1ZpZGVvTXV0ZWQ9IWgpLHlpZWxkIHRoaXMucHVibGlzaChUKSx5aWVsZCB0aGlzLnN5bmNEZXZpY2VzKFQsdCl9KX1zeW5jRGV2aWNlcyhlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXsoIWUuaXNBdWRpb011dGVkfHwhZS5pc1ZpZGVvTXV0ZWQpJiZ0LnB1Ymxpc2hQYXJhbXMuYWxsb3dlZC5sZW5ndGg+MCYmKHlpZWxkIHRoaXMuZGV2aWNlTWFuYWdlci5pbml0KCEwKSl9KX1yZW1vdmVWaWRlb1RyYWNrcyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGk7aWYoIWUpcmV0dXJuO2xldCB0PXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCk7dCE9bnVsbCYmdC52aWRlb1RyYWNrJiYodC52aWRlb1RyYWNrLmlzUHVibGlzaGVkP3lpZWxkIHRoaXMudHJhbnNwb3J0LnVucHVibGlzaChbdC52aWRlb1RyYWNrXSk6eWllbGQgdC52aWRlb1RyYWNrLmNsZWFudXAoKSwoaT10aGlzLmxpc3RlbmVyKT09bnVsbHx8aS5vblRyYWNrVXBkYXRlKDEsdC52aWRlb1RyYWNrLHQpLHQudmlkZW9UcmFjaz12b2lkIDApLHlpZWxkIHRoaXMucmVtb3ZlQXV4VHJhY2tzKHI9PnIuc291cmNlIT09XCJzY3JlZW5cIiYmci50eXBlPT09XCJ2aWRlb1wiKX0pfXJlbW92ZUF1ZGlvVHJhY2soZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBpO2lmKCFlKXJldHVybjtsZXQgdD10aGlzLnN0b3JlLmdldExvY2FsUGVlcigpO3QhPW51bGwmJnQuYXVkaW9UcmFjayYmKHQuYXVkaW9UcmFjay5pc1B1Ymxpc2hlZD95aWVsZCB0aGlzLnRyYW5zcG9ydC51bnB1Ymxpc2goW3QuYXVkaW9UcmFja10pOnlpZWxkIHQuYXVkaW9UcmFjay5jbGVhbnVwKCksKGk9dGhpcy5saXN0ZW5lcik9PW51bGx8fGkub25UcmFja1VwZGF0ZSgxLHQuYXVkaW9UcmFjayx0KSx0LmF1ZGlvVHJhY2s9dm9pZCAwKSx5aWVsZCB0aGlzLnJlbW92ZUF1eFRyYWNrcyhyPT5yLnNvdXJjZSE9PVwic2NyZWVuXCImJnIudHlwZT09PVwiYXVkaW9cIil9KX1yZW1vdmVTY3JlZW5UcmFja3MoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2UmJih5aWVsZCB0aGlzLnJlbW92ZUF1eFRyYWNrcyh0PT50LnNvdXJjZT09PVwic2NyZWVuXCIpKX0pfXJlbW92ZUF1eFRyYWNrcyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKTtpZih0IT1udWxsJiZ0LmF1eGlsaWFyeVRyYWNrcyl7bGV0IGk9Wy4uLnQuYXV4aWxpYXJ5VHJhY2tzXTtmb3IobGV0IHIgb2YgaSllKHIpJiYoeWllbGQgdGhpcy5yZW1vdmVBdXhpbGlhcnlUcmFjayhyLnRyYWNrSWQpKX19KX1yZW1vdmVUcmFjayhlLHQsaSl7cmV0dXJuIGUuaGFzKGkpJiYhdC5oYXMoaSl9aGFzU2ltdWxjYXN0RGlmZmVyZW5jZShlLHQpe3ZhciBpLHIscztyZXR1cm4hZSYmIXQ/ITE6KChpPWU9PW51bGw/dm9pZCAwOmUubGF5ZXJzKT09bnVsbD92b2lkIDA6aS5sZW5ndGgpIT09KChyPXQ9PW51bGw/dm9pZCAwOnQubGF5ZXJzKT09bnVsbD92b2lkIDA6ci5sZW5ndGgpPyEwOiEhKChzPWU9PW51bGw/dm9pZCAwOmUubGF5ZXJzKSE9bnVsbCYmcy5zb21lKG89Pnt2YXIgZDtsZXQgbj0oZD10PT1udWxsP3ZvaWQgMDp0LmxheWVycyk9PW51bGw/dm9pZCAwOmQuZmluZCh1PT51LnJpZD09PW8ucmlkKTtyZXR1cm4obj09bnVsbD92b2lkIDA6bi5tYXhCaXRyYXRlKSE9PW8ubWF4Qml0cmF0ZXx8KG49PW51bGw/dm9pZCAwOm4ubWF4RnJhbWVyYXRlKSE9PW8ubWF4RnJhbWVyYXRlfSkpfWdldFNldHRpbmdzKCl7bGV0e2lzQXVkaW9NdXRlZDplLGlzVmlkZW9NdXRlZDp0fT10aGlzLmdldE11dGVkU3RhdHVzKCkse2F1ZGlvSW5wdXREZXZpY2VJZDppLGF1ZGlvT3V0cHV0RGV2aWNlSWQ6cn09dGhpcy5nZXRBdWRpb0RldmljZVNldHRpbmdzKCkscz10aGlzLmdldFZpZGVvSW5wdXREZXZpY2VJZCgpO3JldHVybntpc0F1ZGlvTXV0ZWQ6ZSxpc1ZpZGVvTXV0ZWQ6dCxhdWRpb0lucHV0RGV2aWNlSWQ6aSxhdWRpb091dHB1dERldmljZUlkOnIsdmlkZW9EZXZpY2VJZDpzfX1nZXRNdXRlZFN0YXR1cygpe3ZhciB0LGkscjtsZXQgZT0odD10aGlzLnN0b3JlLmdldENvbmZpZygpKT09bnVsbD92b2lkIDA6dC5zZXR0aW5ncztyZXR1cm57aXNBdWRpb011dGVkOihpPWU9PW51bGw/dm9pZCAwOmUuaXNBdWRpb011dGVkKSE9bnVsbD9pOiEwLGlzVmlkZW9NdXRlZDoocj1lPT1udWxsP3ZvaWQgMDplLmlzVmlkZW9NdXRlZCkhPW51bGw/cjohMH19Z2V0QXVkaW9EZXZpY2VTZXR0aW5ncygpe3ZhciByLHMsbztsZXQgZT0ocj10aGlzLnN0b3JlLmdldENvbmZpZygpKT09bnVsbD92b2lkIDA6ci5zZXR0aW5ncyx0PSgocz10aGlzLmRldmljZU1hbmFnZXIuY3VycmVudFNlbGVjdGlvbi5hdWRpb0lucHV0KT09bnVsbD92b2lkIDA6cy5kZXZpY2VJZCl8fChlPT1udWxsP3ZvaWQgMDplLmF1ZGlvSW5wdXREZXZpY2VJZCl8fFwiZGVmYXVsdFwiLGk9KChvPXRoaXMuZGV2aWNlTWFuYWdlci5jdXJyZW50U2VsZWN0aW9uLmF1ZGlvT3V0cHV0KT09bnVsbD92b2lkIDA6by5kZXZpY2VJZCl8fChlPT1udWxsP3ZvaWQgMDplLmF1ZGlvT3V0cHV0RGV2aWNlSWQpfHxcImRlZmF1bHRcIjtyZXR1cm57YXVkaW9JbnB1dERldmljZUlkOnQsYXVkaW9PdXRwdXREZXZpY2VJZDppfX1nZXRWaWRlb0lucHV0RGV2aWNlSWQoKXt2YXIgdCxpO2xldCBlPSh0PXRoaXMuc3RvcmUuZ2V0Q29uZmlnKCkpPT1udWxsP3ZvaWQgMDp0LnNldHRpbmdzO3JldHVybigoaT10aGlzLmRldmljZU1hbmFnZXIuY3VycmVudFNlbGVjdGlvbi52aWRlb0lucHV0KT09bnVsbD92b2lkIDA6aS5kZXZpY2VJZCl8fChlPT1udWxsP3ZvaWQgMDplLnZpZGVvRGV2aWNlSWQpfHxcImRlZmF1bHRcIn19O3ZhciBvcz1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuVEFHPVwiW0hUVFBBbmFseXRpY3NUcmFuc3BvcnRdXCI7dGhpcy5mYWlsZWRFdmVudHM9bmV3IGZlKFwiY2xpZW50LWV2ZW50c1wiKTt0aGlzLmlzQ29ubmVjdGVkPSEwO3RoaXMuZW52PW51bGw7dGhpcy53ZWJzb2NrZXRVUkw9XCJcIn1zZXRFbnYoZSl7dGhpcy5lbnY9ZSx0aGlzLmZsdXNoRmFpbGVkRXZlbnRzKCl9c2V0V2Vic29ja2V0RW5kcG9pbnQoZSl7dGhpcy53ZWJzb2NrZXRVUkw9ZX1zZW5kRXZlbnQoZSl7aWYoIXRoaXMuZW52KXt0aGlzLmFkZEV2ZW50VG9TdG9yYWdlKGUpO3JldHVybn1sZXQgdD17ZXZlbnQ6ZS5uYW1lLHBheWxvYWQ6ZS5wcm9wZXJ0aWVzLGV2ZW50X2lkOlN0cmluZyhlLnRpbWVzdGFtcCkscGVlcjplLm1ldGFkYXRhLnBlZXIsdGltZXN0YW1wOmUudGltZXN0YW1wLGRldmljZV9pZDplLmRldmljZV9pZCxjbHVzdGVyOnt3ZWJzb2NrZXRfdXJsOnRoaXMud2Vic29ja2V0VVJMfX0saT10aGlzLmVudj09PVwicHJvZFwiP2VhOnRhO2ZldGNoKGkse21ldGhvZDpcIlBPU1RcIixoZWFkZXJzOntcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvblwiLEF1dGhvcml6YXRpb246YEJlYXJlciAke2UubWV0YWRhdGEudG9rZW59YCx1c2VyX2FnZW50X3YyOmUubWV0YWRhdGEudXNlckFnZW50fSxib2R5OkpTT04uc3RyaW5naWZ5KHQpfSkudGhlbihyPT57aWYoci5zdGF0dXM9PT00MDEpe3RoaXMucmVtb3ZlRnJvbVN0b3JhZ2UoZSk7cmV0dXJufWlmKHIuc3RhdHVzIT09MjAwKXRocm93IEVycm9yKHIuc3RhdHVzVGV4dCk7dGhpcy5yZW1vdmVGcm9tU3RvcmFnZShlKX0pLmNhdGNoKHI9PntsLnYodGhpcy5UQUcsXCJGYWlsZWQgdG8gc2VuZCBldmVudFwiLHIsZSksdGhpcy5hZGRFdmVudFRvU3RvcmFnZShlKX0pfWZsdXNoRmFpbGVkRXZlbnRzKCl7bGV0IGU9dGhpcy5mYWlsZWRFdmVudHMuZ2V0KCk7ZT09bnVsbHx8ZS5mb3JFYWNoKHQ9PnRoaXMuc2VuZEV2ZW50KHQpKX1hZGRFdmVudFRvU3RvcmFnZShlKXtsZXQgdD10aGlzLmZhaWxlZEV2ZW50cy5nZXQoKXx8W107dC5maW5kKGk9PmkudGltZXN0YW1wPT09ZS50aW1lc3RhbXApfHwodC5sZW5ndGg9PT0xMDAmJnQuc2hpZnQoKSx0LnB1c2goZSksdGhpcy5mYWlsZWRFdmVudHMuc2V0KHQpKX1yZW1vdmVGcm9tU3RvcmFnZShlKXtsZXQgdD10aGlzLmZhaWxlZEV2ZW50cy5nZXQoKXx8W10saT10LmZpbmRJbmRleChyPT5yLnRpbWVzdGFtcD09PWUudGltZXN0YW1wKTtpPi0xJiYodC5zcGxpY2UoaSwxKSx0aGlzLmZhaWxlZEV2ZW50cy5zZXQodCkpfX0sSGU9bmV3IG9zO3ZhciBWdD1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLnR5cGU9ZS50eXBlLHRoaXMuc291cmNlPWUuc291cmNlfHxcInJlZ3VsYXJcIix0aGlzLmRlc2NyaXB0aW9uPVwiXCIsZSBpbnN0YW5jZW9mIERlPyh0aGlzLm11dGU9IWUuZW5hYmxlZCx0aGlzLnRyYWNrX2lkPWUucHVibGlzaGVkVHJhY2tJZCx0aGlzLnN0cmVhbV9pZD1lLnN0cmVhbS5pZCk6KHRoaXMubXV0ZT1lLm11dGUsdGhpcy50cmFja19pZD1lLnRyYWNrX2lkLHRoaXMuc3RyZWFtX2lkPWUuc3RyZWFtX2lkKX19O3ZhciBGdD1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuVEFHPVwiW1N0b3JlXTpcIjt0aGlzLmtub3duUm9sZXM9e307dGhpcy5wZWVycz17fTt0aGlzLnRyYWNrcz1uZXcgTWFwO3RoaXMucGVlclRyYWNrU3RhdGVzPXt9O3RoaXMuc3BlYWtlcnM9W107dGhpcy5yb2xlRGV0YWlsc0Fycml2ZWQ9ITE7dGhpcy5lbnY9XCJwcm9kXCI7dGhpcy5zaW11bGNhc3RFbmFibGVkPSExO3RoaXMudXNlckFnZW50PUV0KHRoaXMuZW52KTt0aGlzLnBvbGxzPW5ldyBNYXA7dGhpcy53aGl0ZWJvYXJkcz1uZXcgTWFwO3RoaXMuYWRkUGVybWlzc2lvblRvUm9sZT0oZSx0LGkscik9Pnt2YXIgbztpZighdGhpcy5rbm93blJvbGVzW2VdKXtsLmQodGhpcy5UQUcsYHJvbGUgJHtlfSBpcyBub3QgcHJlc2VudCBpbiBnaXZlbiByb2xlc2AsdGhpcy5rbm93blJvbGVzKTtyZXR1cm59bGV0IHM9dGhpcy5rbm93blJvbGVzW2VdLnBlcm1pc3Npb25zO3Q9PT1cInRyYW5zY3JpcHRpb25zXCImJnI/c1t0XT1NKG0oe30sc1t0XSkse1tyXTpbaV19KTp0PT09XCJ3aGl0ZWJvYXJkXCImJihzW3RdfHwoc1t0XT1bXSksKG89c1t0XSk9PW51bGx8fG8ucHVzaChpKSl9O3RoaXMuYWRkV2hpdGVib2FyZFBsdWdpblRvUm9sZT1lPT57dmFyIGkscixzO2xldCB0PWU9PW51bGw/dm9pZCAwOmUucGVybWlzc2lvbnM7KGk9dD09bnVsbD92b2lkIDA6dC5hZG1pbik9PW51bGx8fGkuZm9yRWFjaChvPT50aGlzLmFkZFBlcm1pc3Npb25Ub1JvbGUobyxcIndoaXRlYm9hcmRcIixcImFkbWluXCIpKSwocj10PT1udWxsP3ZvaWQgMDp0LnJlYWRlcik9PW51bGx8fHIuZm9yRWFjaChvPT50aGlzLmFkZFBlcm1pc3Npb25Ub1JvbGUobyxcIndoaXRlYm9hcmRcIixcInJlYWRcIikpLChzPXQ9PW51bGw/dm9pZCAwOnQud3JpdGVyKT09bnVsbHx8cy5mb3JFYWNoKG89PnRoaXMuYWRkUGVybWlzc2lvblRvUm9sZShvLFwid2hpdGVib2FyZFwiLFwid3JpdGVcIikpfTt0aGlzLmFkZFRyYW5zY3JpcHRpb25zUGx1Z2luVG9Sb2xlPShlPVtdKT0+e3ZhciB0LGk7Zm9yKGxldCByIG9mIGUpKGk9KHQ9ci5wZXJtaXNzaW9ucyk9PW51bGw/dm9pZCAwOnQuYWRtaW4pPT1udWxsfHxpLmZvckVhY2gocz0+dGhpcy5hZGRQZXJtaXNzaW9uVG9Sb2xlKHMsXCJ0cmFuc2NyaXB0aW9uc1wiLFwiYWRtaW5cIixyLm1vZGUpKX07dGhpcy5oYW5kbGVOb2lzZUNhbmNlbGxhdGlvblBsdWdpbj1lPT57dGhpcy5yb29tJiYodGhpcy5yb29tLmlzTm9pc2VDYW5jZWxsYXRpb25FbmFibGVkPSEhKGUhPW51bGwmJmUuZW5hYmxlZCkmJiEhdGhpcy5yb29tLmlzTm9pc2VDYW5jZWxsYXRpb25FbmFibGVkKX19Z2V0Q29uZmlnKCl7cmV0dXJuIHRoaXMuY29uZmlnfXNldFNpbXVsY2FzdEVuYWJsZWQoZSl7dGhpcy5zaW11bGNhc3RFbmFibGVkPWV9cmVtb3ZlUmVtb3RlVHJhY2tzKCl7dGhpcy50cmFja3MuZm9yRWFjaChlPT57KGUgaW5zdGFuY2VvZiBpZXx8ZSBpbnN0YW5jZW9mIE8pJiYodGhpcy5yZW1vdmVUcmFjayhlKSxkZWxldGUgdGhpcy5wZWVyVHJhY2tTdGF0ZXNbZS50cmFja0lkXSl9KX1nZXRFbnYoKXtyZXR1cm4gdGhpcy5lbnZ9Z2V0UHVibGlzaFBhcmFtcygpe2xldCBlPXRoaXMuZ2V0TG9jYWxQZWVyKCksdD0oZT09bnVsbD92b2lkIDA6ZS5hc1JvbGUpfHwoZT09bnVsbD92b2lkIDA6ZS5yb2xlKTtyZXR1cm4gdD09bnVsbD92b2lkIDA6dC5wdWJsaXNoUGFyYW1zfWdldFJvb20oKXtyZXR1cm4gdGhpcy5yb29tfWdldFBvbGljeUZvclJvbGUoZSl7cmV0dXJuIHRoaXMua25vd25Sb2xlc1tlXX1nZXRLbm93blJvbGVzKCl7cmV0dXJuIHRoaXMua25vd25Sb2xlc31nZXRUZW1wbGF0ZUFwcERhdGEoKXtyZXR1cm4gdGhpcy50ZW1wbGF0ZUFwcERhdGF9Z2V0TG9jYWxQZWVyKCl7aWYodGhpcy5sb2NhbFBlZXJJZCYmdGhpcy5wZWVyc1t0aGlzLmxvY2FsUGVlcklkXSlyZXR1cm4gdGhpcy5wZWVyc1t0aGlzLmxvY2FsUGVlcklkXX1nZXRSZW1vdGVQZWVycygpe3JldHVybiBPYmplY3QudmFsdWVzKHRoaXMucGVlcnMpLmZpbHRlcihlPT4hZS5pc0xvY2FsKX1nZXRQZWVycygpe3JldHVybiBPYmplY3QudmFsdWVzKHRoaXMucGVlcnMpfWdldFBlZXJNYXAoKXtyZXR1cm4gdGhpcy5wZWVyc31nZXRQZWVyQnlJZChlKXtpZih0aGlzLnBlZXJzW2VdKXJldHVybiB0aGlzLnBlZXJzW2VdfWdldFRyYWNrc01hcCgpe3JldHVybiB0aGlzLnRyYWNrc31nZXRUcmFja3MoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnRyYWNrcy52YWx1ZXMoKSl9Z2V0VmlkZW9UcmFja3MoKXtyZXR1cm4gdGhpcy5nZXRUcmFja3MoKS5maWx0ZXIoZT0+ZS50eXBlPT09XCJ2aWRlb1wiKX1nZXRSZW1vdGVWaWRlb1RyYWNrcygpe3JldHVybiB0aGlzLmdldFRyYWNrcygpLmZpbHRlcihlPT5lIGluc3RhbmNlb2YgTyl9Z2V0QXVkaW9UcmFja3MoKXtyZXR1cm4gdGhpcy5nZXRUcmFja3MoKS5maWx0ZXIoZT0+ZS50eXBlPT09XCJhdWRpb1wiKX1nZXRQZWVyVHJhY2tzKGUpe2xldCB0PWU/dGhpcy5wZWVyc1tlXTp2b2lkIDAsaT1bXTtyZXR1cm4gdCE9bnVsbCYmdC52aWRlb1RyYWNrJiZpLnB1c2godC52aWRlb1RyYWNrKSx0IT1udWxsJiZ0LmF1ZGlvVHJhY2smJmkucHVzaCh0LmF1ZGlvVHJhY2spLGkuY29uY2F0KCh0PT1udWxsP3ZvaWQgMDp0LmF1eGlsaWFyeVRyYWNrcyl8fFtdKX1nZXRMb2NhbFBlZXJUcmFja3MoKXtyZXR1cm4gdGhpcy5nZXRQZWVyVHJhY2tzKHRoaXMubG9jYWxQZWVySWQpfWhhc1RyYWNrKGUpe3JldHVybiB0aGlzLnRyYWNrcy5oYXMoZSl9Z2V0VHJhY2tCeUlkKGUpe3ZhciByLHM7bGV0IHQ9QXJyYXkuZnJvbSh0aGlzLnRyYWNrcy52YWx1ZXMoKSkuZmluZChvPT5vLnRyYWNrSWQ9PT1lKTtpZih0KXJldHVybiB0O2xldCBpPXRoaXMuZ2V0TG9jYWxQZWVyKCk7aWYoaSl7aWYoKHI9aS5hdWRpb1RyYWNrKSE9bnVsbCYmci5pc1B1Ymxpc2hlZFRyYWNrSWQoZSkpcmV0dXJuIGkuYXVkaW9UcmFjaztpZigocz1pLnZpZGVvVHJhY2spIT1udWxsJiZzLmlzUHVibGlzaGVkVHJhY2tJZChlKSlyZXR1cm4gaS52aWRlb1RyYWNrfX1nZXRQZWVyQnlUcmFja0lkKGUpe2xldCB0PUFycmF5LmZyb20odGhpcy50cmFja3MudmFsdWVzKCkpLmZpbmQoaT0+aS50cmFja0lkPT09ZSk7cmV0dXJuIHQhPW51bGwmJnQucGVlcklkP3RoaXMucGVlcnNbdC5wZWVySWRdOnZvaWQgMH1nZXRTcGVha2Vycygpe3JldHVybiB0aGlzLnNwZWFrZXJzfWdldFNwZWFrZXJQZWVycygpe3JldHVybiB0aGlzLnNwZWFrZXJzLm1hcChlPT5lLnBlZXIpfWdldFVzZXJBZ2VudCgpe3JldHVybiB0aGlzLnVzZXJBZ2VudH1jcmVhdGVBbmRTZXRVc2VyQWdlbnQoZSl7dGhpcy51c2VyQWdlbnQ9RXQodGhpcy5lbnYsZSl9c2V0Um9vbShlKXt0aGlzLnJvb209ZX1zZXRLbm93blJvbGVzKGUpe3ZhciBpLHI7aWYodGhpcy5rbm93blJvbGVzPWUua25vd25fcm9sZXMsdGhpcy5hZGRQbHVnaW5zVG9Sb2xlcyhlLnBsdWdpbnMpLHRoaXMucm9sZURldGFpbHNBcnJpdmVkPSEwLHRoaXMudGVtcGxhdGVBcHBEYXRhPWUuYXBwX2RhdGEsIXRoaXMuc2ltdWxjYXN0RW5hYmxlZClyZXR1cm47bGV0IHQ9KGk9dGhpcy5rbm93blJvbGVzW2UubmFtZV0pPT1udWxsP3ZvaWQgMDppLnB1Ymxpc2hQYXJhbXM7dGhpcy52aWRlb0xheWVycz10aGlzLmNvbnZlcnRTaW11bGNhc3RMYXllcnMoKHI9dC5zaW11bGNhc3QpPT1udWxsP3ZvaWQgMDpyLnZpZGVvKSx0aGlzLnVwZGF0ZVBlZXJzUG9saWN5KCl9aGFzUm9sZURldGFpbHNBcnJpdmVkKCl7cmV0dXJuIHRoaXMucm9sZURldGFpbHNBcnJpdmVkfXNldENvbmZpZyhlKXt2YXIgdCxpLHI7aWYoWC5yZW1lbWJlckRldmljZXMoISFlLnJlbWVtYmVyRGV2aWNlU2VsZWN0aW9uKSxlLnJlbWVtYmVyRGV2aWNlU2VsZWN0aW9uKXtsZXQgcz1YLmdldFNlbGVjdGlvbigpO3MmJihlLnNldHRpbmdzfHwoZS5zZXR0aW5ncz17fSksKHQ9cy5hdWRpb0lucHV0KSE9bnVsbCYmdC5kZXZpY2VJZCYmKGUuc2V0dGluZ3MuYXVkaW9JbnB1dERldmljZUlkPWUuc2V0dGluZ3MuYXVkaW9JbnB1dERldmljZUlkfHxzLmF1ZGlvSW5wdXQuZGV2aWNlSWQpLChpPXMuYXVkaW9PdXRwdXQpIT1udWxsJiZpLmRldmljZUlkJiYoZS5zZXR0aW5ncy5hdWRpb091dHB1dERldmljZUlkPWUuc2V0dGluZ3MuYXVkaW9PdXRwdXREZXZpY2VJZHx8cy5hdWRpb091dHB1dC5kZXZpY2VJZCksKHI9cy52aWRlb0lucHV0KSE9bnVsbCYmci5kZXZpY2VJZCYmKGUuc2V0dGluZ3MudmlkZW9EZXZpY2VJZD1lLnNldHRpbmdzLnZpZGVvRGV2aWNlSWR8fHMudmlkZW9JbnB1dC5kZXZpY2VJZCkpfWUuYXV0b01hbmFnZVZpZGVvPWUuYXV0b01hbmFnZVZpZGVvIT09ITEsZS5hdXRvTWFuYWdlV2FrZUxvY2s9ZS5hdXRvTWFuYWdlV2FrZUxvY2shPT0hMSx0aGlzLmNvbmZpZz1lLHRoaXMuc2V0RW52KCl9YWRkUGVlcihlKXt0aGlzLnBlZXJzW2UucGVlcklkXT1lLGUuaXNMb2NhbCYmKHRoaXMubG9jYWxQZWVySWQ9ZS5wZWVySWQpfWFkZFRyYWNrKGUpe3RoaXMudHJhY2tzLnNldChlLGUpfWdldFRyYWNrU3RhdGUoZSl7cmV0dXJuIHRoaXMucGVlclRyYWNrU3RhdGVzW2VdfXNldFRyYWNrU3RhdGUoZSl7dGhpcy5wZWVyVHJhY2tTdGF0ZXNbZS50cmFja0luZm8udHJhY2tfaWRdPWV9cmVtb3ZlVHJhY2tTdGF0ZShlKXtkZWxldGUgdGhpcy5wZWVyVHJhY2tTdGF0ZXNbZV19cmVtb3ZlUGVlcihlKXt0aGlzLmxvY2FsUGVlcklkPT09ZSYmKHRoaXMubG9jYWxQZWVySWQ9dm9pZCAwKSxkZWxldGUgdGhpcy5wZWVyc1tlXX1yZW1vdmVUcmFjayhlKXt0aGlzLnRyYWNrcy5kZWxldGUoZSl9dXBkYXRlU3BlYWtlcnMoZSl7dGhpcy5zcGVha2Vycz1lfXVwZGF0ZUF1ZGlvT3V0cHV0Vm9sdW1lKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtmb3IobGV0IHQgb2YgdGhpcy5nZXRBdWRpb1RyYWNrcygpKXlpZWxkIHQuc2V0Vm9sdW1lKGUpfSl9dXBkYXRlQXVkaW9PdXRwdXREZXZpY2UoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PVtdO3RoaXMuZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKGk9PntpIGluc3RhbmNlb2YgaWUmJnQucHVzaChpLnNldE91dHB1dERldmljZShlKSl9KSx5aWVsZCBQcm9taXNlLmFsbCh0KX0pfWdldFNpbXVsY2FzdExheWVycyhlKXt2YXIgdDtyZXR1cm4hdGhpcy5zaW11bGNhc3RFbmFibGVkfHwhW1wic2NyZWVuXCIsXCJyZWd1bGFyXCJdLmluY2x1ZGVzKGUpP1tdOmU9PT1cInNjcmVlblwiP1tdOigodD10aGlzLnZpZGVvTGF5ZXJzKT09bnVsbD92b2lkIDA6dC5sYXllcnMpfHxbXX1jb252ZXJ0U2ltdWxjYXN0TGF5ZXJzKGUpe2lmKGUpcmV0dXJuIE0obSh7fSxlKSx7bGF5ZXJzOihlLmxheWVyc3x8W10pLm1hcCh0PT5NKG0oe30sdCkse21heEJpdHJhdGU6dC5tYXhCaXRyYXRlKjFlM30pKX0pfWdldFNpbXVsY2FzdERlZmluaXRpb25zRm9yUGVlcihlLHQpe3ZhciBuLGQsdTtpZihbIWV8fCFlLnJvbGUsdD09PVwic2NyZWVuXCIsIXRoaXMuc2ltdWxjYXN0RW5hYmxlZF0uc29tZShwPT4hIXApKXJldHVybltdO2xldCBpPXRoaXMuZ2V0UG9saWN5Rm9yUm9sZShlLnJvbGUubmFtZSkucHVibGlzaFBhcmFtcyxyLHMsbztyZXR1cm4gdD09PVwicmVndWxhclwiPyhyPShuPWkuc2ltdWxjYXN0KT09bnVsbD92b2lkIDA6bi52aWRlbyxzPWkudmlkZW8ud2lkdGgsbz1pLnZpZGVvLmhlaWdodCk6dD09PVwic2NyZWVuXCImJihyPShkPWkuc2ltdWxjYXN0KT09bnVsbD92b2lkIDA6ZC5zY3JlZW4scz1pLnNjcmVlbi53aWR0aCxvPWkuc2NyZWVuLmhlaWdodCksKCh1PXI9PW51bGw/dm9pZCAwOnIubGF5ZXJzKT09bnVsbD92b2lkIDA6dS5tYXAocD0+e2xldCBoPVdlW3AucmlkXSxUPXt3aWR0aDpNYXRoLmZsb29yKHMvcC5zY2FsZVJlc29sdXRpb25Eb3duQnkpLGhlaWdodDpNYXRoLmZsb29yKG8vcC5zY2FsZVJlc29sdXRpb25Eb3duQnkpfTtyZXR1cm57bGF5ZXI6aCxyZXNvbHV0aW9uOlR9fSkpfHxbXX1zZXRQb2xsKGUpe3RoaXMucG9sbHMuc2V0KGUuaWQsZSl9Z2V0UG9sbChlKXtyZXR1cm4gdGhpcy5wb2xscy5nZXQoZSl9c2V0V2hpdGVib2FyZChlKXt0aGlzLndoaXRlYm9hcmRzLnNldChlLmlkLGUpfWdldFdoaXRlYm9hcmRzKCl7cmV0dXJuIHRoaXMud2hpdGVib2FyZHN9Z2V0V2hpdGVib2FyZChlKXtyZXR1cm4gZT90aGlzLndoaXRlYm9hcmRzLmdldChlKTp0aGlzLndoaXRlYm9hcmRzLnZhbHVlcygpLm5leHQoKS52YWx1ZX1nZXRFcnJvckxpc3RlbmVyKCl7cmV0dXJuIHRoaXMuZXJyb3JMaXN0ZW5lcn1jbGVhbnVwKCl7bGV0IGU9dGhpcy5nZXRUcmFja3MoKTtmb3IobGV0IHQgb2YgZSl0LmNsZWFudXAoKTt0aGlzLnJvb209dm9pZCAwLHRoaXMuY29uZmlnPXZvaWQgMCx0aGlzLmxvY2FsUGVlcklkPXZvaWQgMCx0aGlzLnJvbGVEZXRhaWxzQXJyaXZlZD0hMX1zZXRFcnJvckxpc3RlbmVyKGUpe3RoaXMuZXJyb3JMaXN0ZW5lcj1lfXVwZGF0ZVBlZXJzUG9saWN5KCl7dGhpcy5nZXRQZWVycygpLmZvckVhY2goZT0+e3ZhciB0O2lmKCFlLnJvbGUpeyh0PXRoaXMuZXJyb3JMaXN0ZW5lcik9PW51bGx8fHQub25FcnJvcihTLkdlbmVyaWNFcnJvcnMuSW52YWxpZFJvbGUoXCJWQUxJREFUSU9OXCIsXCJcIikpO3JldHVybn1lLnJvbGU9dGhpcy5nZXRQb2xpY3lGb3JSb2xlKGUucm9sZS5uYW1lKX0pfWFkZFBsdWdpbnNUb1JvbGVzKGUpe2UmJk9iamVjdC5rZXlzKGUpLmZvckVhY2godD0+e2xldCBpPXQ7c3dpdGNoKGkpe2Nhc2VcIndoaXRlYm9hcmRcIjp7dGhpcy5hZGRXaGl0ZWJvYXJkUGx1Z2luVG9Sb2xlKGVbaV0pO2JyZWFrfWNhc2VcInRyYW5zY3JpcHRpb25zXCI6e3RoaXMuYWRkVHJhbnNjcmlwdGlvbnNQbHVnaW5Ub1JvbGUoZVtpXSk7YnJlYWt9Y2FzZVwibm9pc2VDYW5jZWxsYXRpb25cIjp7dGhpcy5oYW5kbGVOb2lzZUNhbmNlbGxhdGlvblBsdWdpbihlW2ldKTticmVha31kZWZhdWx0OmJyZWFrfX0pfXNldEVudigpe3ZhciByO2xldCB0PSgocj10aGlzLmNvbmZpZyk9PW51bGw/dm9pZCAwOnIuaW5pdEVuZHBvaW50KS5zcGxpdChcImh0dHBzOi8vXCIpWzFdLGk9XCJwcm9kXCI7dC5zdGFydHNXaXRoKFwicHJvZFwiKT9pPVwicHJvZFwiOnQuc3RhcnRzV2l0aChcInFhXCIpP2k9XCJxYVwiOnQuc3RhcnRzV2l0aChcImRldlwiKSYmKGk9XCJkZXZcIiksdGhpcy5lbnY9aSxIZS5zZXRFbnYoaSl9fTt2YXIgV2k9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLlRBRz1cIltXYWtlTG9ja01hbmFnZXJdXCI7dGhpcy53YWtlTG9jaz1udWxsO3RoaXMuYWNxdWlyZUxvY2s9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMucmVxdWVzdFdha2VMb2NrKCksZG9jdW1lbnQ9PW51bGx8fGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsdGhpcy52aXNpYmlsaXR5SGFuZGxlcil9KTt0aGlzLmNsZWFudXA9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKHRoaXMud2FrZUxvY2smJiF0aGlzLndha2VMb2NrLnJlbGVhc2VkKXRyeXt5aWVsZCB0aGlzLndha2VMb2NrLnJlbGVhc2UoKSxsLmQodGhpcy5UQUcsXCJXYWtlIGxvY2sgcmVsZWFzZWRcIil9Y2F0Y2goZSl7bGV0IHQ9ZTtsLncodGhpcy5UQUcsXCJFcnJvciB3aGlsZSByZWxlYXNpbmcgd2FrZSBsb2NrXCIsYG5hbWU9JHt0Lm5hbWV9LCBtZXNzYWdlPSR7dC5tZXNzYWdlfWApfWRvY3VtZW50PT1udWxsfHxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMudmlzaWJpbGl0eUhhbmRsZXIpLHRoaXMud2FrZUxvY2s9bnVsbH0pO3RoaXMudmlzaWJpbGl0eUhhbmRsZXI9KCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpeyhkb2N1bWVudD09bnVsbD92b2lkIDA6ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKT09PVwidmlzaWJsZVwiJiYoIXRoaXMud2FrZUxvY2t8fHRoaXMud2FrZUxvY2sucmVsZWFzZWQpJiYobC5kKHRoaXMuVEFHLFwiUmUtYWNxdWlyaW5nIHdha2UgbG9jayBkdWUgdG8gdmlzaWJpbGl0eSBjaGFuZ2VcIikseWllbGQgdGhpcy5yZXF1ZXN0V2FrZUxvY2soKSl9KTt0aGlzLnJlcXVlc3RXYWtlTG9jaz0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dHJ5e2lmKCEoXCJ3YWtlTG9ja1wiaW4gbmF2aWdhdG9yKSl7bC5kKHRoaXMuVEFHLFwiV2FrZSBsb2NrIGZlYXR1cmUgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm59dGhpcy53YWtlTG9jaz15aWVsZCBuYXZpZ2F0b3Iud2FrZUxvY2sucmVxdWVzdChcInNjcmVlblwiKSxsLmQodGhpcy5UQUcsXCJXYWtlIGxvY2sgYWNxdWlyZWRcIil9Y2F0Y2goZSl7bGV0IHQ9ZTtsLncodGhpcy5UQUcsXCJFcnJvciBhY3F1aXJpbmcgd2FrZSBsb2NrXCIsYG5hbWU9JHt0Lm5hbWV9LCBtZXNzYWdlPSR7dC5tZXNzYWdlfWApfX0pfX07dmFyICRpPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuc3RvcmU9ZTt0aGlzLmJ1ZmZlclNpemU9MTAwO3RoaXMuVEFHPVwiW0FuYWx5dGljc0V2ZW50c1NlcnZpY2VdXCI7dGhpcy50cmFuc3BvcnQ9bnVsbDt0aGlzLnBlbmRpbmdFdmVudHM9W107dGhpcy5sZXZlbD0xfXNldFRyYW5zcG9ydChlKXt0aGlzLnRyYW5zcG9ydD1lfXJlc2V0KCl7dGhpcy50cmFuc3BvcnQ9bnVsbCx0aGlzLnBlbmRpbmdFdmVudHM9W119cXVldWUoZSl7aWYoZS5sZXZlbD49dGhpcy5sZXZlbCYmKHRoaXMucGVuZGluZ0V2ZW50cy5wdXNoKGUpLHRoaXMucGVuZGluZ0V2ZW50cy5sZW5ndGg+dGhpcy5idWZmZXJTaXplKSl7bGV0IHQ9dGhpcy5wZW5kaW5nRXZlbnRzLnNoaWZ0KCk7bC5kKHRoaXMuVEFHLFwiTWF4IGJ1ZmZlciBzaXplIHJlYWNoZWRcIixcIlJlbW92ZWQgZXZlbnQgdG8gYWNjb21tb2RhdGUgbmV3IGV2ZW50c1wiLHQpfXJldHVybiB0aGlzfWZsdXNoRmFpbGVkQ2xpZW50RXZlbnRzKCl7SGUuZmx1c2hGYWlsZWRFdmVudHMoKX1mbHVzaCgpe3ZhciBlO3RyeXtmb3IoO3RoaXMucGVuZGluZ0V2ZW50cy5sZW5ndGg+MDspe2xldCB0PXRoaXMucGVuZGluZ0V2ZW50cy5zaGlmdCgpO3QmJih0Lm1ldGFkYXRhLnBlZXIucGVlcl9pZD0oZT10aGlzLnN0b3JlLmdldExvY2FsUGVlcigpKT09bnVsbD92b2lkIDA6ZS5wZWVySWQsdC5tZXRhZGF0YS51c2VyQWdlbnQ9dGhpcy5zdG9yZS5nZXRVc2VyQWdlbnQoKSx0aGlzLnRyYW5zcG9ydCYmdGhpcy50cmFuc3BvcnQudHJhbnNwb3J0UHJvdmlkZXIuaXNDb25uZWN0ZWQ/dGhpcy50cmFuc3BvcnQuc2VuZEV2ZW50KHQpOnRoaXMuc2VuZENsaWVudEV2ZW50T25IVFRQKHQpKX19Y2F0Y2godCl7bC53KHRoaXMuVEFHLFwiRmx1c2ggRmFpbGVkXCIsdCl9fXNlbmRDbGllbnRFdmVudE9uSFRUUChlKXt2YXIgcixzLG8sbjtsZXQgdD10aGlzLnN0b3JlLmdldFJvb20oKSxpPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCk7ZS5tZXRhZGF0YS50b2tlbj0ocj10aGlzLnN0b3JlLmdldENvbmZpZygpKT09bnVsbD92b2lkIDA6ci5hdXRoVG9rZW4sZS5tZXRhZGF0YS5wZWVyPXtzZXNzaW9uX2lkOnQ9PW51bGw/dm9pZCAwOnQuc2Vzc2lvbklkLHJvb21faWQ6dD09bnVsbD92b2lkIDA6dC5pZCxyb29tX25hbWU6dD09bnVsbD92b2lkIDA6dC5uYW1lLHRlbXBsYXRlX2lkOnQ9PW51bGw/dm9pZCAwOnQudGVtcGxhdGVJZCxqb2luZWRfYXQ6KHM9dD09bnVsbD92b2lkIDA6dC5qb2luZWRBdCk9PW51bGw/dm9pZCAwOnMuZ2V0VGltZSgpLHNlc3Npb25fc3RhcnRlZF9hdDoobz10PT1udWxsP3ZvaWQgMDp0LnN0YXJ0ZWRBdCk9PW51bGw/dm9pZCAwOm8uZ2V0VGltZSgpLHJvbGU6KG49aT09bnVsbD92b2lkIDA6aS5yb2xlKT09bnVsbD92b2lkIDA6bi5uYW1lLHVzZXJfbmFtZTppPT1udWxsP3ZvaWQgMDppLm5hbWUsdXNlcl9kYXRhOmk9PW51bGw/dm9pZCAwOmkubWV0YWRhdGEscGVlcl9pZDppPT1udWxsP3ZvaWQgMDppLnBlZXJJZH0sSGUuc2VuZEV2ZW50KGUpfX07aW1wb3J0e3Y0IGFzIE1ufWZyb21cInV1aWRcIjt2YXIgUWE9e2F1dG9wbGF5RmFpbGVkOnZvaWQgMCxpbml0aWFsaXplZDohMSxhdXRvcGxheUNoZWNrUHJvbWlzZTp2b2lkIDB9LEd0PWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpKXt0aGlzLnN0b3JlPWU7dGhpcy5kZXZpY2VNYW5hZ2VyPXQ7dGhpcy5ldmVudEJ1cz1pO3RoaXMuYXV0b1BhdXNlZFRyYWNrcz1uZXcgU2V0O3RoaXMuVEFHPVwiW0F1ZGlvU2lua01hbmFnZXJdOlwiO3RoaXMudm9sdW1lPTEwMDt0aGlzLnN0YXRlPW0oe30sUWEpO3RoaXMuaGFuZGxlQXVkaW9QYXVzZWQ9ZT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bC5kKHRoaXMuVEFHLFwiQXVkaW8gUGF1c2VkXCIsZS50YXJnZXQuaWQpO2xldCB0PXRoaXMuc3RvcmUuZ2V0VHJhY2tCeUlkKGUudGFyZ2V0LmlkKTt0JiZ0aGlzLmF1dG9QYXVzZWRUcmFja3MuYWRkKHQpfSk7dGhpcy5oYW5kbGVUcmFja1VwZGF0ZT0oe3RyYWNrOmV9KT0+e2wuZCh0aGlzLlRBRyxcIlRyYWNrIHVwZGF0ZWRcIixgJHtlfWApfTt0aGlzLmhhbmRsZVRyYWNrQWRkPXI9PmModGhpcyxbcl0sZnVuY3Rpb24qKHt0cmFjazplLHBlZXI6dCxjYWxsTGlzdGVuZXI6aT0hMH0pe3ZhciBvLG47bGV0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpO3Muc3R5bGUuZGlzcGxheT1cIm5vbmVcIixzLmlkPWUudHJhY2tJZCxzLmFkZEV2ZW50TGlzdGVuZXIoXCJwYXVzZVwiLHRoaXMuaGFuZGxlQXVkaW9QYXVzZWQpLHMub25lcnJvcj0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHUscDtsLmUodGhpcy5UQUcsXCJlcnJvciBvbiBhdWRpbyBlbGVtZW50XCIscy5lcnJvcik7bGV0IGQ9Uy5UcmFja3NFcnJvcnMuQXVkaW9QbGF5YmFja0Vycm9yKGBBdWRpbyBwbGF5YmFjayBlcnJvciBmb3IgdHJhY2sgLSAke2UudHJhY2tJZH0gY29kZSAtICR7KHU9cz09bnVsbD92b2lkIDA6cy5lcnJvcik9PW51bGw/dm9pZCAwOnUuY29kZX1gKTt0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkuYXVkaW9QbGF5YmFja0Vycm9yKGQpKSwoKHA9cz09bnVsbD92b2lkIDA6cy5lcnJvcik9PW51bGw/dm9pZCAwOnAuY29kZSk9PT1NZWRpYUVycm9yLk1FRElBX0VSUl9ERUNPREUmJih0aGlzLnJlbW92ZUF1ZGlvRWxlbWVudChzLGUpLHlpZWxkIEooNTAwKSx5aWVsZCB0aGlzLmhhbmRsZVRyYWNrQWRkKHt0cmFjazplLHBlZXI6dCxjYWxsTGlzdGVuZXI6ITF9KSx0aGlzLnN0YXRlLmF1dG9wbGF5RmFpbGVkfHx0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkuYXVkaW9SZWNvdmVyZWQoXCJBdWRpbyByZWNvdmVyZWQgYWZ0ZXIgbWVkaWEgZGVjb2RlIGVycm9yXCIpKSl9KSxlLnNldEF1ZGlvRWxlbWVudChzKSx5aWVsZCBlLnNldFZvbHVtZSh0aGlzLnZvbHVtZSksbC5kKHRoaXMuVEFHLFwiQXVkaW8gdHJhY2sgYWRkZWRcIixgJHtlfWApLHRoaXMuaW5pdCgpLChvPXRoaXMuYXVkaW9TaW5rKT09bnVsbHx8by5hcHBlbmQocyksdGhpcy5vdXRwdXREZXZpY2UmJih5aWVsZCBlLnNldE91dHB1dERldmljZSh0aGlzLm91dHB1dERldmljZSkpLHMuc3JjT2JqZWN0PW5ldyBNZWRpYVN0cmVhbShbZS5uYXRpdmVUcmFja10pLGkmJigobj10aGlzLmxpc3RlbmVyKT09bnVsbHx8bi5vblRyYWNrVXBkYXRlKDAsZSx0KSkseWllbGQgdGhpcy5oYW5kbGVBdXRvcGxheUVycm9yKGUpfSk7dGhpcy5oYW5kbGVBdXRvcGxheUVycm9yPWU9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKHRoaXMuc3RhdGUuYXV0b3BsYXlGYWlsZWQ9PT12b2lkIDAmJih0aGlzLnN0YXRlLmF1dG9wbGF5Q2hlY2tQcm9taXNlfHwodGhpcy5zdGF0ZS5hdXRvcGxheUNoZWNrUHJvbWlzZT1uZXcgUHJvbWlzZSh0PT57dGhpcy5wbGF5QXVkaW9Gb3IoZSkudGhlbih0KX0pKSx5aWVsZCB0aGlzLnN0YXRlLmF1dG9wbGF5Q2hlY2tQcm9taXNlKSx0aGlzLnN0YXRlLmF1dG9wbGF5RmFpbGVkKXt0aGlzLmF1dG9QYXVzZWRUcmFja3MuYWRkKGUpO3JldHVybn15aWVsZCB0aGlzLnBsYXlBdWRpb0ZvcihlKX0pO3RoaXMuaGFuZGxlQXVkaW9EZXZpY2VDaGFuZ2U9ZT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7ZS5pc1VzZXJTZWxlY3Rpb258fGUuZXJyb3J8fCFlLnNlbGVjdGlvbnx8ZS50eXBlPT09XCJ2aWRlb1wifHwoeWllbGQgdGhpcy51bnBhdXNlQXVkaW9UcmFja3MoKSl9KTt0aGlzLmhhbmRsZVRyYWNrUmVtb3ZlPWU9Pnt0aGlzLmF1dG9QYXVzZWRUcmFja3MuZGVsZXRlKGUpO2xldCB0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUudHJhY2tJZCk7dCYmdGhpcy5yZW1vdmVBdWRpb0VsZW1lbnQodCxlKSx0aGlzLmF1ZGlvU2luayYmdGhpcy5hdWRpb1NpbmsuY2hpbGRFbGVtZW50Q291bnQ9PT0wJiYodGhpcy5zdGF0ZS5hdXRvcGxheUNoZWNrUHJvbWlzZT12b2lkIDAsdGhpcy5zdGF0ZS5hdXRvcGxheUZhaWxlZD12b2lkIDApLGwuZCh0aGlzLlRBRyxcIkF1ZGlvIHRyYWNrIHJlbW92ZWRcIixgJHtlfWApfTt0aGlzLnVucGF1c2VBdWRpb1RyYWNrcz0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGU9W107dGhpcy5hdXRvUGF1c2VkVHJhY2tzLmZvckVhY2godD0+e2UucHVzaCh0aGlzLnBsYXlBdWRpb0Zvcih0KSl9KSx5aWVsZCBQcm9taXNlLmFsbChlKX0pO3RoaXMucmVtb3ZlQXVkaW9FbGVtZW50PShlLHQpPT57ZSYmKGwuZCh0aGlzLlRBRyxcInJlbW92aW5nIGF1ZGlvIGVsZW1lbnRcIixgJHt0fWApLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhdXNlXCIsdGhpcy5oYW5kbGVBdWRpb1BhdXNlZCksZS5zcmNPYmplY3Q9bnVsbCxlLnJlbW92ZSgpLHQuc2V0QXVkaW9FbGVtZW50KG51bGwpKX07dGhpcy5ldmVudEJ1cy5hdWRpb1RyYWNrQWRkZWQuc3Vic2NyaWJlKHRoaXMuaGFuZGxlVHJhY2tBZGQpLHRoaXMuZXZlbnRCdXMuYXVkaW9UcmFja1JlbW92ZWQuc3Vic2NyaWJlKHRoaXMuaGFuZGxlVHJhY2tSZW1vdmUpLHRoaXMuZXZlbnRCdXMuYXVkaW9UcmFja1VwZGF0ZS5zdWJzY3JpYmUodGhpcy5oYW5kbGVUcmFja1VwZGF0ZSksdGhpcy5ldmVudEJ1cy5kZXZpY2VDaGFuZ2Uuc3Vic2NyaWJlKHRoaXMuaGFuZGxlQXVkaW9EZXZpY2VDaGFuZ2UpLHRoaXMuZXZlbnRCdXMubG9jYWxWaWRlb1VubXV0ZWROYXRpdmVseS5zdWJzY3JpYmUodGhpcy51bnBhdXNlQXVkaW9UcmFja3MpLHRoaXMuZXZlbnRCdXMubG9jYWxBdWRpb1VubXV0ZWROYXRpdmVseS5zdWJzY3JpYmUodGhpcy51bnBhdXNlQXVkaW9UcmFja3MpfXNldExpc3RlbmVyKGUpe3RoaXMubGlzdGVuZXI9ZX1nZXQgb3V0cHV0RGV2aWNlKCl7cmV0dXJuIHRoaXMuZGV2aWNlTWFuYWdlci5vdXRwdXREZXZpY2V9Z2V0Vm9sdW1lKCl7cmV0dXJuIHRoaXMudm9sdW1lfXNldFZvbHVtZShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5zdG9yZS51cGRhdGVBdWRpb091dHB1dFZvbHVtZShlKSx0aGlzLnZvbHVtZT1lfSl9dW5ibG9ja0F1dG9wbGF5KCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RoaXMuYXV0b1BhdXNlZFRyYWNrcy5zaXplPjAmJih5aWVsZCB0aGlzLnVucGF1c2VBdWRpb1RyYWNrcygpKSx5aWVsZCBjZS5yZXN1bWVDb250ZXh0KCl9KX1pbml0KGUpe2lmKHRoaXMuc3RhdGUuaW5pdGlhbGl6ZWR8fHRoaXMuYXVkaW9TaW5rKXJldHVybjt0aGlzLnN0YXRlLmluaXRpYWxpemVkPSEwO2xldCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5pZD1gSE1TLVNESy1hdWRpby1zaW5rLSR7TW4oKX1gLChlJiZkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKXx8ZG9jdW1lbnQuYm9keSkuYXBwZW5kKHQpLHRoaXMuYXVkaW9TaW5rPXQsbC5kKHRoaXMuVEFHLFwiYXVkaW8gc2luayBjcmVhdGVkXCIsdGhpcy5hdWRpb1NpbmspfWNsZWFudXAoKXt2YXIgZTsoZT10aGlzLmF1ZGlvU2luayk9PW51bGx8fGUucmVtb3ZlKCksdGhpcy5hdWRpb1Npbms9dm9pZCAwLHRoaXMuZXZlbnRCdXMuYXVkaW9UcmFja0FkZGVkLnVuc3Vic2NyaWJlKHRoaXMuaGFuZGxlVHJhY2tBZGQpLHRoaXMuZXZlbnRCdXMuYXVkaW9UcmFja1JlbW92ZWQudW5zdWJzY3JpYmUodGhpcy5oYW5kbGVUcmFja1JlbW92ZSksdGhpcy5ldmVudEJ1cy5hdWRpb1RyYWNrVXBkYXRlLnVuc3Vic2NyaWJlKHRoaXMuaGFuZGxlVHJhY2tVcGRhdGUpLHRoaXMuZXZlbnRCdXMuZGV2aWNlQ2hhbmdlLnVuc3Vic2NyaWJlKHRoaXMuaGFuZGxlQXVkaW9EZXZpY2VDaGFuZ2UpLHRoaXMuZXZlbnRCdXMubG9jYWxWaWRlb1VubXV0ZWROYXRpdmVseS51bnN1YnNjcmliZSh0aGlzLnVucGF1c2VBdWRpb1RyYWNrcyksdGhpcy5ldmVudEJ1cy5sb2NhbEF1ZGlvVW5tdXRlZE5hdGl2ZWx5LnVuc3Vic2NyaWJlKHRoaXMudW5wYXVzZUF1ZGlvVHJhY2tzKSx0aGlzLmF1dG9QYXVzZWRUcmFja3M9bmV3IFNldCx0aGlzLnN0YXRlPW0oe30sUWEpfXBsYXlBdWRpb0ZvcihlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9ZS5nZXRBdWRpb0VsZW1lbnQoKTtpZighdCl7bC53KHRoaXMuVEFHLFwiTm8gYXVkaW8gZWxlbWVudCBmb3VuZCBvbiB0cmFja1wiLGUudHJhY2tJZCk7cmV0dXJufXRyeXt5aWVsZCB0LnBsYXkoKSx0aGlzLnN0YXRlLmF1dG9wbGF5RmFpbGVkPSExLHRoaXMuYXV0b1BhdXNlZFRyYWNrcy5kZWxldGUoZSksbC5kKHRoaXMuVEFHLFwiUGxheWVkIHRyYWNrXCIsYCR7ZX1gKX1jYXRjaChpKXt0aGlzLmF1dG9QYXVzZWRUcmFja3MuYWRkKGUpLGwudyh0aGlzLlRBRyxcIkZhaWxlZCB0byBwbGF5IHRyYWNrXCIsYCR7ZX1gLGkpO2xldCByPWk7aWYoIXRoaXMuc3RhdGUuYXV0b3BsYXlGYWlsZWQmJnIubmFtZT09PVwiTm90QWxsb3dlZEVycm9yXCIpe3RoaXMuc3RhdGUuYXV0b3BsYXlGYWlsZWQ9ITA7bGV0IHM9Uy5UcmFja3NFcnJvcnMuQXV0b3BsYXlCbG9ja2VkKFwiQVVUT1BMQVlcIixcIlwiKTtzLmFkZE5hdGl2ZUVycm9yKHIpLHRoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5hdXRvcGxheUVycm9yKCkpLHRoaXMuZXZlbnRCdXMuYXV0b3BsYXlFcnJvci5wdWJsaXNoKHMpfX19KX19O3ZhciBLaT1jbGFzc3tjb25zdHJ1Y3RvcihlKXt0aGlzLmV2ZW50QnVzPWU7dGhpcy5wbHVnaW5Vc2FnZT1uZXcgTWFwO3RoaXMucGx1Z2luTGFzdEFkZGVkQXQ9bmV3IE1hcDt0aGlzLmdldFBsdWdpblVzYWdlPWU9PntpZih0aGlzLnBsdWdpblVzYWdlLmhhcyhlKXx8dGhpcy5wbHVnaW5Vc2FnZS5zZXQoZSwwKSx0aGlzLnBsdWdpbkxhc3RBZGRlZEF0LmhhcyhlKSl7bGV0IGk9dGhpcy5wbHVnaW5MYXN0QWRkZWRBdC5nZXQoZSl8fDAscj1pP0RhdGUubm93KCktaTowO3RoaXMucGx1Z2luVXNhZ2Uuc2V0KGUsKHRoaXMucGx1Z2luVXNhZ2UuZ2V0KGUpfHwwKStyKSx0aGlzLnBsdWdpbkxhc3RBZGRlZEF0LmRlbGV0ZShlKX1yZXR1cm4gdGhpcy5wbHVnaW5Vc2FnZS5nZXQoZSl9O3RoaXMudXBkYXRlUGx1Z2luVXNhZ2VEYXRhPWU9Pnt2YXIgaTtsZXQgdD0oKGk9ZS5wcm9wZXJ0aWVzKT09bnVsbD92b2lkIDA6aS5wbHVnaW5fbmFtZSl8fFwiXCI7c3dpdGNoKGUubmFtZSl7Y2FzZVwibWVkaWFQbHVnaW4udG9nZ2xlZC5vblwiOmNhc2VcIm1lZGlhUGx1Z2luLmFkZGVkXCI6e2xldCByPWUucHJvcGVydGllcy5hZGRlZF9hdHx8RGF0ZS5ub3coKTt0aGlzLnBsdWdpbkxhc3RBZGRlZEF0LnNldCh0LHIpO2JyZWFrfWNhc2VcIm1lZGlhUGx1Z2luLnRvZ2dsZWQub2ZmXCI6Y2FzZVwibWVkaWFQbHVnaW4uc3RhdHNcIjp7aWYodGhpcy5wbHVnaW5MYXN0QWRkZWRBdC5oYXModCkpe2xldCByPWUucHJvcGVydGllcy5kdXJhdGlvbnx8KERhdGUubm93KCktKHRoaXMucGx1Z2luTGFzdEFkZGVkQXQuZ2V0KHQpfHwwKSkvMWUzO3RoaXMucGx1Z2luVXNhZ2Uuc2V0KHQsKHRoaXMucGx1Z2luVXNhZ2UuZ2V0KHQpfHwwKStNYXRoLm1heChyLDApKjFlMyksdGhpcy5wbHVnaW5MYXN0QWRkZWRBdC5kZWxldGUodCl9YnJlYWt9ZGVmYXVsdDp9fTt0aGlzLmNsZWFudXA9KCk9Pnt0aGlzLnBsdWdpbkxhc3RBZGRlZEF0LmNsZWFyKCksdGhpcy5wbHVnaW5Vc2FnZS5jbGVhcigpfTt0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5zdWJzY3JpYmUodD0+dGhpcy51cGRhdGVQbHVnaW5Vc2FnZURhdGEodCkpfX07dmFyIFd0PWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5zdG9yZT1lO3RoaXMuZXZlbnRCdXM9dDt0aGlzLmF1ZGlvSW5wdXQ9W107dGhpcy5hdWRpb091dHB1dD1bXTt0aGlzLnZpZGVvSW5wdXQ9W107dGhpcy5oYXNXZWJjYW1QZXJtaXNzaW9uPSExO3RoaXMuaGFzTWljcm9waG9uZVBlcm1pc3Npb249ITE7dGhpcy5jdXJyZW50U2VsZWN0aW9uPXthdWRpb0lucHV0OnZvaWQgMCx2aWRlb0lucHV0OnZvaWQgMCxhdWRpb091dHB1dDp2b2lkIDB9O3RoaXMuVEFHPVwiW0RldmljZSBNYW5hZ2VyXTpcIjt0aGlzLmluaXRpYWxpemVkPSExO3RoaXMudmlkZW9JbnB1dENoYW5nZWQ9ITE7dGhpcy5hdWRpb0lucHV0Q2hhbmdlZD0hMTt0aGlzLmVhcnBpZWNlU2VsZWN0ZWQ9ITE7dGhpcy50aW1lcj1udWxsO3RoaXMudXBkYXRlT3V0cHV0RGV2aWNlPShlLHQpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgaT10aGlzLmF1ZGlvT3V0cHV0LmZpbmQocj0+ci5kZXZpY2VJZD09PWUpO3JldHVybiBpJiYodGhpcy5vdXRwdXREZXZpY2U9aSx5aWVsZCB0aGlzLnN0b3JlLnVwZGF0ZUF1ZGlvT3V0cHV0RGV2aWNlKGkpLHRoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5kZXZpY2VDaGFuZ2Uoe2lzVXNlclNlbGVjdGlvbjp0LHNlbGVjdGlvbjp7YXVkaW9PdXRwdXQ6aX0sZGV2aWNlczp0aGlzLmdldERldmljZXMoKSx0eXBlOlwiYXVkaW9PdXRwdXRcIn0pKSxYLnVwZGF0ZVNlbGVjdGlvbihcImF1ZGlvT3V0cHV0XCIse2RldmljZUlkOmkuZGV2aWNlSWQsZ3JvdXBJZDppLmdyb3VwSWR9KSksaX0pO3RoaXMuZ2V0Q3VycmVudFNlbGVjdGlvbj0oKT0+e3ZhciBvLG47bGV0IGU9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKSx0PXRoaXMuY3JlYXRlSWRlbnRpZmllcigobz1lPT1udWxsP3ZvaWQgMDplLmF1ZGlvVHJhY2spPT1udWxsP3ZvaWQgMDpvLmdldE1lZGlhVHJhY2tTZXR0aW5ncygpKSxpPXRoaXMuY3JlYXRlSWRlbnRpZmllcigobj1lPT1udWxsP3ZvaWQgMDplLnZpZGVvVHJhY2spPT1udWxsP3ZvaWQgMDpuLmdldE1lZGlhVHJhY2tTZXR0aW5ncygpKSxyPXRoaXMuYXVkaW9JbnB1dC5maW5kKGQ9PnRoaXMuY3JlYXRlSWRlbnRpZmllcihkKT09PXQpLHM9dGhpcy52aWRlb0lucHV0LmZpbmQoZD0+dGhpcy5jcmVhdGVJZGVudGlmaWVyKGQpPT09aSk7cmV0dXJue2F1ZGlvSW5wdXQ6cix2aWRlb0lucHV0OnMsYXVkaW9PdXRwdXQ6dGhpcy5vdXRwdXREZXZpY2V9fTt0aGlzLmNvbXB1dGVDaGFuZ2U9KGUsdCk9PmUubGVuZ3RoIT09dC5sZW5ndGg/ITA6dC5zb21lKGk9PiFlLmluY2x1ZGVzKHRoaXMuY3JlYXRlSWRlbnRpZmllcihpKSkpO3RoaXMuZW51bWVyYXRlRGV2aWNlcz0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dHJ5e2xldCBlPXlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLHQ9dGhpcy52aWRlb0lucHV0Lm1hcCh0aGlzLmNyZWF0ZUlkZW50aWZpZXIpLGk9dGhpcy5hdWRpb0lucHV0Lm1hcCh0aGlzLmNyZWF0ZUlkZW50aWZpZXIpO3RoaXMuYXVkaW9JbnB1dD1bXSx0aGlzLmF1ZGlvT3V0cHV0PVtdLHRoaXMudmlkZW9JbnB1dD1bXSxlLmZvckVhY2gocj0+e3Iua2luZD09PVwiYXVkaW9pbnB1dFwiJiZyLmxhYmVsPyh0aGlzLmhhc01pY3JvcGhvbmVQZXJtaXNzaW9uPSEwLHRoaXMuYXVkaW9JbnB1dC5wdXNoKHIpKTpyLmtpbmQ9PT1cImF1ZGlvb3V0cHV0XCI/dGhpcy5hdWRpb091dHB1dC5wdXNoKHIpOnIua2luZD09PVwidmlkZW9pbnB1dFwiJiZyLmxhYmVsJiYodGhpcy5oYXNXZWJjYW1QZXJtaXNzaW9uPSEwLHRoaXMudmlkZW9JbnB1dC5wdXNoKHIpKX0pLHRoaXMudmlkZW9JbnB1dENoYW5nZWQ9dGhpcy5jb21wdXRlQ2hhbmdlKHQsdGhpcy52aWRlb0lucHV0KSx0aGlzLmF1ZGlvSW5wdXRDaGFuZ2VkPXRoaXMuY29tcHV0ZUNoYW5nZShpLHRoaXMuYXVkaW9JbnB1dCksWC5zZXREZXZpY2VzKHt2aWRlb0lucHV0OlsuLi50aGlzLnZpZGVvSW5wdXRdLGF1ZGlvSW5wdXQ6Wy4uLnRoaXMuYXVkaW9JbnB1dF0sYXVkaW9PdXRwdXQ6Wy4uLnRoaXMuYXVkaW9PdXRwdXRdfSksdGhpcy5sb2dEZXZpY2VzKFwiRW51bWVyYXRlIERldmljZXNcIil9Y2F0Y2goZSl7bC5lKHRoaXMuVEFHLFwiRmFpbGVkIGVudW1lcmF0aW5nIGRldmljZXNcIixlKX19KTt0aGlzLnVwZGF0ZVRvQWN0dWFsRGVmYXVsdERldmljZT0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHIscyxvLG4sZDtsZXQgZT10aGlzLnN0b3JlLmdldExvY2FsUGVlcigpO2lmKCEoKHM9KHI9dGhpcy5zdG9yZS5nZXRDb25maWcoKSk9PW51bGw/dm9pZCAwOnIuc2V0dGluZ3MpPT1udWxsP3ZvaWQgMDpzLnZpZGVvRGV2aWNlSWQpJiYoZSE9bnVsbCYmZS52aWRlb1RyYWNrKSYmKHlpZWxkIGUudmlkZW9UcmFjay5zZXRTZXR0aW5ncyh7ZGV2aWNlSWQ6KG89dGhpcy52aWRlb0lucHV0WzBdKT09bnVsbD92b2lkIDA6by5kZXZpY2VJZH0sITApKSwhKChkPShuPXRoaXMuc3RvcmUuZ2V0Q29uZmlnKCkpPT1udWxsP3ZvaWQgMDpuLnNldHRpbmdzKT09bnVsbD92b2lkIDA6ZC5hdWRpb0lucHV0RGV2aWNlSWQpJiYoZSE9bnVsbCYmZS5hdWRpb1RyYWNrKSl7bGV0IHU9KCk9Pnt2YXIgVDtsZXQgaD10aGlzLmF1ZGlvSW5wdXQuZmluZChnPT4hZy5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiaXBob25lXCIpKTtyZXR1cm4gSHMoKSYmaD9oPT1udWxsP3ZvaWQgMDpoLmRldmljZUlkOihUPXRoaXMuZ2V0TmV3QXVkaW9JbnB1dERldmljZSgpKT09bnVsbD92b2lkIDA6VC5kZXZpY2VJZH07dSgpJiYoeWllbGQgZS5hdWRpb1RyYWNrLnNldFNldHRpbmdzKHtkZXZpY2VJZDp1KCl9LCEwKSl9fSk7dGhpcy5oYW5kbGVEZXZpY2VDaGFuZ2U9bWkoKCk9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuZW51bWVyYXRlRGV2aWNlcygpLHRoaXMubG9nRGV2aWNlcyhcIkFmdGVyIERldmljZSBDaGFuZ2VcIik7bGV0IGU9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKTt5aWVsZCB0aGlzLnNldE91dHB1dERldmljZSghMCkseWllbGQgdGhpcy5oYW5kbGVBdWRpb0lucHV0RGV2aWNlQ2hhbmdlKGU9PW51bGw/dm9pZCAwOmUuYXVkaW9UcmFjaykseWllbGQgdGhpcy5oYW5kbGVWaWRlb0lucHV0RGV2aWNlQ2hhbmdlKGU9PW51bGw/dm9pZCAwOmUudmlkZW9UcmFjayksdGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh5LmRldmljZUNoYW5nZSh7c2VsZWN0aW9uOnRoaXMuZ2V0Q3VycmVudFNlbGVjdGlvbigpLHR5cGU6XCJjaGFuZ2VcIixkZXZpY2VzOnRoaXMuZ2V0RGV2aWNlcygpfSkpfSksNTAwKS5iaW5kKHRoaXMpO3RoaXMuaGFuZGxlQXVkaW9JbnB1dERldmljZUNoYW5nZT1lPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZighZSl7bC5kKHRoaXMuVEFHLFwiTm8gQXVkaW8gdHJhY2sgb24gbG9jYWwgcGVlclwiKTtyZXR1cm59aWYoIXRoaXMuYXVkaW9JbnB1dENoYW5nZWQpe2wuZCh0aGlzLlRBRyxcIk5vIENoYW5nZSBpbiBBdWRpb0lucHV0IERldmljZVwiKTtyZXR1cm59bGV0IHQ9dGhpcy5nZXROZXdBdWRpb0lucHV0RGV2aWNlKCk7aWYoIXR8fCF0LmRldmljZUlkKXt0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkuZGV2aWNlQ2hhbmdlKHtzZWxlY3Rpb246e2F1ZGlvSW5wdXQ6dH0sZXJyb3I6Uy5UcmFja3NFcnJvcnMuU2VsZWN0ZWREZXZpY2VNaXNzaW5nKFwiYXVkaW9cIiksZGV2aWNlczp0aGlzLmdldERldmljZXMoKSx0eXBlOlwiYXVkaW9JbnB1dFwifSkpLGwuZSh0aGlzLlRBRyxcIkF1ZGlvIGRldmljZSBub3QgZm91bmRcIik7cmV0dXJufWxldHtzZXR0aW5nczppfT1lLHI9bmV3IFEoKS5jb2RlYyhpLmNvZGVjKS5tYXhCaXRyYXRlKGkubWF4Qml0cmF0ZSkuZGV2aWNlSWQodC5kZXZpY2VJZCkuYXVkaW9Nb2RlKGkuYXVkaW9Nb2RlKS5idWlsZCgpO3RyeXt5aWVsZCBlLnNldFNldHRpbmdzKHIsITApLHRoaXMuZXZlbnRCdXMuZGV2aWNlQ2hhbmdlLnB1Ymxpc2goe2RldmljZXM6dGhpcy5nZXREZXZpY2VzKCksc2VsZWN0aW9uOnQsdHlwZTpcImF1ZGlvSW5wdXRcIn0pLHRoaXMubG9nRGV2aWNlcyhcIkF1ZGlvIERldmljZSBDaGFuZ2UgU3VjY2Vzc1wiKX1jYXRjaChzKXtsLmUodGhpcy5UQUcsXCJbQXVkaW8gRGV2aWNlIENoYW5nZV1cIixzKSx0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkuZGV2aWNlQ2hhbmdlKHtzZWxlY3Rpb246e2F1ZGlvSW5wdXQ6dH0sZGV2aWNlczp0aGlzLmdldERldmljZXMoKSx0eXBlOlwiYXVkaW9JbnB1dFwiLGVycm9yOnN9KSksdGhpcy5ldmVudEJ1cy5kZXZpY2VDaGFuZ2UucHVibGlzaCh7ZXJyb3I6cyxzZWxlY3Rpb246dCx0eXBlOlwiYXVkaW9JbnB1dFwiLGRldmljZXM6dGhpcy5nZXREZXZpY2VzKCl9KX19KTt0aGlzLmhhbmRsZVZpZGVvSW5wdXREZXZpY2VDaGFuZ2U9ZT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYoIWUpe2wuZCh0aGlzLlRBRyxcIk5vIHZpZGVvIHRyYWNrIG9uIGxvY2FsIHBlZXJcIik7cmV0dXJufWlmKCF0aGlzLnZpZGVvSW5wdXRDaGFuZ2VkKXtsLmQodGhpcy5UQUcsXCJObyBDaGFuZ2UgaW4gVmlkZW9JbnB1dCBEZXZpY2VcIik7cmV0dXJufWxldCB0PXRoaXMudmlkZW9JbnB1dFswXTtpZighdHx8IXQuZGV2aWNlSWQpe3RoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5kZXZpY2VDaGFuZ2Uoe3NlbGVjdGlvbjp7dmlkZW9JbnB1dDp0fSxlcnJvcjpTLlRyYWNrc0Vycm9ycy5TZWxlY3RlZERldmljZU1pc3NpbmcoXCJ2aWRlb1wiKSxkZXZpY2VzOnRoaXMuZ2V0RGV2aWNlcygpLHR5cGU6XCJ2aWRlb1wifSkpLGwuZSh0aGlzLlRBRyxcIlZpZGVvIGRldmljZSBub3QgZm91bmRcIik7cmV0dXJufWxldHtzZXR0aW5nczppfT1lLHI9bmV3IHEoKS5jb2RlYyhpLmNvZGVjKS5tYXhCaXRyYXRlKGkubWF4Qml0cmF0ZSkubWF4RnJhbWVyYXRlKGkubWF4RnJhbWVyYXRlKS5zZXRXaWR0aChpLndpZHRoKS5zZXRIZWlnaHQoaS5oZWlnaHQpLmRldmljZUlkKHQuZGV2aWNlSWQpLmJ1aWxkKCk7dHJ5e3lpZWxkIGUuc2V0U2V0dGluZ3MociwhMCksdGhpcy5ldmVudEJ1cy5kZXZpY2VDaGFuZ2UucHVibGlzaCh7ZGV2aWNlczp0aGlzLmdldERldmljZXMoKSxzZWxlY3Rpb246dCx0eXBlOlwidmlkZW9cIn0pLHRoaXMubG9nRGV2aWNlcyhcIlZpZGVvIERldmljZSBDaGFuZ2UgU3VjY2Vzc1wiKX1jYXRjaChzKXtsLmUodGhpcy5UQUcsXCJbVmlkZW8gRGV2aWNlIENoYW5nZV1cIixzKSx0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkuZGV2aWNlQ2hhbmdlKHtzZWxlY3Rpb246e3ZpZGVvSW5wdXQ6dH0sZGV2aWNlczp0aGlzLmdldERldmljZXMoKSx0eXBlOlwidmlkZW9cIixlcnJvcjpzfSkpLHRoaXMuZXZlbnRCdXMuZGV2aWNlQ2hhbmdlLnB1Ymxpc2goe2Vycm9yOnMsdHlwZTpcInZpZGVvXCIsc2VsZWN0aW9uOnQsZGV2aWNlczp0aGlzLmdldERldmljZXMoKX0pfX0pO3RoaXMuc3RhcnRQb2xsaW5nRm9yRGV2aWNlcz0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0e2VhcnBpZWNlOmV9PXRoaXMuY2F0ZWdvcml6ZUF1ZGlvSW5wdXREZXZpY2VzKCk7ZSYmKHRoaXMudGltZXI9c2V0VGltZW91dCgoKT0+e2ModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuZW51bWVyYXRlRGV2aWNlcygpLHlpZWxkIHRoaXMuYXV0b1NlbGVjdEF1ZGlvT3V0cHV0KCksdGhpcy5zdGFydFBvbGxpbmdGb3JEZXZpY2VzKCl9KX0sNWUzKSl9KTt0aGlzLmF1dG9TZWxlY3RBdWRpb091dHB1dD1lPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdSxwO2xldHtibHVldG9vdGhEZXZpY2U6dCxlYXJwaWVjZTppLHNwZWFrZXJQaG9uZTpyLHdpcmVkOnN9PXRoaXMuY2F0ZWdvcml6ZUF1ZGlvSW5wdXREZXZpY2VzKCksbz0odT10aGlzLnN0b3JlLmdldExvY2FsUGVlcigpKT09bnVsbD92b2lkIDA6dS5hdWRpb1RyYWNrO2lmKCFvfHwhaSlyZXR1cm47bGV0IG49dGhpcy5nZXRNYW51YWxseVNlbGVjdGVkQXVkaW9EZXZpY2UoKSxkPShuPT1udWxsP3ZvaWQgMDpuLmRldmljZUlkKXx8KHQ9PW51bGw/dm9pZCAwOnQuZGV2aWNlSWQpfHwocz09bnVsbD92b2lkIDA6cy5kZXZpY2VJZCl8fChyPT1udWxsP3ZvaWQgMDpyLmRldmljZUlkKTtpZighKCFlJiZvLnNldHRpbmdzLmRldmljZUlkPT09ZCYmdGhpcy5lYXJwaWVjZVNlbGVjdGVkKSl0cnl7KCF0aGlzLmVhcnBpZWNlU2VsZWN0ZWR8fGUpJiYoKHQ9PW51bGw/dm9pZCAwOnQuZGV2aWNlSWQpPT09ZD90aGlzLmVhcnBpZWNlU2VsZWN0ZWQ9ITA6KGwuZCh0aGlzLlRBRyxcInNlbGVjdGluZyBlYXJwaWVjZVwiKSx5aWVsZCBvLnNldFNldHRpbmdzKHtkZXZpY2VJZDppPT1udWxsP3ZvaWQgMDppLmRldmljZUlkfSwhMCksZSYmKHlpZWxkIEooZSkpLHRoaXMuZWFycGllY2VTZWxlY3RlZD0hMCkpLHlpZWxkIG8uc2V0U2V0dGluZ3Moe2RldmljZUlkOmR9LCEwKTtsZXQgaD0ocD10aGlzLmF1ZGlvSW5wdXQuZmluZChUPT5ULmRldmljZUlkPT09ZCkpPT1udWxsP3ZvaWQgMDpwLmdyb3VwSWQ7dGhpcy5ldmVudEJ1cy5kZXZpY2VDaGFuZ2UucHVibGlzaCh7aXNVc2VyU2VsZWN0aW9uOiExLHR5cGU6XCJhdWRpb0lucHV0XCIsc2VsZWN0aW9uOntkZXZpY2VJZDpkLGdyb3VwSWQ6aH0sZGV2aWNlczp0aGlzLmdldERldmljZXMoKSxpbnRlcm5hbDohMH0pfWNhdGNoKGgpe3RoaXMuZXZlbnRCdXMuZXJyb3IucHVibGlzaChoKX19KTtsZXQgaT0oe2VuYWJsZWQ6cix0cmFjazpzfSk9PnImJnMuc291cmNlPT09XCJyZWd1bGFyXCI7dGhpcy5ldmVudEJ1cy5sb2NhbFZpZGVvRW5hYmxlZC53YWl0Rm9yKGkpLnRoZW4oKCk9Pnt0aGlzLnZpZGVvSW5wdXQubGVuZ3RoPT09MCYmdGhpcy5pbml0KCEwKX0pLHRoaXMuZXZlbnRCdXMubG9jYWxBdWRpb0VuYWJsZWQud2FpdEZvcihpKS50aGVuKCgpPT57dGhpcy5hdWRpb0lucHV0Lmxlbmd0aD09PTAmJnRoaXMuaW5pdCghMCl9KSx0aGlzLmV2ZW50QnVzLmRldmljZUNoYW5nZS5zdWJzY3JpYmUoKHt0eXBlOnIsaXNVc2VyU2VsZWN0aW9uOnMsc2VsZWN0aW9uOm99KT0+e2lmKHMpe2xldCBuPXI9PT1cInZpZGVvXCI/XCJ2aWRlb0lucHV0XCI6cixkPXRoaXNbbl0uZmluZCh1PT50aGlzLmNyZWF0ZUlkZW50aWZpZXIodSk9PT10aGlzLmNyZWF0ZUlkZW50aWZpZXIobykpO3RoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5kZXZpY2VDaGFuZ2Uoe3NlbGVjdGlvbjp7W25dOmR9LGRldmljZXM6dGhpcy5nZXREZXZpY2VzKCksdHlwZTpyLGlzVXNlclNlbGVjdGlvbjpzfSkpfX0pfWluaXQoZT0hMSx0PSEwKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dGhpcy5pbml0aWFsaXplZCYmIWV8fCghdGhpcy5pbml0aWFsaXplZCYmbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlY2hhbmdlXCIsdGhpcy5oYW5kbGVEZXZpY2VDaGFuZ2UpLHRoaXMuaW5pdGlhbGl6ZWQ9ITAseWllbGQgdGhpcy5lbnVtZXJhdGVEZXZpY2VzKCksZXx8KHlpZWxkIHRoaXMudXBkYXRlVG9BY3R1YWxEZWZhdWx0RGV2aWNlKCksdGhpcy5zdGFydFBvbGxpbmdGb3JEZXZpY2VzKCkpLHlpZWxkIHRoaXMuYXV0b1NlbGVjdEF1ZGlvT3V0cHV0KCksdGhpcy5sb2dEZXZpY2VzKFwiSW5pdFwiKSx5aWVsZCB0aGlzLnNldE91dHB1dERldmljZSgpLHRoaXMuZXZlbnRCdXMuZGV2aWNlQ2hhbmdlLnB1Ymxpc2goe2RldmljZXM6dGhpcy5nZXREZXZpY2VzKCl9KSx0JiZ0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkuZGV2aWNlQ2hhbmdlKHtzZWxlY3Rpb246dGhpcy5nZXRDdXJyZW50U2VsZWN0aW9uKCksdHlwZTpcImxpc3RcIixkZXZpY2VzOnRoaXMuZ2V0RGV2aWNlcygpfSkpKX0pfWdldERldmljZXMoKXtyZXR1cm57YXVkaW9JbnB1dDp0aGlzLmF1ZGlvSW5wdXQsYXVkaW9PdXRwdXQ6dGhpcy5hdWRpb091dHB1dCx2aWRlb0lucHV0OnRoaXMudmlkZW9JbnB1dH19Y2xlYW51cCgpe3RoaXMudGltZXImJihjbGVhclRpbWVvdXQodGhpcy50aW1lciksdGhpcy50aW1lcj1udWxsKSx0aGlzLmluaXRpYWxpemVkPSExLHRoaXMuZWFycGllY2VTZWxlY3RlZD0hMSx0aGlzLmF1ZGlvSW5wdXQ9W10sdGhpcy5hdWRpb091dHB1dD1bXSx0aGlzLnZpZGVvSW5wdXQ9W10sdGhpcy5vdXRwdXREZXZpY2U9dm9pZCAwLG5hdmlnYXRvci5tZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRldmljZWNoYW5nZVwiLHRoaXMuaGFuZGxlRGV2aWNlQ2hhbmdlKX1jcmVhdGVJZGVudGlmaWVyKGUpe3JldHVybiBlP2Ake2UuZGV2aWNlSWR9JHtlLmdyb3VwSWR9YDpcIlwifWdldE5ld0F1ZGlvSW5wdXREZXZpY2UoKXt2YXIgaSxyO2xldCBlPXRoaXMuZ2V0TWFudWFsbHlTZWxlY3RlZEF1ZGlvRGV2aWNlKCk7aWYoZSlyZXR1cm4gZTsocj0oaT10aGlzLnN0b3JlLmdldExvY2FsUGVlcigpKT09bnVsbD92b2lkIDA6aS5hdWRpb1RyYWNrKT09bnVsbHx8ci5yZXNldE1hbnVhbGx5U2VsZWN0ZWREZXZpY2VJZCgpO2xldCB0PXRoaXMuYXVkaW9JbnB1dC5maW5kKHM9PnMuZGV2aWNlSWQ9PT1cImRlZmF1bHRcIik7cmV0dXJuIHQ/dGhpcy5hdWRpb0lucHV0LmZpbmQobz0+by5kZXZpY2VJZCE9PVwiZGVmYXVsdFwiJiZ0LmxhYmVsLmluY2x1ZGVzKG8ubGFiZWwpKTp0aGlzLmF1ZGlvSW5wdXRbMF19c2V0T3V0cHV0RGV2aWNlKGU9ITEpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgdD10aGlzLmdldE5ld0F1ZGlvSW5wdXREZXZpY2UoKSxpPXRoaXMuY3JlYXRlSWRlbnRpZmllcih0aGlzLm91dHB1dERldmljZSk7dGhpcy5vdXRwdXREZXZpY2U9dGhpcy5nZXRBdWRpb091dHB1dERldmljZU1hdGNoaW5nSW5wdXQodCksdGhpcy5vdXRwdXREZXZpY2V8fCh0aGlzLm91dHB1dERldmljZT10aGlzLmF1ZGlvT3V0cHV0LmZpbmQocj0+dGhpcy5jcmVhdGVJZGVudGlmaWVyKHIpPT09aSksdGhpcy5vdXRwdXREZXZpY2V8fCh0aGlzLm91dHB1dERldmljZT10aGlzLmF1ZGlvT3V0cHV0LmZpbmQocj0+ci5kZXZpY2VJZD09PVwiZGVmYXVsdFwiKXx8dGhpcy5hdWRpb091dHB1dFswXSkpLHlpZWxkIHRoaXMuc3RvcmUudXBkYXRlQXVkaW9PdXRwdXREZXZpY2UodGhpcy5vdXRwdXREZXZpY2UpLGUmJmkhPT10aGlzLmNyZWF0ZUlkZW50aWZpZXIodGhpcy5vdXRwdXREZXZpY2UpJiYodGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh5LmRldmljZUNoYW5nZSh7c2VsZWN0aW9uOnthdWRpb091dHB1dDp0aGlzLm91dHB1dERldmljZX0sZGV2aWNlczp0aGlzLmdldERldmljZXMoKSx0eXBlOlwiYXVkaW9PdXRwdXRcIn0pKSx0aGlzLmV2ZW50QnVzLmRldmljZUNoYW5nZS5wdWJsaXNoKHtzZWxlY3Rpb246dGhpcy5vdXRwdXREZXZpY2UsdHlwZTpcImF1ZGlvT3V0cHV0XCIsZGV2aWNlczp0aGlzLmdldERldmljZXMoKX0pKX0pfWdldE1hbnVhbGx5U2VsZWN0ZWRBdWRpb0RldmljZSgpe2xldCBlPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCksdD1lPT1udWxsP3ZvaWQgMDplLmF1ZGlvVHJhY2s7cmV0dXJuIHRoaXMuYXVkaW9JbnB1dC5maW5kKGk9PmkuZGV2aWNlSWQ9PT0odD09bnVsbD92b2lkIDA6dC5nZXRNYW51YWxseVNlbGVjdGVkRGV2aWNlSWQoKSkpfWNhdGVnb3JpemVBdWRpb0lucHV0RGV2aWNlcygpe2xldCBlPW51bGwsdD1udWxsLGk9bnVsbCxyPW51bGw7Zm9yKGxldCBzIG9mIHRoaXMuYXVkaW9JbnB1dCl7bGV0IG89TnIocy5sYWJlbCk7bz09PVwiU1BFQUtFUlBIT05FXCI/dD1zOm89PT1cIldJUkVEXCI/aT1zOm89PT1cIkJMVUVUT09USFwiP2U9czpvPT09XCJFQVJQSUVDRVwiJiYocj1zKX1yZXR1cm57Ymx1ZXRvb3RoRGV2aWNlOmUsc3BlYWtlclBob25lOnQsd2lyZWQ6aSxlYXJwaWVjZTpyfX1nZXRBdWRpb091dHB1dERldmljZU1hdGNoaW5nSW5wdXQoZSl7dmFyIG8sbjtsZXQgdD0oKG49KG89dGhpcy5zdG9yZS5nZXRDb25maWcoKSk9PW51bGw/dm9pZCAwOm8uc2V0dGluZ3MpPT1udWxsP3ZvaWQgMDpuLnNwZWFrZXJBdXRvU2VsZWN0aW9uQmxhY2tsaXN0KXx8W107aWYodD09PVwiYWxsXCJ8fCFlKXJldHVybjtsZXQgaT1lLmxhYmVsLnRvTG93ZXJDYXNlKCl8fFwiXCI7aWYodC5zb21lKGQ9PmkuaW5jbHVkZXMoZC50b0xvd2VyQ2FzZSgpKSkpcmV0dXJuO2xldCByPXRoaXMuYXVkaW9PdXRwdXQuZmluZChkPT5lLmRldmljZUlkIT09XCJkZWZhdWx0XCImJmQubGFiZWw9PT1lLmxhYmVsKTtpZihyKXJldHVybiByO2xldCBzPXRoaXMuYXVkaW9PdXRwdXQuZmluZChkPT5kLmdyb3VwSWQ9PT1lLmdyb3VwSWQpO2lmKHMmJnRoaXMuYXVkaW9PdXRwdXRbMF0uZGV2aWNlSWQ9PT1cImRlZmF1bHRcIiYmcy5ncm91cElkPT09dGhpcy5hdWRpb091dHB1dFswXS5ncm91cElkKXJldHVybiBzfWxvZ0RldmljZXMoZT1cIlwiKXtsLmQodGhpcy5UQUcsZSxKU09OLnN0cmluZ2lmeSh7dmlkZW9JbnB1dDpbLi4udGhpcy52aWRlb0lucHV0XSxhdWRpb0lucHV0OlsuLi50aGlzLmF1ZGlvSW5wdXRdLGF1ZGlvT3V0cHV0OlsuLi50aGlzLmF1ZGlvT3V0cHV0XSxzZWxlY3RlZDp0aGlzLmdldEN1cnJlbnRTZWxlY3Rpb24oKX0sbnVsbCw0KSl9fTt2YXIgcWk9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmRldmljZU1hbmFnZXI9ZTt0aGlzLmF1ZGlvU2lua01hbmFnZXI9dH1nZXRWb2x1bWUoKXtyZXR1cm4gdGhpcy5hdWRpb1NpbmtNYW5hZ2VyLmdldFZvbHVtZSgpfXNldFZvbHVtZShlKXtpZihlPDB8fGU+MTAwKXRocm93IEVycm9yKFwiUGxlYXNlIHBhc3MgYSB2YWxpZCBudW1iZXIgYmV0d2VlbiAwLTEwMFwiKTt0aGlzLmF1ZGlvU2lua01hbmFnZXIuc2V0Vm9sdW1lKGUpfWdldERldmljZSgpe3JldHVybiB0aGlzLmRldmljZU1hbmFnZXIub3V0cHV0RGV2aWNlfXNldERldmljZShlKXtyZXR1cm4gdGhpcy5kZXZpY2VNYW5hZ2VyLnVwZGF0ZU91dHB1dERldmljZShlLCEwKX11bmJsb2NrQXV0b3BsYXkoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5hdWRpb1NpbmtNYW5hZ2VyLnVuYmxvY2tBdXRvcGxheSgpLHlpZWxkIGNlLnJlc3VtZUNvbnRleHQoKX0pfX07dmFyICR0PWNsYXNze3N0YXRpYyBoYW5kbGVFcnJvcihlKXtpZihlLnN0YXR1cz09PTQwNCl0aHJvdyBTLkFQSUVycm9ycy5FbmRwb2ludFVucmVhY2hhYmxlKFwiRkVFREJBQ0tcIixlLnN0YXR1c1RleHQpO2lmKGUuc3RhdHVzPj00MDApdGhyb3cgUy5BUElFcnJvcnMuU2VydmVyRXJyb3JzKGUuc3RhdHVzLFwiRkVFREJBQ0tcIixlPT1udWxsP3ZvaWQgMDplLnN0YXR1c1RleHQpfXN0YXRpYyBzZW5kRmVlZGJhY2socyl7cmV0dXJuIGModGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKHt0b2tlbjplLGV2ZW50RW5kcG9pbnQ6dD1cImh0dHBzOi8vZXZlbnQuMTAwbXMubGl2ZVwiLGluZm86aSxmZWVkYmFjazpyfSl7bC5kKHRoaXMuVEFHLGBzZW5kRmVlZGJhY2s6IGZlZWRiYWNrRW5kcG9pbnQ9JHt0fSBwZWVySWQ9JHtpLnBlZXIucGVlcl9pZH0gc2Vzc2lvbj0ke2kucGVlci5zZXNzaW9uX2lkfSBgKTtsZXQgbz1uZXcgVVJMKFwidjIvY2xpZW50L2ZlZWRiYWNrXCIsdCksbj1NKG0oe30saSkse3BheWxvYWQ6cn0pO3RyeXtsZXQgZD15aWVsZCBmZXRjaChvLHtoZWFkZXJzOntBdXRob3JpemF0aW9uOmBCZWFyZXIgJHtlfWB9LGJvZHk6SlNPTi5zdHJpbmdpZnkobiksbWV0aG9kOlwiUE9TVFwifSk7dHJ5e3RoaXMuaGFuZGxlRXJyb3IoZCk7cmV0dXJufWNhdGNoKHUpe3Rocm93IGwuZSh0aGlzLlRBRyxcImVycm9yXCIsdS5tZXNzYWdlLGQuc3RhdHVzKSx1IGluc3RhbmNlb2Ygaz91OlMuQVBJRXJyb3JzLlNlcnZlckVycm9ycyhkLnN0YXR1cyxcIkZFRURCQUNLXCIsdS5tZXNzYWdlKX19Y2F0Y2goZCl7bGV0IHU9ZDt0aHJvd1tcIkZhaWxlZCB0byBmZXRjaFwiLFwiTmV0d29ya0Vycm9yXCIsXCJFQ09OTlJFU0VUXCJdLnNvbWUocD0+dS5tZXNzYWdlLmluY2x1ZGVzKHApKT9TLkFQSUVycm9ycy5FbmRwb2ludFVucmVhY2hhYmxlKFwiRkVFREJBQ0tcIix1Lm1lc3NhZ2UpOnV9fSl9fTskdC5UQUc9XCJbRmVlZGJhY2tTZXJ2aWNlXVwiO2ltcG9ydHtFdmVudEVtaXR0ZXIyIGFzIHlufWZyb21cImV2ZW50ZW1pdHRlcjJcIjt2YXIgeD1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuZXZlbnROYW1lPWU7dGhpcy5ldmVudEVtaXR0ZXI9dDt0aGlzLnB1Ymxpc2g9ZT0+e3RoaXMuZXZlbnRFbWl0dGVyLmVtaXQodGhpcy5ldmVudE5hbWUsZSl9O3RoaXMuc3Vic2NyaWJlPWU9Pnt0aGlzLmV2ZW50RW1pdHRlci5vbih0aGlzLmV2ZW50TmFtZSxlKX07dGhpcy5zdWJzY3JpYmVPbmNlPWU9Pnt0aGlzLmV2ZW50RW1pdHRlci5vbmNlKHRoaXMuZXZlbnROYW1lLGUpfTt0aGlzLnVuc3Vic2NyaWJlPWU9Pnt0aGlzLmV2ZW50RW1pdHRlci5vZmYodGhpcy5ldmVudE5hbWUsZSl9O3RoaXMud2FpdEZvcj1lPT50aGlzLmV2ZW50RW1pdHRlci53YWl0Rm9yKHRoaXMuZXZlbnROYW1lLHtmaWx0ZXI6ZX0pO3RoaXMucmVtb3ZlQWxsTGlzdGVuZXJzPSgpPT57dGhpcy5ldmVudEVtaXR0ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKHRoaXMuZXZlbnROYW1lKX19fTt2YXIgS3Q9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmV2ZW50RW1pdHRlcj1uZXcgeW47dGhpcy5hbmFseXRpY3M9bmV3IHgoVi5BTkFMWVRJQ1MsdGhpcy5ldmVudEVtaXR0ZXIpO3RoaXMuZGV2aWNlQ2hhbmdlPW5ldyB4KFYuREVWSUNFX0NIQU5HRSx0aGlzLmV2ZW50RW1pdHRlcik7dGhpcy5sb2NhbEF1ZGlvRW5hYmxlZD1uZXcgeChWLkxPQ0FMX0FVRElPX0VOQUJMRUQsdGhpcy5ldmVudEVtaXR0ZXIpO3RoaXMubG9jYWxWaWRlb0VuYWJsZWQ9bmV3IHgoVi5MT0NBTF9WSURFT19FTkFCTEVELHRoaXMuZXZlbnRFbWl0dGVyKTt0aGlzLmxvY2FsVmlkZW9Vbm11dGVkTmF0aXZlbHk9bmV3IHgoVi5MT0NBTF9WSURFT19VTk1VVEVEX05BVElWRUxZLHRoaXMuZXZlbnRFbWl0dGVyKTt0aGlzLmxvY2FsQXVkaW9Vbm11dGVkTmF0aXZlbHk9bmV3IHgoVi5MT0NBTF9BVURJT19VTk1VVEVEX05BVElWRUxZLHRoaXMuZXZlbnRFbWl0dGVyKTt0aGlzLnN0YXRzVXBkYXRlPW5ldyB4KFYuU1RBVFNfVVBEQVRFLHRoaXMuZXZlbnRFbWl0dGVyKTt0aGlzLnRyYWNrRGVncmFkZWQ9bmV3IHgoVi5UUkFDS19ERUdSQURFRCx0aGlzLmV2ZW50RW1pdHRlcik7dGhpcy50cmFja1Jlc3RvcmVkPW5ldyB4KFYuVFJBQ0tfUkVTVE9SRUQsdGhpcy5ldmVudEVtaXR0ZXIpO3RoaXMudHJhY2tBdWRpb0xldmVsVXBkYXRlPW5ldyB4KFYuVFJBQ0tfQVVESU9fTEVWRUxfVVBEQVRFLHRoaXMuZXZlbnRFbWl0dGVyKTt0aGlzLmF1ZGlvUGx1Z2luRmFpbGVkPW5ldyB4KFYuQVVESU9fUExVR0lOX0ZBSUxFRCx0aGlzLmV2ZW50RW1pdHRlcik7dGhpcy5sb2NhbEF1ZGlvU2lsZW5jZT1uZXcgeChWLkxPQ0FMX0FVRElPX1NJTEVOQ0UsdGhpcy5ldmVudEVtaXR0ZXIpO3RoaXMucG9saWN5Q2hhbmdlPW5ldyB4KFYuUE9MSUNZX0NIQU5HRSx0aGlzLmV2ZW50RW1pdHRlcik7dGhpcy5sb2NhbFJvbGVVcGRhdGU9bmV3IHgoVi5MT0NBTF9ST0xFX1VQREFURSx0aGlzLmV2ZW50RW1pdHRlcik7dGhpcy5hdWRpb1RyYWNrVXBkYXRlPW5ldyB4KFYuQVVESU9fVFJBQ0tfVVBEQVRFLHRoaXMuZXZlbnRFbWl0dGVyKTt0aGlzLmF1ZGlvVHJhY2tBZGRlZD1uZXcgeChWLkFVRElPX1RSQUNLX0FEREVELHRoaXMuZXZlbnRFbWl0dGVyKTt0aGlzLmF1ZGlvVHJhY2tSZW1vdmVkPW5ldyB4KFYuQVVESU9fVFJBQ0tfUkVNT1ZFRCx0aGlzLmV2ZW50RW1pdHRlcik7dGhpcy5hdXRvcGxheUVycm9yPW5ldyB4KFYuQVVUT1BMQVlfRVJST1IsdGhpcy5ldmVudEVtaXR0ZXIpO3RoaXMubGVhdmU9bmV3IHgoVi5MRUFWRSx0aGlzLmV2ZW50RW1pdHRlcik7dGhpcy5lcnJvcj1uZXcgeChWLkVSUk9SLHRoaXMuZXZlbnRFbWl0dGVyKX19O3ZhciBqaT1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5zdG9yZT1lO3RoaXMubGlzdGVuZXI9dDt0aGlzLmF1ZGlvTGlzdGVuZXI9aX1oYW5kbGVBY3RpdmVTcGVha2VycyhlKXt2YXIgcyxvLG47bGV0IHQ9ZVtcInNwZWFrZXItbGlzdFwiXSxpPXQubWFwKGQ9Pih7YXVkaW9MZXZlbDpkLmxldmVsLHBlZXI6dGhpcy5zdG9yZS5nZXRQZWVyQnlJZChkLnBlZXJfaWQpLHRyYWNrOnRoaXMuc3RvcmUuZ2V0VHJhY2tCeUlkKGQudHJhY2tfaWQpfSkpOyhzPXRoaXMuYXVkaW9MaXN0ZW5lcik9PW51bGx8fHMub25BdWRpb0xldmVsVXBkYXRlKGkpLHRoaXMuc3RvcmUudXBkYXRlU3BlYWtlcnMoaSk7bGV0IHI9dFswXTtpZihyKXtsZXQgZD10aGlzLnN0b3JlLmdldFBlZXJCeUlkKHIucGVlcl9pZCk7KG89dGhpcy5saXN0ZW5lcik9PW51bGx8fG8ub25QZWVyVXBkYXRlKDQsZCl9ZWxzZShuPXRoaXMubGlzdGVuZXIpPT1udWxsfHxuLm9uUGVlclVwZGF0ZSg1LG51bGwpfX07dmFyIEppPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMubGlzdGVuZXI9ZTt0aGlzLlRBRz1cIltCcm9hZGNhc3RNYW5hZ2VyXVwifWhhbmRsZU5vdGlmaWNhdGlvbihlLHQpe2U9PT1cIm9uLWJyb2FkY2FzdFwiJiZ0aGlzLmhhbmRsZUJyb2FkY2FzdCh0KX1oYW5kbGVCcm9hZGNhc3QoZSl7dmFyIHQsaTtsLmQodGhpcy5UQUcsYFJlY2VpdmVkIE1lc3NhZ2UgZnJvbSBzZW5kZXI9JHsodD1lPT1udWxsP3ZvaWQgMDplLnBlZXIpPT1udWxsP3ZvaWQgMDp0LnBlZXJfaWR9OiAke2V9YCksKGk9dGhpcy5saXN0ZW5lcik9PW51bGx8fGkub25NZXNzYWdlUmVjZWl2ZWQoZSl9fTt2YXIgUWk9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnN0b3JlPWU7dGhpcy5saXN0ZW5lcj10fWhhbmRsZVF1YWxpdHlVcGRhdGUoZSl7dmFyIHI7bGV0IGk9ZS5wZWVycy5tYXAocz0+e2xldCBvPXRoaXMuc3RvcmUuZ2V0UGVlckJ5SWQocy5wZWVyX2lkKTtyZXR1cm4gbyYmby51cGRhdGVOZXR3b3JrUXVhbGl0eShzLmRvd25saW5rX3Njb3JlKSx7cGVlcklEOnMucGVlcl9pZCxkb3dubGlua1F1YWxpdHk6cy5kb3dubGlua19zY29yZX19KTsocj10aGlzLmxpc3RlbmVyKT09bnVsbHx8ci5vbkNvbm5lY3Rpb25RdWFsaXR5VXBkYXRlKGkpfX07dmFyIGx0PWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpKXt0aGlzLnN0b3JlPWU7dGhpcy5ldmVudEJ1cz10O3RoaXMubGlzdGVuZXI9aTt0aGlzLlRBRz1cIltUcmFja01hbmFnZXJdXCI7dGhpcy50cmFja3NUb1Byb2Nlc3M9bmV3IE1hcDt0aGlzLmhhbmRsZVRyYWNrQWRkPWU9PntsLmQodGhpcy5UQUcsXCJPTlRSQUNLQUREXCIsYCR7ZX1gKSx0aGlzLnRyYWNrc1RvUHJvY2Vzcy5zZXQoZS50cmFja0lkLGUpLHRoaXMucHJvY2Vzc1BlbmRpbmdUcmFja3MoKX07dGhpcy5oYW5kbGVUcmFja1JlbW92ZWRQZXJtYW5lbnRseT1lPT57bC5kKHRoaXMuVEFHLFwiT05UUkFDS1JFTU9WRSBwZXJtYW5lbnRseVwiLGUpLE9iamVjdC5rZXlzKGUudHJhY2tzKS5mb3JFYWNoKGk9Pnt2YXIgbjtsZXQgcj10aGlzLnN0b3JlLmdldFRyYWNrU3RhdGUoaSk7aWYoIXIpcmV0dXJuO2xldCBzPXRoaXMuc3RvcmUuZ2V0VHJhY2tCeUlkKGkpO2lmKCFzKXtsLmQodGhpcy5UQUcsXCJUcmFjayBub3QgZm91bmQgaW4gc3RvcmVcIik7cmV0dXJufXMudHlwZT09PVwiYXVkaW9cIiYmdGhpcy5ldmVudEJ1cy5hdWRpb1RyYWNrUmVtb3ZlZC5wdWJsaXNoKHMpLHRoaXMuc3RvcmUucmVtb3ZlVHJhY2socyk7bGV0IG89dGhpcy5zdG9yZS5nZXRQZWVyQnlJZChyLnBlZXJJZCk7byYmKHRoaXMucmVtb3ZlUGVlclRyYWNrcyhvLHMpLChuPXRoaXMubGlzdGVuZXIpPT1udWxsfHxuLm9uVHJhY2tVcGRhdGUoMSxzLG8pKX0pfTt0aGlzLmhhbmRsZVRyYWNrTGF5ZXJVcGRhdGU9ZT0+e2ZvcihsZXQgdCBpbiBlLnRyYWNrcyl7bGV0IGk9ZS50cmFja3NbdF0scj10aGlzLnN0b3JlLmdldFRyYWNrQnlJZCh0KTshcnx8IXRoaXMuc3RvcmUuZ2V0UGVlckJ5VHJhY2tJZCh0KXx8ciBpbnN0YW5jZW9mIE8mJnRoaXMuc2V0TGF5ZXIocixpKX19O3RoaXMuaGFuZGxlVHJhY2tVcGRhdGU9KGUsdD0hMCk9Pnt2YXIgcyxvO2xldCBpPXRoaXMuc3RvcmUuZ2V0UGVlckJ5SWQoZS5wZWVyLnBlZXJfaWQpLHI9ZS5wZWVyO2lmKCFpJiYhcil7bC5kKHRoaXMuVEFHLFwiVHJhY2sgVXBkYXRlIGlnbm9yZWQgLSBQZWVyIG5vdCBhZGRlZCB0byBzdG9yZVwiKTtyZXR1cm59aXx8KGk9eWUocix0aGlzLnN0b3JlKSx0aGlzLnN0b3JlLmFkZFBlZXIoaSkpO2ZvcihsZXQgbiBpbiBlLnRyYWNrcyl7bGV0IGQ9T2JqZWN0LmFzc2lnbih7fSwocz10aGlzLnN0b3JlLmdldFRyYWNrU3RhdGUobikpPT1udWxsP3ZvaWQgMDpzLnRyYWNrSW5mbyksdT1lLnRyYWNrc1tuXSxwPXRoaXMuc3RvcmUuZ2V0VHJhY2tCeUlkKG4pO2lmKHRoaXMuc3RvcmUuc2V0VHJhY2tTdGF0ZSh7cGVlcklkOmUucGVlci5wZWVyX2lkLHRyYWNrSW5mbzptKG0oe30sZCksdSl9KSwhcHx8dGhpcy50cmFja3NUb1Byb2Nlc3MuaGFzKG4pKXRoaXMucHJvY2Vzc1RyYWNrSW5mbyh1LGUucGVlci5wZWVyX2lkLHQpLHRoaXMucHJvY2Vzc1BlbmRpbmdUcmFja3MoKTtlbHNle3Auc2V0RW5hYmxlZCghdS5tdXRlKTtsZXQgaD10aGlzLnByb2Nlc3NUcmFja1VwZGF0ZShwLGQsdSk7aCYmKChvPXRoaXMubGlzdGVuZXIpPT1udWxsfHxvLm9uVHJhY2tVcGRhdGUoaCxwLGkpKX19fTt0aGlzLnByb2Nlc3NUcmFja0luZm89KGUsdCxpKT0+e307dGhpcy5wcm9jZXNzUGVuZGluZ1RyYWNrcz0oKT0+e25ldyBNYXAodGhpcy50cmFja3NUb1Byb2Nlc3MpLmZvckVhY2godD0+e3ZhciBzO2xldCBpPXRoaXMuc3RvcmUuZ2V0VHJhY2tTdGF0ZSh0LnRyYWNrSWQpO2lmKCFpKXtsLmQodGhpcy5UQUcsXCJUcmFja1N0YXRlIG5vdCBhZGRlZCB0byBzdG9yZVwiLGBwZWVySWQgLSAke3QucGVlcklkfWAsYHRyYWNrSWQgLSR7dC50cmFja0lkfWApO3JldHVybn1sZXQgcj10aGlzLnN0b3JlLmdldFBlZXJCeUlkKGkucGVlcklkKTtpZighcil7bC5kKHRoaXMuVEFHLFwiUGVlciBub3QgYWRkZWQgdG8gc3RvcmUsIHBlZXJJZFwiLGkucGVlcklkKTtyZXR1cm59dC5zb3VyY2U9aS50cmFja0luZm8uc291cmNlLHQucGVlcklkPXIucGVlcklkLHQubG9nSWRlbnRpZmllcj1yLm5hbWUsdC5zZXRFbmFibGVkKCFpLnRyYWNrSW5mby5tdXRlKSx0aGlzLmFkZEF1ZGlvVHJhY2socix0KSx0aGlzLmFkZFZpZGVvVHJhY2socix0KSx0LnR5cGU9PT1cImF1ZGlvXCI/dGhpcy5ldmVudEJ1cy5hdWRpb1RyYWNrQWRkZWQucHVibGlzaCh7dHJhY2s6dCxwZWVyOnJ9KToocz10aGlzLmxpc3RlbmVyKT09bnVsbHx8cy5vblRyYWNrVXBkYXRlKDAsdCxyKSx0aGlzLnRyYWNrc1RvUHJvY2Vzcy5kZWxldGUodC50cmFja0lkKX0pfX1oYW5kbGVUcmFja01ldGFkYXRhQWRkKGUpe2wuZCh0aGlzLlRBRyxcIlRSQUNLX01FVEFEQVRBX0FERFwiLEpTT04uc3RyaW5naWZ5KGUsbnVsbCwyKSk7Zm9yKGxldCB0IGluIGUudHJhY2tzKXtsZXQgaT1lLnRyYWNrc1t0XTt0aGlzLnN0b3JlLnNldFRyYWNrU3RhdGUoe3BlZXJJZDplLnBlZXIucGVlcl9pZCx0cmFja0luZm86aX0pfXRoaXMucHJvY2Vzc1BlbmRpbmdUcmFja3MoKX1oYW5kbGVUcmFja1JlbW92ZShlLHQ9ITApe3ZhciBzO2wuZCh0aGlzLlRBRyxcIk9OVFJBQ0tSRU1PVkVcIixgJHtlfWApO2xldCBpPXRoaXMuc3RvcmUuZ2V0VHJhY2tTdGF0ZShlLnRyYWNrSWQpO2lmKCFpKXJldHVybjtpZighdGhpcy5zdG9yZS5oYXNUcmFjayhlKSl7bC5kKHRoaXMuVEFHLFwiVHJhY2sgbm90IGZvdW5kIGluIHN0b3JlXCIpO3JldHVybn1pZih0KXt0aGlzLnN0b3JlLnJlbW92ZVRyYWNrKGUpO2xldCBvPXRoaXMuc3RvcmUuZ2V0UGVlckJ5SWQoaS5wZWVySWQpO2lmKCFvKXJldHVybjt0aGlzLnJlbW92ZVBlZXJUcmFja3MobyxlKSwocz10aGlzLmxpc3RlbmVyKT09bnVsbHx8cy5vblRyYWNrVXBkYXRlKDEsZSxvKSxlLnR5cGU9PT1cImF1ZGlvXCImJnRoaXMuZXZlbnRCdXMuYXVkaW9UcmFja1JlbW92ZWQucHVibGlzaChlKX19c2V0TGF5ZXIoZSx0KXt2YXIgcyxvO2xldCBpPXRoaXMuc3RvcmUuZ2V0UGVlckJ5VHJhY2tJZChlLnRyYWNrSWQpO2lmKCFpKXJldHVybjtlLnNldExheWVyRnJvbVNlcnZlcih0KT8ocz10aGlzLmxpc3RlbmVyKT09bnVsbHx8cy5vblRyYWNrVXBkYXRlKDUsZSxpKToobz10aGlzLmxpc3RlbmVyKT09bnVsbHx8by5vblRyYWNrVXBkYXRlKDYsZSxpKX1yZW1vdmVQZWVyVHJhY2tzKGUsdCl7bGV0IGk9ZS5hdXhpbGlhcnlUcmFja3MuaW5kZXhPZih0KTtpPi0xPyhlLmF1eGlsaWFyeVRyYWNrcy5zcGxpY2UoaSwxKSxsLmQodGhpcy5UQUcsXCJhdXhpbGlhcnkgdHJhY2sgcmVtb3ZlZFwiLGAke3R9YCkpOnQudHlwZT09PVwiYXVkaW9cIiYmZS5hdWRpb1RyYWNrPT09dD8oZS5hdWRpb1RyYWNrPXZvaWQgMCxsLmQodGhpcy5UQUcsXCJhdWRpbyB0cmFjayByZW1vdmVkXCIsYCR7dH1gKSk6dC50eXBlPT09XCJ2aWRlb1wiJiZlLnZpZGVvVHJhY2s9PT10JiYoZS52aWRlb1RyYWNrPXZvaWQgMCxsLmQodGhpcy5UQUcsXCJ2aWRlbyB0cmFjayByZW1vdmVkXCIsYCR7dH1gKSl9YWRkQXVkaW9UcmFjayhlLHQpe3ZhciBpO3QudHlwZT09PVwiYXVkaW9cIiYmKHQuc291cmNlPT09XCJyZWd1bGFyXCImJighZS5hdWRpb1RyYWNrfHwoKGk9ZS5hdWRpb1RyYWNrKT09bnVsbD92b2lkIDA6aS50cmFja0lkKT09PXQudHJhY2tJZCk/ZS5hdWRpb1RyYWNrPXQ6ZS5hdXhpbGlhcnlUcmFja3MucHVzaCh0KSx0aGlzLnN0b3JlLmFkZFRyYWNrKHQpLGwuZCh0aGlzLlRBRyxcImF1ZGlvIHRyYWNrIGFkZGVkXCIsYCR7dH1gKSl9YWRkVmlkZW9UcmFjayhlLHQpe2lmKHQudHlwZSE9PVwidmlkZW9cIilyZXR1cm47bGV0IGk9dCxyPXRoaXMuc3RvcmUuZ2V0U2ltdWxjYXN0RGVmaW5pdGlvbnNGb3JQZWVyKGUsaS5zb3VyY2UpO2lmKGkuc2V0U2ltdWxjYXN0RGVmaW5pdG9ucyhyKSx0aGlzLmFkZEFzUHJpbWFyeVZpZGVvVHJhY2soZSxpKSllLnZpZGVvVHJhY2s/ZS52aWRlb1RyYWNrLnJlcGxhY2VUcmFjayhpKTplLnZpZGVvVHJhY2s9aSx0aGlzLnN0b3JlLmFkZFRyYWNrKGUudmlkZW9UcmFjayk7ZWxzZXtsZXQgcz1lLmF1eGlsaWFyeVRyYWNrcy5maW5kSW5kZXgobz0+by50cmFja0lkPT09aS50cmFja0lkKTtzPT09LTE/KGUuYXV4aWxpYXJ5VHJhY2tzLnB1c2goaSksdGhpcy5zdG9yZS5hZGRUcmFjayhpKSk6KGUuYXV4aWxpYXJ5VHJhY2tzW3NdLnJlcGxhY2VUcmFjayhpKSx0aGlzLnN0b3JlLmFkZFRyYWNrKGUuYXV4aWxpYXJ5VHJhY2tzW3NdKSl9bC5kKHRoaXMuVEFHLFwidmlkZW8gdHJhY2sgYWRkZWRcIixgJHt0fWApfWFkZEFzUHJpbWFyeVZpZGVvVHJhY2soZSx0KXt2YXIgaTtyZXR1cm4gdC5zb3VyY2U9PT1cInJlZ3VsYXJcIiYmKCFlLnZpZGVvVHJhY2t8fCgoaT1lLnZpZGVvVHJhY2spPT1udWxsP3ZvaWQgMDppLnRyYWNrSWQpPT09dC50cmFja0lkKX1wcm9jZXNzVHJhY2tVcGRhdGUoZSx0LGkpe2xldCByO3JldHVybiB0Lm11dGUhPT1pLm11dGU/KHI9aS5tdXRlPzI6MyxlLnR5cGU9PT1cImF1ZGlvXCImJnRoaXMuZXZlbnRCdXMuYXVkaW9UcmFja1VwZGF0ZS5wdWJsaXNoKHt0cmFjazplLGVuYWJsZWQ6IWkubXV0ZX0pKTp0LmRlc2NyaXB0aW9uIT09aS5kZXNjcmlwdGlvbiYmKHI9NCkscn19O3ZhciB6aT1jbGFzcyBleHRlbmRzIGx0e2NvbnN0cnVjdG9yKHQsaSxyLHMpe3N1cGVyKHQsaSxzKTt0aGlzLnRyYW5zcG9ydD1yO3RoaXMuVEFHPVwiW09uRGVtYW5kVHJhY2tNYW5hZ2VyXVwiO3RoaXMucHJvY2Vzc1RyYWNrSW5mbz0odCxpLHI9ITApPT57dmFyIHUscDtpZih0LnR5cGUhPT1cInZpZGVvXCIpcmV0dXJuO2xldCBzPXRoaXMuc3RvcmUuZ2V0UGVlckJ5SWQoaSk7aWYoIXN8fCF0aGlzLmlzUGVlclJvbGVTdWJzY3JpYmVkKGkpKXtsLmQodGhpcy5UQUcsYG5vIHBlZXIgaW4gc3RvcmUgZm9yIHBlZXJJZDogJHtpfWApO3JldHVybn1sZXQgbz1uZXcgUGUobmV3IE1lZGlhU3RyZWFtLHRoaXMudHJhbnNwb3J0LmdldFN1YnNjcmliZUNvbm5lY3Rpb24oKSksbj1iZS5nZXRFbXB0eVZpZGVvVHJhY2soKTtuLmVuYWJsZWQ9IXQubXV0ZTtsZXQgZD1uZXcgTyhvLG4sdC5zb3VyY2UsKHU9dGhpcy5zdG9yZS5nZXRSb29tKCkpPT1udWxsP3ZvaWQgMDp1LmRpc2FibGVOb25lTGF5ZXJSZXF1ZXN0KTtkLnNldFRyYWNrSWQodC50cmFja19pZCksZC5wZWVySWQ9cy5wZWVySWQsZC5sb2dJZGVudGlmaWVyPXMubmFtZSx0aGlzLmFkZFZpZGVvVHJhY2socyxkKSxyJiYoKHA9dGhpcy5saXN0ZW5lcik9PW51bGx8fHAub25UcmFja1VwZGF0ZSgwLHMudmlkZW9UcmFjayxzKSl9fWhhbmRsZVRyYWNrTWV0YWRhdGFBZGQodCl7c3VwZXIuaGFuZGxlVHJhY2tNZXRhZGF0YUFkZCh0KTtmb3IobGV0IGkgaW4gdC50cmFja3MpdC50cmFja3NbaV0udHlwZT09PVwidmlkZW9cIiYmdGhpcy5wcm9jZXNzVHJhY2tJbmZvKHQudHJhY2tzW2ldLHQucGVlci5wZWVyX2lkKX1oYW5kbGVUcmFja1JlbW92ZSh0KXtsZXQgaT10LnR5cGU9PT1cInZpZGVvXCImJnQuc291cmNlPT09XCJyZWd1bGFyXCI7c3VwZXIuaGFuZGxlVHJhY2tSZW1vdmUodCwhaSksaSYmdGhpcy5wcm9jZXNzVHJhY2tJbmZvKHt0cmFja19pZDp0LnRyYWNrSWQsbXV0ZTohdC5lbmFibGVkLHR5cGU6dC50eXBlLHNvdXJjZTp0LnNvdXJjZSxzdHJlYW1faWQ6dC5zdHJlYW0uaWR9LHQucGVlcklkLCExKX1hZGRBc1ByaW1hcnlWaWRlb1RyYWNrKHQsaSl7cmV0dXJuIGkuc291cmNlIT09XCJyZWd1bGFyXCI/ITE6IXQudmlkZW9UcmFja3x8dC52aWRlb1RyYWNrLnRyYWNrSWQ9PT1pLnRyYWNrSWQ/ITA6dC52aWRlb1RyYWNrLmVuYWJsZWQmJnZlKHQudmlkZW9UcmFjay5uYXRpdmVUcmFjayl9aXNQZWVyUm9sZVN1YnNjcmliZWQodCl7dmFyIHMsbyxuLGQ7aWYoIXQpcmV0dXJuITA7bGV0IGk9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKSxyPXRoaXMuc3RvcmUuZ2V0UGVlckJ5SWQodCk7cmV0dXJuIHImJigoZD0obz0ocz1pPT1udWxsP3ZvaWQgMDppLnJvbGUpPT1udWxsP3ZvaWQgMDpzLnN1YnNjcmliZVBhcmFtcyk9PW51bGw/dm9pZCAwOm8uc3Vic2NyaWJlVG9Sb2xlcyk9PW51bGw/dm9pZCAwOmQuaW5jbHVkZXMoKG49ci5yb2xlKT09bnVsbD92b2lkIDA6bi5uYW1lKSl9fTt2YXIgWWk9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkscil7dGhpcy5zdG9yZT1lO3RoaXMucGVlck1hbmFnZXI9dDt0aGlzLnRyYWNrTWFuYWdlcj1pO3RoaXMubGlzdGVuZXI9cjt0aGlzLlRBRz1cIltQZWVyTGlzdE1hbmFnZXJdXCI7dGhpcy5oYW5kbGVJbml0aWFsUGVlckxpc3Q9ZT0+e2xldCB0PU9iamVjdC52YWx1ZXMoZS5wZWVycyk7dGhpcy5wZWVyTWFuYWdlci5oYW5kbGVQZWVyTGlzdCh0KX07dGhpcy5oYW5kbGVSZWNvbm5lY3RQZWVyTGlzdD1lPT57dGhpcy5oYW5kbGVSZXBlYXRlZFBlZXJMaXN0KGUucGVlcnMpfTt0aGlzLmhhbmRsZVByZXZpZXdSb29tU3RhdGU9ZT0+e2lmKCF0aGlzLnN0b3JlLmhhc1JvbGVEZXRhaWxzQXJyaXZlZCgpKXJldHVybjtsZXQgdD1lLnBlZXJzO2lmKHQ9PW51bGwpe2UucGVlcl9jb3VudD09PTAmJnRoaXMuaGFuZGxlUmVwZWF0ZWRQZWVyTGlzdCh7fSk7cmV0dXJufU9iamVjdC5rZXlzKHQpLmZvckVhY2goaT0+e3RbaV0udHJhY2tzPXt9LHRbaV0uaXNfZnJvbV9yb29tX3N0YXRlPSEwfSksdGhpcy5oYW5kbGVSZXBlYXRlZFBlZXJMaXN0KHQpfTt0aGlzLmhhbmRsZVJlcGVhdGVkUGVlckxpc3Q9ZT0+e2xldCB0PXRoaXMuc3RvcmUuZ2V0UmVtb3RlUGVlcnMoKSxpPU9iamVjdC52YWx1ZXMoZSkscj10LmZpbHRlcihvPT4hZVtvLnBlZXJJZF0pO3IubGVuZ3RoPjAmJmwuZCh0aGlzLlRBRyxgJHtyfWApLHIuZm9yRWFjaChvPT57dmFyIGQ7bGV0IG49e3BlZXJfaWQ6by5wZWVySWQscm9sZTooKGQ9by5yb2xlKT09bnVsbD92b2lkIDA6ZC5uYW1lKXx8XCJcIixpbmZvOntuYW1lOm8ubmFtZSxkYXRhOm8ubWV0YWRhdGF8fFwiXCIsdXNlcl9pZDpvLmN1c3RvbWVyVXNlcklkfHxcIlwiLHR5cGU6by50eXBlfSx0cmFja3M6e30sZ3JvdXBzOltdLHJlYWx0aW1lOm8ucmVhbHRpbWV9O3RoaXMucGVlck1hbmFnZXIuaGFuZGxlUGVlckxlYXZlKG4pfSk7bGV0IHM9W107aS5mb3JFYWNoKG89PntsZXQgbj10aGlzLnN0b3JlLmdldFBlZXJCeUlkKG8ucGVlcl9pZCksZD1PYmplY3QudmFsdWVzKG8udHJhY2tzKTtuJiYodGhpcy5zdG9yZS5nZXRQZWVyVHJhY2tzKG4ucGVlcklkKS5mb3JFYWNoKHA9Pnt2YXIgaDtvLnRyYWNrc1twLnRyYWNrSWRdfHwodGhpcy5yZW1vdmVQZWVyVHJhY2sobixwLnRyYWNrSWQpLChoPXRoaXMubGlzdGVuZXIpPT1udWxsfHxoLm9uVHJhY2tVcGRhdGUoMSxwLG4pKX0pLGQuZm9yRWFjaChwPT57dGhpcy5zdG9yZS5nZXRUcmFja0J5SWQocC50cmFja19pZCl8fHRoaXMuc3RvcmUuc2V0VHJhY2tTdGF0ZSh7cGVlcklkOm4ucGVlcklkLHRyYWNrSW5mbzpwfSl9KSx0aGlzLnRyYWNrTWFuYWdlci5oYW5kbGVUcmFja1VwZGF0ZSh7cGVlcjpvLHRyYWNrczpvLnRyYWNrc30sITEpLHRoaXMucGVlck1hbmFnZXIuaGFuZGxlUGVlclVwZGF0ZShvKSkscy5wdXNoKG8pfSkscy5sZW5ndGg+MCYmdGhpcy5wZWVyTWFuYWdlci5oYW5kbGVQZWVyTGlzdChzKX19aGFuZGxlTm90aWZpY2F0aW9uKGUsdCxpKXtpZihlPT09XCJwZWVyLWxpc3RcIil7bGV0IHI9dDtpPyhsLmQodGhpcy5UQUcsXCJSRUNPTk5FQ1RfUEVFUl9MSVNUIGV2ZW50XCIsSlNPTi5zdHJpbmdpZnkocixudWxsLDIpKSx0aGlzLmhhbmRsZVJlY29ubmVjdFBlZXJMaXN0KHIpKToobC5kKHRoaXMuVEFHLFwiUEVFUl9MSVNUIGV2ZW50XCIsSlNPTi5zdHJpbmdpZnkocixudWxsLDIpKSx0aGlzLmhhbmRsZUluaXRpYWxQZWVyTGlzdChyKSl9ZWxzZSBpZihlPT09XCJyb29tLXN0YXRlXCIpe2xldCByPXQ7dGhpcy5oYW5kbGVQcmV2aWV3Um9vbVN0YXRlKHIpfX1yZW1vdmVQZWVyVHJhY2soZSx0KXt2YXIgaSxyO2lmKGwuZCh0aGlzLlRBRyxgcmVtb3ZpbmcgdHJhY2sgLSAke3R9IGZyb20gJHtlfWApLCgoaT1lLmF1ZGlvVHJhY2spPT1udWxsP3ZvaWQgMDppLnRyYWNrSWQpPT09dCllLmF1ZGlvVHJhY2s9dm9pZCAwO2Vsc2UgaWYoKChyPWUudmlkZW9UcmFjayk9PW51bGw/dm9pZCAwOnIudHJhY2tJZCk9PT10KWUudmlkZW9UcmFjaz12b2lkIDA7ZWxzZXtsZXQgcz1lLmF1eGlsaWFyeVRyYWNrcy5maW5kSW5kZXgobz0+by50cmFja0lkPT09dCk7cz49MCYmZS5hdXhpbGlhcnlUcmFja3Muc3BsaWNlKHMsMSl9fX07dmFyIEw9YT0+YT9uZXcgRGF0ZShhKTp2b2lkIDA7dmFyIFhpPWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpKXt0aGlzLnN0b3JlPWU7dGhpcy50cmFja01hbmFnZXI9dDt0aGlzLmxpc3RlbmVyPWk7dGhpcy5UQUc9XCJbUGVlck1hbmFnZXJdXCI7dGhpcy5oYW5kbGVQZWVyTGlzdD1lPT57dmFyIHIscztpZihlLmxlbmd0aD09PTApeyhyPXRoaXMubGlzdGVuZXIpPT1udWxsfHxyLm9uUGVlclVwZGF0ZSg5LFtdKTtyZXR1cm59bGV0IHQ9W10saT1uZXcgU2V0KGUubWFwKG89Pm8ucGVlcl9pZCkpO3RoaXMuc3RvcmUuZ2V0UmVtb3RlUGVlcnMoKS5mb3JFYWNoKCh7cGVlcklkOm8sZnJvbVJvb21TdGF0ZTpufSk9PnshaS5oYXMobykmJm4mJnRoaXMuc3RvcmUucmVtb3ZlUGVlcihvKX0pO2ZvcihsZXQgbyBvZiBlKXQucHVzaCh0aGlzLm1ha2VQZWVyKG8pKTsocz10aGlzLmxpc3RlbmVyKT09bnVsbHx8cy5vblBlZXJVcGRhdGUoOSx0KSx0aGlzLnRyYWNrTWFuYWdlci5wcm9jZXNzUGVuZGluZ1RyYWNrcygpfTt0aGlzLmhhbmRsZVBlZXJKb2luPWU9Pnt2YXIgaTtsZXQgdD10aGlzLm1ha2VQZWVyKGUpOyhpPXRoaXMubGlzdGVuZXIpPT1udWxsfHxpLm9uUGVlclVwZGF0ZSgwLHQpLHRoaXMudHJhY2tNYW5hZ2VyLnByb2Nlc3NQZW5kaW5nVHJhY2tzKCl9O3RoaXMuaGFuZGxlUGVlckxlYXZlPWU9Pnt2YXIgaSxyLHMsbztsZXQgdD10aGlzLnN0b3JlLmdldFBlZXJCeUlkKGUucGVlcl9pZCk7dGhpcy5zdG9yZS5yZW1vdmVQZWVyKGUucGVlcl9pZCksbC5kKHRoaXMuVEFHLFwiUEVFUl9MRUFWRVwiLGUucGVlcl9pZCxgcmVtYWluaW5nUGVlcnM9JHt0aGlzLnN0b3JlLmdldFBlZXJzKCkubGVuZ3RofWApLHQmJih0LmF1ZGlvVHJhY2smJigoaT10aGlzLmxpc3RlbmVyKT09bnVsbHx8aS5vblRyYWNrVXBkYXRlKDEsdC5hdWRpb1RyYWNrLHQpKSx0LnZpZGVvVHJhY2smJigocj10aGlzLmxpc3RlbmVyKT09bnVsbHx8ci5vblRyYWNrVXBkYXRlKDEsdC52aWRlb1RyYWNrLHQpKSwocz10LmF1eGlsaWFyeVRyYWNrcyk9PW51bGx8fHMuZm9yRWFjaChuPT57dmFyIGQ7KGQ9dGhpcy5saXN0ZW5lcik9PW51bGx8fGQub25UcmFja1VwZGF0ZSgxLG4sdCl9KSwobz10aGlzLmxpc3RlbmVyKT09bnVsbHx8by5vblBlZXJVcGRhdGUoMSx0KSl9fWhhbmRsZU5vdGlmaWNhdGlvbihlLHQpe3N3aXRjaChlKXtjYXNlXCJvbi1wZWVyLWpvaW5cIjp7bGV0IGk9dDt0aGlzLmhhbmRsZVBlZXJKb2luKGkpO2JyZWFrfWNhc2VcIm9uLXBlZXItbGVhdmVcIjp7bGV0IGk9dDt0aGlzLmhhbmRsZVBlZXJMZWF2ZShpKTticmVha31jYXNlXCJvbi1wZWVyLXVwZGF0ZVwiOnRoaXMuaGFuZGxlUGVlclVwZGF0ZSh0KTticmVhaztkZWZhdWx0OmJyZWFrfX1oYW5kbGVQZWVyVXBkYXRlKGUpe3ZhciBzLG8sbixkLHU7bGV0IHQ9dGhpcy5zdG9yZS5nZXRQZWVyQnlJZChlLnBlZXJfaWQpO2lmKCF0JiZlLnJlYWx0aW1lKXt0PXRoaXMubWFrZVBlZXIoZSksKHM9dGhpcy5saXN0ZW5lcik9PW51bGx8fHMub25QZWVyVXBkYXRlKHQuaXNIYW5kUmFpc2VkPzEyOjE0LHQpO3JldHVybn1pZih0JiYhdC5pc0xvY2FsJiYhZS5yZWFsdGltZSl7dGhpcy5zdG9yZS5yZW1vdmVQZWVyKHQucGVlcklkKSwobz10aGlzLmxpc3RlbmVyKT09bnVsbHx8by5vblBlZXJVcGRhdGUoMTMsdCk7cmV0dXJufWlmKCF0KXtsLmQodGhpcy5UQUcsYHBlZXIgJHtlLnBlZXJfaWR9IG5vdCBmb3VuZGApO3JldHVybn1pZih0LnJvbGUmJnQucm9sZS5uYW1lIT09ZS5yb2xlKXtsZXQgcD10aGlzLnN0b3JlLmdldFBvbGljeUZvclJvbGUoZS5yb2xlKTt0LnVwZGF0ZVJvbGUocCksdGhpcy51cGRhdGVTaW11bGNhc3RMYXllcnNGb3JQZWVyKHQpLChuPXRoaXMubGlzdGVuZXIpPT1udWxsfHxuLm9uUGVlclVwZGF0ZSg4LHQpfWxldCBpPXQuaXNIYW5kUmFpc2VkO3QudXBkYXRlR3JvdXBzKGUuZ3JvdXBzKTtsZXQgcj0oZD1lLmdyb3Vwcyk9PW51bGw/dm9pZCAwOmQuaW5jbHVkZXMoQWUpO2khPT1yJiYoKHU9dGhpcy5saXN0ZW5lcik9PW51bGx8fHUub25QZWVyVXBkYXRlKDEyLHQpKSx0aGlzLmhhbmRsZVBlZXJJbmZvVXBkYXRlKG0oe3BlZXI6dH0sZS5pbmZvKSl9aGFuZGxlUGVlckluZm9VcGRhdGUoe3BlZXI6ZSxuYW1lOnQsZGF0YTppfSl7dmFyIHIscztlJiYodCYmZS5uYW1lIT09dCYmKGUudXBkYXRlTmFtZSh0KSwocj10aGlzLmxpc3RlbmVyKT09bnVsbHx8ci5vblBlZXJVcGRhdGUoMTAsZSkpLGkmJmUubWV0YWRhdGEhPT1pJiYoZS51cGRhdGVNZXRhZGF0YShpKSwocz10aGlzLmxpc3RlbmVyKT09bnVsbHx8cy5vblBlZXJVcGRhdGUoMTEsZSkpKX1tYWtlUGVlcihlKXtsZXQgdD10aGlzLnN0b3JlLmdldFBlZXJCeUlkKGUucGVlcl9pZCk7dHx8KHQ9eWUoZSx0aGlzLnN0b3JlKSx0LnJlYWx0aW1lPWUucmVhbHRpbWUsdC5qb2luZWRBdD1MKGUuam9pbmVkX2F0KSx0LmZyb21Sb29tU3RhdGU9ISFlLmlzX2Zyb21fcm9vbV9zdGF0ZSx0aGlzLnN0b3JlLmFkZFBlZXIodCksbC5kKHRoaXMuVEFHLFwiYWRkaW5nIHRvIHRoZSBwZWVyTGlzdFwiLGAke3R9YCkpO2ZvcihsZXQgaSBpbiBlLnRyYWNrcyl7bGV0IHI9ZS50cmFja3NbaV07dGhpcy5zdG9yZS5zZXRUcmFja1N0YXRlKHtwZWVySWQ6ZS5wZWVyX2lkLHRyYWNrSW5mbzpyfSksci50eXBlPT09XCJ2aWRlb1wiJiZ0aGlzLnRyYWNrTWFuYWdlci5wcm9jZXNzVHJhY2tJbmZvKHIsZS5wZWVyX2lkLCExKX1yZXR1cm4gdH11cGRhdGVTaW11bGNhc3RMYXllcnNGb3JQZWVyKGUpe3RoaXMuc3RvcmUuZ2V0UGVlclRyYWNrcyhlLnBlZXJJZCkuZm9yRWFjaCh0PT57aWYodC50eXBlPT09XCJ2aWRlb1wiJiZbXCJyZWd1bGFyXCIsXCJzY3JlZW5cIl0uaW5jbHVkZXModC5zb3VyY2UpKXtsZXQgaT10LHI9dGhpcy5zdG9yZS5nZXRTaW11bGNhc3REZWZpbml0aW9uc0ZvclBlZXIoZSxpLnNvdXJjZSk7aS5zZXRTaW11bGNhc3REZWZpbml0b25zKHIpfX0pfX07dmFyIFppPWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5zdG9yZT1lO3RoaXMuZXZlbnRCdXM9dH1oYW5kbGVQb2xpY3lDaGFuZ2UoZSl7bGV0IHQ9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKTtpZih0JiYhdC5yb2xlKXtsZXQgcj1lLmtub3duX3JvbGVzW2UubmFtZV07dC51cGRhdGVSb2xlKHIpfXRoaXMuc3RvcmUuc2V0S25vd25Sb2xlcyhlKTtsZXQgaT10aGlzLnN0b3JlLmdldFJvb20oKTtpP2kudGVtcGxhdGVJZD1lLnRlbXBsYXRlX2lkOmwudyhcIltQb2xpY3lDaGFuZ2VNYW5hZ2VyXVwiLFwib24gcG9saWN5IGNoYW5nZSAtIHJvb20gbm90IHByZXNlbnRcIiksdGhpcy51cGRhdGVMb2NhbFBlZXJSb2xlKGUpLHRoaXMuZXZlbnRCdXMucG9saWN5Q2hhbmdlLnB1Ymxpc2goZSl9dXBkYXRlTG9jYWxQZWVyUm9sZShlKXt2YXIgaTtsZXQgdD10aGlzLnN0b3JlLmdldExvY2FsUGVlcigpO2lmKHQhPW51bGwmJnQucm9sZSYmdC5yb2xlLm5hbWUhPT1lLm5hbWUpe2xldCByPXRoaXMuc3RvcmUuZ2V0UG9saWN5Rm9yUm9sZShlLm5hbWUpLHM9dC5yb2xlO3QudXBkYXRlUm9sZShyKSxyLm5hbWU9PT0oKGk9dC5hc1JvbGUpPT1udWxsP3ZvaWQgMDppLm5hbWUpJiZkZWxldGUgdC5hc1JvbGUsdGhpcy5ldmVudEJ1cy5sb2NhbFJvbGVVcGRhdGUucHVibGlzaCh7b2xkUm9sZTpzLG5ld1JvbGU6cn0pfX19O3ZhciBucz0oZj0+KGYuRkxBR19TRVJWRVJfU1VCX0RFR1JBREFUSU9OPVwic3Vic2NyaWJlRGVncmFkYXRpb25cIixmLkZMQUdfU0VSVkVSX1NJTVVMQ0FTVD1cInNpbXVsY2FzdFwiLGYuRkxBR19OT05fV0VCUlRDX0RJU0FCTEVfT0ZGRVI9XCJub25XZWJSVENEaXNhYmxlT2ZmZXJcIixmLkZMQUdfUFVCTElTSF9TVEFUUz1cInB1Ymxpc2hTdGF0c1wiLGYuRkxBR19TVUJTQ1JJQkVfU1RBVFM9XCJzdWJzY3JpYmVTdGF0c1wiLGYuRkxBR19PTl9ERU1BTkRfVFJBQ0tTPVwib25EZW1hbmRUcmFja3NcIixmLkZMQUdfRElTQUJMRV9WSURFT19UUkFDS19BVVRPX1VOU1VCU0NSSUJFPVwiZGlzYWJsZVZpZGVvVHJhY2tBdXRvVW5zdWJzY3JpYmVcIixmLkZMQUdfV0hJVEVCT0FSRF9FTkFCTEVEPVwid2hpdGVib2FyZEVuYWJsZWRcIixmLkZMQUdfRUZGRUNUU19TREtfRU5BQkxFRD1cImVmZmVjdHNTREtFbmFibGVkXCIsZi5GTEFHX1ZCX0VOQUJMRUQ9XCJ2YlwiLGYuRkxBR19ISVBBQV9FTkFCTEVEPVwiaGlwYWFcIixmLkZMQUdfTk9JU0VfQ0FOQ0VMTEFUSU9OPVwibm9pc2VDYW5jZWxsYXRpb25cIixmLkZMQUdfU0NBTEVfU0NSRUVOU0hBUkVfQkFTRURfT05fUElYRUxTPVwic2NhbGVTY3JlZW5zaGFyZUJhc2VkT25QaXhlbHNcIixmLkZMQUdfRElTQUJMRV9OT05FX0xBWUVSX1JFUVVFU1Q9XCJkaXNhYmxlTm9uZUxheWVyUmVxdWVzdFwiLGYpKShuc3x8e30pO3ZhciBxdD0oYSxlLHQpPT57bGV0IGk9dD09PVwicWFcIj9hYTpzYSxyPW5ldyBVUkwoaSk7cmV0dXJuIHIuc2VhcmNoUGFyYW1zLnNldChcImVuZHBvaW50XCIsYGh0dHBzOi8vJHtlfWApLHIuc2VhcmNoUGFyYW1zLnNldChcInRva2VuXCIsYSksci50b1N0cmluZygpfTt2YXIgZXI9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMudHJhbnNwb3J0PWU7dGhpcy5zdG9yZT10O3RoaXMubGlzdGVuZXI9aTt0aGlzLlRBRz1cIltITVNXaGl0ZWJvYXJkSW50ZXJhY3Rpdml0eUNlbnRlcl1cIn1nZXQgaXNFbmFibGVkKCl7cmV0dXJuIHRoaXMudHJhbnNwb3J0LmlzRmxhZ0VuYWJsZWQoXCJ3aGl0ZWJvYXJkRW5hYmxlZFwiKX1vcGVuKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgbztpZighdGhpcy5pc0VuYWJsZWQpcmV0dXJuIGwudyh0aGlzLlRBRyxcIldoaXRlYm9hcmQgaXMgbm90IGVuYWJsZWQgZm9yIGN1c3RvbWVyXCIpO2xldCB0PXRoaXMuc3RvcmUuZ2V0V2hpdGVib2FyZChlPT1udWxsP3ZvaWQgMDplLmlkKSxpPXQ9PW51bGw/dm9pZCAwOnQuaWQ7aWYodHx8KGk9KHlpZWxkIHRoaXMudHJhbnNwb3J0LnNpZ25hbC5jcmVhdGVXaGl0ZWJvYXJkKHRoaXMuZ2V0Q3JlYXRlT3B0aW9uc1dpdGhEZWZhdWx0cyhlKSkpLmlkKSwhaSl0aHJvdyBuZXcgRXJyb3IoYFdoaXRlYm9hcmQgSUQ6ICR7aX0gbm90IGZvdW5kYCk7bGV0IHI9eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmdldFdoaXRlYm9hcmQoe2lkOml9KSxzPU0obSh7fSx0KSx7dGl0bGU6ZT09bnVsbD92b2lkIDA6ZS50aXRsZSxhdHRyaWJ1dGVzOmU9PW51bGw/dm9pZCAwOmUuYXR0cmlidXRlcyxpZDpyLmlkLHVybDpxdChyLnRva2VuLHIuYWRkcix0aGlzLnN0b3JlLmdldEVudigpKSx0b2tlbjpyLnRva2VuLGFkZHI6ci5hZGRyLG93bmVyOnIub3duZXIscGVybWlzc2lvbnM6ci5wZXJtaXNzaW9uc3x8W10sb3BlbjohMH0pO3RoaXMuc3RvcmUuc2V0V2hpdGVib2FyZChzKSwobz10aGlzLmxpc3RlbmVyKT09bnVsbHx8by5vbldoaXRlYm9hcmRVcGRhdGUocyl9KX1jbG9zZShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHI7aWYoIXRoaXMuaXNFbmFibGVkKXJldHVybiBsLncodGhpcy5UQUcsXCJXaGl0ZWJvYXJkIGlzIG5vdCBlbmFibGVkIGZvciBjdXN0b21lclwiKTtsZXQgdD10aGlzLnN0b3JlLmdldFdoaXRlYm9hcmQoZSk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKGBXaGl0ZWJvYXJkIElEOiAke2V9IG5vdCBmb3VuZGApO2xldCBpPXtpZDp0LmlkLHRpdGxlOnQudGl0bGUsb3BlbjohMX07dGhpcy5zdG9yZS5zZXRXaGl0ZWJvYXJkKGkpLChyPXRoaXMubGlzdGVuZXIpPT1udWxsfHxyLm9uV2hpdGVib2FyZFVwZGF0ZShpKX0pfXNldExpc3RlbmVyKGUpe3RoaXMubGlzdGVuZXI9ZX1oYW5kbGVMb2NhbFJvbGVVcGRhdGUoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHQsaSxyO2xldCBlPXRoaXMuc3RvcmUuZ2V0V2hpdGVib2FyZHMoKTtmb3IobGV0IHMgb2YgZS52YWx1ZXMoKSlpZihzLnVybCl7bGV0IG89eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmdldFdoaXRlYm9hcmQoe2lkOnMuaWR9KSxuPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCksdT0obj09bnVsbD92b2lkIDA6bi5jdXN0b21lclVzZXJJZCk9PT1vLm93bmVyPyhpPSh0PW4ucm9sZSk9PW51bGw/dm9pZCAwOnQucGVybWlzc2lvbnMud2hpdGVib2FyZCk9PW51bGw/dm9pZCAwOmkuaW5jbHVkZXMoXCJhZG1pblwiKTpvLnBlcm1pc3Npb25zLmxlbmd0aD4wLHA9TShtKHt9LHMpLHtpZDpvLmlkLHVybDpxdChvLnRva2VuLG8uYWRkcix0aGlzLnN0b3JlLmdldEVudigpKSx0b2tlbjpvLnRva2VuLGFkZHI6by5hZGRyLG93bmVyOm8ub3duZXIscGVybWlzc2lvbnM6by5wZXJtaXNzaW9ucyxvcGVuOnV9KTt0aGlzLnN0b3JlLnNldFdoaXRlYm9hcmQocCksKHI9dGhpcy5saXN0ZW5lcik9PW51bGx8fHIub25XaGl0ZWJvYXJkVXBkYXRlKHApfX0pfWdldENyZWF0ZU9wdGlvbnNXaXRoRGVmYXVsdHMoZSl7dmFyIG87bGV0IHQ9T2JqZWN0LnZhbHVlcyh0aGlzLnN0b3JlLmdldEtub3duUm9sZXMoKSksaT1bXSxyPVtdLHM9W107cmV0dXJuIHQuZm9yRWFjaChuPT57dmFyIGQsdSxwOyhkPW4ucGVybWlzc2lvbnMud2hpdGVib2FyZCkhPW51bGwmJmQuaW5jbHVkZXMoXCJyZWFkXCIpJiZpLnB1c2gobi5uYW1lKSwodT1uLnBlcm1pc3Npb25zLndoaXRlYm9hcmQpIT1udWxsJiZ1LmluY2x1ZGVzKFwid3JpdGVcIikmJnIucHVzaChuLm5hbWUpLChwPW4ucGVybWlzc2lvbnMud2hpdGVib2FyZCkhPW51bGwmJnAuaW5jbHVkZXMoXCJhZG1pblwiKSYmcy5wdXNoKG4ubmFtZSl9KSx7dGl0bGU6KGU9PW51bGw/dm9pZCAwOmUudGl0bGUpfHxgJHsobz10aGlzLnN0b3JlLmdldFJvb20oKSk9PW51bGw/dm9pZCAwOm8uaWR9IFdoaXRlYm9hcmRgLHJlYWRlcjooZT09bnVsbD92b2lkIDA6ZS5yZWFkZXIpfHxpLHdyaXRlcjooZT09bnVsbD92b2lkIDA6ZS53cml0ZXIpfHxyLGFkbWluOihlPT1udWxsP3ZvaWQgMDplLmFkbWluKXx8c319fTt2YXIganQ9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMudHJhbnNwb3J0PWU7dGhpcy5zdG9yZT10O3RoaXMubGlzdGVuZXI9aTt0aGlzLndoaXRlYm9hcmQ9bmV3IGVyKGUsdCxpKX1zZXRMaXN0ZW5lcihlKXt0aGlzLmxpc3RlbmVyPWUsdGhpcy53aGl0ZWJvYXJkLnNldExpc3RlbmVyKGUpfWNyZWF0ZVBvbGwoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBvLG47bGV0IHQ9e2N1c3RvbWVySUQ6XCJ1c2VyaWRcIixwZWVySUQ6XCJwZWVyaWRcIix1c2VyTmFtZTpcInVzZXJuYW1lXCJ9LHtwb2xsX2lkOml9PXlpZWxkIHRoaXMudHJhbnNwb3J0LnNpZ25hbC5zZXRQb2xsSW5mbyhNKG0oe30sZSkse21vZGU6ZS5tb2RlP3RbZS5tb2RlXTp2b2lkIDAscG9sbF9pZDplLmlkLHZvdGU6ZS5yb2xlc1RoYXRDYW5Wb3RlLHJlc3BvbnNlczplLnJvbGVzVGhhdENhblZpZXdSZXNwb25zZXN9KSk7ZS5pZHx8KGUuaWQ9aSksQXJyYXkuaXNBcnJheShlLnF1ZXN0aW9ucykmJih5aWVsZCB0aGlzLmFkZFF1ZXN0aW9uc1RvUG9sbChlLmlkLGUucXVlc3Rpb25zKSk7bGV0IHI9eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmdldFBvbGxRdWVzdGlvbnMoe3BvbGxfaWQ6ZS5pZCxpbmRleDowLGNvdW50OjUwfSkscz10cihNKG0oe30sZSkse3BvbGxfaWQ6ZS5pZCxzdGF0ZTpcImNyZWF0ZWRcIixjcmVhdGVkX2J5OihvPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCkpPT1udWxsP3ZvaWQgMDpvLnBlZXJJZH0pKTtzLnF1ZXN0aW9ucz1yLnF1ZXN0aW9ucy5tYXAoKHtxdWVzdGlvbjpkLG9wdGlvbnM6dSxhbnN3ZXI6cH0pPT5NKG0oe30sZCkse29wdGlvbnM6dSxhbnN3ZXI6cH0pKSwobj10aGlzLmxpc3RlbmVyKT09bnVsbHx8bi5vblBvbGxzVXBkYXRlKDAsW3NdKX0pfXN0YXJ0UG9sbChlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dHlwZW9mIGU9PVwic3RyaW5nXCI/eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLnN0YXJ0UG9sbCh7cG9sbF9pZDplfSk6KHlpZWxkIHRoaXMuY3JlYXRlUG9sbChlKSx5aWVsZCB0aGlzLnRyYW5zcG9ydC5zaWduYWwuc3RhcnRQb2xsKHtwb2xsX2lkOmUuaWR9KSl9KX1hZGRRdWVzdGlvbnNUb1BvbGwoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dC5sZW5ndGg+MCYmKHlpZWxkIHRoaXMudHJhbnNwb3J0LnNpZ25hbC5zZXRQb2xsUXVlc3Rpb25zKHtwb2xsX2lkOmUscXVlc3Rpb25zOnQubWFwKChpLHIpPT50aGlzLmNyZWF0ZVF1ZXN0aW9uU2V0UGFyYW1zKGkscikpfSkpfSl9c3RvcFBvbGwoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMudHJhbnNwb3J0LnNpZ25hbC5zdG9wUG9sbCh7cG9sbF9pZDplfSl9KX1hZGRSZXNwb25zZXNUb1BvbGwoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGk9dGhpcy5zdG9yZS5nZXRQb2xsKGUpO2lmKCFpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcG9sbCBJRCAtIFBvbGwgbm90IGZvdW5kXCIpO2xldCByPXQubWFwKHM9Pnt2YXIgbixkO2xldCBvPXRoaXMuZ2V0UXVlc3Rpb25JblBvbGwoaSxzLnF1ZXN0aW9uSW5kZXgpO3JldHVybiBvLnR5cGU9PT1cInNpbmdsZS1jaG9pY2VcIj8ocy5vcHRpb249cy5vcHRpb258fCgobj1zLm9wdGlvbnMpPT1udWxsP3ZvaWQgMDpuWzBdKXx8LTEsZGVsZXRlIHMudGV4dCxkZWxldGUgcy5vcHRpb25zKTpvLnR5cGU9PT1cIm11bHRpcGxlLWNob2ljZVwiPygoZD1zLm9wdGlvbnMpPT1udWxsfHxkLnNvcnQoKSxkZWxldGUgcy50ZXh0LGRlbGV0ZSBzLm9wdGlvbik6KGRlbGV0ZSBzLm9wdGlvbixkZWxldGUgcy5vcHRpb25zKSxzLnNraXBwZWQmJihkZWxldGUgcy5vcHRpb24sZGVsZXRlIHMub3B0aW9ucyxkZWxldGUgcy50ZXh0KSxtKHtkdXJhdGlvbjowLHR5cGU6by50eXBlLHF1ZXN0aW9uOnMucXVlc3Rpb25JbmRleH0scyl9KTt5aWVsZCB0aGlzLnRyYW5zcG9ydC5zaWduYWwuc2V0UG9sbFJlc3BvbnNlcyh7cG9sbF9pZDplLHJlc3BvbnNlczpyfSl9KX1mZXRjaExlYWRlcmJvYXJkKGUsdCxpKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHAsaDtsZXQgcj10aGlzLnN0b3JlLmdldFBvbGwoZSk7aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwb2xsIElEIC0gUG9sbCBub3QgZm91bmRcIik7bGV0IHM9KGg9KHA9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKSk9PW51bGw/dm9pZCAwOnAucm9sZSk9PW51bGw/dm9pZCAwOmgucGVybWlzc2lvbnMsbz0hIShzIT1udWxsJiZzLnBvbGxSZWFkfHxzIT1udWxsJiZzLnBvbGxXcml0ZSk7aWYoci5hbm9ueW1vdXN8fHIuc3RhdGUhPT1cInN0b3BwZWRcInx8IW8pcmV0dXJue2VudHJpZXM6W10saGFzTmV4dDohMX07bGV0IG49eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmZldGNoUG9sbExlYWRlcmJvYXJkKHtwb2xsX2lkOnIuaWQsY291bnQ6aSxvZmZzZXQ6dH0pLGQ9e2F2Z1Njb3JlOm4uYXZnX3Njb3JlLGF2Z1RpbWU6bi5hdmdfdGltZSx2b3RlZFVzZXJzOm4udm90ZWRfdXNlcnMsdG90YWxVc2VyczpuLnRvdGFsX3VzZXJzLGNvcnJlY3RVc2VyczpuLmNvcnJlY3RfdXNlcnN9O3JldHVybntlbnRyaWVzOm4ucXVlc3Rpb25zLm1hcChUPT4oe3Bvc2l0aW9uOlQucG9zaXRpb24sdG90YWxSZXNwb25zZXM6VC50b3RhbF9yZXNwb25zZXMsY29ycmVjdFJlc3BvbnNlczpULmNvcnJlY3RfcmVzcG9uc2VzLGR1cmF0aW9uOlQuZHVyYXRpb24scGVlcjpULnBlZXIsc2NvcmU6VC5zY29yZX0pKSxoYXNOZXh0OiFuLmxhc3Qsc3VtbWFyeTpkfX0pfWdldFBvbGxSZXNwb25zZXMoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHMsbztsZXQgaT15aWVsZCB0aGlzLnRyYW5zcG9ydC5zaWduYWwuZ2V0UG9sbFJlc3BvbnNlcyh7cG9sbF9pZDplLmlkLGluZGV4OjAsY291bnQ6NTAsc2VsZjp0fSkscj1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTsocz1pLnJlc3BvbnNlcyk9PW51bGx8fHMuZm9yRWFjaCgoe3Jlc3BvbnNlOm4scGVlcjpkLGZpbmFsOnV9KT0+e3ZhciBoLFQ7bGV0IHA9KGg9ZT09bnVsbD92b2lkIDA6ZS5xdWVzdGlvbnMpPT1udWxsP3ZvaWQgMDpoLmZpbmQoZz0+Zy5pbmRleD09PW4ucXVlc3Rpb24pO2lmKHApe2xldCBnPXtpZDpuLnJlc3BvbnNlX2lkLHF1ZXN0aW9uSW5kZXg6bi5xdWVzdGlvbixvcHRpb246bi5vcHRpb24sb3B0aW9uczpuLm9wdGlvbnMsdGV4dDpuLnRleHQscmVzcG9uc2VGaW5hbDp1LHBlZXI6e3BlZXJpZDpkLnBlZXJpZCx1c2VySGFzaDpkLmhhc2gsdXNlcmlkOmQudXNlcmlkLHVzZXJuYW1lOmQudXNlcm5hbWV9LHNraXBwZWQ6bi5za2lwcGVkLHR5cGU6bi50eXBlLHVwZGF0ZTpuLnVwZGF0ZX0sZj1wLnJlc3BvbnNlcyYmIXQ/Wy4uLnAucmVzcG9uc2VzXTpbXTsoVD1yLnF1ZXN0aW9ucykhPW51bGwmJlRbbi5xdWVzdGlvbi0xXSYmKHIucXVlc3Rpb25zW24ucXVlc3Rpb24tMV0ucmVzcG9uc2VzPVsuLi5mLGddKX19KSx0aGlzLnN0b3JlLnNldFBvbGwociksKG89dGhpcy5saXN0ZW5lcik9PW51bGx8fG8ub25Qb2xsc1VwZGF0ZSg0LFtyXSl9KX1nZXRQb2xscygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcyxvLG47bGV0IGU9eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmdldFBvbGxzTGlzdCh7Y291bnQ6NTAsc3RhdGU6XCJzdGFydGVkXCJ9KSx0PVtdLGk9KG89KHM9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKSk9PW51bGw/dm9pZCAwOnMucm9sZSk9PW51bGw/dm9pZCAwOm8ucGVybWlzc2lvbnMucG9sbFdyaXRlLHI9Wy4uLmUucG9sbHNdO2lmKGkpe2xldCBkPXlpZWxkIHRoaXMudHJhbnNwb3J0LnNpZ25hbC5nZXRQb2xsc0xpc3Qoe2NvdW50OjUwLHN0YXRlOlwiY3JlYXRlZFwifSksdT15aWVsZCB0aGlzLnRyYW5zcG9ydC5zaWduYWwuZ2V0UG9sbHNMaXN0KHtjb3VudDo1MCxzdGF0ZTpcInN0b3BwZWRcIn0pO3I9Wy4uLmQucG9sbHMsLi4uciwuLi51LnBvbGxzXX1mb3IobGV0IGQgb2Ygcil7bGV0IHU9eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmdldFBvbGxRdWVzdGlvbnMoe3BvbGxfaWQ6ZC5wb2xsX2lkLGluZGV4OjAsY291bnQ6NTB9KSxwPXRyKGQpLGg9dGhpcy5zdG9yZS5nZXRQb2xsKGQucG9sbF9pZCk7cC5xdWVzdGlvbnM9dS5xdWVzdGlvbnMubWFwKCh7cXVlc3Rpb246VCxvcHRpb25zOmcsYW5zd2VyOmZ9LEUpPT57dmFyIHYsUjtyZXR1cm4gTShtKHt9LFQpLHtvcHRpb25zOmcsYW5zd2VyOmYscmVzcG9uc2VzOihSPSh2PWg9PW51bGw/dm9pZCAwOmgucXVlc3Rpb25zKT09bnVsbD92b2lkIDA6dltFXSk9PW51bGw/dm9pZCAwOlIucmVzcG9uc2VzfSl9KSx0LnB1c2gocCksdGhpcy5zdG9yZS5zZXRQb2xsKHApfXJldHVybihuPXRoaXMubGlzdGVuZXIpPT1udWxsfHxuLm9uUG9sbHNVcGRhdGUoMyx0KSx0fSl9Y3JlYXRlUXVlc3Rpb25TZXRQYXJhbXMoZSx0KXt2YXIgbyxuO2lmKGUuaW5kZXgpe2xldCBkPShvPWUub3B0aW9ucyk9PW51bGw/dm9pZCAwOm8ubWFwKCh1LHApPT5NKG0oe30sdSkse2luZGV4OnArMX0pKTtyZXR1cm57cXVlc3Rpb246TShtKHt9LGUpLHtpbmRleDp0KzF9KSxvcHRpb25zOmQsYW5zd2VyOmUuYW5zd2VyfX1sZXQgaT1NKG0oe30sZSkse2luZGV4OnQrMX0pLHIscz1lLmFuc3dlcnx8e2hpZGRlbjohMX07cmV0dXJuIEFycmF5LmlzQXJyYXkoZS5vcHRpb25zKSYmW1wic2luZ2xlLWNob2ljZVwiLFwibXVsdGlwbGUtY2hvaWNlXCJdLmluY2x1ZGVzKGUudHlwZSk/KHI9KG49ZS5vcHRpb25zKT09bnVsbD92b2lkIDA6bi5tYXAoKGQsdSk9Pih7aW5kZXg6dSsxLHRleHQ6ZC50ZXh0LHdlaWdodDpkLndlaWdodH0pKSxlLnR5cGU9PT1cInNpbmdsZS1jaG9pY2VcIj9zLm9wdGlvbj1lLm9wdGlvbnMuZmluZEluZGV4KGQ9PmQuaXNDb3JyZWN0QW5zd2VyKSsxfHx2b2lkIDA6cy5vcHRpb25zPWUub3B0aW9ucy5tYXAoKGQsdSk9PmQuaXNDb3JyZWN0QW5zd2VyP3UrMTp2b2lkIDApLmZpbHRlcihkPT4hIWQpKToocz09bnVsbHx8ZGVsZXRlIHMub3B0aW9ucyxzPT1udWxsfHxkZWxldGUgcy5vcHRpb24pLHtxdWVzdGlvbjppLG9wdGlvbnM6cixhbnN3ZXI6c319Z2V0UXVlc3Rpb25JblBvbGwoZSx0KXt2YXIgcjtsZXQgaT0ocj1lPT1udWxsP3ZvaWQgMDplLnF1ZXN0aW9ucyk9PW51bGw/dm9pZCAwOnIuZmluZChzPT5zLmluZGV4PT09dCk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBxdWVzdGlvbiBpbmRleCAtIFF1ZXN0aW9uIG5vdCBmb3VuZCBpbiBwb2xsXCIpO3JldHVybiBpfX0sdHI9YT0+e2xldCBlPXt1c2VyaWQ6XCJjdXN0b21lcklEXCIscGVlcmlkOlwicGVlcklEXCIsdXNlcm5hbWU6XCJ1c2VyTmFtZVwifTtyZXR1cm57aWQ6YS5wb2xsX2lkLHRpdGxlOmEudGl0bGUsc3RhcnRlZEJ5OmEuc3RhcnRlZF9ieSxjcmVhdGVkQnk6YS5jcmVhdGVkX2J5LGFub255bW91czphLmFub255bW91cyx0eXBlOmEudHlwZSxkdXJhdGlvbjphLmR1cmF0aW9uLGxvY2tlZDphLmxvY2tlZCxtb2RlOmEubW9kZT9lW2EubW9kZV06dm9pZCAwLHZpc2liaWxpdHk6YS52aXNpYmlsaXR5LHJvbGVzVGhhdENhblZvdGU6YS52b3RlfHxbXSxyb2xlc1RoYXRDYW5WaWV3UmVzcG9uc2VzOmEucmVzcG9uc2VzfHxbXSxzdGF0ZTphLnN0YXRlLHN0b3BwZWRCeTphLnN0b3BwZWRfYnksc3RhcnRlZEF0OkwoYS5zdGFydGVkX2F0KSxzdG9wcGVkQXQ6TChhLnN0b3BwZWRfYXQpLGNyZWF0ZWRBdDpMKGEuY3JlYXRlZF9hdCl9fTt2YXIgaXI9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMuc3RvcmU9ZTt0aGlzLnRyYW5zcG9ydD10O3RoaXMubGlzdGVuZXI9aX1oYW5kbGVOb3RpZmljYXRpb24oZSx0KXtzd2l0Y2goZSl7Y2FzZVwib24tcG9sbC1zdGFydFwiOnt0aGlzLmhhbmRsZVBvbGxTdGFydCh0KTticmVha31jYXNlXCJvbi1wb2xsLXN0b3BcIjp7dGhpcy5oYW5kbGVQb2xsU3RvcCh0KTticmVha31jYXNlXCJvbi1wb2xsLXN0YXRzXCI6dGhpcy5oYW5kbGVQb2xsU3RhdHModCk7YnJlYWs7ZGVmYXVsdDpicmVha319aGFuZGxlUG9sbFN0YXJ0KGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgaSxyO2xldCB0PVtdO2ZvcihsZXQgcyBvZiBlLnBvbGxzKXtsZXQgbz10aGlzLnN0b3JlLmdldFBvbGwocy5wb2xsX2lkKTtpZihvJiZvLnN0YXRlPT09XCJzdGFydGVkXCIpeyhpPXRoaXMubGlzdGVuZXIpPT1udWxsfHxpLm9uUG9sbHNVcGRhdGUoMSxbb10pO3JldHVybn1sZXQgbj15aWVsZCB0aGlzLnRyYW5zcG9ydC5zaWduYWwuZ2V0UG9sbFF1ZXN0aW9ucyh7cG9sbF9pZDpzLnBvbGxfaWQsaW5kZXg6MCxjb3VudDo1MH0pLGQ9dHIocyk7ZC5xdWVzdGlvbnM9bi5xdWVzdGlvbnMubWFwKCh7cXVlc3Rpb246dSxvcHRpb25zOnAsYW5zd2VyOmh9KT0+TShtKHt9LHUpLHtvcHRpb25zOnAsYW5zd2VyOmh9KSkseWllbGQgdGhpcy51cGRhdGVQb2xsUmVzcG9uc2VzKGQsITApLHQucHVzaChkKSx0aGlzLnN0b3JlLnNldFBvbGwoZCl9KHI9dGhpcy5saXN0ZW5lcik9PW51bGx8fHIub25Qb2xsc1VwZGF0ZSgxLHQpfSl9aGFuZGxlUG9sbFN0b3AoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBpO2xldCB0PVtdO2ZvcihsZXQgciBvZiBlLnBvbGxzKXtsZXQgcz10aGlzLnN0b3JlLmdldFBvbGwoci5wb2xsX2lkKTtpZihzKXtzLnN0YXRlPVwic3RvcHBlZFwiLHMuc3RvcHBlZEF0PUwoci5zdG9wcGVkX2F0KSxzLnN0b3BwZWRCeT1yLnN0b3BwZWRfYnk7bGV0IG89eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmdldFBvbGxSZXN1bHQoe3BvbGxfaWQ6ci5wb2xsX2lkfSk7dGhpcy51cGRhdGVQb2xsUmVzdWx0KHMsbyksdC5wdXNoKHMpfX10Lmxlbmd0aD4wJiYoKGk9dGhpcy5saXN0ZW5lcik9PW51bGx8fGkub25Qb2xsc1VwZGF0ZSgyLHQpKX0pfWhhbmRsZVBvbGxTdGF0cyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGk7bGV0IHQ9W107Zm9yKGxldCByIG9mIGUucG9sbHMpe2xldCBzPXRoaXMuc3RvcmUuZ2V0UG9sbChyLnBvbGxfaWQpO2lmKCFzKXJldHVybjt0aGlzLnVwZGF0ZVBvbGxSZXN1bHQocyxyKSx0LnB1c2gocyl9dC5sZW5ndGg+MCYmKChpPXRoaXMubGlzdGVuZXIpPT1udWxsfHxpLm9uUG9sbHNVcGRhdGUoNCx0KSl9KX11cGRhdGVQb2xsUmVzdWx0KGUsdCl7dmFyIGk7ZS5yZXN1bHQ9bSh7fSxlLnJlc3VsdCksZS5yZXN1bHQudG90YWxVc2Vycz10LnVzZXJfY291bnQsZS5yZXN1bHQubWF4VXNlcnM9dC5tYXhfdXNlcixlLnJlc3VsdC50b3RhbFJlc3BvbnNlcz10LnRvdGFsX3Jlc3BvbnNlLChpPXQucXVlc3Rpb25zKT09bnVsbHx8aS5mb3JFYWNoKHI9Pnt2YXIgbyxuO2xldCBzPShvPWUucXVlc3Rpb25zKT09bnVsbD92b2lkIDA6by5maW5kKGQ9PmQuaW5kZXg9PT1yLnF1ZXN0aW9uKTtzJiYocy5yZXN1bHQ9bSh7fSxzLnJlc3VsdCkscy5yZXN1bHQuY29ycmVjdFJlc3BvbnNlcz1yLmNvcnJlY3Qscy5yZXN1bHQuc2tpcHBlZENvdW50PXIuc2tpcHBlZCxzLnJlc3VsdC50b3RhbFJlc3BvbnNlcz1yLnRvdGFsLChuPXIub3B0aW9ucyk9PW51bGx8fG4uZm9yRWFjaCgoZCx1KT0+e3ZhciBoO2xldCBwPShoPXMub3B0aW9ucyk9PW51bGw/dm9pZCAwOmhbdV07cCYmcC52b3RlQ291bnQhPT1kJiYocC52b3RlQ291bnQ9ZCl9KSl9KX11cGRhdGVQb2xsUmVzcG9uc2VzKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciByOyhyPSh5aWVsZCB0aGlzLnRyYW5zcG9ydC5zaWduYWwuZ2V0UG9sbFJlc3BvbnNlcyh7cG9sbF9pZDplLmlkLGluZGV4OjAsY291bnQ6NTAsc2VsZjp0fSkpLnJlc3BvbnNlcyk9PW51bGx8fHIuZm9yRWFjaCgoe3Jlc3BvbnNlOnMscGVlcjpvLGZpbmFsOm59KT0+e3ZhciBwO2xldCBkPShwPWU9PW51bGw/dm9pZCAwOmUucXVlc3Rpb25zKT09bnVsbD92b2lkIDA6cC5maW5kKGg9PmguaW5kZXg9PT1zLnF1ZXN0aW9uKTtpZighZClyZXR1cm47bGV0IHU9e2lkOnMucmVzcG9uc2VfaWQscXVlc3Rpb25JbmRleDpzLnF1ZXN0aW9uLG9wdGlvbjpzLm9wdGlvbixvcHRpb25zOnMub3B0aW9ucyx0ZXh0OnMudGV4dCxyZXNwb25zZUZpbmFsOm4scGVlcjp7cGVlcmlkOm8ucGVlcmlkLHVzZXJIYXNoOm8uaGFzaCx1c2VyaWQ6by51c2VyaWQsdXNlcm5hbWU6by51c2VybmFtZX0sc2tpcHBlZDpzLnNraXBwZWQsdHlwZTpzLnR5cGUsdXBkYXRlOnMudXBkYXRlfTtBcnJheS5pc0FycmF5KGQucmVzcG9uc2VzKSYmZC5yZXNwb25zZXMubGVuZ3RoPjA/ZC5yZXNwb25zZXMuZmluZCgoe2lkOmh9KT0+aD09PXUuaWQpfHxkLnJlc3BvbnNlcy5wdXNoKHUpOmQucmVzcG9uc2VzPVt1XX0pfSl9fTt2YXIgcnI9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnN0b3JlPWU7dGhpcy5saXN0ZW5lcj10fWhhbmRsZU5vdGlmaWNhdGlvbihlLHQpe3N3aXRjaChlKXtjYXNlXCJvbi1yb2xlLWNoYW5nZS1yZXF1ZXN0XCI6dGhpcy5oYW5kbGVSb2xlQ2hhbmdlUmVxdWVzdCh0KTticmVhaztjYXNlXCJvbi10cmFjay11cGRhdGUtcmVxdWVzdFwiOnRoaXMuaGFuZGxlVHJhY2tVcGRhdGVSZXF1ZXN0KHQpO2JyZWFrO2Nhc2VcIm9uLWNoYW5nZS10cmFjay1tdXRlLXN0YXRlLXJlcXVlc3RcIjp0aGlzLmhhbmRsZUNoYW5nZVRyYWNrU3RhdGVSZXF1ZXN0KHQpO2JyZWFrO2RlZmF1bHQ6cmV0dXJufX1oYW5kbGVSb2xlQ2hhbmdlUmVxdWVzdChlKXt2YXIgaTtsZXQgdD17cmVxdWVzdGVkQnk6ZS5yZXF1ZXN0ZWRfYnk/dGhpcy5zdG9yZS5nZXRQZWVyQnlJZChlLnJlcXVlc3RlZF9ieSk6dm9pZCAwLHJvbGU6dGhpcy5zdG9yZS5nZXRQb2xpY3lGb3JSb2xlKGUucm9sZSksdG9rZW46ZS50b2tlbn07KGk9dGhpcy5saXN0ZW5lcik9PW51bGx8fGkub25Sb2xlQ2hhbmdlUmVxdWVzdCh0KX1oYW5kbGVUcmFja1VwZGF0ZVJlcXVlc3QoZSl7bGV0e3JlcXVlc3RlZF9ieTp0LHRyYWNrX2lkOmksbXV0ZTpyfT1lLHM9dD90aGlzLnN0b3JlLmdldFBlZXJCeUlkKHQpOnZvaWQgMCxvPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyVHJhY2tzKCkuZmluZChkPT5kLnB1Ymxpc2hlZFRyYWNrSWQ9PT1pKTtpZighbylyZXR1cm47bGV0IG49KCk9Pnt2YXIgZDsoZD10aGlzLmxpc3RlbmVyKT09bnVsbHx8ZC5vbkNoYW5nZVRyYWNrU3RhdGVSZXF1ZXN0KHtyZXF1ZXN0ZWRCeTpzLHRyYWNrOm8sZW5hYmxlZDohcn0pfTtpZihyKXtpZihvLmVuYWJsZWQ9PT0hcilyZXR1cm47by5zZXRFbmFibGVkKCFyKS50aGVuKG4pfWVsc2UgbigpfWhhbmRsZUNoYW5nZVRyYWNrU3RhdGVSZXF1ZXN0KGUpe3ZhciB1O2xldHt0eXBlOnQsc291cmNlOmksdmFsdWU6cixyZXF1ZXN0ZWRfYnk6c309ZSxvPXM/dGhpcy5zdG9yZS5nZXRQZWVyQnlJZChzKTp2b2lkIDAsbj0hcixkPXRoaXMuZ2V0VHJhY2tzVG9CZVVwZGF0ZWQoe3R5cGU6dCxzb3VyY2U6aSxlbmFibGVkOm59KTtpZihkLmxlbmd0aCE9PTApaWYobikodT10aGlzLmxpc3RlbmVyKT09bnVsbHx8dS5vbkNoYW5nZU11bHRpVHJhY2tTdGF0ZVJlcXVlc3Qoe3JlcXVlc3RlZEJ5Om8sdHJhY2tzOmQsdHlwZTp0LHNvdXJjZTppLGVuYWJsZWQ6ITB9KTtlbHNle2xldCBwPVtdO2ZvcihsZXQgaCBvZiBkKXAucHVzaChoLnNldEVuYWJsZWQoITEpKTtQcm9taXNlLmFsbChwKS50aGVuKCgpPT57dmFyIGg7KGg9dGhpcy5saXN0ZW5lcik9PW51bGx8fGgub25DaGFuZ2VNdWx0aVRyYWNrU3RhdGVSZXF1ZXN0KHtyZXF1ZXN0ZWRCeTpvLHRyYWNrczpkLGVuYWJsZWQ6ITF9KX0pfX1nZXRUcmFja3NUb0JlVXBkYXRlZCh7dHlwZTplLHNvdXJjZTp0LGVuYWJsZWQ6aX0pe2xldCBzPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyVHJhY2tzKCk7cmV0dXJuIGUmJihzPXMuZmlsdGVyKG89Pm8udHlwZT09PWUpKSx0JiYocz1zLmZpbHRlcihvPT5vLnNvdXJjZT09PXQpKSxzLmZpbHRlcihvPT5vLmVuYWJsZWQhPT1pKX19O3ZhciBzcj1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuc3RvcmU9ZTt0aGlzLmxpc3RlbmVyPXQ7dGhpcy5UQUc9XCJbUm9vbVVwZGF0ZU1hbmFnZXJdXCJ9aGFuZGxlTm90aWZpY2F0aW9uKGUsdCl7c3dpdGNoKGUpe2Nhc2VcInBlZXItbGlzdFwiOnRoaXMub25Sb29tU3RhdGUodC5yb29tKTticmVhaztjYXNlXCJvbi1ydG1wLXVwZGF0ZVwiOnRoaXMudXBkYXRlUlRNUFN0YXR1cyh0KTticmVhaztjYXNlXCJvbi1yZWNvcmQtdXBkYXRlXCI6dGhpcy51cGRhdGVSZWNvcmRpbmdTdGF0dXModCk7YnJlYWs7Y2FzZVwicm9vbS1zdGF0ZVwiOnRoaXMuaGFuZGxlUHJldmlld1Jvb21TdGF0ZSh0KTticmVhaztjYXNlXCJyb29tLWluZm9cIjp0aGlzLmhhbmRsZVJvb21JbmZvKHQpO2JyZWFrO2Nhc2VcInNlc3Npb24taW5mb1wiOnRoaXMuaGFuZGxlU2Vzc2lvbkluZm8odCk7YnJlYWs7Y2FzZVwib24taGxzLXVwZGF0ZVwiOnRoaXMudXBkYXRlSExTU3RhdHVzKHQpO2JyZWFrO2Nhc2VcIm9uLXRyYW5zY3JpcHRpb24tdXBkYXRlXCI6dGhpcy5oYW5kbGVUcmFuc2NyaXB0aW9uU3RhdHVzKFt0XSk7YnJlYWs7ZGVmYXVsdDpicmVha319aGFuZGxlUm9vbUluZm8oZSl7bGV0IHQ9dGhpcy5zdG9yZS5nZXRSb29tKCk7aWYoIXQpe2wudyh0aGlzLlRBRyxcIm9uIHNlc3Npb24gaW5mbyAtIHJvb20gbm90IHByZXNlbnRcIik7cmV0dXJufXQuZGVzY3JpcHRpb249ZS5kZXNjcmlwdGlvbix0LmxhcmdlX3Jvb21fb3B0aW1pemF0aW9uPWUubGFyZ2Vfcm9vbV9vcHRpbWl6YXRpb24sdC5tYXhfc2l6ZT1lLm1heF9zaXplLHQubmFtZT1lLm5hbWV9aGFuZGxlU2Vzc2lvbkluZm8oZSl7dmFyIGk7bGV0IHQ9dGhpcy5zdG9yZS5nZXRSb29tKCk7aWYoIXQpe2wudyh0aGlzLlRBRyxcIm9uIHNlc3Npb24gaW5mbyAtIHJvb20gbm90IHByZXNlbnRcIik7cmV0dXJufXQuc2Vzc2lvbklkPWUuc2Vzc2lvbl9pZCx0LnBlZXJDb3VudCE9PWUucGVlcl9jb3VudCYmKHQucGVlckNvdW50PWUucGVlcl9jb3VudCwoaT10aGlzLmxpc3RlbmVyKT09bnVsbHx8aS5vblJvb21VcGRhdGUoXCJST09NX1BFRVJfQ09VTlRfVVBEQVRFRFwiLHQpKX1oYW5kbGVQcmV2aWV3Um9vbVN0YXRlKGUpe2xldHtyb29tOnR9PWU7dGhpcy5vblJvb21TdGF0ZSh0KX1vblJvb21TdGF0ZShlKXt2YXIgdSxwLGgsVDtsZXR7cmVjb3JkaW5nOnQsc3RyZWFtaW5nOmksdHJhbnNjcmlwdGlvbnM6cixzZXNzaW9uX2lkOnMsc3RhcnRlZF9hdDpvLG5hbWU6bn09ZSxkPXRoaXMuc3RvcmUuZ2V0Um9vbSgpO2lmKCFkKXtsLncodGhpcy5UQUcsXCJvbiByb29tIHN0YXRlIC0gcm9vbSBub3QgcHJlc2VudFwiKTtyZXR1cm59ZC5uYW1lPW4sZC5ydG1wLnJ1bm5pbmc9dGhpcy5pc1N0cmVhbWluZ1J1bm5pbmcoKHU9aT09bnVsbD92b2lkIDA6aS5ydG1wKT09bnVsbD92b2lkIDA6dS5zdGF0ZSksZC5ydG1wLnN0YXJ0ZWRBdD1MKChwPWk9PW51bGw/dm9pZCAwOmkucnRtcCk9PW51bGw/dm9pZCAwOnAuc3RhcnRlZF9hdCksZC5ydG1wLnN0YXRlPShoPWk9PW51bGw/dm9pZCAwOmkucnRtcCk9PW51bGw/dm9pZCAwOmguc3RhdGUsZC5yZWNvcmRpbmcuc2VydmVyPXRoaXMuZ2V0UGVlckxpc3RTRlVSZWNvcmRpbmcodCksZC5yZWNvcmRpbmcuYnJvd3Nlcj10aGlzLmdldFBlZXJMaXN0QnJvd3NlclJlY29yZGluZyh0KSxkLnJlY29yZGluZy5obHM9dGhpcy5nZXRQZWVyTGlzdEhMU1JlY29yZGluZyh0KSxkLmhscz10aGlzLmNvbnZlcnRIbHMoaT09bnVsbD92b2lkIDA6aS5obHMpLGQudHJhbnNjcmlwdGlvbnM9dGhpcy5hZGRUcmFuc2NyaXB0aW9uRGV0YWlsKHIpLGQuc2Vzc2lvbklkPXMsZC5zdGFydGVkQXQ9TChvKSwoVD10aGlzLmxpc3RlbmVyKT09bnVsbHx8VC5vblJvb21VcGRhdGUoXCJSRUNPUkRJTkdfU1RBVEVfVVBEQVRFRFwiLGQpfWFkZFRyYW5zY3JpcHRpb25EZXRhaWwoZSl7cmV0dXJuIGU/ZS5tYXAodD0+KHtzdGF0ZTp0LnN0YXRlLG1vZGU6dC5tb2RlLGluaXRpYWxpc2VkX2F0OkwodC5pbml0aWFsaXNlZF9hdCksc3RhcnRlZF9hdDpMKHQuc3RhcnRlZF9hdCksc3RvcHBlZF9hdDpMKHQuc3RvcHBlZF9hdCksdXBkYXRlZF9hdDpMKHQudXBkYXRlZF9hdCksZXJyb3I6dGhpcy50b1Nka0Vycm9yKHQ9PW51bGw/dm9pZCAwOnQuZXJyb3IpfSkpOltdfWlzUmVjb3JkaW5nUnVubmluZyhlKXtyZXR1cm4gZT8hW1wibm9uZVwiLFwicGF1c2VkXCIsXCJzdG9wcGVkXCIsXCJmYWlsZWRcIl0uaW5jbHVkZXMoZSk6ITF9aXNTdHJlYW1pbmdSdW5uaW5nKGUpe3JldHVybiBlPyFbXCJub25lXCIsXCJzdG9wcGVkXCIsXCJmYWlsZWRcIl0uaW5jbHVkZXMoZSk6ITF9aW5pdEhMUyhlKXtsZXQgdD10aGlzLnN0b3JlLmdldFJvb20oKSxpPXtydW5uaW5nOiEwLHZhcmlhbnRzOltdfTtyZXR1cm4gdD8oZSE9bnVsbCYmZS52YXJpYW50cyYmZS52YXJpYW50cy5mb3JFYWNoKChyLHMpPT57dmFyIG8sbixkO3Iuc3RhdGUhPT1cImluaXRpYWxpc2VkXCI/aS52YXJpYW50cy5wdXNoKHttZWV0aW5nVVJMOnI9PW51bGw/dm9pZCAwOnIubWVldGluZ1VSTCx1cmw6cj09bnVsbD92b2lkIDA6ci51cmwsbWV0YWRhdGE6cj09bnVsbD92b2lkIDA6ci5tZXRhZGF0YSxwbGF5bGlzdF90eXBlOnI9PW51bGw/dm9pZCAwOnIucGxheWxpc3RfdHlwZSxzdGFydGVkQXQ6TCgobz1lPT1udWxsP3ZvaWQgMDplLnZhcmlhbnRzKT09bnVsbD92b2lkIDA6b1tzXS5zdGFydGVkX2F0KSxpbml0aWFsaXNlZEF0OkwoKG49ZT09bnVsbD92b2lkIDA6ZS52YXJpYW50cyk9PW51bGw/dm9pZCAwOm5bc10uaW5pdGlhbGlzZWRfYXQpLHN0YXRlOnIuc3RhdGUsc3RyZWFtX3R5cGU6cj09bnVsbD92b2lkIDA6ci5zdHJlYW1fdHlwZX0pOmkudmFyaWFudHMucHVzaCh7aW5pdGlhbGlzZWRBdDpMKChkPWU9PW51bGw/dm9pZCAwOmUudmFyaWFudHMpPT1udWxsP3ZvaWQgMDpkW3NdLmluaXRpYWxpc2VkX2F0KSx1cmw6XCJcIn0pfSksaSk6KGwudyh0aGlzLlRBRyxcIm9uIGhscyAtIHJvb20gbm90IHByZXNlbnRcIiksaSl9dXBkYXRlSExTU3RhdHVzKGUpe3ZhciByO2xldCB0PXRoaXMuc3RvcmUuZ2V0Um9vbSgpLGk9ZS52YXJpYW50cyYmZS52YXJpYW50cy5sZW5ndGg+MD9lLnZhcmlhbnRzLnNvbWUocz0+dGhpcy5pc1N0cmVhbWluZ1J1bm5pbmcocy5zdGF0ZSkpOiExO2lmKCF0KXtsLncodGhpcy5UQUcsXCJvbiBobHMgLSByb29tIG5vdCBwcmVzZW50XCIpO3JldHVybn1lLmVuYWJsZWQ9aSx0Lmhscz10aGlzLmNvbnZlcnRIbHMoZSksKHI9dGhpcy5saXN0ZW5lcik9PW51bGx8fHIub25Sb29tVXBkYXRlKFwiSExTX1NUUkVBTUlOR19TVEFURV9VUERBVEVEXCIsdCl9aGFuZGxlVHJhbnNjcmlwdGlvblN0YXR1cyhlKXt2YXIgaTtsZXQgdD10aGlzLnN0b3JlLmdldFJvb20oKTtpZighdCl7bC53KHRoaXMuVEFHLFwib24gdHJhbnNjcmlwdGlvbiAtIHJvb20gbm90IHByZXNlbnRcIik7cmV0dXJufXQudHJhbnNjcmlwdGlvbnM9dGhpcy5hZGRUcmFuc2NyaXB0aW9uRGV0YWlsKGUpfHxbXSwoaT10aGlzLmxpc3RlbmVyKT09bnVsbHx8aS5vblJvb21VcGRhdGUoXCJUUkFOU0NSSVBUSU9OX1NUQVRFX1VQREFURURcIix0KX1jb252ZXJ0SGxzKGUpe3ZhciByO2lmKGUhPW51bGwmJmUudmFyaWFudHMmJmUudmFyaWFudHMubGVuZ3RoPjA/ZS52YXJpYW50cy5zb21lKHM9PnMuc3RhdGU9PT1cImluaXRpYWxpc2VkXCIpOiExKXJldHVybiB0aGlzLmluaXRITFMoZSk7bGV0IGk9e3J1bm5pbmc6ISEoZSE9bnVsbCYmZS5lbmFibGVkKSx2YXJpYW50czpbXSxlcnJvcjp0aGlzLnRvU2RrRXJyb3IoZT09bnVsbD92b2lkIDA6ZS5lcnJvcil9O3JldHVybihyPWU9PW51bGw/dm9pZCAwOmUudmFyaWFudHMpPT1udWxsfHxyLmZvckVhY2gocz0+e2kudmFyaWFudHMucHVzaCh7bWVldGluZ1VSTDpzPT1udWxsP3ZvaWQgMDpzLm1lZXRpbmdfdXJsLHVybDpzPT1udWxsP3ZvaWQgMDpzLnVybCxtZXRhZGF0YTpzPT1udWxsP3ZvaWQgMDpzLm1ldGFkYXRhLHBsYXlsaXN0X3R5cGU6cz09bnVsbD92b2lkIDA6cy5wbGF5bGlzdF90eXBlLHN0YXJ0ZWRBdDpMKHM9PW51bGw/dm9pZCAwOnMuc3RhcnRlZF9hdCksaW5pdGlhbGlzZWRBdDpMKHM9PW51bGw/dm9pZCAwOnMuaW5pdGlhbGlzZWRfYXQpLHN0YXRlOnMuc3RhdGUsc3RyZWFtX3R5cGU6cz09bnVsbD92b2lkIDA6cy5zdHJlYW1fdHlwZX0pfSksaX1nZXRITFNSZWNvcmRpbmcoZSl7dmFyIHIscztsZXQgdD17cnVubmluZzohMX0saT10aGlzLmlzUmVjb3JkaW5nUnVubmluZyhlPT1udWxsP3ZvaWQgMDplLnN0YXRlKTtyZXR1cm4oaXx8KGU9PW51bGw/dm9pZCAwOmUuc3RhdGUpPT09XCJwYXVzZWRcIikmJih0PXtydW5uaW5nOmksc2luZ2xlRmlsZVBlckxheWVyOiEhKChyPWU9PW51bGw/dm9pZCAwOmUuaGxzX3JlY29yZGluZykhPW51bGwmJnIuc2luZ2xlX2ZpbGVfcGVyX2xheWVyKSxobHNWb2Q6ISEoKHM9ZT09bnVsbD92b2lkIDA6ZS5obHNfcmVjb3JkaW5nKSE9bnVsbCYmcy5obHNfdm9kKSxzdGFydGVkQXQ6TChlPT1udWxsP3ZvaWQgMDplLnN0YXJ0ZWRfYXQpLGluaXRpYWxpc2VkQXQ6TChlPT1udWxsP3ZvaWQgMDplLmluaXRpYWxpc2VkX2F0KSxzdGF0ZTplPT1udWxsP3ZvaWQgMDplLnN0YXRlLGVycm9yOnRoaXMudG9TZGtFcnJvcihlPT1udWxsP3ZvaWQgMDplLmVycm9yKX0pLHR9Z2V0UGVlckxpc3RITFNSZWNvcmRpbmcoZSl7dmFyIHIscztsZXQgdD1lPT1udWxsP3ZvaWQgMDplLmhscztyZXR1cm57cnVubmluZzp0aGlzLmlzUmVjb3JkaW5nUnVubmluZyh0PT1udWxsP3ZvaWQgMDp0LnN0YXRlKSxzdGFydGVkQXQ6TCh0PT1udWxsP3ZvaWQgMDp0LnN0YXJ0ZWRfYXQpLGluaXRpYWxpc2VkQXQ6TCh0PT1udWxsP3ZvaWQgMDp0LmluaXRpYWxpc2VkX2F0KSxzdGF0ZTp0PT1udWxsP3ZvaWQgMDp0LnN0YXRlLHNpbmdsZUZpbGVQZXJMYXllcjoocj10PT1udWxsP3ZvaWQgMDp0LmNvbmZpZyk9PW51bGw/dm9pZCAwOnIuc2luZ2xlX2ZpbGVfcGVyX2xheWVyLGhsc1ZvZDoocz10PT1udWxsP3ZvaWQgMDp0LmNvbmZpZyk9PW51bGw/dm9pZCAwOnMuaGxzX3ZvZH19Z2V0UGVlckxpc3RCcm93c2VyUmVjb3JkaW5nKGUpe2xldCB0PWU9PW51bGw/dm9pZCAwOmUuYnJvd3NlcjtyZXR1cm57cnVubmluZzp0aGlzLmlzUmVjb3JkaW5nUnVubmluZyh0PT1udWxsP3ZvaWQgMDp0LnN0YXRlKSxzdGFydGVkQXQ6TCh0PT1udWxsP3ZvaWQgMDp0LnN0YXJ0ZWRfYXQpLHN0YXRlOnQ9PW51bGw/dm9pZCAwOnQuc3RhdGV9fWdldFBlZXJMaXN0U0ZVUmVjb3JkaW5nKGUpe2xldCB0PWU9PW51bGw/dm9pZCAwOmUuc2Z1O3JldHVybntydW5uaW5nOnRoaXMuaXNSZWNvcmRpbmdSdW5uaW5nKHQ9PW51bGw/dm9pZCAwOnQuc3RhdGUpLHN0YXJ0ZWRBdDpMKHQ9PW51bGw/dm9pZCAwOnQuc3RhcnRlZF9hdCksc3RhdGU6dD09bnVsbD92b2lkIDA6dC5zdGF0ZX19dXBkYXRlUmVjb3JkaW5nU3RhdHVzKGUpe3ZhciBzO2xldCB0PXRoaXMuc3RvcmUuZ2V0Um9vbSgpLGk9dGhpcy5pc1JlY29yZGluZ1J1bm5pbmcoZS5zdGF0ZSk7aWYoIXQpe2wudyh0aGlzLlRBRyxgc2V0IHJlY29yZGluZyBzdGF0dXMgcnVubmluZz0ke2l9IC0gcm9vbSBub3QgcHJlc2VudGApO3JldHVybn1sZXQgcjtlLnR5cGU9PT1cInNmdVwiPyh0LnJlY29yZGluZy5zZXJ2ZXI9e3J1bm5pbmc6aSxzdGFydGVkQXQ6aT9MKGUuc3RhcnRlZF9hdCk6dm9pZCAwLGVycm9yOnRoaXMudG9TZGtFcnJvcihlLmVycm9yKSxzdGF0ZTplLnN0YXRlfSxyPVwiU0VSVkVSX1JFQ09SRElOR19TVEFURV9VUERBVEVEXCIpOmUudHlwZT09PVwiSExTXCI/KHQucmVjb3JkaW5nLmhscz10aGlzLmdldEhMU1JlY29yZGluZyhlKSxyPVwiUkVDT1JESU5HX1NUQVRFX1VQREFURURcIik6KHQucmVjb3JkaW5nLmJyb3dzZXI9e3J1bm5pbmc6aSxzdGFydGVkQXQ6aT9MKGUuc3RhcnRlZF9hdCk6dm9pZCAwLGVycm9yOnRoaXMudG9TZGtFcnJvcihlLmVycm9yKSxzdGF0ZTplPT1udWxsP3ZvaWQgMDplLnN0YXRlfSxyPVwiQlJPV1NFUl9SRUNPUkRJTkdfU1RBVEVfVVBEQVRFRFwiKSwocz10aGlzLmxpc3RlbmVyKT09bnVsbHx8cy5vblJvb21VcGRhdGUocix0KX11cGRhdGVSVE1QU3RhdHVzKGUpe3ZhciByLHM7bGV0IHQ9dGhpcy5zdG9yZS5nZXRSb29tKCksaT10aGlzLmlzU3RyZWFtaW5nUnVubmluZyhlLnN0YXRlKTtpZighdCl7bC53KHRoaXMuVEFHLFwib24gcG9saWN5IGNoYW5nZSAtIHJvb20gbm90IHByZXNlbnRcIik7cmV0dXJufWlmKCFpKXt0LnJ0bXA9e3J1bm5pbmc6aSxzdGF0ZTplLnN0YXRlLGVycm9yOnRoaXMudG9TZGtFcnJvcihlLmVycm9yKX0sKHI9dGhpcy5saXN0ZW5lcik9PW51bGx8fHIub25Sb29tVXBkYXRlKFwiUlRNUF9TVFJFQU1JTkdfU1RBVEVfVVBEQVRFRFwiLHQpO3JldHVybn10LnJ0bXA9e3J1bm5pbmc6aSxzdGFydGVkQXQ6aT9MKGUuc3RhcnRlZF9hdCk6dm9pZCAwLHN0YXRlOmUuc3RhdGUsZXJyb3I6dGhpcy50b1Nka0Vycm9yKGUuZXJyb3IpfSwocz10aGlzLmxpc3RlbmVyKT09bnVsbHx8cy5vblJvb21VcGRhdGUoXCJSVE1QX1NUUkVBTUlOR19TVEFURV9VUERBVEVEXCIsdCl9dG9TZGtFcnJvcihlKXtpZighKGUhPW51bGwmJmUuY29kZSkpcmV0dXJuO2xldCB0PWUubWVzc2FnZXx8XCJlcnJvciBpbiBzdHJlYW1pbmcvcmVjb3JkaW5nXCIsaT1uZXcgayhlLmNvZGUsXCJTZXJ2ZXJFcnJvcnNcIixcIk5PTkVcIix0LHQpO3JldHVybiBsLmUodGhpcy5UQUcsXCJlcnJvciBpbiBzdHJlYW1pbmcvcmVjb3JkaW5nXCIsaSksaX19O3ZhciBhcj1jbGFzc3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuc3RvcmU9ZTt0aGlzLmxpc3RlbmVyPXR9aGFuZGxlTm90aWZpY2F0aW9uKGUsdCl7ZT09PVwib24tbWV0YWRhdGEtY2hhbmdlXCImJnRoaXMuaGFuZGxlTWV0YWRhdGFDaGFuZ2UodCl9aGFuZGxlTWV0YWRhdGFDaGFuZ2UoZSl7dmFyIGk7bGV0IHQ9ZS52YWx1ZXMubWFwKHI9Pih7a2V5OnIua2V5LHZhbHVlOnIuZGF0YSx1cGRhdGVkQXQ6TChyLnVwZGF0ZWRfYXQpLHVwZGF0ZWRCeTpyLnVwZGF0ZWRfYnk/dGhpcy5zdG9yZS5nZXRQZWVyQnlJZChyLnVwZGF0ZWRfYnkpOnZvaWQgMH0pKTsoaT10aGlzLmxpc3RlbmVyKT09bnVsbHx8aS5vblNlc3Npb25TdG9yZVVwZGF0ZSh0KX19O3ZhciBvcj1jbGFzc3tjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5zdG9yZT1lO3RoaXMudHJhbnNwb3J0PXQ7dGhpcy5saXN0ZW5lcj1pfWhhbmRsZU5vdGlmaWNhdGlvbihlLHQpe3N3aXRjaChlKXtjYXNlXCJvbi13aGl0ZWJvYXJkLXVwZGF0ZVwiOnt0aGlzLmhhbmRsZVdoaXRlYm9hcmRVcGRhdGUodCk7YnJlYWt9ZGVmYXVsdDpicmVha319aGFuZGxlV2hpdGVib2FyZFVwZGF0ZShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIG47bGV0IHQ9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKSxpPXRoaXMuc3RvcmUuZ2V0V2hpdGVib2FyZChlLmlkKSxyPWUub3duZXI9PT0odD09bnVsbD92b2lkIDA6dC5wZWVySWQpfHxlLm93bmVyPT09KHQ9PW51bGw/dm9pZCAwOnQuY3VzdG9tZXJVc2VySWQpLHM9ZS5zdGF0ZT09PVwib3BlblwiLG89e2lkOmUuaWQsdGl0bGU6ZS50aXRsZSxhdHRyaWJ1dGVzOmUuYXR0cmlidXRlc307aWYoby5vcGVuPXI/aT09bnVsbD92b2lkIDA6aS5vcGVuOnMsby5vd25lcj1vLm9wZW4/ZS5vd25lcjp2b2lkIDAsby5vcGVuKWlmKHIpby51cmw9aT09bnVsbD92b2lkIDA6aS51cmwsby50b2tlbj1pPT1udWxsP3ZvaWQgMDppLnRva2VuLG8uYWRkcj1pPT1udWxsP3ZvaWQgMDppLmFkZHIsby5wZXJtaXNzaW9ucz1pPT1udWxsP3ZvaWQgMDppLnBlcm1pc3Npb25zO2Vsc2V7bGV0IGQ9eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmdldFdoaXRlYm9hcmQoe2lkOmUuaWR9KTtvLnVybD1xdChkLnRva2VuLGQuYWRkcix0aGlzLnN0b3JlLmdldEVudigpKSxvLnRva2VuPWQudG9rZW4sby5hZGRyPWQuYWRkcixvLnBlcm1pc3Npb25zPWQucGVybWlzc2lvbnMsby5vcGVuPWQucGVybWlzc2lvbnMubGVuZ3RoPjB9dGhpcy5zdG9yZS5zZXRXaGl0ZWJvYXJkKG8pLChuPXRoaXMubGlzdGVuZXIpPT1udWxsfHxuLm9uV2hpdGVib2FyZFVwZGF0ZShvKX0pfX07dmFyIG5yPWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpLHIscyxvKXt0aGlzLnN0b3JlPWU7dGhpcy50cmFuc3BvcnQ9aTt0aGlzLmxpc3RlbmVyPXI7dGhpcy5hdWRpb0xpc3RlbmVyPXM7dGhpcy5jb25uZWN0aW9uUXVhbGl0eUxpc3RlbmVyPW87dGhpcy5UQUc9XCJbSE1TTm90aWZpY2F0aW9uTWFuYWdlcl1cIjt0aGlzLmhhc0NvbnNpc3RlbnRSb29tU3RhdGVBcnJpdmVkPSExO3RoaXMuaWdub3JlTm90aWZpY2F0aW9uPWU9PntpZihlPT09XCJwZWVyLWxpc3RcIil0aGlzLmhhc0NvbnNpc3RlbnRSb29tU3RhdGVBcnJpdmVkPSEwO2Vsc2UgaWYoZT09PVwicm9vbS1zdGF0ZVwiKXJldHVybiB0aGlzLmhhc0NvbnNpc3RlbnRSb29tU3RhdGVBcnJpdmVkO3JldHVybiExfTt0aGlzLmhhbmRsZVRyYWNrQWRkPWU9Pnt0aGlzLnRyYWNrTWFuYWdlci5oYW5kbGVUcmFja0FkZChlKX07dGhpcy5oYW5kbGVUcmFja1JlbW92ZT1lPT57dGhpcy50cmFja01hbmFnZXIuaGFuZGxlVHJhY2tSZW1vdmUoZSl9O3RoaXMudXBkYXRlTG9jYWxQZWVyPSh7bmFtZTplLG1ldGFkYXRhOnR9KT0+e2xldCBpPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCk7dGhpcy5wZWVyTWFuYWdlci5oYW5kbGVQZWVySW5mb1VwZGF0ZSh7cGVlcjppLG5hbWU6ZSxkYXRhOnR9KX07bGV0IG49dGhpcy50cmFuc3BvcnQuaXNGbGFnRW5hYmxlZChcIm9uRGVtYW5kVHJhY2tzXCIpO3RoaXMudHJhY2tNYW5hZ2VyPW4/bmV3IHppKHRoaXMuc3RvcmUsdCx0aGlzLnRyYW5zcG9ydCx0aGlzLmxpc3RlbmVyKTpuZXcgbHQodGhpcy5zdG9yZSx0LHRoaXMubGlzdGVuZXIpLHRoaXMucGVlck1hbmFnZXI9bmV3IFhpKHRoaXMuc3RvcmUsdGhpcy50cmFja01hbmFnZXIsdGhpcy5saXN0ZW5lciksdGhpcy5wZWVyTGlzdE1hbmFnZXI9bmV3IFlpKHRoaXMuc3RvcmUsdGhpcy5wZWVyTWFuYWdlcix0aGlzLnRyYWNrTWFuYWdlcix0aGlzLmxpc3RlbmVyKSx0aGlzLmJyb2FkY2FzdE1hbmFnZXI9bmV3IEppKHRoaXMubGlzdGVuZXIpLHRoaXMucG9saWN5Q2hhbmdlTWFuYWdlcj1uZXcgWmkodGhpcy5zdG9yZSx0KSx0aGlzLnJlcXVlc3RNYW5hZ2VyPW5ldyBycih0aGlzLnN0b3JlLHRoaXMubGlzdGVuZXIpLHRoaXMuYWN0aXZlU3BlYWtlck1hbmFnZXI9bmV3IGppKHRoaXMuc3RvcmUsdGhpcy5saXN0ZW5lcix0aGlzLmF1ZGlvTGlzdGVuZXIpLHRoaXMuY29ubmVjdGlvblF1YWxpdHlNYW5hZ2VyPW5ldyBRaSh0aGlzLnN0b3JlLHRoaXMuY29ubmVjdGlvblF1YWxpdHlMaXN0ZW5lciksdGhpcy5yb29tVXBkYXRlTWFuYWdlcj1uZXcgc3IodGhpcy5zdG9yZSx0aGlzLmxpc3RlbmVyKSx0aGlzLnNlc3Npb25NZXRhZGF0YU1hbmFnZXI9bmV3IGFyKHRoaXMuc3RvcmUsdGhpcy5saXN0ZW5lciksdGhpcy5wb2xsc01hbmFnZXI9bmV3IGlyKHRoaXMuc3RvcmUsdGhpcy50cmFuc3BvcnQsdGhpcy5saXN0ZW5lciksdGhpcy53aGl0ZWJvYXJkTWFuYWdlcj1uZXcgb3IodGhpcy5zdG9yZSx0aGlzLnRyYW5zcG9ydCx0aGlzLmxpc3RlbmVyKX1zZXRMaXN0ZW5lcihlKXt0aGlzLmxpc3RlbmVyPWUsdGhpcy50cmFja01hbmFnZXIubGlzdGVuZXI9ZSx0aGlzLnBlZXJNYW5hZ2VyLmxpc3RlbmVyPWUsdGhpcy5wZWVyTGlzdE1hbmFnZXIubGlzdGVuZXI9ZSx0aGlzLmJyb2FkY2FzdE1hbmFnZXIubGlzdGVuZXI9ZSx0aGlzLnJlcXVlc3RNYW5hZ2VyLmxpc3RlbmVyPWUsdGhpcy5hY3RpdmVTcGVha2VyTWFuYWdlci5saXN0ZW5lcj1lLHRoaXMucm9vbVVwZGF0ZU1hbmFnZXIubGlzdGVuZXI9ZSx0aGlzLnNlc3Npb25NZXRhZGF0YU1hbmFnZXIubGlzdGVuZXI9ZSx0aGlzLnBvbGxzTWFuYWdlci5saXN0ZW5lcj1lLHRoaXMud2hpdGVib2FyZE1hbmFnZXIubGlzdGVuZXI9ZX1zZXRBdWRpb0xpc3RlbmVyKGUpe3RoaXMuYXVkaW9MaXN0ZW5lcj1lLHRoaXMuYWN0aXZlU3BlYWtlck1hbmFnZXIuYXVkaW9MaXN0ZW5lcj1lfXNldENvbm5lY3Rpb25RdWFsaXR5TGlzdGVuZXIoZSl7dGhpcy5jb25uZWN0aW9uUXVhbGl0eUxpc3RlbmVyPWUsdGhpcy5jb25uZWN0aW9uUXVhbGl0eU1hbmFnZXIubGlzdGVuZXI9ZX1oYW5kbGVOb3RpZmljYXRpb24oZSx0PSExKXt2YXIgcyxvO2xldCBpPWUubWV0aG9kLHI9ZS5wYXJhbXM7W1wiYWN0aXZlLXNwZWFrZXJzXCIsXCJzZnUtc3RhdHNcIixcIm9uLWNvbm5lY3Rpb24tcXVhbGl0eS11cGRhdGVcIix2b2lkIDBdLmluY2x1ZGVzKGkpfHxsLmQodGhpcy5UQUcsYFJlY2VpdmVkIG5vdGlmaWNhdGlvbiAtICR7aX1gLHtub3RpZmljYXRpb246cn0pLGk9PT1cInNmdS1zdGF0c1wiJiYocz13aW5kb3cuSE1TKSE9bnVsbCYmcy5PTl9TRlVfU1RBVFMmJnR5cGVvZigobz13aW5kb3cuSE1TKT09bnVsbD92b2lkIDA6by5PTl9TRlVfU1RBVFMpPT1cImZ1bmN0aW9uXCImJndpbmRvdy5ITVMuT05fU0ZVX1NUQVRTKGUucGFyYW1zKSwhdGhpcy5pZ25vcmVOb3RpZmljYXRpb24oaSkmJih0aGlzLnJvb21VcGRhdGVNYW5hZ2VyLmhhbmRsZU5vdGlmaWNhdGlvbihpLHIpLHRoaXMucGVlck1hbmFnZXIuaGFuZGxlTm90aWZpY2F0aW9uKGksciksdGhpcy5yZXF1ZXN0TWFuYWdlci5oYW5kbGVOb3RpZmljYXRpb24oaSxyKSx0aGlzLnBlZXJMaXN0TWFuYWdlci5oYW5kbGVOb3RpZmljYXRpb24oaSxyLHQpLHRoaXMuYnJvYWRjYXN0TWFuYWdlci5oYW5kbGVOb3RpZmljYXRpb24oaSxyKSx0aGlzLnNlc3Npb25NZXRhZGF0YU1hbmFnZXIuaGFuZGxlTm90aWZpY2F0aW9uKGksciksdGhpcy5wb2xsc01hbmFnZXIuaGFuZGxlTm90aWZpY2F0aW9uKGksciksdGhpcy53aGl0ZWJvYXJkTWFuYWdlci5oYW5kbGVOb3RpZmljYXRpb24oaSxyKSx0aGlzLmhhbmRsZUlzb2xhdGVkTWV0aG9kcyhpLHIpKX1oYW5kbGVJc29sYXRlZE1ldGhvZHMoZSx0KXtzd2l0Y2goZSl7Y2FzZVwib24tdHJhY2stYWRkXCI6e3RoaXMudHJhY2tNYW5hZ2VyLmhhbmRsZVRyYWNrTWV0YWRhdGFBZGQodCk7YnJlYWt9Y2FzZVwib24tdHJhY2stdXBkYXRlXCI6e3RoaXMudHJhY2tNYW5hZ2VyLmhhbmRsZVRyYWNrVXBkYXRlKHQpO2JyZWFrfWNhc2VcIm9uLXRyYWNrLXJlbW92ZVwiOntpZighdC5wZWVyKXtsLmQodGhpcy5UQUcsYElnbm9yaW5nIHNmdSBub3RpZmljYXRpb24gLSAke2V9YCx7bm90aWZpY2F0aW9uOnR9KTtyZXR1cm59dGhpcy50cmFja01hbmFnZXIuaGFuZGxlVHJhY2tSZW1vdmVkUGVybWFuZW50bHkodCk7YnJlYWt9Y2FzZVwib24tdHJhY2stbGF5ZXItdXBkYXRlXCI6e3RoaXMudHJhY2tNYW5hZ2VyLmhhbmRsZVRyYWNrTGF5ZXJVcGRhdGUodCk7YnJlYWt9Y2FzZVwiYWN0aXZlLXNwZWFrZXJzXCI6dGhpcy5hY3RpdmVTcGVha2VyTWFuYWdlci5oYW5kbGVBY3RpdmVTcGVha2Vycyh0KTticmVhaztjYXNlXCJvbi1jb25uZWN0aW9uLXF1YWxpdHktdXBkYXRlXCI6dGhpcy5jb25uZWN0aW9uUXVhbGl0eU1hbmFnZXIuaGFuZGxlUXVhbGl0eVVwZGF0ZSh0KTticmVhaztjYXNlXCJvbi1wb2xpY3ktY2hhbmdlXCI6dGhpcy5wb2xpY3lDaGFuZ2VNYW5hZ2VyLmhhbmRsZVBvbGljeUNoYW5nZSh0KTticmVhaztjYXNlXCJub2RlLWluZm9cIjp0aGlzLnRyYW5zcG9ydC5zZXRTRlVOb2RlSWQodC5zZnVfbm9kZV9pZCk7YnJlYWs7ZGVmYXVsdDpicmVha319fTt2YXIgY3I9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy50cmFuc3BvcnQ9ZTt0aGlzLm9ic2VydmVkS2V5cz1uZXcgU2V0fWdldChlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0e2RhdGE6dCx1cGRhdGVkX2F0Oml9PXlpZWxkIHRoaXMudHJhbnNwb3J0LnNpZ25hbC5nZXRTZXNzaW9uTWV0YWRhdGEoZSk7cmV0dXJue3ZhbHVlOnQsdXBkYXRlZEF0OkwoaSl9fSl9c2V0KGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldHtkYXRhOmksdXBkYXRlZF9hdDpyfT15aWVsZCB0aGlzLnRyYW5zcG9ydC5zaWduYWwuc2V0U2Vzc2lvbk1ldGFkYXRhKHtrZXk6ZSxkYXRhOnR9KSxzPUwocik7cmV0dXJue3ZhbHVlOmksdXBkYXRlZEF0OnN9fSl9b2JzZXJ2ZShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IHQ9bmV3IFNldCh0aGlzLm9ic2VydmVkS2V5cyk7aWYoZS5mb3JFYWNoKGk9PnRoaXMub2JzZXJ2ZWRLZXlzLmFkZChpKSksdGhpcy5vYnNlcnZlZEtleXMuc2l6ZSE9PXQuc2l6ZSl0cnl7eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmxpc3Rlbk1ldGFkYXRhQ2hhbmdlKEFycmF5LmZyb20odGhpcy5vYnNlcnZlZEtleXMpKX1jYXRjaChpKXt0aHJvdyB0aGlzLm9ic2VydmVkS2V5cz10LGl9fSl9dW5vYnNlcnZlKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgdD1uZXcgU2V0KHRoaXMub2JzZXJ2ZWRLZXlzKTtpZih0aGlzLm9ic2VydmVkS2V5cz1uZXcgU2V0KFsuLi50aGlzLm9ic2VydmVkS2V5c10uZmlsdGVyKGk9PiFlLmluY2x1ZGVzKGkpKSksdGhpcy5vYnNlcnZlZEtleXMuc2l6ZSE9PXQuc2l6ZSl0cnl7eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmxpc3Rlbk1ldGFkYXRhQ2hhbmdlKEFycmF5LmZyb20odGhpcy5vYnNlcnZlZEtleXMpKX1jYXRjaChpKXt0aHJvdyB0aGlzLm9ic2VydmVkS2V5cz10LGl9fSl9fTt2YXIgZHI9Y2xhc3N7Y29uc3RydWN0b3IoZSx0LGk9XCJcIixyPVwiXCIscz1cImh0dHBzOi8vcHJvZC1pbml0LjEwMG1zLmxpdmUvaW5pdFwiLG89ITEsbil7dGhpcy5hdXRoVG9rZW49ZTt0aGlzLnBlZXJJZD10O3RoaXMucGVlck5hbWU9aTt0aGlzLmRhdGE9cjt0aGlzLmVuZHBvaW50PXM7dGhpcy5hdXRvU3Vic2NyaWJlVmlkZW89bzt0aGlzLmljZVNlcnZlcnM9bn19O3ZhciBqPShzPT4oc1tzLkNvbm5lY3RGYWlsZWQ9MF09XCJDb25uZWN0RmFpbGVkXCIsc1tzLlNpZ25hbERpc2Nvbm5lY3Q9MV09XCJTaWduYWxEaXNjb25uZWN0XCIsc1tzLkpvaW5XU01lc3NhZ2VGYWlsZWQ9Ml09XCJKb2luV1NNZXNzYWdlRmFpbGVkXCIsc1tzLlB1Ymxpc2hJY2VDb25uZWN0aW9uRmFpbGVkPTNdPVwiUHVibGlzaEljZUNvbm5lY3Rpb25GYWlsZWRcIixzW3MuU3Vic2NyaWJlSWNlQ29ubmVjdGlvbkZhaWxlZD00XT1cIlN1YnNjcmliZUljZUNvbm5lY3Rpb25GYWlsZWRcIixzKSkoanx8e30pLHphPXswOltdLDE6W10sMjpbMV0sMzpbMV0sNDpbMV19O3ZhciBscj0obj0+KG4uRGlzY29ubmVjdGVkPVwiRGlzY29ubmVjdGVkXCIsbi5Db25uZWN0aW5nPVwiQ29ubmVjdGluZ1wiLG4uSm9pbmVkPVwiSm9pbmVkXCIsbi5QcmV2aWV3PVwiUHJldmlld1wiLG4uRmFpbGVkPVwiRmFpbGVkXCIsbi5SZWNvbm5lY3Rpbmc9XCJSZWNvbm5lY3RpbmdcIixuLkxlYXZpbmc9XCJMZWF2aW5nXCIsbikpKGxyfHx7fSk7dmFyIHVyPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMucHJvbWlzZT1uZXcgUHJvbWlzZSgodCxpKT0+e3RoaXMucmVzb2x2ZT10LHRoaXMucmVqZWN0PWksZSh0LGkpfSl9fTt2YXIgcHI9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLm9uU3RhdGVDaGFuZ2U9ZTt0aGlzLnNlbmRFdmVudD10O3RoaXMuVEFHPVwiW1JldHJ5U2NoZWR1bGVyXVwiO3RoaXMuaW5Qcm9ncmVzcz1uZXcgTWFwO3RoaXMucmV0cnlUYXNrSWRzPVtdfXNjaGVkdWxlKG4pe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7Y2F0ZWdvcnk6ZSxlcnJvcjp0LHRhc2s6aSxvcmlnaW5hbFN0YXRlOnIsbWF4UmV0cnlUaW1lOnM9NmU0LGNoYW5nZVN0YXRlOm89ITB9KXt5aWVsZCB0aGlzLnNjaGVkdWxlVGFzayh7Y2F0ZWdvcnk6ZSxlcnJvcjp0LGNoYW5nZVN0YXRlOm8sdGFzazppLG9yaWdpbmFsU3RhdGU6cixtYXhSZXRyeVRpbWU6cyxmYWlsZWRBdDpEYXRlLm5vdygpfSl9KX1yZXNldCgpe3RoaXMucmV0cnlUYXNrSWRzLmZvckVhY2goZT0+Y2xlYXJUaW1lb3V0KGUpKSx0aGlzLnJldHJ5VGFza0lkcz1bXSx0aGlzLmluUHJvZ3Jlc3MuY2xlYXIoKX1pc1Rhc2tJblByb2dyZXNzKGUpe3JldHVybiEhdGhpcy5pblByb2dyZXNzLmdldChlKX1zY2hlZHVsZVRhc2sodSl7cmV0dXJuIGModGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKHtjYXRlZ29yeTplLGVycm9yOnQsY2hhbmdlU3RhdGU6aSx0YXNrOnIsb3JpZ2luYWxTdGF0ZTpzLGZhaWxlZEF0Om8sbWF4UmV0cnlUaW1lOm49NmU0LGZhaWxlZFJldHJ5Q291bnQ6ZD0wfSl7aWYobC5kKHRoaXMuVEFHLFwic2NoZWR1bGU6IFwiLHtjYXRlZ29yeTpqW2VdLGVycm9yOnR9KSxkPT09MCl7bGV0IHY9dGhpcy5pblByb2dyZXNzLmdldChlKTtpZih2KXtsLmQodGhpcy5UQUcsYHNjaGVkdWxlOiBBbHJlYWR5IGEgdGFzayBmb3IgJHtqW2VdfSBzY2hlZHVsZWQsIHdhaXRpbmcgZm9yIGl0cyBjb21wbGV0aW9uYCkseWllbGQgdi5wcm9taXNlO3JldHVybn1sZXQgUj1uZXcgdXIoKCQsdWUpPT57fSk7dGhpcy5pblByb2dyZXNzLnNldChlLFIpLHRoaXMuc2VuZEV2ZW50KHQsZSl9bGV0IHA9ITEsaD16YVtlXTtmb3IobGV0IHYgaW4gaCl7bGV0IFI9aFtwYXJzZUludCh2KV07dHJ5e2xldCAkPXRoaXMuaW5Qcm9ncmVzcy5nZXQoUik7JCYmKGwuZCh0aGlzLlRBRyxgc2NoZWR1bGU6IFN1c3BlbmRpbmcgcmV0cnkgdGFzayBvZiAke2pbZV19LCB3YWl0aW5nIGZvciAke2pbUl19IHRvIHJlY292ZXJgKSx5aWVsZCAkLnByb21pc2UsbC5kKHRoaXMuVEFHLGBzY2hlZHVsZTogUmVzdW1pbmcgcmV0cnkgdGFzayAke2pbZV19IGFzIGl0J3MgZGVwZW5kZW5jeSAke2pbUl19IGlzIHJlY292ZXJlZGApKX1jYXRjaCgkKXtsLmQodGhpcy5UQUcsYHNjaGVkdWxlOiBTdG9wcGluZyByZXRyeSB0YXNrIG9mICR7altlXX0gYXMgaXQncyBkZXBlbmRlbmN5ICR7altSXX0gZmFpbGVkIHRvIHJlY292ZXJgKSxwPSEwO2JyZWFrfX1sZXQgVD12PT57aWYodGhpcy5pblByb2dyZXNzLmRlbGV0ZShlKSx0aGlzLnNlbmRFdmVudCh2LGUpLHRoaXMucmVzZXQoKSxpKXRoaXMub25TdGF0ZUNoYW5nZShcIkZhaWxlZFwiLHYpO2Vsc2UgdGhyb3cgdn0sZz1EYXRlLm5vdygpLW87aWYoZz49bnx8cClyZXR1cm4gdC5kZXNjcmlwdGlvbis9YC4gWyR7altlXX1dIENvdWxkIG5vdCByZWNvdmVyIGFmdGVyICR7Z30gbWlsbGlzZWNvbmRzYCxwJiYodC5kZXNjcmlwdGlvbis9YCBDb3VsZCBub3QgcmVjb3ZlciBhbGwgb2YgaXQncyByZXF1aXJlZCBkZXBlbmRlbmNpZXMgLSBbJHtoLm1hcCh2PT5qW3ZdKS50b1N0cmluZygpfV1gKSx0LmlzVGVybWluYWw9ITAsVCh0KTtpJiZ0aGlzLm9uU3RhdGVDaGFuZ2UoXCJSZWNvbm5lY3RpbmdcIix0KTtsZXQgZj10aGlzLmdldERlbGF5Rm9yUmV0cnlDb3VudChlKTtsLmQodGhpcy5UQUcsYHNjaGVkdWxlOiBbJHtqW2VdfV0gW2ZhaWxlZFJldHJ5Q291bnQ9JHtkfV0gU2NoZWR1bGluZyByZXRyeSB0YXNrIGluICR7Zn1tc2ApO2xldCBFO3RyeXtFPXlpZWxkIHRoaXMuc2V0VGltZW91dFByb21pc2UocixmKX1jYXRjaCh2KXtFPSExO2xldCBSPXY7aWYoUi5pc1Rlcm1pbmFsKXJldHVybiBsLmUodGhpcy5UQUcsYFske2pbZV19XSBVbi1jYXVnaHQgdGVybWluYWwgZXhjZXB0aW9uICR7Ui5uYW1lfSBpbiByZXRyeS10YXNrYCx2KSxUKFIpO2wudyh0aGlzLlRBRyxgWyR7altlXX1dIFVuLWNhdWdodCBleGNlcHRpb24gJHtSLm5hbWV9IGluIHJldHJ5LXRhc2ssIGluaXRpYXRpbmcgcmV0cnlgLHYpfWlmKEUpe2xldCB2PXRoaXMuaW5Qcm9ncmVzcy5nZXQoZSk7dGhpcy5pblByb2dyZXNzLmRlbGV0ZShlKSx2PT1udWxsfHx2LnJlc29sdmUoZCksaSYmdGhpcy5pblByb2dyZXNzLnNpemU9PT0wJiZ0aGlzLm9uU3RhdGVDaGFuZ2UocyksbC5kKHRoaXMuVEFHLGBzY2hlZHVsZTogWyR7altlXX1dIFtmYWlsZWRSZXRyeUNvdW50PSR7ZH1dIFJlY292ZXJlZCBcXHUyNjdCXFx1RkUwRiBhZnRlciAke2d9bXNgKX1lbHNlIHlpZWxkIHRoaXMuc2NoZWR1bGVUYXNrKHtjYXRlZ29yeTplLGVycm9yOnQsY2hhbmdlU3RhdGU6aSx0YXNrOnIsb3JpZ2luYWxTdGF0ZTpzLG1heFJldHJ5VGltZTpuLGZhaWxlZEF0Om8sZmFpbGVkUmV0cnlDb3VudDpkKzF9KX0pfWdldERlbGF5Rm9yUmV0cnlDb3VudChlKXtsZXQgdD1lPT09Mj9NYXRoLnJhbmRvbSgpKjI6TWF0aC5yYW5kb20oKSxpPTA7cmV0dXJuIGU9PT0yP2k9Mit0OmU9PT0xJiYoaT0xKSxpKjFlM31zZXRUaW1lb3V0UHJvbWlzZShlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm4gbmV3IFByb21pc2UoKGkscik9PntsZXQgcz13aW5kb3cuc2V0VGltZW91dCgoKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dHJ5e2xldCBvPXlpZWxkIGUoKTtvJiZ0aGlzLnJldHJ5VGFza0lkcy5zcGxpY2UodGhpcy5yZXRyeVRhc2tJZHMuaW5kZXhPZihzKSwxKSxpKG8pfWNhdGNoKG8pe3Iobyl9fSksdCk7dGhpcy5yZXRyeVRhc2tJZHMucHVzaChzKX0pfSl9fTt2YXIgaHI9Y2xhc3MgZXh0ZW5kcyBOZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKDEwMCk7dGhpcy5sb2NhbFN0b3JhZ2U9bmV3IGZlKFwiaG1zLWFuYWx5dGljc1wiKTt0aGlzLmxvY2FsU3RvcmFnZS5jbGVhcigpLHRoaXMuaW5pdExvY2FsU3RvcmFnZVF1ZXVlKCl9ZW5xdWV1ZSh0KXtzdXBlci5lbnF1ZXVlKHQpLHRoaXMubG9jYWxTdG9yYWdlLnNldCh0aGlzLnN0b3JhZ2UpfWRlcXVldWUoKXtsZXQgdD1zdXBlci5kZXF1ZXVlKCk7cmV0dXJuIHRoaXMubG9jYWxTdG9yYWdlLnNldCh0aGlzLnN0b3JhZ2UpLHR9aW5pdExvY2FsU3RvcmFnZVF1ZXVlKCl7dmFyIHQ7KHQ9dGhpcy5sb2NhbFN0b3JhZ2UuZ2V0KCkpPT1udWxsfHx0LmZvckVhY2goaT0+e2xldCByPW5ldyBDKGkpO3N1cGVyLmVucXVldWUocil9KX19O3ZhciBtcj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMuVEFHPVwiW0FuYWx5dGljc1RyYW5zcG9ydF1cIjt0aGlzLmV2ZW50Q291bnQ9MDt0aGlzLmxhc3RSZXNldFRpbWU9RGF0ZS5ub3coKTt0aGlzLk1BWF9FVkVOVFNfUEVSX01JTlVURT0yMDA7dGhpcy5SRVNFVF9JTlRFUlZBTF9NUz02ZTR9Y2hlY2tSYXRlTGltaXQoKXtsZXQgZT1EYXRlLm5vdygpO2lmKGUtdGhpcy5sYXN0UmVzZXRUaW1lPj10aGlzLlJFU0VUX0lOVEVSVkFMX01TJiYodGhpcy5ldmVudENvdW50PTAsdGhpcy5sYXN0UmVzZXRUaW1lPWUpLHRoaXMuZXZlbnRDb3VudD49dGhpcy5NQVhfRVZFTlRTX1BFUl9NSU5VVEUpdGhyb3cgbmV3IEVycm9yKFwiVG9vIG1hbnkgZXZlbnRzIGJlaW5nIHNlbnQsIHBsZWFzZSBjaGVjayB0aGUgaW1wbGVtZW50YXRpb24uXCIpO3RoaXMuZXZlbnRDb3VudCsrfXNlbmRFdmVudChlKXt0cnl7dGhpcy5jaGVja1JhdGVMaW1pdCgpfWNhdGNoKHQpe3Rocm93IGwudyh0aGlzLlRBRyxcIlJhdGUgbGltaXQgZXhjZWVkZWRcIix0KSx0fXRyeXt0aGlzLnNlbmRTaW5nbGVFdmVudChlKSx0aGlzLmZsdXNoRmFpbGVkRXZlbnRzKCl9Y2F0Y2godCl7bC53KHRoaXMuVEFHLFwic2VuZEV2ZW50IGZhaWxlZFwiLHQpfX1mbHVzaEZhaWxlZEV2ZW50cyhlKXt2YXIgdDt0cnl7Zm9yKGwuZCh0aGlzLlRBRyxcIkZsdXNoaW5nIGZhaWxlZCBldmVudHNcIix0aGlzLmZhaWxlZEV2ZW50cyk7dGhpcy5mYWlsZWRFdmVudHMuc2l6ZSgpPjA7KXtsZXQgaT10aGlzLmZhaWxlZEV2ZW50cy5kZXF1ZXVlKCk7aSYmKCgodD1pLm1ldGFkYXRhKT09bnVsbD92b2lkIDA6dC5wZWVyLnBlZXJfaWQpPT09ZXx8IWkubWV0YWRhdGEucGVlci5wZWVyX2lkP3RoaXMuc2VuZFNpbmdsZUV2ZW50KGkpOkhlLnNlbmRFdmVudChpKSl9fWNhdGNoKGkpe2wudyh0aGlzLlRBRyxcImZsdXNoRmFpbGVkRXZlbnRzIGZhaWxlZFwiLGkpfX1zZW5kU2luZ2xlRXZlbnQoZSl7dHJ5e3RoaXMudHJhbnNwb3J0UHJvdmlkZXIuc2VuZEV2ZW50KGUpLGwuZCh0aGlzLlRBRyxcIlNlbnQgZXZlbnRcIixlLm5hbWUsZSl9Y2F0Y2godCl7dGhyb3cgbC53KHRoaXMuVEFHLGAke3RoaXMudHJhbnNwb3J0UHJvdmlkZXIuVEFHfS5zZW5kRXZlbnQgZmFpbGVkLCBhZGRpbmcgdG8gbG9jYWwgc3RvcmFnZSBldmVudHNgLHtldmVudDplLGVycm9yOnR9KSx0aGlzLmZhaWxlZEV2ZW50cy5lbnF1ZXVlKGUpLHR9fX07dmFyIFNyPWNsYXNzIGV4dGVuZHMgbXJ7Y29uc3RydWN0b3IodCl7c3VwZXIoKTt0aGlzLnRyYW5zcG9ydFByb3ZpZGVyPXQ7dGhpcy5mYWlsZWRFdmVudHM9bmV3IGhyfX07dmFyIHV0PWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpLHIpe3RoaXMuc3RvcmU9ZTt0aGlzLmV2ZW50QnVzPXQ7dGhpcy5zYW1wbGVXaW5kb3dTaXplPWk7dGhpcy5wdXNoSW50ZXJ2YWw9cjt0aGlzLnNob3VsZFNlbmRFdmVudD0hMTt0aGlzLnNlcXVlbmNlTnVtPTE7dGhpcy5zdG9wPSgpPT57dGhpcy5zaG91bGRTZW5kRXZlbnQmJnRoaXMuc2VuZEV2ZW50KCksdGhpcy5ldmVudEJ1cy5zdGF0c1VwZGF0ZS51bnN1YnNjcmliZSh0aGlzLmhhbmRsZVN0YXRzVXBkYXRlLmJpbmQodGhpcykpLHRoaXMuc2hvdWxkU2VuZEV2ZW50PSExfTt0aGlzLnN0YXJ0KCl9c3RhcnQoKXt0aGlzLnNob3VsZFNlbmRFdmVudHx8KHRoaXMuc3RvcCgpLHRoaXMuc2hvdWxkU2VuZEV2ZW50PSEwLHRoaXMuZXZlbnRCdXMuc3RhdHNVcGRhdGUuc3Vic2NyaWJlKHRoaXMuaGFuZGxlU3RhdHNVcGRhdGUuYmluZCh0aGlzKSksdGhpcy5zdGFydExvb3AoKS5jYXRjaChlPT5sLmUoXCJbU3RhdHNBbmFseXRpY3NdXCIsZS5tZXNzYWdlKSkpfXN0YXJ0TG9vcCgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtmb3IoO3RoaXMuc2hvdWxkU2VuZEV2ZW50Oyl5aWVsZCBKKHRoaXMucHVzaEludGVydmFsKjFlMyksdGhpcy5zZW5kRXZlbnQoKX0pfXNlbmRFdmVudCgpe3RoaXMudHJhY2tBbmFseXRpY3MuZm9yRWFjaChlPT57ZS5jbGVhclNhbXBsZXMoKX0pfWNsZWFuVHJhY2tBbmFseXRpY3NBbmRDcmVhdGVTYW1wbGUoZSl7dGhpcy50cmFja0FuYWx5dGljcy5mb3JFYWNoKHQ9PnshdGhpcy5zdG9yZS5oYXNUcmFjayh0LnRyYWNrKSYmISh0LnNhbXBsZXMubGVuZ3RoPjApJiZ0aGlzLnRyYWNrQW5hbHl0aWNzLmRlbGV0ZSh0LnRyYWNrX2lkKX0pLGUmJnRoaXMudHJhY2tBbmFseXRpY3MuZm9yRWFjaCh0PT57dC5jcmVhdGVTYW1wbGUoKX0pfX0scHQ9Y2xhc3N7Y29uc3RydWN0b3Ioe3RyYWNrOmUsc3NyYzp0LHJpZDppLGtpbmQ6cixzYW1wbGVXaW5kb3dTaXplOnN9KXt0aGlzLnNhbXBsZXM9W107dGhpcy50ZW1wU3RhdHM9W107dGhpcy50cmFjaz1lLHRoaXMuc3NyYz10LHRoaXMucmlkPWksdGhpcy5raW5kPXIsdGhpcy50cmFja19pZD10aGlzLnRyYWNrLnRyYWNrSWQsdGhpcy5zb3VyY2U9dGhpcy50cmFjay5zb3VyY2UsdGhpcy5zYW1wbGVXaW5kb3dTaXplPXN9cHVzaFRlbXBTdGF0KGUpe3RoaXMudGVtcFN0YXRzLnB1c2goZSl9Y3JlYXRlU2FtcGxlKCl7dGhpcy50ZW1wU3RhdHMubGVuZ3RoIT09MCYmKHRoaXMuc2FtcGxlcy5wdXNoKHRoaXMuY29sbGF0ZVNhbXBsZSgpKSx0aGlzLnByZXZMYXRlc3RTdGF0PXRoaXMuZ2V0TGF0ZXN0U3RhdCgpLHRoaXMudGVtcFN0YXRzLmxlbmd0aD0wKX1jbGVhclNhbXBsZXMoKXt0aGlzLnNhbXBsZXMubGVuZ3RoPTB9Z2V0TGF0ZXN0U3RhdCgpe3JldHVybiB0aGlzLnRlbXBTdGF0c1t0aGlzLnRlbXBTdGF0cy5sZW5ndGgtMV19Z2V0Rmlyc3RTdGF0KCl7cmV0dXJuIHRoaXMudGVtcFN0YXRzWzBdfWNhbGN1bGF0ZVN1bShlKXtpZih0eXBlb2YgdGhpcy5nZXRMYXRlc3RTdGF0KClbZV09PVwibnVtYmVyXCIpcmV0dXJuIHRoaXMudGVtcFN0YXRzLnJlZHVjZSgoaSxyKT0+aSsocltlXXx8MCksMCl9Y2FsY3VsYXRlQXZlcmFnZShlLHQ9ITApe2xldCBpPXRoaXMuY2FsY3VsYXRlU3VtKGUpLHI9aSE9PXZvaWQgMD9pL3RoaXMudGVtcFN0YXRzLmxlbmd0aDp2b2lkIDA7cmV0dXJuIHI/dD9NYXRoLnJvdW5kKHIpOnI6dm9pZCAwfWNhbGN1bGF0ZURpZmZlcmVuY2VGb3JTYW1wbGUoZSl7dmFyIHI7bGV0IHQ9TnVtYmVyKChyPXRoaXMucHJldkxhdGVzdFN0YXQpPT1udWxsP3ZvaWQgMDpyW2VdKXx8MDtyZXR1cm4oTnVtYmVyKHRoaXMuZ2V0TGF0ZXN0U3RhdCgpW2VdKXx8MCktdH1jYWxjdWxhdGVEaWZmZXJlbmNlQXZlcmFnZShlLHQ9ITApe2xldCBpPXRoaXMuY2FsY3VsYXRlRGlmZmVyZW5jZUZvclNhbXBsZShlKS90aGlzLnRlbXBTdGF0cy5sZW5ndGg7cmV0dXJuIHQ/TWF0aC5yb3VuZChpKTppfWNhbGN1bGF0ZUluc3RhbmNlc09mSGlnaChlLHQpe2lmKHR5cGVvZiB0aGlzLmdldExhdGVzdFN0YXQoKVtlXT09XCJudW1iZXJcIilyZXR1cm4gdGhpcy50ZW1wU3RhdHMucmVkdWNlKChyLHMpPT5yKygoc1tlXXx8MCk+dD8xOjApLDApfX0sZ3I9KGEsZSk9PmEmJmUmJihhLmZyYW1lV2lkdGghPT1lLmZyYW1lV2lkdGh8fGEuZnJhbWVIZWlnaHQhPT1lLmZyYW1lSGVpZ2h0KSxUcj0oYSxlKT0+YSYmZSYmYS5lbmFibGVkIT09ZS5lbmFibGVkLEp0PWE9Pk9iamVjdC5lbnRyaWVzKGEpLmZpbHRlcigoWyxlXSk9PmUhPT12b2lkIDApLnJlZHVjZSgoZSxbdCxpXSk9PihlW3RdPWksZSkse30pO3ZhciBRdD1jbGFzcyBleHRlbmRzIHV0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKTt0aGlzLnRyYWNrQW5hbHl0aWNzPW5ldyBNYXB9dG9BbmFseXRpY3MoKXt2YXIgcixzO2xldCB0PVtdLGk9W107cmV0dXJuIHRoaXMudHJhY2tBbmFseXRpY3MuZm9yRWFjaChvPT57by50cmFjay50eXBlPT09XCJhdWRpb1wiP3QucHVzaChvLnRvQW5hbHl0aWNzKCkpOm8udHJhY2sudHlwZT09PVwidmlkZW9cIiYmaS5wdXNoKG8udG9BbmFseXRpY3MoKSl9KSx7YXVkaW86dCx2aWRlbzppLGpvaW5lZF9hdDoocz0ocj10aGlzLnN0b3JlLmdldFJvb20oKSk9PW51bGw/dm9pZCAwOnIuam9pbmVkQXQpPT1udWxsP3ZvaWQgMDpzLmdldFRpbWUoKSxzZXF1ZW5jZV9udW06dGhpcy5zZXF1ZW5jZU51bSsrLG1heF93aW5kb3dfc2VjOjMwfX1zZW5kRXZlbnQoKXt0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkucHVibGlzaFN0YXRzKHRoaXMudG9BbmFseXRpY3MoKSkpLHN1cGVyLnNlbmRFdmVudCgpfWhhbmRsZVN0YXRzVXBkYXRlKHQpe2xldCBpPSExLHI9dC5nZXRMb2NhbFRyYWNrU3RhdHMoKTtPYmplY3Qua2V5cyhyKS5mb3JFYWNoKHM9PntsZXQgbz1yW3NdLG49dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXJUcmFja3MoKS5maW5kKGQ9PmQuZ2V0VHJhY2tJREJlaW5nU2VudCgpPT09cyk7T2JqZWN0LmtleXMobykuZm9yRWFjaChkPT57dmFyIGcsZixFO2xldCB1PW9bZF07aWYoIW4pcmV0dXJuO2xldCBwPXRoaXMuZ2V0VHJhY2tJZGVudGlmaWVyKG4udHJhY2tJZCx1KSxoPU0obSh7fSx1KSx7YXZhaWxhYmxlT3V0Z29pbmdCaXRyYXRlOihmPShnPXQuZ2V0TG9jYWxQZWVyU3RhdHMoKSk9PW51bGw/dm9pZCAwOmcucHVibGlzaCk9PW51bGw/dm9pZCAwOmYuYXZhaWxhYmxlT3V0Z29pbmdCaXRyYXRlfSk7aWYocCYmdGhpcy50cmFja0FuYWx5dGljcy5oYXMocCkpKEU9dGhpcy50cmFja0FuYWx5dGljcy5nZXQocCkpPT1udWxsfHxFLnB1c2hUZW1wU3RhdChoKTtlbHNlIGlmKG4pe2xldCB2PW5ldyBjcyh7dHJhY2s6bixzYW1wbGVXaW5kb3dTaXplOnRoaXMuc2FtcGxlV2luZG93U2l6ZSxyaWQ6dS5yaWQsc3NyYzp1LnNzcmMudG9TdHJpbmcoKSxraW5kOnUua2luZH0pO3YucHVzaFRlbXBTdGF0KGgpLHRoaXMudHJhY2tBbmFseXRpY3Muc2V0KHRoaXMuZ2V0VHJhY2tJZGVudGlmaWVyKG4udHJhY2tJZCx1KSx2KX1sZXQgVD10aGlzLnRyYWNrQW5hbHl0aWNzLmdldChwKTtUIT1udWxsJiZULnNob3VsZENyZWF0ZVNhbXBsZSgpJiYoaT0hMCl9KX0pLHRoaXMuY2xlYW5UcmFja0FuYWx5dGljc0FuZENyZWF0ZVNhbXBsZShpKX1nZXRUcmFja0lkZW50aWZpZXIodCxpKXtyZXR1cm4gaS5yaWQ/YCR7dH06JHtpLnJpZH1gOnR9fSxjcz1jbGFzcyBleHRlbmRzIHB0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKTt0aGlzLnNhbXBsZXM9W107dGhpcy5jb2xsYXRlU2FtcGxlPSgpPT57bGV0IHQ9dGhpcy5nZXRMYXRlc3RTdGF0KCksaT10LnF1YWxpdHlMaW1pdGF0aW9uRHVyYXRpb25zLHI9aSYme2JhbmR3aWR0aF9zZWM6aS5iYW5kd2lkdGgsY3B1X3NlYzppLmNwdSxvdGhlcl9zZWM6aS5vdGhlcn0scz10LmZyYW1lSGVpZ2h0P3toZWlnaHRfcHg6dGhpcy5nZXRMYXRlc3RTdGF0KCkuZnJhbWVIZWlnaHQsd2lkdGhfcHg6dGhpcy5nZXRMYXRlc3RTdGF0KCkuZnJhbWVXaWR0aH06dm9pZCAwLG89dGhpcy5jYWxjdWxhdGVBdmVyYWdlKFwiaml0dGVyXCIsITEpLG49bz9NYXRoLnJvdW5kKG8qMWUzKTp2b2lkIDAsZD10aGlzLmNhbGN1bGF0ZUF2ZXJhZ2UoXCJyb3VuZFRyaXBUaW1lXCIsITEpLHU9ZD9NYXRoLnJvdW5kKGQqMWUzKTp2b2lkIDA7cmV0dXJuIEp0KHt0aW1lc3RhbXA6RGF0ZS5ub3coKSxhdmdfYXZhaWxhYmxlX291dGdvaW5nX2JpdHJhdGVfYnBzOnRoaXMuY2FsY3VsYXRlQXZlcmFnZShcImF2YWlsYWJsZU91dGdvaW5nQml0cmF0ZVwiKSxhdmdfYml0cmF0ZV9icHM6dGhpcy5jYWxjdWxhdGVBdmVyYWdlKFwiYml0cmF0ZVwiKSxhdmdfZnBzOnRoaXMuY2FsY3VsYXRlQXZlcmFnZShcImZyYW1lc1BlclNlY29uZFwiKSx0b3RhbF9wYWNrZXRzX2xvc3Q6dGhpcy5nZXRMYXRlc3RTdGF0KCkucGFja2V0c0xvc3QsdG90YWxfcGFja2V0c19zZW50OnRoaXMuZ2V0TGF0ZXN0U3RhdCgpLnBhY2tldHNTZW50LHRvdGFsX3BhY2tldF9zZW50X2RlbGF5X3NlYzpwYXJzZUZsb2F0KHRoaXMuY2FsY3VsYXRlRGlmZmVyZW5jZUZvclNhbXBsZShcInRvdGFsUGFja2V0U2VuZERlbGF5XCIpLnRvRml4ZWQoNCkpLHRvdGFsX2Zpcl9jb3VudDp0aGlzLmNhbGN1bGF0ZURpZmZlcmVuY2VGb3JTYW1wbGUoXCJmaXJDb3VudFwiKSx0b3RhbF9wbGlfY291bnQ6dGhpcy5jYWxjdWxhdGVEaWZmZXJlbmNlRm9yU2FtcGxlKFwicGxpQ291bnRcIiksdG90YWxfbmFja19jb3VudDp0aGlzLmNhbGN1bGF0ZURpZmZlcmVuY2VGb3JTYW1wbGUoXCJuYWNrQ291bnRcIiksYXZnX2ppdHRlcl9tczpuLGF2Z19yb3VuZF90cmlwX3RpbWVfbXM6dSx0b3RhbF9xdWFsaXR5X2xpbWl0YXRpb246cixyZXNvbHV0aW9uOnN9KX07dGhpcy5zaG91bGRDcmVhdGVTYW1wbGU9KCk9PntsZXQgdD10aGlzLnRlbXBTdGF0cy5sZW5ndGgsaT10aGlzLnRlbXBTdGF0c1t0LTFdLHI9dGhpcy50ZW1wU3RhdHNbdC0yXTtyZXR1cm4gdD09PTMwfHxUcihpLHIpfHxpLmtpbmQ9PT1cInZpZGVvXCImJmdyKGkscil9O3RoaXMudG9BbmFseXRpY3M9KCk9Pih7dHJhY2tfaWQ6dGhpcy50cmFja19pZCxzc3JjOnRoaXMuc3NyYyxzb3VyY2U6dGhpcy5zb3VyY2UscmlkOnRoaXMucmlkLHNhbXBsZXM6dGhpcy5zYW1wbGVzfSl9fTt2YXIgenQ9Y2xhc3MgZXh0ZW5kcyB1dHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyk7dGhpcy50cmFja0FuYWx5dGljcz1uZXcgTWFwfXRvQW5hbHl0aWNzKCl7dmFyIHIscztsZXQgdD1bXSxpPVtdO3JldHVybiB0aGlzLnRyYWNrQW5hbHl0aWNzLmZvckVhY2gobz0+e28udHJhY2sudHlwZT09PVwiYXVkaW9cIj90LnB1c2goby50b0FuYWx5dGljcygpKTpvLnRyYWNrLnR5cGU9PT1cInZpZGVvXCImJmkucHVzaChvLnRvQW5hbHl0aWNzKCkpfSkse2F1ZGlvOnQsdmlkZW86aSxqb2luZWRfYXQ6KHM9KHI9dGhpcy5zdG9yZS5nZXRSb29tKCkpPT1udWxsP3ZvaWQgMDpyLmpvaW5lZEF0KT09bnVsbD92b2lkIDA6cy5nZXRUaW1lKCksc2VxdWVuY2VfbnVtOnRoaXMuc2VxdWVuY2VOdW0rKyxtYXhfd2luZG93X3NlYzoxMH19c2VuZEV2ZW50KCl7dGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh5LnN1YnNjcmliZVN0YXRzKHRoaXMudG9BbmFseXRpY3MoKSkpLHN1cGVyLnNlbmRFdmVudCgpfWhhbmRsZVN0YXRzVXBkYXRlKHQpe2xldCBpPXQuZ2V0QWxsUmVtb3RlVHJhY2tzU3RhdHMoKSxyPSExO09iamVjdC5rZXlzKGkpLmZvckVhY2gocz0+e3ZhciBmLEU7bGV0IG89dGhpcy5zdG9yZS5nZXRUcmFja0J5SWQocyksbj1pW3NdLGQ9KGY9dGhpcy50cmFja0FuYWx5dGljcy5nZXQocykpPT1udWxsP3ZvaWQgMDpmLmdldExhdGVzdFN0YXQoKSxwPSgodixSKT0+e2xldCAkPShSPT1udWxsP3ZvaWQgMDpSLmppdHRlckJ1ZmZlckRlbGF5KXx8MCx1ZT0oUj09bnVsbD92b2lkIDA6Ui5qaXR0ZXJCdWZmZXJFbWl0dGVkQ291bnQpfHwwLGdlPSgodj09bnVsbD92b2lkIDA6di5qaXR0ZXJCdWZmZXJEZWxheSl8fDApLSQscGU9KCh2PT1udWxsP3ZvaWQgMDp2LmppdHRlckJ1ZmZlckVtaXR0ZWRDb3VudCl8fDApLXVlO3JldHVybiBwZT4wP2dlKjFlMy9wZTooUj09bnVsbD92b2lkIDA6Ui5jYWxjdWxhdGVkSml0dGVyQnVmZmVyRGVsYXkpfHwwfSkobixkKSxoPXRoaXMuY2FsY3VsYXRlQXZTeW5jRm9yU3RhdChuLHQpLFQ9TShtKHt9LG4pLHtjYWxjdWxhdGVkSml0dGVyQnVmZmVyRGVsYXk6cCxhdlN5bmM6aH0pO2lmKG4ua2luZD09PVwidmlkZW9cIil7bGV0IHY9by5nZXRQcmVmZXJyZWRMYXllckRlZmluaXRpb24oKTtULmV4cGVjdGVkRnJhbWVIZWlnaHQ9dj09bnVsbD92b2lkIDA6di5yZXNvbHV0aW9uLmhlaWdodCxULmV4cGVjdGVkRnJhbWVXaWR0aD12PT1udWxsP3ZvaWQgMDp2LnJlc29sdXRpb24ud2lkdGh9aWYodGhpcy50cmFja0FuYWx5dGljcy5oYXMocykpKEU9dGhpcy50cmFja0FuYWx5dGljcy5nZXQocykpPT1udWxsfHxFLnB1c2hUZW1wU3RhdChUKTtlbHNlIGlmKG8pe2xldCB2PW5ldyBscyh7dHJhY2s6byxzYW1wbGVXaW5kb3dTaXplOnRoaXMuc2FtcGxlV2luZG93U2l6ZSxzc3JjOm4uc3NyYy50b1N0cmluZygpLGtpbmQ6bi5raW5kfSk7di5wdXNoVGVtcFN0YXQoVCksdGhpcy50cmFja0FuYWx5dGljcy5zZXQocyx2KX1sZXQgZz10aGlzLnRyYWNrQW5hbHl0aWNzLmdldChzKTtnIT1udWxsJiZnLnNob3VsZENyZWF0ZVNhbXBsZSgpJiYocj0hMCl9KSx0aGlzLmNsZWFuVHJhY2tBbmFseXRpY3NBbmRDcmVhdGVTYW1wbGUocil9Y2FsY3VsYXRlQXZTeW5jRm9yU3RhdCh0LGkpe2lmKCF0LnBlZXJJRHx8IXQuZXN0aW1hdGVkUGxheW91dFRpbWVzdGFtcHx8dC5raW5kIT09XCJ2aWRlb1wiKXJldHVybjtsZXQgcj10aGlzLnN0b3JlLmdldFBlZXJCeUlkKHQucGVlcklEKSxzPXI9PW51bGw/dm9pZCAwOnIuYXVkaW9UcmFjayxvPXI9PW51bGw/dm9pZCAwOnIudmlkZW9UcmFjaztpZighKHMmJm8mJnMuZW5hYmxlZCYmby5lbmFibGVkKSlyZXR1cm4gUnQ7bGV0IGQ9aS5nZXRSZW1vdGVUcmFja1N0YXRzKHMudHJhY2tJZCk7aWYoIWQpcmV0dXJuIFJ0O2lmKGQuZXN0aW1hdGVkUGxheW91dFRpbWVzdGFtcClyZXR1cm4gZC5lc3RpbWF0ZWRQbGF5b3V0VGltZXN0YW1wLXQuZXN0aW1hdGVkUGxheW91dFRpbWVzdGFtcH19LGxzPWNsYXNzIGV4dGVuZHMgcHR7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpO3RoaXMuc2FtcGxlcz1bXTt0aGlzLmNvbGxhdGVTYW1wbGU9KCk9PntsZXQgdD10aGlzLmdldExhdGVzdFN0YXQoKSxpPXRoaXMuZ2V0Rmlyc3RTdGF0KCkscj17dGltZXN0YW1wOkRhdGUubm93KCksdG90YWxfcGxpX2NvdW50OnRoaXMuY2FsY3VsYXRlRGlmZmVyZW5jZUZvclNhbXBsZShcInBsaUNvdW50XCIpLHRvdGFsX25hY2tfY291bnQ6dGhpcy5jYWxjdWxhdGVEaWZmZXJlbmNlRm9yU2FtcGxlKFwibmFja0NvdW50XCIpLGF2Z19qaXR0ZXJfYnVmZmVyX2RlbGF5OnRoaXMuY2FsY3VsYXRlQXZlcmFnZShcImNhbGN1bGF0ZWRKaXR0ZXJCdWZmZXJEZWxheVwiLCExKX07aWYodC5raW5kPT09XCJ2aWRlb1wiKXJldHVybiBKdChNKG0oe30scikse2F2Z19hdl9zeW5jX21zOnRoaXMuY2FsY3VsYXRlQXZnQXZTeW5jRm9yU2FtcGxlKCksYXZnX2ZyYW1lc19yZWNlaXZlZF9wZXJfc2VjOnRoaXMuY2FsY3VsYXRlRGlmZmVyZW5jZUF2ZXJhZ2UoXCJmcmFtZXNSZWNlaXZlZFwiKSxhdmdfZnJhbWVzX2Ryb3BwZWRfcGVyX3NlYzp0aGlzLmNhbGN1bGF0ZURpZmZlcmVuY2VBdmVyYWdlKFwiZnJhbWVzRHJvcHBlZFwiKSxhdmdfZnJhbWVzX2RlY29kZWRfcGVyX3NlYzp0aGlzLmNhbGN1bGF0ZURpZmZlcmVuY2VBdmVyYWdlKFwiZnJhbWVzRGVjb2RlZFwiKSxmcmFtZV93aWR0aDp0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2UoXCJmcmFtZVdpZHRoXCIpLGZyYW1lX2hlaWdodDp0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2UoXCJmcmFtZUhlaWdodFwiKSxleHBlY3RlZF9mcmFtZV93aWR0aDp0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2UoXCJleHBlY3RlZEZyYW1lV2lkdGhcIiksZXhwZWN0ZWRfZnJhbWVfaGVpZ2h0OnRoaXMuY2FsY3VsYXRlQXZlcmFnZShcImV4cGVjdGVkRnJhbWVIZWlnaHRcIikscGF1c2VfY291bnQ6dGhpcy5jYWxjdWxhdGVEaWZmZXJlbmNlRm9yU2FtcGxlKFwicGF1c2VDb3VudFwiKSxwYXVzZV9kdXJhdGlvbl9zZWNvbmRzOnRoaXMuY2FsY3VsYXRlRGlmZmVyZW5jZUZvclNhbXBsZShcInRvdGFsUGF1c2VzRHVyYXRpb25cIiksZnJlZXplX2NvdW50OnRoaXMuY2FsY3VsYXRlRGlmZmVyZW5jZUZvclNhbXBsZShcImZyZWV6ZUNvdW50XCIpLGZyZWV6ZV9kdXJhdGlvbl9zZWNvbmRzOnRoaXMuY2FsY3VsYXRlRGlmZmVyZW5jZUZvclNhbXBsZShcInRvdGFsRnJlZXplc0R1cmF0aW9uXCIpfSkpO3tsZXQgcz0odC5jb25jZWFsZWRTYW1wbGVzfHwwKS0odC5zaWxlbnRDb25jZWFsZWRTYW1wbGVzfHwwKS0oKGkuY29uY2VhbGVkU2FtcGxlc3x8MCktKGkuc2lsZW50Q29uY2VhbGVkU2FtcGxlc3x8MCkpO3JldHVybiBKdChNKG0oe30scikse2F1ZGlvX2xldmVsOnRoaXMuY2FsY3VsYXRlSW5zdGFuY2VzT2ZIaWdoKFwiYXVkaW9MZXZlbFwiLC4wNSksYXVkaW9fY29uY2VhbGVkX3NhbXBsZXM6cyxhdWRpb190b3RhbF9zYW1wbGVzX3JlY2VpdmVkOnRoaXMuY2FsY3VsYXRlRGlmZmVyZW5jZUZvclNhbXBsZShcInRvdGFsU2FtcGxlc1JlY2VpdmVkXCIpLGF1ZGlvX2NvbmNlYWxtZW50X2V2ZW50czp0aGlzLmNhbGN1bGF0ZURpZmZlcmVuY2VGb3JTYW1wbGUoXCJjb25jZWFsbWVudEV2ZW50c1wiKSxmZWNfcGFja2V0c19kaXNjYXJkZWQ6dGhpcy5jYWxjdWxhdGVEaWZmZXJlbmNlRm9yU2FtcGxlKFwiZmVjUGFja2V0c0Rpc2NhcmRlZFwiKSxmZWNfcGFja2V0c19yZWNlaXZlZDp0aGlzLmNhbGN1bGF0ZURpZmZlcmVuY2VGb3JTYW1wbGUoXCJmZWNQYWNrZXRzUmVjZWl2ZWRcIiksdG90YWxfc2FtcGxlc19kdXJhdGlvbjp0aGlzLmNhbGN1bGF0ZURpZmZlcmVuY2VGb3JTYW1wbGUoXCJ0b3RhbFNhbXBsZXNEdXJhdGlvblwiKSx0b3RhbF9wYWNrZXRzX3JlY2VpdmVkOnRoaXMuY2FsY3VsYXRlRGlmZmVyZW5jZUZvclNhbXBsZShcInBhY2tldHNSZWNlaXZlZFwiKSx0b3RhbF9wYWNrZXRzX2xvc3Q6dGhpcy5jYWxjdWxhdGVEaWZmZXJlbmNlRm9yU2FtcGxlKFwicGFja2V0c0xvc3RcIil9KSl9fTt0aGlzLnNob3VsZENyZWF0ZVNhbXBsZT0oKT0+e2xldCB0PXRoaXMudGVtcFN0YXRzLmxlbmd0aCxpPXRoaXMudGVtcFN0YXRzW3QtMV0scj10aGlzLnRlbXBTdGF0c1t0LTJdO3JldHVybiB0PT09MTB8fFRyKGkscil8fGkua2luZD09PVwidmlkZW9cIiYmZ3IoaSxyKX07dGhpcy50b0FuYWx5dGljcz0oKT0+KHt0cmFja19pZDp0aGlzLnRyYWNrX2lkLHNzcmM6dGhpcy5zc3JjLHNvdXJjZTp0aGlzLnNvdXJjZSxyaWQ6dGhpcy5yaWQsc2FtcGxlczp0aGlzLnNhbXBsZXN9KX1jYWxjdWxhdGVBdmdBdlN5bmNGb3JTYW1wbGUoKXtsZXQgaT10aGlzLnRlbXBTdGF0cy5tYXAocj0+ci5hdlN5bmMpLmZpbHRlcihyPT5yIT09dm9pZCAwJiZyIT09UnQpO3JldHVybiBpLmxlbmd0aD09PTA/UnQ6aS5yZWR1Y2UoKHIscyk9PnIrcywwKS9pLmxlbmd0aH19O3ZhciBodD0odD0+KHRbdC5QdWJsaXNoPTBdPVwiUHVibGlzaFwiLHRbdC5TdWJzY3JpYmU9MV09XCJTdWJzY3JpYmVcIix0KSkoaHR8fHt9KTtpbXBvcnQqYXMgWXQgZnJvbVwic2RwLXRyYW5zZm9ybVwiO2Z1bmN0aW9uIFlhKGEsZSl7dmFyIHI7bGV0IHQ9WXQucGFyc2UoYS5zZHApO2lmKCEoKHI9dC5vcmlnaW4pIT1udWxsJiZyLnVzZXJuYW1lLnN0YXJ0c1dpdGgoXCJtb3ppbGxhXCIpKSlyZXR1cm4gYTtsZXQgaT1lP0FycmF5LmZyb20oZS52YWx1ZXMoKSk6W107cmV0dXJuIHQubWVkaWEuZm9yRWFjaChzPT57dmFyIGQsdSxwO2xldCBvPShkPXMubXNpZCk9PW51bGw/dm9pZCAwOmQuc3BsaXQoXCIgXCIpWzBdLG49KHU9aS5maW5kKGg9PmgudHlwZT09PXMudHlwZSYmaC5zdHJlYW1faWQ9PT1vKSk9PW51bGw/dm9pZCAwOnUudHJhY2tfaWQ7biYmKHMubXNpZD0ocD1zLm1zaWQpPT1udWxsP3ZvaWQgMDpwLnJlcGxhY2UoL1xccyguKykvLGAgJHtufWApKX0pLHt0eXBlOmEudHlwZSxzZHA6WXQud3JpdGUodCl9fWZ1bmN0aW9uIFhhKGEsZSl7dmFyIHM7aWYoIShhIT1udWxsJiZhLnNkcCl8fCFlKXJldHVybjtsZXQgaT1ZdC5wYXJzZShhLnNkcCkubWVkaWEuZmluZChvPT5oZShvLm1pZCkmJnBhcnNlSW50KG8ubWlkKT09PXBhcnNlSW50KGUpKTtyZXR1cm4ocz1pPT1udWxsP3ZvaWQgMDppLm1zaWQpPT1udWxsP3ZvaWQgMDpzLnNwbGl0KFwiIFwiKVsxXX1mdW5jdGlvbiBaYShhKXtyZXR1cm4gYS5zZHAuaW5jbHVkZXMoXCJ1c2VkdHg9MVwiKT9hOnt0eXBlOmEudHlwZSxzZHA6YS5zZHAucmVwbGFjZShcInVzZWluYmFuZGZlYz0xXCIsXCJ1c2VpbmJhbmRmZWM9MTt1c2VkdHg9MVwiKX19dmFyIENlPVwiW0hNU0Nvbm5lY3Rpb25dXCIsUWU9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmNhbmRpZGF0ZXM9bmV3IEFycmF5O3RoaXMucm9sZT1lLHRoaXMuc2lnbmFsPXR9Z2V0IGljZUNvbm5lY3Rpb25TdGF0ZSgpe3JldHVybiB0aGlzLm5hdGl2ZUNvbm5lY3Rpb24uaWNlQ29ubmVjdGlvblN0YXRlfWdldCBjb25uZWN0aW9uU3RhdGUoKXtyZXR1cm4gdGhpcy5uYXRpdmVDb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZX1nZXQgYWN0aW9uKCl7cmV0dXJuIHRoaXMucm9sZT09PTA/XCJQVUJMSVNIXCI6XCJTVUJTQ1JJQkVcIn1zZXRTZnVOb2RlSWQoZSl7dGhpcy5zZnVOb2RlSWQ9ZX1hZGRUcmFuc2NlaXZlcihlLHQpe3JldHVybiB0aGlzLm5hdGl2ZUNvbm5lY3Rpb24uYWRkVHJhbnNjZWl2ZXIoZSx0KX1jcmVhdGVPZmZlcihlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7bGV0IGk9eWllbGQgdGhpcy5uYXRpdmVDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKHQpO3JldHVybiBsLmQoQ2UsYFtyb2xlPSR7dGhpcy5yb2xlfV0gY3JlYXRlT2ZmZXIgb2ZmZXI9JHtKU09OLnN0cmluZ2lmeShpLG51bGwsMSl9YCksWmEoWWEoaSxlKSl9Y2F0Y2goaSl7dGhyb3cgUy5XZWJydGNFcnJvcnMuQ3JlYXRlT2ZmZXJGYWlsZWQodGhpcy5hY3Rpb24saS5tZXNzYWdlKX19KX1jcmVhdGVBbnN3ZXIoZT12b2lkIDApe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7bGV0IHQ9eWllbGQgdGhpcy5uYXRpdmVDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcihlKTtyZXR1cm4gbC5kKENlLGBbcm9sZT0ke3RoaXMucm9sZX1dIGNyZWF0ZUFuc3dlciBhbnN3ZXI9JHtKU09OLnN0cmluZ2lmeSh0LG51bGwsMSl9YCksdH1jYXRjaCh0KXt0aHJvdyBTLldlYnJ0Y0Vycm9ycy5DcmVhdGVBbnN3ZXJGYWlsZWQodGhpcy5hY3Rpb24sdC5tZXNzYWdlKX19KX1zZXRMb2NhbERlc2NyaXB0aW9uKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7bC5kKENlLGBbcm9sZT0ke3RoaXMucm9sZX1dIHNldExvY2FsRGVzY3JpcHRpb24gZGVzY3JpcHRpb249JHtKU09OLnN0cmluZ2lmeShlLG51bGwsMSl9YCkseWllbGQgdGhpcy5uYXRpdmVDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oZSl9Y2F0Y2godCl7dGhyb3cgUy5XZWJydGNFcnJvcnMuU2V0TG9jYWxEZXNjcmlwdGlvbkZhaWxlZCh0aGlzLmFjdGlvbix0Lm1lc3NhZ2UpfX0pfXNldFJlbW90ZURlc2NyaXB0aW9uKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0cnl7bC5kKENlLGBbcm9sZT0ke3RoaXMucm9sZX1dIHNldFJlbW90ZURlc2NyaXB0aW9uIGRlc2NyaXB0aW9uPSR7SlNPTi5zdHJpbmdpZnkoZSxudWxsLDEpfWApLHlpZWxkIHRoaXMubmF0aXZlQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihlKX1jYXRjaCh0KXt0aHJvdyBTLldlYnJ0Y0Vycm9ycy5TZXRSZW1vdGVEZXNjcmlwdGlvbkZhaWxlZCh0aGlzLmFjdGlvbix0Lm1lc3NhZ2UpfX0pfWFkZEljZUNhbmRpZGF0ZShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYodGhpcy5uYXRpdmVDb25uZWN0aW9uLnNpZ25hbGluZ1N0YXRlPT09XCJjbG9zZWRcIil7bC5kKENlLGBbcm9sZT0ke3RoaXMucm9sZX1dIGFkZEljZUNhbmRpZGF0ZSBzaWduYWxsaW5nIHN0YXRlIGNsb3NlZGApO3JldHVybn1sLmQoQ2UsYFtyb2xlPSR7dGhpcy5yb2xlfV0gYWRkSWNlQ2FuZGlkYXRlIGNhbmRpZGF0ZT0ke0pTT04uc3RyaW5naWZ5KGUsbnVsbCwxKX1gKSx5aWVsZCB0aGlzLm5hdGl2ZUNvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKGUpfSl9Z2V0IHJlbW90ZURlc2NyaXB0aW9uKCl7cmV0dXJuIHRoaXMubmF0aXZlQ29ubmVjdGlvbi5yZW1vdGVEZXNjcmlwdGlvbn1nZXRTZW5kZXJzKCl7cmV0dXJuIHRoaXMubmF0aXZlQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCl9aGFuZGxlU2VsZWN0ZWRJY2VDYW5kaWRhdGVQYWlycygpe3RyeXsodGhpcy5yb2xlPT09MD90aGlzLmdldFNlbmRlcnMoKTp0aGlzLmdldFJlY2VpdmVycygpKS5mb3JFYWNoKHQ9Pnt2YXIgcjtsZXQgaT0ocj10LnRyYWNrKT09bnVsbD92b2lkIDA6ci5raW5kO2lmKHQudHJhbnNwb3J0KXtsZXQgcz10LnRyYW5zcG9ydC5pY2VUcmFuc3BvcnQsbz0oKT0+e3R5cGVvZiBzLmdldFNlbGVjdGVkQ2FuZGlkYXRlUGFpcj09XCJmdW5jdGlvblwiJiYodGhpcy5zZWxlY3RlZENhbmRpZGF0ZVBhaXI9cy5nZXRTZWxlY3RlZENhbmRpZGF0ZVBhaXIoKSx0aGlzLnNlbGVjdGVkQ2FuZGlkYXRlUGFpciYmKHRoaXMub2JzZXJ2ZXIub25TZWxlY3RlZENhbmRpZGF0ZVBhaXJDaGFuZ2UodGhpcy5zZWxlY3RlZENhbmRpZGF0ZVBhaXIpLGwuZChDZSxgJHtodFt0aGlzLnJvbGVdfSBjb25uZWN0aW9uYCxgc2VsZWN0ZWQgJHtpfHxcInVua25vd25cIn0gY2FuZGlkYXRlIHBhaXJgLEpTT04uc3RyaW5naWZ5KHRoaXMuc2VsZWN0ZWRDYW5kaWRhdGVQYWlyLG51bGwsMikpKSl9O3R5cGVvZiBzLm9uc2VsZWN0ZWRjYW5kaWRhdGVwYWlyY2hhbmdlPT1cImZ1bmN0aW9uXCImJihzLm9uc2VsZWN0ZWRjYW5kaWRhdGVwYWlyY2hhbmdlPW8pLG8oKX19KX1jYXRjaChlKXtsLncoQ2UsYEVycm9yIGluIGxvZ2dpbmcgc2VsZWN0ZWQgaWNlIGNhbmRpZGF0ZSBwYWlyIGZvciAke2h0W3RoaXMucm9sZV19IGNvbm5lY3Rpb25gLGUpfX1yZW1vdmVUcmFjayhlKXt0aGlzLm5hdGl2ZUNvbm5lY3Rpb24uc2lnbmFsaW5nU3RhdGUhPT1cImNsb3NlZFwiJiZ0aGlzLm5hdGl2ZUNvbm5lY3Rpb24ucmVtb3ZlVHJhY2soZSl9c2V0TWF4Qml0cmF0ZUFuZEZyYW1lcmF0ZShlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgaT0odD09bnVsbD92b2lkIDA6dC5tYXhCaXRyYXRlKXx8ZS5zZXR0aW5ncy5tYXhCaXRyYXRlLHI9ZSBpbnN0YW5jZW9mIEcmJmUuc2V0dGluZ3MubWF4RnJhbWVyYXRlLHM9dGhpcy5nZXRTZW5kZXJzKCkuZmluZChvPT57dmFyIG47cmV0dXJuKChuPW89PW51bGw/dm9pZCAwOm8udHJhY2spPT1udWxsP3ZvaWQgMDpuLmlkKT09PWUuZ2V0VHJhY2tJREJlaW5nU2VudCgpfSk7aWYocyl7bGV0IG89cy5nZXRQYXJhbWV0ZXJzKCk7by5lbmNvZGluZ3MubGVuZ3RoPT09MSYmKGkmJihvLmVuY29kaW5nc1swXS5tYXhCaXRyYXRlPWkqMWUzKSxyJiYoby5lbmNvZGluZ3NbMF0ubWF4RnJhbWVyYXRlPXIpKSx5aWVsZCBzLnNldFBhcmFtZXRlcnMobyl9ZWxzZSBsLncoQ2UsYG5vIHNlbmRlciBmb3VuZCB0byBzZXRNYXhCaXRyYXRlIGZvciB0cmFjayAtICR7ZS50cmFja0lkfSwgc2VudFRyYWNrSWQgLSAke2UuZ2V0VHJhY2tJREJlaW5nU2VudCgpfWApfSl9Z2V0U3RhdHMoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMubmF0aXZlQ29ubmVjdGlvbi5nZXRTdGF0cygpfSl9Y2xvc2UoKXt0aGlzLm5hdGl2ZUNvbm5lY3Rpb24uY2xvc2UoKX1nZXRSZWNlaXZlcnMoKXtyZXR1cm4gdGhpcy5uYXRpdmVDb25uZWN0aW9uLmdldFJlY2VpdmVycygpfX07dmFyIFh0PWNsYXNzIGV4dGVuZHMgUWV7Y29uc3RydWN0b3IodCxpLHIpe3N1cGVyKDAsdCk7dGhpcy5UQUc9XCJbSE1TUHVibGlzaENvbm5lY3Rpb25dXCI7dGhpcy5vYnNlcnZlcj1yLHRoaXMubmF0aXZlQ29ubmVjdGlvbj1uZXcgUlRDUGVlckNvbm5lY3Rpb24oaSksdGhpcy5jaGFubmVsPXRoaXMubmF0aXZlQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCh2aSx7cHJvdG9jb2w6XCJTQ1RQXCJ9KSx0aGlzLmNoYW5uZWwub25lcnJvcj1zPT5sLmUodGhpcy5UQUcsYHB1Ymxpc2ggZGF0YSBjaGFubmVsIG9uZXJyb3IgJHtzfWAscyksdGhpcy5uYXRpdmVDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlPSh7Y2FuZGlkYXRlOnN9KT0+e3MmJih0aGlzLm9ic2VydmVyLm9uSWNlQ2FuZGlkYXRlKHMpLHQudHJpY2tsZSh0aGlzLnJvbGUscykpfSx0aGlzLm5hdGl2ZUNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9KCk9Pnt0aGlzLm9ic2VydmVyLm9uSWNlQ29ubmVjdGlvbkNoYW5nZSh0aGlzLm5hdGl2ZUNvbm5lY3Rpb24uaWNlQ29ubmVjdGlvblN0YXRlKX0sdGhpcy5uYXRpdmVDb25uZWN0aW9uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlPSgpPT57dGhpcy5vYnNlcnZlci5vbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZSh0aGlzLm5hdGl2ZUNvbm5lY3Rpb24uY29ubmVjdGlvblN0YXRlKSx0aGlzLm5hdGl2ZUNvbm5lY3Rpb24uc2N0cCYmKHRoaXMubmF0aXZlQ29ubmVjdGlvbi5zY3RwLnRyYW5zcG9ydC5vbnN0YXRlY2hhbmdlPSgpPT57dmFyIHM7dGhpcy5vYnNlcnZlci5vbkRUTFNUcmFuc3BvcnRTdGF0ZUNoYW5nZSgocz10aGlzLm5hdGl2ZUNvbm5lY3Rpb24uc2N0cCk9PW51bGw/dm9pZCAwOnMudHJhbnNwb3J0LnN0YXRlKX0sdGhpcy5uYXRpdmVDb25uZWN0aW9uLnNjdHAudHJhbnNwb3J0Lm9uZXJyb3I9cz0+e3ZhciBvO3RoaXMub2JzZXJ2ZXIub25EVExTVHJhbnNwb3J0RXJyb3IobmV3IEVycm9yKChvPXM9PW51bGw/dm9pZCAwOnMuZXJyb3IpPT1udWxsP3ZvaWQgMDpvLmVycm9yRGV0YWlsKXx8XCJEVExTIFRyYW5zcG9ydCBmYWlsZWRcIil9KX19Y2xvc2UoKXtzdXBlci5jbG9zZSgpLHRoaXMuY2hhbm5lbC5jbG9zZSgpfWluaXRBZnRlckpvaW4oKXt0aGlzLm5hdGl2ZUNvbm5lY3Rpb24ub25uZWdvdGlhdGlvbm5lZWRlZD0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bC5kKHRoaXMuVEFHLFwib25uZWdvdGlhdGlvbm5lZWRlZFwiKSx5aWVsZCB0aGlzLm9ic2VydmVyLm9uUmVuZWdvdGlhdGlvbk5lZWRlZCgpfSl9fTtpbXBvcnQgRW4gZnJvbVwiZXZlbnRlbWl0dGVyMlwiO2ltcG9ydHt2NCBhcyBQbn1mcm9tXCJ1dWlkXCI7dmFyIFp0PWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpPVwiXCIpe3RoaXMuVEFHPVwiW0hNU0RhdGFDaGFubmVsXVwiO3RoaXMubmF0aXZlQ2hhbm5lbD1lLHRoaXMub2JzZXJ2ZXI9dCx0aGlzLm1ldGFkYXRhPWksZS5vbm1lc3NhZ2U9cj0+e3RoaXMub2JzZXJ2ZXIub25NZXNzYWdlKHIuZGF0YSl9fWdldCBpZCgpe3JldHVybiB0aGlzLm5hdGl2ZUNoYW5uZWwuaWR9Z2V0IGxhYmVsKCl7cmV0dXJuIHRoaXMubmF0aXZlQ2hhbm5lbC5sYWJlbH1nZXQgcmVhZHlTdGF0ZSgpe3JldHVybiB0aGlzLm5hdGl2ZUNoYW5uZWwucmVhZHlTdGF0ZX1zZW5kKGUpe2wuZCh0aGlzLlRBRyxgWyR7dGhpcy5tZXRhZGF0YX1dIFNlbmRpbmcgW3NpemU9JHtlLmxlbmd0aH1dIG1lc3NhZ2U9JHtlfWApLHRoaXMubmF0aXZlQ2hhbm5lbC5zZW5kKGUpfWNsb3NlKCl7dGhpcy5uYXRpdmVDaGFubmVsLmNsb3NlKCl9fTt2YXIgZWk9Y2xhc3MgZXh0ZW5kcyBRZXtjb25zdHJ1Y3Rvcih0LGkscixzKXtzdXBlcigxLHQpO3RoaXMuaXNGbGFnRW5hYmxlZD1yO3RoaXMuVEFHPVwiW0hNU1N1YnNjcmliZUNvbm5lY3Rpb25dXCI7dGhpcy5yZW1vdGVTdHJlYW1zPW5ldyBNYXA7dGhpcy5NQVhfUkVUUklFUz0zO3RoaXMucGVuZGluZ01lc3NhZ2VRdWV1ZT1bXTt0aGlzLmV2ZW50RW1pdHRlcj1uZXcgRW4oe21heExpc3RlbmVyczo2MH0pO3RoaXMuaGFuZGxlUGVuZGluZ0FwaU1lc3NhZ2VzPSgpPT57dGhpcy5ldmVudEVtaXR0ZXIuZW1pdChcIm9wZW5cIiwhMCksdGhpcy5wZW5kaW5nTWVzc2FnZVF1ZXVlLmxlbmd0aD4wJiYobC5kKHRoaXMuVEFHLFwiRm91bmQgcGVuZGluZyBtZXNzYWdlIHF1ZXVlLCBzZW5kaW5nIG1lc3NhZ2VzXCIpLHRoaXMucGVuZGluZ01lc3NhZ2VRdWV1ZS5mb3JFYWNoKHQ9PnRoaXMuc2VuZE92ZXJBcGlEYXRhQ2hhbm5lbCh0KSksdGhpcy5wZW5kaW5nTWVzc2FnZVF1ZXVlLmxlbmd0aD0wKX07dGhpcy5zZW5kTWVzc2FnZT0odCxpKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHM7KChzPXRoaXMuYXBpQ2hhbm5lbCk9PW51bGw/dm9pZCAwOnMucmVhZHlTdGF0ZSkhPT1cIm9wZW5cIiYmKHlpZWxkIHRoaXMuZXZlbnRFbWl0dGVyLndhaXRGb3IoXCJvcGVuXCIpKTtsZXQgcjtmb3IobGV0IG89MDtvPHRoaXMuTUFYX1JFVFJJRVM7bysrKXt0aGlzLmFwaUNoYW5uZWwuc2VuZCh0KSxyPXlpZWxkIHRoaXMud2FpdEZvclJlc3BvbnNlKGkpO2xldCBuPXIuZXJyb3I7aWYobil7aWYobi5jb2RlPT09NDA0KXtsLmQodGhpcy5UQUcsYFRyYWNrIG5vdCBmb3VuZCAke2l9YCx7cmVxdWVzdDp0LHRyeTpvKzEsZXJyb3I6bn0pO2JyZWFrfWlmKGwuZCh0aGlzLlRBRyxgRmFpbGVkIHNlbmRpbmcgJHtpfWAse3JlcXVlc3Q6dCx0cnk6bysxLGVycm9yOm59KSwhKG4uY29kZS8xMDA9PT01fHxuLmNvZGU9PT00MjkpKXRocm93IEVycm9yKGBjb2RlPSR7bi5jb2RlfSwgbWVzc2FnZT0ke24ubWVzc2FnZX1gKTtsZXQgdT0oMitNYXRoLnJhbmRvbSgpKjIpKjFlMzt5aWVsZCBPZSh1KX1lbHNlIGJyZWFrfXJldHVybiByfSk7dGhpcy53YWl0Rm9yUmVzcG9uc2U9dD0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGk9eWllbGQgdGhpcy5ldmVudEVtaXR0ZXIud2FpdEZvcihcIm1lc3NhZ2VcIixmdW5jdGlvbihzKXtyZXR1cm4gcy5pbmNsdWRlcyh0KX0pLHI9SlNPTi5wYXJzZShpWzBdKTtyZXR1cm4gbC5kKHRoaXMuVEFHLGByZXNwb25zZSBmb3IgJHt0fSAtYCxKU09OLnN0cmluZ2lmeShyLG51bGwsMikpLHJ9KTt0aGlzLm9ic2VydmVyPXMsdGhpcy5uYXRpdmVDb25uZWN0aW9uPW5ldyBSVENQZWVyQ29ubmVjdGlvbihpKSx0aGlzLmluaXROYXRpdmVDb25uZWN0aW9uQ2FsbGJhY2tzKCl9aW5pdE5hdGl2ZUNvbm5lY3Rpb25DYWxsYmFja3MoKXt0aGlzLm5hdGl2ZUNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9KCk9Pnt0aGlzLm9ic2VydmVyLm9uSWNlQ29ubmVjdGlvbkNoYW5nZSh0aGlzLm5hdGl2ZUNvbm5lY3Rpb24uaWNlQ29ubmVjdGlvblN0YXRlKX0sdGhpcy5uYXRpdmVDb25uZWN0aW9uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlPSgpPT57dGhpcy5vYnNlcnZlci5vbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZSh0aGlzLm5hdGl2ZUNvbm5lY3Rpb24uY29ubmVjdGlvblN0YXRlKX0sdGhpcy5uYXRpdmVDb25uZWN0aW9uLm9uZGF0YWNoYW5uZWw9dD0+e3QuY2hhbm5lbC5sYWJlbD09PXZpJiYodGhpcy5hcGlDaGFubmVsPW5ldyBadCh0LmNoYW5uZWwse29uTWVzc2FnZTppPT57dGhpcy5ldmVudEVtaXR0ZXIuZW1pdChcIm1lc3NhZ2VcIixpKSx0aGlzLm9ic2VydmVyLm9uQXBpQ2hhbm5lbE1lc3NhZ2UoaSl9fSxgcm9sZT0ke3RoaXMucm9sZX1gKSx0LmNoYW5uZWwub25vcGVuPXRoaXMuaGFuZGxlUGVuZGluZ0FwaU1lc3NhZ2VzKX0sdGhpcy5uYXRpdmVDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlPXQ9Pnt0LmNhbmRpZGF0ZSE9PW51bGwmJih0aGlzLm9ic2VydmVyLm9uSWNlQ2FuZGlkYXRlKHQuY2FuZGlkYXRlKSx0aGlzLnNpZ25hbC50cmlja2xlKHRoaXMucm9sZSx0LmNhbmRpZGF0ZSkpfSx0aGlzLm5hdGl2ZUNvbm5lY3Rpb24ub250cmFjaz10PT57dmFyIHA7bGV0IGk9dC5zdHJlYW1zWzBdLHI9aS5pZDtpZighdGhpcy5yZW1vdGVTdHJlYW1zLmhhcyhyKSl7bGV0IGg9bmV3IFBlKGksdGhpcyk7dGhpcy5yZW1vdGVTdHJlYW1zLnNldChyLGgpfWkuYWRkRXZlbnRMaXN0ZW5lcihcInJlbW92ZXRyYWNrXCIsaD0+e2lmKGgudHJhY2suaWQhPT10LnRyYWNrLmlkKXJldHVybjtsZXQgVD1zLnRyYWNrcy5maW5kSW5kZXgoZz0+e3ZhciBmO3JldHVybiBnLm5hdGl2ZVRyYWNrLmlkPT09aC50cmFjay5pZCYmdC50cmFuc2NlaXZlci5taWQ9PT0oKGY9Zy50cmFuc2NlaXZlcik9PW51bGw/dm9pZCAwOmYubWlkKX0pO2lmKFQ+PTApe2xldCBnPXMudHJhY2tzW1RdO3RoaXMub2JzZXJ2ZXIub25UcmFja1JlbW92ZShnKSxzLnRyYWNrcy5zcGxpY2UoVCwxKSxzLnRyYWNrcy5sZW5ndGg9PT0wJiZ0aGlzLnJlbW90ZVN0cmVhbXMuZGVsZXRlKHIpfX0pO2xldCBzPXRoaXMucmVtb3RlU3RyZWFtcy5nZXQociksbz10LnRyYWNrLmtpbmQ9PT1cImF1ZGlvXCIsbj1vP2llOk8sZD1vP25ldyBuKHMsdC50cmFjayk6bmV3IG4ocyx0LnRyYWNrLHZvaWQgMCx0aGlzLmlzRmxhZ0VuYWJsZWQoXCJkaXNhYmxlTm9uZUxheWVyUmVxdWVzdFwiKSk7dC50cmFjay5raW5kPT09XCJ2aWRlb1wiJiZzLnNldFZpZGVvTGF5ZXJMb2NhbGx5KFwibm9uZVwiLFwiYWRkVHJhY2tcIixcInN1YnNjcmliZUNvbm5lY3Rpb25cIiksZC50cmFuc2NlaXZlcj10LnRyYW5zY2VpdmVyO2xldCB1PVhhKHRoaXMucmVtb3RlRGVzY3JpcHRpb24sKHA9dC50cmFuc2NlaXZlcik9PW51bGw/dm9pZCAwOnAubWlkKTt1JiZkLnNldFNkcFRyYWNrSWQodSkscy50cmFja3MucHVzaChkKSx0aGlzLm9ic2VydmVyLm9uVHJhY2tBZGQoZCl9fXNlbmRPdmVyQXBpRGF0YUNoYW5uZWwodCl7dGhpcy5hcGlDaGFubmVsJiZ0aGlzLmFwaUNoYW5uZWwucmVhZHlTdGF0ZT09PVwib3BlblwiP3RoaXMuYXBpQ2hhbm5lbC5zZW5kKHQpOihsLncodGhpcy5UQUcsYEFQSSBEYXRhIGNoYW5uZWwgbm90ICR7dGhpcy5hcGlDaGFubmVsP1wib3BlblwiOlwicHJlc2VudFwifSwgcXVldWVpbmdgLHQpLHRoaXMucGVuZGluZ01lc3NhZ2VRdWV1ZS5wdXNoKHQpKX1zZW5kT3ZlckFwaURhdGFDaGFubmVsV2l0aFJlc3BvbnNlKHQsaSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCByPVBuKCk7aWYodC5tZXRob2Q9PT1cInByZWZlci12aWRlby10cmFjay1zdGF0ZVwiJiZ0aGlzLmlzRmxhZ0VuYWJsZWQoXCJkaXNhYmxlVmlkZW9UcmFja0F1dG9VbnN1YnNjcmliZVwiKSYmdC5wYXJhbXMubWF4X3NwYXRpYWxfbGF5ZXI9PT1cIm5vbmVcIilyZXR1cm4gbC5kKHRoaXMuVEFHLFwidmlkZW8gYXV0byB1bnN1YnNjcmliZSBpcyBkaXNhYmxlZCwgcmVxdWVzdCBpcyBpZ25vcmVkXCIpLHtpZDpyfTtsZXQgcz1KU09OLnN0cmluZ2lmeShtKHtpZDppfHxyLGpzb25ycGM6XCIyLjBcIn0sdCkpO3JldHVybiB0aGlzLnNlbmRNZXNzYWdlKHMscil9KX1jbG9zZSgpe3ZhciB0O3N1cGVyLmNsb3NlKCksKHQ9dGhpcy5hcGlDaGFubmVsKT09bnVsbHx8dC5jbG9zZSgpfX07dmFyIGVvPShhLGUpPT4hZXx8ZS5sZW5ndGg9PT0wP2E6ZS5tYXAoaT0+KHt1cmxzOmkudXJscyxjcmVkZW50aWFsVHlwZTpcInBhc3N3b3JkXCIsY3JlZGVudGlhbDppLnBhc3N3b3JkLHVzZXJuYW1lOmkudXNlck5hbWV9KSk7dmFyIHZyPVwiW0luaXRTZXJ2aWNlXVwiLHRpPWNsYXNze3N0YXRpYyBoYW5kbGVFcnJvcihlLHQpe3N3aXRjaChlLnN0YXR1cyl7Y2FzZSA0MDQ6dGhyb3cgUy5BUElFcnJvcnMuRW5kcG9pbnRVbnJlYWNoYWJsZShcIklOSVRcIix0Lm1lc3NhZ2V8fGUuc3RhdHVzVGV4dCk7Y2FzZSAyMDA6YnJlYWs7ZGVmYXVsdDp0aHJvdyBTLkFQSUVycm9ycy5TZXJ2ZXJFcnJvcnModC5jb2RlfHxlLnN0YXR1cyxcIklOSVRcIix0Lm1lc3NhZ2V8fChlPT1udWxsP3ZvaWQgMDplLnN0YXR1c1RleHQpKX19c3RhdGljIGZldGNoSW5pdENvbmZpZyhuKXtyZXR1cm4gYyh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbiooe3Rva2VuOmUscGVlcklkOnQsdXNlckFnZW50OmksaW5pdEVuZHBvaW50OnI9XCJodHRwczovL3Byb2QtaW5pdC4xMDBtcy5saXZlXCIscmVnaW9uOnM9XCJcIixpY2VTZXJ2ZXJzOm99KXtsLmQodnIsYGZldGNoSW5pdENvbmZpZzogaW5pdEVuZHBvaW50PSR7cn0gdG9rZW49JHtlfSBwZWVySWQ9JHt0fSByZWdpb249JHtzfSBgKTtsZXQgZD1ibihyLHQsaSxzKTt0cnl7bGV0IHU9eWllbGQgZmV0Y2goZCx7aGVhZGVyczp7QXV0aG9yaXphdGlvbjpgQmVhcmVyICR7ZX1gfX0pO3RyeXtsZXQgcD15aWVsZCB1LmNsb25lKCkuanNvbigpO3JldHVybiB0aGlzLmhhbmRsZUVycm9yKHUscCksbC5kKHZyLGBjb25maWcgaXMgJHtKU09OLnN0cmluZ2lmeShwLG51bGwsMil9YCksQW4ocCxvKX1jYXRjaChwKXtsZXQgaD15aWVsZCB1LnRleHQoKTt0aHJvdyBsLmUodnIsXCJqc29uIGVycm9yXCIscC5tZXNzYWdlLGgpLHAgaW5zdGFuY2VvZiBrP3A6Uy5BUElFcnJvcnMuU2VydmVyRXJyb3JzKHUuc3RhdHVzLFwiSU5JVFwiLHAubWVzc2FnZSl9fWNhdGNoKHUpe2xldCBwPXU7dGhyb3dbXCJGYWlsZWQgdG8gZmV0Y2hcIixcIk5ldHdvcmtFcnJvclwiLFwiRUNPTk5SRVNFVFwiXS5zb21lKGg9PnAubWVzc2FnZS5pbmNsdWRlcyhoKSk/Uy5BUElFcnJvcnMuRW5kcG9pbnRVbnJlYWNoYWJsZShcIklOSVRcIixwLm1lc3NhZ2UpOnB9fSl9fTtmdW5jdGlvbiBibihhLGUsdCxpKXt0cnl7bGV0IHI9bmV3IFVSTChcIi9pbml0XCIsYSk7cmV0dXJuIGkmJmkudHJpbSgpLmxlbmd0aD4wJiZyLnNlYXJjaFBhcmFtcy5zZXQoXCJyZWdpb25cIixpLnRyaW0oKSksci5zZWFyY2hQYXJhbXMuc2V0KFwicGVlcl9pZFwiLGUpLHIuc2VhcmNoUGFyYW1zLnNldChcInVzZXJfYWdlbnRfdjJcIix0KSxyLnRvU3RyaW5nKCl9Y2F0Y2gocil7bGV0IHM9cjt0aHJvdyBsLmUodnIscy5uYW1lLHMubWVzc2FnZSksc319ZnVuY3Rpb24gQW4oYSxlKXt2YXIgdDtyZXR1cm4gTShtKHt9LGEpLHtydGNDb25maWd1cmF0aW9uOk0obSh7fSxhLnJ0Y0NvbmZpZ3VyYXRpb24pLHtpY2VTZXJ2ZXJzOmVvKCh0PWEucnRjQ29uZmlndXJhdGlvbik9PW51bGw/dm9pZCAwOnQuaWNlX3NlcnZlcnMsZSl9KX0pfWltcG9ydHt2NCBhcyBJbn1mcm9tXCJ1dWlkXCI7dmFyIGlpPWNsYXNze2NvbnN0cnVjdG9yKGUpe3RoaXMuVEFHPVwiW1NJR05BTF06IFwiO3RoaXMucG9uZ1Jlc3BvbnNlVGltZXM9bmV3IE5lKDUpO3RoaXMuaXNKb2luQ29tcGxldGVkPSExO3RoaXMucGVuZGluZ1RyaWNrbGU9W107dGhpcy5zb2NrZXQ9bnVsbDt0aGlzLmNhbGxiYWNrcz1uZXcgTWFwO3RoaXMuX2lzQ29ubmVjdGVkPSExO3RoaXMuaWQ9MDt0aGlzLm9uQ2xvc2VIYW5kbGVyPSgpPT57fTt0aGlzLnJlc29sdmVQaW5nT25BbnlSZXNwb25zZT0oKT0+e3RoaXMuY2FsbGJhY2tzLmZvckVhY2goKGUsdCk9Pnt2YXIgaTsoKGk9ZS5tZXRhZGF0YSk9PW51bGw/dm9pZCAwOmkubWV0aG9kKT09PVwicGluZ1wiJiYoZS5yZXNvbHZlKHt0aW1lc3RhbXA6RGF0ZS5ub3coKX0pLHRoaXMuY2FsbGJhY2tzLmRlbGV0ZSh0KSl9KX07dGhpcy5vZmZsaW5lTGlzdGVuZXI9KCk9PntsLmQodGhpcy5UQUcsXCJXaW5kb3cgbmV0d29yayBvZmZsaW5lXCIpLHRoaXMuc2V0SXNDb25uZWN0ZWQoITEsXCJXaW5kb3cgbmV0d29yayBvZmZsaW5lXCIpfTt0aGlzLm9ubGluZUxpc3RlbmVyPSgpPT57bC5kKHRoaXMuVEFHLFwiV2luZG93IG5ldHdvcmsgb25saW5lXCIpLHRoaXMub2JzZXJ2ZXIub25OZXR3b3JrT25saW5lKCl9O3RoaXMub2JzZXJ2ZXI9ZSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIix0aGlzLm9mZmxpbmVMaXN0ZW5lciksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIix0aGlzLm9ubGluZUxpc3RlbmVyKSx0aGlzLm9uTWVzc2FnZUhhbmRsZXI9dGhpcy5vbk1lc3NhZ2VIYW5kbGVyLmJpbmQodGhpcyl9Z2V0IGlzQ29ubmVjdGVkKCl7cmV0dXJuIHRoaXMuX2lzQ29ubmVjdGVkfXNldFNmdU5vZGVJZChlKXt0aGlzLnNmdU5vZGVJZD1lfXNldElzQ29ubmVjdGVkKGUsdD1cIlwiKXtsLmQodGhpcy5UQUcsYGlzQ29ubmVjdGVkIHNldCBpZDogJHt0aGlzLmlkfSwgb2xkVmFsdWU6ICR7dGhpcy5faXNDb25uZWN0ZWR9LCBuZXdWYWx1ZTogJHtlfWApLHRoaXMuX2lzQ29ubmVjdGVkIT09ZSYmKHRoaXMuX2lzQ29ubmVjdGVkJiYhZT8odGhpcy5faXNDb25uZWN0ZWQ9ZSx0aGlzLnJlamVjdFBlbmRpbmdDYWxscyh0KSx0aGlzLm9ic2VydmVyLm9uT2ZmbGluZSh0KSk6IXRoaXMuX2lzQ29ubmVjdGVkJiZlJiYodGhpcy5faXNDb25uZWN0ZWQ9ZSx0aGlzLm9ic2VydmVyLm9uT25saW5lKCkpKX1nZXRQb25nUmVzcG9uc2VUaW1lcygpe3JldHVybiB0aGlzLnBvbmdSZXNwb25zZVRpbWVzLnRvTGlzdCgpfWludGVybmFsQ2FsbChlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcztsZXQgaT1JbigpLHI9e21ldGhvZDplLHBhcmFtczp0LGlkOmksanNvbnJwYzpcIjIuMFwifTsocz10aGlzLnNvY2tldCk9PW51bGx8fHMuc2VuZChKU09OLnN0cmluZ2lmeShyKSk7dHJ5e3JldHVybiB5aWVsZCBuZXcgUHJvbWlzZSgobixkKT0+e3RoaXMuY2FsbGJhY2tzLnNldChpLHtyZXNvbHZlOm4scmVqZWN0OmQsbWV0YWRhdGE6e21ldGhvZDplfX0pfSl9Y2F0Y2gobyl7aWYobyBpbnN0YW5jZW9mIGspdGhyb3cgbztsZXQgbj1vO3Rocm93IFMuV2Vic29ja2V0TWV0aG9kRXJyb3JzLlNlcnZlckVycm9ycyhOdW1iZXIobi5jb2RlKSxicihlKSxuLm1lc3NhZ2UpfX0pfW5vdGlmeShlLHQpe3ZhciByLHM7bGV0IGk9e21ldGhvZDplLHBhcmFtczp0fTsoKHI9dGhpcy5zb2NrZXQpPT1udWxsP3ZvaWQgMDpyLnJlYWR5U3RhdGUpPT09V2ViU29ja2V0Lk9QRU4mJigocz10aGlzLnNvY2tldCk9PW51bGx8fHMuc2VuZChKU09OLnN0cmluZ2lmeShpKSkpfW9wZW4oZSl7cmV0dXJuIG5ldyBQcm9taXNlKCh0LGkpPT57bGV0IHI9ITE7dGhpcy5zb2NrZXQmJih0aGlzLnNvY2tldC5jbG9zZSgpLHRoaXMuc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLHRoaXMub25DbG9zZUhhbmRsZXIpLHRoaXMuc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdGhpcy5vbk1lc3NhZ2VIYW5kbGVyKSksdGhpcy5zb2NrZXQ9bmV3IFdlYlNvY2tldChlKTtsZXQgcz0oKT0+e2wuZSh0aGlzLlRBRyxcIkVycm9yIGZyb20gd2Vic29ja2V0XCIpLHI9ITAsaShTLldlYlNvY2tldENvbm5lY3Rpb25FcnJvcnMuRmFpbGVkVG9Db25uZWN0KFwiSk9JTlwiLFwiRXJyb3Igb3BlbmluZyB3ZWJzb2NrZXQgY29ubmVjdGlvblwiKSl9O3RoaXMub25DbG9zZUhhbmRsZXI9bj0+e2wudyhgV2Vic29ja2V0IGNsb3NlZCBjb2RlPSR7bi5jb2RlfWApLHI/dGhpcy5zZXRJc0Nvbm5lY3RlZCghMSxgY29kZTogJHtuLmNvZGV9JHtuLmNvZGUhPT0xZTM/XCIsIHVuZXhwZWN0ZWQgd2Vic29ja2V0IGNsb3NlXCI6XCJcIn1gKToocj0hMCxpKFMuV2ViU29ja2V0Q29ubmVjdGlvbkVycm9ycy5BYm5vcm1hbENsb3NlKFwiSk9JTlwiLGBFcnJvciBvcGVuaW5nIHdlYnNvY2tldCBjb25uZWN0aW9uIC0gd2Vic29ja2V0IGNsb3NlZCB1bmV4cGVjdGVkbHkgd2l0aCBjb2RlPSR7bi5jb2RlfWApKSl9LHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHMpO2xldCBvPSgpPT57dmFyIG4sZDtyPSEwLHQoKSx0aGlzLnNldElzQ29ubmVjdGVkKCEwKSx0aGlzLmlkKyssKG49dGhpcy5zb2NrZXQpPT1udWxsfHxuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsbyksKGQ9dGhpcy5zb2NrZXQpPT1udWxsfHxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLHMpLHRoaXMucGluZ1BvbmdMb29wKHRoaXMuaWQpfTt0aGlzLnNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLG8pLHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLHRoaXMub25DbG9zZUhhbmRsZXIpLHRoaXMuc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdGhpcy5vbk1lc3NhZ2VIYW5kbGVyKX0pfWNsb3NlKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3dpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLHRoaXMub2ZmbGluZUxpc3RlbmVyKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLHRoaXMub25saW5lTGlzdGVuZXIpLHRoaXMuc29ja2V0Pyh0aGlzLnNvY2tldC5jbG9zZSgxZTMsXCJOb3JtYWwgQ2xvc2VcIiksdGhpcy5zZXRJc0Nvbm5lY3RlZCghMSxcImNvZGU6IDEwMDAsIG5vcm1hbCB3ZWJzb2NrZXQgY2xvc2VcIiksdGhpcy5zb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsdGhpcy5vbkNsb3NlSGFuZGxlciksdGhpcy5zb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIix0aGlzLm9uTWVzc2FnZUhhbmRsZXIpKTp0aGlzLnNldElzQ29ubmVjdGVkKCExLFwid2Vic29ja2V0IG5vdCBjb25uZWN0ZWQgeWV0XCIpfSl9am9pbihlLHQsaSxyLHMsbyxuKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYoIXRoaXMuaXNDb25uZWN0ZWQpdGhyb3cgUy5XZWJTb2NrZXRDb25uZWN0aW9uRXJyb3JzLldlYlNvY2tldENvbm5lY3Rpb25Mb3N0KFwiSk9JTlwiLFwiRmFpbGVkIHRvIHNlbmQgam9pbiBvdmVyIFdTIGNvbm5lY3Rpb25cIik7bGV0IGQ9e25hbWU6ZSxkaXNhYmxlVmlkQXV0b1N1YjppLGRhdGE6dCxvZmZlcjpuLHNlcnZlcl9zdWJfZGVncmFkZTpyLHNpbXVsY2FzdDpzLG9uRGVtYW5kVHJhY2tzOm99LHU9eWllbGQgdGhpcy5pbnRlcm5hbENhbGwoXCJqb2luXCIsZCk7cmV0dXJuIHRoaXMuaXNKb2luQ29tcGxldGVkPSEwLHRoaXMucGVuZGluZ1RyaWNrbGUuZm9yRWFjaCgoe3RhcmdldDpwLGNhbmRpZGF0ZTpofSk9PnRoaXMudHJpY2tsZShwLGgpKSx0aGlzLnBlbmRpbmdUcmlja2xlLmxlbmd0aD0wLGwuZCh0aGlzLlRBRyxgam9pbjogcmVzcG9uc2U9JHtKU09OLnN0cmluZ2lmeSh1LG51bGwsMSl9YCksdX0pfXRyaWNrbGUoZSx0KXt0aGlzLmlzSm9pbkNvbXBsZXRlZD90aGlzLm5vdGlmeShcInRyaWNrbGVcIix7dGFyZ2V0OmUsY2FuZGlkYXRlOnQsc2Z1X25vZGVfaWQ6dGhpcy5zZnVOb2RlSWR9KTp0aGlzLnBlbmRpbmdUcmlja2xlLnB1c2goe3RhcmdldDplLGNhbmRpZGF0ZTp0fSl9b2ZmZXIoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuY2FsbChcIm9mZmVyXCIse2Rlc2M6ZSx0cmFja3M6T2JqZWN0LmZyb21FbnRyaWVzKHQpLHNmdV9ub2RlX2lkOnRoaXMuc2Z1Tm9kZUlkfSl9KX1hbnN3ZXIoZSl7dGhpcy5ub3RpZnkoXCJhbnN3ZXJcIix7ZGVzYzplLHNmdV9ub2RlX2lkOnRoaXMuc2Z1Tm9kZUlkfSl9dHJhY2tVcGRhdGUoZSl7dGhpcy5ub3RpZnkoXCJ0cmFjay11cGRhdGVcIix7dHJhY2tzOk9iamVjdC5mcm9tRW50cmllcyhlKX0pfWJyb2FkY2FzdChlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuY2FsbChcImJyb2FkY2FzdFwiLGUpfSl9bGVhdmUoZSl7dGhpcy5ub3RpZnkoXCJsZWF2ZVwiLHtjbGllbnRfcmVhc29uOmV9KX1lbmRSb29tKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuY2FsbChcImVuZC1yb29tXCIse2xvY2s6ZSxyZWFzb246dH0pfSl9c2VuZEV2ZW50KGUpe2lmKCF0aGlzLmlzQ29ubmVjdGVkKXRocm93IEVycm9yKGAke3RoaXMuVEFHfSBub3QgY29ubmVjdGVkLiBDb3VsZCBub3Qgc2VuZCBldmVudCAke2V9YCk7dGhpcy5ub3RpZnkoXCJhbmFseXRpY3NcIixlLnRvU2lnbmFsUGFyYW1zKCkpfXBpbmcoZSl7bGV0IHQ9RGF0ZS5ub3coKSxpPW5ldyBQcm9taXNlKHM9PntzZXRUaW1lb3V0KCgpPT57cyhEYXRlLm5vdygpLXQpfSxlKzEpfSkscj10aGlzLmludGVybmFsQ2FsbChcInBpbmdcIix7dGltZXN0YW1wOnR9KS50aGVuKCgpPT5EYXRlLm5vdygpLXQpLmNhdGNoKCgpPT5EYXRlLm5vdygpLXQpO3JldHVybiBQcm9taXNlLnJhY2UoW2kscl0pfXJlcXVlc3RSb2xlQ2hhbmdlKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmNhbGwoXCJyb2xlLWNoYW5nZS1yZXF1ZXN0XCIsZSl9KX1yZXF1ZXN0QnVsa1JvbGVDaGFuZ2UoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuY2FsbChcInJvbGUtY2hhbmdlLXJlcXVlc3RcIixlKX0pfWFjY2VwdFJvbGVDaGFuZ2VSZXF1ZXN0KGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmNhbGwoXCJyb2xlLWNoYW5nZVwiLGUpfSl9cmVxdWVzdFRyYWNrU3RhdGVDaGFuZ2UoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuY2FsbChcInRyYWNrLXVwZGF0ZS1yZXF1ZXN0XCIsZSl9KX1yZXF1ZXN0TXVsdGlUcmFja1N0YXRlQ2hhbmdlKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmNhbGwoXCJjaGFuZ2UtdHJhY2stbXV0ZS1zdGF0ZS1yZXF1ZXN0XCIsZSl9KX1yZW1vdmVQZWVyKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmNhbGwoXCJwZWVyLWxlYXZlLXJlcXVlc3RcIixlKX0pfXN0YXJ0UlRNUE9yUmVjb3JkaW5nKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmNhbGwoXCJydG1wLXN0YXJ0XCIsbSh7fSxlKSl9KX1zdG9wUlRNUEFuZFJlY29yZGluZygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmNhbGwoXCJydG1wLXN0b3BcIix7fSl9KX1zdGFydEhMU1N0cmVhbWluZyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5jYWxsKFwiaGxzLXN0YXJ0XCIsbSh7fSxlKSl9KX1zdG9wSExTU3RyZWFtaW5nKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmNhbGwoXCJobHMtc3RvcFwiLG0oe30sZSkpfSl9c3RhcnRUcmFuc2NyaXB0aW9uKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmNhbGwoXCJ0cmFuc2NyaXB0aW9uLXN0YXJ0XCIsbSh7fSxlKSl9KX1zdG9wVHJhbnNjcmlwdGlvbihlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5jYWxsKFwidHJhbnNjcmlwdGlvbi1zdG9wXCIsbSh7fSxlKSl9KX1zZW5kSExTVGltZWRNZXRhZGF0YShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5jYWxsKFwiaGxzLXRpbWVkLW1ldGFkYXRhXCIsbSh7fSxlKSl9KX11cGRhdGVQZWVyKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmNhbGwoXCJwZWVyLXVwZGF0ZVwiLG0oe30sZSkpfSl9Z2V0UGVlcihlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuY2FsbChcImdldC1wZWVyXCIsbSh7fSxlKSl9KX1qb2luR3JvdXAoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLmNhbGwoXCJncm91cC1qb2luXCIse25hbWU6ZX0pfSl9bGVhdmVHcm91cChlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuY2FsbChcImdyb3VwLWxlYXZlXCIse25hbWU6ZX0pfSl9YWRkVG9Hcm91cChlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLmNhbGwoXCJncm91cC1hZGRcIix7bmFtZTp0LHBlZXJfaWQ6ZX0pfSl9cmVtb3ZlRnJvbUdyb3VwKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuY2FsbChcImdyb3VwLXJlbW92ZVwiLHtuYW1lOnQscGVlcl9pZDplfSl9KX1wZWVySXRlck5leHQoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3JldHVybiB5aWVsZCB0aGlzLmNhbGwoXCJwZWVyLWl0ZXItbmV4dFwiLGUpfSl9ZmluZFBlZXJzKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5jYWxsKFwiZmluZC1wZWVyXCIsZSl9KX1maW5kUGVlckJ5TmFtZShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuY2FsbChcInBlZXItbmFtZS1zZWFyY2hcIixlKX0pfXNldFNlc3Npb25NZXRhZGF0YShlKXtpZighdGhpcy5pc0Nvbm5lY3RlZCl0aHJvdyBTLldlYlNvY2tldENvbm5lY3Rpb25FcnJvcnMuV2ViU29ja2V0Q29ubmVjdGlvbkxvc3QoXCJSRUNPTk5FQ1RfU0lHTkFMXCIsXCJGYWlsZWQgdG8gc2V0IHNlc3Npb24gc3RvcmUgdmFsdWUgZHVlIHRvIG5ldHdvcmsgZGlzY29ubmVjdGlvblwiKTtyZXR1cm4gdGhpcy5jYWxsKFwic2V0LW1ldGFkYXRhXCIsbSh7fSxlKSl9bGlzdGVuTWV0YWRhdGFDaGFuZ2UoZSl7aWYoIXRoaXMuaXNDb25uZWN0ZWQpdGhyb3cgUy5XZWJTb2NrZXRDb25uZWN0aW9uRXJyb3JzLldlYlNvY2tldENvbm5lY3Rpb25Mb3N0KFwiUkVDT05ORUNUX1NJR05BTFwiLFwiRmFpbGVkIHRvIG9ic2VydmUgc2Vzc2lvbiBzdG9yZSBrZXkgZHVlIHRvIG5ldHdvcmsgZGlzY29ubmVjdGlvblwiKTtyZXR1cm4gdGhpcy5jYWxsKFwibGlzdGVuLW1ldGFkYXRhLWNoYW5nZVwiLHtrZXlzOmV9KX1nZXRTZXNzaW9uTWV0YWRhdGEoZSl7aWYoIXRoaXMuaXNDb25uZWN0ZWQpdGhyb3cgUy5XZWJTb2NrZXRDb25uZWN0aW9uRXJyb3JzLldlYlNvY2tldENvbm5lY3Rpb25Mb3N0KFwiUkVDT05ORUNUX1NJR05BTFwiLFwiRmFpbGVkIHRvIHNldCBzZXNzaW9uIHN0b3JlIHZhbHVlIGR1ZSB0byBuZXR3b3JrIGRpc2Nvbm5lY3Rpb25cIik7cmV0dXJuIHRoaXMuY2FsbChcImdldC1tZXRhZGF0YVwiLHtrZXk6ZX0pfXNldFBvbGxJbmZvKGUpe3JldHVybiB0aGlzLmNhbGwoXCJwb2xsLWluZm8tc2V0XCIsbSh7fSxlKSl9Z2V0UG9sbEluZm8oZSl7cmV0dXJuIHRoaXMuY2FsbChcInBvbGwtaW5mby1nZXRcIixtKHt9LGUpKX1zZXRQb2xsUXVlc3Rpb25zKGUpe3JldHVybiB0aGlzLmNhbGwoXCJwb2xsLXF1ZXN0aW9ucy1zZXRcIixtKHt9LGUpKX1zdGFydFBvbGwoZSl7cmV0dXJuIHRoaXMuY2FsbChcInBvbGwtc3RhcnRcIixtKHt9LGUpKX1zdG9wUG9sbChlKXtyZXR1cm4gdGhpcy5jYWxsKFwicG9sbC1zdG9wXCIsbSh7fSxlKSl9Z2V0UG9sbFF1ZXN0aW9ucyhlKXtyZXR1cm4gdGhpcy5jYWxsKFwicG9sbC1xdWVzdGlvbnMtZ2V0XCIsbSh7fSxlKSl9c2V0UG9sbFJlc3BvbnNlcyhlKXtyZXR1cm4gdGhpcy5jYWxsKFwicG9sbC1yZXNwb25zZVwiLG0oe30sZSkpfWdldFBvbGxSZXNwb25zZXMoZSl7cmV0dXJuIHRoaXMuY2FsbChcInBvbGwtcmVzcG9uc2VzXCIsbSh7fSxlKSl9Z2V0UG9sbHNMaXN0KGUpe3JldHVybiB0aGlzLmNhbGwoXCJwb2xsLWxpc3RcIixtKHt9LGUpKX1nZXRQb2xsUmVzdWx0KGUpe3JldHVybiB0aGlzLmNhbGwoXCJwb2xsLXJlc3VsdFwiLG0oe30sZSkpfWNyZWF0ZVdoaXRlYm9hcmQoZSl7cmV0dXJuIHRoaXMudmFsaWRhdGVDb25uZWN0aW9uKCksdGhpcy5jYWxsKFwid2hpdGVib2FyZC1jcmVhdGVcIixtKHt9LGUpKX1nZXRXaGl0ZWJvYXJkKGUpe3JldHVybiB0aGlzLnZhbGlkYXRlQ29ubmVjdGlvbigpLHRoaXMuY2FsbChcIndoaXRlYm9hcmQtZ2V0XCIsbSh7fSxlKSl9ZmV0Y2hQb2xsTGVhZGVyYm9hcmQoZSl7cmV0dXJuIHRoaXMuY2FsbChcInBvbGwtbGVhZGVyYm9hcmRcIixtKHt9LGUpKX12YWxpZGF0ZUNvbm5lY3Rpb24oKXtpZighdGhpcy5pc0Nvbm5lY3RlZCl0aHJvdyBTLldlYlNvY2tldENvbm5lY3Rpb25FcnJvcnMuV2ViU29ja2V0Q29ubmVjdGlvbkxvc3QoXCJSRUNPTk5FQ1RfU0lHTkFMXCIsXCJGYWlsZWQgdG8gc2VuZCBtZXNzYWdlIGR1ZSB0byBuZXR3b3JrIGRpc2Nvbm5lY3Rpb25cIil9b25NZXNzYWdlSGFuZGxlcihlKXtsZXQgdD1lLmRhdGEsaT1KU09OLnBhcnNlKHQpO2lmKHRoaXMucmVzb2x2ZVBpbmdPbkFueVJlc3BvbnNlKCksaS5pZCl0aGlzLmhhbmRsZVJlc3BvbnNlV2l0aElkKGkpO2Vsc2UgaWYoaS5tZXRob2QpdGhpcy5oYW5kbGVSZXNwb25zZVdpdGhNZXRob2QoaSk7ZWxzZSB0aHJvdyBFcnJvcihgV2ViU29ja2V0IG1lc3NhZ2UgaGFzIG5vICdtZXRob2QnIG9yICdpZCcgZmllbGQsIG1lc3NhZ2U9JHtpfWApfWhhbmRsZVJlc3BvbnNlV2l0aElkKGUpe2xldCB0PWUsaT10LmlkO2lmKHRoaXMuY2FsbGJhY2tzLmhhcyhpKSl7bGV0IHI9dGhpcy5jYWxsYmFja3MuZ2V0KGkpO3RoaXMuY2FsbGJhY2tzLmRlbGV0ZShpKSx0LnJlc3VsdD9yLnJlc29sdmUodC5yZXN1bHQpOnIucmVqZWN0KHQuZXJyb3IpfWVsc2UgdGhpcy5vYnNlcnZlci5vbk5vdGlmaWNhdGlvbih0KX1oYW5kbGVSZXNwb25zZVdpdGhNZXRob2QoZSl7c3dpdGNoKGUubWV0aG9kKXtjYXNlXCJvZmZlclwiOnRoaXMub2JzZXJ2ZXIub25PZmZlcihlLnBhcmFtcyk7YnJlYWs7Y2FzZVwidHJpY2tsZVwiOnRoaXMub2JzZXJ2ZXIub25Ucmlja2xlKGUucGFyYW1zKTticmVhaztjYXNlXCJvbi1lcnJvclwiOnRoaXMub2JzZXJ2ZXIub25TZXJ2ZXJFcnJvcihTLldlYnNvY2tldE1ldGhvZEVycm9ycy5TZXJ2ZXJFcnJvcnMoTnVtYmVyKGUucGFyYW1zLmNvZGUpLFwib24tZXJyb3JcIixlLnBhcmFtcy5tZXNzYWdlKSk7YnJlYWs7Y2FzZVwib24td2FybmluZ1wiOmwudyh0aGlzLlRBRyxlLnBhcmFtcyk7YnJlYWs7ZGVmYXVsdDp0aGlzLm9ic2VydmVyLm9uTm90aWZpY2F0aW9uKGUpO2JyZWFrfX1yZWplY3RQZW5kaW5nQ2FsbHMoZT1cIlwiKXt0aGlzLmNhbGxiYWNrcy5mb3JFYWNoKCh0LGkpPT57dmFyIHIscyxvLG47KChyPXQubWV0YWRhdGEpPT1udWxsP3ZvaWQgMDpyLm1ldGhvZCkhPT1cInBpbmdcIiYmKGwuZSh0aGlzLlRBRyxgcmVqZWN0aW5nIHBlbmRpbmcgY2FsbGJhY2sgJHsocz10Lm1ldGFkYXRhKT09bnVsbD92b2lkIDA6cy5tZXRob2R9LCBpZD0ke2l9YCksdC5yZWplY3QoUy5XZWJTb2NrZXRDb25uZWN0aW9uRXJyb3JzLldlYlNvY2tldENvbm5lY3Rpb25Mb3N0KChvPXQubWV0YWRhdGEpIT1udWxsJiZvLm1ldGhvZD9icigobj10Lm1ldGFkYXRhKT09bnVsbD92b2lkIDA6bi5tZXRob2QpOlwiUkVDT05ORUNUX1NJR05BTFwiLGUpKSx0aGlzLmNhbGxiYWNrcy5kZWxldGUoaSkpfSl9cGluZ1BvbmdMb29wKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgaSxyO2xldCB0PSgoaT13aW5kb3cuSE1TKT09bnVsbD92b2lkIDA6aS5QSU5HX1RJTUVPVVQpfHwxMmUzO2lmKHRoaXMuaXNDb25uZWN0ZWQpe2xldCBzPXlpZWxkIHRoaXMucGluZyh0KTt0aGlzLnBvbmdSZXNwb25zZVRpbWVzLmVucXVldWUocykscz50PyhsLmQodGhpcy5UQUcsYFBvbmcgdGltZW91dCAke2V9LCBwYWdlSGlkZGVuPSR7UnMoKX1gKSx0aGlzLmlkPT09ZSYmdGhpcy5zZXRJc0Nvbm5lY3RlZCghMSxcInBpbmcgcG9uZyBmYWlsdXJlXCIpKTpzZXRUaW1lb3V0KCgpPT50aGlzLnBpbmdQb25nTG9vcChlKSwoKHI9d2luZG93LkhNUyk9PW51bGw/dm9pZCAwOnIuUElOR19JTlRFUlZBTCl8fDNlMyl9fSl9Y2FsbChlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgcj1TLldlYnNvY2tldE1ldGhvZEVycm9ycy5TZXJ2ZXJFcnJvcnMoNTAwLGUsYERlZmF1bHQgJHtlfSBlcnJvcmApLHM7Zm9yKHM9MTtzPD0zO3MrKyl0cnl7cmV0dXJuIHRoaXMudmFsaWRhdGVDb25uZWN0aW9uKCksbC5kKHRoaXMuVEFHLGBUcnkgbnVtYmVyICR7c30gc2VuZGluZyAke2V9YCx0KSx5aWVsZCB0aGlzLmludGVybmFsQ2FsbChlLHQpfWNhdGNoKG8pe2lmKHI9byxsLmUodGhpcy5UQUcsYEZhaWxlZCBzZW5kaW5nICR7ZX0gdHJ5OiAke3N9YCx7bWV0aG9kOmUscGFyYW1zOnQsZXJyb3I6cn0pLCEocGFyc2VJbnQoYCR7ci5jb2RlLzEwMH1gKT09PTV8fHIuY29kZT09PTQyOXx8ci5jb2RlPT09MTAwMykpYnJlYWs7bGV0IGQ9KDIrTWF0aC5yYW5kb20oKSoyKSoxZTM7eWllbGQgT2UoZCl9dGhyb3cgbC5lKGBTZW5kaW5nICR7ZX0gb3ZlciBXUyBmYWlsZWQgYWZ0ZXIgJHtNYXRoLm1pbihzLDMpfSByZXRyaWVzYCx7bWV0aG9kOmUscGFyYW1zOnQsZXJyb3I6cn0pLHJ9KX19O3ZhciB0bz0oKT0+e2lmKCFVfHx0eXBlb2YgbmF2aWdhdG9yLmNvbm5lY3Rpb249PVwidW5kZWZpbmVkXCIpcmV0dXJuO2xldCBhPW5hdmlnYXRvci5jb25uZWN0aW9uO3JldHVybntkb3dubGluazphLmRvd25saW5rLGRvd25saW5rTWF4OmEuZG93bmxpbmtNYXgsZWZmZWN0aXZlVHlwZTphLmVmZmVjdGl2ZVR5cGUscnR0OmEucnR0LHNhdmVEYXRhOmEuc2F2ZURhdGEsdHlwZTphLnR5cGV9fTt2YXIgST1cIltITVNUcmFuc3BvcnRdOlwiLHJpPWNsYXNze2NvbnN0cnVjdG9yKGUsdCxpLHIscyxvLG4pe3RoaXMub2JzZXJ2ZXI9ZTt0aGlzLmRldmljZU1hbmFnZXI9dDt0aGlzLnN0b3JlPWk7dGhpcy5ldmVudEJ1cz1yO3RoaXMuYW5hbHl0aWNzRXZlbnRzU2VydmljZT1zO3RoaXMuYW5hbHl0aWNzVGltZXI9bzt0aGlzLnBsdWdpblVzYWdlVHJhY2tlcj1uO3RoaXMuc3RhdGU9XCJEaXNjb25uZWN0ZWRcIjt0aGlzLnRyYWNrU3RhdGVzPW5ldyBNYXA7dGhpcy5wdWJsaXNoQ29ubmVjdGlvbj1udWxsO3RoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbj1udWxsO3RoaXMubWF4U3Vic2NyaWJlQml0cmF0ZT0wO3RoaXMuam9pblJldHJ5Q291bnQ9MDt0aGlzLnB1Ymxpc2hEaXNjb25uZWN0VGltZXI9MDt0aGlzLm9uU2NyZWVuc2hhcmVTdG9wPSgpPT57fTt0aGlzLnNjcmVlblN0cmVhbT1uZXcgU2V0O3RoaXMuY2FsbGJhY2tzPW5ldyBNYXA7dGhpcy5zZXRMaXN0ZW5lcj1lPT57dGhpcy5saXN0ZW5lcj1lfTt0aGlzLnNldE9uU2NyZWVuc2hhcmVTdG9wPWU9Pnt0aGlzLm9uU2NyZWVuc2hhcmVTdG9wPWV9O3RoaXMuc2lnbmFsT2JzZXJ2ZXI9e29uT2ZmZXI6ZT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dHJ5e2lmKCF0aGlzLnN1YnNjcmliZUNvbm5lY3Rpb24pcmV0dXJuO2lmKGUuc2Z1X25vZGVfaWQmJnRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbi5zZnVOb2RlSWQmJnRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbi5zZnVOb2RlSWQhPT1lLnNmdV9ub2RlX2lkKXtsLmQoSSxcImlnbm9yaW5nIG9sZCBvZmZlclwiKTtyZXR1cm59eWllbGQgdGhpcy5zdWJzY3JpYmVDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKGUpLGwuZChJLGBbU1VCU0NSSUJFXSBBZGRpbmcgJHt0aGlzLnN1YnNjcmliZUNvbm5lY3Rpb24uY2FuZGlkYXRlcy5sZW5ndGh9IGljZS1jYW5kaWRhdGVzYCx0aGlzLnN1YnNjcmliZUNvbm5lY3Rpb24uY2FuZGlkYXRlcyk7Zm9yKGxldCBpIG9mIHRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbi5jYW5kaWRhdGVzKXlpZWxkIHRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbi5hZGRJY2VDYW5kaWRhdGUoaSk7dGhpcy5zdWJzY3JpYmVDb25uZWN0aW9uLmNhbmRpZGF0ZXMubGVuZ3RoPTA7bGV0IHQ9eWllbGQgdGhpcy5zdWJzY3JpYmVDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcigpO3lpZWxkIHRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKHQpLHRoaXMuc2lnbmFsLmFuc3dlcih0KSxsLmQoSSxcIltyb2xlPVNVQlNDUklCRV0gb25PZmZlciByZW5lZ290aWF0aW9uIERPTkUgXFx1MjcwNVwiKX1jYXRjaCh0KXtsLmQoSSxcIltyb2xlPVNVQlNDUklCRV0gb25PZmZlciByZW5lZ290aWF0aW9uIEZBSUxFRCBcXHUyNzRDXCIsdCksdGhpcy5zdGF0ZT1cIkZhaWxlZFwiO2xldCBpO3QgaW5zdGFuY2VvZiBrP2k9dDppPVMuR2VuZXJpY0Vycm9ycy5Vbmtub3duKFwiU1VCU0NSSUJFXCIsdC5tZXNzYWdlKSx0aGlzLm9ic2VydmVyLm9uRmFpbHVyZShpKSx0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkuc3Vic2NyaWJlRmFpbChpKSl9fSksb25Ucmlja2xlOmU9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PWUudGFyZ2V0PT09MD90aGlzLnB1Ymxpc2hDb25uZWN0aW9uOnRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbjt0IT1udWxsJiZ0LnJlbW90ZURlc2NyaXB0aW9uP3lpZWxkIHQuYWRkSWNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKTp0PT1udWxsfHx0LmNhbmRpZGF0ZXMucHVzaChlLmNhbmRpZGF0ZSl9KSxvbk5vdGlmaWNhdGlvbjplPT50aGlzLm9ic2VydmVyLm9uTm90aWZpY2F0aW9uKGUpLG9uU2VydmVyRXJyb3I6ZT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5vYnNlcnZlci5vblN0YXRlQ2hhbmdlKFwiRmFpbGVkXCIsZSl9KSxvbkZhaWx1cmU6ZT0+e3RoaXMuam9pblBhcmFtZXRlcnMmJnRoaXMucmV0cnlTY2hlZHVsZXIuc2NoZWR1bGUoe2NhdGVnb3J5OjEsZXJyb3I6ZSx0YXNrOnRoaXMucmV0cnlTaWduYWxEaXNjb25uZWN0VGFzayxvcmlnaW5hbFN0YXRlOnRoaXMuc3RhdGV9KX0sb25PZmZsaW5lOmU9PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2wuZChJLFwic29ja2V0IG9mZmxpbmVcIixsclt0aGlzLnN0YXRlXSk7dHJ5e3RoaXMuc3RhdGUhPT1cIkxlYXZpbmdcIiYmdGhpcy5qb2luUGFyYW1ldGVycyYmdGhpcy5yZXRyeVNjaGVkdWxlci5zY2hlZHVsZSh7Y2F0ZWdvcnk6MSxlcnJvcjpTLldlYlNvY2tldENvbm5lY3Rpb25FcnJvcnMuV2ViU29ja2V0Q29ubmVjdGlvbkxvc3QoXCJSRUNPTk5FQ1RfU0lHTkFMXCIsZSksdGFzazp0aGlzLnJldHJ5U2lnbmFsRGlzY29ubmVjdFRhc2ssb3JpZ2luYWxTdGF0ZTp0aGlzLnN0YXRlfSl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcih0KX19KSxvbk9ubGluZTooKT0+e3ZhciBlO2wuZChJLFwic29ja2V0IG9ubGluZVwiLGxyW3RoaXMuc3RhdGVdKSx0aGlzLmFuYWx5dGljc1NpZ25hbFRyYW5zcG9ydC5mbHVzaEZhaWxlZEV2ZW50cygoZT10aGlzLnN0b3JlLmdldExvY2FsUGVlcigpKT09bnVsbD92b2lkIDA6ZS5wZWVySWQpfSxvbk5ldHdvcmtPbmxpbmU6KCk9Pnt0aGlzLmFuYWx5dGljc0V2ZW50c1NlcnZpY2UuZmx1c2hGYWlsZWRDbGllbnRFdmVudHMoKX19O3RoaXMuc2lnbmFsPW5ldyBpaSh0aGlzLnNpZ25hbE9ic2VydmVyKTt0aGlzLmFuYWx5dGljc1NpZ25hbFRyYW5zcG9ydD1uZXcgU3IodGhpcy5zaWduYWwpO3RoaXMucHVibGlzaER0bHNTdGF0ZVRpbWVyPTA7dGhpcy5sYXN0UHVibGlzaER0bHNTdGF0ZT1cIm5ld1wiO3RoaXMuaGFuZGxlTG9jYWxSb2xlVXBkYXRlPWk9PmModGhpcyxbaV0sZnVuY3Rpb24qKHtvbGRSb2xlOmUsbmV3Um9sZTp0fSl7IXRoaXMuZG9lc1JvbGVOZWVkV2ViUlRDKGUpJiZ0aGlzLmRvZXNSb2xlTmVlZFdlYlJUQyh0KSYmKGwuZChJLFwiTG9jYWwgcGVlciByb2xlIHVwZGF0ZWQgdG8gd2VicnRjIHJvbGUsIGNyZWF0aW5nIFBlZXJDb25uZWN0aW9ucyBhbmQgcGVyZm9ybWluZyBpbml0YWwgcHVibGlzaCBuZWdvdGlhdGlvbiBcXHUyM0YzXCIpLHRoaXMuY3JlYXRlUGVlckNvbm5lY3Rpb25zKCkseWllbGQgdGhpcy5uZWdvdGlhdGVPbkZpcnN0UHVibGlzaCgpKX0pO3RoaXMucmV0cnlQdWJsaXNoSWNlRmFpbGVkVGFzaz0oKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYodGhpcy5wdWJsaXNoQ29ubmVjdGlvbil7bGV0IGU9bmV3IFByb21pc2UoKHQsaSk9Pnt0aGlzLmNhbGxiYWNrcy5zZXQocnQse3Byb21pc2U6e3Jlc29sdmU6dCxyZWplY3Q6aX0sYWN0aW9uOlwiUkVTVEFSVF9JQ0VcIixleHRyYTp7fX0pfSk7eWllbGQgdGhpcy5wZXJmb3JtUHVibGlzaFJlbmVnb3RpYXRpb24oe2ljZVJlc3RhcnQ6dGhpcy5wdWJsaXNoQ29ubmVjdGlvbi5jb25uZWN0aW9uU3RhdGUhPT1cImNvbm5lY3RlZFwifSkseWllbGQgZX1yZXR1cm4hMH0pO3RoaXMucmV0cnlTdWJzY3JpYmVJY2VGYWlsZWRUYXNrPSgpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZih0aGlzLnN1YnNjcmliZUNvbm5lY3Rpb24mJnRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbi5jb25uZWN0aW9uU3RhdGUhPT1cImNvbm5lY3RlZFwiKXtsZXQgZT1uZXcgUHJvbWlzZSgoaSxyKT0+e3RoaXMuY2FsbGJhY2tzLnNldChzdCx7cHJvbWlzZTp7cmVzb2x2ZTppLHJlamVjdDpyfSxhY3Rpb246XCJSRVNUQVJUX0lDRVwiLGV4dHJhOnt9fSl9KSx0PW5ldyBQcm9taXNlKGk9PntzZXRUaW1lb3V0KGksNmU0LCExKX0pO3JldHVybiBQcm9taXNlLnJhY2UoW2UsdF0pfXJldHVybiEwfSk7dGhpcy5yZXRyeVNpZ25hbERpc2Nvbm5lY3RUYXNrPSgpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdDtsLmQoSSxcInJldHJ5U2lnbmFsRGlzY29ubmVjdFRhc2tcIix7c2lnbmFsQ29ubmVjdGVkOnRoaXMuc2lnbmFsLmlzQ29ubmVjdGVkfSksdGhpcy5zaWduYWwuaXNDb25uZWN0ZWR8fCh5aWVsZCB0aGlzLmludGVybmFsQ29ubmVjdCh0aGlzLmpvaW5QYXJhbWV0ZXJzLmF1dGhUb2tlbix0aGlzLmpvaW5QYXJhbWV0ZXJzLmVuZHBvaW50LHRoaXMuam9pblBhcmFtZXRlcnMucGVlcklkLHRoaXMuam9pblBhcmFtZXRlcnMuaWNlU2VydmVycykpO2xldCBlPSh0PXRoaXMuc3RvcmUuZ2V0Um9vbSgpKSE9bnVsbCYmdC5qb2luZWRBdD90aGlzLnNpZ25hbC5pc0Nvbm5lY3RlZCYmKHlpZWxkIHRoaXMucmV0cnlQdWJsaXNoSWNlRmFpbGVkVGFzaygpKTp0aGlzLnNpZ25hbC5pc0Nvbm5lY3RlZDtyZXR1cm4gdGhpcy5zaWduYWwudHJhY2tVcGRhdGUodGhpcy50cmFja1N0YXRlcyksZX0pO3RoaXMud2VicnRjSW50ZXJuYWxzPW5ldyB5aSh0aGlzLnN0b3JlLHRoaXMuZXZlbnRCdXMpO2xldCBkPSh1LHApPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt1IT09dGhpcy5zdGF0ZSYmKHRoaXMuc3RhdGU9dSx5aWVsZCB0aGlzLm9ic2VydmVyLm9uU3RhdGVDaGFuZ2UodGhpcy5zdGF0ZSxwKSl9KTt0aGlzLnJldHJ5U2NoZWR1bGVyPW5ldyBwcihkLHRoaXMuc2VuZEVycm9yQW5hbHl0aWNzRXZlbnQuYmluZCh0aGlzKSksdGhpcy5ldmVudEJ1cy5zdGF0c1VwZGF0ZS5zdWJzY3JpYmUodT0+e3ZhciBoLFQ7bGV0IHA9KChUPShoPXUuZ2V0TG9jYWxQZWVyU3RhdHMoKSk9PW51bGw/dm9pZCAwOmguc3Vic2NyaWJlKT09bnVsbD92b2lkIDA6VC5iaXRyYXRlKXx8MDt0aGlzLm1heFN1YnNjcmliZUJpdHJhdGU9TWF0aC5tYXgodGhpcy5tYXhTdWJzY3JpYmVCaXRyYXRlLHApfSksdGhpcy5ldmVudEJ1cy5sb2NhbEF1ZGlvRW5hYmxlZC5zdWJzY3JpYmUoKHt0cmFjazp1LGVuYWJsZWQ6cH0pPT50aGlzLnRyYWNrVXBkYXRlKHUscCkpLHRoaXMuZXZlbnRCdXMubG9jYWxWaWRlb0VuYWJsZWQuc3Vic2NyaWJlKCh7dHJhY2s6dSxlbmFibGVkOnB9KT0+dGhpcy50cmFja1VwZGF0ZSh1LHApKX1nZXRXZWJzb2NrZXRFbmRwb2ludCgpe2lmKHRoaXMuaW5pdENvbmZpZylyZXR1cm4gdGhpcy5pbml0Q29uZmlnLmVuZHBvaW50fWdldFdlYnJ0Y0ludGVybmFscygpe3JldHVybiB0aGlzLndlYnJ0Y0ludGVybmFsc31pc0ZsYWdFbmFibGVkKGUpe3ZhciByO2xldCB0PShyPXRoaXMuaW5pdENvbmZpZyk9PW51bGw/dm9pZCAwOnIuY29uZmlnO3JldHVybigodD09bnVsbD92b2lkIDA6dC5lbmFibGVkRmxhZ3MpfHxbXSkuaW5jbHVkZXMoZSl9c2V0Q29ubmVjdGl2aXR5TGlzdGVuZXIoZSl7dGhpcy5jb25uZWN0aXZpdHlMaXN0ZW5lcj1lfXByZXZpZXcoZSx0LGkscixzPSExLG8pe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgbj15aWVsZCB0aGlzLmNvbm5lY3QoZSx0LGkscixzLG8pO3JldHVybiB0aGlzLnN0YXRlPVwiUHJldmlld1wiLHRoaXMub2JzZXJ2ZXIub25TdGF0ZUNoYW5nZSh0aGlzLnN0YXRlKSxufSl9am9pbihlLHQsaSxyLHM9ITEsbyl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2wuZChJLFwiam9pbjogc3RhcnRlZCBcXHUyM0YwXCIpO3RyeXsoIXRoaXMuc2lnbmFsLmlzQ29ubmVjdGVkfHwhdGhpcy5pbml0Q29uZmlnKSYmKHlpZWxkIHRoaXMuY29ubmVjdChlLHIsdCxpLHMsbykpLHRoaXMudmFsaWRhdGVOb3REaXNjb25uZWN0ZWQoXCJjb25uZWN0XCIpLHRoaXMuaW5pdENvbmZpZyYmKHlpZWxkIHRoaXMud2FpdEZvckxvY2FsUm9sZUF2YWlsYWJpbGl0eSgpLHlpZWxkIHRoaXMuY3JlYXRlQ29ubmVjdGlvbnNBbmROZWdvdGlhdGVKb2luKGkscyksdGhpcy5pbml0U3RhdHNBbmFseXRpY3MoKSxsLmQoSSxcIlxcdTI3MDUgam9pbjogTmVnb3RpYXRlZCBvdmVyIFBVQkxJU0ggY29ubmVjdGlvblwiKSl9Y2F0Y2gobil7bC5lKEksYGpvaW46IGZhaWxlZCBcXHUyNzRDIFt0b2tlbj0ke2V9XWAsbiksdGhpcy5zdGF0ZT1cIkZhaWxlZFwiO2xldCBkPW47dGhyb3cgZC5pc1Rlcm1pbmFsPWQuaXNUZXJtaW5hbHx8ZC5jb2RlPT09NTAwLHlpZWxkIHRoaXMub2JzZXJ2ZXIub25TdGF0ZUNoYW5nZSh0aGlzLnN0YXRlLGQpLGR9bC5kKEksXCJcXHUyNzA1IGpvaW46IHN1Y2Nlc3NmdWxcIiksdGhpcy5zdGF0ZT1cIkpvaW5lZFwiLHRoaXMub2JzZXJ2ZXIub25TdGF0ZUNoYW5nZSh0aGlzLnN0YXRlKX0pfWNvbm5lY3QoZSx0LGkscixzPSExLG8pe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0aGlzLnNldFRyYW5zcG9ydFN0YXRlRm9yQ29ubmVjdCgpLHRoaXMuam9pblBhcmFtZXRlcnM9bmV3IGRyKGUsaSxyLm5hbWUsci5tZXRhRGF0YSx0LHMsbyk7dHJ5e3JldHVybiB5aWVsZCB0aGlzLmludGVybmFsQ29ubmVjdChlLHQsaSxvKX1jYXRjaChuKXtpZihuIGluc3RhbmNlb2YgayYmKFtQLldlYlNvY2tldENvbm5lY3Rpb25FcnJvcnMuV0VCU09DS0VUX0NPTk5FQ1RJT05fTE9TVCxQLldlYlNvY2tldENvbm5lY3Rpb25FcnJvcnMuRkFJTEVEX1RPX0NPTk5FQ1QsUC5XZWJTb2NrZXRDb25uZWN0aW9uRXJyb3JzLkFCTk9STUFMX0NMT1NFLFAuQVBJRXJyb3JzLkVORFBPSU5UX1VOUkVBQ0hBQkxFXS5pbmNsdWRlcyhuLmNvZGUpfHxuLmNvZGUudG9TdHJpbmcoKS5zdGFydHNXaXRoKFwiNVwiKXx8bi5jb2RlLnRvU3RyaW5nKCkuc3RhcnRzV2l0aChcIjQyOVwiKSkpe2xldCB1PSgpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm4geWllbGQgdGhpcy5pbnRlcm5hbENvbm5lY3QoZSx0LGksbyksISEodGhpcy5pbml0Q29uZmlnJiZ0aGlzLmluaXRDb25maWcuZW5kcG9pbnQpfSk7eWllbGQgdGhpcy5yZXRyeVNjaGVkdWxlci5zY2hlZHVsZSh7Y2F0ZWdvcnk6MCxlcnJvcjpuLHRhc2s6dSxvcmlnaW5hbFN0YXRlOnRoaXMuc3RhdGUsY2hhbmdlU3RhdGU6ITF9KX1lbHNlIHRocm93IG59fSl9bGVhdmUoaSl7cmV0dXJuIGModGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKGUsdD1cInVzZXIgcmVxdWVzdFwiKXt2YXIgcixzLG87dGhpcy5yZXRyeVNjaGVkdWxlci5yZXNldCgpLHRoaXMuam9pblBhcmFtZXRlcnM9dm9pZCAwLGwuZChJLFwibGVhdmluZyBpbiB0cmFuc3BvcnRcIik7dHJ5e2xldCBuPXRoaXMucGx1Z2luVXNhZ2VUcmFja2VyLmdldFBsdWdpblVzYWdlKFwiSE1TS3Jpc3BQbHVnaW5cIik7aWYobiYmdGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh5LmdldEtyaXNwVXNhZ2UobikpLHRoaXMuc3RhdGU9XCJMZWF2aW5nXCIsKHI9dGhpcy5wdWJsaXNoU3RhdHNBbmFseXRpY3MpPT1udWxsfHxyLnN0b3AoKSwocz10aGlzLnN1YnNjcmliZVN0YXRzQW5hbHl0aWNzKT09bnVsbHx8cy5zdG9wKCksKG89dGhpcy53ZWJydGNJbnRlcm5hbHMpPT1udWxsfHxvLmNsZWFudXAoKSx0aGlzLmNsZWFyUGVlckNvbm5lY3Rpb25zKCksZSl0cnl7dGhpcy5zaWduYWwubGVhdmUodCksbC5kKEksXCJzaWduYWwgbGVhdmUgZG9uZVwiKX1jYXRjaChkKXtsLncoSSxcImZhaWxlZCB0byBzZW5kIGxlYXZlIG9uIHdlYnNvY2tldCB0byBzZXJ2ZXJcIixkKX10aGlzLmFuYWx5dGljc0V2ZW50c1NlcnZpY2UuZmx1c2hGYWlsZWRDbGllbnRFdmVudHMoKSx0aGlzLmFuYWx5dGljc0V2ZW50c1NlcnZpY2UucmVzZXQoKSx5aWVsZCB0aGlzLnNpZ25hbC5jbG9zZSgpfWNhdGNoKG4pe3RoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5kaXNjb25uZWN0KG4pKSxsLmUoSSxcImxlYXZlOiBGQUlMRUQgXFx1Mjc0Q1wiLG4pfWZpbmFsbHl7dGhpcy5zdGF0ZT1cIkRpc2Nvbm5lY3RlZFwiLHRoaXMub2JzZXJ2ZXIub25TdGF0ZUNoYW5nZSh0aGlzLnN0YXRlKX19KX1wdWJsaXNoKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdDtmb3IobGV0IGkgb2YgZSl0cnl7eWllbGQgdGhpcy5wdWJsaXNoVHJhY2soaSksKHQ9dGhpcy5jb25uZWN0aXZpdHlMaXN0ZW5lcik9PW51bGx8fHQub25NZWRpYVB1Ymxpc2hlZChpKX1jYXRjaChyKXt0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkucHVibGlzaCh7ZGV2aWNlczp0aGlzLmRldmljZU1hbmFnZXIuZ2V0RGV2aWNlcygpLGVycm9yOnJ9KSl9fSl9dW5wdWJsaXNoKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtmb3IobGV0IHQgb2YgZSl5aWVsZCB0aGlzLnVucHVibGlzaFRyYWNrKHQpfSl9c2V0U0ZVTm9kZUlkKGUpe3ZhciB0LGk7dGhpcy5zaWduYWwuc2V0U2Z1Tm9kZUlkKGUpLHRoaXMuc2Z1Tm9kZUlkP2UmJnRoaXMuc2Z1Tm9kZUlkIT09ZSYmKHRoaXMuc2Z1Tm9kZUlkPWUsdGhpcy5oYW5kbGVTRlVNaWdyYXRpb24oKSk6KHRoaXMuc2Z1Tm9kZUlkPWUsKHQ9dGhpcy5wdWJsaXNoQ29ubmVjdGlvbik9PW51bGx8fHQuc2V0U2Z1Tm9kZUlkKGUpLChpPXRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbik9PW51bGx8fGkuc2V0U2Z1Tm9kZUlkKGUpKX1oYW5kbGVTRlVNaWdyYXRpb24oKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHMsbztsLnRpbWUoXCJzZnUgbWlncmF0aW9uXCIpLHRoaXMuY2xlYXJQZWVyQ29ubmVjdGlvbnMoKTtsZXQgZT10aGlzLnN0b3JlLmdldFBlZXJNYXAoKTt0aGlzLnN0b3JlLnJlbW92ZVJlbW90ZVRyYWNrcygpO2ZvcihsZXQgbiBpbiBlKXtsZXQgZD1lW25dO2QuaXNMb2NhbHx8KGQuYXVkaW9UcmFjaz12b2lkIDAsZC52aWRlb1RyYWNrPXZvaWQgMCxkLmF1eGlsaWFyeVRyYWNrcz1bXSl9bGV0IHQ9dGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKTtpZighdClyZXR1cm47dGhpcy5jcmVhdGVQZWVyQ29ubmVjdGlvbnMoKSx0aGlzLnRyYWNrU3RhdGVzLmNsZWFyKCkseWllbGQgdGhpcy5uZWdvdGlhdGVPbkZpcnN0UHVibGlzaCgpO2xldCBpPW5ldyBNYXA7aWYodC5hdWRpb1RyYWNrKXtsZXQgbj10LmF1ZGlvVHJhY2suc3RyZWFtO2kuZ2V0KG4uaWQpfHxpLnNldChuLmlkLG5ldyBTZShuZXcgTWVkaWFTdHJlYW0pKTtsZXQgZD10LmF1ZGlvVHJhY2suY2xvbmUoaS5nZXQobi5pZCkpO3RoaXMuc3RvcmUucmVtb3ZlVHJhY2sodC5hdWRpb1RyYWNrKSx0LmF1ZGlvVHJhY2suY2xlYW51cCgpLHlpZWxkIHRoaXMucHVibGlzaFRyYWNrKGQpLHQuYXVkaW9UcmFjaz1kfWlmKHQudmlkZW9UcmFjayl7bGV0IG49dC52aWRlb1RyYWNrLnN0cmVhbTtpLmdldChuLmlkKXx8aS5zZXQobi5pZCxuZXcgU2UobmV3IE1lZGlhU3RyZWFtKSksdGhpcy5zdG9yZS5yZW1vdmVUcmFjayh0LnZpZGVvVHJhY2spO2xldCBkPXQudmlkZW9UcmFjay5jbG9uZShpLmdldChuLmlkKSk7dC52aWRlb1RyYWNrLmNsZWFudXAoKSx5aWVsZCB0aGlzLnB1Ymxpc2hUcmFjayhkKSx0LnZpZGVvVHJhY2s9ZH1sZXQgcj1bXTtmb3IoO3QuYXV4aWxpYXJ5VHJhY2tzLmxlbmd0aD4wOyl7bGV0IG49dC5hdXhpbGlhcnlUcmFja3Muc2hpZnQoKTtpZihuKXtsZXQgZD1uLnN0cmVhbTtpLmdldChkLmlkKXx8aS5zZXQoZC5pZCxuZXcgU2Uobi5zb3VyY2U9PT1cInNjcmVlblwiP2QubmF0aXZlU3RyZWFtLmNsb25lKCk6bmV3IE1lZGlhU3RyZWFtKSksdGhpcy5zdG9yZS5yZW1vdmVUcmFjayhuKTtsZXQgdT1uLmNsb25lKGkuZ2V0KGQuaWQpKTt1LnR5cGU9PT1cInZpZGVvXCImJnUuc291cmNlPT09XCJzY3JlZW5cIiYmKHRoaXMuc2NyZWVuU3RyZWFtLmFkZChkLm5hdGl2ZVN0cmVhbSksdGhpcy5zY3JlZW5TdHJlYW0uYWRkKHUuc3RyZWFtLm5hdGl2ZVN0cmVhbSksdS5uYXRpdmVUcmFjay5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIix0aGlzLm9uU2NyZWVuc2hhcmVTdG9wKSksbi5jbGVhbnVwKCkseWllbGQgdGhpcy5wdWJsaXNoVHJhY2sodSksci5wdXNoKHUpfX10LmF1eGlsaWFyeVRyYWNrcz1yLGkuY2xlYXIoKSwobz0ocz10aGlzLmxpc3RlbmVyKT09bnVsbD92b2lkIDA6cy5vblNGVU1pZ3JhdGlvbik9PW51bGx8fG8uY2FsbChzKSxsLnRpbWVFbmQoXCJzZnUgbWlncmF0aW9uXCIpfSl9dHJhY2tVcGRhdGUoZSx0KXt2YXIgcztsZXQgcj1BcnJheS5mcm9tKHRoaXMudHJhY2tTdGF0ZXMudmFsdWVzKCkpLmZpbmQobz0+ZS50eXBlPT09by50eXBlJiZlLnNvdXJjZT09PW8uc291cmNlKTtpZihyKXtsZXQgbz1uZXcgVnQoTShtKHt9LHIpLHttdXRlOiF0fSkpO3RoaXMudHJhY2tTdGF0ZXMuc2V0KHIudHJhY2tfaWQsbyksbC5kKEksXCJUcmFjayBVcGRhdGVcIix0aGlzLnRyYWNrU3RhdGVzLGUpLHRoaXMuc2lnbmFsLnRyYWNrVXBkYXRlKG5ldyBNYXAoW1tyLnRyYWNrX2lkLG9dXSkpO2xldCBuPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCk7biYmdD09PWUuZW5hYmxlZCYmKChzPXRoaXMubGlzdGVuZXIpPT1udWxsfHxzLm9uVHJhY2tVcGRhdGUodD8zOjIsZSxuKSl9fXB1Ymxpc2hUcmFjayhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7ZS5wdWJsaXNoZWRUcmFja0lkPWUuZ2V0VHJhY2tJREJlaW5nU2VudCgpLGwuZChJLGBcXHUyM0YzIHB1Ymxpc2hUcmFjazogdHJhY2tJZD0ke2UudHJhY2tJZH0sIHRvUHVibGlzaFRyYWNrSWQ9JHtlLnB1Ymxpc2hlZFRyYWNrSWR9YCxgJHtlfWApLHRoaXMudHJhY2tTdGF0ZXMuc2V0KGUucHVibGlzaGVkVHJhY2tJZCxuZXcgVnQoZSkpO2xldCB0PW5ldyBQcm9taXNlKChzLG8pPT57dGhpcy5jYWxsYmFja3Muc2V0KHJ0LHtwcm9taXNlOntyZXNvbHZlOnMscmVqZWN0Om99LGFjdGlvbjpcIlBVQkxJU0hcIixleHRyYTp7fX0pfSksaT1lLnN0cmVhbTtpLnNldENvbm5lY3Rpb24odGhpcy5wdWJsaXNoQ29ubmVjdGlvbik7bGV0IHI9dGhpcy5zdG9yZS5nZXRTaW11bGNhc3RMYXllcnMoZS5zb3VyY2UpO2kuYWRkVHJhbnNjZWl2ZXIoZSxyKSxsLnRpbWUoYHB1Ymxpc2gtJHtlLnRyYWNrSWR9LSR7ZS50eXBlfWApLHlpZWxkIHQsbC50aW1lRW5kKGBwdWJsaXNoLSR7ZS50cmFja0lkfS0ke2UudHlwZX1gKSx0aGlzLnN0b3JlLmFkZFRyYWNrKGUpLHlpZWxkIGkuc2V0TWF4Qml0cmF0ZUFuZEZyYW1lcmF0ZShlKS50aGVuKCgpPT57bC5kKEksYFNldHRpbmcgbWF4Qml0cmF0ZT0ke2Uuc2V0dGluZ3MubWF4Qml0cmF0ZX0ga3BicyR7ZSBpbnN0YW5jZW9mIEc/YCBhbmQgbWF4RnJhbWVyYXRlPSR7ZS5zZXR0aW5ncy5tYXhGcmFtZXJhdGV9YDpcIlwifSBmb3IgJHtlLnNvdXJjZX0gJHtlLnR5cGV9ICR7ZS50cmFja0lkfWApfSkuY2F0Y2gocz0+bC53KEksXCJGYWlsZWQgc2V0dGluZyBtYXhCaXRyYXRlIGFuZCBtYXhGcmFtZXJhdGVcIixzKSksZS5pc1B1Ymxpc2hlZD0hMCxsLmQoSSxgXFx1MjcwNSBwdWJsaXNoVHJhY2s6IHRyYWNrSWQ9JHtlLnRyYWNrSWR9YCxgJHtlfWAsdGhpcy5jYWxsYmFja3MpfSl9dW5wdWJsaXNoVHJhY2soZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKGwuZChJLGBcXHUyM0YzIHVucHVibGlzaFRyYWNrOiB0cmFja0lkPSR7ZS50cmFja0lkfWAsYCR7ZX1gKSxlLnB1Ymxpc2hlZFRyYWNrSWQmJnRoaXMudHJhY2tTdGF0ZXMuaGFzKGUucHVibGlzaGVkVHJhY2tJZCkpdGhpcy50cmFja1N0YXRlcy5kZWxldGUoZS5wdWJsaXNoZWRUcmFja0lkKTtlbHNle2xldCBzPUFycmF5LmZyb20odGhpcy50cmFja1N0YXRlcy52YWx1ZXMoKSkuZmluZChvPT5lLnR5cGU9PT1vLnR5cGUmJmUuc291cmNlPT09by5zb3VyY2UpO3MmJnRoaXMudHJhY2tTdGF0ZXMuZGVsZXRlKHMudHJhY2tfaWQpfWxldCB0PW5ldyBQcm9taXNlKChyLHMpPT57dGhpcy5jYWxsYmFja3Muc2V0KHJ0LHtwcm9taXNlOntyZXNvbHZlOnIscmVqZWN0OnN9LGFjdGlvbjpcIlVOUFVCTElTSFwiLGV4dHJhOnt9fSl9KTtlLnN0cmVhbS5yZW1vdmVTZW5kZXIoZSkseWllbGQgdCx5aWVsZCBlLmNsZWFudXAoKSxlLnNvdXJjZT09PVwic2NyZWVuXCImJnRoaXMuc2NyZWVuU3RyZWFtJiZ0aGlzLnNjcmVlblN0cmVhbS5mb3JFYWNoKHI9PntyLmdldFRyYWNrcygpLmZvckVhY2gocz0+e3Muc3RvcCgpfSksdGhpcy5zY3JlZW5TdHJlYW0uZGVsZXRlKHIpfSksdGhpcy5zdG9yZS5yZW1vdmVUcmFjayhlKSxsLmQoSSxgXFx1MjcwNSB1bnB1Ymxpc2hUcmFjazogdHJhY2tJZD0ke2UudHJhY2tJZH1gLHRoaXMuY2FsbGJhY2tzKX0pfWNsZWFyUGVlckNvbm5lY3Rpb25zKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBlLHQ7Y2xlYXJUaW1lb3V0KHRoaXMucHVibGlzaER0bHNTdGF0ZVRpbWVyKSx0aGlzLnB1Ymxpc2hEdGxzU3RhdGVUaW1lcj0wLGNsZWFyVGltZW91dCh0aGlzLnB1Ymxpc2hEaXNjb25uZWN0VGltZXIpLHRoaXMucHVibGlzaERpc2Nvbm5lY3RUaW1lcj0wLHRoaXMubGFzdFB1Ymxpc2hEdGxzU3RhdGU9XCJuZXdcIiwoZT10aGlzLnB1Ymxpc2hDb25uZWN0aW9uKT09bnVsbHx8ZS5jbG9zZSgpLCh0PXRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbik9PW51bGx8fHQuY2xvc2UoKSx0aGlzLnB1Ymxpc2hDb25uZWN0aW9uPW51bGwsdGhpcy5zdWJzY3JpYmVDb25uZWN0aW9uPW51bGx9KX13YWl0Rm9yTG9jYWxSb2xlQXZhaWxhYmlsaXR5KCl7aWYoIXRoaXMuc3RvcmUuaGFzUm9sZURldGFpbHNBcnJpdmVkKCkpcmV0dXJuIG5ldyBQcm9taXNlKGU9Pnt0aGlzLmV2ZW50QnVzLnBvbGljeUNoYW5nZS5zdWJzY3JpYmVPbmNlKCgpPT5lKCkpfSl9Y3JlYXRlQ29ubmVjdGlvbnNBbmROZWdvdGlhdGVKb2luKGUsdD0hMSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBpPXRoaXMuZG9lc0xvY2FsUGVlck5lZWRXZWJSVEMoKTtpJiZ0aGlzLmNyZWF0ZVBlZXJDb25uZWN0aW9ucygpLHRoaXMuYW5hbHl0aWNzVGltZXIuc3RhcnQoXCJqb2luX3Jlc3BvbnNlX3RpbWVcIikseWllbGQgdGhpcy5uZWdvdGlhdGVKb2luV2l0aFJldHJ5KHtuYW1lOmUubmFtZSxkYXRhOmUubWV0YURhdGEsYXV0b1N1YnNjcmliZVZpZGVvOnQsaXNXZWJSVEM6aX0pLHRoaXMuYW5hbHl0aWNzVGltZXIuZW5kKFwiam9pbl9yZXNwb25zZV90aW1lXCIpfSl9Y3JlYXRlUGVlckNvbm5lY3Rpb25zKCl7dmFyIHQsaSxyO2xldCBlPShzLG8sbj0hMSk9PnsoW1wiZGlzY29ubmVjdGVkXCIsXCJmYWlsZWRcIl0uaW5jbHVkZXMobyk/bC53LmJpbmQobCk6bC5kLmJpbmQobCkpKEksYCR7aHRbc119ICR7bj9cImljZVwiOlwiXCJ9IGNvbm5lY3Rpb24gc3RhdGUgY2hhbmdlOiAke299YCl9O2lmKHRoaXMuaW5pdENvbmZpZyl7bGV0IHM9e29uUmVuZWdvdGlhdGlvbk5lZWRlZDooKT0+Yyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5wZXJmb3JtUHVibGlzaFJlbmVnb3RpYXRpb24oKX0pLG9uRFRMU1RyYW5zcG9ydFN0YXRlQ2hhbmdlOm49Pnt2YXIgcCxoLFQ7aWYoKG49PT1cImZhaWxlZFwiP2wudy5iaW5kKGwpOmwuZC5iaW5kKGwpKShJLGBQdWJsaXNoZXIgb24gZHRscyB0cmFuc3BvcnQgc3RhdGUgY2hhbmdlOiAke259YCksIW58fHRoaXMubGFzdFB1Ymxpc2hEdGxzU3RhdGU9PT1ufHwodGhpcy5sYXN0UHVibGlzaER0bHNTdGF0ZT1uLHRoaXMucHVibGlzaER0bHNTdGF0ZVRpbWVyIT09MCYmKGNsZWFyVGltZW91dCh0aGlzLnB1Ymxpc2hEdGxzU3RhdGVUaW1lciksdGhpcy5wdWJsaXNoRHRsc1N0YXRlVGltZXI9MCksbiE9PVwiY29ubmVjdGluZ1wiJiZuIT09XCJmYWlsZWRcIikpcmV0dXJuO2xldCB1PShUPShoPShwPXRoaXMuaW5pdENvbmZpZyk9PW51bGw/dm9pZCAwOnAuY29uZmlnKT09bnVsbD92b2lkIDA6aC5kdGxzU3RhdGVUaW1lb3V0cyk9PW51bGw/dm9pZCAwOlRbbl07IXV8fHU8PTB8fCh0aGlzLnB1Ymxpc2hEdGxzU3RhdGVUaW1lcj13aW5kb3cuc2V0VGltZW91dCgoKT0+e3ZhciBmO2xldCBnPShmPXRoaXMucHVibGlzaENvbm5lY3Rpb24pPT1udWxsP3ZvaWQgMDpmLm5hdGl2ZUNvbm5lY3Rpb24uY29ubmVjdGlvblN0YXRlO2lmKGcmJm4mJmc9PT1uKXtsZXQgRT1TLldlYnJ0Y0Vycm9ycy5JQ0VGYWlsdXJlKFwiUFVCTElTSFwiLGBEVExTIHRyYW5zcG9ydCBzdGF0ZSAke259IHRpbWVvdXQ6JHt1fW1zYCwhMCk7dGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh5LmRpc2Nvbm5lY3QoRSkpLHRoaXMub2JzZXJ2ZXIub25GYWlsdXJlKEUpfX0sdSkpfSxvbkRUTFNUcmFuc3BvcnRFcnJvcjpuPT57bC5lKEksYG9uRFRMU1RyYW5zcG9ydEVycm9yICR7bi5uYW1lfSAke24ubWVzc2FnZX1gLG4pLHRoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2goeS5kaXNjb25uZWN0KG4pKX0sb25JY2VDb25uZWN0aW9uQ2hhbmdlOm49PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe2UoMCxuLCEwKX0pLG9uQ29ubmVjdGlvblN0YXRlQ2hhbmdlOm49PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBkLHUscCxoLFQsZyxmLEU7ZSgwLG4sITEpLG4hPT1cIm5ld1wiJiYobj09PVwiY29ubmVjdGVkXCI/KChkPXRoaXMuY29ubmVjdGl2aXR5TGlzdGVuZXIpPT1udWxsfHxkLm9uSUNFU3VjY2VzcyghMCksKHU9dGhpcy5wdWJsaXNoQ29ubmVjdGlvbik9PW51bGx8fHUuaGFuZGxlU2VsZWN0ZWRJY2VDYW5kaWRhdGVQYWlycygpKTpuPT09XCJmYWlsZWRcIj95aWVsZCB0aGlzLmhhbmRsZUljZUNvbm5lY3Rpb25GYWlsdXJlKDAsUy5XZWJydGNFcnJvcnMuSUNFRmFpbHVyZShcIlBVQkxJU0hcIixgbG9jYWwgY2FuZGlkYXRlIC0gJHsoVD0oaD0ocD10aGlzLnB1Ymxpc2hDb25uZWN0aW9uKT09bnVsbD92b2lkIDA6cC5zZWxlY3RlZENhbmRpZGF0ZVBhaXIpPT1udWxsP3ZvaWQgMDpoLmxvY2FsKT09bnVsbD92b2lkIDA6VC5jYW5kaWRhdGV9OyByZW1vdGUgY2FuZGlkYXRlIC0gJHsoRT0oZj0oZz10aGlzLnB1Ymxpc2hDb25uZWN0aW9uKT09bnVsbD92b2lkIDA6Zy5zZWxlY3RlZENhbmRpZGF0ZVBhaXIpPT1udWxsP3ZvaWQgMDpmLnJlbW90ZSk9PW51bGw/dm9pZCAwOkUuY2FuZGlkYXRlfWApKTp0aGlzLnB1Ymxpc2hEaXNjb25uZWN0VGltZXI9d2luZG93LnNldFRpbWVvdXQoKCk9Pnt2YXIgdixSLCQsdWUsZ2UscGUsU3Q7KCh2PXRoaXMucHVibGlzaENvbm5lY3Rpb24pPT1udWxsP3ZvaWQgMDp2LmNvbm5lY3Rpb25TdGF0ZSkhPT1cImNvbm5lY3RlZFwiJiZ0aGlzLmhhbmRsZUljZUNvbm5lY3Rpb25GYWlsdXJlKDAsUy5XZWJydGNFcnJvcnMuSUNFRGlzY29ubmVjdGVkKFwiUFVCTElTSFwiLGBsb2NhbCBjYW5kaWRhdGUgLSAkeyh1ZT0oJD0oUj10aGlzLnB1Ymxpc2hDb25uZWN0aW9uKT09bnVsbD92b2lkIDA6Ui5zZWxlY3RlZENhbmRpZGF0ZVBhaXIpPT1udWxsP3ZvaWQgMDokLmxvY2FsKT09bnVsbD92b2lkIDA6dWUuY2FuZGlkYXRlfTsgcmVtb3RlIGNhbmRpZGF0ZSAtICR7KFN0PShwZT0oZ2U9dGhpcy5wdWJsaXNoQ29ubmVjdGlvbik9PW51bGw/dm9pZCAwOmdlLnNlbGVjdGVkQ2FuZGlkYXRlUGFpcik9PW51bGw/dm9pZCAwOnBlLnJlbW90ZSk9PW51bGw/dm9pZCAwOlN0LmNhbmRpZGF0ZX1gKSl9LDVlMykpfSksb25JY2VDYW5kaWRhdGU6bj0+e3ZhciBkOyhkPXRoaXMuY29ubmVjdGl2aXR5TGlzdGVuZXIpPT1udWxsfHxkLm9uSUNFQ2FuZGlkYXRlKG4sITApfSxvblNlbGVjdGVkQ2FuZGlkYXRlUGFpckNoYW5nZTpuPT57dmFyIGQ7KGQ9dGhpcy5jb25uZWN0aXZpdHlMaXN0ZW5lcik9PW51bGx8fGQub25TZWxlY3RlZElDRUNhbmRpZGF0ZVBhaXJDaGFuZ2UobiwhMCl9fSxvPXtvbkFwaUNoYW5uZWxNZXNzYWdlOm49Pnt0aGlzLm9ic2VydmVyLm9uTm90aWZpY2F0aW9uKEpTT04ucGFyc2UobikpfSxvblRyYWNrQWRkOm49PntsLmQoSSxcIltTdWJzY3JpYmVdIG9uVHJhY2tBZGRcIixgJHtufWApLHRoaXMub2JzZXJ2ZXIub25UcmFja0FkZChuKX0sb25UcmFja1JlbW92ZTpuPT57bC5kKEksXCJbU3Vic2NyaWJlXSBvblRyYWNrUmVtb3ZlXCIsYCR7bn1gKSx0aGlzLm9ic2VydmVyLm9uVHJhY2tSZW1vdmUobil9LG9uSWNlQ29ubmVjdGlvbkNoYW5nZTpuPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgZDtpZihlKDEsbiwhMCksbj09PVwiY29ubmVjdGVkXCIpe2xldCB1PXRoaXMuY2FsbGJhY2tzLmdldChzdCk7dGhpcy5jYWxsYmFja3MuZGVsZXRlKHN0KSwoZD10aGlzLmNvbm5lY3Rpdml0eUxpc3RlbmVyKT09bnVsbHx8ZC5vbklDRVN1Y2Nlc3MoITEpLHUmJnUucHJvbWlzZS5yZXNvbHZlKCEwKX19KSxvbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZTpuPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgZCx1LHAsaCxULGcsZjtpZihlKDEsbiwhMSksbj09PVwiZmFpbGVkXCIpeWllbGQgdGhpcy5oYW5kbGVJY2VDb25uZWN0aW9uRmFpbHVyZSgxLFMuV2VicnRjRXJyb3JzLklDRUZhaWx1cmUoXCJTVUJTQ1JJQkVcIixgbG9jYWwgY2FuZGlkYXRlIC0gJHsocD0odT0oZD10aGlzLnN1YnNjcmliZUNvbm5lY3Rpb24pPT1udWxsP3ZvaWQgMDpkLnNlbGVjdGVkQ2FuZGlkYXRlUGFpcik9PW51bGw/dm9pZCAwOnUubG9jYWwpPT1udWxsP3ZvaWQgMDpwLmNhbmRpZGF0ZX07IHJlbW90ZSBjYW5kaWRhdGUgLSAkeyhnPShUPShoPXRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbik9PW51bGw/dm9pZCAwOmguc2VsZWN0ZWRDYW5kaWRhdGVQYWlyKT09bnVsbD92b2lkIDA6VC5yZW1vdGUpPT1udWxsP3ZvaWQgMDpnLmNhbmRpZGF0ZX1gKSk7ZWxzZSBpZihuPT09XCJkaXNjb25uZWN0ZWRcIilzZXRUaW1lb3V0KCgpPT57dmFyIEUsdixSLCQsdWUsZ2UscGU7KChFPXRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbik9PW51bGw/dm9pZCAwOkUuY29ubmVjdGlvblN0YXRlKT09PVwiZGlzY29ubmVjdGVkXCImJnRoaXMuaGFuZGxlSWNlQ29ubmVjdGlvbkZhaWx1cmUoMSxTLldlYnJ0Y0Vycm9ycy5JQ0VEaXNjb25uZWN0ZWQoXCJTVUJTQ1JJQkVcIixgbG9jYWwgY2FuZGlkYXRlIC0gJHsoJD0oUj0odj10aGlzLnN1YnNjcmliZUNvbm5lY3Rpb24pPT1udWxsP3ZvaWQgMDp2LnNlbGVjdGVkQ2FuZGlkYXRlUGFpcik9PW51bGw/dm9pZCAwOlIubG9jYWwpPT1udWxsP3ZvaWQgMDokLmNhbmRpZGF0ZX07IHJlbW90ZSBjYW5kaWRhdGUgLSAkeyhwZT0oZ2U9KHVlPXRoaXMuc3Vic2NyaWJlQ29ubmVjdGlvbik9PW51bGw/dm9pZCAwOnVlLnNlbGVjdGVkQ2FuZGlkYXRlUGFpcik9PW51bGw/dm9pZCAwOmdlLnJlbW90ZSk9PW51bGw/dm9pZCAwOnBlLmNhbmRpZGF0ZX1gKSl9LDVlMyk7ZWxzZSBpZihuPT09XCJjb25uZWN0ZWRcIil7KGY9dGhpcy5zdWJzY3JpYmVDb25uZWN0aW9uKT09bnVsbHx8Zi5oYW5kbGVTZWxlY3RlZEljZUNhbmRpZGF0ZVBhaXJzKCk7bGV0IEU9dGhpcy5jYWxsYmFja3MuZ2V0KHN0KTt0aGlzLmNhbGxiYWNrcy5kZWxldGUoc3QpLEUmJkUucHJvbWlzZS5yZXNvbHZlKCEwKX19KSxvbkljZUNhbmRpZGF0ZTpuPT57dmFyIGQ7KGQ9dGhpcy5jb25uZWN0aXZpdHlMaXN0ZW5lcik9PW51bGx8fGQub25JQ0VDYW5kaWRhdGUobiwhMSl9LG9uU2VsZWN0ZWRDYW5kaWRhdGVQYWlyQ2hhbmdlOm49Pnt2YXIgZDsoZD10aGlzLmNvbm5lY3Rpdml0eUxpc3RlbmVyKT09bnVsbHx8ZC5vblNlbGVjdGVkSUNFQ2FuZGlkYXRlUGFpckNoYW5nZShuLCExKX19O3RoaXMucHVibGlzaENvbm5lY3Rpb258fCh0aGlzLnB1Ymxpc2hDb25uZWN0aW9uPW5ldyBYdCh0aGlzLnNpZ25hbCx0aGlzLmluaXRDb25maWcucnRjQ29uZmlndXJhdGlvbixzKSksdGhpcy5zdWJzY3JpYmVDb25uZWN0aW9ufHwodGhpcy5zdWJzY3JpYmVDb25uZWN0aW9uPW5ldyBlaSh0aGlzLnNpZ25hbCx0aGlzLmluaXRDb25maWcucnRjQ29uZmlndXJhdGlvbix0aGlzLmlzRmxhZ0VuYWJsZWQuYmluZCh0aGlzKSxvKSl9KHI9dGhpcy53ZWJydGNJbnRlcm5hbHMpPT1udWxsfHxyLnNldFBlZXJDb25uZWN0aW9ucyh7cHVibGlzaDoodD10aGlzLnB1Ymxpc2hDb25uZWN0aW9uKT09bnVsbD92b2lkIDA6dC5uYXRpdmVDb25uZWN0aW9uLHN1YnNjcmliZTooaT10aGlzLnN1YnNjcmliZUNvbm5lY3Rpb24pPT1udWxsP3ZvaWQgMDppLm5hdGl2ZUNvbm5lY3Rpb259KX1uZWdvdGlhdGVKb2luV2l0aFJldHJ5KHMpe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7bmFtZTplLGRhdGE6dCxhdXRvU3Vic2NyaWJlVmlkZW86aSxpc1dlYlJUQzpyPSEwfSl7dHJ5e3lpZWxkIHRoaXMubmVnb3RpYXRlSm9pbih7bmFtZTplLGRhdGE6dCxhdXRvU3Vic2NyaWJlVmlkZW86aSxpc1dlYlJUQzpyfSl9Y2F0Y2gobyl7bC5lKEksXCJKb2luIG5lZ290aWF0aW9uIGZhaWxlZCBcXHUyNzRDXCIsbyk7bGV0IG49byBpbnN0YW5jZW9mIGs/bzpTLldlYnNvY2tldE1ldGhvZEVycm9ycy5TZXJ2ZXJFcnJvcnMoNTAwLFwiSk9JTlwiLGBXZWJzb2NrZXQgam9pbiBlcnJvciAtICR7by5tZXNzYWdlfWApLGQ9cGFyc2VJbnQoYCR7bi5jb2RlLzEwMH1gKT09PTV8fFtQLldlYlNvY2tldENvbm5lY3Rpb25FcnJvcnMuV0VCU09DS0VUX0NPTk5FQ1RJT05fTE9TVCw0MjldLmluY2x1ZGVzKG4uY29kZSk7aWYobi5jb2RlPT09NDEwJiYobi5pc1Rlcm1pbmFsPSEwKSxkKXt0aGlzLmpvaW5SZXRyeUNvdW50PTAsbi5pc1Rlcm1pbmFsPSExO2xldCB1PSgpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5qb2luUmV0cnlDb3VudCsrLHlpZWxkIHRoaXMubmVnb3RpYXRlSm9pbih7bmFtZTplLGRhdGE6dCxhdXRvU3Vic2NyaWJlVmlkZW86aSxpc1dlYlJUQzpyfSl9KTt5aWVsZCB0aGlzLnJldHJ5U2NoZWR1bGVyLnNjaGVkdWxlKHtjYXRlZ29yeToyLGVycm9yOm4sdGFzazp1LG9yaWdpbmFsU3RhdGU6XCJKb2luZWRcIixjaGFuZ2VTdGF0ZTohMX0pfWVsc2UgdGhyb3cgb319KX1uZWdvdGlhdGVKb2luKHMpe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7bmFtZTplLGRhdGE6dCxhdXRvU3Vic2NyaWJlVmlkZW86aSxpc1dlYlJUQzpyPSEwfSl7cmV0dXJuIHI/eWllbGQgdGhpcy5uZWdvdGlhdGVKb2luV2ViUlRDKHtuYW1lOmUsZGF0YTp0LGF1dG9TdWJzY3JpYmVWaWRlbzppfSk6eWllbGQgdGhpcy5uZWdvdGlhdGVKb2luTm9uV2ViUlRDKHtuYW1lOmUsZGF0YTp0LGF1dG9TdWJzY3JpYmVWaWRlbzppfSl9KX1uZWdvdGlhdGVKb2luV2ViUlRDKHIpe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7bmFtZTplLGRhdGE6dCxhdXRvU3Vic2NyaWJlVmlkZW86aX0pe2lmKGwuZChJLFwiXFx1MjNGMyBqb2luOiBOZWdvdGlhdGluZyBvdmVyIFBVQkxJU0ggY29ubmVjdGlvblwiKSwhdGhpcy5wdWJsaXNoQ29ubmVjdGlvbilyZXR1cm4gbC5lKEksXCJQdWJsaXNoIHBlZXIgY29ubmVjdGlvbiBub3QgZm91bmQsIGNhbm5vdCBuZWdvdGlhdGVcIiksITE7bGV0IHM9eWllbGQgdGhpcy5wdWJsaXNoQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigpO3lpZWxkIHRoaXMucHVibGlzaENvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihzKTtsZXQgbz10aGlzLmlzRmxhZ0VuYWJsZWQoXCJzdWJzY3JpYmVEZWdyYWRhdGlvblwiKSxuPXRoaXMuaXNGbGFnRW5hYmxlZChcInNpbXVsY2FzdFwiKSxkPXRoaXMuaXNGbGFnRW5hYmxlZChcIm9uRGVtYW5kVHJhY2tzXCIpLHU9eWllbGQgdGhpcy5zaWduYWwuam9pbihlLHQsIWksbyxuLGQscyk7dGhpcy5zZXRTRlVOb2RlSWQodT09bnVsbD92b2lkIDA6dS5zZnVfbm9kZV9pZCkseWllbGQgdGhpcy5wdWJsaXNoQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbih1KTtmb3IobGV0IHAgb2YgdGhpcy5wdWJsaXNoQ29ubmVjdGlvbi5jYW5kaWRhdGVzKXlpZWxkIHRoaXMucHVibGlzaENvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKHApO3JldHVybiB0aGlzLnB1Ymxpc2hDb25uZWN0aW9uLmluaXRBZnRlckpvaW4oKSwhIXV9KX1uZWdvdGlhdGVKb2luTm9uV2ViUlRDKHIpe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7bmFtZTplLGRhdGE6dCxhdXRvU3Vic2NyaWJlVmlkZW86aX0pe2wuZChJLFwiXFx1MjNGMyBqb2luOiBOZWdvdGlhdGluZyBOb24tV2ViUlRDXCIpO2xldCBzPXRoaXMuaXNGbGFnRW5hYmxlZChcInN1YnNjcmliZURlZ3JhZGF0aW9uXCIpLG89dGhpcy5pc0ZsYWdFbmFibGVkKFwic2ltdWxjYXN0XCIpLG49dGhpcy5pc0ZsYWdFbmFibGVkKFwib25EZW1hbmRUcmFja3NcIiksZD15aWVsZCB0aGlzLnNpZ25hbC5qb2luKGUsdCwhaSxzLG8sbik7cmV0dXJuIHRoaXMuc2V0U0ZVTm9kZUlkKGQ9PW51bGw/dm9pZCAwOmQuc2Z1X25vZGVfaWQpLCEhZH0pfW5lZ290aWF0ZU9uRmlyc3RQdWJsaXNoKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2lmKGwuZChJLFwiXFx1MjNGMyBOZWdvdGlhdGluZyBvZmZlciBvdmVyIFBVQkxJU0ggY29ubmVjdGlvblwiKSwhdGhpcy5wdWJsaXNoQ29ubmVjdGlvbilyZXR1cm4gbC5lKEksXCJQdWJsaXNoIHBlZXIgY29ubmVjdGlvbiBub3QgZm91bmQsIGNhbm5vdCBuZWdvdGlhdGVcIiksITE7dHJ5e2xldCBlPXlpZWxkIHRoaXMucHVibGlzaENvbm5lY3Rpb24uY3JlYXRlT2ZmZXIodGhpcy50cmFja1N0YXRlcyk7eWllbGQgdGhpcy5wdWJsaXNoQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKGUpO2xldCB0PXlpZWxkIHRoaXMuc2lnbmFsLm9mZmVyKGUsdGhpcy50cmFja1N0YXRlcyk7eWllbGQgdGhpcy5wdWJsaXNoQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbih0KTtmb3IobGV0IGkgb2YgdGhpcy5wdWJsaXNoQ29ubmVjdGlvbi5jYW5kaWRhdGVzKXlpZWxkIHRoaXMucHVibGlzaENvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKGkpO3JldHVybiB0aGlzLnB1Ymxpc2hDb25uZWN0aW9uLmluaXRBZnRlckpvaW4oKSwhIXR9Y2F0Y2goZSl7aWYoZSBpbnN0YW5jZW9mIGsmJmUuY29kZT09PTQyMSlyZXR1cm4hMDt0aHJvdyBlfX0pfXBlcmZvcm1QdWJsaXNoUmVuZWdvdGlhdGlvbihlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bC5kKEksXCJcXHUyM0YzIFtyb2xlPVBVQkxJU0hdIG9uUmVuZWdvdGlhdGlvbk5lZWRlZCBTVEFSVFwiLHRoaXMudHJhY2tTdGF0ZXMpO2xldCB0PXRoaXMuY2FsbGJhY2tzLmdldChydCk7aWYoIXQpe2wudyhJLFwibm8gY2FsbGJhY2sgZm91bmQgZm9yIHJlbmVnb3RpYXRpb25cIik7cmV0dXJufWlmKCF0aGlzLnB1Ymxpc2hDb25uZWN0aW9uKXtsLmUoSSxcIlB1Ymxpc2ggcGVlciBjb25uZWN0aW9uIG5vdCBmb3VuZCwgY2Fubm90IHJlbmVnb3RpYXRlXCIpO3JldHVybn10cnl7bGV0IGk9eWllbGQgdGhpcy5wdWJsaXNoQ29ubmVjdGlvbi5jcmVhdGVPZmZlcih0aGlzLnRyYWNrU3RhdGVzLGUpO3lpZWxkIHRoaXMucHVibGlzaENvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihpKSxsLnRpbWUoXCJyZW5lZ290aWF0aW9uLW9mZmVyLWV4Y2hhbmdlXCIpO2xldCByPXlpZWxkIHRoaXMuc2lnbmFsLm9mZmVyKGksdGhpcy50cmFja1N0YXRlcyk7dGhpcy5jYWxsYmFja3MuZGVsZXRlKHJ0KSxsLnRpbWVFbmQoXCJyZW5lZ290aWF0aW9uLW9mZmVyLWV4Y2hhbmdlXCIpLHlpZWxkIHRoaXMucHVibGlzaENvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24ociksdC5wcm9taXNlLnJlc29sdmUoITApLGwuZChJLFwiW3JvbGU9UFVCTElTSF0gb25SZW5lZ290aWF0aW9uTmVlZGVkIERPTkUgXFx1MjcwNVwiKX1jYXRjaChpKXtsZXQgcjtpIGluc3RhbmNlb2Ygaz9yPWk6cj1TLkdlbmVyaWNFcnJvcnMuVW5rbm93bihcIlBVQkxJU0hcIixpLm1lc3NhZ2UpLHIuY29kZT09PTQyMT90LnByb21pc2UucmVzb2x2ZSghMCk6dC5wcm9taXNlLnJlamVjdChyKSxsLmQoSSxcIltyb2xlPVBVQkxJU0hdIG9uUmVuZWdvdGlhdGlvbk5lZWRlZCBGQUlMRUQgXFx1Mjc0Q1wiKX19KX1oYW5kbGVJY2VDb25uZWN0aW9uRmFpbHVyZShlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt0aGlzLnJldHJ5U2NoZWR1bGVyLmlzVGFza0luUHJvZ3Jlc3MoMD8zOjQpfHwoZT09PTA/dGhpcy5yZXRyeVNjaGVkdWxlci5zY2hlZHVsZSh7Y2F0ZWdvcnk6MyxlcnJvcjp0LHRhc2s6dGhpcy5yZXRyeVB1Ymxpc2hJY2VGYWlsZWRUYXNrLG9yaWdpbmFsU3RhdGU6XCJKb2luZWRcIn0pOnRoaXMucmV0cnlTY2hlZHVsZXIuc2NoZWR1bGUoe2NhdGVnb3J5OjQsZXJyb3I6dCx0YXNrOnRoaXMucmV0cnlTdWJzY3JpYmVJY2VGYWlsZWRUYXNrLG9yaWdpbmFsU3RhdGU6XCJKb2luZWRcIn0pKX0pfWludGVybmFsQ29ubmVjdChlLHQsaSxyKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIG8sbixkO2wuZChJLFwiY29ubmVjdDogc3RhcnRlZCBcXHUyM0YwXCIpO2xldCBzPW5ldyBEYXRlO3RyeXt0aGlzLmFuYWx5dGljc1RpbWVyLnN0YXJ0KFwiaW5pdF9yZXNwb25zZV90aW1lXCIpLHRoaXMuaW5pdENvbmZpZz15aWVsZCB0aS5mZXRjaEluaXRDb25maWcoe3Rva2VuOmUscGVlcklkOmksdXNlckFnZW50OnRoaXMuc3RvcmUuZ2V0VXNlckFnZW50KCksaW5pdEVuZHBvaW50OnQsaWNlU2VydmVyczpyfSksKG89dGhpcy5jb25uZWN0aXZpdHlMaXN0ZW5lcik9PW51bGx8fG8ub25Jbml0U3VjY2Vzcyh0aGlzLmluaXRDb25maWcuZW5kcG9pbnQpO2xldCB1PXRoaXMuc3RvcmUuZ2V0Um9vbSgpO3JldHVybiB1JiYodS5lZmZlY3RzS2V5PShuPXRoaXMuaW5pdENvbmZpZy5jb25maWcudmIpPT1udWxsP3ZvaWQgMDpuLmVmZmVjdHNLZXksdS5pc0VmZmVjdHNFbmFibGVkPXRoaXMuaXNGbGFnRW5hYmxlZChcImVmZmVjdHNTREtFbmFibGVkXCIpLHUuZGlzYWJsZU5vbmVMYXllclJlcXVlc3Q9dGhpcy5pc0ZsYWdFbmFibGVkKFwiZGlzYWJsZU5vbmVMYXllclJlcXVlc3RcIiksdS5pc1ZCRW5hYmxlZD10aGlzLmlzRmxhZ0VuYWJsZWQoXCJ2YlwiKSx1LmlzSGlwYWFFbmFibGVkPXRoaXMuaXNGbGFnRW5hYmxlZChcImhpcGFhXCIpLHUuaXNOb2lzZUNhbmNlbGxhdGlvbkVuYWJsZWQ9dGhpcy5pc0ZsYWdFbmFibGVkKFwibm9pc2VDYW5jZWxsYXRpb25cIikpLHRoaXMuYW5hbHl0aWNzVGltZXIuZW5kKFwiaW5pdF9yZXNwb25zZV90aW1lXCIpLEhlLnNldFdlYnNvY2tldEVuZHBvaW50KHRoaXMuaW5pdENvbmZpZy5lbmRwb2ludCksdGhpcy52YWxpZGF0ZU5vdERpc2Nvbm5lY3RlZChcInBvc3QgaW5pdFwiKSx5aWVsZCB0aGlzLm9wZW5TaWduYWwoZSxpKSx0aGlzLm9ic2VydmVyLm9uQ29ubmVjdGVkKCksKGQ9dGhpcy5jb25uZWN0aXZpdHlMaXN0ZW5lcik9PW51bGx8fGQub25TaWduYWxsaW5nU3VjY2VzcygpLHRoaXMuc3RvcmUuc2V0U2ltdWxjYXN0RW5hYmxlZCh0aGlzLmlzRmxhZ0VuYWJsZWQoXCJzaW11bGNhc3RcIikpLGwuZChJLFwiQWRkaW5nIEFuYWx5dGljcyBUcmFuc3BvcnQ6IEpzb25ScGNTaWduYWxcIiksdGhpcy5hbmFseXRpY3NFdmVudHNTZXJ2aWNlLnNldFRyYW5zcG9ydCh0aGlzLmFuYWx5dGljc1NpZ25hbFRyYW5zcG9ydCksdGhpcy5hbmFseXRpY3NFdmVudHNTZXJ2aWNlLmZsdXNoKCksdGhpcy5pbml0Q29uZmlnfWNhdGNoKHUpe3Rocm93IHRoaXMuc3RhdGUhPT1cIlJlY29ubmVjdGluZ1wiJiZ0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkuY29ubmVjdCh1LHRoaXMuZ2V0QWRkaXRpb25hbEFuYWx5dGljc1Byb3BlcnRpZXMoKSxzLG5ldyBEYXRlLHQpKSxsLmUoSSxcIlxcdTI3NEMgaW50ZXJuYWwgY29ubmVjdDogZmFpbGVkXCIsdSksdX19KX12YWxpZGF0ZU5vdERpc2Nvbm5lY3RlZChlKXtpZih0aGlzLnN0YXRlPT09XCJEaXNjb25uZWN0ZWRcIil0aHJvdyBsLncoSSxcImFib3J0aW5nIGpvaW4gYXMgdHJhbnNwb3J0IHN0YXRlIGlzIGRpc2Nvbm5lY3RlZFwiKSxTLkdlbmVyaWNFcnJvcnMuVmFsaWRhdGlvbkZhaWxlZChgbGVhdmUgY2FsbGVkIGJlZm9yZSBqb2luIGNvdWxkIGNvbXBsZXRlIC0gc3RhZ2U9JHtlfWApfW9wZW5TaWduYWwoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYoIXRoaXMuaW5pdENvbmZpZyl0aHJvdyBTLkFQSUVycm9ycy5Jbml0Q29uZmlnTm90QXZhaWxhYmxlKFwiSU5JVFwiLFwiSW5pdCBDb25maWcgbm90IGZvdW5kXCIpO2wuZChJLFwiXFx1MjNGMyBpbnRlcm5hbCBjb25uZWN0OiBjb25uZWN0aW5nIHRvIHdzIGVuZHBvaW50XCIsdGhpcy5pbml0Q29uZmlnLmVuZHBvaW50KTtsZXQgaT1uZXcgVVJMKHRoaXMuaW5pdENvbmZpZy5lbmRwb2ludCk7aS5zZWFyY2hQYXJhbXMuc2V0KFwicGVlclwiLHQpLGkuc2VhcmNoUGFyYW1zLnNldChcInRva2VuXCIsZSksaS5zZWFyY2hQYXJhbXMuc2V0KFwidXNlcl9hZ2VudF92MlwiLHRoaXMuc3RvcmUuZ2V0VXNlckFnZW50KCkpLGkuc2VhcmNoUGFyYW1zLnNldChcInByb3RvY29sX3ZlcnNpb25cIixpYSksaS5zZWFyY2hQYXJhbXMuc2V0KFwicHJvdG9jb2xfc3BlY1wiLHJhKSx0aGlzLmVuZHBvaW50PWkudG9TdHJpbmcoKSx0aGlzLmFuYWx5dGljc1RpbWVyLnN0YXJ0KFwid3NfY29ubmVjdF90aW1lXCIpLHlpZWxkIHRoaXMuc2lnbmFsLm9wZW4odGhpcy5lbmRwb2ludCksdGhpcy5hbmFseXRpY3NUaW1lci5lbmQoXCJ3c19jb25uZWN0X3RpbWVcIiksdGhpcy5hbmFseXRpY3NUaW1lci5zdGFydChcIm9uX3BvbGljeV9jaGFuZ2VfdGltZVwiKSx0aGlzLmFuYWx5dGljc1RpbWVyLnN0YXJ0KFwicm9vbV9zdGF0ZV90aW1lXCIpLGwuZChJLFwiXFx1MjcwNSBpbnRlcm5hbCBjb25uZWN0OiBjb25uZWN0ZWQgdG8gd3MgZW5kcG9pbnRcIil9KX1pbml0U3RhdHNBbmFseXRpY3MoKXt2YXIgZSx0O3RoaXMuaXNGbGFnRW5hYmxlZChcInB1Ymxpc2hTdGF0c1wiKSYmKHRoaXMucHVibGlzaFN0YXRzQW5hbHl0aWNzPW5ldyBRdCh0aGlzLnN0b3JlLHRoaXMuZXZlbnRCdXMsdGhpcy5nZXRWYWx1ZUZyb21Jbml0Q29uZmlnKFwicHVibGlzaFN0YXRzXCIsXCJtYXhTYW1wbGVXaW5kb3dTaXplXCIsMzApLHRoaXMuZ2V0VmFsdWVGcm9tSW5pdENvbmZpZyhcInB1Ymxpc2hTdGF0c1wiLFwibWF4U2FtcGxlUHVzaEludGVydmFsXCIsMzAwKSksKGU9dGhpcy5nZXRXZWJydGNJbnRlcm5hbHMoKSk9PW51bGx8fGUuc3RhcnQoKSksdGhpcy5pc0ZsYWdFbmFibGVkKFwic3Vic2NyaWJlU3RhdHNcIikmJih0aGlzLnN1YnNjcmliZVN0YXRzQW5hbHl0aWNzPW5ldyB6dCh0aGlzLnN0b3JlLHRoaXMuZXZlbnRCdXMsdGhpcy5nZXRWYWx1ZUZyb21Jbml0Q29uZmlnKFwic3Vic2NyaWJlU3RhdHNcIixcIm1heFNhbXBsZVdpbmRvd1NpemVcIiwxMCksdGhpcy5nZXRWYWx1ZUZyb21Jbml0Q29uZmlnKFwic3Vic2NyaWJlU3RhdHNcIixcIm1heFNhbXBsZVB1c2hJbnRlcnZhbFwiLDYwKSksKHQ9dGhpcy5nZXRXZWJydGNJbnRlcm5hbHMoKSk9PW51bGx8fHQuc3RhcnQoKSl9Z2V0VmFsdWVGcm9tSW5pdENvbmZpZyhlLHQsaSl7dmFyIHIscztyZXR1cm4oKHM9KHI9dGhpcy5pbml0Q29uZmlnKT09bnVsbD92b2lkIDA6ci5jb25maWdbZV0pPT1udWxsP3ZvaWQgMDpzW3RdKXx8aX1kb2VzUm9sZU5lZWRXZWJSVEMoZSl7dmFyIHIscztpZighdGhpcy5pc0ZsYWdFbmFibGVkKFwibm9uV2ViUlRDRGlzYWJsZU9mZmVyXCIpKXJldHVybiEwO2xldCB0PSEhKGUucHVibGlzaFBhcmFtcy5hbGxvd2VkJiYoKHI9ZS5wdWJsaXNoUGFyYW1zLmFsbG93ZWQpPT1udWxsP3ZvaWQgMDpyLmxlbmd0aCk+MCksaT0hIShlLnN1YnNjcmliZVBhcmFtcy5zdWJzY3JpYmVUb1JvbGVzJiYoKHM9ZS5zdWJzY3JpYmVQYXJhbXMuc3Vic2NyaWJlVG9Sb2xlcyk9PW51bGw/dm9pZCAwOnMubGVuZ3RoKT4wKTtyZXR1cm4gdHx8aX1kb2VzTG9jYWxQZWVyTmVlZFdlYlJUQygpe3ZhciB0O2xldCBlPSh0PXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCkpPT1udWxsP3ZvaWQgMDp0LnJvbGU7cmV0dXJuIGU/dGhpcy5kb2VzUm9sZU5lZWRXZWJSVEMoZSk6ITB9c2V0VHJhbnNwb3J0U3RhdGVGb3JDb25uZWN0KCl7aWYodGhpcy5zdGF0ZT09PVwiRmFpbGVkXCImJih0aGlzLnN0YXRlPVwiRGlzY29ubmVjdGVkXCIpLHRoaXMuc3RhdGUhPT1cIkRpc2Nvbm5lY3RlZFwiJiZ0aGlzLnN0YXRlIT09XCJSZWNvbm5lY3RpbmdcIil0aHJvdyBTLldlYnNvY2tldE1ldGhvZEVycm9ycy5BbHJlYWR5Sm9pbmVkKFwiSk9JTlwiLGBDYW5ub3Qgam9pbiBhIG1lZXRpbmcgaW4gJHt0aGlzLnN0YXRlfSBzdGF0ZWApO3RoaXMuc3RhdGU9PT1cIkRpc2Nvbm5lY3RlZFwiJiYodGhpcy5zdGF0ZT1cIkNvbm5lY3RpbmdcIix0aGlzLm9ic2VydmVyLm9uU3RhdGVDaGFuZ2UodGhpcy5zdGF0ZSkpfXNlbmRFcnJvckFuYWx5dGljc0V2ZW50KGUsdCl7bGV0IGk9dGhpcy5nZXRBZGRpdGlvbmFsQW5hbHl0aWNzUHJvcGVydGllcygpLHI7c3dpdGNoKHQpe2Nhc2UgMDpyPXkuY29ubmVjdChlLGkpO2JyZWFrO2Nhc2UgMTpyPXkuZGlzY29ubmVjdChlLGkpO2JyZWFrO2Nhc2UgMjpyPXkuam9pbih7ZXJyb3I6ZSx0aW1lOnRoaXMuYW5hbHl0aWNzVGltZXIuZ2V0VGltZVRha2VuKFwiam9pbl90aW1lXCIpLGluaXRfcmVzcG9uc2VfdGltZTp0aGlzLmFuYWx5dGljc1RpbWVyLmdldFRpbWVUYWtlbihcImluaXRfcmVzcG9uc2VfdGltZVwiKSx3c19jb25uZWN0X3RpbWU6dGhpcy5hbmFseXRpY3NUaW1lci5nZXRUaW1lVGFrZW4oXCJ3c19jb25uZWN0X3RpbWVcIiksb25fcG9saWN5X2NoYW5nZV90aW1lOnRoaXMuYW5hbHl0aWNzVGltZXIuZ2V0VGltZVRha2VuKFwib25fcG9saWN5X2NoYW5nZV90aW1lXCIpLGxvY2FsX2F1ZGlvX3RyYWNrX3RpbWU6dGhpcy5hbmFseXRpY3NUaW1lci5nZXRUaW1lVGFrZW4oXCJsb2NhbF9hdWRpb190cmFja190aW1lXCIpLGxvY2FsX3ZpZGVvX3RyYWNrX3RpbWU6dGhpcy5hbmFseXRpY3NUaW1lci5nZXRUaW1lVGFrZW4oXCJsb2NhbF92aWRlb190cmFja190aW1lXCIpLHJldHJpZXNfam9pbjp0aGlzLmpvaW5SZXRyeUNvdW50fSk7YnJlYWs7Y2FzZSAzOnI9eS5wdWJsaXNoKHtlcnJvcjplfSk7YnJlYWs7Y2FzZSA0OnI9eS5zdWJzY3JpYmVGYWlsKGUpO2JyZWFrfXRoaXMuZXZlbnRCdXMuYW5hbHl0aWNzLnB1Ymxpc2gocil9Z2V0U3Vic2NyaWJlQ29ubmVjdGlvbigpe3JldHVybiB0aGlzLnN1YnNjcmliZUNvbm5lY3Rpb259Z2V0QWRkaXRpb25hbEFuYWx5dGljc1Byb3BlcnRpZXMoKXt2YXIgbyxuLGQsdSxwLGgsVCxnO2xldCBlPXRvKCksdD10eXBlb2YgZG9jdW1lbnQhPVwidW5kZWZpbmVkXCImJmRvY3VtZW50LmhpZGRlbixpPXRoaXMuc3RvcmUuZ2V0UmVtb3RlVmlkZW9UcmFja3MoKS5maWx0ZXIoZj0+Zi5kZWdyYWRlZCkubGVuZ3RoLHI9KHU9KGQ9KG49KG89dGhpcy5nZXRXZWJydGNJbnRlcm5hbHMoKSk9PW51bGw/dm9pZCAwOm8uZ2V0Q3VycmVudFN0YXRzKCkpPT1udWxsP3ZvaWQgMDpuLmdldExvY2FsUGVlclN0YXRzKCkpPT1udWxsP3ZvaWQgMDpkLnB1Ymxpc2gpPT1udWxsP3ZvaWQgMDp1LmJpdHJhdGUscz0oZz0oVD0oaD0ocD10aGlzLmdldFdlYnJ0Y0ludGVybmFscygpKT09bnVsbD92b2lkIDA6cC5nZXRDdXJyZW50U3RhdHMoKSk9PW51bGw/dm9pZCAwOmguZ2V0TG9jYWxQZWVyU3RhdHMoKSk9PW51bGw/dm9pZCAwOlQuc3Vic2NyaWJlKT09bnVsbD92b2lkIDA6Zy5iaXRyYXRlO3JldHVybntuZXR3b3JrX2luZm86ZSxkb2N1bWVudF9oaWRkZW46dCxudW1fZGVncmFkZWRfdHJhY2tzOmksYml0cmF0ZTp7cHVibGlzaDpyLHN1YnNjcmliZTpzfSxtYXhfc3ViX2JpdHJhdGU6dGhpcy5tYXhTdWJzY3JpYmVCaXRyYXRlLHJlY2VudF9wb25nX3Jlc3BvbnNlX3RpbWVzOnRoaXMuc2lnbmFsLmdldFBvbmdSZXNwb25zZVRpbWVzKCksdHJhbnNwb3J0X3N0YXRlOnRoaXMuc3RhdGV9fX07ZnVuY3Rpb24gTXIoYSl7aWYoIWF8fGEubGVuZ3RoPT09MCl0aHJvdyBTLkFQSUVycm9ycy5JbnZhbGlkVG9rZW5Gb3JtYXQoXCJJTklUXCIsXCJUb2tlbiBjYW5ub3QgYmUgYW4gZW1wdHkgc3RyaW5nIG9yIHVuZGVmaW5lZCBvciBudWxsXCIpO2xldCBlPWEuc3BsaXQoXCIuXCIpO2lmKGUubGVuZ3RoIT09Myl0aHJvdyBTLkFQSUVycm9ycy5JbnZhbGlkVG9rZW5Gb3JtYXQoXCJJTklUXCIsXCJFeHBlY3RlZCAzICcuJyBzZXBhcmF0ZSBmaWVsZHMgLSBoZWFkZXIsIHBheWxvYWQgYW5kIHNpZ25hdHVyZSByZXNwZWN0aXZlbHlcIik7bGV0IHQ9YXRvYihlWzFdKTt0cnl7bGV0IGk9SlNPTi5wYXJzZSh0KTtyZXR1cm57cm9vbUlkOmkucm9vbV9pZCx1c2VySWQ6aS51c2VyX2lkLHJvbGU6aS5yb2xlfX1jYXRjaChpKXt0aHJvdyBTLkFQSUVycm9ycy5JbnZhbGlkVG9rZW5Gb3JtYXQoXCJJTklUXCIsYGNvdWxkbid0IHBhcnNlIHRvIGpzb24gLSAke2kubWVzc2FnZX1gKX19dmFyIHJvPXtwdWJsaXNoZWQ6ITEsaXNJbml0aWFsaXNlZDohMSxpc1JlY29ubmVjdGluZzohMSxpc1ByZXZpZXdJblByb2dyZXNzOiExLGlzUHJldmlld0NhbGxlZDohMSxpc0pvaW5JblByb2dyZXNzOiExLGRldmljZU1hbmFnZXJzSW5pdGlhbGlzZWQ6ITF9LHlyPWNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5UQUc9XCJbSE1TU2RrXTpcIjt0aGlzLnRyYW5zcG9ydFN0YXRlPVwiRGlzY29ubmVjdGVkXCI7dGhpcy5hbmFseXRpY3NUaW1lcj1uZXcgVGk7dGhpcy5zZGtTdGF0ZT1tKHt9LHJvKTt0aGlzLmlzRGlhZ25vc3RpY3M9ITE7dGhpcy5wbGF5bGlzdFNldHRpbmdzPXt2aWRlbzp7Yml0cmF0ZTokcn0sYXVkaW86e2JpdHJhdGU6S3J9fTt0aGlzLmhhbmRsZUF1dG9wbGF5RXJyb3I9ZT0+e3ZhciB0LGk7KGk9KHQ9dGhpcy5lcnJvckxpc3RlbmVyKT09bnVsbD92b2lkIDA6dC5vbkVycm9yKT09bnVsbHx8aS5jYWxsKHQsZSl9O3RoaXMub2JzZXJ2ZXI9e29uTm90aWZpY2F0aW9uOmU9Pnt2YXIgdDtpZihlLm1ldGhvZD09PVwib24tcGVlci1sZWF2ZS1yZXF1ZXN0XCIpe3RoaXMuaGFuZGxlUGVlckxlYXZlUmVxdWVzdChlLnBhcmFtcyk7cmV0dXJufXN3aXRjaChlLm1ldGhvZCl7Y2FzZVwib24tcG9saWN5LWNoYW5nZVwiOnRoaXMuYW5hbHl0aWNzVGltZXIuZW5kKFwib25fcG9saWN5X2NoYW5nZV90aW1lXCIpO2JyZWFrO2Nhc2VcInBlZXItbGlzdFwiOnRoaXMuYW5hbHl0aWNzVGltZXIuZW5kKFwicGVlcl9saXN0X3RpbWVcIiksdGhpcy5zZW5kSm9pbkFuYWx5dGljc0V2ZW50KHRoaXMuc2RrU3RhdGUuaXNQcmV2aWV3Q2FsbGVkKTticmVhaztjYXNlXCJyb29tLXN0YXRlXCI6dGhpcy5hbmFseXRpY3NUaW1lci5lbmQoXCJyb29tX3N0YXRlX3RpbWVcIik7YnJlYWs7ZGVmYXVsdDp9KHQ9dGhpcy5ub3RpZmljYXRpb25NYW5hZ2VyKT09bnVsbHx8dC5oYW5kbGVOb3RpZmljYXRpb24oZSx0aGlzLnNka1N0YXRlLmlzUmVjb25uZWN0aW5nKX0sb25Db25uZWN0ZWQ6KCk9Pnt0aGlzLmluaXROb3RpZmljYXRpb25NYW5hZ2VyKCl9LG9uVHJhY2tBZGQ6ZT0+e3ZhciB0Oyh0PXRoaXMubm90aWZpY2F0aW9uTWFuYWdlcik9PW51bGx8fHQuaGFuZGxlVHJhY2tBZGQoZSl9LG9uVHJhY2tSZW1vdmU6ZT0+e3ZhciB0Oyh0PXRoaXMubm90aWZpY2F0aW9uTWFuYWdlcik9PW51bGx8fHQuaGFuZGxlVHJhY2tSZW1vdmUoZSl9LG9uRmFpbHVyZTplPT57dmFyIHQ7KHQ9dGhpcy5lcnJvckxpc3RlbmVyKT09bnVsbHx8dC5vbkVycm9yKGUpfSxvblN0YXRlQ2hhbmdlOihlLHQpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcixzO2xldCBpPW89PmModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBuLGQ7eWllbGQgdGhpcy5pbnRlcm5hbExlYXZlKCEwLG8pLCF0aGlzLnNka1N0YXRlLmlzUHJldmlld0luUHJvZ3Jlc3MmJiF0aGlzLnNka1N0YXRlLmlzSm9pbkluUHJvZ3Jlc3MmJigoZD0obj10aGlzLmVycm9yTGlzdGVuZXIpPT1udWxsP3ZvaWQgMDpuLm9uRXJyb3IpPT1udWxsfHxkLmNhbGwobixvKSksdGhpcy5zZGtTdGF0ZS5pc1JlY29ubmVjdGluZz0hMX0pO3N3aXRjaChlKXtjYXNlXCJQcmV2aWV3XCI6Y2FzZVwiSm9pbmVkXCI6dGhpcy5pbml0Tm90aWZpY2F0aW9uTWFuYWdlcigpLHRoaXMudHJhbnNwb3J0U3RhdGU9PT1cIlJlY29ubmVjdGluZ1wiJiYoKHI9dGhpcy5saXN0ZW5lcik9PW51bGx8fHIub25SZWNvbm5lY3RlZCgpKTticmVhaztjYXNlXCJGYWlsZWRcIjp5aWVsZCBpKHQpO2JyZWFrO2Nhc2VcIlJlY29ubmVjdGluZ1wiOnRoaXMuc2RrU3RhdGUuaXNSZWNvbm5lY3Rpbmc9ITAsKHM9dGhpcy5saXN0ZW5lcik9PW51bGx8fHMub25SZWNvbm5lY3RpbmcodCk7YnJlYWt9dGhpcy50cmFuc3BvcnRTdGF0ZT1lLGwuZCh0aGlzLlRBRyxcIlRyYW5zcG9ydCBTdGF0ZSBDaGFuZ2VcIix0aGlzLnRyYW5zcG9ydFN0YXRlKX0pfTt0aGlzLmhhbmRsZVBlZXJMZWF2ZVJlcXVlc3Q9ZT0+e3ZhciByO2xldCB0PWUucmVxdWVzdGVkX2J5P3RoaXMuc3RvcmUuZ2V0UGVlckJ5SWQoZS5yZXF1ZXN0ZWRfYnkpOnZvaWQgMCxpPXtyb29tRW5kZWQ6ZS5yb29tX2VuZCxyZWFzb246ZS5yZWFzb24scmVxdWVzdGVkQnk6dH07KHI9dGhpcy5saXN0ZW5lcik9PW51bGx8fHIub25SZW1vdmVkRnJvbVJvb20oaSksdGhpcy5pbnRlcm5hbExlYXZlKCExKX07dGhpcy5oYW5kbGVQcmV2aWV3RXJyb3I9ZT0+e3ZhciB0O3RoaXMuYW5hbHl0aWNzVGltZXIuZW5kKFwicHJldmlld190aW1lXCIpLGUmJigodD10aGlzLmVycm9yTGlzdGVuZXIpPT1udWxsfHx0Lm9uRXJyb3IoZSkpLHRoaXMuc2VuZFByZXZpZXdBbmFseXRpY3NFdmVudChlKSx0aGlzLnNka1N0YXRlLmlzUHJldmlld0luUHJvZ3Jlc3M9ITF9O3RoaXMuaGFuZGxlRGV2aWNlQ2hhbmdlPWU9Pnt2YXIgaSxyO2lmKGUuaXNVc2VyU2VsZWN0aW9uKXJldHVybjtsLmQodGhpcy5UQUcsXCJEZXZpY2UgQ2hhbmdlIGV2ZW50XCIsZSksKHI9KGk9dGhpcy5kZXZpY2VDaGFuZ2VMaXN0ZW5lcik9PW51bGw/dm9pZCAwOmkub25EZXZpY2VDaGFuZ2UpPT1udWxsfHxyLmNhbGwoaSxlKSwoKCk9Pnt2YXIgcyxvLG4sZDtpZihlLmVycm9yJiZlLnR5cGUpe2xldCB1PWUudHlwZS5pbmNsdWRlcyhcImF1ZGlvXCIpPyhzPXRoaXMubG9jYWxQZWVyKT09bnVsbD92b2lkIDA6cy5hdWRpb1RyYWNrOihvPXRoaXMubG9jYWxQZWVyKT09bnVsbD92b2lkIDA6by52aWRlb1RyYWNrOyhuPXRoaXMuZXJyb3JMaXN0ZW5lcik9PW51bGx8fG4ub25FcnJvcihlLmVycm9yKSxbUC5UcmFja3NFcnJvcnMuQ0FOVF9BQ0NFU1NfQ0FQVFVSRV9ERVZJQ0UsUC5UcmFja3NFcnJvcnMuREVWSUNFX0lOX1VTRSxQLlRyYWNrc0Vycm9ycy5ERVZJQ0VfTk9UX0FWQUlMQUJMRV0uaW5jbHVkZXMoZS5lcnJvci5jb2RlKSYmdSYmKHUuc2V0RW5hYmxlZCghMSksKGQ9dGhpcy5saXN0ZW5lcik9PW51bGx8fGQub25UcmFja1VwZGF0ZSgyLHUsdGhpcy5sb2NhbFBlZXIpKX19KSgpfTt0aGlzLmhhbmRsZUF1ZGlvUGx1Z2luRXJyb3I9ZT0+e3ZhciB0O2wuZSh0aGlzLlRBRyxcIkF1ZGlvIFBsdWdpbiBFcnJvciBldmVudFwiLGUpLCh0PXRoaXMuZXJyb3JMaXN0ZW5lcik9PW51bGx8fHQub25FcnJvcihlKX07dGhpcy5oYW5kbGVFcnJvcj1lPT57dmFyIHQ7bC5lKHRoaXMuVEFHLGUpLCh0PXRoaXMuZXJyb3JMaXN0ZW5lcik9PW51bGx8fHQub25FcnJvcihlKX07dGhpcy5oYW5kbGVMb2NhbFJvbGVVcGRhdGU9aT0+Yyh0aGlzLFtpXSxmdW5jdGlvbiooe29sZFJvbGU6ZSxuZXdSb2xlOnR9KXt2YXIgcjt0aGlzLmRldmljZU1hbmFnZXIuY3VycmVudFNlbGVjdGlvbj10aGlzLmRldmljZU1hbmFnZXIuZ2V0Q3VycmVudFNlbGVjdGlvbigpLHlpZWxkIHRoaXMudHJhbnNwb3J0LmhhbmRsZUxvY2FsUm9sZVVwZGF0ZSh7b2xkUm9sZTplLG5ld1JvbGU6dH0pLHlpZWxkKHI9dGhpcy5yb2xlQ2hhbmdlTWFuYWdlcik9PW51bGw/dm9pZCAwOnIuaGFuZGxlTG9jYWxQZWVyUm9sZVVwZGF0ZSh7b2xkUm9sZTplLG5ld1JvbGU6dH0pLHlpZWxkIHRoaXMuaW50ZXJhY3Rpdml0eUNlbnRlci53aGl0ZWJvYXJkLmhhbmRsZUxvY2FsUm9sZVVwZGF0ZSgpfSk7dGhpcy51bnBhdXNlUmVtb3RlVmlkZW9UcmFja3M9KCk9Pnt0aGlzLnN0b3JlLmdldFJlbW90ZVZpZGVvVHJhY2tzKCkuZm9yRWFjaChlPT5lLmhhbmRsZVRyYWNrVW5tdXRlKCkpfTt0aGlzLnNlbmRBdWRpb1ByZXNlbmNlRmFpbGVkPSgpPT57dmFyIHQ7bGV0IGU9Uy5UcmFja3NFcnJvcnMuTm9BdWRpb0RldGVjdGVkKFwiUFJFVklFV1wiKTtsLncodGhpcy5UQUcsXCJBdWRpbyBQcmVzZW5jZSBGYWlsdXJlXCIsdGhpcy50cmFuc3BvcnRTdGF0ZSxlKSx0aGlzLmlzRGlhZ25vc3RpY3MmJigodD10aGlzLmxpc3RlbmVyKT09bnVsbHx8dC5vbkVycm9yKGUpKX07dGhpcy5zZW5kSm9pbkFuYWx5dGljc0V2ZW50PShlPSExLHQpPT57dGhpcy5ldmVudEJ1cy5hbmFseXRpY3MucHVibGlzaCh5LmpvaW4oTShtKHtlcnJvcjp0fSx0aGlzLmFuYWx5dGljc1RpbWVyLmdldFRpbWVzKCkpLHt0aW1lOnRoaXMuYW5hbHl0aWNzVGltZXIuZ2V0VGltZVRha2VuKFwiam9pbl90aW1lXCIpLGlzX3ByZXZpZXdfY2FsbGVkOmUscmV0cmllc19qb2luOnRoaXMudHJhbnNwb3J0LmpvaW5SZXRyeUNvdW50fSkpKX07dGhpcy5zZW5kUHJldmlld0FuYWx5dGljc0V2ZW50PWU9Pnt0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5wdWJsaXNoKHkucHJldmlldyhNKG0oe2Vycm9yOmV9LHRoaXMuYW5hbHl0aWNzVGltZXIuZ2V0VGltZXMoKSkse3RpbWU6dGhpcy5hbmFseXRpY3NUaW1lci5nZXRUaW1lVGFrZW4oXCJwcmV2aWV3X3RpbWVcIil9KSkpfTt0aGlzLnNlbmRBbmFseXRpY3NFdmVudD1lPT57dGhpcy5pc0RpYWdub3N0aWNzfHx0aGlzLmFuYWx5dGljc0V2ZW50c1NlcnZpY2UucXVldWUoZSkuZmx1c2goKX19c2V0U2Vzc2lvblBlZXJJbmZvKGUsdCl7dmFyIHIscyxvLG47bGV0IGk9dGhpcy5zdG9yZS5nZXRSb29tKCk7aWYoIXR8fCFpKXtsLmUodGhpcy5UQUcsXCJzZXRTZXNzaW9uUGVlckluZm8+IExvY2FsIHBlZXIgb3Igcm9vbSBpcyB1bmRlZmluZWRcIik7cmV0dXJufXRoaXMuc2Vzc2lvblBlZXJJbmZvPXtwZWVyOntwZWVyX2lkOnQucGVlcklkLHJvbGU6KHI9dC5yb2xlKT09bnVsbD92b2lkIDA6ci5uYW1lLGpvaW5lZF9hdDooKHM9dC5qb2luZWRBdCk9PW51bGw/dm9pZCAwOnMudmFsdWVPZigpKXx8MCxyb29tX25hbWU6aS5uYW1lLHNlc3Npb25fc3RhcnRlZF9hdDooKG89aS5zdGFydGVkQXQpPT1udWxsP3ZvaWQgMDpvLnZhbHVlT2YoKSl8fDAsdXNlcl9kYXRhOnQuY3VzdG9tZXJVc2VySWQsdXNlcl9uYW1lOnQubmFtZSx0ZW1wbGF0ZV9pZDppLnRlbXBsYXRlSWQsc2Vzc2lvbl9pZDppLnNlc3Npb25JZCx0b2tlbjoobj10aGlzLnN0b3JlLmdldENvbmZpZygpKT09bnVsbD92b2lkIDA6bi5hdXRoVG9rZW59LGFnZW50OnRoaXMuc3RvcmUuZ2V0VXNlckFnZW50KCksZGV2aWNlX2lkOmxpKCksY2x1c3Rlcjp7d2Vic29ja2V0X3VybDplfSx0aW1lc3RhbXA6RGF0ZS5ub3coKX19aW5pdE5vdGlmaWNhdGlvbk1hbmFnZXIoKXt0aGlzLm5vdGlmaWNhdGlvbk1hbmFnZXJ8fCh0aGlzLm5vdGlmaWNhdGlvbk1hbmFnZXI9bmV3IG5yKHRoaXMuc3RvcmUsdGhpcy5ldmVudEJ1cyx0aGlzLnRyYW5zcG9ydCx0aGlzLmxpc3RlbmVyLHRoaXMuYXVkaW9MaXN0ZW5lcikpfWluaXRTdG9yZUFuZE1hbmFnZXJzKGUpe3ZhciB0LGk7aWYodGhpcy5saXN0ZW5lcj1lLHRoaXMuZXJyb3JMaXN0ZW5lcj1lLHRoaXMuZGV2aWNlQ2hhbmdlTGlzdGVuZXI9ZSwodD10aGlzLnN0b3JlKT09bnVsbHx8dC5zZXRFcnJvckxpc3RlbmVyKHRoaXMuZXJyb3JMaXN0ZW5lciksdGhpcy5zZGtTdGF0ZS5pc0luaXRpYWxpc2VkKXsoaT10aGlzLm5vdGlmaWNhdGlvbk1hbmFnZXIpPT1udWxsfHxpLnNldExpc3RlbmVyKHRoaXMubGlzdGVuZXIpLHRoaXMuYXVkaW9TaW5rTWFuYWdlci5zZXRMaXN0ZW5lcih0aGlzLmxpc3RlbmVyKSx0aGlzLmludGVyYWN0aXZpdHlDZW50ZXIuc2V0TGlzdGVuZXIodGhpcy5saXN0ZW5lciksdGhpcy50cmFuc3BvcnQuc2V0TGlzdGVuZXIodGhpcy5saXN0ZW5lcik7cmV0dXJufXRoaXMuc2RrU3RhdGUuaXNJbml0aWFsaXNlZD0hMCx0aGlzLnN0b3JlPW5ldyBGdCx0aGlzLnN0b3JlLnNldEVycm9yTGlzdGVuZXIodGhpcy5lcnJvckxpc3RlbmVyKSx0aGlzLmV2ZW50QnVzPW5ldyBLdCx0aGlzLnBsdWdpblVzYWdlVHJhY2tlcj1uZXcgS2kodGhpcy5ldmVudEJ1cyksdGhpcy53YWtlTG9ja01hbmFnZXI9bmV3IFdpLHRoaXMubmV0d29ya1Rlc3RNYW5hZ2VyPW5ldyBHaSh0aGlzLmV2ZW50QnVzLHRoaXMubGlzdGVuZXIpLHRoaXMucGxheWxpc3RNYW5hZ2VyPW5ldyBMdCh0aGlzLHRoaXMuZXZlbnRCdXMpLHRoaXMuZGV2aWNlTWFuYWdlcj1uZXcgV3QodGhpcy5zdG9yZSx0aGlzLmV2ZW50QnVzKSx0aGlzLmF1ZGlvU2lua01hbmFnZXI9bmV3IEd0KHRoaXMuc3RvcmUsdGhpcy5kZXZpY2VNYW5hZ2VyLHRoaXMuZXZlbnRCdXMpLHRoaXMuYXVkaW9PdXRwdXQ9bmV3IHFpKHRoaXMuZGV2aWNlTWFuYWdlcix0aGlzLmF1ZGlvU2lua01hbmFnZXIpLHRoaXMuYXVkaW9TaW5rTWFuYWdlci5zZXRMaXN0ZW5lcih0aGlzLmxpc3RlbmVyKSx0aGlzLmV2ZW50QnVzLmF1dG9wbGF5RXJyb3Iuc3Vic2NyaWJlKHRoaXMuaGFuZGxlQXV0b3BsYXlFcnJvciksdGhpcy5sb2NhbFRyYWNrTWFuYWdlcj1uZXcgYmUodGhpcy5zdG9yZSx0aGlzLm9ic2VydmVyLHRoaXMuZGV2aWNlTWFuYWdlcix0aGlzLmV2ZW50QnVzLHRoaXMuYW5hbHl0aWNzVGltZXIpLHRoaXMuYW5hbHl0aWNzRXZlbnRzU2VydmljZT1uZXcgJGkodGhpcy5zdG9yZSksdGhpcy50cmFuc3BvcnQ9bmV3IHJpKHRoaXMub2JzZXJ2ZXIsdGhpcy5kZXZpY2VNYW5hZ2VyLHRoaXMuc3RvcmUsdGhpcy5ldmVudEJ1cyx0aGlzLmFuYWx5dGljc0V2ZW50c1NlcnZpY2UsdGhpcy5hbmFseXRpY3NUaW1lcix0aGlzLnBsdWdpblVzYWdlVHJhY2tlciksXCJvbkluaXRTdWNjZXNzXCJpbiBlJiZ0aGlzLnRyYW5zcG9ydC5zZXRDb25uZWN0aXZpdHlMaXN0ZW5lcihlKSx0aGlzLnNlc3Npb25TdG9yZT1uZXcgY3IodGhpcy50cmFuc3BvcnQpLHRoaXMuaW50ZXJhY3Rpdml0eUNlbnRlcj1uZXcganQodGhpcy50cmFuc3BvcnQsdGhpcy5zdG9yZSx0aGlzLmxpc3RlbmVyKSx0aGlzLmV2ZW50QnVzLmFuYWx5dGljcy5zdWJzY3JpYmUodGhpcy5zZW5kQW5hbHl0aWNzRXZlbnQpLHRoaXMuZXZlbnRCdXMuZGV2aWNlQ2hhbmdlLnN1YnNjcmliZSh0aGlzLmhhbmRsZURldmljZUNoYW5nZSksdGhpcy5ldmVudEJ1cy5sb2NhbFZpZGVvVW5tdXRlZE5hdGl2ZWx5LnN1YnNjcmliZSh0aGlzLnVucGF1c2VSZW1vdGVWaWRlb1RyYWNrcyksdGhpcy5ldmVudEJ1cy5sb2NhbEF1ZGlvVW5tdXRlZE5hdGl2ZWx5LnN1YnNjcmliZSh0aGlzLnVucGF1c2VSZW1vdGVWaWRlb1RyYWNrcyksdGhpcy5ldmVudEJ1cy5hdWRpb1BsdWdpbkZhaWxlZC5zdWJzY3JpYmUodGhpcy5oYW5kbGVBdWRpb1BsdWdpbkVycm9yKSx0aGlzLmV2ZW50QnVzLmVycm9yLnN1YnNjcmliZSh0aGlzLmhhbmRsZUVycm9yKX12YWxpZGF0ZUpvaW5lZChlKXtpZighdGhpcy5sb2NhbFBlZXIpdGhyb3cgUy5HZW5lcmljRXJyb3JzLk5vdENvbm5lY3RlZChcIlZBTElEQVRJT05cIixgTm90IGNvbm5lY3RlZCAtICR7ZX1gKX1zZW5kSExTQW5hbHl0aWNzKGUpe3RoaXMuc2VuZEFuYWx5dGljc0V2ZW50KHkuaGxzUGxheWVyRXJyb3IoZSkpfXJlZnJlc2hEZXZpY2VzKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3RoaXMudmFsaWRhdGVKb2luZWQoXCJyZWZyZXNoRGV2aWNlc1wiKSx5aWVsZCB0aGlzLmRldmljZU1hbmFnZXIuaW5pdCghMCl9KX1nZXRXZWJydGNJbnRlcm5hbHMoKXt2YXIgZTtyZXR1cm4oZT10aGlzLnRyYW5zcG9ydCk9PW51bGw/dm9pZCAwOmUuZ2V0V2VicnRjSW50ZXJuYWxzKCl9Z2V0RGVidWdJbmZvKCl7dmFyIHI7aWYoIXRoaXMudHJhbnNwb3J0KXRocm93IGwuZSh0aGlzLlRBRyxcIlRyYW5zcG9ydCBpcyBub3QgZGVmaW5lZFwiKSxuZXcgRXJyb3IoXCJnZXREZWJ1Z0luZm8gY2FuIG9ubHkgYmUgY2FsbGVkIGFmdGVyIGpvaW5cIik7bGV0IGU9dGhpcy50cmFuc3BvcnQuZ2V0V2Vic29ja2V0RW5kcG9pbnQoKSx0PU9iamVjdC52YWx1ZXMobnMpLmZpbHRlcihzPT50aGlzLnRyYW5zcG9ydC5pc0ZsYWdFbmFibGVkKHMpKSxpPShyPXRoaXMuc3RvcmUuZ2V0Q29uZmlnKCkpPT1udWxsP3ZvaWQgMDpyLmluaXRFbmRwb2ludDtyZXR1cm57d2Vic29ja2V0VVJMOmUsZW5hYmxlZEZsYWdzOnQsaW5pdEVuZHBvaW50Oml9fWdldFNlc3Npb25TdG9yZSgpe3JldHVybiB0aGlzLnNlc3Npb25TdG9yZX1nZXRQbGF5bGlzdE1hbmFnZXIoKXtyZXR1cm4gdGhpcy5wbGF5bGlzdE1hbmFnZXJ9Z2V0UmVjb3JkaW5nU3RhdGUoKXt2YXIgZTtyZXR1cm4oZT10aGlzLnN0b3JlLmdldFJvb20oKSk9PW51bGw/dm9pZCAwOmUucmVjb3JkaW5nfWdldFJUTVBTdGF0ZSgpe3ZhciBlO3JldHVybihlPXRoaXMuc3RvcmUuZ2V0Um9vbSgpKT09bnVsbD92b2lkIDA6ZS5ydG1wfWdldEhMU1N0YXRlKCl7dmFyIGU7cmV0dXJuKGU9dGhpcy5zdG9yZS5nZXRSb29tKCkpPT1udWxsP3ZvaWQgMDplLmhsc31nZXRUcmFuc2NyaXB0aW9uU3RhdGUoKXt2YXIgZTtyZXR1cm4oZT10aGlzLnN0b3JlLmdldFJvb20oKSk9PW51bGw/dm9pZCAwOmUudHJhbnNjcmlwdGlvbnN9Z2V0VGVtcGxhdGVBcHBEYXRhKCl7cmV0dXJuIHRoaXMuc3RvcmUuZ2V0VGVtcGxhdGVBcHBEYXRhKCl9Z2V0SW50ZXJhY3Rpdml0eUNlbnRlcigpe3JldHVybiB0aGlzLmludGVyYWN0aXZpdHlDZW50ZXJ9Z2V0UGVlckxpc3RJdGVyYXRvcihlKXtyZXR1cm4gbmV3IGtpKHRoaXMudHJhbnNwb3J0LHRoaXMuc3RvcmUsZSl9dXBkYXRlUGxheWxpc3RTZXR0aW5ncyhlKXtlLnZpZGVvJiZPYmplY3QuYXNzaWduKHRoaXMucGxheWxpc3RTZXR0aW5ncy52aWRlbyxlLnZpZGVvKSxlLmF1ZGlvJiZPYmplY3QuYXNzaWduKHRoaXMucGxheWxpc3RTZXR0aW5ncy5hdWRpbyxlLmF1ZGlvKX1nZXQgbG9jYWxQZWVyKCl7dmFyIGU7cmV0dXJuKGU9dGhpcy5zdG9yZSk9PW51bGw/dm9pZCAwOmUuZ2V0TG9jYWxQZWVyKCl9cHJldmlldyhlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtpZihrdCgpLHl0KCksdGhpcy5zZGtTdGF0ZS5pc1ByZXZpZXdJblByb2dyZXNzKXJldHVybiBQcm9taXNlLnJlamVjdChTLkdlbmVyaWNFcnJvcnMuUHJldmlld0FscmVhZHlJblByb2dyZXNzKFwiUFJFVklFV1wiLFwiUHJldmlldyBhbHJlYWR5IGNhbGxlZFwiKSk7aWYoW1wiSm9pbmVkXCIsXCJSZWNvbm5lY3RpbmdcIl0uaW5jbHVkZXModGhpcy50cmFuc3BvcnRTdGF0ZSkpcmV0dXJuIHRoaXMubWlkQ2FsbFByZXZpZXcoZS5hc1JvbGUsZS5zZXR0aW5ncyk7dGhpcy5hbmFseXRpY3NUaW1lci5zdGFydChcInByZXZpZXdfdGltZVwiKSx0aGlzLnNldFVwUHJldmlldyhlLHQpO2xldCBpPSExLHI9ITEscz1zZXRUaW1lb3V0KCgpPT57dmFyIG8sbjsoIWl8fCFyKSYmKChuPShvPXRoaXMubGlzdGVuZXIpPT1udWxsP3ZvaWQgMDpvLm9uTmV0d29ya1F1YWxpdHkpPT1udWxsfHxuLmNhbGwobywtMSkpfSwzZTMpO3JldHVybiBuZXcgUHJvbWlzZSgobyxuKT0+e2xldCBkPSgpPT5jKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgaDtpZih0aGlzLmxvY2FsUGVlcil7bGV0IFQ9ZS5hc1JvbGUmJnRoaXMuc3RvcmUuZ2V0UG9saWN5Rm9yUm9sZShlLmFzUm9sZSk7dGhpcy5sb2NhbFBlZXIuYXNSb2xlPVR8fHRoaXMubG9jYWxQZWVyLnJvbGV9bGV0IHU9eWllbGQgdGhpcy5sb2NhbFRyYWNrTWFuYWdlci5nZXRUcmFja3NUb1B1Ymxpc2goZS5zZXR0aW5ncyk7dS5mb3JFYWNoKFQ9Pnt2YXIgZztpZih0aGlzLnNldExvY2FsUGVlclRyYWNrKFQpLFQuaXNUcmFja05vdFB1Ymxpc2hpbmcoKSl7bGV0IGY9Uy5UcmFja3NFcnJvcnMuTm9EYXRhSW5UcmFjayhgJHtULnR5cGV9IHRyYWNrIGhhcyBubyBkYXRhLiBtdXRlZDogJHtULm5hdGl2ZVRyYWNrLm11dGVkfSwgcmVhZHlTdGF0ZTogJHtULm5hdGl2ZVRyYWNrLnJlYWR5U3RhdGV9YCk7bC5lKHRoaXMuVEFHLGYpLHRoaXMuc2VuZEFuYWx5dGljc0V2ZW50KHkucHVibGlzaCh7ZGV2aWNlczp0aGlzLmRldmljZU1hbmFnZXIuZ2V0RGV2aWNlcygpLGVycm9yOmZ9KSksKGc9dGhpcy5saXN0ZW5lcik9PW51bGx8fGcub25FcnJvcihmKX19KSwoaD10aGlzLmxvY2FsUGVlcikhPW51bGwmJmguYXVkaW9UcmFjayYmdGhpcy5pbml0UHJldmlld1RyYWNrQXVkaW9MZXZlbE1vbml0b3IoKSx5aWVsZCB0aGlzLmluaXREZXZpY2VNYW5hZ2VycygpLHRoaXMuc2RrU3RhdGUuaXNQcmV2aWV3SW5Qcm9ncmVzcz0hMSx0aGlzLmFuYWx5dGljc1RpbWVyLmVuZChcInByZXZpZXdfdGltZVwiKTtsZXQgcD10aGlzLnN0b3JlLmdldFJvb20oKTtwJiZ0Lm9uUHJldmlldyhwLHUpLHRoaXMuc2VuZFByZXZpZXdBbmFseXRpY3NFdmVudCgpLG8oKX0pO3RoaXMuZXZlbnRCdXMucG9saWN5Q2hhbmdlLnN1YnNjcmliZU9uY2UoZCksdGhpcy5ldmVudEJ1cy5sZWF2ZS5zdWJzY3JpYmVPbmNlKHRoaXMuaGFuZGxlUHJldmlld0Vycm9yKSx0aGlzLmV2ZW50QnVzLmxlYXZlLnN1YnNjcmliZU9uY2UodT0+bih1KSksdGhpcy50cmFuc3BvcnQucHJldmlldyhlLmF1dGhUb2tlbixlLmluaXRFbmRwb2ludCx0aGlzLmxvY2FsUGVlci5wZWVySWQse25hbWU6ZS51c2VyTmFtZSxtZXRhRGF0YTplLm1ldGFEYXRhfHxcIlwifSxlLmF1dG9WaWRlb1N1YnNjcmliZSxlLmljZVNlcnZlcnMpLnRoZW4odT0+e3ZhciBwO2k9ITAsY2xlYXJUaW1lb3V0KHMpLHUmJmUuY2FwdHVyZU5ldHdvcmtRdWFsaXR5SW5QcmV2aWV3JiZ0aGlzLm5ldHdvcmtUZXN0TWFuYWdlci5zdGFydCgocD11LmNvbmZpZyk9PW51bGw/dm9pZCAwOnAubmV0d29ya0hlYWx0aCkudGhlbigoKT0+e3I9ITB9KX0pLmNhdGNoKHU9Pnt0aGlzLmhhbmRsZVByZXZpZXdFcnJvcih1KSxuKHUpfSl9KX0pfW1pZENhbGxQcmV2aWV3KGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBzLG87aWYoIXRoaXMubG9jYWxQZWVyfHx0aGlzLnRyYW5zcG9ydFN0YXRlIT09XCJKb2luZWRcIil0aHJvdyBTLkdlbmVyaWNFcnJvcnMuTm90Q29ubmVjdGVkKFwiVkFMSURBVElPTlwiLFwiTm90IGNvbm5lY3RlZCAtIG1pZENhbGxQcmV2aWV3XCIpO2xldCBpPWUmJnRoaXMuc3RvcmUuZ2V0UG9saWN5Rm9yUm9sZShlKTtpZighaSl0aHJvdyBTLkdlbmVyaWNFcnJvcnMuSW52YWxpZFJvbGUoXCJQUkVWSUVXXCIsYHJvbGUgJHtlfSBkb2VzIG5vdCBleGlzdCBpbiBwb2xpY3lgKTt0aGlzLmxvY2FsUGVlci5hc1JvbGU9aTtsZXQgcj15aWVsZCB0aGlzLmxvY2FsVHJhY2tNYW5hZ2VyLmdldFRyYWNrc1RvUHVibGlzaCh0KTtyLmZvckVhY2gobj0+dGhpcy5zZXRMb2NhbFBlZXJUcmFjayhuKSksKHM9dGhpcy5sb2NhbFBlZXIpIT1udWxsJiZzLmF1ZGlvVHJhY2smJnRoaXMuaW5pdFByZXZpZXdUcmFja0F1ZGlvTGV2ZWxNb25pdG9yKCkseWllbGQgdGhpcy5pbml0RGV2aWNlTWFuYWdlcnMoKSwobz10aGlzLmxpc3RlbmVyKT09bnVsbHx8by5vblByZXZpZXcodGhpcy5zdG9yZS5nZXRSb29tKCkscil9KX1jYW5jZWxNaWRDYWxsUHJldmlldygpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgZSx0LGk7aWYoKCF0aGlzLmxvY2FsUGVlcnx8IXRoaXMubG9jYWxQZWVyLmlzSW5QcmV2aWV3KCkpJiZsLncodGhpcy5UQUcsXCJDYW5ub3QgY2FuY2VsIG1pZCBjYWxsIHByZXZpZXcgYXMgcHJldmlldyBpcyBub3QgaW4gcHJvZ3Jlc3NcIiksKGU9dGhpcy5sb2NhbFBlZXIpIT1udWxsJiZlLmFzUm9sZSYmdGhpcy5sb2NhbFBlZXIucm9sZSl7bGV0IHI9dGhpcy5sb2NhbFBlZXIuYXNSb2xlLHM9dGhpcy5sb2NhbFBlZXIucm9sZTtkZWxldGUgdGhpcy5sb2NhbFBlZXIuYXNSb2xlLHlpZWxkKHQ9dGhpcy5yb2xlQ2hhbmdlTWFuYWdlcik9PW51bGw/dm9pZCAwOnQuZGlmZlJvbGVzQW5kUHVibGlzaFRyYWNrcyh7b2xkUm9sZTpyLG5ld1JvbGU6c30pLChpPXRoaXMubGlzdGVuZXIpPT1udWxsfHxpLm9uUGVlclVwZGF0ZSg4LHRoaXMubG9jYWxQZWVyKX19KX1qb2luKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBkLHUscCxoLFQsZyxmLEU7aWYoa3QoKSx5dCgpLHRoaXMuc2RrU3RhdGUuaXNQcmV2aWV3SW5Qcm9ncmVzcyl0aHJvdyBTLkdlbmVyaWNFcnJvcnMuTm90UmVhZHkoXCJKT0lOXCIsXCJQcmV2aWV3IGlzIGluIHByb2dyZXNzLCBjYW4ndCBqb2luXCIpOyh1PShkPXRoaXMuZXZlbnRCdXMpPT1udWxsP3ZvaWQgMDpkLmxlYXZlKT09bnVsbHx8dS51bnN1YnNjcmliZSh0aGlzLmhhbmRsZVByZXZpZXdFcnJvciksdGhpcy5hbmFseXRpY3NUaW1lci5zdGFydChcImpvaW5fdGltZVwiKSx0aGlzLnNka1N0YXRlLmlzSm9pbkluUHJvZ3Jlc3M9ITA7bGV0e3Jvb21JZDppLHVzZXJJZDpyLHJvbGU6c309TXIoZS5hdXRoVG9rZW4pLG89KChoPShwPXRoaXMubG9jYWxQZWVyKT09bnVsbD92b2lkIDA6cC5hc1JvbGUpPT1udWxsP3ZvaWQgMDpoLm5hbWUpfHwoKGc9KFQ9dGhpcy5sb2NhbFBlZXIpPT1udWxsP3ZvaWQgMDpULnJvbGUpPT1udWxsP3ZvaWQgMDpnLm5hbWUpOyhmPXRoaXMubmV0d29ya1Rlc3RNYW5hZ2VyKT09bnVsbHx8Zi5zdG9wKCksdGhpcy5jb21tb25TZXR1cChlLGksdCksdGhpcy5yZW1vdmVEZXZpY2VzRnJvbUNvbmZpZyhlKSx0aGlzLnN0b3JlLnNldENvbmZpZyhlKSx0aGlzLnN0b3JlLmNyZWF0ZUFuZFNldFVzZXJBZ2VudCh0aGlzLmZyYW1ld29ya0luZm8pLGNlLnJlc3VtZUNvbnRleHQoKTtsZXQgbj10aGlzLnN0b3JlLmdldENvbmZpZygpO24hPW51bGwmJm4uYXV0b01hbmFnZVdha2VMb2NrJiZ0aGlzLndha2VMb2NrTWFuYWdlci5hY3F1aXJlTG9jaygpLHRoaXMubG9jYWxQZWVyPyh0aGlzLmxvY2FsUGVlci5uYW1lPWUudXNlck5hbWUsdGhpcy5sb2NhbFBlZXIucm9sZT10aGlzLnN0b3JlLmdldFBvbGljeUZvclJvbGUocyksdGhpcy5sb2NhbFBlZXIuY3VzdG9tZXJVc2VySWQ9cix0aGlzLmxvY2FsUGVlci5tZXRhZGF0YT1lLm1ldGFEYXRhLGRlbGV0ZSB0aGlzLmxvY2FsUGVlci5hc1JvbGUpOnRoaXMuY3JlYXRlQW5kQWRkTG9jYWxQZWVyVG9TdG9yZShlLHMsciksdGhpcy5yb2xlQ2hhbmdlTWFuYWdlcj1uZXcgQnQodGhpcy5zdG9yZSx0aGlzLnRyYW5zcG9ydCx0aGlzLmRldmljZU1hbmFnZXIsdGhpcy5nZXRBbmRQdWJsaXNoVHJhY2tzLmJpbmQodGhpcyksdGhpcy5yZW1vdmVUcmFjay5iaW5kKHRoaXMpLHRoaXMubGlzdGVuZXIpLHRoaXMuZXZlbnRCdXMubG9jYWxSb2xlVXBkYXRlLnN1YnNjcmliZSh0aGlzLmhhbmRsZUxvY2FsUm9sZVVwZGF0ZSksbC5kKHRoaXMuVEFHLGBcXHUyM0YzIEpvaW5pbmcgcm9vbSAke2l9YCksbC50aW1lKGBqb2luLXJvb20tJHtpfWApO3RyeXt5aWVsZCB0aGlzLnRyYW5zcG9ydC5qb2luKGUuYXV0aFRva2VuLHRoaXMubG9jYWxQZWVyLnBlZXJJZCx7bmFtZTplLnVzZXJOYW1lLG1ldGFEYXRhOmUubWV0YURhdGF9LGUuaW5pdEVuZHBvaW50LGUuYXV0b1ZpZGVvU3Vic2NyaWJlLGUuaWNlU2VydmVycyksbC5kKHRoaXMuVEFHLGBcXHUyNzA1IEpvaW5lZCByb29tICR7aX1gKSx0aGlzLmFuYWx5dGljc1RpbWVyLnN0YXJ0KFwicGVlcl9saXN0X3RpbWVcIikseWllbGQgdGhpcy5ub3RpZnlKb2luKCksdGhpcy5zZGtTdGF0ZS5pc0pvaW5JblByb2dyZXNzPSExLHlpZWxkIHRoaXMucHVibGlzaChlLnNldHRpbmdzLG8pfWNhdGNoKHYpe3Rocm93IHRoaXMuYW5hbHl0aWNzVGltZXIuZW5kKFwiam9pbl90aW1lXCIpLHRoaXMuc2RrU3RhdGUuaXNKb2luSW5Qcm9ncmVzcz0hMSwoRT10aGlzLmxpc3RlbmVyKT09bnVsbHx8RS5vbkVycm9yKHYpLHRoaXMuc2VuZEpvaW5BbmFseXRpY3NFdmVudCh0aGlzLnNka1N0YXRlLmlzUHJldmlld0NhbGxlZCx2KSxsLmUodGhpcy5UQUcsXCJVbmFibGUgdG8gam9pbiByb29tXCIsdiksdn1sLnRpbWVFbmQoYGpvaW4tcm9vbS0ke2l9YCl9KX1zdHJpbmdpZnlNZXRhZGF0YShlKXtlLm1ldGFEYXRhJiZ0eXBlb2YgZS5tZXRhRGF0YSE9XCJzdHJpbmdcIj9lLm1ldGFEYXRhPUpTT04uc3RyaW5naWZ5KGUubWV0YURhdGEpOmUubWV0YURhdGF8fChlLm1ldGFEYXRhPVwiXCIpfWNsZWFudXAoKXt2YXIgZSx0LGk7dGhpcy5jbGVhbkRldmljZU1hbmFnZXJzKCksdGhpcy5ldmVudEJ1cy5hbmFseXRpY3MudW5zdWJzY3JpYmUodGhpcy5zZW5kQW5hbHl0aWNzRXZlbnQpLHRoaXMuZXZlbnRCdXMubG9jYWxWaWRlb1VubXV0ZWROYXRpdmVseS51bnN1YnNjcmliZSh0aGlzLnVucGF1c2VSZW1vdGVWaWRlb1RyYWNrcyksdGhpcy5ldmVudEJ1cy5sb2NhbEF1ZGlvVW5tdXRlZE5hdGl2ZWx5LnVuc3Vic2NyaWJlKHRoaXMudW5wYXVzZVJlbW90ZVZpZGVvVHJhY2tzKSx0aGlzLmV2ZW50QnVzLmVycm9yLnVuc3Vic2NyaWJlKHRoaXMuaGFuZGxlRXJyb3IpLHRoaXMuYW5hbHl0aWNzVGltZXIuY2xlYW51cCgpLFguY2xlYW51cCgpLHRoaXMucGxheWxpc3RNYW5hZ2VyLmNsZWFudXAoKSwoZT10aGlzLndha2VMb2NrTWFuYWdlcik9PW51bGx8fGUuY2xlYW51cCgpLGJlLmNsZWFudXAoKSx0aGlzLm5vdGlmaWNhdGlvbk1hbmFnZXI9dm9pZCAwLGwuY2xlYW51cCgpLHRoaXMuc2RrU3RhdGU9bSh7fSxybyksdGhpcy5sb2NhbFBlZXImJigodD10aGlzLmxvY2FsUGVlci5hdWRpb1RyYWNrKT09bnVsbHx8dC5jbGVhbnVwKCksdGhpcy5sb2NhbFBlZXIuYXVkaW9UcmFjaz12b2lkIDAsKGk9dGhpcy5sb2NhbFBlZXIudmlkZW9UcmFjayk9PW51bGx8fGkuY2xlYW51cCgpLHRoaXMubG9jYWxQZWVyLnZpZGVvVHJhY2s9dm9pZCAwKSx0aGlzLnN0b3JlLmNsZWFudXAoKSx0aGlzLmxpc3RlbmVyPXZvaWQgMCx0aGlzLnJvbGVDaGFuZ2VNYW5hZ2VyJiZ0aGlzLmV2ZW50QnVzLmxvY2FsUm9sZVVwZGF0ZS51bnN1YnNjcmliZSh0aGlzLmhhbmRsZUxvY2FsUm9sZVVwZGF0ZSl9bGVhdmUoZSl7cmV0dXJuIHRoaXMuaW50ZXJuYWxMZWF2ZShlKX1pbnRlcm5hbExlYXZlKGU9ITAsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciByLHMsbyxuO2xldCBpPShyPXRoaXMuc3RvcmUpPT1udWxsP3ZvaWQgMDpyLmdldFJvb20oKTtpZihpKXtmb3IoOyh0aGlzLnNka1N0YXRlLmlzUHJldmlld0luUHJvZ3Jlc3N8fHRoaXMuc2RrU3RhdGUuaXNKb2luSW5Qcm9ncmVzcykmJiEodCE9bnVsbCYmdC5pc1Rlcm1pbmFsKTspeWllbGQgT2UoMTAwKTtsZXQgZD1pLmlkO3RoaXMuc2V0U2Vzc2lvblBlZXJJbmZvKHRoaXMudHJhbnNwb3J0LmdldFdlYnNvY2tldEVuZHBvaW50KCl8fFwiXCIsdGhpcy5sb2NhbFBlZXIpLChzPXRoaXMubmV0d29ya1Rlc3RNYW5hZ2VyKT09bnVsbHx8cy5zdG9wKCksdGhpcy5ldmVudEJ1cy5sZWF2ZS5wdWJsaXNoKHQpO2xldCB1PShvPXRoaXMubG9jYWxQZWVyKT09bnVsbD92b2lkIDA6by5wZWVySWQ7bC5kKHRoaXMuVEFHLGBcXHUyM0YzIExlYXZpbmcgcm9vbSAke2R9LCBwZWVySWQ9JHt1fWApLHlpZWxkKG49dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDpuLmxlYXZlKGUsdD9cInNkayByZXF1ZXN0XCI6XCJ1c2VyIHJlcXVlc3RcIiksdGhpcy5jbGVhbnVwKCksbC5kKHRoaXMuVEFHLGBcXHUyNzA1IExlZnQgcm9vbSAke2R9LCBwZWVySWQ9JHt1fWApfX0pfWdldEF1dGhUb2tlbkJ5Um9vbUNvZGUoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGk9KHR8fHt9KS5lbmRwb2ludHx8XCJodHRwczovL2F1dGguMTAwbXMubGl2ZS92Mi90b2tlblwiO3RoaXMuYW5hbHl0aWNzVGltZXIuc3RhcnQoXCJHRVRfVE9LRU5cIik7bGV0IHI9eWllbGQgQmkoaSx7bWV0aG9kOlwiUE9TVFwiLGJvZHk6SlNPTi5zdHJpbmdpZnkoe2NvZGU6ZS5yb29tQ29kZSx1c2VyX2lkOmUudXNlcklkfSl9LFs0MjksNTAwLDUwMSw1MDIsNTAzLDUwNCw1MDUsNTA2LDUwNyw1MDgsNTA5LDUxMCw1MTFdKSxzPXlpZWxkIHIuanNvbigpO2lmKHRoaXMuYW5hbHl0aWNzVGltZXIuZW5kKFwiR0VUX1RPS0VOXCIpLCFyLm9rKXRocm93IFMuQVBJRXJyb3JzLlNlcnZlckVycm9ycyhzLmNvZGUsXCJHRVRfVE9LRU5cIixzLm1lc3NhZ2UsITEpO2xldHt0b2tlbjpvfT1zO2lmKCFvKXRocm93IEVycm9yKHMubWVzc2FnZSk7cmV0dXJuIG99KX1nZXRMb2NhbFBlZXIoKXtyZXR1cm4gdGhpcy5zdG9yZS5nZXRMb2NhbFBlZXIoKX1nZXRQZWVycygpe3JldHVybiB0aGlzLnN0b3JlLmdldFBlZXJzKCl9Z2V0UGVlck1hcCgpe3JldHVybiB0aGlzLnN0b3JlLmdldFBlZXJNYXAoKX1nZXRBdWRpb091dHB1dCgpe3JldHVybiB0aGlzLmF1ZGlvT3V0cHV0fXNlbmRNZXNzYWdlKGUsdCl7dGhpcy5zZW5kTWVzc2FnZUludGVybmFsKHttZXNzYWdlOnQsdHlwZTplfSl9c2VuZEJyb2FkY2FzdE1lc3NhZ2UoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7cmV0dXJuIHlpZWxkIHRoaXMuc2VuZE1lc3NhZ2VJbnRlcm5hbCh7bWVzc2FnZTplLHR5cGU6dH0pfSl9c2VuZEdyb3VwTWVzc2FnZShlLHQsaSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCByPXRoaXMuc3RvcmUuZ2V0S25vd25Sb2xlcygpO2lmKCh0LmZpbHRlcihvPT5yW28ubmFtZV0pfHxbXSkubGVuZ3RoPT09MCl0aHJvdyBTLkdlbmVyaWNFcnJvcnMuVmFsaWRhdGlvbkZhaWxlZChcIk5vIHZhbGlkIHJvbGUgaXMgcHJlc2VudFwiLHQpO3JldHVybiB5aWVsZCB0aGlzLnNlbmRNZXNzYWdlSW50ZXJuYWwoe21lc3NhZ2U6ZSxyZWNpcGllbnRSb2xlczp0LHR5cGU6aX0pfSl9c2VuZERpcmVjdE1lc3NhZ2UoZSx0LGkpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgbyxuO2lmKCgobz10aGlzLmxvY2FsUGVlcik9PW51bGw/dm9pZCAwOm8ucGVlcklkKT09PXQpdGhyb3cgUy5HZW5lcmljRXJyb3JzLlZhbGlkYXRpb25GYWlsZWQoXCJDYW5ub3Qgc2VuZCBtZXNzYWdlIHRvIHNlbGZcIik7bGV0IHI9ISEoKG49dGhpcy5zdG9yZS5nZXRSb29tKCkpIT1udWxsJiZuLmxhcmdlX3Jvb21fb3B0aW1pemF0aW9uKSxzPXRoaXMuc3RvcmUuZ2V0UGVlckJ5SWQodCk7aWYoIXMpaWYocil7bGV0IGQ9eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmdldFBlZXIoe3BlZXJfaWQ6dH0pO2lmKCFkKXRocm93IFMuR2VuZXJpY0Vycm9ycy5WYWxpZGF0aW9uRmFpbGVkKFwiSW52YWxpZCBwZWVyIC0gcGVlciBub3QgcHJlc2VudCBpbiB0aGUgcm9vbVwiLHQpO3M9eWUoZCx0aGlzLnN0b3JlKX1lbHNlIHRocm93IFMuR2VuZXJpY0Vycm9ycy5WYWxpZGF0aW9uRmFpbGVkKFwiSW52YWxpZCBwZWVyIC0gcGVlciBub3QgcHJlc2VudCBpbiB0aGUgcm9vbVwiLHQpO3JldHVybiB5aWVsZCB0aGlzLnNlbmRNZXNzYWdlSW50ZXJuYWwoe21lc3NhZ2U6ZSxyZWNpcGllbnRQZWVyOnMsdHlwZTppfSl9KX1zdWJtaXRTZXNzaW9uRmVlZGJhY2soZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7aWYoIXRoaXMuc2Vzc2lvblBlZXJJbmZvKXRocm93IGwuZSh0aGlzLlRBRyxcInN1Ym1pdFNlc3Npb25GZWVkYmFjaz4gc2Vzc2lvbiBpcyB1bmRlZmluZWRcIiksbmV3IEVycm9yKFwic2Vzc2lvbiBpcyB1bmRlZmluZWRcIik7bGV0IGk9dGhpcy5zZXNzaW9uUGVlckluZm8ucGVlci50b2tlbjtpZighaSl0aHJvdyBsLmUodGhpcy5UQUcsXCJzdWJtaXRTZXNzaW9uRmVlZGJhY2s+IHRva2VuIGlzIHVuZGVmaW5lZFwiKSxuZXcgRXJyb3IoXCJJbnRlcm5hbCBlcnJvciwgdG9rZW4gaXMgbm90IHByZXNlbnRcIik7dHJ5e3lpZWxkICR0LnNlbmRGZWVkYmFjayh7dG9rZW46aSxpbmZvOnRoaXMuc2Vzc2lvblBlZXJJbmZvLGZlZWRiYWNrOmUsZXZlbnRFbmRwb2ludDp0fSksbC5pKHRoaXMuVEFHLFwic3VibWl0U2Vzc2lvbkZlZWRiYWNrPiBzdWJtaXR0ZWQgZmVlZGJhY2tcIiksdGhpcy5zZXNzaW9uUGVlckluZm89dm9pZCAwfWNhdGNoKHIpe3Rocm93IGwuZSh0aGlzLlRBRyxcInN1Ym1pdFNlc3Npb25GZWVkYmFjaz4gZXJyb3Igb2NjdXJlZCBcIixyKSxuZXcgRXJyb3IoXCJVbmFibGUgdG8gc3VibWl0IGZlZWRiYWNrXCIpfX0pfWdldFBlZXIoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCB0PXlpZWxkIHRoaXMudHJhbnNwb3J0LnNpZ25hbC5nZXRQZWVyKHtwZWVyX2lkOmV9KTtpZih0KXJldHVybiB5ZSh0LHRoaXMuc3RvcmUpfSl9ZmluZFBlZXJCeU5hbWUocil7cmV0dXJuIGModGhpcyxhcmd1bWVudHMsZnVuY3Rpb24qKHtxdWVyeTplLGxpbWl0OnQ9MTAsb2Zmc2V0Oml9KXtsZXR7cGVlcnM6cyxvZmZzZXQ6byxlb2Y6bn09eWllbGQgdGhpcy50cmFuc3BvcnQuc2lnbmFsLmZpbmRQZWVyQnlOYW1lKHtxdWVyeTplPT1udWxsP3ZvaWQgMDplLnRvTG93ZXJDYXNlKCksbGltaXQ6dCxvZmZzZXQ6aX0pO3JldHVybiBzLmxlbmd0aD4wP3tvZmZzZXQ6byxlb2Y6bixwZWVyczpzLm1hcChkPT55ZSh7cGVlcl9pZDpkLnBlZXJfaWQscm9sZTpkLnJvbGUsZ3JvdXBzOltdLGluZm86e25hbWU6ZC5uYW1lLGRhdGE6XCJcIix1c2VyX2lkOlwiXCIsdHlwZTpkLnR5cGV9fSx0aGlzLnN0b3JlKSl9OntvZmZzZXQ6byxwZWVyczpbXX19KX1zZW5kTWVzc2FnZUludGVybmFsKHMpe3JldHVybiBjKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKih7cmVjaXBpZW50Um9sZXM6ZSxyZWNpcGllbnRQZWVyOnQsdHlwZTppPVwiY2hhdFwiLG1lc3NhZ2U6cn0pe2lmKHIucmVwbGFjZSgvXFx1MjAwYi9nLFwiIFwiKS50cmltKCk9PT1cIlwiKXRocm93IGwudyh0aGlzLlRBRyxcInNlbmRNZXNzYWdlXCIsXCJJZ25vcmluZyBlbXB0eSBtZXNzYWdlIHNlbmRcIiksUy5HZW5lcmljRXJyb3JzLlZhbGlkYXRpb25GYWlsZWQoXCJFbXB0eSBtZXNzYWdlIG5vdCBhbGxvd2VkXCIpO2xldCBvPXtpbmZvOnttZXNzYWdlOnIsdHlwZTppfX07cmV0dXJuIGUhPW51bGwmJmUubGVuZ3RoJiYoby5yb2xlcz1lLm1hcChuPT5uLm5hbWUpKSx0IT1udWxsJiZ0LnBlZXJJZCYmKG8ucGVlcl9pZD10LnBlZXJJZCksbC5kKHRoaXMuVEFHLFwiU2VuZGluZyBNZXNzYWdlOiBcIixvKSx5aWVsZCB0aGlzLnRyYW5zcG9ydC5zaWduYWwuYnJvYWRjYXN0KG8pfSl9c3RhcnRTY3JlZW5TaGFyZShlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgbixkLHU7bGV0IGk9dGhpcy5zdG9yZS5nZXRQdWJsaXNoUGFyYW1zKCk7aWYoIWkpcmV0dXJuO2xldHthbGxvd2VkOnJ9PWk7aWYoIShyJiZyLmluY2x1ZGVzKFwic2NyZWVuXCIpKSl7bC5lKHRoaXMuVEFHLGBSb2xlICR7KG49dGhpcy5sb2NhbFBlZXIpPT1udWxsP3ZvaWQgMDpuLnJvbGV9IGNhbm5vdCBzaGFyZSBzY3JlZW5gKTtyZXR1cm59aWYoKHU9KGQ9dGhpcy5sb2NhbFBlZXIpPT1udWxsP3ZvaWQgMDpkLmF1eGlsaWFyeVRyYWNrcykhPW51bGwmJnUuZmluZChwPT5wLnNvdXJjZT09PVwic2NyZWVuXCIpKXRocm93IEVycm9yKFwiQ2Fubm90IHNoYXJlIG11bHRpcGxlIHNjcmVlbnNcIik7bGV0IG89eWllbGQgdGhpcy5nZXRTY3JlZW5zaGFyZVRyYWNrcyhlLHQpO2lmKCF0aGlzLmxvY2FsUGVlcil7bC5kKHRoaXMuVEFHLFwiU2NyZWVuc2hhcmVkIHdoZW4gbm90IGNvbm5lY3RlZFwiKSxvLmZvckVhY2gocD0+e3AuY2xlYW51cCgpfSk7cmV0dXJufXRoaXMudHJhbnNwb3J0LnNldE9uU2NyZWVuc2hhcmVTdG9wKCgpPT57dGhpcy5zdG9wRW5kZWRTY3JlZW5zaGFyZShlKX0pLHlpZWxkIHRoaXMudHJhbnNwb3J0LnB1Ymxpc2gobyksby5mb3JFYWNoKHA9Pnt2YXIgaCxULGc7cC5wZWVySWQ9KGg9dGhpcy5sb2NhbFBlZXIpPT1udWxsP3ZvaWQgMDpoLnBlZXJJZCwoVD10aGlzLmxvY2FsUGVlcik9PW51bGx8fFQuYXV4aWxpYXJ5VHJhY2tzLnB1c2gocCksKGc9dGhpcy5saXN0ZW5lcik9PW51bGx8fGcub25UcmFja1VwZGF0ZSgwLHAsdGhpcy5sb2NhbFBlZXIpfSl9KX1zdG9wRW5kZWRTY3JlZW5zaGFyZShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bC5kKHRoaXMuVEFHLFwiXFx1MjcwNSBTY3JlZW5zaGFyZSBlbmRlZCBuYXRpdmVseVwiKSx5aWVsZCB0aGlzLnN0b3BTY3JlZW5TaGFyZSgpLGUoKX0pfXN0b3BTY3JlZW5TaGFyZSgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdDtsLmQodGhpcy5UQUcsXCJcXHUyNzA1IFNjcmVlbnNoYXJlIGVuZGVkIGZyb20gYXBwXCIpO2xldCBlPSh0PXRoaXMubG9jYWxQZWVyKT09bnVsbD92b2lkIDA6dC5hdXhpbGlhcnlUcmFja3MuZmlsdGVyKGk9Pmkuc291cmNlPT09XCJzY3JlZW5cIik7aWYoZSlmb3IobGV0IGkgb2YgZSl5aWVsZCB0aGlzLnJlbW92ZVRyYWNrKGkudHJhY2tJZCl9KX1hZGRUcmFjayhlLHQ9XCJyZWd1bGFyXCIpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdSxwLGgsVDtpZighZSl7bC53KHRoaXMuVEFHLFwiUGxlYXNlIHBhc3MgYSB2YWxpZCBNZWRpYVN0cmVhbVRyYWNrXCIpO3JldHVybn1pZighdGhpcy5sb2NhbFBlZXIpdGhyb3cgUy5HZW5lcmljRXJyb3JzLk5vdENvbm5lY3RlZChcIlZBTElEQVRJT05cIixcIk5vIGxvY2FsIHBlZXIgcHJlc2VudCwgY2Fubm90IGFkZFRyYWNrXCIpO2lmKHRoaXMubG9jYWxQZWVyLmF1eGlsaWFyeVRyYWNrcy5maW5kKGc9PmcudHJhY2tJZD09PWUuaWQpKXJldHVybjtsZXQgcj1lLmtpbmQscz1uZXcgTWVkaWFTdHJlYW0oW2VdKSxvPW5ldyBTZShzKSxuPXI9PT1cImF1ZGlvXCI/ZGU6RyxkPW5ldyBuKG8sZSx0LHRoaXMuZXZlbnRCdXMpO3lpZWxkIHRoaXMuYXBwbHlTZXR0aW5ncyhkKSx5aWVsZCB0aGlzLnNldFBsYXlsaXN0U2V0dGluZ3Moe3RyYWNrOmUsaG1zVHJhY2s6ZCxzb3VyY2U6dH0pLHlpZWxkKHU9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDp1LnB1Ymxpc2goW2RdKSxkLnBlZXJJZD0ocD10aGlzLmxvY2FsUGVlcik9PW51bGw/dm9pZCAwOnAucGVlcklkLChoPXRoaXMubG9jYWxQZWVyKT09bnVsbHx8aC5hdXhpbGlhcnlUcmFja3MucHVzaChkKSwoVD10aGlzLmxpc3RlbmVyKT09bnVsbHx8VC5vblRyYWNrVXBkYXRlKDAsZCx0aGlzLmxvY2FsUGVlcil9KX1yZW1vdmVUcmFjayhlLHQ9ITEpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcjtpZighdGhpcy5sb2NhbFBlZXIpdGhyb3cgUy5HZW5lcmljRXJyb3JzLk5vdENvbm5lY3RlZChcIlZBTElEQVRJT05cIixcIk5vIGxvY2FsIHBlZXIgcHJlc2VudCwgY2Fubm90IHJlbW92ZVRyYWNrXCIpO2xldCBpPXRoaXMubG9jYWxQZWVyLmF1eGlsaWFyeVRyYWNrcy5maW5kSW5kZXgocz0+cy50cmFja0lkPT09ZSk7aWYoaT4tMSl7bGV0IHM9dGhpcy5sb2NhbFBlZXIuYXV4aWxpYXJ5VHJhY2tzW2ldO3MuaXNQdWJsaXNoZWQ/eWllbGQgdGhpcy50cmFuc3BvcnQudW5wdWJsaXNoKFtzXSk6eWllbGQgcy5jbGVhbnVwKCksdHx8dGhpcy5zdG9wUGxheWxpc3QocyksdGhpcy5sb2NhbFBlZXIuYXV4aWxpYXJ5VHJhY2tzLnNwbGljZShpLDEpLChyPXRoaXMubGlzdGVuZXIpPT1udWxsfHxyLm9uVHJhY2tVcGRhdGUoMSxzLHRoaXMubG9jYWxQZWVyKX1lbHNlIGwudyh0aGlzLlRBRyxgTm8gdHJhY2sgZm91bmQgZm9yICR7ZX1gKX0pfXNldEFuYWx5dGljc0xldmVsKGUpe3RoaXMuYW5hbHl0aWNzRXZlbnRzU2VydmljZS5sZXZlbD1lfXNldExvZ0xldmVsKGUpe2wubGV2ZWw9ZX1hdXRvU2VsZWN0QXVkaW9PdXRwdXQoZSl7dmFyIHQ7KHQ9dGhpcy5kZXZpY2VNYW5hZ2VyKT09bnVsbHx8dC5hdXRvU2VsZWN0QXVkaW9PdXRwdXQoZSl9YWRkQXVkaW9MaXN0ZW5lcihlKXt2YXIgdDt0aGlzLmF1ZGlvTGlzdGVuZXI9ZSwodD10aGlzLm5vdGlmaWNhdGlvbk1hbmFnZXIpPT1udWxsfHx0LnNldEF1ZGlvTGlzdGVuZXIoZSl9YWRkQ29ubmVjdGlvblF1YWxpdHlMaXN0ZW5lcihlKXt2YXIgdDsodD10aGlzLm5vdGlmaWNhdGlvbk1hbmFnZXIpPT1udWxsfHx0LnNldENvbm5lY3Rpb25RdWFsaXR5TGlzdGVuZXIoZSl9c2V0SXNEaWFnbm9zdGljcyhlKXt0aGlzLmlzRGlhZ25vc3RpY3M9ZX1jaGFuZ2VSb2xlKGUsdCxpPSExKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHI7eWllbGQocj10aGlzLnRyYW5zcG9ydCk9PW51bGw/dm9pZCAwOnIuc2lnbmFsLnJlcXVlc3RSb2xlQ2hhbmdlKHtyZXF1ZXN0ZWRfZm9yOmUscm9sZTp0LGZvcmNlOml9KX0pfWNoYW5nZVJvbGVPZlBlZXIoZSx0LGk9ITEpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcjt5aWVsZChyPXRoaXMudHJhbnNwb3J0KT09bnVsbD92b2lkIDA6ci5zaWduYWwucmVxdWVzdFJvbGVDaGFuZ2Uoe3JlcXVlc3RlZF9mb3I6ZSxyb2xlOnQsZm9yY2U6aX0pfSl9Y2hhbmdlUm9sZU9mUGVlcnNXaXRoUm9sZXMoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGk7ZS5sZW5ndGg8PTB8fCF0fHwoeWllbGQoaT10aGlzLnRyYW5zcG9ydCk9PW51bGw/dm9pZCAwOmkuc2lnbmFsLnJlcXVlc3RCdWxrUm9sZUNoYW5nZSh7cm9sZXM6ZS5tYXAocj0+ci5uYW1lKSxyb2xlOnQsZm9yY2U6ITB9KSl9KX1hY2NlcHRDaGFuZ2VSb2xlKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdCxpO3lpZWxkKGk9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDppLnNpZ25hbC5hY2NlcHRSb2xlQ2hhbmdlUmVxdWVzdCh7cmVxdWVzdGVkX2J5Oih0PWUucmVxdWVzdGVkQnkpPT1udWxsP3ZvaWQgMDp0LnBlZXJJZCxyb2xlOmUucm9sZS5uYW1lLHRva2VuOmUudG9rZW59KX0pfWVuZFJvb20oZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGk7aWYoIXRoaXMubG9jYWxQZWVyKXRocm93IFMuR2VuZXJpY0Vycm9ycy5Ob3RDb25uZWN0ZWQoXCJWQUxJREFUSU9OXCIsXCJObyBsb2NhbCBwZWVyIHByZXNlbnQsIGNhbm5vdCBlbmQgcm9vbVwiKTt5aWVsZChpPXRoaXMudHJhbnNwb3J0KT09bnVsbD92b2lkIDA6aS5zaWduYWwuZW5kUm9vbShlLHQpLHlpZWxkIHRoaXMubGVhdmUoKX0pfXJlbW92ZVBlZXIoZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGk7aWYoIXRoaXMubG9jYWxQZWVyKXRocm93IFMuR2VuZXJpY0Vycm9ycy5Ob3RDb25uZWN0ZWQoXCJWQUxJREFUSU9OXCIsXCJObyBsb2NhbCBwZWVyIHByZXNlbnQsIGNhbm5vdCByZW1vdmUgcGVlclwiKTt5aWVsZChpPXRoaXMudHJhbnNwb3J0KT09bnVsbD92b2lkIDA6aS5zaWduYWwucmVtb3ZlUGVlcih7cmVxdWVzdGVkX2ZvcjplLHJlYXNvbjp0fSl9KX1zdGFydFJUTVBPclJlY29yZGluZyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGkscjtpZighdGhpcy5sb2NhbFBlZXIpdGhyb3cgUy5HZW5lcmljRXJyb3JzLk5vdENvbm5lY3RlZChcIlZBTElEQVRJT05cIixcIk5vIGxvY2FsIHBlZXIgcHJlc2VudCwgY2Fubm90IHN0YXJ0IHN0cmVhbWluZyBvciByZWNvcmRpbmdcIik7bGV0IHQ9e21lZXRpbmdfdXJsOmUubWVldGluZ1VSTCxyZWNvcmQ6ZS5yZWNvcmR9OyhpPWUucnRtcFVSTHMpIT1udWxsJiZpLmxlbmd0aCYmKHQucnRtcF91cmxzPWUucnRtcFVSTHMpLGUucmVzb2x1dGlvbiYmKHQucmVzb2x1dGlvbj1lLnJlc29sdXRpb24pLHlpZWxkKHI9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDpyLnNpZ25hbC5zdGFydFJUTVBPclJlY29yZGluZyh0KX0pfXN0b3BSVE1QQW5kUmVjb3JkaW5nKCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBlO2lmKCF0aGlzLmxvY2FsUGVlcil0aHJvdyBTLkdlbmVyaWNFcnJvcnMuTm90Q29ubmVjdGVkKFwiVkFMSURBVElPTlwiLFwiTm8gbG9jYWwgcGVlciBwcmVzZW50LCBjYW5ub3Qgc3RvcCBzdHJlYW1pbmcgb3IgcmVjb3JkaW5nXCIpO3lpZWxkKGU9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDplLnNpZ25hbC5zdG9wUlRNUEFuZFJlY29yZGluZygpfSl9c3RhcnRITFNTdHJlYW1pbmcoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBpO2lmKCF0aGlzLmxvY2FsUGVlcil0aHJvdyBTLkdlbmVyaWNFcnJvcnMuTm90Q29ubmVjdGVkKFwiVkFMSURBVElPTlwiLFwiTm8gbG9jYWwgcGVlciBwcmVzZW50LCBjYW5ub3Qgc3RhcnQgSExTIHN0cmVhbWluZ1wiKTtsZXQgdD17fTtlJiZlLnZhcmlhbnRzJiZlLnZhcmlhbnRzLmxlbmd0aD4wJiYodC52YXJpYW50cz1lLnZhcmlhbnRzLm1hcChyPT57bGV0IHM9e21lZXRpbmdfdXJsOnIubWVldGluZ1VSTH07cmV0dXJuIHIubWV0YWRhdGEmJihzLm1ldGFkYXRhPXIubWV0YWRhdGEpLHN9KSksZSE9bnVsbCYmZS5yZWNvcmRpbmcmJih0Lmhsc19yZWNvcmRpbmc9e3NpbmdsZV9maWxlX3Blcl9sYXllcjplLnJlY29yZGluZy5zaW5nbGVGaWxlUGVyTGF5ZXIsaGxzX3ZvZDplLnJlY29yZGluZy5obHNWb2R9KSx5aWVsZChpPXRoaXMudHJhbnNwb3J0KT09bnVsbD92b2lkIDA6aS5zaWduYWwuc3RhcnRITFNTdHJlYW1pbmcodCl9KX1zdG9wSExTU3RyZWFtaW5nKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdCxpLHI7aWYoIXRoaXMubG9jYWxQZWVyKXRocm93IFMuR2VuZXJpY0Vycm9ycy5Ob3RDb25uZWN0ZWQoXCJWQUxJREFUSU9OXCIsXCJObyBsb2NhbCBwZWVyIHByZXNlbnQsIGNhbm5vdCBzdG9wIEhMUyBzdHJlYW1pbmdcIik7aWYoZSl7bGV0IHM9e3ZhcmlhbnRzOih0PWU9PW51bGw/dm9pZCAwOmUudmFyaWFudHMpPT1udWxsP3ZvaWQgMDp0Lm1hcChvPT57bGV0IG49e21lZXRpbmdfdXJsOm8ubWVldGluZ1VSTH07cmV0dXJuIG8ubWV0YWRhdGEmJihuLm1ldGFkYXRhPW8ubWV0YWRhdGEpLG59KSxzdG9wX3JlYXNvbjplLnN0b3BfcmVhc29ufTt5aWVsZChpPXRoaXMudHJhbnNwb3J0KT09bnVsbD92b2lkIDA6aS5zaWduYWwuc3RvcEhMU1N0cmVhbWluZyhzKX1lbHNlIHlpZWxkKHI9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDpyLnNpZ25hbC5zdG9wSExTU3RyZWFtaW5nKCl9KX1zdGFydFRyYW5zY3JpcHRpb24oZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBpO2lmKCF0aGlzLmxvY2FsUGVlcil0aHJvdyBTLkdlbmVyaWNFcnJvcnMuTm90Q29ubmVjdGVkKFwiVkFMSURBVElPTlwiLFwiTm8gbG9jYWwgcGVlciBwcmVzZW50LCBjYW5ub3Qgc3RhcnQgdHJhbnNjcmlwdGlvbnNcIik7bGV0IHQ9e21vZGU6ZS5tb2RlfTt5aWVsZChpPXRoaXMudHJhbnNwb3J0KT09bnVsbD92b2lkIDA6aS5zaWduYWwuc3RhcnRUcmFuc2NyaXB0aW9uKHQpfSl9c3RvcFRyYW5zY3JpcHRpb24oZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBpO2lmKCF0aGlzLmxvY2FsUGVlcil0aHJvdyBTLkdlbmVyaWNFcnJvcnMuTm90Q29ubmVjdGVkKFwiVkFMSURBVElPTlwiLFwiTm8gbG9jYWwgcGVlciBwcmVzZW50LCBjYW5ub3Qgc3RvcCB0cmFuc2NyaXB0aW9uc1wiKTtpZighZSl0aHJvdyBTLkdlbmVyaWNFcnJvcnMuU2lnbmFsbGluZyhcIlZBTElEQVRJT05cIixcIk5vIG1vZGUgaXMgcGFzc2VkIHRvIHN0b3AgdGhlIHRyYW5zY3JpcHRpb25cIik7bGV0IHQ9e21vZGU6ZS5tb2RlfTt5aWVsZChpPXRoaXMudHJhbnNwb3J0KT09bnVsbD92b2lkIDA6aS5zaWduYWwuc3RvcFRyYW5zY3JpcHRpb24odCl9KX1zZW5kSExTVGltZWRNZXRhZGF0YShlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHQ7aWYodGhpcy52YWxpZGF0ZUpvaW5lZChcInNlbmRITFNUaW1lZE1ldGFkYXRhXCIpLGUubGVuZ3RoPjApe2xldCBpPXttZXRhZGF0YV9vYmpzOmV9O3lpZWxkKHQ9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDp0LnNpZ25hbC5zZW5kSExTVGltZWRNZXRhZGF0YShpKX19KX1jaGFuZ2VOYW1lKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgaSxyO3RoaXMudmFsaWRhdGVKb2luZWQoXCJjaGFuZ2VOYW1lXCIpO2xldCB0PXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCk7dCYmdC5uYW1lIT09ZSYmKHlpZWxkKGk9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDppLnNpZ25hbC51cGRhdGVQZWVyKHtuYW1lOmV9KSwocj10aGlzLm5vdGlmaWNhdGlvbk1hbmFnZXIpPT1udWxsfHxyLnVwZGF0ZUxvY2FsUGVlcih7bmFtZTplfSkpfSl9Y2hhbmdlTWV0YWRhdGEoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciB0LGk7dGhpcy52YWxpZGF0ZUpvaW5lZChcImNoYW5nZU1ldGFkYXRhXCIpLHlpZWxkKHQ9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDp0LnNpZ25hbC51cGRhdGVQZWVyKHtkYXRhOmV9KSwoaT10aGlzLm5vdGlmaWNhdGlvbk1hbmFnZXIpPT1udWxsfHxpLnVwZGF0ZUxvY2FsUGVlcih7bWV0YWRhdGE6ZX0pfSl9c2V0U2Vzc2lvbk1ldGFkYXRhKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdDt5aWVsZCh0PXRoaXMudHJhbnNwb3J0KT09bnVsbD92b2lkIDA6dC5zaWduYWwuc2V0U2Vzc2lvbk1ldGFkYXRhKHtrZXk6XCJkZWZhdWx0XCIsZGF0YTplfSl9KX1nZXRTZXNzaW9uTWV0YWRhdGEoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHQ7cmV0dXJuKHlpZWxkKHQ9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDp0LnNpZ25hbC5nZXRTZXNzaW9uTWV0YWRhdGEoXCJkZWZhdWx0XCIpKS5kYXRhfSl9Z2V0Um9sZXMoKXtyZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLnN0b3JlLmdldEtub3duUm9sZXMoKSl9Y2hhbmdlVHJhY2tTdGF0ZShlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgcjtpZihlLnR5cGU9PT1cInZpZGVvXCImJmUuc291cmNlIT09XCJyZWd1bGFyXCIpe2wudyh0aGlzLlRBRyxcIk11dGluZyBub24tcmVndWxhciB2aWRlbyB0cmFja3MgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJufWlmKGUuZW5hYmxlZD09PXQpe2wudyh0aGlzLlRBRyxgQWJvcnRpbmcgY2hhbmdlIHRyYWNrIHN0YXRlLCB0cmFjayBhbHJlYWR5IGhhcyBlbmFibGVkIC0gJHt0fWAsZSk7cmV0dXJufWlmKCF0aGlzLnN0b3JlLmdldFRyYWNrQnlJZChlLnRyYWNrSWQpKXRocm93IFMuR2VuZXJpY0Vycm9ycy5WYWxpZGF0aW9uRmFpbGVkKFwiTm8gdHJhY2sgZm91bmQgZm9yIGNoYW5nZSB0cmFjayBzdGF0ZVwiLGUpO2xldCBpPXRoaXMuc3RvcmUuZ2V0UGVlckJ5VHJhY2tJZChlLnRyYWNrSWQpO2lmKCFpKXRocm93IFMuR2VuZXJpY0Vycm9ycy5WYWxpZGF0aW9uRmFpbGVkKFwiTm8gcGVlciBmb3VuZCBmb3IgY2hhbmdlIHRyYWNrIHN0YXRlXCIsZSk7eWllbGQocj10aGlzLnRyYW5zcG9ydCk9PW51bGw/dm9pZCAwOnIuc2lnbmFsLnJlcXVlc3RUcmFja1N0YXRlQ2hhbmdlKHtyZXF1ZXN0ZWRfZm9yOmkucGVlcklkLHRyYWNrX2lkOmUudHJhY2tJZCxzdHJlYW1faWQ6ZS5zdHJlYW0uaWQsbXV0ZTohdH0pfSl9Y2hhbmdlTXVsdGlUcmFja1N0YXRlKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgbztpZih0eXBlb2YgZS5lbmFibGVkIT1cImJvb2xlYW5cIil0aHJvdyBTLkdlbmVyaWNFcnJvcnMuVmFsaWRhdGlvbkZhaWxlZChcIlBhc3MgYSBib29sZWFuIGZvciBlbmFibGVkXCIpO2xldHtlbmFibGVkOnQscm9sZXM6aSx0eXBlOnIsc291cmNlOnN9PWU7eWllbGQobz10aGlzLnRyYW5zcG9ydCk9PW51bGw/dm9pZCAwOm8uc2lnbmFsLnJlcXVlc3RNdWx0aVRyYWNrU3RhdGVDaGFuZ2Uoe3ZhbHVlOiF0LHR5cGU6cixzb3VyY2U6cyxyb2xlczppPT1udWxsP3ZvaWQgMDppLm1hcChuPT5uPT1udWxsP3ZvaWQgMDpuLm5hbWUpfSl9KX1yYWlzZUxvY2FsUGVlckhhbmQoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGU7dGhpcy52YWxpZGF0ZUpvaW5lZChcInJhaXNlTG9jYWxQZWVySGFuZFwiKSx5aWVsZChlPXRoaXMudHJhbnNwb3J0KT09bnVsbD92b2lkIDA6ZS5zaWduYWwuam9pbkdyb3VwKEFlKX0pfWxvd2VyTG9jYWxQZWVySGFuZCgpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgZTt0aGlzLnZhbGlkYXRlSm9pbmVkKFwibG93ZXJMb2NhbFBlZXJIYW5kXCIpLHlpZWxkKGU9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDplLnNpZ25hbC5sZWF2ZUdyb3VwKEFlKX0pfXJhaXNlUmVtb3RlUGVlckhhbmQoZSl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciB0O3lpZWxkKHQ9dGhpcy50cmFuc3BvcnQpPT1udWxsP3ZvaWQgMDp0LnNpZ25hbC5hZGRUb0dyb3VwKGUsQWUpfSl9bG93ZXJSZW1vdGVQZWVySGFuZChlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIHQ7eWllbGQodD10aGlzLnRyYW5zcG9ydCk9PW51bGw/dm9pZCAwOnQuc2lnbmFsLnJlbW92ZUZyb21Hcm91cChlLEFlKX0pfXNldEZyYW1ld29ya0luZm8oZSl7dGhpcy5mcmFtZXdvcmtJbmZvPW0obSh7fSx0aGlzLmZyYW1ld29ya0luZm8pLGUpfWF0dGFjaFZpZGVvKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe2xldCBpPXRoaXMuc3RvcmUuZ2V0Q29uZmlnKCk7aSE9bnVsbCYmaS5hdXRvTWFuYWdlVmlkZW8/ZS5hdHRhY2godCk6eWllbGQgZS5hZGRTaW5rKHQpfSl9ZGV0YWNoVmlkZW8oZSx0KXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7bGV0IGk9dGhpcy5zdG9yZS5nZXRDb25maWcoKTtpIT1udWxsJiZpLmF1dG9NYW5hZ2VWaWRlbz9lLmRldGFjaCh0KTp5aWVsZCBlLnJlbW92ZVNpbmsodCl9KX1wdWJsaXNoKGUsdCl7cmV0dXJuIGModGhpcyxudWxsLGZ1bmN0aW9uKigpe3ZhciBpLHIscztpZihbdGhpcy5zdG9yZS5nZXRQdWJsaXNoUGFyYW1zKCksIXRoaXMuc2RrU3RhdGUucHVibGlzaGVkLCFHZV0uZXZlcnkobz0+ISFvKSl7bGV0IG89dCYmdCE9PSgocj0oaT10aGlzLmxvY2FsUGVlcik9PW51bGw/dm9pZCAwOmkucm9sZSk9PW51bGw/dm9pZCAwOnIubmFtZSk/KCk9Pnt2YXIgbjtyZXR1cm4obj10aGlzLnJvbGVDaGFuZ2VNYW5hZ2VyKT09bnVsbD92b2lkIDA6bi5kaWZmUm9sZXNBbmRQdWJsaXNoVHJhY2tzKHtvbGRSb2xlOnRoaXMuc3RvcmUuZ2V0UG9saWN5Rm9yUm9sZSh0KSxuZXdSb2xlOnRoaXMubG9jYWxQZWVyLnJvbGV9KX06KCk9PnRoaXMuZ2V0QW5kUHVibGlzaFRyYWNrcyhlKTt5aWVsZChzPW89PW51bGw/dm9pZCAwOm8oKSk9PW51bGw/dm9pZCAwOnMuY2F0Y2gobj0+e3ZhciBkO2wuZSh0aGlzLlRBRyxcIkVycm9yIGluIHB1Ymxpc2hcIixuKSwoZD10aGlzLmxpc3RlbmVyKT09bnVsbHx8ZC5vbkVycm9yKG4pfSl9fSl9Z2V0QW5kUHVibGlzaFRyYWNrcyhlKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGkscjtsZXQgdD15aWVsZCB0aGlzLmxvY2FsVHJhY2tNYW5hZ2VyLmdldFRyYWNrc1RvUHVibGlzaChlKTt5aWVsZCB0aGlzLmluaXREZXZpY2VNYW5hZ2VycygpLHlpZWxkIHRoaXMuc2V0QW5kUHVibGlzaFRyYWNrcyh0KSwocj0oaT10aGlzLmxvY2FsUGVlcik9PW51bGw/dm9pZCAwOmkuYXVkaW9UcmFjayk9PW51bGx8fHIuaW5pdEF1ZGlvTGV2ZWxNb25pdG9yKCksdGhpcy5zZGtTdGF0ZS5wdWJsaXNoZWQ9ITB9KX1zZXRBbmRQdWJsaXNoVHJhY2tzKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdCxpO2ZvcihsZXQgciBvZiBlKXtpZih5aWVsZCB0aGlzLnRyYW5zcG9ydC5wdWJsaXNoKFtyXSksci5pc1RyYWNrTm90UHVibGlzaGluZygpKXtsZXQgcz1TLlRyYWNrc0Vycm9ycy5Ob0RhdGFJblRyYWNrKGAke3IudHlwZX0gdHJhY2sgaGFzIG5vIGRhdGEuIG11dGVkOiAke3IubmF0aXZlVHJhY2subXV0ZWR9LCByZWFkeVN0YXRlOiAke3IubmF0aXZlVHJhY2sucmVhZHlTdGF0ZX1gKTtsLmUodGhpcy5UQUcscyksdGhpcy5zZW5kQW5hbHl0aWNzRXZlbnQoeS5wdWJsaXNoKHtkZXZpY2VzOnRoaXMuZGV2aWNlTWFuYWdlci5nZXREZXZpY2VzKCksZXJyb3I6c30pKSwodD10aGlzLmxpc3RlbmVyKT09bnVsbHx8dC5vbkVycm9yKHMpfXlpZWxkIHRoaXMuc2V0TG9jYWxQZWVyVHJhY2sociksKGk9dGhpcy5saXN0ZW5lcik9PW51bGx8fGkub25UcmFja1VwZGF0ZSgwLHIsdGhpcy5sb2NhbFBlZXIpfX0pfXNldExvY2FsUGVlclRyYWNrKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXt2YXIgdDtzd2l0Y2goZS5wZWVySWQ9KHQ9dGhpcy5sb2NhbFBlZXIpPT1udWxsP3ZvaWQgMDp0LnBlZXJJZCxlLnR5cGUpe2Nhc2VcImF1ZGlvXCI6dGhpcy5sb2NhbFBlZXIuYXVkaW9UcmFjaz1lLHlpZWxkIHRoaXMuZGV2aWNlTWFuYWdlci5hdXRvU2VsZWN0QXVkaW9PdXRwdXQoKTticmVhaztjYXNlXCJ2aWRlb1wiOnRoaXMubG9jYWxQZWVyLnZpZGVvVHJhY2s9ZTticmVha319KX1pbml0RGV2aWNlTWFuYWdlcnMoKXtyZXR1cm4gYyh0aGlzLG51bGwsZnVuY3Rpb24qKCl7dmFyIGUsdCxpLHIsczt0aGlzLnNka1N0YXRlLmRldmljZU1hbmFnZXJzSW5pdGlhbGlzZWR8fCh0aGlzLnNka1N0YXRlLmRldmljZU1hbmFnZXJzSW5pdGlhbGlzZWQ9ITAseWllbGQgdGhpcy5kZXZpY2VNYW5hZ2VyLmluaXQoKSwoeWllbGQgdGhpcy5kZXZpY2VNYW5hZ2VyLnVwZGF0ZU91dHB1dERldmljZSgodD0oZT10aGlzLnN0b3JlLmdldENvbmZpZygpKT09bnVsbD92b2lkIDA6ZS5zZXR0aW5ncyk9PW51bGw/dm9pZCAwOnQuYXVkaW9PdXRwdXREZXZpY2VJZCkpfHwoeWllbGQgdGhpcy5kZXZpY2VNYW5hZ2VyLnVwZGF0ZU91dHB1dERldmljZSgocj0oaT1YLmdldFNlbGVjdGlvbigpKT09bnVsbD92b2lkIDA6aS5hdWRpb091dHB1dCk9PW51bGw/dm9pZCAwOnIuZGV2aWNlSWQpKSx0aGlzLmF1ZGlvU2lua01hbmFnZXIuaW5pdCgocz10aGlzLnN0b3JlLmdldENvbmZpZygpKT09bnVsbD92b2lkIDA6cy5hdWRpb1NpbmtFbGVtZW50SWQpKX0pfWNsZWFuRGV2aWNlTWFuYWdlcnMoKXt0aGlzLmV2ZW50QnVzLmRldmljZUNoYW5nZS51bnN1YnNjcmliZSh0aGlzLmhhbmRsZURldmljZUNoYW5nZSksdGhpcy5ldmVudEJ1cy5hdWRpb1BsdWdpbkZhaWxlZC51bnN1YnNjcmliZSh0aGlzLmhhbmRsZUF1ZGlvUGx1Z2luRXJyb3IpLHRoaXMuZXZlbnRCdXMuYXV0b3BsYXlFcnJvci51bnN1YnNjcmliZSh0aGlzLmhhbmRsZUF1dG9wbGF5RXJyb3IpLHRoaXMuZGV2aWNlTWFuYWdlci5jbGVhbnVwKCksdGhpcy5hdWRpb1NpbmtNYW5hZ2VyLmNsZWFudXAoKX1pbml0UHJldmlld1RyYWNrQXVkaW9MZXZlbE1vbml0b3IoKXt2YXIgdDtsZXQgZT0odD10aGlzLmxvY2FsUGVlcik9PW51bGw/dm9pZCAwOnQuYXVkaW9UcmFjaztlPT1udWxsfHxlLmluaXRBdWRpb0xldmVsTW9uaXRvcigpLHRoaXMuZXZlbnRCdXMudHJhY2tBdWRpb0xldmVsVXBkYXRlLnN1YnNjcmliZShpPT57dmFyIHM7bGV0IHI9aSYmaS50cmFjay50cmFja0lkPT09KGU9PW51bGw/dm9pZCAwOmUudHJhY2tJZCk/W3thdWRpb0xldmVsOmkuYXVkaW9MZXZlbCxwZWVyOnRoaXMubG9jYWxQZWVyLHRyYWNrOmV9XTpbXTt0aGlzLnN0b3JlLnVwZGF0ZVNwZWFrZXJzKHIpLChzPXRoaXMuYXVkaW9MaXN0ZW5lcik9PW51bGx8fHMub25BdWRpb0xldmVsVXBkYXRlKHIpfSksdGhpcy5ldmVudEJ1cy5sb2NhbEF1ZGlvU2lsZW5jZS5zdWJzY3JpYmUodGhpcy5zZW5kQXVkaW9QcmVzZW5jZUZhaWxlZCl9bm90aWZ5Sm9pbigpe3ZhciBpO2xldCBlPXRoaXMuc3RvcmUuZ2V0TG9jYWxQZWVyKCksdD10aGlzLnN0b3JlLmdldFJvb20oKTtpZighdCl7bC53KHRoaXMuVEFHLFwibm90aWZ5IGpvaW4gLSByb29tIG5vdCBwcmVzZW50XCIpO3JldHVybn1pZih0LmpvaW5lZEF0PW5ldyBEYXRlLGUmJihlLmpvaW5lZEF0PXQuam9pbmVkQXQpLGUhPW51bGwmJmUucm9sZSl7dGhpcy5hbmFseXRpY3NUaW1lci5lbmQoXCJqb2luX3RpbWVcIiksKGk9dGhpcy5saXN0ZW5lcik9PW51bGx8fGkub25Kb2luKHQpO3JldHVybn1yZXR1cm4gbmV3IFByb21pc2UoKHIscyk9Pnt0aGlzLmV2ZW50QnVzLnBvbGljeUNoYW5nZS5zdWJzY3JpYmVPbmNlKCgpPT57dmFyIG87dGhpcy5hbmFseXRpY3NUaW1lci5lbmQoXCJqb2luX3RpbWVcIiksKG89dGhpcy5saXN0ZW5lcik9PW51bGx8fG8ub25Kb2luKHQpLHIoKX0pLHRoaXMuZXZlbnRCdXMubGVhdmUuc3Vic2NyaWJlT25jZShvPT57cyhvKX0pfSl9c2V0VXBQcmV2aWV3KGUsdCl7dGhpcy5zZGtTdGF0ZS5pc1ByZXZpZXdDYWxsZWQ9ITAsdGhpcy5zZGtTdGF0ZS5pc1ByZXZpZXdJblByb2dyZXNzPSEwO2xldHtyb29tSWQ6aSx1c2VySWQ6cixyb2xlOnN9PU1yKGUuYXV0aFRva2VuKTt0aGlzLmNvbW1vblNldHVwKGUsaSx0KSx0aGlzLnN0b3JlLnNldENvbmZpZyhlKSx0aGlzLnN0b3JlLmNyZWF0ZUFuZFNldFVzZXJBZ2VudCh0aGlzLmZyYW1ld29ya0luZm8pLHRoaXMuY3JlYXRlQW5kQWRkTG9jYWxQZWVyVG9TdG9yZShlLHMscixlLmFzUm9sZSl9c2V0UGxheWxpc3RTZXR0aW5ncyhyKXtyZXR1cm4gYyh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbiooe3RyYWNrOmUsaG1zVHJhY2s6dCxzb3VyY2U6aX0pe3ZhciBzLG87aWYoaT09PVwidmlkZW9wbGF5bGlzdFwiKXtsZXQgbj17fTtpZihlLmtpbmQ9PT1cImF1ZGlvXCIpbi5tYXhCaXRyYXRlPSgocz10aGlzLnBsYXlsaXN0U2V0dGluZ3MuYXVkaW8pPT1udWxsP3ZvaWQgMDpzLmJpdHJhdGUpfHxLcjtlbHNle24ubWF4Qml0cmF0ZT0oKG89dGhpcy5wbGF5bGlzdFNldHRpbmdzLnZpZGVvKT09bnVsbD92b2lkIDA6by5iaXRyYXRlKXx8JHI7bGV0e3dpZHRoOmQsaGVpZ2h0OnV9PWUuZ2V0U2V0dGluZ3MoKTtuLndpZHRoPWQsbi5oZWlnaHQ9dX15aWVsZCB0LnNldFNldHRpbmdzKG4pfWVsc2UgaT09PVwiYXVkaW9wbGF5bGlzdFwiJiYoeWllbGQgdC5zZXRTZXR0aW5ncyh7bWF4Qml0cmF0ZTo2NH0pKX0pfWNyZWF0ZUFuZEFkZExvY2FsUGVlclRvU3RvcmUoZSx0LGkscil7bGV0IHM9dGhpcy5zdG9yZS5nZXRQb2xpY3lGb3JSb2xlKHQpLG89cj90aGlzLnN0b3JlLmdldFBvbGljeUZvclJvbGUocik6dm9pZCAwLG49bmV3IHFlKHtuYW1lOmUudXNlck5hbWV8fFwiXCIsY3VzdG9tZXJVc2VySWQ6aSxtZXRhZGF0YTplLm1ldGFEYXRhfHxcIlwiLHJvbGU6cyxhc1JvbGU6b3x8cyx0eXBlOlwicmVndWxhclwifSk7dGhpcy5zdG9yZS5hZGRQZWVyKG4pfWNvbW1vblNldHVwKGUsdCxpKXt0aGlzLnN0cmluZ2lmeU1ldGFkYXRhKGUpLGUuaW5pdEVuZHBvaW50fHwoZS5pbml0RW5kcG9pbnQ9XCJodHRwczovL3Byb2QtaW5pdC4xMDBtcy5saXZlXCIpLHRoaXMuaW5pdFN0b3JlQW5kTWFuYWdlcnMoaSksdGhpcy5zdG9yZS5nZXRSb29tKCl8fHRoaXMuc3RvcmUuc2V0Um9vbShuZXcgSmUodCkpfXJlbW92ZURldmljZXNGcm9tQ29uZmlnKGUpe3RoaXMuc3RvcmUuZ2V0Q29uZmlnKCkmJmUuc2V0dGluZ3MmJihkZWxldGUgZS5zZXR0aW5ncy5hdWRpb091dHB1dERldmljZUlkLGRlbGV0ZSBlLnNldHRpbmdzLnZpZGVvRGV2aWNlSWQsZGVsZXRlIGUuc2V0dGluZ3MuYXVkaW9JbnB1dERldmljZUlkKX1nZXRTY3JlZW5zaGFyZVRyYWNrcyhlLHQpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtsZXQgaT10aGlzLnRyYW5zcG9ydC5pc0ZsYWdFbmFibGVkKFwic2NhbGVTY3JlZW5zaGFyZUJhc2VkT25QaXhlbHNcIiksW3Isc109eWllbGQgdGhpcy5sb2NhbFRyYWNrTWFuYWdlci5nZXRMb2NhbFNjcmVlbih0LGkpLG89KCk9Pnt0aGlzLnN0b3BFbmRlZFNjcmVlbnNoYXJlKGUpfSxuPVtdO2lmKHQhPW51bGwmJnQuYXVkaW9Pbmx5KXtpZihyLm5hdGl2ZVRyYWNrLnN0b3AoKSwhcyl0aHJvdyBTLlRyYWNrc0Vycm9ycy5Ob3RoaW5nVG9SZXR1cm4oXCJUUkFDS1wiLFwiU2VsZWN0IHNoYXJlIGF1ZGlvIHdoZW4gc2hhcmluZyBzY3JlZW5cIixcIk5vIGF1ZGlvIGZvdW5kXCIpO24ucHVzaChzKSxzLm5hdGl2ZVRyYWNrLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLG8pfWVsc2Ugbi5wdXNoKHIpLHIubmF0aXZlVHJhY2suYWRkRXZlbnRMaXN0ZW5lcihcImVuZGVkXCIsbykscyYmbi5wdXNoKHMpO3JldHVybiBufSl9c3RvcFBsYXlsaXN0KGUpe2Uuc291cmNlPT09XCJhdWRpb3BsYXlsaXN0XCI/dGhpcy5wbGF5bGlzdE1hbmFnZXIuc3RvcChcImF1ZGlvXCIpOmUuc291cmNlPT09XCJ2aWRlb3BsYXlsaXN0XCImJnRoaXMucGxheWxpc3RNYW5hZ2VyLnN0b3AoXCJ2aWRlb1wiKX1hcHBseVNldHRpbmdzKGUpe3JldHVybiBjKHRoaXMsbnVsbCxmdW5jdGlvbiooKXtOcyh0aGlzLnN0b3JlKTtsZXQgdD10aGlzLnN0b3JlLmdldFB1Ymxpc2hQYXJhbXMoKTtpZih0KXtpZihlIGluc3RhbmNlb2YgRyl7bGV0IGk9ZS5zb3VyY2U9PT1cInJlZ3VsYXJcIj9cInZpZGVvXCI6ZS5zb3VyY2U9PT1cInNjcmVlblwiP1wic2NyZWVuXCI6XCJcIjtpZighaXx8IXQuYWxsb3dlZC5pbmNsdWRlcyhpKSlyZXR1cm47bGV0IHI9dFtpXTtpZighcilyZXR1cm47bGV0IHM9bmV3IHEoKS5jb2RlYyhyLmNvZGVjKS5tYXhCaXRyYXRlKHIuYml0UmF0ZSkubWF4RnJhbWVyYXRlKHIuZnJhbWVSYXRlKS5zZXRXaWR0aChyLndpZHRoKS5zZXRIZWlnaHQoci5oZWlnaHQpLmJ1aWxkKCk7eWllbGQgZS5zZXRTZXR0aW5ncyhzKX1lbHNlIGlmKGUgaW5zdGFuY2VvZiBkZSl7aWYoIXQuYWxsb3dlZC5pbmNsdWRlcyhcImF1ZGlvXCIpKXJldHVybjtsZXQgaT1uZXcgUSgpLmNvZGVjKHQuYXVkaW8uY29kZWMpLm1heEJpdHJhdGUodC5hdWRpby5iaXRSYXRlKS5idWlsZCgpO3lpZWxkIGUuc2V0U2V0dGluZ3MoaSl9fX0pfX07dmFyIG10PWNsYXNzIGF7Y29uc3RydWN0b3IoZSx0LGkpe3RoaXMuZ2V0U3RhdHM9KCk9Pih0aGlzLnN0YXRzfHwodGhpcy5zdGF0cz1uZXcgc2kodGhpcy5zdG9yZSx0aGlzLnNkaykpLHRoaXMuc3RhdHMpO3RoaXMuZ2V0RGlhZ25vc3RpY3NTREs9KCk9Pih0aGlzLmRpYWdub3N0aWNzfHwodGhpcy5kaWFnbm9zdGljcz10aGlzLmFjdGlvbnMuaW5pdERpYWdub3N0aWNzKCkpLHRoaXMuZGlhZ25vc3RpY3MpO2U/dGhpcy5zdG9yZT1lOnRoaXMuc3RvcmU9YS5jcmVhdGVOZXdITVNTdG9yZShGaShcIkhNU1N0b3JlXCIpLG9pKSxpP3RoaXMubm90aWZpY2F0aW9ucz1pOnRoaXMubm90aWZpY2F0aW9ucz1uZXcgTGkodGhpcy5zdG9yZSksdD90aGlzLmFjdGlvbnM9dDoodGhpcy5zZGs9bmV3IHlyLHRoaXMuYWN0aW9ucz1uZXcgVmkodGhpcy5zdG9yZSx0aGlzLnNkayx0aGlzLm5vdGlmaWNhdGlvbnMpKSx0aGlzLmFjdGlvbnMuc2V0RnJhbWV3b3JrSW5mbyh7dHlwZTpcImpzXCIsc2RrVmVyc2lvbjpJcigpLnZlcnNpb259KSx0aGlzLmluaXRpYWxUcmlnZ2VyT25TdWJzY3JpYmU9ITEsVSYmKHdpbmRvdy5fX2htcz10aGlzKX10cmlnZ2VyT25TdWJzY3JpYmUoKXt0aGlzLmluaXRpYWxUcmlnZ2VyT25TdWJzY3JpYmV8fChhLm1ha2VTdG9yZVRyaWdnZXJPblN1YnNjcmliZSh0aGlzLnN0b3JlKSx0aGlzLmluaXRpYWxUcmlnZ2VyT25TdWJzY3JpYmU9ITApfWdldFN0b3JlKCl7cmV0dXJuIHRoaXMuc3RvcmV9Z2V0SE1TQWN0aW9ucygpe3JldHVybiB0aGlzLmFjdGlvbnN9Z2V0QWN0aW9ucygpe3JldHVybiB0aGlzLmFjdGlvbnN9Z2V0Tm90aWZpY2F0aW9ucygpe3JldHVybntvbk5vdGlmaWNhdGlvbjp0aGlzLm5vdGlmaWNhdGlvbnMub25Ob3RpZmljYXRpb259fXN0YXRpYyBjcmVhdGVOZXdITVNTdG9yZShlLHQpe2xldCBpPV9uKCgpPT50KCkpLHI9aS5zZXRTdGF0ZTtpLnNldFN0YXRlPW49PntsZXQgZD10eXBlb2Ygbj09XCJmdW5jdGlvblwiP0RuKG4pOm47cihkKX07bGV0IHM9aS5nZXRTdGF0ZTtpLmdldFN0YXRlPW49Pm4/bihzKCkpOnMoKSxhLmNvbXBhcmVXaXRoU2hhbGxvd0NoZWNrSW5TdWJzY3JpYmUoaSk7bGV0IG89YS5zZXRVcERldnRvb2xzKGksZSk7cmV0dXJuIE0obSh7fSxpKSx7bmFtZWRTZXRTdGF0ZTpvfSl9c3RhdGljIG1ha2VTdG9yZVRyaWdnZXJPblN1YnNjcmliZShlKXtsZXQgdD1lLnN1YnNjcmliZTtlLnN1YnNjcmliZT0oaSxyLHMpPT4oaShlLmdldFN0YXRlKHIpLHZvaWQgMCksdChpLHIscykpfXN0YXRpYyBjb21wYXJlV2l0aFNoYWxsb3dDaGVja0luU3Vic2NyaWJlKGUpe2xldCB0PWUuc3Vic2NyaWJlO2Uuc3Vic2NyaWJlPShpLHIscyk9PihyfHwocj1vPT5vKSxzPXN8fHduLHQoaSxyLHMpKX1zdGF0aWMgc2V0VXBEZXZ0b29scyhlLHQpe2xldCBpO3RyeXtpPXdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9ffHx3aW5kb3cudG9wLl9fUkVEVVhfREVWVE9PTFNfRVhURU5TSU9OX199Y2F0Y2gobyl7fWlmKCFpKXJldHVybiBvPT57ZS5zZXRTdGF0ZShvKX07bGV0IHI9aS5jb25uZWN0KGEuZGV2dG9vbHNPcHRpb25zKHQpKTtyLnByZWZpeD10P2Ake3R9ID4gYDpcIlwiO2xldCBzPWUuc2V0U3RhdGU7cmV0dXJuIGUuc2V0U3RhdGU9bz0+e3Mobyksci5zZW5kKGAke3IucHJlZml4fXNldFN0YXRlYCxlLmdldFN0YXRlKCkpfSxyLnN1YnNjcmliZShhLmRldnRvb2xzU3Vic2NyaWJlKHIsZSxzKSksci5zZW5kKFwic2V0VXBTdG9yZVwiLGUuZ2V0U3RhdGUoKSksKG8sbik9PntzKG8pO2xldCBkPW58fGAke3IucHJlZml4fWFjdGlvbmA7ci5zZW5kKGQsZS5nZXRTdGF0ZSgpKX19c3RhdGljIGRldnRvb2xzT3B0aW9ucyhlKXtyZXR1cm57bmFtZTplLGFjdGlvbnNCbGFja2xpc3Q6W1wiYXVkaW9MZXZlbFwiLFwicGxheWxpc3RQcm9ncmVzc1wiLFwiY29ubmVjdGlvblF1YWxpdHlcIl19fXN0YXRpYyBkZXZ0b29sc1N1YnNjcmliZShlLHQsaSl7cmV0dXJuIHI9Pnt2YXIgcyxvLG4sZDtpZihyLnR5cGU9PT1cIkRJU1BBVENIXCImJnIuc3RhdGUpW1wiSlVNUF9UT19BQ1RJT05cIixcIkpVTVBfVE9fU1RBVEVcIl0uaW5jbHVkZXMoci5wYXlsb2FkLnR5cGUpP2koSlNPTi5wYXJzZShyLnN0YXRlKSk6dC5zZXRTdGF0ZShKU09OLnBhcnNlKHIuc3RhdGUpKTtlbHNlIGlmKHIudHlwZT09PVwiRElTUEFUQ0hcIiYmKChzPXIucGF5bG9hZCk9PW51bGw/dm9pZCAwOnMudHlwZSk9PT1cIkNPTU1JVFwiKWUuaW5pdCh0LmdldFN0YXRlKCkpO2Vsc2UgaWYoci50eXBlPT09XCJESVNQQVRDSFwiJiYoKG89ci5wYXlsb2FkKT09bnVsbD92b2lkIDA6by50eXBlKT09PVwiSU1QT1JUX1NUQVRFXCIpe2xldCB1PShuPXIucGF5bG9hZC5uZXh0TGlmdGVkU3RhdGUpPT1udWxsP3ZvaWQgMDpuLmFjdGlvbnNCeUlkOygoKGQ9ci5wYXlsb2FkLm5leHRMaWZ0ZWRTdGF0ZSk9PW51bGw/dm9pZCAwOmQuY29tcHV0ZWRTdGF0ZXMpfHxbXSkuZm9yRWFjaCgoe3N0YXRlOmh9LFQpPT57bGV0IGc9dVtUXXx8YCR7ZS5wcmVmaXh9c2V0U3RhdGVgO1Q9PT0wP2UuaW5pdChoKTooaShoKSxlLnNlbmQoZyx0LmdldFN0YXRlKCkpKX0pfX19fTt2YXIgYW89KGEsZSx0KT0+e2xldCBpO3QuZ2V0U3RhdGUoc2UpPT09XCJDb25uZWN0ZWRcIiYmKGk9c28oYSxlLHQpKSx0LnN1YnNjcmliZShyPT57W1wiQ29ubmVjdGVkXCIsXCJSZWNvbm5lY3RpbmdcIl0uaW5jbHVkZXMocik/aXx8KGk9c28oYSxlLHQpKTpbXCJEaXNjb25uZWN0ZWRcIixcIkZhaWxlZFwiXS5pbmNsdWRlcyhyKSYmaSYmKHhuKGUsciksaSgpLGk9dm9pZCAwKX0sc2UpfSxzbz0oYSxlLHQpPT57dmFyIHMsbztsZXQgaT1Obih0LGUpOyhzPWEuZ2V0V2VicnRjSW50ZXJuYWxzKCkpPT1udWxsfHxzLnN0YXJ0KCk7bGV0IHI9KG89YS5nZXRXZWJydGNJbnRlcm5hbHMoKSk9PW51bGw/dm9pZCAwOm8ub25TdGF0c0NoYW5nZShuPT5PbihlLG4sdCxhKSk7cmV0dXJuKCk9PntpKCksciYmcigpfX0sTm49KGEsZSk9PntsZXQgdCxpLHI7cmV0dXJuIGEuZ2V0U3RhdGUoSWUpP2UubmFtZWRTZXRTdGF0ZShzPT57cy5sb2NhbFBlZXIuaWQ9YS5nZXRTdGF0ZShJZSl9LFwibG9jYWxwZWVyLWlkXCIpOnQ9YS5zdWJzY3JpYmUocz0+e3MmJmUubmFtZWRTZXRTdGF0ZShvPT57by5sb2NhbFBlZXIuaWQ9c30sXCJsb2NhbHBlZXItaWRcIil9LEllKSxhLmdldFN0YXRlKFopP2UubmFtZWRTZXRTdGF0ZShzPT57cy5sb2NhbFBlZXIudmlkZW9UcmFjaz1hLmdldFN0YXRlKFopfSxcImxvY2FscGVlci12aWRlb3RyYWNrLWlkXCIpOmk9YS5zdWJzY3JpYmUocz0+e3MmJmUubmFtZWRTZXRTdGF0ZShvPT57by5sb2NhbFBlZXIudmlkZW9UcmFjaz1zfSxcImxvY2FscGVlci12aWRlb3RyYWNrLWlkXCIpfSxaKSxhLmdldFN0YXRlKGxlKT9lLm5hbWVkU2V0U3RhdGUocz0+e3MubG9jYWxQZWVyLmF1ZGlvVHJhY2s9YS5nZXRTdGF0ZShsZSl9LFwibG9jYWxwZWVyLWF1ZGlvdHJhY2staWRcIik6cj1hLnN1YnNjcmliZShzPT57cyYmZS5uYW1lZFNldFN0YXRlKG89PntvLmxvY2FsUGVlci5hdWRpb1RyYWNrPXN9LFwibG9jYWxwZWVyLWF1ZGlvdHJhY2staWRcIil9LGxlKSwoKT0+e3Q9PW51bGx8fHQoKSxpPT1udWxsfHxpKCkscj09bnVsbHx8cigpfX0sT249KGEsZSx0LGkpPT57bGV0IHI9dC5nZXRTdGF0ZShOKTthLm5hbWVkU2V0U3RhdGUocz0+e2xldCBvPXQuZ2V0U3RhdGUoSWUpLG49e30sZD1PYmplY3Qua2V5cyhyKS5maWx0ZXIocD0+cltwXS5wZWVySWQhPT1vKTtmb3IobGV0IHAgb2YgZCl7bGV0IGg9ZS5nZXRSZW1vdGVUcmFja1N0YXRzKHApO2gmJihuW3BdPWgpfXJzKHMucmVtb3RlVHJhY2tTdGF0cyxuKTtsZXQgdT17W29dOmUuZ2V0TG9jYWxQZWVyU3RhdHMoKX07cnMocy5wZWVyU3RhdHMsdSksV2Eocy5sb2NhbFRyYWNrU3RhdHMsZS5nZXRMb2NhbFRyYWNrU3RhdHMoKSxpLnN0b3JlLmdldExvY2FsUGVlclRyYWNrcygpKX0sXCJ3ZWJydGMtc3RhdHNcIil9LHhuPShhLGU9XCJyZXNldFN0YXRlXCIpPT57YS5uYW1lZFNldFN0YXRlKHQ9PntPYmplY3QuYXNzaWduKHQsbmkoKSl9LGUpfTt2YXIgc2k9Y2xhc3N7Y29uc3RydWN0b3IoZSx0KXt0aGlzLmhtc1N0b3JlPWU7dGhpcy5zZGs9dDt0aGlzLnN0b3JlPW10LmNyZWF0ZU5ld0hNU1N0b3JlKEZpKFwiSE1TU3RhdHNTdG9yZVwiKSxuaSksdGhpcy5nZXRTdGF0ZT10aGlzLnN0b3JlLmdldFN0YXRlLHRoaXMuc3Vic2NyaWJlPXRoaXMuc3RvcmUuc3Vic2NyaWJlLHRoaXMuZ2V0UHVibGlzaFBlZXJDb25uZWN0aW9uPSgpPT5uZXcgUHJvbWlzZShpPT57dmFyIHIsczt0aGlzLmhtc1N0b3JlLmdldFN0YXRlKHNlKT09PVwiQ29ubmVjdGVkXCI/aSgocz0ocj10aGlzLnNkayk9PW51bGw/dm9pZCAwOnIuZ2V0V2VicnRjSW50ZXJuYWxzKCkpPT1udWxsP3ZvaWQgMDpzLmdldFB1Ymxpc2hQZWVyQ29ubmVjdGlvbigpKTp0aGlzLmhtc1N0b3JlLnN1YnNjcmliZShvPT57dmFyIG4sZDtvPT09XCJDb25uZWN0ZWRcIiYmaSgoZD0obj10aGlzLnNkayk9PW51bGw/dm9pZCAwOm4uZ2V0V2VicnRjSW50ZXJuYWxzKCkpPT1udWxsP3ZvaWQgMDpkLmdldFB1Ymxpc2hQZWVyQ29ubmVjdGlvbigpKX0sc2UpfSksdGhpcy5nZXRTdWJzY3JpYmVQZWVyQ29ubmVjdGlvbj0oKT0+bmV3IFByb21pc2UoaT0+e3ZhciByLHM7dGhpcy5obXNTdG9yZS5nZXRTdGF0ZShzZSk9PT1cIkNvbm5lY3RlZFwiP2koKHM9KHI9dGhpcy5zZGspPT1udWxsP3ZvaWQgMDpyLmdldFdlYnJ0Y0ludGVybmFscygpKT09bnVsbD92b2lkIDA6cy5nZXRTdWJzY3JpYmVQZWVyQ29ubmVjdGlvbigpKTp0aGlzLmhtc1N0b3JlLnN1YnNjcmliZShvPT57dmFyIG4sZDtvPT09XCJDb25uZWN0ZWRcIiYmaSgoZD0obj10aGlzLnNkayk9PW51bGw/dm9pZCAwOm4uZ2V0V2VicnRjSW50ZXJuYWxzKCkpPT1udWxsP3ZvaWQgMDpkLmdldFN1YnNjcmliZVBlZXJDb25uZWN0aW9uKCkpfSxzZSl9KSx0aGlzLnNkayYmYW8odGhpcy5zZGssdGhpcy5zdG9yZSx0aGlzLmhtc1N0b3JlKX19O2ltcG9ydHtjcmVhdGVTZWxlY3RvciBhcyBLfWZyb21cInJlc2VsZWN0XCI7dmFyIFVuPWE9PmEubG9jYWxQZWVyLmlkLEJuPWE9PmEubG9jYWxQZWVyLmF1ZGlvVHJhY2ssVm49YT0+YS5sb2NhbFBlZXIudmlkZW9UcmFjayxGbj0oYSxlKT0+ZSxvbz0oYSxlKT0+ZSxHbj1hPT5hLnJlbW90ZVRyYWNrU3RhdHMsbm89YT0+YS5wZWVyU3RhdHMsdXM9YT0+YS5sb2NhbFRyYWNrU3RhdHMsTGU9Syhbbm8sVW5dLChhLGUpPT5hW2VdKSxXbj1LKExlLGE9Pnt2YXIgZTtyZXR1cm4oZT1hPT1udWxsP3ZvaWQgMDphLnN1YnNjcmliZSk9PW51bGw/dm9pZCAwOmUucGFja2V0c0xvc3R9KSwkbj1LKExlLGE9Pnt2YXIgZTtyZXR1cm4oZT1hPT1udWxsP3ZvaWQgMDphLnN1YnNjcmliZSk9PW51bGw/dm9pZCAwOmUuaml0dGVyfSksS249SyhMZSxhPT57dmFyIGU7cmV0dXJuKGU9YT09bnVsbD92b2lkIDA6YS5wdWJsaXNoKT09bnVsbD92b2lkIDA6ZS5iaXRyYXRlfSkscW49SyhMZSxhPT57dmFyIGU7cmV0dXJuKGU9YT09bnVsbD92b2lkIDA6YS5zdWJzY3JpYmUpPT1udWxsP3ZvaWQgMDplLmJpdHJhdGV9KSxqbj1LKExlLGE9Pnt2YXIgZTtyZXR1cm4oZT1hPT1udWxsP3ZvaWQgMDphLnB1Ymxpc2gpPT1udWxsP3ZvaWQgMDplLmF2YWlsYWJsZU91dGdvaW5nQml0cmF0ZX0pLEpuPUsoTGUsYT0+e3ZhciBlO3JldHVybihlPWE9PW51bGw/dm9pZCAwOmEuc3Vic2NyaWJlKT09bnVsbD92b2lkIDA6ZS5hdmFpbGFibGVJbmNvbWluZ0JpdHJhdGV9KSxRbj1LKExlLGE9Pnt2YXIgZTtyZXR1cm4oZT1hPT1udWxsP3ZvaWQgMDphLnB1Ymxpc2gpPT1udWxsP3ZvaWQgMDplLmJ5dGVzU2VudH0pLHpuPUsoTGUsYT0+e3ZhciBlO3JldHVybihlPWE9PW51bGw/dm9pZCAwOmEuc3Vic2NyaWJlKT09bnVsbD92b2lkIDA6ZS5ieXRlc1JlY2VpdmVkfSksWW49Syhbbm8sRm5dLChhLGUpPT5lP2FbZV06dm9pZCAwKSxYbj1LKFtHbixvb10sKGEsZSk9PmU/YVtlXTp2b2lkIDApLHBzPUsoW3VzLG9vXSwoYSxlKT0+ZT9hW2VdOnZvaWQgMCksWm49SChZbiksZWM9SChYbiksdGM9SyhbdXMsQm5dLChhLGUpPT57dmFyIHQ7cmV0dXJuIGU/KHQ9YVtlXSk9PW51bGw/dm9pZCAwOnRbMF06dm9pZCAwfSksaWM9SChLKHBzLGE9PmE9PW51bGw/dm9pZCAwOmFbMF0pKSxyYz1LKFt1cyxWbl0sKGEsZSk9Pnt2YXIgdDtyZXR1cm4gZT8odD1hW2VdKT09bnVsbD92b2lkIDA6dFswXTp2b2lkIDB9KSxzYz1IKEsocHMsYT0+YSkpLGFjPWE9PkgoSyhwcyxlPT57bGV0IHQ9T2JqZWN0LmtleXMoV2UpLmZpbmQoaT0+V2VbaV09PT1hKTtyZXR1cm4gYSYmKGU9PW51bGw/dm9pZCAwOmUuZmluZChpPT5pLnJpZD09PXQpKXx8KGU9PW51bGw/dm9pZCAwOmVbMF0pfSkpLG9jPXtsb2NhbFBlZXJTdGF0czpMZSxwYWNrZXRzTG9zdDpXbixqaXR0ZXI6JG4scHVibGlzaEJpdHJhdGU6S24sc3Vic2NyaWJlQml0cmF0ZTpxbixhdmFpbGFibGVQdWJsaXNoQml0cmF0ZTpqbixhdmFpbGFibGVTdWJzY3JpYmVCaXRyYXRlOkpuLHRvdGFsQnl0ZXNTZW50OlFuLHRvdGFsQnl0ZXNSZWNlaXZlZDp6bixwZWVyU3RhdHNCeUlEOlpuLHRyYWNrU3RhdHNCeUlEOmVjLGxvY2FsQXVkaW9UcmFja1N0YXRzQnlJRDppYyxsb2NhbFZpZGVvVHJhY2tTdGF0c0J5SUQ6c2MsbG9jYWxWaWRlb1RyYWNrU3RhdHNCeUxheWVyOmFjLGxvY2FsQXVkaW9UcmFja1N0YXRzOnRjLGxvY2FsVmlkZW9UcmFja1N0YXRzOnJjfTtleHBvcnR7VG4gYXMgQ29ubmVjdGl2aXR5U3RhdGUscXMgYXMgRGV2aWNlVHlwZSxVdCBhcyBEaWFnbm9zdGljcyxMcyBhcyBEb21haW5DYXRlZ29yeSxLdCBhcyBFdmVudEJ1cyxHcyBhcyBITFNQbGF5bGlzdFR5cGUsV3MgYXMgSExTU3RyZWFtVHlwZSxfciBhcyBITVNBdWRpb0RldmljZUNhdGVnb3J5LHhyIGFzIEhNU0F1ZGlvTW9kZSxDciBhcyBITVNBdWRpb1BsdWdpblR5cGUsa3MgYXMgSE1TTG9nTGV2ZWwsU28gYXMgSE1TTWVzc2FnZVR5cGUsZnMgYXMgSE1TTm90aWZpY2F0aW9uU2V2ZXJpdHksUHIgYXMgSE1TTm90aWZpY2F0aW9uVHlwZXMsT3IgYXMgSE1TUGVlclR5cGUsdnMgYXMgSE1TUGxheWxpc3RUeXBlLExyIGFzIEhNU1BsdWdpblVuc3VwcG9ydGVkVHlwZXMsbXQgYXMgSE1TUmVhY3RpdmVTdG9yZSxGcyBhcyBITVNSZWNvcmRpbmdTdGF0ZSxFciBhcyBITVNSb29tU3RhdGUsc2kgYXMgSE1TU3RhdHMsRHMgYXMgSE1TVHJhY2tFeGNlcHRpb25UcmFja1R5cGUsS3MgYXMgSE1TVHJhbnNjcmlwdGlvbk1vZGUsJHMgYXMgSE1TVHJhbnNjcmlwdGlvblN0YXRlLEZyIGFzIEhNU1ZpZGVvUGx1Z2luQ2FudmFzQ29udGV4dFR5cGUsVnIgYXMgSE1TVmlkZW9QbHVnaW5UeXBlLG5pIGFzIGNyZWF0ZURlZmF1bHRTdGF0c1N0b3JlLG9pIGFzIGNyZWF0ZURlZmF1bHRTdG9yZVN0YXRlLE5yIGFzIGdldEF1ZGlvRGV2aWNlQ2F0ZWdvcnksVGUgYXMgcGFyc2VkVXNlckFnZW50LHVTIGFzIHNlbGVjdEFwcERhdGEsaFMgYXMgc2VsZWN0QXBwRGF0YUJ5UGF0aCxBYSBhcyBzZWxlY3RBdWRpb1BsYXlsaXN0LElTIGFzIHNlbGVjdEF1ZGlvUGxheWxpc3RUcmFja0J5UGVlcklELGdTIGFzIHNlbGVjdEF1ZGlvVHJhY2tCeUlELG9uIGFzIHNlbGVjdEF1ZGlvVHJhY2tCeVBlZXJJRCxfYSBhcyBzZWxlY3RBdWRpb1RyYWNrVm9sdW1lLHdTIGFzIHNlbGVjdEF1ZGlvVm9sdW1lQnlQZWVySUQsUFMgYXMgc2VsZWN0QXV4aWxpYXJ5QXVkaW9CeVBlZXJJRCxNUyBhcyBzZWxlY3RBdXhpbGlhcnlUcmFja3NCeVBlZXJJRCxVbSBhcyBzZWxlY3RBdmFpbGFibGVSb2xlTmFtZXMsY24gYXMgc2VsZWN0QnJvYWRjYXN0TWVzc2FnZXMsT1MgYXMgc2VsZWN0QnJvYWRjYXN0TWVzc2FnZXNVbnJlYWRDb3VudCx2UyBhcyBzZWxlY3RDYW1lcmFTdHJlYW1CeVBlZXJJRCxNbSBhcyBzZWxlY3RDb25uZWN0aW9uUXVhbGl0aWVzLEVTIGFzIHNlbGVjdENvbm5lY3Rpb25RdWFsaXR5QnlQZWVySUQsRG0gYXMgc2VsZWN0RGVncmFkZWRUcmFja3Msdm0gYXMgc2VsZWN0RGV2aWNlcyx1ZyBhcyBzZWxlY3REaWRJSm9pbldpdGhpbixibSBhcyBzZWxlY3REb21pbmFudFNwZWFrZXIsUW0gYXMgc2VsZWN0RWZmZWN0c0tleSxHbyBhcyBzZWxlY3RFcnJvcnMsenIgYXMgc2VsZWN0RnVsbEFwcERhdGEsR20gYXMgc2VsZWN0SExTU3RhdGUsSm8gYXMgc2VsZWN0SE1TQnJvYWRjYXN0TWVzc2FnZXMsRHQgYXMgc2VsZWN0SE1TTWVzc2FnZXMsd20gYXMgc2VsZWN0SE1TTWVzc2FnZXNDb3VudCxvYyBhcyBzZWxlY3RITVNTdGF0cyxabSBhcyBzZWxlY3RIYW5kUmFpc2VkUGVlcnMsJFMgYXMgc2VsZWN0SGFzUGVlckhhbmRSYWlzZWQsdGcgYXMgc2VsZWN0SXNBbGxvd2VkVG9QcmV2aWV3TWVkaWEsZWcgYXMgc2VsZWN0SXNBbGxvd2VkVG9QdWJsaXNoLEJtIGFzIHNlbGVjdElzQWxsb3dlZFRvU3Vic2NyaWJlLHdhIGFzIHNlbGVjdElzQXVkaW9Mb2NhbGx5TXV0ZWQsQmUgYXMgc2VsZWN0SXNDb25uZWN0ZWRUb1Jvb20sam0gYXMgc2VsZWN0SXNFZmZlY3RzRW5hYmxlZCxtYSBhcyBzZWxlY3RJc0luUHJldmlldyxxbSBhcyBzZWxlY3RJc0xhcmdlUm9vbSxBbSBhcyBzZWxlY3RJc0xvY2FsQXVkaW9FbmFibGVkLGNnIGFzIHNlbGVjdElzTG9jYWxBdWRpb1BsdWdpblByZXNlbnQsWHIgYXMgc2VsZWN0SXNMb2NhbFNjcmVlblNoYXJlZCxoYSBhcyBzZWxlY3RJc0xvY2FsVmlkZW9EaXNwbGF5RW5hYmxlZCxZciBhcyBzZWxlY3RJc0xvY2FsVmlkZW9FbmFibGVkLG5nIGFzIHNlbGVjdElzTG9jYWxWaWRlb1BsdWdpblByZXNlbnQsTFMgYXMgc2VsZWN0SXNMb2NhbGx5TXV0ZWRCeVBlZXJJRCxIUyBhcyBzZWxlY3RJc1BlZXJBdWRpb0VuYWJsZWQsQ1MgYXMgc2VsZWN0SXNQZWVyVmlkZW9FbmFibGVkLG9nIGFzIHNlbGVjdElzUm9sZUFsbG93ZWRUb1B1Ymxpc2gsRFMgYXMgc2VsZWN0SXNTY3JlZW5TaGFyZUxvY2FsbHlNdXRlZEJ5UGVlcklELEltIGFzIHNlbGVjdElzU29tZW9uZVNjcmVlblNoYXJpbmcsalMgYXMgc2VsZWN0SXNUcmFuc2NyaXB0aW9uQWxsb3dlZEJ5TW9kZSx4bSBhcyBzZWxlY3RJc1RyYW5zY3JpcHRpb25FbmFibGVkLEptIGFzIHNlbGVjdElzVkJFbmFibGVkLGxlIGFzIHNlbGVjdExvY2FsQXVkaW9UcmFja0lELHVhIGFzIHNlbGVjdExvY2FsTWVkaWFTZXR0aW5ncyxyZSBhcyBzZWxlY3RMb2NhbFBlZXIsSWUgYXMgc2VsZWN0TG9jYWxQZWVySUQsa20gYXMgc2VsZWN0TG9jYWxQZWVyTmFtZSxjdCBhcyBzZWxlY3RMb2NhbFBlZXJSb2xlLEVtIGFzIHNlbGVjdExvY2FsUGVlclJvbGVOYW1lLHBhIGFzIHNlbGVjdExvY2FsVHJhY2tJRHMsWiBhcyBzZWxlY3RMb2NhbFZpZGVvVHJhY2tJRCxxUyBhcyBzZWxlY3RNZXNzYWdlQnlNZXNzYWdlSUQsbGEgYXMgc2VsZWN0TWVzc2FnZUlEc0luT3JkZXIseFMgYXMgc2VsZWN0TWVzc2FnZXNCeVBlZXJJRCxVUyBhcyBzZWxlY3RNZXNzYWdlc0J5Um9sZSxBaSBhcyBzZWxlY3RNZXNzYWdlc01hcCxWUyBhcyBzZWxlY3RNZXNzYWdlc1VucmVhZENvdW50QnlQZWVySUQsQlMgYXMgc2VsZWN0TWVzc2FnZXNVbnJlYWRDb3VudEJ5Um9sZSxrUyBhcyBzZWxlY3RQZWVyQXVkaW9CeUlELGRnIGFzIHNlbGVjdFBlZXJCeUNvbmRpdGlvbixlZSBhcyBzZWxlY3RQZWVyQnlJRCx5bSBhcyBzZWxlY3RQZWVyQ291bnQsV1MgYXMgc2VsZWN0UGVlck1ldGFkYXRhLEtTIGFzIHNlbGVjdFBlZXJOYW1lLG1TIGFzIHNlbGVjdFBlZXJOYW1lQnlJRCxqbyBhcyBzZWxlY3RQZWVyU2NyZWVuU2hhcmluZyxSbSBhcyBzZWxlY3RQZWVyU2hhcmluZ0F1ZGlvLExtIGFzIHNlbGVjdFBlZXJTaGFyaW5nQXVkaW9QbGF5bGlzdCxDbSBhcyBzZWxlY3RQZWVyU2hhcmluZ1ZpZGVvUGxheWxpc3QsU1MgYXMgc2VsZWN0UGVlclR5cGVCeUlELGtlIGFzIHNlbGVjdFBlZXJzLGxnIGFzIHNlbGVjdFBlZXJzQnlDb25kaXRpb24sRlMgYXMgc2VsZWN0UGVlcnNCeVJvbGUsR1MgYXMgc2VsZWN0UGVlcnNCeVJvbGVzLHogYXMgc2VsZWN0UGVlcnNNYXAsSG0gYXMgc2VsZWN0UGVlcnNTY3JlZW5TaGFyaW5nLFhTIGFzIHNlbGVjdFBlZXJzV2l0aEF1ZGlvU3RhdHVzLGdhIGFzIHNlbGVjdFBlcm1pc3Npb25zLHhhIGFzIHNlbGVjdFBvbGxCeUlELFhtIGFzIHNlbGVjdFBvbGxzLFRhIGFzIHNlbGVjdFBvbGxzTWFwLFNhIGFzIHNlbGVjdFByZXZpZXdSb2xlLFFvIGFzIHNlbGVjdFByZXZpZXdSb2xlTmFtZSxGbSBhcyBzZWxlY3RSVE1QU3RhdGUsVG0gYXMgc2VsZWN0UmVjZW50RXJyb3IsVm0gYXMgc2VsZWN0UmVjb3JkaW5nU3RhdGUsUG0gYXMgc2VsZWN0UmVtb3RlUGVlcnMscG4gYXMgc2VsZWN0Um9sZUJ5Um9sZU5hbWUsWlMgYXMgc2VsZWN0Um9sZUNoYW5nZVJlcXVlc3QsRWUgYXMgc2VsZWN0Um9sZXNNYXAsRiBhcyBzZWxlY3RSb29tLGZtIGFzIHNlbGVjdFJvb21JRCxLbSBhcyBzZWxlY3RSb29tU3RhcnRUaW1lLE9tIGFzIHNlbGVjdFJvb21TdGFydGVkLHNlIGFzIHNlbGVjdFJvb21TdGF0ZSxUUyBhcyBzZWxlY3RTY3JlZW5BdWRpb1RyYWNrQnlJRCxEYSBhcyBzZWxlY3RTY3JlZW5TaGFyZUF1ZGlvQnlQZWVySUQsUlMgYXMgc2VsZWN0U2NyZWVuU2hhcmVCeVBlZXJJRCxMYSBhcyBzZWxlY3RTY3JlZW5TaGFyZXNCeVBlZXJJZCxmUyBhcyBzZWxlY3RTY3JlZW5WaWRlb1RyYWNrQnlJRCxfUyBhcyBzZWxlY3RTY3JlZW5zaGFyZUF1ZGlvVm9sdW1lQnlQZWVySUQsJG0gYXMgc2VsZWN0U2Vzc2lvbklkLFltIGFzIHNlbGVjdFNlc3Npb25NZXRhZGF0YSxwUyBhcyBzZWxlY3RTZXNzaW9uU3RvcmUsTlMgYXMgc2VsZWN0U2ltdWxjYXN0TGF5ZXJCeVRyYWNrLFdvIGFzIHNlbGVjdFNwZWFrZXJzLHptIGFzIHNlbGVjdFRlbXBsYXRlQXBwRGF0YSx5UyBhcyBzZWxlY3RUcmFja0F1ZGlvQnlJRCxJaSBhcyBzZWxlY3RUcmFja0J5SUQsTiBhcyBzZWxlY3RUcmFja3NNYXAsV20gYXMgc2VsZWN0VHJhbnNjcmlwdGlvbnNTdGF0ZSxObSBhcyBzZWxlY3RVbnJlYWRITVNCcm9hZGNhc3RNZXNzYWdlc0NvdW50LF9tIGFzIHNlbGVjdFVucmVhZEhNU01lc3NhZ2VzQ291bnQsSWEgYXMgc2VsZWN0VmlkZW9QbGF5bGlzdCxBUyBhcyBzZWxlY3RWaWRlb1BsYXlsaXN0QXVkaW9UcmFja0J5UGVlcklELGJTIGFzIHNlbGVjdFZpZGVvUGxheWxpc3RWaWRlb1RyYWNrQnlQZWVySUQsSGEgYXMgc2VsZWN0VmlkZW9UcmFja0J5SUQsYW4gYXMgc2VsZWN0VmlkZW9UcmFja0J5UGVlcklELGVTIGFzIHNlbGVjdFdoaXRlYm9hcmQsem8gYXMgc2VsZWN0V2hpdGVib2FyZHMsV2UgYXMgc2ltdWxjYXN0TWFwcGluZ307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@100mslive/hms-video-store/dist/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/packages/react-sdk/node_modules/zustand/esm/shallow.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@100mslive/react-sdk/dist/packages/react-sdk/node_modules/zustand/esm/shallow.js ***!
  \*******************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ t; }\n/* harmony export */ });\nfunction t(t,e){if(Object.is(t,e))return!0;if(\"object\"!=typeof t||null===t||\"object\"!=typeof e||null===e)return!1;const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(e,r[n])||!Object.is(t[r[n]],e[r[n]]))return!1;return!0}\n//# sourceMappingURL=shallow.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL3JlYWN0LXNkay9kaXN0L3BhY2thZ2VzL3JlYWN0LXNkay9ub2RlX21vZHVsZXMvenVzdGFuZC9lc20vc2hhbGxvdy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsZ0JBQWdCLDJCQUEyQix1RUFBdUUsdUJBQXVCLDZDQUE2QyxZQUFZLFdBQVcsMkZBQTJGLFNBQThCO0FBQ3RVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL3JlYWN0LXNkay9kaXN0L3BhY2thZ2VzL3JlYWN0LXNkay9ub2RlX21vZHVsZXMvenVzdGFuZC9lc20vc2hhbGxvdy5qcz9lMGYyIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHQodCxlKXtpZihPYmplY3QuaXModCxlKSlyZXR1cm4hMDtpZihcIm9iamVjdFwiIT10eXBlb2YgdHx8bnVsbD09PXR8fFwib2JqZWN0XCIhPXR5cGVvZiBlfHxudWxsPT09ZSlyZXR1cm4hMTtjb25zdCByPU9iamVjdC5rZXlzKHQpO2lmKHIubGVuZ3RoIT09T2JqZWN0LmtleXMoZSkubGVuZ3RoKXJldHVybiExO2ZvcihsZXQgbj0wO248ci5sZW5ndGg7bisrKWlmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxyW25dKXx8IU9iamVjdC5pcyh0W3Jbbl1dLGVbcltuXV0pKXJldHVybiExO3JldHVybiEwfWV4cG9ydHt0IGFzIGRlZmF1bHR9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhbGxvdy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/packages/react-sdk/node_modules/zustand/esm/shallow.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/primitives/HmsRoomProvider.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@100mslive/react-sdk/dist/primitives/HmsRoomProvider.js ***!
  \******************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HMSRoomProvider: function() { return /* binding */ l; },\n/* harmony export */   useHMSActions: function() { return /* binding */ v; },\n/* harmony export */   useHMSNotifications: function() { return /* binding */ E; },\n/* harmony export */   useHMSStatsStore: function() { return /* binding */ S; },\n/* harmony export */   useHMSStore: function() { return /* binding */ m; },\n/* harmony export */   useHMSVanillaNotifications: function() { return /* binding */ g; },\n/* harmony export */   useHMSVanillaStore: function() { return /* binding */ b; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zustand */ \"(app-pages-browser)/./node_modules/@100mslive/react-sdk/node_modules/zustand/esm/index.js\");\n/* harmony import */ var _100mslive_hms_video_store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @100mslive/hms-video-store */ \"(app-pages-browser)/./node_modules/@100mslive/hms-video-store/dist/index.js\");\n/* harmony import */ var _store_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./store.js */ \"(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/primitives/store.js\");\n/* harmony import */ var _utils_isBrowser_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/isBrowser.js */ \"(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/utils/isBrowser.js\");\nconst d=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(null),l=({children:e,actions:s,store:n,notifications:c,stats:f,isHMSStatsOn:u=!1,leaveOnUnload:l=!0})=>{const m=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>{let e;const o=()=>{throw new Error(\"modifying store is not allowed\")};if(s&&n)e={actions:s,store:(0,zustand__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(Object.assign(Object.assign({},n),{setState:o,destroy:o}))},c&&(e.notifications=c),f&&(e.statsStore=(0,zustand__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({getState:f.getState,subscribe:f.subscribe,setState:o,destroy:o}));else{const t=new _100mslive_hms_video_store__WEBPACK_IMPORTED_MODULE_2__.HMSReactiveStore;if(e={actions:t.getActions(),store:(0,zustand__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(Object.assign(Object.assign({},t.getStore()),{setState:o,destroy:o})),notifications:t.getNotifications()},u){const r=t.getStats();e.statsStore=(0,zustand__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({getState:r.getState,subscribe:r.subscribe,setState:o,destroy:o})}}return e.actions.setFrameworkInfo({type:\"react-web\",version:(react__WEBPACK_IMPORTED_MODULE_0___default().version),sdkVersion:\"0.10.36\"}),e}),[s,n,c,f,u]);return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(_utils_isBrowser_js__WEBPACK_IMPORTED_MODULE_3__.isBrowser&&l){const t=()=>m.actions.leave();return window.addEventListener(\"unload\",t),()=>{window.removeEventListener(\"unload\",t)}}return()=>{}}),[l,m]),react__WEBPACK_IMPORTED_MODULE_0___default().createElement(d.Provider,{value:m},e)},m=(0,_store_js__WEBPACK_IMPORTED_MODULE_4__.makeHMSStoreHook)(d),S=(0,_store_js__WEBPACK_IMPORTED_MODULE_4__.makeHMSStatsStoreHook)(d),b=()=>{const t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(d);if(!t)throw new Error(_store_js__WEBPACK_IMPORTED_MODULE_4__.hooksErrorMessage);return t.store},g=()=>{const t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(d);if(!t)throw new Error(_store_js__WEBPACK_IMPORTED_MODULE_4__.hooksErrorMessage);return t.notifications},v=()=>{const t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(d);if(!t)throw new Error(_store_js__WEBPACK_IMPORTED_MODULE_4__.hooksErrorMessage);return t.actions},E=t=>{const e=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(d),[o,i]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);if(!e)throw new Error(_store_js__WEBPACK_IMPORTED_MODULE_4__.hooksErrorMessage);return (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(!e.notifications)return;return e.notifications.onNotification((t=>{i(t)}),t)}),[e.notifications,t]),o};\n//# sourceMappingURL=HmsRoomProvider.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL3JlYWN0LXNkay9kaXN0L3ByaW1pdGl2ZXMvSG1zUm9vbVByb3ZpZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMFUsUUFBUSxvREFBQyxXQUFXLDBGQUEwRixJQUFJLFFBQVEsOENBQUMsT0FBTyxNQUFNLGFBQWEsbURBQW1ELFdBQVcsZ0JBQWdCLG1EQUFDLCtCQUErQixLQUFLLHFCQUFxQixHQUFHLHlDQUF5QyxtREFBQyxFQUFFLCtEQUErRCxHQUFHLEtBQUssWUFBWSx3RUFBQyxDQUFDLE1BQU0sNkJBQTZCLG1EQUFDLCtCQUErQixnQkFBZ0IscUJBQXFCLHNDQUFzQyxJQUFJLHFCQUFxQixhQUFhLG1EQUFDLEVBQUUsK0RBQStELEdBQUcsbUNBQW1DLHlCQUF5QixzREFBUyxzQkFBc0IsSUFBSSxlQUFlLE9BQU8sZ0RBQUMsT0FBTyxHQUFHLDBEQUFDLEtBQUssOEJBQThCLGdEQUFnRCx3Q0FBd0MsYUFBYSxTQUFTLDBEQUFlLGFBQWEsUUFBUSxJQUFJLEdBQUcsMkRBQUMsTUFBTSxnRUFBQyxXQUFXLFFBQVEsaURBQUMsSUFBSSxzQkFBc0Isd0RBQUMsRUFBRSxlQUFlLFFBQVEsUUFBUSxpREFBQyxJQUFJLHNCQUFzQix3REFBQyxFQUFFLHVCQUF1QixRQUFRLFFBQVEsaURBQUMsSUFBSSxzQkFBc0Isd0RBQUMsRUFBRSxpQkFBaUIsT0FBTyxRQUFRLGlEQUFDLFVBQVUsK0NBQUMsT0FBTyxzQkFBc0Isd0RBQUMsRUFBRSxPQUFPLGdEQUFDLE9BQU8sMkJBQTJCLDJDQUEyQyxLQUFLLEtBQUssMEJBQWtNO0FBQ3owRCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQDEwMG1zbGl2ZS9yZWFjdC1zZGsvZGlzdC9wcmltaXRpdmVzL0htc1Jvb21Qcm92aWRlci5qcz8xMGI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0LHtjcmVhdGVDb250ZXh0IGFzIGUsdXNlTWVtbyBhcyBvLHVzZUVmZmVjdCBhcyByLHVzZUNvbnRleHQgYXMgcyx1c2VTdGF0ZSBhcyBufWZyb21cInJlYWN0XCI7aW1wb3J0IGkgZnJvbVwienVzdGFuZFwiO2ltcG9ydHtITVNSZWFjdGl2ZVN0b3JlIGFzIGF9ZnJvbVwiQDEwMG1zbGl2ZS9obXMtdmlkZW8tc3RvcmVcIjtpbXBvcnR7bWFrZUhNU1N0b3JlSG9vayBhcyBjLG1ha2VITVNTdGF0c1N0b3JlSG9vayBhcyBmLGhvb2tzRXJyb3JNZXNzYWdlIGFzIHV9ZnJvbVwiLi9zdG9yZS5qc1wiO2ltcG9ydHtpc0Jyb3dzZXIgYXMgd31mcm9tXCIuLi91dGlscy9pc0Jyb3dzZXIuanNcIjtjb25zdCBkPWUobnVsbCksbD0oe2NoaWxkcmVuOmUsYWN0aW9uczpzLHN0b3JlOm4sbm90aWZpY2F0aW9uczpjLHN0YXRzOmYsaXNITVNTdGF0c09uOnU9ITEsbGVhdmVPblVubG9hZDpsPSEwfSk9Pntjb25zdCBtPW8oKCgpPT57bGV0IGU7Y29uc3Qgbz0oKT0+e3Rocm93IG5ldyBFcnJvcihcIm1vZGlmeWluZyBzdG9yZSBpcyBub3QgYWxsb3dlZFwiKX07aWYocyYmbillPXthY3Rpb25zOnMsc3RvcmU6aShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbikse3NldFN0YXRlOm8sZGVzdHJveTpvfSkpfSxjJiYoZS5ub3RpZmljYXRpb25zPWMpLGYmJihlLnN0YXRzU3RvcmU9aSh7Z2V0U3RhdGU6Zi5nZXRTdGF0ZSxzdWJzY3JpYmU6Zi5zdWJzY3JpYmUsc2V0U3RhdGU6byxkZXN0cm95Om99KSk7ZWxzZXtjb25zdCB0PW5ldyBhO2lmKGU9e2FjdGlvbnM6dC5nZXRBY3Rpb25zKCksc3RvcmU6aShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdC5nZXRTdG9yZSgpKSx7c2V0U3RhdGU6byxkZXN0cm95Om99KSksbm90aWZpY2F0aW9uczp0LmdldE5vdGlmaWNhdGlvbnMoKX0sdSl7Y29uc3Qgcj10LmdldFN0YXRzKCk7ZS5zdGF0c1N0b3JlPWkoe2dldFN0YXRlOnIuZ2V0U3RhdGUsc3Vic2NyaWJlOnIuc3Vic2NyaWJlLHNldFN0YXRlOm8sZGVzdHJveTpvfSl9fXJldHVybiBlLmFjdGlvbnMuc2V0RnJhbWV3b3JrSW5mbyh7dHlwZTpcInJlYWN0LXdlYlwiLHZlcnNpb246dC52ZXJzaW9uLHNka1ZlcnNpb246XCIwLjEwLjM2XCJ9KSxlfSksW3MsbixjLGYsdV0pO3JldHVybiByKCgoKT0+e2lmKHcmJmwpe2NvbnN0IHQ9KCk9Pm0uYWN0aW9ucy5sZWF2ZSgpO3JldHVybiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInVubG9hZFwiLHQpLCgpPT57d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIix0KX19cmV0dXJuKCk9Pnt9fSksW2wsbV0pLHQuY3JlYXRlRWxlbWVudChkLlByb3ZpZGVyLHt2YWx1ZTptfSxlKX0sbT1jKGQpLFM9ZihkKSxiPSgpPT57Y29uc3QgdD1zKGQpO2lmKCF0KXRocm93IG5ldyBFcnJvcih1KTtyZXR1cm4gdC5zdG9yZX0sZz0oKT0+e2NvbnN0IHQ9cyhkKTtpZighdCl0aHJvdyBuZXcgRXJyb3IodSk7cmV0dXJuIHQubm90aWZpY2F0aW9uc30sdj0oKT0+e2NvbnN0IHQ9cyhkKTtpZighdCl0aHJvdyBuZXcgRXJyb3IodSk7cmV0dXJuIHQuYWN0aW9uc30sRT10PT57Y29uc3QgZT1zKGQpLFtvLGldPW4obnVsbCk7aWYoIWUpdGhyb3cgbmV3IEVycm9yKHUpO3JldHVybiByKCgoKT0+e2lmKCFlLm5vdGlmaWNhdGlvbnMpcmV0dXJuO3JldHVybiBlLm5vdGlmaWNhdGlvbnMub25Ob3RpZmljYXRpb24oKHQ9PntpKHQpfSksdCl9KSxbZS5ub3RpZmljYXRpb25zLHRdKSxvfTtleHBvcnR7bCBhcyBITVNSb29tUHJvdmlkZXIsdiBhcyB1c2VITVNBY3Rpb25zLEUgYXMgdXNlSE1TTm90aWZpY2F0aW9ucyxTIGFzIHVzZUhNU1N0YXRzU3RvcmUsbSBhcyB1c2VITVNTdG9yZSxnIGFzIHVzZUhNU1ZhbmlsbGFOb3RpZmljYXRpb25zLGIgYXMgdXNlSE1TVmFuaWxsYVN0b3JlfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUhtc1Jvb21Qcm92aWRlci5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/primitives/HmsRoomProvider.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/primitives/store.js":
/*!********************************************************************!*\
  !*** ./node_modules/@100mslive/react-sdk/dist/primitives/store.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hooksErrorMessage: function() { return /* binding */ r; },\n/* harmony export */   makeHMSStatsStoreHook: function() { return /* binding */ a; },\n/* harmony export */   makeHMSStoreHook: function() { return /* binding */ s; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _packages_react_sdk_node_modules_zustand_esm_shallow_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../packages/react-sdk/node_modules/zustand/esm/shallow.js */ \"(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/packages/react-sdk/node_modules/zustand/esm/shallow.js\");\n/* harmony import */ var _utils_logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/logger.js */ \"(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/utils/logger.js\");\nconst r=\"It seems like you forgot to add your component within a top level HMSRoomProvider, please refer to 100ms react docs(https://www.100ms.live/docs/javascript/v2/how-to-guides/install-the-sdk/integration#react-hooks) to check on the required steps for using this hook. If the provider is present\\n  at the top level, check the yarn.lock/package-lock.json, if there are multiple versions of @100mslive/react-sdk. Please ensure the versions of @100mslive/react-sdk and @100mslive/roomkit-react are the same versions from the release notes(https://www.100ms.live/docs/javascript/v2/changelog/release-notes) that you are trying to update to.\";function s(s){return(a,n=_packages_react_sdk_node_modules_zustand_esm_shallow_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])=>{a||_utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].w(\"fetching full store without passing any selector may have a heavy performance impact on your website.\");const i=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(s);if(!i)throw new Error(r);return(0,i.store)(a,n)}}function a(s){return(a,n=_packages_react_sdk_node_modules_zustand_esm_shallow_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])=>{a||_utils_logger_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].w(\"fetching full store without passing any selector may have a heavy performance impact on your website.\");const i=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(s);if(!i)throw new Error(r);const c=i.statsStore;return null==c?void 0:c(a,n)}}\n//# sourceMappingURL=store.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL3JlYWN0LXNkay9kaXN0L3ByaW1pdGl2ZXMvc3RvcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE4SSxvb0JBQW9vQixjQUFjLFdBQVcsK0ZBQUMsSUFBSSxHQUFHLHdEQUFDLDRHQUE0RyxRQUFRLGlEQUFDLElBQUkseUJBQXlCLHdCQUF3QixjQUFjLFdBQVcsK0ZBQUMsSUFBSSxHQUFHLHdEQUFDLDRHQUE0RyxRQUFRLGlEQUFDLElBQUkseUJBQXlCLHFCQUFxQiw4QkFBOEc7QUFDcnhDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL3JlYWN0LXNkay9kaXN0L3ByaW1pdGl2ZXMvc3RvcmUuanM/YmJjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnR7dXNlQ29udGV4dCBhcyBlfWZyb21cInJlYWN0XCI7aW1wb3J0IHQgZnJvbVwiLi4vcGFja2FnZXMvcmVhY3Qtc2RrL25vZGVfbW9kdWxlcy96dXN0YW5kL2VzbS9zaGFsbG93LmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vdXRpbHMvbG9nZ2VyLmpzXCI7Y29uc3Qgcj1cIkl0IHNlZW1zIGxpa2UgeW91IGZvcmdvdCB0byBhZGQgeW91ciBjb21wb25lbnQgd2l0aGluIGEgdG9wIGxldmVsIEhNU1Jvb21Qcm92aWRlciwgcGxlYXNlIHJlZmVyIHRvIDEwMG1zIHJlYWN0IGRvY3MoaHR0cHM6Ly93d3cuMTAwbXMubGl2ZS9kb2NzL2phdmFzY3JpcHQvdjIvaG93LXRvLWd1aWRlcy9pbnN0YWxsLXRoZS1zZGsvaW50ZWdyYXRpb24jcmVhY3QtaG9va3MpIHRvIGNoZWNrIG9uIHRoZSByZXF1aXJlZCBzdGVwcyBmb3IgdXNpbmcgdGhpcyBob29rLiBJZiB0aGUgcHJvdmlkZXIgaXMgcHJlc2VudFxcbiAgYXQgdGhlIHRvcCBsZXZlbCwgY2hlY2sgdGhlIHlhcm4ubG9jay9wYWNrYWdlLWxvY2suanNvbiwgaWYgdGhlcmUgYXJlIG11bHRpcGxlIHZlcnNpb25zIG9mIEAxMDBtc2xpdmUvcmVhY3Qtc2RrLiBQbGVhc2UgZW5zdXJlIHRoZSB2ZXJzaW9ucyBvZiBAMTAwbXNsaXZlL3JlYWN0LXNkayBhbmQgQDEwMG1zbGl2ZS9yb29ta2l0LXJlYWN0IGFyZSB0aGUgc2FtZSB2ZXJzaW9ucyBmcm9tIHRoZSByZWxlYXNlIG5vdGVzKGh0dHBzOi8vd3d3LjEwMG1zLmxpdmUvZG9jcy9qYXZhc2NyaXB0L3YyL2NoYW5nZWxvZy9yZWxlYXNlLW5vdGVzKSB0aGF0IHlvdSBhcmUgdHJ5aW5nIHRvIHVwZGF0ZSB0by5cIjtmdW5jdGlvbiBzKHMpe3JldHVybihhLG49dCk9PnthfHxvLncoXCJmZXRjaGluZyBmdWxsIHN0b3JlIHdpdGhvdXQgcGFzc2luZyBhbnkgc2VsZWN0b3IgbWF5IGhhdmUgYSBoZWF2eSBwZXJmb3JtYW5jZSBpbXBhY3Qgb24geW91ciB3ZWJzaXRlLlwiKTtjb25zdCBpPWUocyk7aWYoIWkpdGhyb3cgbmV3IEVycm9yKHIpO3JldHVybigwLGkuc3RvcmUpKGEsbil9fWZ1bmN0aW9uIGEocyl7cmV0dXJuKGEsbj10KT0+e2F8fG8udyhcImZldGNoaW5nIGZ1bGwgc3RvcmUgd2l0aG91dCBwYXNzaW5nIGFueSBzZWxlY3RvciBtYXkgaGF2ZSBhIGhlYXZ5IHBlcmZvcm1hbmNlIGltcGFjdCBvbiB5b3VyIHdlYnNpdGUuXCIpO2NvbnN0IGk9ZShzKTtpZighaSl0aHJvdyBuZXcgRXJyb3Iocik7Y29uc3QgYz1pLnN0YXRzU3RvcmU7cmV0dXJuIG51bGw9PWM/dm9pZCAwOmMoYSxuKX19ZXhwb3J0e3IgYXMgaG9va3NFcnJvck1lc3NhZ2UsYSBhcyBtYWtlSE1TU3RhdHNTdG9yZUhvb2sscyBhcyBtYWtlSE1TU3RvcmVIb29rfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0b3JlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/primitives/store.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/utils/isBrowser.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@100mslive/react-sdk/dist/utils/isBrowser.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isBrowser: function() { return /* binding */ e; }\n/* harmony export */ });\nconst e=\"undefined\"!=typeof window;\n//# sourceMappingURL=isBrowser.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL3JlYWN0LXNkay9kaXN0L3V0aWxzL2lzQnJvd3Nlci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsbUNBQTBEO0FBQzFEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL3JlYWN0LXNkay9kaXN0L3V0aWxzL2lzQnJvd3Nlci5qcz9iNzA0Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdztleHBvcnR7ZSBhcyBpc0Jyb3dzZXJ9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNCcm93c2VyLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/utils/isBrowser.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/utils/logger.js":
/*!****************************************************************!*\
  !*** ./node_modules/@100mslive/react-sdk/dist/utils/logger.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HMSLogLevel: function() { return /* binding */ s; },\n/* harmony export */   \"default\": function() { return /* binding */ t; }\n/* harmony export */ });\nvar s,e;(e=s||(s={}))[e.VERBOSE=0]=\"VERBOSE\",e[e.DEBUG=1]=\"DEBUG\",e[e.INFO=2]=\"INFO\",e[e.WARN=3]=\"WARN\",e[e.ERROR=4]=\"ERROR\",e[e.NONE=5]=\"NONE\";class o{static v(e,...o){this.log(s.VERBOSE,e,...o)}static d(e,...o){this.log(s.DEBUG,e,...o)}static i(e,...o){this.log(s.INFO,e,...o)}static w(e,...o){this.log(s.WARN,e,...o)}static e(e,...o){this.log(s.ERROR,e,...o)}static log(e,o,...t){if(!(this.level.valueOf()>e.valueOf()))switch(e){case s.VERBOSE:console.log(\"HMSui-components: \",o,...t);break;case s.DEBUG:console.debug(\"HMSui-components: \",o,...t);break;case s.INFO:console.info(\"HMSui-components: \",o,...t);break;case s.WARN:console.warn(\"HMSui-components: \",o,...t);break;case s.ERROR:console.error(\"HMSui-components: \",o,...t)}}}o.level=s.VERBOSE;var t=o;\n//# sourceMappingURL=logger.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL3JlYWN0LXNkay9kaXN0L3V0aWxzL2xvZ2dlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLFFBQVEsV0FBVyw2SEFBNkgsUUFBUSxpQkFBaUIsMkJBQTJCLGlCQUFpQix5QkFBeUIsaUJBQWlCLHdCQUF3QixpQkFBaUIsd0JBQXdCLGlCQUFpQix5QkFBeUIscUJBQXFCLGlEQUFpRCx3REFBd0QsTUFBTSx3REFBd0QsTUFBTSxzREFBc0QsTUFBTSxzREFBc0QsTUFBTSwwREFBMEQsa0JBQWtCLFFBQThDO0FBQzl4QiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQDEwMG1zbGl2ZS9yZWFjdC1zZGsvZGlzdC91dGlscy9sb2dnZXIuanM/NTM2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcyxlOyhlPXN8fChzPXt9KSlbZS5WRVJCT1NFPTBdPVwiVkVSQk9TRVwiLGVbZS5ERUJVRz0xXT1cIkRFQlVHXCIsZVtlLklORk89Ml09XCJJTkZPXCIsZVtlLldBUk49M109XCJXQVJOXCIsZVtlLkVSUk9SPTRdPVwiRVJST1JcIixlW2UuTk9ORT01XT1cIk5PTkVcIjtjbGFzcyBve3N0YXRpYyB2KGUsLi4ubyl7dGhpcy5sb2cocy5WRVJCT1NFLGUsLi4ubyl9c3RhdGljIGQoZSwuLi5vKXt0aGlzLmxvZyhzLkRFQlVHLGUsLi4ubyl9c3RhdGljIGkoZSwuLi5vKXt0aGlzLmxvZyhzLklORk8sZSwuLi5vKX1zdGF0aWMgdyhlLC4uLm8pe3RoaXMubG9nKHMuV0FSTixlLC4uLm8pfXN0YXRpYyBlKGUsLi4ubyl7dGhpcy5sb2cocy5FUlJPUixlLC4uLm8pfXN0YXRpYyBsb2coZSxvLC4uLnQpe2lmKCEodGhpcy5sZXZlbC52YWx1ZU9mKCk+ZS52YWx1ZU9mKCkpKXN3aXRjaChlKXtjYXNlIHMuVkVSQk9TRTpjb25zb2xlLmxvZyhcIkhNU3VpLWNvbXBvbmVudHM6IFwiLG8sLi4udCk7YnJlYWs7Y2FzZSBzLkRFQlVHOmNvbnNvbGUuZGVidWcoXCJITVN1aS1jb21wb25lbnRzOiBcIixvLC4uLnQpO2JyZWFrO2Nhc2Ugcy5JTkZPOmNvbnNvbGUuaW5mbyhcIkhNU3VpLWNvbXBvbmVudHM6IFwiLG8sLi4udCk7YnJlYWs7Y2FzZSBzLldBUk46Y29uc29sZS53YXJuKFwiSE1TdWktY29tcG9uZW50czogXCIsbywuLi50KTticmVhaztjYXNlIHMuRVJST1I6Y29uc29sZS5lcnJvcihcIkhNU3VpLWNvbXBvbmVudHM6IFwiLG8sLi4udCl9fX1vLmxldmVsPXMuVkVSQk9TRTt2YXIgdD1vO2V4cG9ydHtzIGFzIEhNU0xvZ0xldmVsLHQgYXMgZGVmYXVsdH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sb2dnZXIuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/utils/logger.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@100mslive/react-sdk/node_modules/zustand/esm/index.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@100mslive/react-sdk/node_modules/zustand/esm/index.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ create; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\nfunction createStore(createState) {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (nextState !== state) {\n      const previousState = state;\n      state = replace ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const subscribeWithSelector = (listener, selector = getState, equalityFn = Object.is) => {\n    console.warn(\"[DEPRECATED] Please use `subscribeWithSelector` middleware\");\n    let currentSlice = selector(state);\n    function listenerToAdd() {\n      const nextSlice = selector(state);\n      if (!equalityFn(currentSlice, nextSlice)) {\n        const previousSlice = currentSlice;\n        listener(currentSlice = nextSlice, previousSlice);\n      }\n    }\n    listeners.add(listenerToAdd);\n    return () => listeners.delete(listenerToAdd);\n  };\n  const subscribe = (listener, selector, equalityFn) => {\n    if (selector || equalityFn) {\n      return subscribeWithSelector(listener, selector, equalityFn);\n    }\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => listeners.clear();\n  const api = { setState, getState, subscribe, destroy };\n  state = createState(setState, getState, api);\n  return api;\n}\n\nconst isSSR = typeof window === \"undefined\" || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\nconst useIsomorphicLayoutEffect = isSSR ? react__WEBPACK_IMPORTED_MODULE_0__.useEffect : react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect;\nfunction create(createState) {\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useStore = (selector = api.getState, equalityFn = Object.is) => {\n    const [, forceUpdate] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)((c) => c + 1, 0);\n    const state = api.getState();\n    const stateRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(state);\n    const selectorRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(selector);\n    const equalityFnRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(equalityFn);\n    const erroredRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const currentSliceRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();\n    if (currentSliceRef.current === void 0) {\n      currentSliceRef.current = selector(state);\n    }\n    let newStateSlice;\n    let hasNewStateSlice = false;\n    if (stateRef.current !== state || selectorRef.current !== selector || equalityFnRef.current !== equalityFn || erroredRef.current) {\n      newStateSlice = selector(state);\n      hasNewStateSlice = !equalityFn(currentSliceRef.current, newStateSlice);\n    }\n    useIsomorphicLayoutEffect(() => {\n      if (hasNewStateSlice) {\n        currentSliceRef.current = newStateSlice;\n      }\n      stateRef.current = state;\n      selectorRef.current = selector;\n      equalityFnRef.current = equalityFn;\n      erroredRef.current = false;\n    });\n    const stateBeforeSubscriptionRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(state);\n    useIsomorphicLayoutEffect(() => {\n      const listener = () => {\n        try {\n          const nextState = api.getState();\n          const nextStateSlice = selectorRef.current(nextState);\n          if (!equalityFnRef.current(currentSliceRef.current, nextStateSlice)) {\n            stateRef.current = nextState;\n            currentSliceRef.current = nextStateSlice;\n            forceUpdate();\n          }\n        } catch (error) {\n          erroredRef.current = true;\n          forceUpdate();\n        }\n      };\n      const unsubscribe = api.subscribe(listener);\n      if (api.getState() !== stateBeforeSubscriptionRef.current) {\n        listener();\n      }\n      return unsubscribe;\n    }, []);\n    const sliceToReturn = hasNewStateSlice ? newStateSlice : currentSliceRef.current;\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useDebugValue)(sliceToReturn);\n    return sliceToReturn;\n  };\n  Object.assign(useStore, api);\n  useStore[Symbol.iterator] = function() {\n    console.warn(\"[useStore, api] = create() is deprecated and will be removed in v4\");\n    const items = [useStore, api];\n    return {\n      next() {\n        const done = items.length <= 0;\n        return { value: items.shift(), done };\n      }\n    };\n  };\n  return useStore;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL3JlYWN0LXNkay9ub2RlX21vZHVsZXMvenVzdGFuZC9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNGOztBQUV0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQ0FBMEMsNENBQVMsR0FBRyxrREFBZTtBQUNyRTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaURBQVU7QUFDdEM7QUFDQSxxQkFBcUIsNkNBQU07QUFDM0Isd0JBQXdCLDZDQUFNO0FBQzlCLDBCQUEwQiw2Q0FBTTtBQUNoQyx1QkFBdUIsNkNBQU07QUFDN0IsNEJBQTRCLDZDQUFNO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUNBQXVDLDZDQUFNO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUksb0RBQWE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AMTAwbXNsaXZlL3JlYWN0LXNkay9ub2RlX21vZHVsZXMvenVzdGFuZC9lc20vaW5kZXguanM/NTRlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VSZWR1Y2VyLCB1c2VSZWYsIHVzZURlYnVnVmFsdWUsIHVzZUVmZmVjdCwgdXNlTGF5b3V0RWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuXG5mdW5jdGlvbiBjcmVhdGVTdG9yZShjcmVhdGVTdGF0ZSkge1xuICBsZXQgc3RhdGU7XG4gIGNvbnN0IGxpc3RlbmVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gIGNvbnN0IHNldFN0YXRlID0gKHBhcnRpYWwsIHJlcGxhY2UpID0+IHtcbiAgICBjb25zdCBuZXh0U3RhdGUgPSB0eXBlb2YgcGFydGlhbCA9PT0gXCJmdW5jdGlvblwiID8gcGFydGlhbChzdGF0ZSkgOiBwYXJ0aWFsO1xuICAgIGlmIChuZXh0U3RhdGUgIT09IHN0YXRlKSB7XG4gICAgICBjb25zdCBwcmV2aW91c1N0YXRlID0gc3RhdGU7XG4gICAgICBzdGF0ZSA9IHJlcGxhY2UgPyBuZXh0U3RhdGUgOiBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZSwgbmV4dFN0YXRlKTtcbiAgICAgIGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoc3RhdGUsIHByZXZpb3VzU3RhdGUpKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGdldFN0YXRlID0gKCkgPT4gc3RhdGU7XG4gIGNvbnN0IHN1YnNjcmliZVdpdGhTZWxlY3RvciA9IChsaXN0ZW5lciwgc2VsZWN0b3IgPSBnZXRTdGF0ZSwgZXF1YWxpdHlGbiA9IE9iamVjdC5pcykgPT4ge1xuICAgIGNvbnNvbGUud2FybihcIltERVBSRUNBVEVEXSBQbGVhc2UgdXNlIGBzdWJzY3JpYmVXaXRoU2VsZWN0b3JgIG1pZGRsZXdhcmVcIik7XG4gICAgbGV0IGN1cnJlbnRTbGljZSA9IHNlbGVjdG9yKHN0YXRlKTtcbiAgICBmdW5jdGlvbiBsaXN0ZW5lclRvQWRkKCkge1xuICAgICAgY29uc3QgbmV4dFNsaWNlID0gc2VsZWN0b3Ioc3RhdGUpO1xuICAgICAgaWYgKCFlcXVhbGl0eUZuKGN1cnJlbnRTbGljZSwgbmV4dFNsaWNlKSkge1xuICAgICAgICBjb25zdCBwcmV2aW91c1NsaWNlID0gY3VycmVudFNsaWNlO1xuICAgICAgICBsaXN0ZW5lcihjdXJyZW50U2xpY2UgPSBuZXh0U2xpY2UsIHByZXZpb3VzU2xpY2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyVG9BZGQpO1xuICAgIHJldHVybiAoKSA9PiBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyVG9BZGQpO1xuICB9O1xuICBjb25zdCBzdWJzY3JpYmUgPSAobGlzdGVuZXIsIHNlbGVjdG9yLCBlcXVhbGl0eUZuKSA9PiB7XG4gICAgaWYgKHNlbGVjdG9yIHx8IGVxdWFsaXR5Rm4pIHtcbiAgICAgIHJldHVybiBzdWJzY3JpYmVXaXRoU2VsZWN0b3IobGlzdGVuZXIsIHNlbGVjdG9yLCBlcXVhbGl0eUZuKTtcbiAgICB9XG4gICAgbGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICB9O1xuICBjb25zdCBkZXN0cm95ID0gKCkgPT4gbGlzdGVuZXJzLmNsZWFyKCk7XG4gIGNvbnN0IGFwaSA9IHsgc2V0U3RhdGUsIGdldFN0YXRlLCBzdWJzY3JpYmUsIGRlc3Ryb3kgfTtcbiAgc3RhdGUgPSBjcmVhdGVTdGF0ZShzZXRTdGF0ZSwgZ2V0U3RhdGUsIGFwaSk7XG4gIHJldHVybiBhcGk7XG59XG5cbmNvbnN0IGlzU1NSID0gdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhd2luZG93Lm5hdmlnYXRvciB8fCAvU2VydmVyU2lkZVJlbmRlcmluZ3xeRGVub1xcLy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5jb25zdCB1c2VJc29tb3JwaGljTGF5b3V0RWZmZWN0ID0gaXNTU1IgPyB1c2VFZmZlY3QgOiB1c2VMYXlvdXRFZmZlY3Q7XG5mdW5jdGlvbiBjcmVhdGUoY3JlYXRlU3RhdGUpIHtcbiAgY29uc3QgYXBpID0gdHlwZW9mIGNyZWF0ZVN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyBjcmVhdGVTdG9yZShjcmVhdGVTdGF0ZSkgOiBjcmVhdGVTdGF0ZTtcbiAgY29uc3QgdXNlU3RvcmUgPSAoc2VsZWN0b3IgPSBhcGkuZ2V0U3RhdGUsIGVxdWFsaXR5Rm4gPSBPYmplY3QuaXMpID0+IHtcbiAgICBjb25zdCBbLCBmb3JjZVVwZGF0ZV0gPSB1c2VSZWR1Y2VyKChjKSA9PiBjICsgMSwgMCk7XG4gICAgY29uc3Qgc3RhdGUgPSBhcGkuZ2V0U3RhdGUoKTtcbiAgICBjb25zdCBzdGF0ZVJlZiA9IHVzZVJlZihzdGF0ZSk7XG4gICAgY29uc3Qgc2VsZWN0b3JSZWYgPSB1c2VSZWYoc2VsZWN0b3IpO1xuICAgIGNvbnN0IGVxdWFsaXR5Rm5SZWYgPSB1c2VSZWYoZXF1YWxpdHlGbik7XG4gICAgY29uc3QgZXJyb3JlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG4gICAgY29uc3QgY3VycmVudFNsaWNlUmVmID0gdXNlUmVmKCk7XG4gICAgaWYgKGN1cnJlbnRTbGljZVJlZi5jdXJyZW50ID09PSB2b2lkIDApIHtcbiAgICAgIGN1cnJlbnRTbGljZVJlZi5jdXJyZW50ID0gc2VsZWN0b3Ioc3RhdGUpO1xuICAgIH1cbiAgICBsZXQgbmV3U3RhdGVTbGljZTtcbiAgICBsZXQgaGFzTmV3U3RhdGVTbGljZSA9IGZhbHNlO1xuICAgIGlmIChzdGF0ZVJlZi5jdXJyZW50ICE9PSBzdGF0ZSB8fCBzZWxlY3RvclJlZi5jdXJyZW50ICE9PSBzZWxlY3RvciB8fCBlcXVhbGl0eUZuUmVmLmN1cnJlbnQgIT09IGVxdWFsaXR5Rm4gfHwgZXJyb3JlZFJlZi5jdXJyZW50KSB7XG4gICAgICBuZXdTdGF0ZVNsaWNlID0gc2VsZWN0b3Ioc3RhdGUpO1xuICAgICAgaGFzTmV3U3RhdGVTbGljZSA9ICFlcXVhbGl0eUZuKGN1cnJlbnRTbGljZVJlZi5jdXJyZW50LCBuZXdTdGF0ZVNsaWNlKTtcbiAgICB9XG4gICAgdXNlSXNvbW9ycGhpY0xheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICBpZiAoaGFzTmV3U3RhdGVTbGljZSkge1xuICAgICAgICBjdXJyZW50U2xpY2VSZWYuY3VycmVudCA9IG5ld1N0YXRlU2xpY2U7XG4gICAgICB9XG4gICAgICBzdGF0ZVJlZi5jdXJyZW50ID0gc3RhdGU7XG4gICAgICBzZWxlY3RvclJlZi5jdXJyZW50ID0gc2VsZWN0b3I7XG4gICAgICBlcXVhbGl0eUZuUmVmLmN1cnJlbnQgPSBlcXVhbGl0eUZuO1xuICAgICAgZXJyb3JlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgfSk7XG4gICAgY29uc3Qgc3RhdGVCZWZvcmVTdWJzY3JpcHRpb25SZWYgPSB1c2VSZWYoc3RhdGUpO1xuICAgIHVzZUlzb21vcnBoaWNMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgbmV4dFN0YXRlID0gYXBpLmdldFN0YXRlKCk7XG4gICAgICAgICAgY29uc3QgbmV4dFN0YXRlU2xpY2UgPSBzZWxlY3RvclJlZi5jdXJyZW50KG5leHRTdGF0ZSk7XG4gICAgICAgICAgaWYgKCFlcXVhbGl0eUZuUmVmLmN1cnJlbnQoY3VycmVudFNsaWNlUmVmLmN1cnJlbnQsIG5leHRTdGF0ZVNsaWNlKSkge1xuICAgICAgICAgICAgc3RhdGVSZWYuY3VycmVudCA9IG5leHRTdGF0ZTtcbiAgICAgICAgICAgIGN1cnJlbnRTbGljZVJlZi5jdXJyZW50ID0gbmV4dFN0YXRlU2xpY2U7XG4gICAgICAgICAgICBmb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBlcnJvcmVkUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgIGZvcmNlVXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdCB1bnN1YnNjcmliZSA9IGFwaS5zdWJzY3JpYmUobGlzdGVuZXIpO1xuICAgICAgaWYgKGFwaS5nZXRTdGF0ZSgpICE9PSBzdGF0ZUJlZm9yZVN1YnNjcmlwdGlvblJlZi5jdXJyZW50KSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5zdWJzY3JpYmU7XG4gICAgfSwgW10pO1xuICAgIGNvbnN0IHNsaWNlVG9SZXR1cm4gPSBoYXNOZXdTdGF0ZVNsaWNlID8gbmV3U3RhdGVTbGljZSA6IGN1cnJlbnRTbGljZVJlZi5jdXJyZW50O1xuICAgIHVzZURlYnVnVmFsdWUoc2xpY2VUb1JldHVybik7XG4gICAgcmV0dXJuIHNsaWNlVG9SZXR1cm47XG4gIH07XG4gIE9iamVjdC5hc3NpZ24odXNlU3RvcmUsIGFwaSk7XG4gIHVzZVN0b3JlW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHtcbiAgICBjb25zb2xlLndhcm4oXCJbdXNlU3RvcmUsIGFwaV0gPSBjcmVhdGUoKSBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdjRcIik7XG4gICAgY29uc3QgaXRlbXMgPSBbdXNlU3RvcmUsIGFwaV07XG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IGRvbmUgPSBpdGVtcy5sZW5ndGggPD0gMDtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGl0ZW1zLnNoaWZ0KCksIGRvbmUgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuICByZXR1cm4gdXNlU3RvcmU7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZSBhcyBkZWZhdWx0IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@100mslive/react-sdk/node_modules/zustand/esm/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/eventemitter2/lib/eventemitter2.js":
/*!*********************************************************!*\
  !*** ./node_modules/eventemitter2/lib/eventemitter2.js ***!
  \*********************************************************/
/***/ (function(module, exports, __webpack_require__) {

eval(__webpack_require__.ts("/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\nvar __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n  var hasOwnProperty= Object.hasOwnProperty;\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n  var nextTickSupported= typeof process=='object' && typeof process.nextTick=='function';\n  var symbolsSupported= typeof Symbol==='function';\n  var reflectSupported= typeof Reflect === 'object';\n  var setImmediateSupported= typeof setImmediate === 'function';\n  var _setImmediate= setImmediateSupported ? setImmediate : setTimeout;\n  var ownKeys= symbolsSupported? (reflectSupported && typeof Reflect.ownKeys==='function'? Reflect.ownKeys : function(obj){\n    var arr= Object.getOwnPropertyNames(obj);\n    arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n    return arr;\n  }) : Object.keys;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n\n      if(conf.maxListeners!==undefined){\n          this._maxListeners= conf.maxListeners;\n      }\n\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this._newListener = conf.newListener);\n      conf.removeListener && (this._removeListener = conf.removeListener);\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n      conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    }\n  }\n\n  function logPossibleMemoryLeak(count, eventName) {\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n        'leak detected. ' + count + ' listeners added. ' +\n        'Use emitter.setMaxListeners() to increase limit.';\n\n    if(this.verboseMemoryLeak){\n      errorMsg += ' Event name: ' + eventName + '.';\n    }\n\n    if(typeof process !== 'undefined' && process.emitWarning){\n      var e = new Error(errorMsg);\n      e.name = 'MaxListenersExceededWarning';\n      e.emitter = this;\n      e.count = count;\n      process.emitWarning(e);\n    } else {\n      console.error(errorMsg);\n\n      if (console.trace){\n        console.trace();\n      }\n    }\n  }\n\n  var toArray = function (a, b, c) {\n    var n = arguments.length;\n    switch (n) {\n      case 0:\n        return [];\n      case 1:\n        return [a];\n      case 2:\n        return [a, b];\n      case 3:\n        return [a, b, c];\n      default:\n        var arr = new Array(n);\n        while (n--) {\n          arr[n] = arguments[n];\n        }\n        return arr;\n    }\n  };\n\n  function toObject(keys, values) {\n    var obj = {};\n    var key;\n    var len = keys.length;\n    var valuesCount = values ? values.length : 0;\n    for (var i = 0; i < len; i++) {\n      key = keys[i];\n      obj[key] = i < valuesCount ? values[i] : undefined;\n    }\n    return obj;\n  }\n\n  function TargetObserver(emitter, target, options) {\n    this._emitter = emitter;\n    this._target = target;\n    this._listeners = {};\n    this._listenersCount = 0;\n\n    var on, off;\n\n    if (options.on || options.off) {\n      on = options.on;\n      off = options.off;\n    }\n\n    if (target.addEventListener) {\n      on = target.addEventListener;\n      off = target.removeEventListener;\n    } else if (target.addListener) {\n      on = target.addListener;\n      off = target.removeListener;\n    } else if (target.on) {\n      on = target.on;\n      off = target.off;\n    }\n\n    if (!on && !off) {\n      throw Error('target does not implement any known event API');\n    }\n\n    if (typeof on !== 'function') {\n      throw TypeError('on method must be a function');\n    }\n\n    if (typeof off !== 'function') {\n      throw TypeError('off method must be a function');\n    }\n\n    this._on = on;\n    this._off = off;\n\n    var _observers= emitter._observers;\n    if(_observers){\n      _observers.push(this);\n    }else{\n      emitter._observers= [this];\n    }\n  }\n\n  Object.assign(TargetObserver.prototype, {\n    subscribe: function(event, localEvent, reducer){\n      var observer= this;\n      var target= this._target;\n      var emitter= this._emitter;\n      var listeners= this._listeners;\n      var handler= function(){\n        var args= toArray.apply(null, arguments);\n        var eventObj= {\n          data: args,\n          name: localEvent,\n          original: event\n        };\n        if(reducer){\n          var result= reducer.call(target, eventObj);\n          if(result!==false){\n            emitter.emit.apply(emitter, [eventObj.name].concat(args))\n          }\n          return;\n        }\n        emitter.emit.apply(emitter, [localEvent].concat(args));\n      };\n\n\n      if(listeners[event]){\n        throw Error('Event \\'' + event + '\\' is already listening');\n      }\n\n      this._listenersCount++;\n\n      if(emitter._newListener && emitter._removeListener && !observer._onNewListener){\n\n        this._onNewListener = function (_event) {\n          if (_event === localEvent && listeners[event] === null) {\n            listeners[event] = handler;\n            observer._on.call(target, event, handler);\n          }\n        };\n\n        emitter.on('newListener', this._onNewListener);\n\n        this._onRemoveListener= function(_event){\n          if(_event === localEvent && !emitter.hasListeners(_event) && listeners[event]){\n            listeners[event]= null;\n            observer._off.call(target, event, handler);\n          }\n        };\n\n        listeners[event]= null;\n\n        emitter.on('removeListener', this._onRemoveListener);\n      }else{\n        listeners[event]= handler;\n        observer._on.call(target, event, handler);\n      }\n    },\n\n    unsubscribe: function(event){\n      var observer= this;\n      var listeners= this._listeners;\n      var emitter= this._emitter;\n      var handler;\n      var events;\n      var off= this._off;\n      var target= this._target;\n      var i;\n\n      if(event && typeof event!=='string'){\n        throw TypeError('event must be a string');\n      }\n\n      function clearRefs(){\n        if(observer._onNewListener){\n          emitter.off('newListener', observer._onNewListener);\n          emitter.off('removeListener', observer._onRemoveListener);\n          observer._onNewListener= null;\n          observer._onRemoveListener= null;\n        }\n        var index= findTargetIndex.call(emitter, observer);\n        emitter._observers.splice(index, 1);\n      }\n\n      if(event){\n        handler= listeners[event];\n        if(!handler) return;\n        off.call(target, event, handler);\n        delete listeners[event];\n        if(!--this._listenersCount){\n          clearRefs();\n        }\n      }else{\n        events= ownKeys(listeners);\n        i= events.length;\n        while(i-->0){\n          event= events[i];\n          off.call(target, event, listeners[event]);\n        }\n        this._listeners= {};\n        this._listenersCount= 0;\n        clearRefs();\n      }\n    }\n  });\n\n  function resolveOptions(options, schema, reducers, allowUnknown) {\n    var computedOptions = Object.assign({}, schema);\n\n    if (!options) return computedOptions;\n\n    if (typeof options !== 'object') {\n      throw TypeError('options must be an object')\n    }\n\n    var keys = Object.keys(options);\n    var length = keys.length;\n    var option, value;\n    var reducer;\n\n    function reject(reason) {\n      throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''))\n    }\n\n    for (var i = 0; i < length; i++) {\n      option = keys[i];\n      if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n        throw Error('Unknown \"' + option + '\" option');\n      }\n      value = options[option];\n      if (value !== undefined) {\n        reducer = reducers[option];\n        computedOptions[option] = reducer ? reducer(value, reject) : value;\n      }\n    }\n    return computedOptions;\n  }\n\n  function constructorReducer(value, reject) {\n    if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n      reject('value must be a constructor');\n    }\n    return value;\n  }\n\n  function makeTypeReducer(types) {\n    var message= 'value must be type of ' + types.join('|');\n    var len= types.length;\n    var firstType= types[0];\n    var secondType= types[1];\n\n    if (len === 1) {\n      return function (v, reject) {\n        if (typeof v === firstType) {\n          return v;\n        }\n        reject(message);\n      }\n    }\n\n    if (len === 2) {\n      return function (v, reject) {\n        var kind= typeof v;\n        if (kind === firstType || kind === secondType) return v;\n        reject(message);\n      }\n    }\n\n    return function (v, reject) {\n      var kind = typeof v;\n      var i = len;\n      while (i-- > 0) {\n        if (kind === types[i]) return v;\n      }\n      reject(message);\n    }\n  }\n\n  var functionReducer= makeTypeReducer(['function']);\n\n  var objectFunctionReducer= makeTypeReducer(['object', 'function']);\n\n  function makeCancelablePromise(Promise, executor, options) {\n    var isCancelable;\n    var callbacks;\n    var timer= 0;\n    var subscriptionClosed;\n\n    var promise = new Promise(function (resolve, reject, onCancel) {\n      options= resolveOptions(options, {\n        timeout: 0,\n        overload: false\n      }, {\n        timeout: function(value, reject){\n          value*= 1;\n          if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n            reject('timeout must be a positive number');\n          }\n          return value;\n        }\n      });\n\n      isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n\n      function cleanup() {\n        if (callbacks) {\n          callbacks = null;\n        }\n        if (timer) {\n          clearTimeout(timer);\n          timer = 0;\n        }\n      }\n\n      var _resolve= function(value){\n        cleanup();\n        resolve(value);\n      };\n\n      var _reject= function(err){\n        cleanup();\n        reject(err);\n      };\n\n      if (isCancelable) {\n        executor(_resolve, _reject, onCancel);\n      } else {\n        callbacks = [function(reason){\n          _reject(reason || Error('canceled'));\n        }];\n        executor(_resolve, _reject, function (cb) {\n          if (subscriptionClosed) {\n            throw Error('Unable to subscribe on cancel event asynchronously')\n          }\n          if (typeof cb !== 'function') {\n            throw TypeError('onCancel callback must be a function');\n          }\n          callbacks.push(cb);\n        });\n        subscriptionClosed= true;\n      }\n\n      if (options.timeout > 0) {\n        timer= setTimeout(function(){\n          var reason= Error('timeout');\n          reason.code = 'ETIMEDOUT'\n          timer= 0;\n          promise.cancel(reason);\n          reject(reason);\n        }, options.timeout);\n      }\n    });\n\n    if (!isCancelable) {\n      promise.cancel = function (reason) {\n        if (!callbacks) {\n          return;\n        }\n        var length = callbacks.length;\n        for (var i = 1; i < length; i++) {\n          callbacks[i](reason);\n        }\n        // internal callback to reject the promise\n        callbacks[0](reason);\n        callbacks = null;\n      };\n    }\n\n    return promise;\n  }\n\n  function findTargetIndex(observer) {\n    var observers = this._observers;\n    if(!observers){\n      return -1;\n    }\n    var len = observers.length;\n    for (var i = 0; i < len; i++) {\n      if (observers[i]._target === observer) return i;\n    }\n    return -1;\n  }\n\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i, typeLength) {\n    if (!tree) {\n      return null;\n    }\n\n    if (i === 0) {\n      var kind = typeof type;\n      if (kind === 'string') {\n        var ns, n, l = 0, j = 0, delimiter = this.delimiter, dl = delimiter.length;\n        if ((n = type.indexOf(delimiter)) !== -1) {\n          ns = new Array(5);\n          do {\n            ns[l++] = type.slice(j, n);\n            j = n + dl;\n          } while ((n = type.indexOf(delimiter, j)) !== -1);\n\n          ns[l++] = type.slice(j);\n          type = ns;\n          typeLength = l;\n        } else {\n          type = [type];\n          typeLength = 1;\n        }\n      } else if (kind === 'object') {\n        typeLength = type.length;\n      } else {\n        type = [type];\n        typeLength = 1;\n      }\n    }\n\n    var listeners= null, branch, xTree, xxTree, isolatedBranch, endReached, currentType = type[i],\n        nextType = type[i + 1], branches, _listeners;\n\n    if (i === typeLength) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n\n      if(tree._listeners) {\n        if (typeof tree._listeners === 'function') {\n          handlers && handlers.push(tree._listeners);\n          listeners = [tree];\n        } else {\n          handlers && handlers.push.apply(handlers, tree._listeners);\n          listeners = [tree];\n        }\n      }\n    } else {\n\n      if (currentType === '*') {\n        //\n        // If the event emitted is '*' at this part\n        // or there is a concrete match at this patch\n        //\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (currentType === '**') {\n        endReached = (i + 1 === typeLength || (i + 2 === typeLength && nextType === '*'));\n        if (endReached && tree._listeners) {\n          // The next element has a _listeners, add it to the handlers.\n          listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n        }\n\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            if (branch === '*' || branch === '**') {\n              if (tree[branch]._listeners && !endReached) {\n                _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n                if (_listeners) {\n                  if (listeners) {\n                    listeners.push.apply(listeners, _listeners);\n                  } else {\n                    listeners = _listeners;\n                  }\n                }\n              }\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            } else if (branch === nextType) {\n              _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n            } else {\n              // No match on this one, shift into the tree but not in the type array.\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            }\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (tree[currentType]) {\n        listeners = searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n      }\n    }\n\n      xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n    }\n\n    xxTree = tree['**'];\n    if (xxTree) {\n      if (i < typeLength) {\n        if (xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        branches= ownKeys(xxTree);\n        n= branches.length;\n        while(n-->0){\n          branch= branches[n];\n          if (branch !== '_listeners') {\n            if (branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n            } else if (branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, {'**': isolatedBranch}, i + 1, typeLength);\n            }\n          }\n        }\n      } else if (xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n      } else if (xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener, prepend) {\n    var len = 0, j = 0, i, delimiter = this.delimiter, dl= delimiter.length, ns;\n\n    if(typeof type==='string') {\n      if ((i = type.indexOf(delimiter)) !== -1) {\n        ns = new Array(5);\n        do {\n          ns[len++] = type.slice(j, i);\n          j = i + dl;\n        } while ((i = type.indexOf(delimiter, j)) !== -1);\n\n        ns[len++] = type.slice(j);\n      }else{\n        ns= [type];\n        len= 1;\n      }\n    }else{\n      ns= type;\n      len= type.length;\n    }\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    if (len > 1) {\n      for (i = 0; i + 1 < len; i++) {\n        if (ns[i] === '**' && ns[i + 1] === '**') {\n          return;\n        }\n      }\n    }\n\n\n\n    var tree = this.listenerTree, name;\n\n    for (i = 0; i < len; i++) {\n      name = ns[i];\n\n      tree = tree[name] || (tree[name] = {});\n\n      if (i === len - 1) {\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        } else {\n          if (typeof tree._listeners === 'function') {\n            tree._listeners = [tree._listeners];\n          }\n\n          if (prepend) {\n            tree._listeners.unshift(listener);\n          } else {\n            tree._listeners.push(listener);\n          }\n\n          if (\n              !tree._listeners.warned &&\n              this._maxListeners > 0 &&\n              tree._listeners.length > this._maxListeners\n          ) {\n            tree._listeners.warned = true;\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n          }\n        }\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function collectTreeEvents(tree, events, root, asArray){\n     var branches= ownKeys(tree);\n     var i= branches.length;\n     var branch, branchName, path;\n     var hasListeners= tree['_listeners'];\n     var isArrayPath;\n\n     while(i-->0){\n         branchName= branches[i];\n\n         branch= tree[branchName];\n\n         if(branchName==='_listeners'){\n             path= root;\n         }else {\n             path = root ? root.concat(branchName) : [branchName];\n         }\n\n         isArrayPath= asArray || typeof branchName==='symbol';\n\n         hasListeners && events.push(isArrayPath? path : path.join(this.delimiter));\n\n         if(typeof branch==='object'){\n             collectTreeEvents.call(this, branch, events, path, isArrayPath);\n         }\n     }\n\n     return events;\n  }\n\n  function recursivelyGarbageCollect(root) {\n    var keys = ownKeys(root);\n    var i= keys.length;\n    var obj, key, flag;\n    while(i-->0){\n      key = keys[i];\n      obj = root[key];\n\n      if(obj){\n          flag= true;\n          if(key !== '_listeners' && !recursivelyGarbageCollect(obj)){\n             delete root[key];\n          }\n      }\n    }\n\n    return flag;\n  }\n\n  function Listener(emitter, event, listener){\n    this.emitter= emitter;\n    this.event= event;\n    this.listener= listener;\n  }\n\n  Listener.prototype.off= function(){\n    this.emitter.off(this.event, this.listener);\n    return this;\n  };\n\n  function setupListener(event, listener, options){\n      if (options === true) {\n        promisify = true;\n      } else if (options === false) {\n        async = true;\n      } else {\n        if (!options || typeof options !== 'object') {\n          throw TypeError('options should be an object or true');\n        }\n        var async = options.async;\n        var promisify = options.promisify;\n        var nextTick = options.nextTick;\n        var objectify = options.objectify;\n      }\n\n      if (async || nextTick || promisify) {\n        var _listener = listener;\n        var _origin = listener._origin || listener;\n\n        if (nextTick && !nextTickSupported) {\n          throw Error('process.nextTick is not supported');\n        }\n\n        if (promisify === undefined) {\n          promisify = listener.constructor.name === 'AsyncFunction';\n        }\n\n        listener = function () {\n          var args = arguments;\n          var context = this;\n          var event = this.event;\n\n          return promisify ? (nextTick ? Promise.resolve() : new Promise(function (resolve) {\n            _setImmediate(resolve);\n          }).then(function () {\n            context.event = event;\n            return _listener.apply(context, args)\n          })) : (nextTick ? process.nextTick : _setImmediate)(function () {\n            context.event = event;\n            _listener.apply(context, args)\n          });\n        };\n\n        listener._async = true;\n        listener._origin = _origin;\n      }\n\n    return [listener, objectify? new Listener(this, event, listener): this];\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this._newListener = false;\n    this._removeListener = false;\n    this.verboseMemoryLeak = false;\n    configure.call(this, conf);\n  }\n\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n  EventEmitter.prototype.listenTo= function(target, events, options){\n    if(typeof target!=='object'){\n      throw TypeError('target musts be an object');\n    }\n\n    var emitter= this;\n\n    options = resolveOptions(options, {\n      on: undefined,\n      off: undefined,\n      reducers: undefined\n    }, {\n      on: functionReducer,\n      off: functionReducer,\n      reducers: objectFunctionReducer\n    });\n\n    function listen(events){\n      if(typeof events!=='object'){\n        throw TypeError('events must be an object');\n      }\n\n      var reducers= options.reducers;\n      var index= findTargetIndex.call(emitter, target);\n      var observer;\n\n      if(index===-1){\n        observer= new TargetObserver(emitter, target, options);\n      }else{\n        observer= emitter._observers[index];\n      }\n\n      var keys= ownKeys(events);\n      var len= keys.length;\n      var event;\n      var isSingleReducer= typeof reducers==='function';\n\n      for(var i=0; i<len; i++){\n        event= keys[i];\n        observer.subscribe(\n            event,\n            events[event] || event,\n            isSingleReducer ? reducers : reducers && reducers[event]\n        );\n      }\n    }\n\n    isArray(events)?\n        listen(toObject(events)) :\n        (typeof events==='string'? listen(toObject(events.split(/\\s+/))): listen(events));\n\n    return this;\n  };\n\n  EventEmitter.prototype.stopListeningTo = function (target, event) {\n    var observers = this._observers;\n\n    if(!observers){\n      return false;\n    }\n\n    var i = observers.length;\n    var observer;\n    var matched= false;\n\n    if(target && typeof target!=='object'){\n      throw TypeError('target should be an object');\n    }\n\n    while (i-- > 0) {\n      observer = observers[i];\n      if (!target || observer._target === target) {\n        observer.unsubscribe(event);\n        matched= true;\n      }\n    }\n\n    return matched;\n  };\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (n !== undefined) {\n      this._maxListeners = n;\n      if (!this._conf) this._conf = {};\n      this._conf.maxListeners = n;\n    }\n  };\n\n  EventEmitter.prototype.getMaxListeners = function() {\n    return this._maxListeners;\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn, options) {\n    return this._once(event, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependOnceListener = function(event, fn, options) {\n    return this._once(event, fn, true, options);\n  };\n\n  EventEmitter.prototype._once = function(event, fn, prepend, options) {\n    return this._many(event, 1, fn, prepend, options);\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependMany = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, true, options);\n  };\n\n  EventEmitter.prototype._many = function(event, ttl, fn, prepend, options) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      return fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    return this._on(event, listener, prepend, options);\n  };\n\n  EventEmitter.prototype.emit = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], ns, wildcard= this.wildcard;\n    var args,l,i,j, containsSymbol;\n\n    if (type === 'newListener' && !this._newListener) {\n      if (!this._events.newListener) {\n        return false;\n      }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all && this._all.length) {\n      handler = this._all.slice();\n\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this, type);\n          break;\n        case 2:\n          handler[i].call(this, type, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, type, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, arguments);\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n    } else {\n      handler = this._events[type];\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n          handler.apply(this, args);\n        }\n        return true;\n      } else if (handler) {\n        // need to make copy of handlers because list can change in the middle\n        // of emit call\n        handler = handler.slice();\n      }\n    }\n\n    if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this);\n          break;\n        case 2:\n          handler[i].call(this, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n      return true;\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled 'error' event\n      } else {\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return !!this._all;\n  };\n\n  EventEmitter.prototype.emitAsync = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], wildcard= this.wildcard, ns, containsSymbol;\n    var args,l,i,j;\n\n    if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) { return Promise.resolve([false]); }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var promises= [];\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all) {\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(this._all[i].call(this, type));\n          break;\n        case 2:\n          promises.push(this._all[i].call(this, type, arguments[1]));\n          break;\n        case 3:\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(this._all[i].apply(this, arguments));\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      switch (al) {\n      case 1:\n        promises.push(handler.call(this));\n        break;\n      case 2:\n        promises.push(handler.call(this, arguments[1]));\n        break;\n      case 3:\n        promises.push(handler.call(this, arguments[1], arguments[2]));\n        break;\n      default:\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n        promises.push(handler.apply(this, args));\n      }\n    } else if (handler && handler.length) {\n      handler = handler.slice();\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(handler[i].call(this));\n          break;\n        case 2:\n          promises.push(handler[i].call(this, arguments[1]));\n          break;\n        case 3:\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(handler[i].apply(this, args));\n        }\n      }\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\n      } else {\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return Promise.all(promises);\n  };\n\n  EventEmitter.prototype.on = function(type, listener, options) {\n    return this._on(type, listener, false, options);\n  };\n\n  EventEmitter.prototype.prependListener = function(type, listener, options) {\n    return this._on(type, listener, true, options);\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n    return this._onAny(fn, false);\n  };\n\n  EventEmitter.prototype.prependAny = function(fn) {\n    return this._onAny(fn, true);\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype._onAny = function(fn, prepend){\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if (!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    if(prepend){\n      this._all.unshift(fn);\n    }else{\n      this._all.push(fn);\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype._on = function(type, listener, prepend, options) {\n    if (typeof type === 'function') {\n      this._onAny(type, listener);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    var returnValue= this, temp;\n\n    if (options !== undefined) {\n      temp = setupListener.call(this, type, listener, options);\n      listener = temp[0];\n      returnValue = temp[1];\n    }\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    if (this._newListener) {\n      this.emit('newListener', type, listener);\n    }\n\n    if (this.wildcard) {\n      growListenerTree.call(this, type, listener, prepend);\n      return returnValue;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    } else {\n      if (typeof this._events[type] === 'function') {\n        // Change to array.\n        this._events[type] = [this._events[type]];\n      }\n\n      // If we've already got an array, just add\n      if(prepend){\n        this._events[type].unshift(listener);\n      }else{\n        this._events[type].push(listener);\n      }\n\n      // Check for listener leak\n      if (\n        !this._events[type].warned &&\n        this._maxListeners > 0 &&\n        this._events[type].length > this._maxListeners\n      ) {\n        this._events[type].warned = true;\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n      }\n    }\n\n    return returnValue;\n  };\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n      if(!leafs) return this;\n    } else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n      }\n    }\n\n    this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          if (this._removeListener)\n            this.emit(\"removeListenerAny\", fn);\n          return this;\n        }\n      }\n    } else {\n      fns = this._all;\n      if (this._removeListener) {\n        for(i = 0, l = fns.length; i < l; i++)\n          this.emit(\"removeListenerAny\", fns[i]);\n      }\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function (type) {\n    if (type === undefined) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if (this.wildcard) {\n      var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0), leaf, i;\n      if (!leafs) return this;\n      for (i = 0; i < leafs.length; i++) {\n        leaf = leafs[i];\n        leaf._listeners = null;\n      }\n      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n    } else if (this._events) {\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function (type) {\n    var _events = this._events;\n    var keys, listeners, allListeners;\n    var i;\n    var listenerTree;\n\n    if (type === undefined) {\n      if (this.wildcard) {\n        throw Error('event name required for wildcard emitter');\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      keys = ownKeys(_events);\n      i = keys.length;\n      allListeners = [];\n      while (i-- > 0) {\n        listeners = _events[keys[i]];\n        if (typeof listeners === 'function') {\n          allListeners.push(listeners);\n        } else {\n          allListeners.push.apply(allListeners, listeners);\n        }\n      }\n      return allListeners;\n    } else {\n      if (this.wildcard) {\n        listenerTree= this.listenerTree;\n        if(!listenerTree) return [];\n        var handlers = [];\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n        return handlers;\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      listeners = _events[type];\n\n      if (!listeners) {\n        return [];\n      }\n      return typeof listeners === 'function' ? [listeners] : listeners;\n    }\n  };\n\n  EventEmitter.prototype.eventNames = function(nsAsArray){\n    var _events= this._events;\n    return this.wildcard? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : (_events? ownKeys(_events) : []);\n  };\n\n  EventEmitter.prototype.listenerCount = function(type) {\n    return this.listeners(type).length;\n  };\n\n  EventEmitter.prototype.hasListeners = function (type) {\n    if (this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers.length > 0;\n    }\n\n    var _events = this._events;\n    var _all = this._all;\n\n    return !!(_all && _all.length || _events && (type === undefined ? ownKeys(_events).length : _events[type]));\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  EventEmitter.prototype.waitFor = function (event, options) {\n    var self = this;\n    var type = typeof options;\n    if (type === 'number') {\n      options = {timeout: options};\n    } else if (type === 'function') {\n      options = {filter: options};\n    }\n\n    options= resolveOptions(options, {\n      timeout: 0,\n      filter: undefined,\n      handleError: false,\n      Promise: Promise,\n      overload: false\n    }, {\n      filter: functionReducer,\n      Promise: constructorReducer\n    });\n\n    return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n      function listener() {\n        var filter= options.filter;\n        if (filter && !filter.apply(self, arguments)) {\n          return;\n        }\n        self.off(event, listener);\n        if (options.handleError) {\n          var err = arguments[0];\n          err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n        } else {\n          resolve(toArray.apply(null, arguments));\n        }\n      }\n\n      onCancel(function(){\n        self.off(event, listener);\n      });\n\n      self._on(event, listener, false);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    })\n  };\n\n  function once(emitter, name, options) {\n    options= resolveOptions(options, {\n      Promise: Promise,\n      timeout: 0,\n      overload: false\n    }, {\n      Promise: constructorReducer\n    });\n\n    var _Promise= options.Promise;\n\n    return makeCancelablePromise(_Promise, function(resolve, reject, onCancel){\n      var handler;\n      if (typeof emitter.addEventListener === 'function') {\n        handler=  function () {\n          resolve(toArray.apply(null, arguments));\n        };\n\n        onCancel(function(){\n          emitter.removeEventListener(name, handler);\n        });\n\n        emitter.addEventListener(\n            name,\n            handler,\n            {once: true}\n        );\n        return;\n      }\n\n      var eventListener = function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        resolve(toArray.apply(null, arguments));\n      };\n\n      var errorListener;\n\n      if (name !== 'error') {\n        errorListener = function (err){\n          emitter.removeListener(name, eventListener);\n          reject(err);\n        };\n\n        emitter.once('error', errorListener);\n      }\n\n      onCancel(function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        emitter.removeListener(name, eventListener);\n      });\n\n      emitter.once(name, eventListener);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    });\n  }\n\n  var prototype= EventEmitter.prototype;\n\n  Object.defineProperties(EventEmitter, {\n    defaultMaxListeners: {\n      get: function () {\n        return prototype._maxListeners;\n      },\n      set: function (n) {\n        if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n          throw TypeError('n must be a non-negative number')\n        }\n        prototype._maxListeners = n;\n      },\n      enumerable: true\n    },\n    once: {\n      value: once,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  Object.defineProperties(prototype, {\n      _maxListeners: {\n          value: defaultMaxListeners,\n          writable: true,\n          configurable: true\n      },\n      _observers: {value: null, writable: true, configurable: true}\n  });\n\n  if (true) {\n     // AMD. Register as an anonymous module.\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {\n      return EventEmitter;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else { var _global; }\n}();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIyL2xpYi9ldmVudGVtaXR0ZXIyLmpzIiwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLE9BQU8scUJBQXFCLE9BQU87QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLE9BQU8sb0JBQW9CLE9BQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLE9BQU87QUFDYixNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsMENBQTBDOztBQUUxQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFD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O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxzQ0FBc0MsT0FBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFFBQVE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQSxzQ0FBc0MsT0FBTztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLDRCQUE0QjtBQUM1QixRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLE1BQU07QUFDTixpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLG1CQUFtQjtBQUNuQixHQUFHOztBQUVILE1BQU0sSUFBMEM7QUFDaEQ7QUFDQSxJQUFJLG1DQUFPO0FBQ1g7QUFDQSxLQUFLO0FBQUEsa0dBQUM7QUFDTixJQUFJLEtBQUssZ0JBUU47QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9ldmVudGVtaXR0ZXIyL2xpYi9ldmVudGVtaXR0ZXIyLmpzP2ZlNWIiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBFdmVudEVtaXR0ZXIyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaGlqMW54L0V2ZW50RW1pdHRlcjJcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMgaGlqMW54XG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKi9cbjshZnVuY3Rpb24odW5kZWZpbmVkKSB7XG4gIHZhciBoYXNPd25Qcm9wZXJ0eT0gT2JqZWN0Lmhhc093blByb3BlcnR5O1xuICB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgPyBBcnJheS5pc0FycmF5IDogZnVuY3Rpb24gX2lzQXJyYXkob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSBcIltvYmplY3QgQXJyYXldXCI7XG4gIH07XG4gIHZhciBkZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG4gIHZhciBuZXh0VGlja1N1cHBvcnRlZD0gdHlwZW9mIHByb2Nlc3M9PSdvYmplY3QnICYmIHR5cGVvZiBwcm9jZXNzLm5leHRUaWNrPT0nZnVuY3Rpb24nO1xuICB2YXIgc3ltYm9sc1N1cHBvcnRlZD0gdHlwZW9mIFN5bWJvbD09PSdmdW5jdGlvbic7XG4gIHZhciByZWZsZWN0U3VwcG9ydGVkPSB0eXBlb2YgUmVmbGVjdCA9PT0gJ29iamVjdCc7XG4gIHZhciBzZXRJbW1lZGlhdGVTdXBwb3J0ZWQ9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbic7XG4gIHZhciBfc2V0SW1tZWRpYXRlPSBzZXRJbW1lZGlhdGVTdXBwb3J0ZWQgPyBzZXRJbW1lZGlhdGUgOiBzZXRUaW1lb3V0O1xuICB2YXIgb3duS2V5cz0gc3ltYm9sc1N1cHBvcnRlZD8gKHJlZmxlY3RTdXBwb3J0ZWQgJiYgdHlwZW9mIFJlZmxlY3Qub3duS2V5cz09PSdmdW5jdGlvbic/IFJlZmxlY3Qub3duS2V5cyA6IGZ1bmN0aW9uKG9iail7XG4gICAgdmFyIGFycj0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKTtcbiAgICBhcnIucHVzaC5hcHBseShhcnIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqKSk7XG4gICAgcmV0dXJuIGFycjtcbiAgfSkgOiBPYmplY3Qua2V5cztcblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIGlmICh0aGlzLl9jb25mKSB7XG4gICAgICBjb25maWd1cmUuY2FsbCh0aGlzLCB0aGlzLl9jb25mKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjb25maWd1cmUoY29uZikge1xuICAgIGlmIChjb25mKSB7XG4gICAgICB0aGlzLl9jb25mID0gY29uZjtcblxuICAgICAgY29uZi5kZWxpbWl0ZXIgJiYgKHRoaXMuZGVsaW1pdGVyID0gY29uZi5kZWxpbWl0ZXIpO1xuXG4gICAgICBpZihjb25mLm1heExpc3RlbmVycyE9PXVuZGVmaW5lZCl7XG4gICAgICAgICAgdGhpcy5fbWF4TGlzdGVuZXJzPSBjb25mLm1heExpc3RlbmVycztcbiAgICAgIH1cblxuICAgICAgY29uZi53aWxkY2FyZCAmJiAodGhpcy53aWxkY2FyZCA9IGNvbmYud2lsZGNhcmQpO1xuICAgICAgY29uZi5uZXdMaXN0ZW5lciAmJiAodGhpcy5fbmV3TGlzdGVuZXIgPSBjb25mLm5ld0xpc3RlbmVyKTtcbiAgICAgIGNvbmYucmVtb3ZlTGlzdGVuZXIgJiYgKHRoaXMuX3JlbW92ZUxpc3RlbmVyID0gY29uZi5yZW1vdmVMaXN0ZW5lcik7XG4gICAgICBjb25mLnZlcmJvc2VNZW1vcnlMZWFrICYmICh0aGlzLnZlcmJvc2VNZW1vcnlMZWFrID0gY29uZi52ZXJib3NlTWVtb3J5TGVhayk7XG4gICAgICBjb25mLmlnbm9yZUVycm9ycyAmJiAodGhpcy5pZ25vcmVFcnJvcnMgPSBjb25mLmlnbm9yZUVycm9ycyk7XG5cbiAgICAgIGlmICh0aGlzLndpbGRjYXJkKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJUcmVlID0ge307XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9nUG9zc2libGVNZW1vcnlMZWFrKGNvdW50LCBldmVudE5hbWUpIHtcbiAgICB2YXIgZXJyb3JNc2cgPSAnKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG4gICAgICAgICdsZWFrIGRldGVjdGVkLiAnICsgY291bnQgKyAnIGxpc3RlbmVycyBhZGRlZC4gJyArXG4gICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nO1xuXG4gICAgaWYodGhpcy52ZXJib3NlTWVtb3J5TGVhayl7XG4gICAgICBlcnJvck1zZyArPSAnIEV2ZW50IG5hbWU6ICcgKyBldmVudE5hbWUgKyAnLic7XG4gICAgfVxuXG4gICAgaWYodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW1pdFdhcm5pbmcpe1xuICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoZXJyb3JNc2cpO1xuICAgICAgZS5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICBlLmVtaXR0ZXIgPSB0aGlzO1xuICAgICAgZS5jb3VudCA9IGNvdW50O1xuICAgICAgcHJvY2Vzcy5lbWl0V2FybmluZyhlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvck1zZyk7XG5cbiAgICAgIGlmIChjb25zb2xlLnRyYWNlKXtcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciB0b0FycmF5ID0gZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIFthXTtcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIFthLCBiXTtcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmV0dXJuIFthLCBiLCBjXTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHZhciBhcnIgPSBuZXcgQXJyYXkobik7XG4gICAgICAgIHdoaWxlIChuLS0pIHtcbiAgICAgICAgICBhcnJbbl0gPSBhcmd1bWVudHNbbl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gdG9PYmplY3Qoa2V5cywgdmFsdWVzKSB7XG4gICAgdmFyIG9iaiA9IHt9O1xuICAgIHZhciBrZXk7XG4gICAgdmFyIGxlbiA9IGtleXMubGVuZ3RoO1xuICAgIHZhciB2YWx1ZXNDb3VudCA9IHZhbHVlcyA/IHZhbHVlcy5sZW5ndGggOiAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBvYmpba2V5XSA9IGkgPCB2YWx1ZXNDb3VudCA/IHZhbHVlc1tpXSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIGZ1bmN0aW9uIFRhcmdldE9ic2VydmVyKGVtaXR0ZXIsIHRhcmdldCwgb3B0aW9ucykge1xuICAgIHRoaXMuX2VtaXR0ZXIgPSBlbWl0dGVyO1xuICAgIHRoaXMuX3RhcmdldCA9IHRhcmdldDtcbiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbiAgICB0aGlzLl9saXN0ZW5lcnNDb3VudCA9IDA7XG5cbiAgICB2YXIgb24sIG9mZjtcblxuICAgIGlmIChvcHRpb25zLm9uIHx8IG9wdGlvbnMub2ZmKSB7XG4gICAgICBvbiA9IG9wdGlvbnMub247XG4gICAgICBvZmYgPSBvcHRpb25zLm9mZjtcbiAgICB9XG5cbiAgICBpZiAodGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIG9uID0gdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXI7XG4gICAgICBvZmYgPSB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICB9IGVsc2UgaWYgKHRhcmdldC5hZGRMaXN0ZW5lcikge1xuICAgICAgb24gPSB0YXJnZXQuYWRkTGlzdGVuZXI7XG4gICAgICBvZmYgPSB0YXJnZXQucmVtb3ZlTGlzdGVuZXI7XG4gICAgfSBlbHNlIGlmICh0YXJnZXQub24pIHtcbiAgICAgIG9uID0gdGFyZ2V0Lm9uO1xuICAgICAgb2ZmID0gdGFyZ2V0Lm9mZjtcbiAgICB9XG5cbiAgICBpZiAoIW9uICYmICFvZmYpIHtcbiAgICAgIHRocm93IEVycm9yKCd0YXJnZXQgZG9lcyBub3QgaW1wbGVtZW50IGFueSBrbm93biBldmVudCBBUEknKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9uICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ29uIG1ldGhvZCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIG9mZiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdvZmYgbWV0aG9kIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgIH1cblxuICAgIHRoaXMuX29uID0gb247XG4gICAgdGhpcy5fb2ZmID0gb2ZmO1xuXG4gICAgdmFyIF9vYnNlcnZlcnM9IGVtaXR0ZXIuX29ic2VydmVycztcbiAgICBpZihfb2JzZXJ2ZXJzKXtcbiAgICAgIF9vYnNlcnZlcnMucHVzaCh0aGlzKTtcbiAgICB9ZWxzZXtcbiAgICAgIGVtaXR0ZXIuX29ic2VydmVycz0gW3RoaXNdO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5hc3NpZ24oVGFyZ2V0T2JzZXJ2ZXIucHJvdG90eXBlLCB7XG4gICAgc3Vic2NyaWJlOiBmdW5jdGlvbihldmVudCwgbG9jYWxFdmVudCwgcmVkdWNlcil7XG4gICAgICB2YXIgb2JzZXJ2ZXI9IHRoaXM7XG4gICAgICB2YXIgdGFyZ2V0PSB0aGlzLl90YXJnZXQ7XG4gICAgICB2YXIgZW1pdHRlcj0gdGhpcy5fZW1pdHRlcjtcbiAgICAgIHZhciBsaXN0ZW5lcnM9IHRoaXMuX2xpc3RlbmVycztcbiAgICAgIHZhciBoYW5kbGVyPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYXJncz0gdG9BcnJheS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgZXZlbnRPYmo9IHtcbiAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICAgIG5hbWU6IGxvY2FsRXZlbnQsXG4gICAgICAgICAgb3JpZ2luYWw6IGV2ZW50XG4gICAgICAgIH07XG4gICAgICAgIGlmKHJlZHVjZXIpe1xuICAgICAgICAgIHZhciByZXN1bHQ9IHJlZHVjZXIuY2FsbCh0YXJnZXQsIGV2ZW50T2JqKTtcbiAgICAgICAgICBpZihyZXN1bHQhPT1mYWxzZSl7XG4gICAgICAgICAgICBlbWl0dGVyLmVtaXQuYXBwbHkoZW1pdHRlciwgW2V2ZW50T2JqLm5hbWVdLmNvbmNhdChhcmdzKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVtaXR0ZXIuZW1pdC5hcHBseShlbWl0dGVyLCBbbG9jYWxFdmVudF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgIH07XG5cblxuICAgICAgaWYobGlzdGVuZXJzW2V2ZW50XSl7XG4gICAgICAgIHRocm93IEVycm9yKCdFdmVudCBcXCcnICsgZXZlbnQgKyAnXFwnIGlzIGFscmVhZHkgbGlzdGVuaW5nJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2xpc3RlbmVyc0NvdW50Kys7XG5cbiAgICAgIGlmKGVtaXR0ZXIuX25ld0xpc3RlbmVyICYmIGVtaXR0ZXIuX3JlbW92ZUxpc3RlbmVyICYmICFvYnNlcnZlci5fb25OZXdMaXN0ZW5lcil7XG5cbiAgICAgICAgdGhpcy5fb25OZXdMaXN0ZW5lciA9IGZ1bmN0aW9uIChfZXZlbnQpIHtcbiAgICAgICAgICBpZiAoX2V2ZW50ID09PSBsb2NhbEV2ZW50ICYmIGxpc3RlbmVyc1tldmVudF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyc1tldmVudF0gPSBoYW5kbGVyO1xuICAgICAgICAgICAgb2JzZXJ2ZXIuX29uLmNhbGwodGFyZ2V0LCBldmVudCwgaGFuZGxlcik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGVtaXR0ZXIub24oJ25ld0xpc3RlbmVyJywgdGhpcy5fb25OZXdMaXN0ZW5lcik7XG5cbiAgICAgICAgdGhpcy5fb25SZW1vdmVMaXN0ZW5lcj0gZnVuY3Rpb24oX2V2ZW50KXtcbiAgICAgICAgICBpZihfZXZlbnQgPT09IGxvY2FsRXZlbnQgJiYgIWVtaXR0ZXIuaGFzTGlzdGVuZXJzKF9ldmVudCkgJiYgbGlzdGVuZXJzW2V2ZW50XSl7XG4gICAgICAgICAgICBsaXN0ZW5lcnNbZXZlbnRdPSBudWxsO1xuICAgICAgICAgICAgb2JzZXJ2ZXIuX29mZi5jYWxsKHRhcmdldCwgZXZlbnQsIGhhbmRsZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBsaXN0ZW5lcnNbZXZlbnRdPSBudWxsO1xuXG4gICAgICAgIGVtaXR0ZXIub24oJ3JlbW92ZUxpc3RlbmVyJywgdGhpcy5fb25SZW1vdmVMaXN0ZW5lcik7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgbGlzdGVuZXJzW2V2ZW50XT0gaGFuZGxlcjtcbiAgICAgICAgb2JzZXJ2ZXIuX29uLmNhbGwodGFyZ2V0LCBldmVudCwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbihldmVudCl7XG4gICAgICB2YXIgb2JzZXJ2ZXI9IHRoaXM7XG4gICAgICB2YXIgbGlzdGVuZXJzPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgICB2YXIgZW1pdHRlcj0gdGhpcy5fZW1pdHRlcjtcbiAgICAgIHZhciBoYW5kbGVyO1xuICAgICAgdmFyIGV2ZW50cztcbiAgICAgIHZhciBvZmY9IHRoaXMuX29mZjtcbiAgICAgIHZhciB0YXJnZXQ9IHRoaXMuX3RhcmdldDtcbiAgICAgIHZhciBpO1xuXG4gICAgICBpZihldmVudCAmJiB0eXBlb2YgZXZlbnQhPT0nc3RyaW5nJyl7XG4gICAgICAgIHRocm93IFR5cGVFcnJvcignZXZlbnQgbXVzdCBiZSBhIHN0cmluZycpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhclJlZnMoKXtcbiAgICAgICAgaWYob2JzZXJ2ZXIuX29uTmV3TGlzdGVuZXIpe1xuICAgICAgICAgIGVtaXR0ZXIub2ZmKCduZXdMaXN0ZW5lcicsIG9ic2VydmVyLl9vbk5ld0xpc3RlbmVyKTtcbiAgICAgICAgICBlbWl0dGVyLm9mZigncmVtb3ZlTGlzdGVuZXInLCBvYnNlcnZlci5fb25SZW1vdmVMaXN0ZW5lcik7XG4gICAgICAgICAgb2JzZXJ2ZXIuX29uTmV3TGlzdGVuZXI9IG51bGw7XG4gICAgICAgICAgb2JzZXJ2ZXIuX29uUmVtb3ZlTGlzdGVuZXI9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4PSBmaW5kVGFyZ2V0SW5kZXguY2FsbChlbWl0dGVyLCBvYnNlcnZlcik7XG4gICAgICAgIGVtaXR0ZXIuX29ic2VydmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuXG4gICAgICBpZihldmVudCl7XG4gICAgICAgIGhhbmRsZXI9IGxpc3RlbmVyc1tldmVudF07XG4gICAgICAgIGlmKCFoYW5kbGVyKSByZXR1cm47XG4gICAgICAgIG9mZi5jYWxsKHRhcmdldCwgZXZlbnQsIGhhbmRsZXIpO1xuICAgICAgICBkZWxldGUgbGlzdGVuZXJzW2V2ZW50XTtcbiAgICAgICAgaWYoIS0tdGhpcy5fbGlzdGVuZXJzQ291bnQpe1xuICAgICAgICAgIGNsZWFyUmVmcygpO1xuICAgICAgICB9XG4gICAgICB9ZWxzZXtcbiAgICAgICAgZXZlbnRzPSBvd25LZXlzKGxpc3RlbmVycyk7XG4gICAgICAgIGk9IGV2ZW50cy5sZW5ndGg7XG4gICAgICAgIHdoaWxlKGktLT4wKXtcbiAgICAgICAgICBldmVudD0gZXZlbnRzW2ldO1xuICAgICAgICAgIG9mZi5jYWxsKHRhcmdldCwgZXZlbnQsIGxpc3RlbmVyc1tldmVudF0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycz0ge307XG4gICAgICAgIHRoaXMuX2xpc3RlbmVyc0NvdW50PSAwO1xuICAgICAgICBjbGVhclJlZnMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHJlc29sdmVPcHRpb25zKG9wdGlvbnMsIHNjaGVtYSwgcmVkdWNlcnMsIGFsbG93VW5rbm93bikge1xuICAgIHZhciBjb21wdXRlZE9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBzY2hlbWEpO1xuXG4gICAgaWYgKCFvcHRpb25zKSByZXR1cm4gY29tcHV0ZWRPcHRpb25zO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0JylcbiAgICB9XG5cbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMpO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgb3B0aW9uLCB2YWx1ZTtcbiAgICB2YXIgcmVkdWNlcjtcblxuICAgIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgICAgIHRocm93IEVycm9yKCdJbnZhbGlkIFwiJyArIG9wdGlvbiArICdcIiBvcHRpb24gdmFsdWUnICsgKHJlYXNvbiA/ICcuIFJlYXNvbjogJyArIHJlYXNvbiA6ICcnKSlcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBvcHRpb24gPSBrZXlzW2ldO1xuICAgICAgaWYgKCFhbGxvd1Vua25vd24gJiYgIWhhc093blByb3BlcnR5LmNhbGwoc2NoZW1hLCBvcHRpb24pKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdVbmtub3duIFwiJyArIG9wdGlvbiArICdcIiBvcHRpb24nKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gb3B0aW9uc1tvcHRpb25dO1xuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVkdWNlciA9IHJlZHVjZXJzW29wdGlvbl07XG4gICAgICAgIGNvbXB1dGVkT3B0aW9uc1tvcHRpb25dID0gcmVkdWNlciA/IHJlZHVjZXIodmFsdWUsIHJlamVjdCkgOiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbXB1dGVkT3B0aW9ucztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN0cnVjdG9yUmVkdWNlcih2YWx1ZSwgcmVqZWN0KSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Z1bmN0aW9uJyB8fCAhdmFsdWUuaGFzT3duUHJvcGVydHkoJ3Byb3RvdHlwZScpKSB7XG4gICAgICByZWplY3QoJ3ZhbHVlIG11c3QgYmUgYSBjb25zdHJ1Y3RvcicpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBtYWtlVHlwZVJlZHVjZXIodHlwZXMpIHtcbiAgICB2YXIgbWVzc2FnZT0gJ3ZhbHVlIG11c3QgYmUgdHlwZSBvZiAnICsgdHlwZXMuam9pbignfCcpO1xuICAgIHZhciBsZW49IHR5cGVzLmxlbmd0aDtcbiAgICB2YXIgZmlyc3RUeXBlPSB0eXBlc1swXTtcbiAgICB2YXIgc2Vjb25kVHlwZT0gdHlwZXNbMV07XG5cbiAgICBpZiAobGVuID09PSAxKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHYsIHJlamVjdCkge1xuICAgICAgICBpZiAodHlwZW9mIHYgPT09IGZpcnN0VHlwZSkge1xuICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9XG4gICAgICAgIHJlamVjdChtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobGVuID09PSAyKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHYsIHJlamVjdCkge1xuICAgICAgICB2YXIga2luZD0gdHlwZW9mIHY7XG4gICAgICAgIGlmIChraW5kID09PSBmaXJzdFR5cGUgfHwga2luZCA9PT0gc2Vjb25kVHlwZSkgcmV0dXJuIHY7XG4gICAgICAgIHJlamVjdChtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHYsIHJlamVjdCkge1xuICAgICAgdmFyIGtpbmQgPSB0eXBlb2YgdjtcbiAgICAgIHZhciBpID0gbGVuO1xuICAgICAgd2hpbGUgKGktLSA+IDApIHtcbiAgICAgICAgaWYgKGtpbmQgPT09IHR5cGVzW2ldKSByZXR1cm4gdjtcbiAgICAgIH1cbiAgICAgIHJlamVjdChtZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgZnVuY3Rpb25SZWR1Y2VyPSBtYWtlVHlwZVJlZHVjZXIoWydmdW5jdGlvbiddKTtcblxuICB2YXIgb2JqZWN0RnVuY3Rpb25SZWR1Y2VyPSBtYWtlVHlwZVJlZHVjZXIoWydvYmplY3QnLCAnZnVuY3Rpb24nXSk7XG5cbiAgZnVuY3Rpb24gbWFrZUNhbmNlbGFibGVQcm9taXNlKFByb21pc2UsIGV4ZWN1dG9yLCBvcHRpb25zKSB7XG4gICAgdmFyIGlzQ2FuY2VsYWJsZTtcbiAgICB2YXIgY2FsbGJhY2tzO1xuICAgIHZhciB0aW1lcj0gMDtcbiAgICB2YXIgc3Vic2NyaXB0aW9uQ2xvc2VkO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBvbkNhbmNlbCkge1xuICAgICAgb3B0aW9ucz0gcmVzb2x2ZU9wdGlvbnMob3B0aW9ucywge1xuICAgICAgICB0aW1lb3V0OiAwLFxuICAgICAgICBvdmVybG9hZDogZmFsc2VcbiAgICAgIH0sIHtcbiAgICAgICAgdGltZW91dDogZnVuY3Rpb24odmFsdWUsIHJlamVjdCl7XG4gICAgICAgICAgdmFsdWUqPSAxO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInIHx8IHZhbHVlIDwgMCB8fCAhTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkge1xuICAgICAgICAgICAgcmVqZWN0KCd0aW1lb3V0IG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaXNDYW5jZWxhYmxlID0gIW9wdGlvbnMub3ZlcmxvYWQgJiYgdHlwZW9mIFByb21pc2UucHJvdG90eXBlLmNhbmNlbCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb25DYW5jZWwgPT09ICdmdW5jdGlvbic7XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgICBjYWxsYmFja3MgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgdGltZXIgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBfcmVzb2x2ZT0gZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICBjbGVhbnVwKCk7XG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgfTtcblxuICAgICAgdmFyIF9yZWplY3Q9IGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9O1xuXG4gICAgICBpZiAoaXNDYW5jZWxhYmxlKSB7XG4gICAgICAgIGV4ZWN1dG9yKF9yZXNvbHZlLCBfcmVqZWN0LCBvbkNhbmNlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFja3MgPSBbZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgICBfcmVqZWN0KHJlYXNvbiB8fCBFcnJvcignY2FuY2VsZWQnKSk7XG4gICAgICAgIH1dO1xuICAgICAgICBleGVjdXRvcihfcmVzb2x2ZSwgX3JlamVjdCwgZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbkNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ1VuYWJsZSB0byBzdWJzY3JpYmUgb24gY2FuY2VsIGV2ZW50IGFzeW5jaHJvbm91c2x5JylcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdvbkNhbmNlbCBjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FsbGJhY2tzLnB1c2goY2IpO1xuICAgICAgICB9KTtcbiAgICAgICAgc3Vic2NyaXB0aW9uQ2xvc2VkPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy50aW1lb3V0ID4gMCkge1xuICAgICAgICB0aW1lcj0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgIHZhciByZWFzb249IEVycm9yKCd0aW1lb3V0Jyk7XG4gICAgICAgICAgcmVhc29uLmNvZGUgPSAnRVRJTUVET1VUJ1xuICAgICAgICAgIHRpbWVyPSAwO1xuICAgICAgICAgIHByb21pc2UuY2FuY2VsKHJlYXNvbik7XG4gICAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICAgIH0sIG9wdGlvbnMudGltZW91dCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoIWlzQ2FuY2VsYWJsZSkge1xuICAgICAgcHJvbWlzZS5jYW5jZWwgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsZW5ndGggPSBjYWxsYmFja3MubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY2FsbGJhY2tzW2ldKHJlYXNvbik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW50ZXJuYWwgY2FsbGJhY2sgdG8gcmVqZWN0IHRoZSBwcm9taXNlXG4gICAgICAgIGNhbGxiYWNrc1swXShyZWFzb24pO1xuICAgICAgICBjYWxsYmFja3MgPSBudWxsO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmRUYXJnZXRJbmRleChvYnNlcnZlcikge1xuICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLl9vYnNlcnZlcnM7XG4gICAgaWYoIW9ic2VydmVycyl7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChvYnNlcnZlcnNbaV0uX3RhcmdldCA9PT0gb2JzZXJ2ZXIpIHJldHVybiBpO1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvLyBBdHRlbnRpb24sIGZ1bmN0aW9uIHJldHVybiB0eXBlIG5vdyBpcyBhcnJheSwgYWx3YXlzICFcbiAgLy8gSXQgaGFzIHplcm8gZWxlbWVudHMgaWYgbm8gYW55IG1hdGNoZXMgZm91bmQgYW5kIG9uZSBvciBtb3JlXG4gIC8vIGVsZW1lbnRzIChsZWFmcykgaWYgdGhlcmUgYXJlIG1hdGNoZXNcbiAgLy9cbiAgZnVuY3Rpb24gc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlLCBpLCB0eXBlTGVuZ3RoKSB7XG4gICAgaWYgKCF0cmVlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgdmFyIGtpbmQgPSB0eXBlb2YgdHlwZTtcbiAgICAgIGlmIChraW5kID09PSAnc3RyaW5nJykge1xuICAgICAgICB2YXIgbnMsIG4sIGwgPSAwLCBqID0gMCwgZGVsaW1pdGVyID0gdGhpcy5kZWxpbWl0ZXIsIGRsID0gZGVsaW1pdGVyLmxlbmd0aDtcbiAgICAgICAgaWYgKChuID0gdHlwZS5pbmRleE9mKGRlbGltaXRlcikpICE9PSAtMSkge1xuICAgICAgICAgIG5zID0gbmV3IEFycmF5KDUpO1xuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIG5zW2wrK10gPSB0eXBlLnNsaWNlKGosIG4pO1xuICAgICAgICAgICAgaiA9IG4gKyBkbDtcbiAgICAgICAgICB9IHdoaWxlICgobiA9IHR5cGUuaW5kZXhPZihkZWxpbWl0ZXIsIGopKSAhPT0gLTEpO1xuXG4gICAgICAgICAgbnNbbCsrXSA9IHR5cGUuc2xpY2Uoaik7XG4gICAgICAgICAgdHlwZSA9IG5zO1xuICAgICAgICAgIHR5cGVMZW5ndGggPSBsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHR5cGUgPSBbdHlwZV07XG4gICAgICAgICAgdHlwZUxlbmd0aCA9IDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoa2luZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgdHlwZUxlbmd0aCA9IHR5cGUubGVuZ3RoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHlwZSA9IFt0eXBlXTtcbiAgICAgICAgdHlwZUxlbmd0aCA9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxpc3RlbmVycz0gbnVsbCwgYnJhbmNoLCB4VHJlZSwgeHhUcmVlLCBpc29sYXRlZEJyYW5jaCwgZW5kUmVhY2hlZCwgY3VycmVudFR5cGUgPSB0eXBlW2ldLFxuICAgICAgICBuZXh0VHlwZSA9IHR5cGVbaSArIDFdLCBicmFuY2hlcywgX2xpc3RlbmVycztcblxuICAgIGlmIChpID09PSB0eXBlTGVuZ3RoKSB7XG4gICAgICAvL1xuICAgICAgLy8gSWYgYXQgdGhlIGVuZCBvZiB0aGUgZXZlbnQocykgbGlzdCBhbmQgdGhlIHRyZWUgaGFzIGxpc3RlbmVyc1xuICAgICAgLy8gaW52b2tlIHRob3NlIGxpc3RlbmVycy5cbiAgICAgIC8vXG5cbiAgICAgIGlmKHRyZWUuX2xpc3RlbmVycykge1xuICAgICAgICBpZiAodHlwZW9mIHRyZWUuX2xpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGhhbmRsZXJzICYmIGhhbmRsZXJzLnB1c2godHJlZS5fbGlzdGVuZXJzKTtcbiAgICAgICAgICBsaXN0ZW5lcnMgPSBbdHJlZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaGFuZGxlcnMgJiYgaGFuZGxlcnMucHVzaC5hcHBseShoYW5kbGVycywgdHJlZS5fbGlzdGVuZXJzKTtcbiAgICAgICAgICBsaXN0ZW5lcnMgPSBbdHJlZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuXG4gICAgICBpZiAoY3VycmVudFR5cGUgPT09ICcqJykge1xuICAgICAgICAvL1xuICAgICAgICAvLyBJZiB0aGUgZXZlbnQgZW1pdHRlZCBpcyAnKicgYXQgdGhpcyBwYXJ0XG4gICAgICAgIC8vIG9yIHRoZXJlIGlzIGEgY29uY3JldGUgbWF0Y2ggYXQgdGhpcyBwYXRjaFxuICAgICAgICAvL1xuICAgICAgICBicmFuY2hlcyA9IG93bktleXModHJlZSk7XG4gICAgICAgIG4gPSBicmFuY2hlcy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChuLS0gPiAwKSB7XG4gICAgICAgICAgYnJhbmNoID0gYnJhbmNoZXNbbl07XG4gICAgICAgICAgaWYgKGJyYW5jaCAhPT0gJ19saXN0ZW5lcnMnKSB7XG4gICAgICAgICAgICBfbGlzdGVuZXJzID0gc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlW2JyYW5jaF0sIGkgKyAxLCB0eXBlTGVuZ3RoKTtcbiAgICAgICAgICAgIGlmIChfbGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMucHVzaC5hcHBseShsaXN0ZW5lcnMsIF9saXN0ZW5lcnMpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVycyA9IF9saXN0ZW5lcnM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3RlbmVycztcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudFR5cGUgPT09ICcqKicpIHtcbiAgICAgICAgZW5kUmVhY2hlZCA9IChpICsgMSA9PT0gdHlwZUxlbmd0aCB8fCAoaSArIDIgPT09IHR5cGVMZW5ndGggJiYgbmV4dFR5cGUgPT09ICcqJykpO1xuICAgICAgICBpZiAoZW5kUmVhY2hlZCAmJiB0cmVlLl9saXN0ZW5lcnMpIHtcbiAgICAgICAgICAvLyBUaGUgbmV4dCBlbGVtZW50IGhhcyBhIF9saXN0ZW5lcnMsIGFkZCBpdCB0byB0aGUgaGFuZGxlcnMuXG4gICAgICAgICAgbGlzdGVuZXJzID0gc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlLCB0eXBlTGVuZ3RoLCB0eXBlTGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyYW5jaGVzID0gb3duS2V5cyh0cmVlKTtcbiAgICAgICAgbiA9IGJyYW5jaGVzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKG4tLSA+IDApIHtcbiAgICAgICAgICBicmFuY2ggPSBicmFuY2hlc1tuXTtcbiAgICAgICAgICBpZiAoYnJhbmNoICE9PSAnX2xpc3RlbmVycycpIHtcbiAgICAgICAgICAgIGlmIChicmFuY2ggPT09ICcqJyB8fCBicmFuY2ggPT09ICcqKicpIHtcbiAgICAgICAgICAgICAgaWYgKHRyZWVbYnJhbmNoXS5fbGlzdGVuZXJzICYmICFlbmRSZWFjaGVkKSB7XG4gICAgICAgICAgICAgICAgX2xpc3RlbmVycyA9IHNlYXJjaExpc3RlbmVyVHJlZShoYW5kbGVycywgdHlwZSwgdHJlZVticmFuY2hdLCB0eXBlTGVuZ3RoLCB0eXBlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpZiAoX2xpc3RlbmVycykge1xuICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMucHVzaC5hcHBseShsaXN0ZW5lcnMsIF9saXN0ZW5lcnMpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzID0gX2xpc3RlbmVycztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgX2xpc3RlbmVycyA9IHNlYXJjaExpc3RlbmVyVHJlZShoYW5kbGVycywgdHlwZSwgdHJlZVticmFuY2hdLCBpLCB0eXBlTGVuZ3RoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYnJhbmNoID09PSBuZXh0VHlwZSkge1xuICAgICAgICAgICAgICBfbGlzdGVuZXJzID0gc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB0cmVlW2JyYW5jaF0sIGkgKyAyLCB0eXBlTGVuZ3RoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIE5vIG1hdGNoIG9uIHRoaXMgb25lLCBzaGlmdCBpbnRvIHRoZSB0cmVlIGJ1dCBub3QgaW4gdGhlIHR5cGUgYXJyYXkuXG4gICAgICAgICAgICAgIF9saXN0ZW5lcnMgPSBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHRyZWVbYnJhbmNoXSwgaSwgdHlwZUxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX2xpc3RlbmVycykge1xuICAgICAgICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzLnB1c2guYXBwbHkobGlzdGVuZXJzLCBfbGlzdGVuZXJzKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMgPSBfbGlzdGVuZXJzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaXN0ZW5lcnM7XG4gICAgICB9IGVsc2UgaWYgKHRyZWVbY3VycmVudFR5cGVdKSB7XG4gICAgICAgIGxpc3RlbmVycyA9IHNlYXJjaExpc3RlbmVyVHJlZShoYW5kbGVycywgdHlwZSwgdHJlZVtjdXJyZW50VHlwZV0sIGkgKyAxLCB0eXBlTGVuZ3RoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAgIHhUcmVlID0gdHJlZVsnKiddO1xuICAgIGlmICh4VHJlZSkge1xuICAgICAgLy9cbiAgICAgIC8vIElmIHRoZSBsaXN0ZW5lciB0cmVlIHdpbGwgYWxsb3cgYW55IG1hdGNoIGZvciB0aGlzIHBhcnQsXG4gICAgICAvLyB0aGVuIHJlY3Vyc2l2ZWx5IGV4cGxvcmUgYWxsIGJyYW5jaGVzIG9mIHRoZSB0cmVlXG4gICAgICAvL1xuICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB4VHJlZSwgaSArIDEsIHR5cGVMZW5ndGgpO1xuICAgIH1cblxuICAgIHh4VHJlZSA9IHRyZWVbJyoqJ107XG4gICAgaWYgKHh4VHJlZSkge1xuICAgICAgaWYgKGkgPCB0eXBlTGVuZ3RoKSB7XG4gICAgICAgIGlmICh4eFRyZWUuX2xpc3RlbmVycykge1xuICAgICAgICAgIC8vIElmIHdlIGhhdmUgYSBsaXN0ZW5lciBvbiBhICcqKicsIGl0IHdpbGwgY2F0Y2ggYWxsLCBzbyBhZGQgaXRzIGhhbmRsZXIuXG4gICAgICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB4eFRyZWUsIHR5cGVMZW5ndGgsIHR5cGVMZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQnVpbGQgYXJyYXlzIG9mIG1hdGNoaW5nIG5leHQgYnJhbmNoZXMgYW5kIG90aGVycy5cbiAgICAgICAgYnJhbmNoZXM9IG93bktleXMoeHhUcmVlKTtcbiAgICAgICAgbj0gYnJhbmNoZXMubGVuZ3RoO1xuICAgICAgICB3aGlsZShuLS0+MCl7XG4gICAgICAgICAgYnJhbmNoPSBicmFuY2hlc1tuXTtcbiAgICAgICAgICBpZiAoYnJhbmNoICE9PSAnX2xpc3RlbmVycycpIHtcbiAgICAgICAgICAgIGlmIChicmFuY2ggPT09IG5leHRUeXBlKSB7XG4gICAgICAgICAgICAgIC8vIFdlIGtub3cgdGhlIG5leHQgZWxlbWVudCB3aWxsIG1hdGNoLCBzbyBqdW1wIHR3aWNlLlxuICAgICAgICAgICAgICBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHh4VHJlZVticmFuY2hdLCBpICsgMiwgdHlwZUxlbmd0aCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJyYW5jaCA9PT0gY3VycmVudFR5cGUpIHtcbiAgICAgICAgICAgICAgLy8gQ3VycmVudCBub2RlIG1hdGNoZXMsIG1vdmUgaW50byB0aGUgdHJlZS5cbiAgICAgICAgICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB4eFRyZWVbYnJhbmNoXSwgaSArIDEsIHR5cGVMZW5ndGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaXNvbGF0ZWRCcmFuY2ggPSB7fTtcbiAgICAgICAgICAgICAgaXNvbGF0ZWRCcmFuY2hbYnJhbmNoXSA9IHh4VHJlZVticmFuY2hdO1xuICAgICAgICAgICAgICBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHsnKionOiBpc29sYXRlZEJyYW5jaH0sIGkgKyAxLCB0eXBlTGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoeHhUcmVlLl9saXN0ZW5lcnMpIHtcbiAgICAgICAgLy8gV2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgYW5kIHN0aWxsIG9uIGEgJyoqJ1xuICAgICAgICBzZWFyY2hMaXN0ZW5lclRyZWUoaGFuZGxlcnMsIHR5cGUsIHh4VHJlZSwgdHlwZUxlbmd0aCwgdHlwZUxlbmd0aCk7XG4gICAgICB9IGVsc2UgaWYgKHh4VHJlZVsnKiddICYmIHh4VHJlZVsnKiddLl9saXN0ZW5lcnMpIHtcbiAgICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlKGhhbmRsZXJzLCB0eXBlLCB4eFRyZWVbJyonXSwgdHlwZUxlbmd0aCwgdHlwZUxlbmd0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RlbmVycztcbiAgfVxuXG4gIGZ1bmN0aW9uIGdyb3dMaXN0ZW5lclRyZWUodHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHtcbiAgICB2YXIgbGVuID0gMCwgaiA9IDAsIGksIGRlbGltaXRlciA9IHRoaXMuZGVsaW1pdGVyLCBkbD0gZGVsaW1pdGVyLmxlbmd0aCwgbnM7XG5cbiAgICBpZih0eXBlb2YgdHlwZT09PSdzdHJpbmcnKSB7XG4gICAgICBpZiAoKGkgPSB0eXBlLmluZGV4T2YoZGVsaW1pdGVyKSkgIT09IC0xKSB7XG4gICAgICAgIG5zID0gbmV3IEFycmF5KDUpO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgbnNbbGVuKytdID0gdHlwZS5zbGljZShqLCBpKTtcbiAgICAgICAgICBqID0gaSArIGRsO1xuICAgICAgICB9IHdoaWxlICgoaSA9IHR5cGUuaW5kZXhPZihkZWxpbWl0ZXIsIGopKSAhPT0gLTEpO1xuXG4gICAgICAgIG5zW2xlbisrXSA9IHR5cGUuc2xpY2Uoaik7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgbnM9IFt0eXBlXTtcbiAgICAgICAgbGVuPSAxO1xuICAgICAgfVxuICAgIH1lbHNle1xuICAgICAgbnM9IHR5cGU7XG4gICAgICBsZW49IHR5cGUubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vXG4gICAgLy8gTG9va3MgZm9yIHR3byBjb25zZWN1dGl2ZSAnKionLCBpZiBzbywgZG9uJ3QgYWRkIHRoZSBldmVudCBhdCBhbGwuXG4gICAgLy9cbiAgICBpZiAobGVuID4gMSkge1xuICAgICAgZm9yIChpID0gMDsgaSArIDEgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAobnNbaV0gPT09ICcqKicgJiYgbnNbaSArIDFdID09PSAnKionKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cblxuICAgIHZhciB0cmVlID0gdGhpcy5saXN0ZW5lclRyZWUsIG5hbWU7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIG5hbWUgPSBuc1tpXTtcblxuICAgICAgdHJlZSA9IHRyZWVbbmFtZV0gfHwgKHRyZWVbbmFtZV0gPSB7fSk7XG5cbiAgICAgIGlmIChpID09PSBsZW4gLSAxKSB7XG4gICAgICAgIGlmICghdHJlZS5fbGlzdGVuZXJzKSB7XG4gICAgICAgICAgdHJlZS5fbGlzdGVuZXJzID0gbGlzdGVuZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0cmVlLl9saXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRyZWUuX2xpc3RlbmVycyA9IFt0cmVlLl9saXN0ZW5lcnNdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChwcmVwZW5kKSB7XG4gICAgICAgICAgICB0cmVlLl9saXN0ZW5lcnMudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyZWUuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICF0cmVlLl9saXN0ZW5lcnMud2FybmVkICYmXG4gICAgICAgICAgICAgIHRoaXMuX21heExpc3RlbmVycyA+IDAgJiZcbiAgICAgICAgICAgICAgdHJlZS5fbGlzdGVuZXJzLmxlbmd0aCA+IHRoaXMuX21heExpc3RlbmVyc1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgdHJlZS5fbGlzdGVuZXJzLndhcm5lZCA9IHRydWU7XG4gICAgICAgICAgICBsb2dQb3NzaWJsZU1lbW9yeUxlYWsuY2FsbCh0aGlzLCB0cmVlLl9saXN0ZW5lcnMubGVuZ3RoLCBuYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBjb2xsZWN0VHJlZUV2ZW50cyh0cmVlLCBldmVudHMsIHJvb3QsIGFzQXJyYXkpe1xuICAgICB2YXIgYnJhbmNoZXM9IG93bktleXModHJlZSk7XG4gICAgIHZhciBpPSBicmFuY2hlcy5sZW5ndGg7XG4gICAgIHZhciBicmFuY2gsIGJyYW5jaE5hbWUsIHBhdGg7XG4gICAgIHZhciBoYXNMaXN0ZW5lcnM9IHRyZWVbJ19saXN0ZW5lcnMnXTtcbiAgICAgdmFyIGlzQXJyYXlQYXRoO1xuXG4gICAgIHdoaWxlKGktLT4wKXtcbiAgICAgICAgIGJyYW5jaE5hbWU9IGJyYW5jaGVzW2ldO1xuXG4gICAgICAgICBicmFuY2g9IHRyZWVbYnJhbmNoTmFtZV07XG5cbiAgICAgICAgIGlmKGJyYW5jaE5hbWU9PT0nX2xpc3RlbmVycycpe1xuICAgICAgICAgICAgIHBhdGg9IHJvb3Q7XG4gICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgcGF0aCA9IHJvb3QgPyByb290LmNvbmNhdChicmFuY2hOYW1lKSA6IFticmFuY2hOYW1lXTtcbiAgICAgICAgIH1cblxuICAgICAgICAgaXNBcnJheVBhdGg9IGFzQXJyYXkgfHwgdHlwZW9mIGJyYW5jaE5hbWU9PT0nc3ltYm9sJztcblxuICAgICAgICAgaGFzTGlzdGVuZXJzICYmIGV2ZW50cy5wdXNoKGlzQXJyYXlQYXRoPyBwYXRoIDogcGF0aC5qb2luKHRoaXMuZGVsaW1pdGVyKSk7XG5cbiAgICAgICAgIGlmKHR5cGVvZiBicmFuY2g9PT0nb2JqZWN0Jyl7XG4gICAgICAgICAgICAgY29sbGVjdFRyZWVFdmVudHMuY2FsbCh0aGlzLCBicmFuY2gsIGV2ZW50cywgcGF0aCwgaXNBcnJheVBhdGgpO1xuICAgICAgICAgfVxuICAgICB9XG5cbiAgICAgcmV0dXJuIGV2ZW50cztcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5R2FyYmFnZUNvbGxlY3Qocm9vdCkge1xuICAgIHZhciBrZXlzID0gb3duS2V5cyhyb290KTtcbiAgICB2YXIgaT0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIG9iaiwga2V5LCBmbGFnO1xuICAgIHdoaWxlKGktLT4wKXtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBvYmogPSByb290W2tleV07XG5cbiAgICAgIGlmKG9iail7XG4gICAgICAgICAgZmxhZz0gdHJ1ZTtcbiAgICAgICAgICBpZihrZXkgIT09ICdfbGlzdGVuZXJzJyAmJiAhcmVjdXJzaXZlbHlHYXJiYWdlQ29sbGVjdChvYmopKXtcbiAgICAgICAgICAgICBkZWxldGUgcm9vdFtrZXldO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmxhZztcbiAgfVxuXG4gIGZ1bmN0aW9uIExpc3RlbmVyKGVtaXR0ZXIsIGV2ZW50LCBsaXN0ZW5lcil7XG4gICAgdGhpcy5lbWl0dGVyPSBlbWl0dGVyO1xuICAgIHRoaXMuZXZlbnQ9IGV2ZW50O1xuICAgIHRoaXMubGlzdGVuZXI9IGxpc3RlbmVyO1xuICB9XG5cbiAgTGlzdGVuZXIucHJvdG90eXBlLm9mZj0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLmVtaXR0ZXIub2ZmKHRoaXMuZXZlbnQsIHRoaXMubGlzdGVuZXIpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHNldHVwTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBvcHRpb25zKXtcbiAgICAgIGlmIChvcHRpb25zID09PSB0cnVlKSB7XG4gICAgICAgIHByb21pc2lmeSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgIGFzeW5jID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ29wdGlvbnMgc2hvdWxkIGJlIGFuIG9iamVjdCBvciB0cnVlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFzeW5jID0gb3B0aW9ucy5hc3luYztcbiAgICAgICAgdmFyIHByb21pc2lmeSA9IG9wdGlvbnMucHJvbWlzaWZ5O1xuICAgICAgICB2YXIgbmV4dFRpY2sgPSBvcHRpb25zLm5leHRUaWNrO1xuICAgICAgICB2YXIgb2JqZWN0aWZ5ID0gb3B0aW9ucy5vYmplY3RpZnk7XG4gICAgICB9XG5cbiAgICAgIGlmIChhc3luYyB8fCBuZXh0VGljayB8fCBwcm9taXNpZnkpIHtcbiAgICAgICAgdmFyIF9saXN0ZW5lciA9IGxpc3RlbmVyO1xuICAgICAgICB2YXIgX29yaWdpbiA9IGxpc3RlbmVyLl9vcmlnaW4gfHwgbGlzdGVuZXI7XG5cbiAgICAgICAgaWYgKG5leHRUaWNrICYmICFuZXh0VGlja1N1cHBvcnRlZCkge1xuICAgICAgICAgIHRocm93IEVycm9yKCdwcm9jZXNzLm5leHRUaWNrIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9taXNpZnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHByb21pc2lmeSA9IGxpc3RlbmVyLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdBc3luY0Z1bmN0aW9uJztcbiAgICAgICAgfVxuXG4gICAgICAgIGxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLmV2ZW50O1xuXG4gICAgICAgICAgcmV0dXJuIHByb21pc2lmeSA/IChuZXh0VGljayA/IFByb21pc2UucmVzb2x2ZSgpIDogbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgICAgIF9zZXRJbW1lZGlhdGUocmVzb2x2ZSk7XG4gICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb250ZXh0LmV2ZW50ID0gZXZlbnQ7XG4gICAgICAgICAgICByZXR1cm4gX2xpc3RlbmVyLmFwcGx5KGNvbnRleHQsIGFyZ3MpXG4gICAgICAgICAgfSkpIDogKG5leHRUaWNrID8gcHJvY2Vzcy5uZXh0VGljayA6IF9zZXRJbW1lZGlhdGUpKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnRleHQuZXZlbnQgPSBldmVudDtcbiAgICAgICAgICAgIF9saXN0ZW5lci5hcHBseShjb250ZXh0LCBhcmdzKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGxpc3RlbmVyLl9hc3luYyA9IHRydWU7XG4gICAgICAgIGxpc3RlbmVyLl9vcmlnaW4gPSBfb3JpZ2luO1xuICAgICAgfVxuXG4gICAgcmV0dXJuIFtsaXN0ZW5lciwgb2JqZWN0aWZ5PyBuZXcgTGlzdGVuZXIodGhpcywgZXZlbnQsIGxpc3RlbmVyKTogdGhpc107XG4gIH1cblxuICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoY29uZikge1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHRoaXMuX25ld0xpc3RlbmVyID0gZmFsc2U7XG4gICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXIgPSBmYWxzZTtcbiAgICB0aGlzLnZlcmJvc2VNZW1vcnlMZWFrID0gZmFsc2U7XG4gICAgY29uZmlndXJlLmNhbGwodGhpcywgY29uZik7XG4gIH1cblxuICBFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyMiA9IEV2ZW50RW1pdHRlcjsgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgZm9yIGV4cG9ydGluZyBFdmVudEVtaXR0ZXIgcHJvcGVydHlcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlblRvPSBmdW5jdGlvbih0YXJnZXQsIGV2ZW50cywgb3B0aW9ucyl7XG4gICAgaWYodHlwZW9mIHRhcmdldCE9PSdvYmplY3QnKXtcbiAgICAgIHRocm93IFR5cGVFcnJvcigndGFyZ2V0IG11c3RzIGJlIGFuIG9iamVjdCcpO1xuICAgIH1cblxuICAgIHZhciBlbWl0dGVyPSB0aGlzO1xuXG4gICAgb3B0aW9ucyA9IHJlc29sdmVPcHRpb25zKG9wdGlvbnMsIHtcbiAgICAgIG9uOiB1bmRlZmluZWQsXG4gICAgICBvZmY6IHVuZGVmaW5lZCxcbiAgICAgIHJlZHVjZXJzOiB1bmRlZmluZWRcbiAgICB9LCB7XG4gICAgICBvbjogZnVuY3Rpb25SZWR1Y2VyLFxuICAgICAgb2ZmOiBmdW5jdGlvblJlZHVjZXIsXG4gICAgICByZWR1Y2Vyczogb2JqZWN0RnVuY3Rpb25SZWR1Y2VyXG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBsaXN0ZW4oZXZlbnRzKXtcbiAgICAgIGlmKHR5cGVvZiBldmVudHMhPT0nb2JqZWN0Jyl7XG4gICAgICAgIHRocm93IFR5cGVFcnJvcignZXZlbnRzIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWR1Y2Vycz0gb3B0aW9ucy5yZWR1Y2VycztcbiAgICAgIHZhciBpbmRleD0gZmluZFRhcmdldEluZGV4LmNhbGwoZW1pdHRlciwgdGFyZ2V0KTtcbiAgICAgIHZhciBvYnNlcnZlcjtcblxuICAgICAgaWYoaW5kZXg9PT0tMSl7XG4gICAgICAgIG9ic2VydmVyPSBuZXcgVGFyZ2V0T2JzZXJ2ZXIoZW1pdHRlciwgdGFyZ2V0LCBvcHRpb25zKTtcbiAgICAgIH1lbHNle1xuICAgICAgICBvYnNlcnZlcj0gZW1pdHRlci5fb2JzZXJ2ZXJzW2luZGV4XTtcbiAgICAgIH1cblxuICAgICAgdmFyIGtleXM9IG93bktleXMoZXZlbnRzKTtcbiAgICAgIHZhciBsZW49IGtleXMubGVuZ3RoO1xuICAgICAgdmFyIGV2ZW50O1xuICAgICAgdmFyIGlzU2luZ2xlUmVkdWNlcj0gdHlwZW9mIHJlZHVjZXJzPT09J2Z1bmN0aW9uJztcblxuICAgICAgZm9yKHZhciBpPTA7IGk8bGVuOyBpKyspe1xuICAgICAgICBldmVudD0ga2V5c1tpXTtcbiAgICAgICAgb2JzZXJ2ZXIuc3Vic2NyaWJlKFxuICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICBldmVudHNbZXZlbnRdIHx8IGV2ZW50LFxuICAgICAgICAgICAgaXNTaW5nbGVSZWR1Y2VyID8gcmVkdWNlcnMgOiByZWR1Y2VycyAmJiByZWR1Y2Vyc1tldmVudF1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpc0FycmF5KGV2ZW50cyk/XG4gICAgICAgIGxpc3Rlbih0b09iamVjdChldmVudHMpKSA6XG4gICAgICAgICh0eXBlb2YgZXZlbnRzPT09J3N0cmluZyc/IGxpc3Rlbih0b09iamVjdChldmVudHMuc3BsaXQoL1xccysvKSkpOiBsaXN0ZW4oZXZlbnRzKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnN0b3BMaXN0ZW5pbmdUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGV2ZW50KSB7XG4gICAgdmFyIG9ic2VydmVycyA9IHRoaXMuX29ic2VydmVycztcblxuICAgIGlmKCFvYnNlcnZlcnMpe1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBpID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICB2YXIgb2JzZXJ2ZXI7XG4gICAgdmFyIG1hdGNoZWQ9IGZhbHNlO1xuXG4gICAgaWYodGFyZ2V0ICYmIHR5cGVvZiB0YXJnZXQhPT0nb2JqZWN0Jyl7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ3RhcmdldCBzaG91bGQgYmUgYW4gb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgd2hpbGUgKGktLSA+IDApIHtcbiAgICAgIG9ic2VydmVyID0gb2JzZXJ2ZXJzW2ldO1xuICAgICAgaWYgKCF0YXJnZXQgfHwgb2JzZXJ2ZXIuX3RhcmdldCA9PT0gdGFyZ2V0KSB7XG4gICAgICAgIG9ic2VydmVyLnVuc3Vic2NyaWJlKGV2ZW50KTtcbiAgICAgICAgbWF0Y2hlZD0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWF0Y2hlZDtcbiAgfTtcblxuICAvLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuXG4gIC8vIDEwIGxpc3RlbmVycyBhcmUgYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaFxuICAvLyBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cbiAgLy9cbiAgLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4gIC8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZGVsaW1pdGVyID0gJy4nO1xuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuICAgIGlmIChuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gICAgICBpZiAoIXRoaXMuX2NvbmYpIHRoaXMuX2NvbmYgPSB7fTtcbiAgICAgIHRoaXMuX2NvbmYubWF4TGlzdGVuZXJzID0gbjtcbiAgICB9XG4gIH07XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbWF4TGlzdGVuZXJzO1xuICB9O1xuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnQgPSAnJztcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbihldmVudCwgZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fb25jZShldmVudCwgZm4sIGZhbHNlLCBvcHRpb25zKTtcbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCwgZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fb25jZShldmVudCwgZm4sIHRydWUsIG9wdGlvbnMpO1xuICB9O1xuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuX29uY2UgPSBmdW5jdGlvbihldmVudCwgZm4sIHByZXBlbmQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fbWFueShldmVudCwgMSwgZm4sIHByZXBlbmQsIG9wdGlvbnMpO1xuICB9O1xuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUubWFueSA9IGZ1bmN0aW9uKGV2ZW50LCB0dGwsIGZuLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuX21hbnkoZXZlbnQsIHR0bCwgZm4sIGZhbHNlLCBvcHRpb25zKTtcbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRNYW55ID0gZnVuY3Rpb24oZXZlbnQsIHR0bCwgZm4sIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fbWFueShldmVudCwgdHRsLCBmbiwgdHJ1ZSwgb3B0aW9ucyk7XG4gIH07XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWFueSA9IGZ1bmN0aW9uKGV2ZW50LCB0dGwsIGZuLCBwcmVwZW5kLCBvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYW55IG9ubHkgYWNjZXB0cyBpbnN0YW5jZXMgb2YgRnVuY3Rpb24nKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaXN0ZW5lcigpIHtcbiAgICAgIGlmICgtLXR0bCA9PT0gMCkge1xuICAgICAgICBzZWxmLm9mZihldmVudCwgbGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgbGlzdGVuZXIuX29yaWdpbiA9IGZuO1xuXG4gICAgcmV0dXJuIHRoaXMuX29uKGV2ZW50LCBsaXN0ZW5lciwgcHJlcGVuZCwgb3B0aW9ucyk7XG4gIH07XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMgJiYgIXRoaXMuX2FsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMuX2V2ZW50cyB8fCBpbml0LmNhbGwodGhpcyk7XG5cbiAgICB2YXIgdHlwZSA9IGFyZ3VtZW50c1swXSwgbnMsIHdpbGRjYXJkPSB0aGlzLndpbGRjYXJkO1xuICAgIHZhciBhcmdzLGwsaSxqLCBjb250YWluc1N5bWJvbDtcblxuICAgIGlmICh0eXBlID09PSAnbmV3TGlzdGVuZXInICYmICF0aGlzLl9uZXdMaXN0ZW5lcikge1xuICAgICAgaWYgKCF0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh3aWxkY2FyZCkge1xuICAgICAgbnM9IHR5cGU7XG4gICAgICBpZih0eXBlIT09J25ld0xpc3RlbmVyJyAmJiB0eXBlIT09J3JlbW92ZUxpc3RlbmVyJyl7XG4gICAgICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBsID0gdHlwZS5sZW5ndGg7XG4gICAgICAgICAgaWYgKHN5bWJvbHNTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlW2ldID09PSAnc3ltYm9sJykge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5zU3ltYm9sID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWNvbnRhaW5zU3ltYm9sKSB7XG4gICAgICAgICAgICB0eXBlID0gdHlwZS5qb2luKHRoaXMuZGVsaW1pdGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYWwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciBoYW5kbGVyO1xuXG4gICAgaWYgKHRoaXMuX2FsbCAmJiB0aGlzLl9hbGwubGVuZ3RoKSB7XG4gICAgICBoYW5kbGVyID0gdGhpcy5fYWxsLnNsaWNlKCk7XG5cbiAgICAgIGZvciAoaSA9IDAsIGwgPSBoYW5kbGVyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLmV2ZW50ID0gdHlwZTtcbiAgICAgICAgc3dpdGNoIChhbCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaGFuZGxlcltpXS5jYWxsKHRoaXMsIHR5cGUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgaGFuZGxlcltpXS5jYWxsKHRoaXMsIHR5cGUsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBoYW5kbGVyW2ldLmNhbGwodGhpcywgdHlwZSwgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGhhbmRsZXJbaV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh3aWxkY2FyZCkge1xuICAgICAgaGFuZGxlciA9IFtdO1xuICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlLmNhbGwodGhpcywgaGFuZGxlciwgbnMsIHRoaXMubGlzdGVuZXJUcmVlLCAwLCBsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLmV2ZW50ID0gdHlwZTtcbiAgICAgICAgc3dpdGNoIChhbCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYWwgLSAxKTtcbiAgICAgICAgICBmb3IgKGogPSAxOyBqIDwgYWw7IGorKykgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XG4gICAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoaGFuZGxlcikge1xuICAgICAgICAvLyBuZWVkIHRvIG1ha2UgY29weSBvZiBoYW5kbGVycyBiZWNhdXNlIGxpc3QgY2FuIGNoYW5nZSBpbiB0aGUgbWlkZGxlXG4gICAgICAgIC8vIG9mIGVtaXQgY2FsbFxuICAgICAgICBoYW5kbGVyID0gaGFuZGxlci5zbGljZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChoYW5kbGVyICYmIGhhbmRsZXIubGVuZ3RoKSB7XG4gICAgICBpZiAoYWwgPiAzKSB7XG4gICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYWwgLSAxKTtcbiAgICAgICAgZm9yIChqID0gMTsgaiA8IGFsOyBqKyspIGFyZ3NbaiAtIDFdID0gYXJndW1lbnRzW2pdO1xuICAgICAgfVxuICAgICAgZm9yIChpID0gMCwgbCA9IGhhbmRsZXIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMuZXZlbnQgPSB0eXBlO1xuICAgICAgICBzd2l0Y2ggKGFsKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBoYW5kbGVyW2ldLmNhbGwodGhpcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBoYW5kbGVyW2ldLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIGhhbmRsZXJbaV0uY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaGFuZGxlcltpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICghdGhpcy5pZ25vcmVFcnJvcnMgJiYgIXRoaXMuX2FsbCAmJiB0eXBlID09PSAnZXJyb3InKSB7XG4gICAgICBpZiAoYXJndW1lbnRzWzFdIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgYXJndW1lbnRzWzFdOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5jYXVnaHQsIHVuc3BlY2lmaWVkICdlcnJvcicgZXZlbnQuXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAhIXRoaXMuX2FsbDtcbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXRBc3luYyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzICYmICF0aGlzLl9hbGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLl9ldmVudHMgfHwgaW5pdC5jYWxsKHRoaXMpO1xuXG4gICAgdmFyIHR5cGUgPSBhcmd1bWVudHNbMF0sIHdpbGRjYXJkPSB0aGlzLndpbGRjYXJkLCBucywgY29udGFpbnNTeW1ib2w7XG4gICAgdmFyIGFyZ3MsbCxpLGo7XG5cbiAgICBpZiAodHlwZSA9PT0gJ25ld0xpc3RlbmVyJyAmJiAhdGhpcy5fbmV3TGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpIHsgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbZmFsc2VdKTsgfVxuICAgIH1cblxuICAgIGlmICh3aWxkY2FyZCkge1xuICAgICAgbnM9IHR5cGU7XG4gICAgICBpZih0eXBlIT09J25ld0xpc3RlbmVyJyAmJiB0eXBlIT09J3JlbW92ZUxpc3RlbmVyJyl7XG4gICAgICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBsID0gdHlwZS5sZW5ndGg7XG4gICAgICAgICAgaWYgKHN5bWJvbHNTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlW2ldID09PSAnc3ltYm9sJykge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5zU3ltYm9sID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWNvbnRhaW5zU3ltYm9sKSB7XG4gICAgICAgICAgICB0eXBlID0gdHlwZS5qb2luKHRoaXMuZGVsaW1pdGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZXM9IFtdO1xuXG4gICAgdmFyIGFsID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgaGFuZGxlcjtcblxuICAgIGlmICh0aGlzLl9hbGwpIHtcbiAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLl9hbGwubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMuZXZlbnQgPSB0eXBlO1xuICAgICAgICBzd2l0Y2ggKGFsKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2FsbFtpXS5jYWxsKHRoaXMsIHR5cGUpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHByb21pc2VzLnB1c2godGhpcy5fYWxsW2ldLmNhbGwodGhpcywgdHlwZSwgYXJndW1lbnRzWzFdKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuX2FsbFtpXS5jYWxsKHRoaXMsIHR5cGUsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcHJvbWlzZXMucHVzaCh0aGlzLl9hbGxbaV0uYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAod2lsZGNhcmQpIHtcbiAgICAgIGhhbmRsZXIgPSBbXTtcbiAgICAgIHNlYXJjaExpc3RlbmVyVHJlZS5jYWxsKHRoaXMsIGhhbmRsZXIsIG5zLCB0aGlzLmxpc3RlbmVyVHJlZSwgMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLmV2ZW50ID0gdHlwZTtcbiAgICAgIHN3aXRjaCAoYWwpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcHJvbWlzZXMucHVzaChoYW5kbGVyLmNhbGwodGhpcykpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcHJvbWlzZXMucHVzaChoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBwcm9taXNlcy5wdXNoKGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYWwgLSAxKTtcbiAgICAgICAgZm9yIChqID0gMTsgaiA8IGFsOyBqKyspIGFyZ3NbaiAtIDFdID0gYXJndW1lbnRzW2pdO1xuICAgICAgICBwcm9taXNlcy5wdXNoKGhhbmRsZXIuYXBwbHkodGhpcywgYXJncykpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiBoYW5kbGVyLmxlbmd0aCkge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICAgIGlmIChhbCA+IDMpIHtcbiAgICAgICAgYXJncyA9IG5ldyBBcnJheShhbCAtIDEpO1xuICAgICAgICBmb3IgKGogPSAxOyBqIDwgYWw7IGorKykgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XG4gICAgICB9XG4gICAgICBmb3IgKGkgPSAwLCBsID0gaGFuZGxlci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5ldmVudCA9IHR5cGU7XG4gICAgICAgIHN3aXRjaCAoYWwpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHByb21pc2VzLnB1c2goaGFuZGxlcltpXS5jYWxsKHRoaXMpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHByb21pc2VzLnB1c2goaGFuZGxlcltpXS5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgcHJvbWlzZXMucHVzaChoYW5kbGVyW2ldLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwcm9taXNlcy5wdXNoKGhhbmRsZXJbaV0uYXBwbHkodGhpcywgYXJncykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghdGhpcy5pZ25vcmVFcnJvcnMgJiYgIXRoaXMuX2FsbCAmJiB0eXBlID09PSAnZXJyb3InKSB7XG4gICAgICBpZiAoYXJndW1lbnRzWzFdIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGFyZ3VtZW50c1sxXSk7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJVbmNhdWdodCwgdW5zcGVjaWZpZWQgJ2Vycm9yJyBldmVudC5cIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5fb24odHlwZSwgbGlzdGVuZXIsIGZhbHNlLCBvcHRpb25zKTtcbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uKHR5cGUsIGxpc3RlbmVyLCB0cnVlLCBvcHRpb25zKTtcbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uQW55ID0gZnVuY3Rpb24oZm4pIHtcbiAgICByZXR1cm4gdGhpcy5fb25BbnkoZm4sIGZhbHNlKTtcbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRBbnkgPSBmdW5jdGlvbihmbikge1xuICAgIHJldHVybiB0aGlzLl9vbkFueShmbiwgdHJ1ZSk7XG4gIH07XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUub247XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fb25BbnkgPSBmdW5jdGlvbihmbiwgcHJlcGVuZCl7XG4gICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbkFueSBvbmx5IGFjY2VwdHMgaW5zdGFuY2VzIG9mIEZ1bmN0aW9uJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9hbGwpIHtcbiAgICAgIHRoaXMuX2FsbCA9IFtdO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgZnVuY3Rpb24gdG8gdGhlIGV2ZW50IGxpc3RlbmVyIGNvbGxlY3Rpb24uXG4gICAgaWYocHJlcGVuZCl7XG4gICAgICB0aGlzLl9hbGwudW5zaGlmdChmbik7XG4gICAgfWVsc2V7XG4gICAgICB0aGlzLl9hbGwucHVzaChmbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fb24gPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCwgb3B0aW9ucykge1xuICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5fb25BbnkodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbiBvbmx5IGFjY2VwdHMgaW5zdGFuY2VzIG9mIEZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIHRoaXMuX2V2ZW50cyB8fCBpbml0LmNhbGwodGhpcyk7XG5cbiAgICB2YXIgcmV0dXJuVmFsdWU9IHRoaXMsIHRlbXA7XG5cbiAgICBpZiAob3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0ZW1wID0gc2V0dXBMaXN0ZW5lci5jYWxsKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKTtcbiAgICAgIGxpc3RlbmVyID0gdGVtcFswXTtcbiAgICAgIHJldHVyblZhbHVlID0gdGVtcFsxXTtcbiAgICB9XG5cbiAgICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09IFwibmV3TGlzdGVuZXJzXCIhIEJlZm9yZVxuICAgIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJzXCIuXG4gICAgaWYgKHRoaXMuX25ld0xpc3RlbmVyKSB7XG4gICAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLndpbGRjYXJkKSB7XG4gICAgICBncm93TGlzdGVuZXJUcmVlLmNhbGwodGhpcywgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpO1xuICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSB7XG4gICAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuX2V2ZW50c1t0eXBlXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBDaGFuZ2UgdG8gYXJyYXkuXG4gICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhZGRcbiAgICAgIGlmKHByZXBlbmQpe1xuICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0udW5zaGlmdChsaXN0ZW5lcik7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCAmJlxuICAgICAgICB0aGlzLl9tYXhMaXN0ZW5lcnMgPiAwICYmXG4gICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiB0aGlzLl9tYXhMaXN0ZW5lcnNcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgICAgbG9nUG9zc2libGVNZW1vcnlMZWFrLmNhbGwodGhpcywgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCwgdHlwZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICB9O1xuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbW92ZUxpc3RlbmVyIG9ubHkgdGFrZXMgaW5zdGFuY2VzIG9mIEZ1bmN0aW9uJyk7XG4gICAgfVxuXG4gICAgdmFyIGhhbmRsZXJzLGxlYWZzPVtdO1xuXG4gICAgaWYodGhpcy53aWxkY2FyZCkge1xuICAgICAgdmFyIG5zID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnID8gdHlwZS5zcGxpdCh0aGlzLmRlbGltaXRlcikgOiB0eXBlLnNsaWNlKCk7XG4gICAgICBsZWFmcyA9IHNlYXJjaExpc3RlbmVyVHJlZS5jYWxsKHRoaXMsIG51bGwsIG5zLCB0aGlzLmxpc3RlbmVyVHJlZSwgMCk7XG4gICAgICBpZighbGVhZnMpIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkb2VzIG5vdCB1c2UgbGlzdGVuZXJzKCksIHNvIG5vIHNpZGUgZWZmZWN0IG9mIGNyZWF0aW5nIF9ldmVudHNbdHlwZV1cbiAgICAgIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSByZXR1cm4gdGhpcztcbiAgICAgIGhhbmRsZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgICAgbGVhZnMucHVzaCh7X2xpc3RlbmVyczpoYW5kbGVyc30pO1xuICAgIH1cblxuICAgIGZvciAodmFyIGlMZWFmPTA7IGlMZWFmPGxlYWZzLmxlbmd0aDsgaUxlYWYrKykge1xuICAgICAgdmFyIGxlYWYgPSBsZWFmc1tpTGVhZl07XG4gICAgICBoYW5kbGVycyA9IGxlYWYuX2xpc3RlbmVycztcbiAgICAgIGlmIChpc0FycmF5KGhhbmRsZXJzKSkge1xuXG4gICAgICAgIHZhciBwb3NpdGlvbiA9IC0xO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChoYW5kbGVyc1tpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAgIChoYW5kbGVyc1tpXS5saXN0ZW5lciAmJiBoYW5kbGVyc1tpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHx8XG4gICAgICAgICAgICAoaGFuZGxlcnNbaV0uX29yaWdpbiAmJiBoYW5kbGVyc1tpXS5fb3JpZ2luID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMud2lsZGNhcmQpIHtcbiAgICAgICAgICBsZWFmLl9saXN0ZW5lcnMuc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0uc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoYW5kbGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBpZih0aGlzLndpbGRjYXJkKSB7XG4gICAgICAgICAgICBkZWxldGUgbGVhZi5fbGlzdGVuZXJzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9yZW1vdmVMaXN0ZW5lcilcbiAgICAgICAgICB0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLCB0eXBlLCBsaXN0ZW5lcik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChoYW5kbGVycyA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgKGhhbmRsZXJzLmxpc3RlbmVyICYmIGhhbmRsZXJzLmxpc3RlbmVyID09PSBsaXN0ZW5lcikgfHxcbiAgICAgICAgKGhhbmRsZXJzLl9vcmlnaW4gJiYgaGFuZGxlcnMuX29yaWdpbiA9PT0gbGlzdGVuZXIpKSB7XG4gICAgICAgIGlmKHRoaXMud2lsZGNhcmQpIHtcbiAgICAgICAgICBkZWxldGUgbGVhZi5fbGlzdGVuZXJzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3JlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgIHRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsIHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmxpc3RlbmVyVHJlZSAmJiByZWN1cnNpdmVseUdhcmJhZ2VDb2xsZWN0KHRoaXMubGlzdGVuZXJUcmVlKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmQW55ID0gZnVuY3Rpb24oZm4pIHtcbiAgICB2YXIgaSA9IDAsIGwgPSAwLCBmbnM7XG4gICAgaWYgKGZuICYmIHRoaXMuX2FsbCAmJiB0aGlzLl9hbGwubGVuZ3RoID4gMCkge1xuICAgICAgZm5zID0gdGhpcy5fYWxsO1xuICAgICAgZm9yKGkgPSAwLCBsID0gZm5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZihmbiA9PT0gZm5zW2ldKSB7XG4gICAgICAgICAgZm5zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICBpZiAodGhpcy5fcmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lckFueVwiLCBmbik7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm5zID0gdGhpcy5fYWxsO1xuICAgICAgaWYgKHRoaXMuX3JlbW92ZUxpc3RlbmVyKSB7XG4gICAgICAgIGZvcihpID0gMCwgbCA9IGZucy5sZW5ndGg7IGkgPCBsOyBpKyspXG4gICAgICAgICAgdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJBbnlcIiwgZm5zW2ldKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2FsbCA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmY7XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIGlmICh0eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICF0aGlzLl9ldmVudHMgfHwgaW5pdC5jYWxsKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMud2lsZGNhcmQpIHtcbiAgICAgIHZhciBsZWFmcyA9IHNlYXJjaExpc3RlbmVyVHJlZS5jYWxsKHRoaXMsIG51bGwsIHR5cGUsIHRoaXMubGlzdGVuZXJUcmVlLCAwKSwgbGVhZiwgaTtcbiAgICAgIGlmICghbGVhZnMpIHJldHVybiB0aGlzO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlYWZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxlYWYgPSBsZWFmc1tpXTtcbiAgICAgICAgbGVhZi5fbGlzdGVuZXJzID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHRoaXMubGlzdGVuZXJUcmVlICYmIHJlY3Vyc2l2ZWx5R2FyYmFnZUNvbGxlY3QodGhpcy5saXN0ZW5lclRyZWUpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fZXZlbnRzKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdmFyIF9ldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgdmFyIGtleXMsIGxpc3RlbmVycywgYWxsTGlzdGVuZXJzO1xuICAgIHZhciBpO1xuICAgIHZhciBsaXN0ZW5lclRyZWU7XG5cbiAgICBpZiAodHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy53aWxkY2FyZCkge1xuICAgICAgICB0aHJvdyBFcnJvcignZXZlbnQgbmFtZSByZXF1aXJlZCBmb3Igd2lsZGNhcmQgZW1pdHRlcicpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIV9ldmVudHMpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICBrZXlzID0gb3duS2V5cyhfZXZlbnRzKTtcbiAgICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICAgIGFsbExpc3RlbmVycyA9IFtdO1xuICAgICAgd2hpbGUgKGktLSA+IDApIHtcbiAgICAgICAgbGlzdGVuZXJzID0gX2V2ZW50c1trZXlzW2ldXTtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBhbGxMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFsbExpc3RlbmVycy5wdXNoLmFwcGx5KGFsbExpc3RlbmVycywgbGlzdGVuZXJzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGFsbExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMud2lsZGNhcmQpIHtcbiAgICAgICAgbGlzdGVuZXJUcmVlPSB0aGlzLmxpc3RlbmVyVHJlZTtcbiAgICAgICAgaWYoIWxpc3RlbmVyVHJlZSkgcmV0dXJuIFtdO1xuICAgICAgICB2YXIgaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdmFyIG5zID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnID8gdHlwZS5zcGxpdCh0aGlzLmRlbGltaXRlcikgOiB0eXBlLnNsaWNlKCk7XG4gICAgICAgIHNlYXJjaExpc3RlbmVyVHJlZS5jYWxsKHRoaXMsIGhhbmRsZXJzLCBucywgbGlzdGVuZXJUcmVlLCAwKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXJzO1xuICAgICAgfVxuXG4gICAgICBpZiAoIV9ldmVudHMpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICBsaXN0ZW5lcnMgPSBfZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAoIWxpc3RlbmVycykge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICByZXR1cm4gdHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJyA/IFtsaXN0ZW5lcnNdIDogbGlzdGVuZXJzO1xuICAgIH1cbiAgfTtcblxuICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbihuc0FzQXJyYXkpe1xuICAgIHZhciBfZXZlbnRzPSB0aGlzLl9ldmVudHM7XG4gICAgcmV0dXJuIHRoaXMud2lsZGNhcmQ/IGNvbGxlY3RUcmVlRXZlbnRzLmNhbGwodGhpcywgdGhpcy5saXN0ZW5lclRyZWUsIFtdLCBudWxsLCBuc0FzQXJyYXkpIDogKF9ldmVudHM/IG93bktleXMoX2V2ZW50cykgOiBbXSk7XG4gIH07XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVycyh0eXBlKS5sZW5ndGg7XG4gIH07XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnMgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIGlmICh0aGlzLndpbGRjYXJkKSB7XG4gICAgICB2YXIgaGFuZGxlcnMgPSBbXTtcbiAgICAgIHZhciBucyA9IHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyA/IHR5cGUuc3BsaXQodGhpcy5kZWxpbWl0ZXIpIDogdHlwZS5zbGljZSgpO1xuICAgICAgc2VhcmNoTGlzdGVuZXJUcmVlLmNhbGwodGhpcywgaGFuZGxlcnMsIG5zLCB0aGlzLmxpc3RlbmVyVHJlZSwgMCk7XG4gICAgICByZXR1cm4gaGFuZGxlcnMubGVuZ3RoID4gMDtcbiAgICB9XG5cbiAgICB2YXIgX2V2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICB2YXIgX2FsbCA9IHRoaXMuX2FsbDtcblxuICAgIHJldHVybiAhIShfYWxsICYmIF9hbGwubGVuZ3RoIHx8IF9ldmVudHMgJiYgKHR5cGUgPT09IHVuZGVmaW5lZCA/IG93bktleXMoX2V2ZW50cykubGVuZ3RoIDogX2V2ZW50c1t0eXBlXSkpO1xuICB9O1xuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzQW55ID0gZnVuY3Rpb24oKSB7XG5cbiAgICBpZih0aGlzLl9hbGwpIHtcbiAgICAgIHJldHVybiB0aGlzLl9hbGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICB9O1xuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUud2FpdEZvciA9IGZ1bmN0aW9uIChldmVudCwgb3B0aW9ucykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBvcHRpb25zO1xuICAgIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgb3B0aW9ucyA9IHt0aW1lb3V0OiBvcHRpb25zfTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9wdGlvbnMgPSB7ZmlsdGVyOiBvcHRpb25zfTtcbiAgICB9XG5cbiAgICBvcHRpb25zPSByZXNvbHZlT3B0aW9ucyhvcHRpb25zLCB7XG4gICAgICB0aW1lb3V0OiAwLFxuICAgICAgZmlsdGVyOiB1bmRlZmluZWQsXG4gICAgICBoYW5kbGVFcnJvcjogZmFsc2UsXG4gICAgICBQcm9taXNlOiBQcm9taXNlLFxuICAgICAgb3ZlcmxvYWQ6IGZhbHNlXG4gICAgfSwge1xuICAgICAgZmlsdGVyOiBmdW5jdGlvblJlZHVjZXIsXG4gICAgICBQcm9taXNlOiBjb25zdHJ1Y3RvclJlZHVjZXJcbiAgICB9KTtcblxuICAgIHJldHVybiBtYWtlQ2FuY2VsYWJsZVByb21pc2Uob3B0aW9ucy5Qcm9taXNlLCBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0LCBvbkNhbmNlbCkge1xuICAgICAgZnVuY3Rpb24gbGlzdGVuZXIoKSB7XG4gICAgICAgIHZhciBmaWx0ZXI9IG9wdGlvbnMuZmlsdGVyO1xuICAgICAgICBpZiAoZmlsdGVyICYmICFmaWx0ZXIuYXBwbHkoc2VsZiwgYXJndW1lbnRzKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLm9mZihldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVFcnJvcikge1xuICAgICAgICAgIHZhciBlcnIgPSBhcmd1bWVudHNbMF07XG4gICAgICAgICAgZXJyID8gcmVqZWN0KGVycikgOiByZXNvbHZlKHRvQXJyYXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKS5zbGljZSgxKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZSh0b0FycmF5LmFwcGx5KG51bGwsIGFyZ3VtZW50cykpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG9uQ2FuY2VsKGZ1bmN0aW9uKCl7XG4gICAgICAgIHNlbGYub2ZmKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICB9KTtcblxuICAgICAgc2VsZi5fb24oZXZlbnQsIGxpc3RlbmVyLCBmYWxzZSk7XG4gICAgfSwge1xuICAgICAgdGltZW91dDogb3B0aW9ucy50aW1lb3V0LFxuICAgICAgb3ZlcmxvYWQ6IG9wdGlvbnMub3ZlcmxvYWRcbiAgICB9KVxuICB9O1xuXG4gIGZ1bmN0aW9uIG9uY2UoZW1pdHRlciwgbmFtZSwgb3B0aW9ucykge1xuICAgIG9wdGlvbnM9IHJlc29sdmVPcHRpb25zKG9wdGlvbnMsIHtcbiAgICAgIFByb21pc2U6IFByb21pc2UsXG4gICAgICB0aW1lb3V0OiAwLFxuICAgICAgb3ZlcmxvYWQ6IGZhbHNlXG4gICAgfSwge1xuICAgICAgUHJvbWlzZTogY29uc3RydWN0b3JSZWR1Y2VyXG4gICAgfSk7XG5cbiAgICB2YXIgX1Byb21pc2U9IG9wdGlvbnMuUHJvbWlzZTtcblxuICAgIHJldHVybiBtYWtlQ2FuY2VsYWJsZVByb21pc2UoX1Byb21pc2UsIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCwgb25DYW5jZWwpe1xuICAgICAgdmFyIGhhbmRsZXI7XG4gICAgICBpZiAodHlwZW9mIGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBoYW5kbGVyPSAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJlc29sdmUodG9BcnJheS5hcHBseShudWxsLCBhcmd1bWVudHMpKTtcbiAgICAgICAgfTtcblxuICAgICAgICBvbkNhbmNlbChmdW5jdGlvbigpe1xuICAgICAgICAgIGVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBoYW5kbGVyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGhhbmRsZXIsXG4gICAgICAgICAgICB7b25jZTogdHJ1ZX1cbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGVycm9yTGlzdGVuZXIgJiYgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBlcnJvckxpc3RlbmVyKTtcbiAgICAgICAgcmVzb2x2ZSh0b0FycmF5LmFwcGx5KG51bGwsIGFyZ3VtZW50cykpO1xuICAgICAgfTtcblxuICAgICAgdmFyIGVycm9yTGlzdGVuZXI7XG5cbiAgICAgIGlmIChuYW1lICE9PSAnZXJyb3InKSB7XG4gICAgICAgIGVycm9yTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXJyKXtcbiAgICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKG5hbWUsIGV2ZW50TGlzdGVuZXIpO1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGVtaXR0ZXIub25jZSgnZXJyb3InLCBlcnJvckxpc3RlbmVyKTtcbiAgICAgIH1cblxuICAgICAgb25DYW5jZWwoZnVuY3Rpb24oKXtcbiAgICAgICAgZXJyb3JMaXN0ZW5lciAmJiBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKG5hbWUsIGV2ZW50TGlzdGVuZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIGVtaXR0ZXIub25jZShuYW1lLCBldmVudExpc3RlbmVyKTtcbiAgICB9LCB7XG4gICAgICB0aW1lb3V0OiBvcHRpb25zLnRpbWVvdXQsXG4gICAgICBvdmVybG9hZDogb3B0aW9ucy5vdmVybG9hZFxuICAgIH0pO1xuICB9XG5cbiAgdmFyIHByb3RvdHlwZT0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFdmVudEVtaXR0ZXIsIHtcbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzOiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHByb3RvdHlwZS5fbWF4TGlzdGVuZXJzO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXIuaXNOYU4obikpIHtcbiAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXInKVxuICAgICAgICB9XG4gICAgICAgIHByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gbjtcbiAgICAgIH0sXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgfSxcbiAgICBvbmNlOiB7XG4gICAgICB2YWx1ZTogb25jZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhwcm90b3R5cGUsIHtcbiAgICAgIF9tYXhMaXN0ZW5lcnM6IHtcbiAgICAgICAgICB2YWx1ZTogZGVmYXVsdE1heExpc3RlbmVycyxcbiAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH0sXG4gICAgICBfb2JzZXJ2ZXJzOiB7dmFsdWU6IG51bGwsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWV9XG4gIH0pO1xuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBFdmVudEVtaXR0ZXI7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbiAgfVxuICBlbHNlIHtcbiAgICAvLyBnbG9iYWwgZm9yIGFueSBraW5kIG9mIGVudmlyb25tZW50LlxuICAgIHZhciBfZ2xvYmFsPSBuZXcgRnVuY3Rpb24oJycsJ3JldHVybiB0aGlzJykoKTtcbiAgICBfZ2xvYmFsLkV2ZW50RW1pdHRlcjIgPSBFdmVudEVtaXR0ZXI7XG4gIH1cbn0oKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/eventemitter2/lib/eventemitter2.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lodash.isequal/index.js":
/*!**********************************************!*\
  !*** ./node_modules/lodash.isequal/index.js ***!
  \**********************************************/
/***/ (function(module, exports, __webpack_require__) {

eval(__webpack_require__.ts("/* module decorator */ module = __webpack_require__.nmd(module);\n/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof __webpack_require__.g == 'object' && __webpack_require__.g && __webpack_require__.g.Object === Object && __webpack_require__.g;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports =  true && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && \"object\" == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sb2Rhc2guaXNlcXVhbC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7O0FBRXBDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0IscUJBQU0sZ0JBQWdCLHFCQUFNLElBQUkscUJBQU0sc0JBQXNCLHFCQUFNOztBQUUxRjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsS0FBMEI7O0FBRTVDO0FBQ0EsZ0NBQWdDLFFBQWE7O0FBRTdDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFVBQVU7QUFDckIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixhQUFhLE9BQU87QUFD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QVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFVBQVU7QUFDckIsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsUUFBUTtBQUNuQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsV0FBVyxVQUFVO0FBQ3JCLFdBQVcsVUFBVTtBQUNyQixXQUFXLFFBQVE7QUFDbkIsYUFBYSxTQUFTO0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9sb2Rhc2guaXNlcXVhbC9pbmRleC5qcz80ZDY3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pzLmZvdW5kYXRpb24vPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBzaXplIHRvIGVuYWJsZSBsYXJnZSBhcnJheSBvcHRpbWl6YXRpb25zLiAqL1xudmFyIExBUkdFX0FSUkFZX1NJWkUgPSAyMDA7XG5cbi8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cbnZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgdmFsdWUgY29tcGFyaXNvbnMuICovXG52YXIgQ09NUEFSRV9QQVJUSUFMX0ZMQUcgPSAxLFxuICAgIENPTVBBUkVfVU5PUkRFUkVEX0ZMQUcgPSAyO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgYXN5bmNUYWcgPSAnW29iamVjdCBBc3luY0Z1bmN0aW9uXScsXG4gICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBnZW5UYWcgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nLFxuICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgIG51bGxUYWcgPSAnW29iamVjdCBOdWxsXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcHJvbWlzZVRhZyA9ICdbb2JqZWN0IFByb21pc2VdJyxcbiAgICBwcm94eVRhZyA9ICdbb2JqZWN0IFByb3h5XScsXG4gICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG4gICAgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXScsXG4gICAgdW5kZWZpbmVkVGFnID0gJ1tvYmplY3QgVW5kZWZpbmVkXScsXG4gICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblxudmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcbiAgICBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XScsXG4gICAgZmxvYXQzMlRhZyA9ICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgIGZsb2F0NjRUYWcgPSAnW29iamVjdCBGbG9hdDY0QXJyYXldJyxcbiAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsXG4gICAgaW50MTZUYWcgPSAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgaW50MzJUYWcgPSAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgdWludDhDbGFtcGVkVGFnID0gJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICB1aW50MTZUYWcgPSAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7XG5cbi8qKlxuICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYFxuICogW3N5bnRheCBjaGFyYWN0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1wYXR0ZXJucykuXG4gKi9cbnZhciByZVJlZ0V4cENoYXIgPSAvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpKS4gKi9cbnZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG52YXIgcmVJc1VpbnQgPSAvXig/OjB8WzEtOV1cXGQqKSQvO1xuXG4vKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBvZiB0eXBlZCBhcnJheXMuICovXG52YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbnR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xudHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZGF0YVZpZXdUYWddID0gdHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID0gdHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPVxudHlwZWRBcnJheVRhZ3NbbWFwVGFnXSA9IHR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPVxudHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPVxudHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPVxudHlwZWRBcnJheVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGV4cG9ydHNgLiAqL1xudmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYG1vZHVsZWAuICovXG52YXIgZnJlZU1vZHVsZSA9IGZyZWVFeHBvcnRzICYmIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXG4vKiogRGV0ZWN0IHRoZSBwb3B1bGFyIENvbW1vbkpTIGV4dGVuc2lvbiBgbW9kdWxlLmV4cG9ydHNgLiAqL1xudmFyIG1vZHVsZUV4cG9ydHMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHM7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgcHJvY2Vzc2AgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVQcm9jZXNzID0gbW9kdWxlRXhwb3J0cyAmJiBmcmVlR2xvYmFsLnByb2Nlc3M7XG5cbi8qKiBVc2VkIHRvIGFjY2VzcyBmYXN0ZXIgTm9kZS5qcyBoZWxwZXJzLiAqL1xudmFyIG5vZGVVdGlsID0gKGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIHJldHVybiBmcmVlUHJvY2VzcyAmJiBmcmVlUHJvY2Vzcy5iaW5kaW5nICYmIGZyZWVQcm9jZXNzLmJpbmRpbmcoJ3V0aWwnKTtcbiAgfSBjYXRjaCAoZSkge31cbn0oKSk7XG5cbi8qIE5vZGUuanMgaGVscGVyIHJlZmVyZW5jZXMuICovXG52YXIgbm9kZUlzVHlwZWRBcnJheSA9IG5vZGVVdGlsICYmIG5vZGVVdGlsLmlzVHlwZWRBcnJheTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uZmlsdGVyYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3JcbiAqIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmlsdGVyZWQgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGFycmF5RmlsdGVyKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aCxcbiAgICAgIHJlc0luZGV4ID0gMCxcbiAgICAgIHJlc3VsdCA9IFtdO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJlc3VsdFtyZXNJbmRleCsrXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEFwcGVuZHMgdGhlIGVsZW1lbnRzIG9mIGB2YWx1ZXNgIHRvIGBhcnJheWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBhcHBlbmQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlQdXNoKGFycmF5LCB2YWx1ZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSB2YWx1ZXMubGVuZ3RoLFxuICAgICAgb2Zmc2V0ID0gYXJyYXkubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgYXJyYXlbb2Zmc2V0ICsgaW5kZXhdID0gdmFsdWVzW2luZGV4XTtcbiAgfVxuICByZXR1cm4gYXJyYXk7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnNvbWVgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZVxuICogc2hvcnRoYW5kcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBhcnJheVNvbWUoYXJyYXksIHByZWRpY2F0ZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udGltZXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kc1xuICogb3IgbWF4IGFycmF5IGxlbmd0aCBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaW52b2tlIGBpdGVyYXRlZWAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBiYXNlVGltZXMobiwgaXRlcmF0ZWUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShuKTtcblxuICB3aGlsZSAoKytpbmRleCA8IG4pIHtcbiAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udW5hcnlgIHdpdGhvdXQgc3VwcG9ydCBmb3Igc3RvcmluZyBtZXRhZGF0YS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2FwIGFyZ3VtZW50cyBmb3IuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjYXBwZWQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VVbmFyeShmdW5jKSB7XG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBmdW5jKHZhbHVlKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBgY2FjaGVgIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBjYWNoZSBUaGUgY2FjaGUgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gY2FjaGVIYXMoY2FjaGUsIGtleSkge1xuICByZXR1cm4gY2FjaGUuaGFzKGtleSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGdldFZhbHVlKG9iamVjdCwga2V5KSB7XG4gIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGBtYXBgIHRvIGl0cyBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgVGhlIG1hcCB0byBjb252ZXJ0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuXG4gKi9cbmZ1bmN0aW9uIG1hcFRvQXJyYXkobWFwKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobWFwLnNpemUpO1xuXG4gIG1hcC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICByZXN1bHRbKytpbmRleF0gPSBba2V5LCB2YWx1ZV07XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB1bmFyeSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggaXRzIGFyZ3VtZW50IHRyYW5zZm9ybWVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgc2V0YCB0byBhbiBhcnJheSBvZiBpdHMgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gc2V0IFRoZSBzZXQgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBzZXRUb0FycmF5KHNldCkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KHNldC5zaXplKTtcblxuICBzZXQuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJlc3VsdFsrK2luZGV4XSA9IHZhbHVlO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsXG4gICAgZnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlLFxuICAgIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG92ZXJyZWFjaGluZyBjb3JlLWpzIHNoaW1zLiAqL1xudmFyIGNvcmVKc0RhdGEgPSByb290WydfX2NvcmUtanNfc2hhcmVkX18nXTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG1ldGhvZHMgbWFzcXVlcmFkaW5nIGFzIG5hdGl2ZS4gKi9cbnZhciBtYXNrU3JjS2V5ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgdWlkID0gL1teLl0rJC8uZXhlYyhjb3JlSnNEYXRhICYmIGNvcmVKc0RhdGEua2V5cyAmJiBjb3JlSnNEYXRhLmtleXMuSUVfUFJPVE8gfHwgJycpO1xuICByZXR1cm4gdWlkID8gKCdTeW1ib2woc3JjKV8xLicgKyB1aWQpIDogJyc7XG59KCkpO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cbnZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gIGZ1bmNUb1N0cmluZy5jYWxsKGhhc093blByb3BlcnR5KS5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgJ1xcXFwkJicpXG4gIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuKTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgQnVmZmVyID0gbW9kdWxlRXhwb3J0cyA/IHJvb3QuQnVmZmVyIDogdW5kZWZpbmVkLFxuICAgIFN5bWJvbCA9IHJvb3QuU3ltYm9sLFxuICAgIFVpbnQ4QXJyYXkgPSByb290LlVpbnQ4QXJyYXksXG4gICAgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZSxcbiAgICBzcGxpY2UgPSBhcnJheVByb3RvLnNwbGljZSxcbiAgICBzeW1Ub1N0cmluZ1RhZyA9IFN5bWJvbCA/IFN5bWJvbC50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUdldFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLFxuICAgIG5hdGl2ZUlzQnVmZmVyID0gQnVmZmVyID8gQnVmZmVyLmlzQnVmZmVyIDogdW5kZWZpbmVkLFxuICAgIG5hdGl2ZUtleXMgPSBvdmVyQXJnKE9iamVjdC5rZXlzLCBPYmplY3QpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgRGF0YVZpZXcgPSBnZXROYXRpdmUocm9vdCwgJ0RhdGFWaWV3JyksXG4gICAgTWFwID0gZ2V0TmF0aXZlKHJvb3QsICdNYXAnKSxcbiAgICBQcm9taXNlID0gZ2V0TmF0aXZlKHJvb3QsICdQcm9taXNlJyksXG4gICAgU2V0ID0gZ2V0TmF0aXZlKHJvb3QsICdTZXQnKSxcbiAgICBXZWFrTWFwID0gZ2V0TmF0aXZlKHJvb3QsICdXZWFrTWFwJyksXG4gICAgbmF0aXZlQ3JlYXRlID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2NyZWF0ZScpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgbWFwcywgc2V0cywgYW5kIHdlYWttYXBzLiAqL1xudmFyIGRhdGFWaWV3Q3RvclN0cmluZyA9IHRvU291cmNlKERhdGFWaWV3KSxcbiAgICBtYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoTWFwKSxcbiAgICBwcm9taXNlQ3RvclN0cmluZyA9IHRvU291cmNlKFByb21pc2UpLFxuICAgIHNldEN0b3JTdHJpbmcgPSB0b1NvdXJjZShTZXQpLFxuICAgIHdlYWtNYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoV2Vha01hcCk7XG5cbi8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xudmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcbiAgICBzeW1ib2xWYWx1ZU9mID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by52YWx1ZU9mIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoYXNoIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gSGFzaChlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgaGFzaC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKi9cbmZ1bmN0aW9uIGhhc2hDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IG5hdGl2ZUNyZWF0ZSA/IG5hdGl2ZUNyZWF0ZShudWxsKSA6IHt9O1xuICB0aGlzLnNpemUgPSAwO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBoYXNoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge09iamVjdH0gaGFzaCBUaGUgaGFzaCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzaERlbGV0ZShrZXkpIHtcbiAgdmFyIHJlc3VsdCA9IHRoaXMuaGFzKGtleSkgJiYgZGVsZXRlIHRoaXMuX19kYXRhX19ba2V5XTtcbiAgdGhpcy5zaXplIC09IHJlc3VsdCA/IDEgOiAwO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGhhc2ggdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gaGFzaEdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBpZiAobmF0aXZlQ3JlYXRlKSB7XG4gICAgdmFyIHJlc3VsdCA9IGRhdGFba2V5XTtcbiAgICByZXR1cm4gcmVzdWx0ID09PSBIQVNIX1VOREVGSU5FRCA/IHVuZGVmaW5lZCA6IHJlc3VsdDtcbiAgfVxuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpID8gZGF0YVtrZXldIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGhhc2ggdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgcmV0dXJuIG5hdGl2ZUNyZWF0ZSA/IChkYXRhW2tleV0gIT09IHVuZGVmaW5lZCkgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSk7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgaGFzaCBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGhhc2ggaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGhhc2hTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIHRoaXMuc2l6ZSArPSB0aGlzLmhhcyhrZXkpID8gMCA6IDE7XG4gIGRhdGFba2V5XSA9IChuYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgPyBIQVNIX1VOREVGSU5FRCA6IHZhbHVlO1xuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYEhhc2hgLlxuSGFzaC5wcm90b3R5cGUuY2xlYXIgPSBoYXNoQ2xlYXI7XG5IYXNoLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBoYXNoRGVsZXRlO1xuSGFzaC5wcm90b3R5cGUuZ2V0ID0gaGFzaEdldDtcbkhhc2gucHJvdG90eXBlLmhhcyA9IGhhc2hIYXM7XG5IYXNoLnByb3RvdHlwZS5zZXQgPSBoYXNoU2V0O1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gbGlzdCBjYWNoZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIExpc3RDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbGlzdCBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBbXTtcbiAgdGhpcy5zaXplID0gMDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbGlzdCBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlRGVsZXRlKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIGlmIChpbmRleCA8IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGxhc3RJbmRleCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkge1xuICAgIGRhdGEucG9wKCk7XG4gIH0gZWxzZSB7XG4gICAgc3BsaWNlLmNhbGwoZGF0YSwgaW5kZXgsIDEpO1xuICB9XG4gIC0tdGhpcy5zaXplO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlR2V0KGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIHJldHVybiBpbmRleCA8IDAgPyB1bmRlZmluZWQgOiBkYXRhW2luZGV4XVsxXTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUhhcyhrZXkpIHtcbiAgcmV0dXJuIGFzc29jSW5kZXhPZih0aGlzLl9fZGF0YV9fLCBrZXkpID4gLTE7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbGlzdCBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgKyt0aGlzLnNpemU7XG4gICAgZGF0YS5wdXNoKFtrZXksIHZhbHVlXSk7XG4gIH0gZWxzZSB7XG4gICAgZGF0YVtpbmRleF1bMV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYExpc3RDYWNoZWAuXG5MaXN0Q2FjaGUucHJvdG90eXBlLmNsZWFyID0gbGlzdENhY2hlQ2xlYXI7XG5MaXN0Q2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IGxpc3RDYWNoZURlbGV0ZTtcbkxpc3RDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbGlzdENhY2hlR2V0O1xuTGlzdENhY2hlLnByb3RvdHlwZS5oYXMgPSBsaXN0Q2FjaGVIYXM7XG5MaXN0Q2FjaGUucHJvdG90eXBlLnNldCA9IGxpc3RDYWNoZVNldDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID09IG51bGwgPyAwIDogZW50cmllcy5sZW5ndGg7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBtYXAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHtcbiAgdGhpcy5zaXplID0gMDtcbiAgdGhpcy5fX2RhdGFfXyA9IHtcbiAgICAnaGFzaCc6IG5ldyBIYXNoLFxuICAgICdtYXAnOiBuZXcgKE1hcCB8fCBMaXN0Q2FjaGUpLFxuICAgICdzdHJpbmcnOiBuZXcgSGFzaFxuICB9O1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBtYXAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVEZWxldGUoa2V5KSB7XG4gIHZhciByZXN1bHQgPSBnZXRNYXBEYXRhKHRoaXMsIGtleSlbJ2RlbGV0ZSddKGtleSk7XG4gIHRoaXMuc2l6ZSAtPSByZXN1bHQgPyAxIDogMDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtYXAgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmdldChrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIG1hcCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlSGFzKGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmhhcyhrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIG1hcCBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBtYXAgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSBnZXRNYXBEYXRhKHRoaXMsIGtleSksXG4gICAgICBzaXplID0gZGF0YS5zaXplO1xuXG4gIGRhdGEuc2V0KGtleSwgdmFsdWUpO1xuICB0aGlzLnNpemUgKz0gZGF0YS5zaXplID09IHNpemUgPyAwIDogMTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBNYXBDYWNoZWAuXG5NYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBtYXBDYWNoZUNsZWFyO1xuTWFwQ2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IG1hcENhY2hlRGVsZXRlO1xuTWFwQ2FjaGUucHJvdG90eXBlLmdldCA9IG1hcENhY2hlR2V0O1xuTWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcENhY2hlSGFzO1xuTWFwQ2FjaGUucHJvdG90eXBlLnNldCA9IG1hcENhY2hlU2V0O1xuXG4vKipcbiAqXG4gKiBDcmVhdGVzIGFuIGFycmF5IGNhY2hlIG9iamVjdCB0byBzdG9yZSB1bmlxdWUgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIFNldENhY2hlKHZhbHVlcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHZhbHVlcyA9PSBudWxsID8gMCA6IHZhbHVlcy5sZW5ndGg7XG5cbiAgdGhpcy5fX2RhdGFfXyA9IG5ldyBNYXBDYWNoZTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB0aGlzLmFkZCh2YWx1ZXNbaW5kZXhdKTtcbiAgfVxufVxuXG4vKipcbiAqIEFkZHMgYHZhbHVlYCB0byB0aGUgYXJyYXkgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGFkZFxuICogQG1lbWJlck9mIFNldENhY2hlXG4gKiBAYWxpYXMgcHVzaFxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2FjaGUuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gc2V0Q2FjaGVBZGQodmFsdWUpIHtcbiAgdGhpcy5fX2RhdGFfXy5zZXQodmFsdWUsIEhBU0hfVU5ERUZJTkVEKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgaW4gdGhlIGFycmF5IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZm91bmQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc2V0Q2FjaGVIYXModmFsdWUpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKHZhbHVlKTtcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYFNldENhY2hlYC5cblNldENhY2hlLnByb3RvdHlwZS5hZGQgPSBTZXRDYWNoZS5wcm90b3R5cGUucHVzaCA9IHNldENhY2hlQWRkO1xuU2V0Q2FjaGUucHJvdG90eXBlLmhhcyA9IHNldENhY2hlSGFzO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBzdGFjayBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBTdGFjayhlbnRyaWVzKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGUoZW50cmllcyk7XG4gIHRoaXMuc2l6ZSA9IGRhdGEuc2l6ZTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBzdGFjay5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBTdGFja1xuICovXG5mdW5jdGlvbiBzdGFja0NsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gbmV3IExpc3RDYWNoZTtcbiAgdGhpcy5zaXplID0gMDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgc3RhY2suXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc3RhY2tEZWxldGUoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIHJlc3VsdCA9IGRhdGFbJ2RlbGV0ZSddKGtleSk7XG5cbiAgdGhpcy5zaXplID0gZGF0YS5zaXplO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBzdGFja0dldChrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGtleSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgc3RhY2sgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBzdGFja0hhcyhrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKGtleSk7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgc3RhY2sgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgc3RhY2sgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBpZiAoZGF0YSBpbnN0YW5jZW9mIExpc3RDYWNoZSkge1xuICAgIHZhciBwYWlycyA9IGRhdGEuX19kYXRhX187XG4gICAgaWYgKCFNYXAgfHwgKHBhaXJzLmxlbmd0aCA8IExBUkdFX0FSUkFZX1NJWkUgLSAxKSkge1xuICAgICAgcGFpcnMucHVzaChba2V5LCB2YWx1ZV0pO1xuICAgICAgdGhpcy5zaXplID0gKytkYXRhLnNpemU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGF0YSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGUocGFpcnMpO1xuICB9XG4gIGRhdGEuc2V0KGtleSwgdmFsdWUpO1xuICB0aGlzLnNpemUgPSBkYXRhLnNpemU7XG4gIHJldHVybiB0aGlzO1xufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgU3RhY2tgLlxuU3RhY2sucHJvdG90eXBlLmNsZWFyID0gc3RhY2tDbGVhcjtcblN0YWNrLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBzdGFja0RlbGV0ZTtcblN0YWNrLnByb3RvdHlwZS5nZXQgPSBzdGFja0dldDtcblN0YWNrLnByb3RvdHlwZS5oYXMgPSBzdGFja0hhcztcblN0YWNrLnByb3RvdHlwZS5zZXQgPSBzdGFja1NldDtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIHRoZSBhcnJheS1saWtlIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtib29sZWFufSBpbmhlcml0ZWQgU3BlY2lmeSByZXR1cm5pbmcgaW5oZXJpdGVkIHByb3BlcnR5IG5hbWVzLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYXJyYXlMaWtlS2V5cyh2YWx1ZSwgaW5oZXJpdGVkKSB7XG4gIHZhciBpc0FyciA9IGlzQXJyYXkodmFsdWUpLFxuICAgICAgaXNBcmcgPSAhaXNBcnIgJiYgaXNBcmd1bWVudHModmFsdWUpLFxuICAgICAgaXNCdWZmID0gIWlzQXJyICYmICFpc0FyZyAmJiBpc0J1ZmZlcih2YWx1ZSksXG4gICAgICBpc1R5cGUgPSAhaXNBcnIgJiYgIWlzQXJnICYmICFpc0J1ZmYgJiYgaXNUeXBlZEFycmF5KHZhbHVlKSxcbiAgICAgIHNraXBJbmRleGVzID0gaXNBcnIgfHwgaXNBcmcgfHwgaXNCdWZmIHx8IGlzVHlwZSxcbiAgICAgIHJlc3VsdCA9IHNraXBJbmRleGVzID8gYmFzZVRpbWVzKHZhbHVlLmxlbmd0aCwgU3RyaW5nKSA6IFtdLFxuICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICBpZiAoKGluaGVyaXRlZCB8fCBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrZXkpKSAmJlxuICAgICAgICAhKHNraXBJbmRleGVzICYmIChcbiAgICAgICAgICAgLy8gU2FmYXJpIDkgaGFzIGVudW1lcmFibGUgYGFyZ3VtZW50cy5sZW5ndGhgIGluIHN0cmljdCBtb2RlLlxuICAgICAgICAgICBrZXkgPT0gJ2xlbmd0aCcgfHxcbiAgICAgICAgICAgLy8gTm9kZS5qcyAwLjEwIGhhcyBlbnVtZXJhYmxlIG5vbi1pbmRleCBwcm9wZXJ0aWVzIG9uIGJ1ZmZlcnMuXG4gICAgICAgICAgIChpc0J1ZmYgJiYgKGtleSA9PSAnb2Zmc2V0JyB8fCBrZXkgPT0gJ3BhcmVudCcpKSB8fFxuICAgICAgICAgICAvLyBQaGFudG9tSlMgMiBoYXMgZW51bWVyYWJsZSBub24taW5kZXggcHJvcGVydGllcyBvbiB0eXBlZCBhcnJheXMuXG4gICAgICAgICAgIChpc1R5cGUgJiYgKGtleSA9PSAnYnVmZmVyJyB8fCBrZXkgPT0gJ2J5dGVMZW5ndGgnIHx8IGtleSA9PSAnYnl0ZU9mZnNldCcpKSB8fFxuICAgICAgICAgICAvLyBTa2lwIGluZGV4IHByb3BlcnRpZXMuXG4gICAgICAgICAgIGlzSW5kZXgoa2V5LCBsZW5ndGgpXG4gICAgICAgICkpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBga2V5YCBpcyBmb3VuZCBpbiBgYXJyYXlgIG9mIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICovXG5mdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksIGtleSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICBpZiAoZXEoYXJyYXlbbGVuZ3RoXVswXSwga2V5KSkge1xuICAgICAgcmV0dXJuIGxlbmd0aDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRBbGxLZXlzYCBhbmQgYGdldEFsbEtleXNJbmAgd2hpY2ggdXNlc1xuICogYGtleXNGdW5jYCBhbmQgYHN5bWJvbHNGdW5jYCB0byBnZXQgdGhlIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgYW5kXG4gKiBzeW1ib2xzIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBrZXlzIG9mIGBvYmplY3RgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc3ltYm9sc0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUgc3ltYm9scyBvZiBgb2JqZWN0YC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMgYW5kIHN5bWJvbHMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VHZXRBbGxLZXlzKG9iamVjdCwga2V5c0Z1bmMsIHN5bWJvbHNGdW5jKSB7XG4gIHZhciByZXN1bHQgPSBrZXlzRnVuYyhvYmplY3QpO1xuICByZXR1cm4gaXNBcnJheShvYmplY3QpID8gcmVzdWx0IDogYXJyYXlQdXNoKHJlc3VsdCwgc3ltYm9sc0Z1bmMob2JqZWN0KSk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldFRhZ2Agd2l0aG91dCBmYWxsYmFja3MgZm9yIGJ1Z2d5IGVudmlyb25tZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0VGFnKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWRUYWcgOiBudWxsVGFnO1xuICB9XG4gIHJldHVybiAoc3ltVG9TdHJpbmdUYWcgJiYgc3ltVG9TdHJpbmdUYWcgaW4gT2JqZWN0KHZhbHVlKSlcbiAgICA/IGdldFJhd1RhZyh2YWx1ZSlcbiAgICA6IG9iamVjdFRvU3RyaW5nKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0FyZ3VtZW50c2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuICovXG5mdW5jdGlvbiBiYXNlSXNBcmd1bWVudHModmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgYmFzZUdldFRhZyh2YWx1ZSkgPT0gYXJnc1RhZztcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aGljaCBzdXBwb3J0cyBwYXJ0aWFsIGNvbXBhcmlzb25zXG4gKiBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy5cbiAqICAxIC0gVW5vcmRlcmVkIGNvbXBhcmlzb25cbiAqICAyIC0gUGFydGlhbCBjb21wYXJpc29uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaykge1xuICBpZiAodmFsdWUgPT09IG90aGVyKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAoIWlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG4gIH1cbiAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGJhc2VJc0VxdWFsLCBzdGFjayk7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHtcbiAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcbiAgICAgIG9ialRhZyA9IG9iaklzQXJyID8gYXJyYXlUYWcgOiBnZXRUYWcob2JqZWN0KSxcbiAgICAgIG90aFRhZyA9IG90aElzQXJyID8gYXJyYXlUYWcgOiBnZXRUYWcob3RoZXIpO1xuXG4gIG9ialRhZyA9IG9ialRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb2JqVGFnO1xuICBvdGhUYWcgPSBvdGhUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG90aFRhZztcblxuICB2YXIgb2JqSXNPYmogPSBvYmpUYWcgPT0gb2JqZWN0VGFnLFxuICAgICAgb3RoSXNPYmogPSBvdGhUYWcgPT0gb2JqZWN0VGFnLFxuICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09IG90aFRhZztcblxuICBpZiAoaXNTYW1lVGFnICYmIGlzQnVmZmVyKG9iamVjdCkpIHtcbiAgICBpZiAoIWlzQnVmZmVyKG90aGVyKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBvYmpJc0FyciA9IHRydWU7XG4gICAgb2JqSXNPYmogPSBmYWxzZTtcbiAgfVxuICBpZiAoaXNTYW1lVGFnICYmICFvYmpJc09iaikge1xuICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gICAgcmV0dXJuIChvYmpJc0FyciB8fCBpc1R5cGVkQXJyYXkob2JqZWN0KSlcbiAgICAgID8gZXF1YWxBcnJheXMob2JqZWN0LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaylcbiAgICAgIDogZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCBvYmpUYWcsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spO1xuICB9XG4gIGlmICghKGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRykpIHtcbiAgICB2YXIgb2JqSXNXcmFwcGVkID0gb2JqSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdfX3dyYXBwZWRfXycpLFxuICAgICAgICBvdGhJc1dyYXBwZWQgPSBvdGhJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCAnX193cmFwcGVkX18nKTtcblxuICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG4gICAgICB2YXIgb2JqVW53cmFwcGVkID0gb2JqSXNXcmFwcGVkID8gb2JqZWN0LnZhbHVlKCkgOiBvYmplY3QsXG4gICAgICAgICAgb3RoVW53cmFwcGVkID0gb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyO1xuXG4gICAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpVbndyYXBwZWQsIG90aFVud3JhcHBlZCwgYml0bWFzaywgY3VzdG9taXplciwgc3RhY2spO1xuICAgIH1cbiAgfVxuICBpZiAoIWlzU2FtZVRhZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICByZXR1cm4gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTmF0aXZlYCB3aXRob3V0IGJhZCBzaGltIGNoZWNrcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbixcbiAqICBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc05hdGl2ZSh2YWx1ZSkge1xuICBpZiAoIWlzT2JqZWN0KHZhbHVlKSB8fCBpc01hc2tlZCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHBhdHRlcm4gPSBpc0Z1bmN0aW9uKHZhbHVlKSA/IHJlSXNOYXRpdmUgOiByZUlzSG9zdEN0b3I7XG4gIHJldHVybiBwYXR0ZXJuLnRlc3QodG9Tb3VyY2UodmFsdWUpKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc1R5cGVkQXJyYXlgIHdpdGhvdXQgTm9kZS5qcyBvcHRpbWl6YXRpb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdHlwZWQgYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzVHlwZWRBcnJheSh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJlxuICAgIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tiYXNlR2V0VGFnKHZhbHVlKV07XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c2Agd2hpY2ggZG9lc24ndCB0cmVhdCBzcGFyc2UgYXJyYXlzIGFzIGRlbnNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBiYXNlS2V5cyhvYmplY3QpIHtcbiAgaWYgKCFpc1Byb3RvdHlwZShvYmplY3QpKSB7XG4gICAgcmV0dXJuIG5hdGl2ZUtleXMob2JqZWN0KTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gW107XG4gIGZvciAodmFyIGtleSBpbiBPYmplY3Qob2JqZWN0KSkge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSAmJiBrZXkgIT0gJ2NvbnN0cnVjdG9yJykge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGFycmF5cyB3aXRoIHN1cHBvcnQgZm9yXG4gKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBhcnJheWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJyYXlzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaykge1xuICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIENPTVBBUkVfUEFSVElBTF9GTEFHLFxuICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoZXIubGVuZ3RoO1xuXG4gIGlmIChhcnJMZW5ndGggIT0gb3RoTGVuZ3RoICYmICEoaXNQYXJ0aWFsICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChhcnJheSk7XG4gIGlmIChzdGFja2VkICYmIHN0YWNrLmdldChvdGhlcikpIHtcbiAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgfVxuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IHRydWUsXG4gICAgICBzZWVuID0gKGJpdG1hc2sgJiBDT01QQVJFX1VOT1JERVJFRF9GTEFHKSA/IG5ldyBTZXRDYWNoZSA6IHVuZGVmaW5lZDtcblxuICBzdGFjay5zZXQoYXJyYXksIG90aGVyKTtcbiAgc3RhY2suc2V0KG90aGVyLCBhcnJheSk7XG5cbiAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF07XG5cbiAgICBpZiAoY3VzdG9taXplcikge1xuICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG4gICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgYXJyVmFsdWUsIGluZGV4LCBvdGhlciwgYXJyYXksIHN0YWNrKVxuICAgICAgICA6IGN1c3RvbWl6ZXIoYXJyVmFsdWUsIG90aFZhbHVlLCBpbmRleCwgYXJyYXksIG90aGVyLCBzdGFjayk7XG4gICAgfVxuICAgIGlmIChjb21wYXJlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoY29tcGFyZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGlmIChzZWVuKSB7XG4gICAgICBpZiAoIWFycmF5U29tZShvdGhlciwgZnVuY3Rpb24ob3RoVmFsdWUsIG90aEluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIWNhY2hlSGFzKHNlZW4sIG90aEluZGV4KSAmJlxuICAgICAgICAgICAgICAgIChhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgYml0bWFzaywgY3VzdG9taXplciwgc3RhY2spKSkge1xuICAgICAgICAgICAgICByZXR1cm4gc2Vlbi5wdXNoKG90aEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSkge1xuICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghKFxuICAgICAgICAgIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fFxuICAgICAgICAgICAgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgYml0bWFzaywgY3VzdG9taXplciwgc3RhY2spXG4gICAgICAgICkpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHN0YWNrWydkZWxldGUnXShhcnJheSk7XG4gIHN0YWNrWydkZWxldGUnXShvdGhlcik7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBjb21wYXJpbmcgb2JqZWN0cyBvZlxuICogdGhlIHNhbWUgYHRvU3RyaW5nVGFnYC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBvbmx5IHN1cHBvcnRzIGNvbXBhcmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG4gKiBgQm9vbGVhbmAsIGBEYXRlYCwgYEVycm9yYCwgYE51bWJlcmAsIGBSZWdFeHBgLCBvciBgU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUaGUgYHRvU3RyaW5nVGFnYCBvZiB0aGUgb2JqZWN0cyB0byBjb21wYXJlLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgdGFnLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKSB7XG4gIHN3aXRjaCAodGFnKSB7XG4gICAgY2FzZSBkYXRhVmlld1RhZzpcbiAgICAgIGlmICgob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCkgfHxcbiAgICAgICAgICAob2JqZWN0LmJ5dGVPZmZzZXQgIT0gb3RoZXIuYnl0ZU9mZnNldCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgb2JqZWN0ID0gb2JqZWN0LmJ1ZmZlcjtcbiAgICAgIG90aGVyID0gb3RoZXIuYnVmZmVyO1xuXG4gICAgY2FzZSBhcnJheUJ1ZmZlclRhZzpcbiAgICAgIGlmICgob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCkgfHxcbiAgICAgICAgICAhZXF1YWxGdW5jKG5ldyBVaW50OEFycmF5KG9iamVjdCksIG5ldyBVaW50OEFycmF5KG90aGVyKSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICBjYXNlIGJvb2xUYWc6XG4gICAgY2FzZSBkYXRlVGFnOlxuICAgIGNhc2UgbnVtYmVyVGFnOlxuICAgICAgLy8gQ29lcmNlIGJvb2xlYW5zIHRvIGAxYCBvciBgMGAgYW5kIGRhdGVzIHRvIG1pbGxpc2Vjb25kcy5cbiAgICAgIC8vIEludmFsaWQgZGF0ZXMgYXJlIGNvZXJjZWQgdG8gYE5hTmAuXG4gICAgICByZXR1cm4gZXEoK29iamVjdCwgK290aGVyKTtcblxuICAgIGNhc2UgZXJyb3JUYWc6XG4gICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO1xuXG4gICAgY2FzZSByZWdleHBUYWc6XG4gICAgY2FzZSBzdHJpbmdUYWc6XG4gICAgICAvLyBDb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIGFuZCB0cmVhdCBzdHJpbmdzLCBwcmltaXRpdmVzIGFuZCBvYmplY3RzLFxuICAgICAgLy8gYXMgZXF1YWwuIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcmVnZXhwLnByb3RvdHlwZS50b3N0cmluZ1xuICAgICAgLy8gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgIHJldHVybiBvYmplY3QgPT0gKG90aGVyICsgJycpO1xuXG4gICAgY2FzZSBtYXBUYWc6XG4gICAgICB2YXIgY29udmVydCA9IG1hcFRvQXJyYXk7XG5cbiAgICBjYXNlIHNldFRhZzpcbiAgICAgIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgQ09NUEFSRV9QQVJUSUFMX0ZMQUc7XG4gICAgICBjb252ZXJ0IHx8IChjb252ZXJ0ID0gc2V0VG9BcnJheSk7XG5cbiAgICAgIGlmIChvYmplY3Quc2l6ZSAhPSBvdGhlci5zaXplICYmICFpc1BhcnRpYWwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICAgICAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTtcbiAgICAgIGlmIChzdGFja2VkKSB7XG4gICAgICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuICAgICAgfVxuICAgICAgYml0bWFzayB8PSBDT01QQVJFX1VOT1JERVJFRF9GTEFHO1xuXG4gICAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTtcbiAgICAgIHZhciByZXN1bHQgPSBlcXVhbEFycmF5cyhjb252ZXJ0KG9iamVjdCksIGNvbnZlcnQob3RoZXIpLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKTtcbiAgICAgIHN0YWNrWydkZWxldGUnXShvYmplY3QpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcblxuICAgIGNhc2Ugc3ltYm9sVGFnOlxuICAgICAgaWYgKHN5bWJvbFZhbHVlT2YpIHtcbiAgICAgICAgcmV0dXJuIHN5bWJvbFZhbHVlT2YuY2FsbChvYmplY3QpID09IHN5bWJvbFZhbHVlT2YuY2FsbChvdGhlcik7XG4gICAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3Igb2JqZWN0cyB3aXRoIHN1cHBvcnQgZm9yXG4gKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaykge1xuICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIENPTVBBUkVfUEFSVElBTF9GTEFHLFxuICAgICAgb2JqUHJvcHMgPSBnZXRBbGxLZXlzKG9iamVjdCksXG4gICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsXG4gICAgICBvdGhQcm9wcyA9IGdldEFsbEtleXMob3RoZXIpLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc1BhcnRpYWwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGluZGV4ID0gb2JqTGVuZ3RoO1xuICB3aGlsZSAoaW5kZXgtLSkge1xuICAgIHZhciBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgaWYgKCEoaXNQYXJ0aWFsID8ga2V5IGluIG90aGVyIDogaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwga2V5KSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChvYmplY3QpO1xuICBpZiAoc3RhY2tlZCAmJiBzdGFjay5nZXQob3RoZXIpKSB7XG4gICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IHRydWU7XG4gIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTtcbiAgc3RhY2suc2V0KG90aGVyLCBvYmplY3QpO1xuXG4gIHZhciBza2lwQ3RvciA9IGlzUGFydGlhbDtcbiAgd2hpbGUgKCsraW5kZXggPCBvYmpMZW5ndGgpIHtcbiAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJba2V5XTtcblxuICAgIGlmIChjdXN0b21pemVyKSB7XG4gICAgICB2YXIgY29tcGFyZWQgPSBpc1BhcnRpYWxcbiAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBvYmpWYWx1ZSwga2V5LCBvdGhlciwgb2JqZWN0LCBzdGFjaylcbiAgICAgICAgOiBjdXN0b21pemVyKG9ialZhbHVlLCBvdGhWYWx1ZSwga2V5LCBvYmplY3QsIG90aGVyLCBzdGFjayk7XG4gICAgfVxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGlmICghKGNvbXBhcmVkID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IChvYmpWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgYml0bWFzaywgY3VzdG9taXplciwgc3RhY2spKVxuICAgICAgICAgIDogY29tcGFyZWRcbiAgICAgICAgKSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgc2tpcEN0b3IgfHwgKHNraXBDdG9yID0ga2V5ID09ICdjb25zdHJ1Y3RvcicpO1xuICB9XG4gIGlmIChyZXN1bHQgJiYgIXNraXBDdG9yKSB7XG4gICAgdmFyIG9iakN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsXG4gICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3RvcjtcblxuICAgIC8vIE5vbiBgT2JqZWN0YCBvYmplY3QgaW5zdGFuY2VzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWFsLlxuICAgIGlmIChvYmpDdG9yICE9IG90aEN0b3IgJiZcbiAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG4gICAgICAgICEodHlwZW9mIG9iakN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvYmpDdG9yIGluc3RhbmNlb2Ygb2JqQ3RvciAmJlxuICAgICAgICAgIHR5cGVvZiBvdGhDdG9yID09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgc3RhY2tbJ2RlbGV0ZSddKG9iamVjdCk7XG4gIHN0YWNrWydkZWxldGUnXShvdGhlcik7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBhbmQgc3ltYm9scyBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcyBhbmQgc3ltYm9scy5cbiAqL1xuZnVuY3Rpb24gZ2V0QWxsS2V5cyhvYmplY3QpIHtcbiAgcmV0dXJuIGJhc2VHZXRBbGxLZXlzKG9iamVjdCwga2V5cywgZ2V0U3ltYm9scyk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgZGF0YSBmb3IgYG1hcGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgVGhlIG1hcCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHJlZmVyZW5jZSBrZXkuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWFwIGRhdGEuXG4gKi9cbmZ1bmN0aW9uIGdldE1hcERhdGEobWFwLCBrZXkpIHtcbiAgdmFyIGRhdGEgPSBtYXAuX19kYXRhX187XG4gIHJldHVybiBpc0tleWFibGUoa2V5KVxuICAgID8gZGF0YVt0eXBlb2Yga2V5ID09ICdzdHJpbmcnID8gJ3N0cmluZycgOiAnaGFzaCddXG4gICAgOiBkYXRhLm1hcDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG4gIHZhciB2YWx1ZSA9IGdldFZhbHVlKG9iamVjdCwga2V5KTtcbiAgcmV0dXJuIGJhc2VJc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VHZXRUYWdgIHdoaWNoIGlnbm9yZXMgYFN5bWJvbC50b1N0cmluZ1RhZ2AgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHJhdyBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBnZXRSYXdUYWcodmFsdWUpIHtcbiAgdmFyIGlzT3duID0gaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgc3ltVG9TdHJpbmdUYWcpLFxuICAgICAgdGFnID0gdmFsdWVbc3ltVG9TdHJpbmdUYWddO1xuXG4gIHRyeSB7XG4gICAgdmFsdWVbc3ltVG9TdHJpbmdUYWddID0gdW5kZWZpbmVkO1xuICAgIHZhciB1bm1hc2tlZCA9IHRydWU7XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgdmFyIHJlc3VsdCA9IG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICBpZiAodW5tYXNrZWQpIHtcbiAgICBpZiAoaXNPd24pIHtcbiAgICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHRhZztcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBzeW1ib2xzIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHN5bWJvbHMuXG4gKi9cbnZhciBnZXRTeW1ib2xzID0gIW5hdGl2ZUdldFN5bWJvbHMgPyBzdHViQXJyYXkgOiBmdW5jdGlvbihvYmplY3QpIHtcbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICByZXR1cm4gYXJyYXlGaWx0ZXIobmF0aXZlR2V0U3ltYm9scyhvYmplY3QpLCBmdW5jdGlvbihzeW1ib2wpIHtcbiAgICByZXR1cm4gcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChvYmplY3QsIHN5bWJvbCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSBgdG9TdHJpbmdUYWdgIG9mIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAqL1xudmFyIGdldFRhZyA9IGJhc2VHZXRUYWc7XG5cbi8vIEZhbGxiYWNrIGZvciBkYXRhIHZpZXdzLCBtYXBzLCBzZXRzLCBhbmQgd2VhayBtYXBzIGluIElFIDExIGFuZCBwcm9taXNlcyBpbiBOb2RlLmpzIDwgNi5cbmlmICgoRGF0YVZpZXcgJiYgZ2V0VGFnKG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMSkpKSAhPSBkYXRhVmlld1RhZykgfHxcbiAgICAoTWFwICYmIGdldFRhZyhuZXcgTWFwKSAhPSBtYXBUYWcpIHx8XG4gICAgKFByb21pc2UgJiYgZ2V0VGFnKFByb21pc2UucmVzb2x2ZSgpKSAhPSBwcm9taXNlVGFnKSB8fFxuICAgIChTZXQgJiYgZ2V0VGFnKG5ldyBTZXQpICE9IHNldFRhZykgfHxcbiAgICAoV2Vha01hcCAmJiBnZXRUYWcobmV3IFdlYWtNYXApICE9IHdlYWtNYXBUYWcpKSB7XG4gIGdldFRhZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIHJlc3VsdCA9IGJhc2VHZXRUYWcodmFsdWUpLFxuICAgICAgICBDdG9yID0gcmVzdWx0ID09IG9iamVjdFRhZyA/IHZhbHVlLmNvbnN0cnVjdG9yIDogdW5kZWZpbmVkLFxuICAgICAgICBjdG9yU3RyaW5nID0gQ3RvciA/IHRvU291cmNlKEN0b3IpIDogJyc7XG5cbiAgICBpZiAoY3RvclN0cmluZykge1xuICAgICAgc3dpdGNoIChjdG9yU3RyaW5nKSB7XG4gICAgICAgIGNhc2UgZGF0YVZpZXdDdG9yU3RyaW5nOiByZXR1cm4gZGF0YVZpZXdUYWc7XG4gICAgICAgIGNhc2UgbWFwQ3RvclN0cmluZzogcmV0dXJuIG1hcFRhZztcbiAgICAgICAgY2FzZSBwcm9taXNlQ3RvclN0cmluZzogcmV0dXJuIHByb21pc2VUYWc7XG4gICAgICAgIGNhc2Ugc2V0Q3RvclN0cmluZzogcmV0dXJuIHNldFRhZztcbiAgICAgICAgY2FzZSB3ZWFrTWFwQ3RvclN0cmluZzogcmV0dXJuIHdlYWtNYXBUYWc7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG4gIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDtcbiAgcmV0dXJuICEhbGVuZ3RoICYmXG4gICAgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgJiZcbiAgICAodmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aCk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHVzZSBhcyB1bmlxdWUgb2JqZWN0IGtleS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0tleWFibGUodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAodHlwZSA9PSAnc3RyaW5nJyB8fCB0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicpXG4gICAgPyAodmFsdWUgIT09ICdfX3Byb3RvX18nKVxuICAgIDogKHZhbHVlID09PSBudWxsKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBpdHMgc291cmNlIG1hc2tlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGZ1bmNgIGlzIG1hc2tlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc01hc2tlZChmdW5jKSB7XG4gIHJldHVybiAhIW1hc2tTcmNLZXkgJiYgKG1hc2tTcmNLZXkgaW4gZnVuYyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3RvdHlwZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc1Byb3RvdHlwZSh2YWx1ZSkge1xuICB2YXIgQ3RvciA9IHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yLFxuICAgICAgcHJvdG8gPSAodHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSkgfHwgb2JqZWN0UHJvdG87XG5cbiAgcmV0dXJuIHZhbHVlID09PSBwcm90bztcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIHVzaW5nIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgZnVuY2AgdG8gaXRzIHNvdXJjZSBjb2RlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjb252ZXJ0LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc291cmNlIGNvZGUuXG4gKi9cbmZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHtcbiAgaWYgKGZ1bmMgIT0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIChmdW5jICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFBlcmZvcm1zIGFcbiAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAqIHZhciBvdGhlciA9IHsgJ2EnOiAxIH07XG4gKlxuICogXy5lcShvYmplY3QsIG9iamVjdCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcShvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcSgnYScsICdhJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcSgnYScsIE9iamVjdCgnYScpKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcShOYU4sIE5hTik7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGVxKHZhbHVlLCBvdGhlcikge1xuICByZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJndW1lbnRzID0gYmFzZUlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID8gYmFzZUlzQXJndW1lbnRzIDogZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmXG4gICAgIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKTtcbn07XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheSgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3NcbiAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3JcbiAqIGVxdWFsIHRvIGAwYCBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICFpc0Z1bmN0aW9uKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGJ1ZmZlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMy4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGJ1ZmZlciwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQnVmZmVyKG5ldyBCdWZmZXIoMikpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNCdWZmZXIobmV3IFVpbnQ4QXJyYXkoMikpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQnVmZmVyID0gbmF0aXZlSXNCdWZmZXIgfHwgc3R1YkZhbHNlO1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgZGVlcCBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmVcbiAqIGVxdWl2YWxlbnQuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIGNvbXBhcmluZyBhcnJheXMsIGFycmF5IGJ1ZmZlcnMsIGJvb2xlYW5zLFxuICogZGF0ZSBvYmplY3RzLCBlcnJvciBvYmplY3RzLCBtYXBzLCBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLFxuICogc2V0cywgc3RyaW5ncywgc3ltYm9scywgYW5kIHR5cGVkIGFycmF5cy4gYE9iamVjdGAgb2JqZWN0cyBhcmUgY29tcGFyZWRcbiAqIGJ5IHRoZWlyIG93biwgbm90IGluaGVyaXRlZCwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLiBGdW5jdGlvbnMgYW5kIERPTVxuICogbm9kZXMgYXJlIGNvbXBhcmVkIGJ5IHN0cmljdCBlcXVhbGl0eSwgaS5lLiBgPT09YC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAqIHZhciBvdGhlciA9IHsgJ2EnOiAxIH07XG4gKlxuICogXy5pc0VxdWFsKG9iamVjdCwgb3RoZXIpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIG9iamVjdCA9PT0gb3RoZXI7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0VxdWFsKHZhbHVlLCBvdGhlcikge1xuICByZXR1cm4gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oXyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG4gIC8vIGluIFNhZmFyaSA5IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5cyBhbmQgb3RoZXIgY29uc3RydWN0b3JzLlxuICB2YXIgdGFnID0gYmFzZUdldFRhZyh2YWx1ZSk7XG4gIHJldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnIHx8IHRhZyA9PSBhc3luY1RhZyB8fCB0YWcgPT0gcHJveHlUYWc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzTGVuZ3RoKDMpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoSW5maW5pdHkpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKCczJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmXG4gICAgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdHlwZWQgYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KFtdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc1R5cGVkQXJyYXkgPSBub2RlSXNUeXBlZEFycmF5ID8gYmFzZVVuYXJ5KG5vZGVJc1R5cGVkQXJyYXkpIDogYmFzZUlzVHlwZWRBcnJheTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy4gU2VlIHRoZVxuICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5rZXlzKVxuICogZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmtleXMobmV3IEZvbyk7XG4gKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKlxuICogXy5rZXlzKCdoaScpO1xuICogLy8gPT4gWycwJywgJzEnXVxuICovXG5mdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuICByZXR1cm4gaXNBcnJheUxpa2Uob2JqZWN0KSA/IGFycmF5TGlrZUtleXMob2JqZWN0KSA6IGJhc2VLZXlzKG9iamVjdCk7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgcmV0dXJucyBhIG5ldyBlbXB0eSBhcnJheS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMTMuMFxuICogQGNhdGVnb3J5IFV0aWxcbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGVtcHR5IGFycmF5LlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgYXJyYXlzID0gXy50aW1lcygyLCBfLnN0dWJBcnJheSk7XG4gKlxuICogY29uc29sZS5sb2coYXJyYXlzKTtcbiAqIC8vID0+IFtbXSwgW11dXG4gKlxuICogY29uc29sZS5sb2coYXJyYXlzWzBdID09PSBhcnJheXNbMV0pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gc3R1YkFycmF5KCkge1xuICByZXR1cm4gW107XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgcmV0dXJucyBgZmFsc2VgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4xMy4wXG4gKiBAY2F0ZWdvcnkgVXRpbFxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50aW1lcygyLCBfLnN0dWJGYWxzZSk7XG4gKiAvLyA9PiBbZmFsc2UsIGZhbHNlXVxuICovXG5mdW5jdGlvbiBzdHViRmFsc2UoKSB7XG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0VxdWFsO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lodash.isequal/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js":
/*!***********************************************************!*\
  !*** ./node_modules/next/dist/build/polyfills/process.js ***!
  \***********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nvar _global_process, _global_process1;\nmodule.exports = ((_global_process = __webpack_require__.g.process) == null ? void 0 : _global_process.env) && typeof ((_global_process1 = __webpack_require__.g.process) == null ? void 0 : _global_process1.env) === \"object\" ? __webpack_require__.g.process : __webpack_require__(/*! next/dist/compiled/process */ \"(app-pages-browser)/./node_modules/next/dist/compiled/process/browser.js\");\n\n//# sourceMappingURL=process.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvcG9seWZpbGxzL3Byb2Nlc3MuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLHFDQUFxQyxxQkFBTSxpRkFBaUYscUJBQU0sa0VBQWtFLHFCQUFNLFdBQVcsbUJBQU8sQ0FBQyw0R0FBNEI7O0FBRXpQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvcG9seWZpbGxzL3Byb2Nlc3MuanM/OGQ5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfZ2xvYmFsX3Byb2Nlc3MsIF9nbG9iYWxfcHJvY2VzczE7XG5tb2R1bGUuZXhwb3J0cyA9ICgoX2dsb2JhbF9wcm9jZXNzID0gZ2xvYmFsLnByb2Nlc3MpID09IG51bGwgPyB2b2lkIDAgOiBfZ2xvYmFsX3Byb2Nlc3MuZW52KSAmJiB0eXBlb2YgKChfZ2xvYmFsX3Byb2Nlc3MxID0gZ2xvYmFsLnByb2Nlc3MpID09IG51bGwgPyB2b2lkIDAgOiBfZ2xvYmFsX3Byb2Nlc3MxLmVudikgPT09IFwib2JqZWN0XCIgPyBnbG9iYWwucHJvY2VzcyA6IHJlcXVpcmUoXCJuZXh0L2Rpc3QvY29tcGlsZWQvcHJvY2Vzc1wiKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/process/browser.js":
/*!************************************************************!*\
  !*** ./node_modules/next/dist/compiled/process/browser.js ***!
  \************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var __dirname = \"/\";\n(function(){var e={229:function(e){var t=e.exports={};var r;var n;function defaultSetTimout(){throw new Error(\"setTimeout has not been defined\")}function defaultClearTimeout(){throw new Error(\"clearTimeout has not been defined\")}(function(){try{if(typeof setTimeout===\"function\"){r=setTimeout}else{r=defaultSetTimout}}catch(e){r=defaultSetTimout}try{if(typeof clearTimeout===\"function\"){n=clearTimeout}else{n=defaultClearTimeout}}catch(e){n=defaultClearTimeout}})();function runTimeout(e){if(r===setTimeout){return setTimeout(e,0)}if((r===defaultSetTimout||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function runClearTimeout(e){if(n===clearTimeout){return clearTimeout(e)}if((n===defaultClearTimeout||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var i=[];var o=false;var u;var a=-1;function cleanUpNextTick(){if(!o||!u){return}o=false;if(u.length){i=u.concat(i)}else{a=-1}if(i.length){drainQueue()}}function drainQueue(){if(o){return}var e=runTimeout(cleanUpNextTick);o=true;var t=i.length;while(t){u=i;i=[];while(++a<t){if(u){u[a].run()}}a=-1;t=i.length}u=null;o=false;runClearTimeout(e)}t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}i.push(new Item(e,t));if(i.length===1&&!o){runTimeout(drainQueue)}};function Item(e,t){this.fun=e;this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};t.title=\"browser\";t.browser=true;t.env={};t.argv=[];t.version=\"\";t.versions={};function noop(){}t.on=noop;t.addListener=noop;t.once=noop;t.off=noop;t.removeListener=noop;t.removeAllListeners=noop;t.emit=noop;t.prependListener=noop;t.prependOnceListener=noop;t.listeners=function(e){return[]};t.binding=function(e){throw new Error(\"process.binding is not supported\")};t.cwd=function(){return\"/\"};t.chdir=function(e){throw new Error(\"process.chdir is not supported\")};t.umask=function(){return 0}}};var t={};function __nccwpck_require__(r){var n=t[r];if(n!==undefined){return n.exports}var i=t[r]={exports:{}};var o=true;try{e[r](i,i.exports,__nccwpck_require__);o=false}finally{if(o)delete t[r]}return i.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var r=__nccwpck_require__(229);module.exports=r})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcHJvY2Vzcy9icm93c2VyLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxZQUFZLE9BQU8sZ0JBQWdCLG1CQUFtQixNQUFNLE1BQU0sNEJBQTRCLG1EQUFtRCwrQkFBK0IscURBQXFELFlBQVksSUFBSSxtQ0FBbUMsYUFBYSxLQUFLLG9CQUFvQixTQUFTLG1CQUFtQixJQUFJLHFDQUFxQyxlQUFlLEtBQUssdUJBQXVCLFNBQVMsdUJBQXVCLElBQUksdUJBQXVCLG1CQUFtQix1QkFBdUIsMkNBQTJDLGFBQWEsdUJBQXVCLElBQUksY0FBYyxTQUFTLElBQUksd0JBQXdCLFNBQVMsMEJBQTBCLDRCQUE0QixxQkFBcUIsdUJBQXVCLGdEQUFnRCxlQUFlLHVCQUF1QixJQUFJLFlBQVksU0FBUyxJQUFJLHNCQUFzQixTQUFTLHdCQUF3QixTQUFTLFlBQVksTUFBTSxTQUFTLDJCQUEyQixXQUFXLE9BQU8sUUFBUSxhQUFhLGNBQWMsS0FBSyxLQUFLLGFBQWEsY0FBYyxzQkFBc0IsTUFBTSxPQUFPLGtDQUFrQyxPQUFPLGVBQWUsU0FBUyxJQUFJLEtBQUssYUFBYSxNQUFNLFlBQVksS0FBSyxXQUFXLE9BQU8sUUFBUSxtQkFBbUIsdUJBQXVCLG9DQUFvQyx1QkFBdUIsWUFBWSxtQkFBbUIsS0FBSyxxQkFBcUIsc0JBQXNCLHFCQUFxQix5QkFBeUIsbUJBQW1CLFdBQVcsYUFBYSw4QkFBOEIsaUNBQWlDLGtCQUFrQixlQUFlLFNBQVMsVUFBVSxhQUFhLGNBQWMsaUJBQWlCLFVBQVUsbUJBQW1CLFlBQVksV0FBVyxzQkFBc0IsMEJBQTBCLFlBQVksdUJBQXVCLDJCQUEyQix3QkFBd0IsVUFBVSxzQkFBc0IscURBQXFELGlCQUFpQixXQUFXLG9CQUFvQixtREFBbUQsbUJBQW1CLFlBQVksU0FBUyxnQ0FBZ0MsV0FBVyxrQkFBa0IsaUJBQWlCLFlBQVksWUFBWSxXQUFXLElBQUksc0NBQXNDLFFBQVEsUUFBUSxpQkFBaUIsaUJBQWlCLG1FQUFtRSxTQUFTLEtBQUssK0JBQStCLGlCQUFpQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL3Byb2Nlc3MvYnJvd3Nlci5qcz9kNmRmIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe3ZhciBlPXsyMjk6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5leHBvcnRzPXt9O3ZhciByO3ZhciBuO2Z1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKXt0aHJvdyBuZXcgRXJyb3IoXCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkXCIpfWZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQoKXt0aHJvdyBuZXcgRXJyb3IoXCJjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWRcIil9KGZ1bmN0aW9uKCl7dHJ5e2lmKHR5cGVvZiBzZXRUaW1lb3V0PT09XCJmdW5jdGlvblwiKXtyPXNldFRpbWVvdXR9ZWxzZXtyPWRlZmF1bHRTZXRUaW1vdXR9fWNhdGNoKGUpe3I9ZGVmYXVsdFNldFRpbW91dH10cnl7aWYodHlwZW9mIGNsZWFyVGltZW91dD09PVwiZnVuY3Rpb25cIil7bj1jbGVhclRpbWVvdXR9ZWxzZXtuPWRlZmF1bHRDbGVhclRpbWVvdXR9fWNhdGNoKGUpe249ZGVmYXVsdENsZWFyVGltZW91dH19KSgpO2Z1bmN0aW9uIHJ1blRpbWVvdXQoZSl7aWYocj09PXNldFRpbWVvdXQpe3JldHVybiBzZXRUaW1lb3V0KGUsMCl9aWYoKHI9PT1kZWZhdWx0U2V0VGltb3V0fHwhcikmJnNldFRpbWVvdXQpe3I9c2V0VGltZW91dDtyZXR1cm4gc2V0VGltZW91dChlLDApfXRyeXtyZXR1cm4gcihlLDApfWNhdGNoKHQpe3RyeXtyZXR1cm4gci5jYWxsKG51bGwsZSwwKX1jYXRjaCh0KXtyZXR1cm4gci5jYWxsKHRoaXMsZSwwKX19fWZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChlKXtpZihuPT09Y2xlYXJUaW1lb3V0KXtyZXR1cm4gY2xlYXJUaW1lb3V0KGUpfWlmKChuPT09ZGVmYXVsdENsZWFyVGltZW91dHx8IW4pJiZjbGVhclRpbWVvdXQpe249Y2xlYXJUaW1lb3V0O3JldHVybiBjbGVhclRpbWVvdXQoZSl9dHJ5e3JldHVybiBuKGUpfWNhdGNoKHQpe3RyeXtyZXR1cm4gbi5jYWxsKG51bGwsZSl9Y2F0Y2godCl7cmV0dXJuIG4uY2FsbCh0aGlzLGUpfX19dmFyIGk9W107dmFyIG89ZmFsc2U7dmFyIHU7dmFyIGE9LTE7ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCl7aWYoIW98fCF1KXtyZXR1cm59bz1mYWxzZTtpZih1Lmxlbmd0aCl7aT11LmNvbmNhdChpKX1lbHNle2E9LTF9aWYoaS5sZW5ndGgpe2RyYWluUXVldWUoKX19ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpe2lmKG8pe3JldHVybn12YXIgZT1ydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7bz10cnVlO3ZhciB0PWkubGVuZ3RoO3doaWxlKHQpe3U9aTtpPVtdO3doaWxlKCsrYTx0KXtpZih1KXt1W2FdLnJ1bigpfX1hPS0xO3Q9aS5sZW5ndGh9dT1udWxsO289ZmFsc2U7cnVuQ2xlYXJUaW1lb3V0KGUpfXQubmV4dFRpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtmb3IodmFyIHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXt0W3ItMV09YXJndW1lbnRzW3JdfX1pLnB1c2gobmV3IEl0ZW0oZSx0KSk7aWYoaS5sZW5ndGg9PT0xJiYhbyl7cnVuVGltZW91dChkcmFpblF1ZXVlKX19O2Z1bmN0aW9uIEl0ZW0oZSx0KXt0aGlzLmZ1bj1lO3RoaXMuYXJyYXk9dH1JdGVtLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfTt0LnRpdGxlPVwiYnJvd3NlclwiO3QuYnJvd3Nlcj10cnVlO3QuZW52PXt9O3QuYXJndj1bXTt0LnZlcnNpb249XCJcIjt0LnZlcnNpb25zPXt9O2Z1bmN0aW9uIG5vb3AoKXt9dC5vbj1ub29wO3QuYWRkTGlzdGVuZXI9bm9vcDt0Lm9uY2U9bm9vcDt0Lm9mZj1ub29wO3QucmVtb3ZlTGlzdGVuZXI9bm9vcDt0LnJlbW92ZUFsbExpc3RlbmVycz1ub29wO3QuZW1pdD1ub29wO3QucHJlcGVuZExpc3RlbmVyPW5vb3A7dC5wcmVwZW5kT25jZUxpc3RlbmVyPW5vb3A7dC5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7cmV0dXJuW119O3QuYmluZGluZz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX07dC5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn07dC5jaGRpcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9O3QudW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19fTt2YXIgdD17fTtmdW5jdGlvbiBfX25jY3dwY2tfcmVxdWlyZV9fKHIpe3ZhciBuPXRbcl07aWYobiE9PXVuZGVmaW5lZCl7cmV0dXJuIG4uZXhwb3J0c312YXIgaT10W3JdPXtleHBvcnRzOnt9fTt2YXIgbz10cnVlO3RyeXtlW3JdKGksaS5leHBvcnRzLF9fbmNjd3Bja19yZXF1aXJlX18pO289ZmFsc2V9ZmluYWxseXtpZihvKWRlbGV0ZSB0W3JdfXJldHVybiBpLmV4cG9ydHN9aWYodHlwZW9mIF9fbmNjd3Bja19yZXF1aXJlX18hPT1cInVuZGVmaW5lZFwiKV9fbmNjd3Bja19yZXF1aXJlX18uYWI9X19kaXJuYW1lK1wiL1wiO3ZhciByPV9fbmNjd3Bja19yZXF1aXJlX18oMjI5KTttb2R1bGUuZXhwb3J0cz1yfSkoKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/process/browser.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/reselect/es/index.js":
/*!*******************************************!*\
  !*** ./node_modules/reselect/es/index.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSelector: function() { return /* binding */ createSelector; },\n/* harmony export */   createSelectorCreator: function() { return /* binding */ createSelectorCreator; },\n/* harmony export */   createStructuredSelector: function() { return /* binding */ createStructuredSelector; },\n/* harmony export */   defaultMemoize: function() { return /* binding */ defaultMemoize; }\n/* harmony export */ });\nfunction defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nfunction createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nvar createSelector = createSelectorCreator(defaultMemoize);\n\nfunction createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9yZXNlbGVjdC9lcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRU87QUFDUCwrRkFBK0YsYUFBYTtBQUM1RztBQUNBOztBQUVBO0FBQ0Esd0VBQXdFLGVBQWU7QUFDdkY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQixZQUFZO0FBQ2xDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPOztBQUVBO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHlFQUF5RSxlQUFlO0FBQ3hGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1QsR0FBRztBQUNIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9yZXNlbGVjdC9lcy9pbmRleC5qcz83ZWUxIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGRlZmF1bHRFcXVhbGl0eUNoZWNrKGEsIGIpIHtcbiAgcmV0dXJuIGEgPT09IGI7XG59XG5cbmZ1bmN0aW9uIGFyZUFyZ3VtZW50c1NoYWxsb3dseUVxdWFsKGVxdWFsaXR5Q2hlY2ssIHByZXYsIG5leHQpIHtcbiAgaWYgKHByZXYgPT09IG51bGwgfHwgbmV4dCA9PT0gbnVsbCB8fCBwcmV2Lmxlbmd0aCAhPT0gbmV4dC5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBEbyB0aGlzIGluIGEgZm9yIGxvb3AgKGFuZCBub3QgYSBgZm9yRWFjaGAgb3IgYW4gYGV2ZXJ5YCkgc28gd2UgY2FuIGRldGVybWluZSBlcXVhbGl0eSBhcyBmYXN0IGFzIHBvc3NpYmxlLlxuICB2YXIgbGVuZ3RoID0gcHJldi5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIWVxdWFsaXR5Q2hlY2socHJldltpXSwgbmV4dFtpXSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRNZW1vaXplKGZ1bmMpIHtcbiAgdmFyIGVxdWFsaXR5Q2hlY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGRlZmF1bHRFcXVhbGl0eUNoZWNrO1xuXG4gIHZhciBsYXN0QXJncyA9IG51bGw7XG4gIHZhciBsYXN0UmVzdWx0ID0gbnVsbDtcbiAgLy8gd2UgcmVmZXJlbmNlIGFyZ3VtZW50cyBpbnN0ZWFkIG9mIHNwcmVhZGluZyB0aGVtIGZvciBwZXJmb3JtYW5jZSByZWFzb25zXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFhcmVBcmd1bWVudHNTaGFsbG93bHlFcXVhbChlcXVhbGl0eUNoZWNrLCBsYXN0QXJncywgYXJndW1lbnRzKSkge1xuICAgICAgLy8gYXBwbHkgYXJndW1lbnRzIGluc3RlYWQgb2Ygc3ByZWFkaW5nIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgIGxhc3RSZXN1bHQgPSBmdW5jLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldERlcGVuZGVuY2llcyhmdW5jcykge1xuICB2YXIgZGVwZW5kZW5jaWVzID0gQXJyYXkuaXNBcnJheShmdW5jc1swXSkgPyBmdW5jc1swXSA6IGZ1bmNzO1xuXG4gIGlmICghZGVwZW5kZW5jaWVzLmV2ZXJ5KGZ1bmN0aW9uIChkZXApIHtcbiAgICByZXR1cm4gdHlwZW9mIGRlcCA9PT0gJ2Z1bmN0aW9uJztcbiAgfSkpIHtcbiAgICB2YXIgZGVwZW5kZW5jeVR5cGVzID0gZGVwZW5kZW5jaWVzLm1hcChmdW5jdGlvbiAoZGVwKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGRlcDtcbiAgICB9KS5qb2luKCcsICcpO1xuICAgIHRocm93IG5ldyBFcnJvcignU2VsZWN0b3IgY3JlYXRvcnMgZXhwZWN0IGFsbCBpbnB1dC1zZWxlY3RvcnMgdG8gYmUgZnVuY3Rpb25zLCAnICsgKCdpbnN0ZWFkIHJlY2VpdmVkIHRoZSBmb2xsb3dpbmcgdHlwZXM6IFsnICsgZGVwZW5kZW5jeVR5cGVzICsgJ10nKSk7XG4gIH1cblxuICByZXR1cm4gZGVwZW5kZW5jaWVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2VsZWN0b3JDcmVhdG9yKG1lbW9pemUpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1lbW9pemVPcHRpb25zID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1lbW9pemVPcHRpb25zW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICBmdW5jc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgIH1cblxuICAgIHZhciByZWNvbXB1dGF0aW9ucyA9IDA7XG4gICAgdmFyIHJlc3VsdEZ1bmMgPSBmdW5jcy5wb3AoKTtcbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gZ2V0RGVwZW5kZW5jaWVzKGZ1bmNzKTtcblxuICAgIHZhciBtZW1vaXplZFJlc3VsdEZ1bmMgPSBtZW1vaXplLmFwcGx5KHVuZGVmaW5lZCwgW2Z1bmN0aW9uICgpIHtcbiAgICAgIHJlY29tcHV0YXRpb25zKys7XG4gICAgICAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgZm9yIHBlcmZvcm1hbmNlLlxuICAgICAgcmV0dXJuIHJlc3VsdEZ1bmMuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9XS5jb25jYXQobWVtb2l6ZU9wdGlvbnMpKTtcblxuICAgIC8vIElmIGEgc2VsZWN0b3IgaXMgY2FsbGVkIHdpdGggdGhlIGV4YWN0IHNhbWUgYXJndW1lbnRzIHdlIGRvbid0IG5lZWQgdG8gdHJhdmVyc2Ugb3VyIGRlcGVuZGVuY2llcyBhZ2Fpbi5cbiAgICB2YXIgc2VsZWN0b3IgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwYXJhbXMgPSBbXTtcbiAgICAgIHZhciBsZW5ndGggPSBkZXBlbmRlbmNpZXMubGVuZ3RoO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGFwcGx5IGFyZ3VtZW50cyBpbnN0ZWFkIG9mIHNwcmVhZGluZyBhbmQgbXV0YXRlIGEgbG9jYWwgbGlzdCBvZiBwYXJhbXMgZm9yIHBlcmZvcm1hbmNlLlxuICAgICAgICBwYXJhbXMucHVzaChkZXBlbmRlbmNpZXNbaV0uYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGFwcGx5IGFyZ3VtZW50cyBpbnN0ZWFkIG9mIHNwcmVhZGluZyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICByZXR1cm4gbWVtb2l6ZWRSZXN1bHRGdW5jLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgfSk7XG5cbiAgICBzZWxlY3Rvci5yZXN1bHRGdW5jID0gcmVzdWx0RnVuYztcbiAgICBzZWxlY3Rvci5kZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmNpZXM7XG4gICAgc2VsZWN0b3IucmVjb21wdXRhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmVjb21wdXRhdGlvbnM7XG4gICAgfTtcbiAgICBzZWxlY3Rvci5yZXNldFJlY29tcHV0YXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlY29tcHV0YXRpb25zID0gMDtcbiAgICB9O1xuICAgIHJldHVybiBzZWxlY3RvcjtcbiAgfTtcbn1cblxuZXhwb3J0IHZhciBjcmVhdGVTZWxlY3RvciA9IGNyZWF0ZVNlbGVjdG9yQ3JlYXRvcihkZWZhdWx0TWVtb2l6ZSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3Ioc2VsZWN0b3JzKSB7XG4gIHZhciBzZWxlY3RvckNyZWF0b3IgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGNyZWF0ZVNlbGVjdG9yO1xuXG4gIGlmICh0eXBlb2Ygc2VsZWN0b3JzICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yIGV4cGVjdHMgZmlyc3QgYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0ICcgKyAoJ3doZXJlIGVhY2ggcHJvcGVydHkgaXMgYSBzZWxlY3RvciwgaW5zdGVhZCByZWNlaXZlZCBhICcgKyB0eXBlb2Ygc2VsZWN0b3JzKSk7XG4gIH1cbiAgdmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyhzZWxlY3RvcnMpO1xuICByZXR1cm4gc2VsZWN0b3JDcmVhdG9yKG9iamVjdEtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gc2VsZWN0b3JzW2tleV07XG4gIH0pLCBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCB2YWx1ZXMgPSBBcnJheShfbGVuMyksIF9rZXkzID0gMDsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgdmFsdWVzW19rZXkzXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlcy5yZWR1Y2UoZnVuY3Rpb24gKGNvbXBvc2l0aW9uLCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgIGNvbXBvc2l0aW9uW29iamVjdEtleXNbaW5kZXhdXSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIGNvbXBvc2l0aW9uO1xuICAgIH0sIHt9KTtcbiAgfSk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/reselect/es/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/sdp-transform/lib/grammar.js":
/*!***************************************************!*\
  !*** ./node_modules/sdp-transform/lib/grammar.js ***!
  \***************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{\n    // o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly...\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  // k: [{}], // outdated thing ignored\n  t: [{\n    // t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{\n    // c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{\n    // b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{\n    // m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    {\n      // a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding)\n          ? 'rtpmap:%d %s/%s/%s'\n          : o.rate\n            ? 'rtpmap:%d %s/%s'\n            : 'rtpmap:%d %s';\n      }\n    },\n    {\n      // a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      // a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    {\n      // a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    {\n      // a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null)\n          ? 'rtcp:%d %s IP%d %s'\n          : 'rtcp:%d';\n      }\n    },\n    {\n      // a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%s trr-int %d'\n    },\n    {\n      // a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null)\n          ? 'rtcp-fb:%s %s %s'\n          : 'rtcp-fb:%s %s';\n      }\n    },\n    {\n      // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      // a=extmap:1/recvonly URI-gps-string\n      // a=extmap:3 urn:ietf:params:rtp-hdrext:encrypt urn:ietf:params:rtp-hdrext:smpte-tc 25@600/24\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'encrypt-uri', 'uri', 'config'],\n      format: function (o) {\n        return (\n          'extmap:%d' +\n          (o.direction ? '/%s' : '%v') +\n          (o['encrypt-uri'] ? ' %s' : '%v') +\n          ' %s' +\n          (o.config ? ' %s' : '')\n        );\n      }\n    },\n    {\n      // a=extmap-allow-mixed\n      name: 'extmapAllowMixed',\n      reg: /^(extmap-allow-mixed)/\n    },\n    {\n      // a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null)\n          ? 'crypto:%d %s %s %s'\n          : 'crypto:%d %s %s';\n      }\n    },\n    {\n      // a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    {\n      // a=connection:new\n      name: 'connectionType',\n      reg: /^connection:(new|existing)/,\n      format: 'connection:%s'\n    },\n    {\n      // a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    {\n      // a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    {\n      // a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'ptime:%d'\n    },\n    {\n      // a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'maxptime:%d'\n    },\n    {\n      // a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    {\n      // a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    {\n      // a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    {\n      // a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    {\n      // a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    {\n      // a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      // a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      // a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    {\n      // a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    {\n      // a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    {\n      // a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    {\n      // a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    {\n      // a=ssrc-group:FEC 1 2\n      // a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    {\n      // a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    {\n      // a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    {\n      // a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    {\n      // a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    {\n      // a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null)\n          ? 'sctpmap:%s %s %s'\n          : 'sctpmap:%s %s';\n      }\n    },\n    {\n      // a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    {\n      // a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    {\n      // a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      // a=imageattr:* send [x=800,y=640] recv *\n      // a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        // a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        // send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        // recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      // a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        // a=simulcast:\n        '^simulcast:' +\n        // send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        // space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        // end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // old simulcast draft 03 (implemented by Firefox)\n      //   https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      // a=simulcast: recv pt=97;98 send pt=97\n      // a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      // a=framerate:25\n      // a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    {\n      // RFC4570\n      // a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    {\n      // a=bundle-only\n      name: 'bundleOnly',\n      reg: /^(bundle-only)/\n    },\n    {\n      // a=label:1\n      name: 'label',\n      reg: /^label:(.+)/,\n      format: 'label:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-5\n      name: 'sctpPort',\n      reg: /^sctp-port:(\\d+)$/,\n      format: 'sctp-port:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-6\n      name: 'maxMessageSize',\n      reg: /^max-message-size:(\\d+)$/,\n      format: 'max-message-size:%s'\n    },\n    {\n      // RFC7273\n      // a=ts-refclk:ptp=IEEE1588-2008:39-A7-94-FF-FE-07-CB-D0:37\n      push:'tsRefClocks',\n      reg: /^ts-refclk:([^\\s=]*)(?:=(\\S*))?/,\n      names: ['clksrc', 'clksrcExt'],\n      format: function (o) {\n        return 'ts-refclk:%s' + (o.clksrcExt != null ? '=%s' : '');\n      }\n    },\n    {\n      // RFC7273\n      // a=mediaclk:direct=963214424\n      name:'mediaClk',\n      reg: /^mediaclk:(?:id=(\\S*))? *([^\\s=]*)(?:=(\\S*))?(?: *rate=(\\d+)\\/(\\d+))?/,\n      names: ['id', 'mediaClockName', 'mediaClockValue', 'rateNumerator', 'rateDenominator'],\n      format: function (o) {\n        var str = 'mediaclk:';\n        str += (o.id != null ? 'id=%s %s' : '%v%s');\n        str += (o.mediaClockValue != null ? '=%s' : '');\n        str += (o.rateNumerator != null ? ' rate=%s' : '');\n        str += (o.rateDenominator != null ? '/%s' : '');\n        return str;\n      }\n    },\n    {\n      // a=keywds:keywords\n      name: 'keywords',\n      reg: /^keywds:(.+)$/,\n      format: 'keywds:%s'\n    },\n    {\n      // a=content:main\n      name: 'content',\n      reg: /^content:(.+)/,\n      format: 'content:%s'\n    },\n    // BFCP https://tools.ietf.org/html/rfc4583\n    {\n      // a=floorctrl:c-s\n      name: 'bfcpFloorCtrl',\n      reg: /^floorctrl:(c-only|s-only|c-s)/,\n      format: 'floorctrl:%s'\n    },\n    {\n      // a=confid:1\n      name: 'bfcpConfId',\n      reg: /^confid:(\\d+)/,\n      format: 'confid:%s'\n    },\n    {\n      // a=userid:1\n      name: 'bfcpUserId',\n      reg: /^userid:(\\d+)/,\n      format: 'userid:%s'\n    },\n    {\n      // a=floorid:1\n      name: 'bfcpFloorId',\n      reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,\n      names: ['id', 'mStream'],\n      format: 'floorid:%s mstrm:%s'\n    },\n    {\n      // any a= that we don't understand is kept verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9zZHAtdHJhbnNmb3JtL2xpYi9ncmFtbWFyLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsUUFBUSxjQUFjO0FBQ3RCLFFBQVEscUJBQXFCO0FBQzdCLFFBQVEsYUFBYTtBQUNyQixRQUFRLGVBQWU7QUFDdkIsUUFBUSxlQUFlO0FBQ3ZCLFFBQVEsbUJBQW1CO0FBQzNCLFFBQVEsaUJBQWlCO0FBQ3pCLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHdDQUF3QyxVQUFVO0FBQ2xELGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHFDQUFxQyxlQUFlLFdBQVc7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxnQ0FBZ0MsYUFBYTtBQUM3Qyw0QkFBNEIsV0FBVztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QixzQ0FBc0M7QUFDdEMsMEJBQTBCO0FBQzFCLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakMsaUNBQWlDLEVBQUU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvc2RwLXRyYW5zZm9ybS9saWIvZ3JhbW1hci5qcz82MjY0Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBncmFtbWFyID0gbW9kdWxlLmV4cG9ydHMgPSB7XG4gIHY6IFt7XG4gICAgbmFtZTogJ3ZlcnNpb24nLFxuICAgIHJlZzogL14oXFxkKikkL1xuICB9XSxcbiAgbzogW3tcbiAgICAvLyBvPS0gMjA1MTggMCBJTiBJUDQgMjAzLjAuMTEzLjFcbiAgICAvLyBOQjogc2Vzc2lvbklkIHdpbGwgYmUgYSBTdHJpbmcgaW4gbW9zdCBjYXNlcyBiZWNhdXNlIGl0IGlzIGh1Z2VcbiAgICBuYW1lOiAnb3JpZ2luJyxcbiAgICByZWc6IC9eKFxcUyopIChcXGQqKSAoXFxkKikgKFxcUyopIElQKFxcZCkgKFxcUyopLyxcbiAgICBuYW1lczogWyd1c2VybmFtZScsICdzZXNzaW9uSWQnLCAnc2Vzc2lvblZlcnNpb24nLCAnbmV0VHlwZScsICdpcFZlcicsICdhZGRyZXNzJ10sXG4gICAgZm9ybWF0OiAnJXMgJXMgJWQgJXMgSVAlZCAlcydcbiAgfV0sXG4gIC8vIGRlZmF1bHQgcGFyc2luZyBvZiB0aGVzZSBvbmx5ICh0aG91Z2ggc29tZSBvZiB0aGVzZSBmZWVsIG91dGRhdGVkKVxuICBzOiBbeyBuYW1lOiAnbmFtZScgfV0sXG4gIGk6IFt7IG5hbWU6ICdkZXNjcmlwdGlvbicgfV0sXG4gIHU6IFt7IG5hbWU6ICd1cmknIH1dLFxuICBlOiBbeyBuYW1lOiAnZW1haWwnIH1dLFxuICBwOiBbeyBuYW1lOiAncGhvbmUnIH1dLFxuICB6OiBbeyBuYW1lOiAndGltZXpvbmVzJyB9XSwgLy8gVE9ETzogdGhpcyBvbmUgY2FuIGFjdHVhbGx5IGJlIHBhcnNlZCBwcm9wZXJseS4uLlxuICByOiBbeyBuYW1lOiAncmVwZWF0cycgfV0sICAgLy8gVE9ETzogdGhpcyBvbmUgY2FuIGFsc28gYmUgcGFyc2VkIHByb3Blcmx5XG4gIC8vIGs6IFt7fV0sIC8vIG91dGRhdGVkIHRoaW5nIGlnbm9yZWRcbiAgdDogW3tcbiAgICAvLyB0PTAgMFxuICAgIG5hbWU6ICd0aW1pbmcnLFxuICAgIHJlZzogL14oXFxkKikgKFxcZCopLyxcbiAgICBuYW1lczogWydzdGFydCcsICdzdG9wJ10sXG4gICAgZm9ybWF0OiAnJWQgJWQnXG4gIH1dLFxuICBjOiBbe1xuICAgIC8vIGM9SU4gSVA0IDEwLjQ3LjE5Ny4yNlxuICAgIG5hbWU6ICdjb25uZWN0aW9uJyxcbiAgICByZWc6IC9eSU4gSVAoXFxkKSAoXFxTKikvLFxuICAgIG5hbWVzOiBbJ3ZlcnNpb24nLCAnaXAnXSxcbiAgICBmb3JtYXQ6ICdJTiBJUCVkICVzJ1xuICB9XSxcbiAgYjogW3tcbiAgICAvLyBiPUFTOjQwMDBcbiAgICBwdXNoOiAnYmFuZHdpZHRoJyxcbiAgICByZWc6IC9eKFRJQVN8QVN8Q1R8UlJ8UlMpOihcXGQqKS8sXG4gICAgbmFtZXM6IFsndHlwZScsICdsaW1pdCddLFxuICAgIGZvcm1hdDogJyVzOiVzJ1xuICB9XSxcbiAgbTogW3tcbiAgICAvLyBtPXZpZGVvIDUxNzQ0IFJUUC9BVlAgMTI2IDk3IDk4IDM0IDMxXG4gICAgLy8gTkI6IHNwZWNpYWwgLSBwdXNoZXMgdG8gc2Vzc2lvblxuICAgIC8vIFRPRE86IHJ0cC9mbXRwIHNob3VsZCBiZSBmaWx0ZXJlZCBieSB0aGUgcGF5bG9hZHMgZm91bmQgaGVyZT9cbiAgICByZWc6IC9eKFxcdyopIChcXGQqKSAoW1xcdy9dKikoPzogKC4qKSk/LyxcbiAgICBuYW1lczogWyd0eXBlJywgJ3BvcnQnLCAncHJvdG9jb2wnLCAncGF5bG9hZHMnXSxcbiAgICBmb3JtYXQ6ICclcyAlZCAlcyAlcydcbiAgfV0sXG4gIGE6IFtcbiAgICB7XG4gICAgICAvLyBhPXJ0cG1hcDoxMTAgb3B1cy80ODAwMC8yXG4gICAgICBwdXNoOiAncnRwJyxcbiAgICAgIHJlZzogL15ydHBtYXA6KFxcZCopIChbXFx3XFwtLl0qKSg/OlxccypcXC8oXFxkKikoPzpcXHMqXFwvKFxcUyopKT8pPy8sXG4gICAgICBuYW1lczogWydwYXlsb2FkJywgJ2NvZGVjJywgJ3JhdGUnLCAnZW5jb2RpbmcnXSxcbiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIChvLmVuY29kaW5nKVxuICAgICAgICAgID8gJ3J0cG1hcDolZCAlcy8lcy8lcydcbiAgICAgICAgICA6IG8ucmF0ZVxuICAgICAgICAgICAgPyAncnRwbWFwOiVkICVzLyVzJ1xuICAgICAgICAgICAgOiAncnRwbWFwOiVkICVzJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9Zm10cDoxMDggcHJvZmlsZS1sZXZlbC1pZD0yNDtvYmplY3Q9MjM7Yml0cmF0ZT02NDAwMFxuICAgICAgLy8gYT1mbXRwOjExMSBtaW5wdGltZT0xMDsgdXNlaW5iYW5kZmVjPTFcbiAgICAgIHB1c2g6ICdmbXRwJyxcbiAgICAgIHJlZzogL15mbXRwOihcXGQqKSAoW1xcU3wgXSopLyxcbiAgICAgIG5hbWVzOiBbJ3BheWxvYWQnLCAnY29uZmlnJ10sXG4gICAgICBmb3JtYXQ6ICdmbXRwOiVkICVzJ1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1jb250cm9sOnN0cmVhbWlkPTBcbiAgICAgIG5hbWU6ICdjb250cm9sJyxcbiAgICAgIHJlZzogL15jb250cm9sOiguKikvLFxuICAgICAgZm9ybWF0OiAnY29udHJvbDolcydcbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9cnRjcDo2NTE3OSBJTiBJUDQgMTkzLjg0Ljc3LjE5NFxuICAgICAgbmFtZTogJ3J0Y3AnLFxuICAgICAgcmVnOiAvXnJ0Y3A6KFxcZCopKD86IChcXFMqKSBJUChcXGQpIChcXFMqKSk/LyxcbiAgICAgIG5hbWVzOiBbJ3BvcnQnLCAnbmV0VHlwZScsICdpcFZlcicsICdhZGRyZXNzJ10sXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiAoby5hZGRyZXNzICE9IG51bGwpXG4gICAgICAgICAgPyAncnRjcDolZCAlcyBJUCVkICVzJ1xuICAgICAgICAgIDogJ3J0Y3A6JWQnO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1ydGNwLWZiOjk4IHRyci1pbnQgMTAwXG4gICAgICBwdXNoOiAncnRjcEZiVHJySW50JyxcbiAgICAgIHJlZzogL15ydGNwLWZiOihcXCp8XFxkKikgdHJyLWludCAoXFxkKikvLFxuICAgICAgbmFtZXM6IFsncGF5bG9hZCcsICd2YWx1ZSddLFxuICAgICAgZm9ybWF0OiAncnRjcC1mYjolcyB0cnItaW50ICVkJ1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaVxuICAgICAgcHVzaDogJ3J0Y3BGYicsXG4gICAgICByZWc6IC9ecnRjcC1mYjooXFwqfFxcZCopIChbXFx3LV9dKikoPzogKFtcXHctX10qKSk/LyxcbiAgICAgIG5hbWVzOiBbJ3BheWxvYWQnLCAndHlwZScsICdzdWJ0eXBlJ10sXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiAoby5zdWJ0eXBlICE9IG51bGwpXG4gICAgICAgICAgPyAncnRjcC1mYjolcyAlcyAlcydcbiAgICAgICAgICA6ICdydGNwLWZiOiVzICVzJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldFxuICAgICAgLy8gYT1leHRtYXA6MS9yZWN2b25seSBVUkktZ3BzLXN0cmluZ1xuICAgICAgLy8gYT1leHRtYXA6MyB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDplbmNyeXB0IHVybjppZXRmOnBhcmFtczpydHAtaGRyZXh0OnNtcHRlLXRjIDI1QDYwMC8yNFxuICAgICAgcHVzaDogJ2V4dCcsXG4gICAgICByZWc6IC9eZXh0bWFwOihcXGQrKSg/OlxcLyhcXHcrKSk/KD86ICh1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDplbmNyeXB0KSk/IChcXFMqKSg/OiAoXFxTKikpPy8sXG4gICAgICBuYW1lczogWyd2YWx1ZScsICdkaXJlY3Rpb24nLCAnZW5jcnlwdC11cmknLCAndXJpJywgJ2NvbmZpZyddLFxuICAgICAgZm9ybWF0OiBmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICdleHRtYXA6JWQnICtcbiAgICAgICAgICAoby5kaXJlY3Rpb24gPyAnLyVzJyA6ICcldicpICtcbiAgICAgICAgICAob1snZW5jcnlwdC11cmknXSA/ICcgJXMnIDogJyV2JykgK1xuICAgICAgICAgICcgJXMnICtcbiAgICAgICAgICAoby5jb25maWcgPyAnICVzJyA6ICcnKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1leHRtYXAtYWxsb3ctbWl4ZWRcbiAgICAgIG5hbWU6ICdleHRtYXBBbGxvd01peGVkJyxcbiAgICAgIHJlZzogL14oZXh0bWFwLWFsbG93LW1peGVkKS9cbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9Y3J5cHRvOjEgQUVTX0NNXzEyOF9ITUFDX1NIQTFfODAgaW5saW5lOlBTMXVRQ1ZlZUNGQ2FuVm1jamtwUHl3ak5XaGNZRDBtWFh0eGFWQlJ8Ml4yMHwxOjMyXG4gICAgICBwdXNoOiAnY3J5cHRvJyxcbiAgICAgIHJlZzogL15jcnlwdG86KFxcZCopIChbXFx3X10qKSAoXFxTKikoPzogKFxcUyopKT8vLFxuICAgICAgbmFtZXM6IFsnaWQnLCAnc3VpdGUnLCAnY29uZmlnJywgJ3Nlc3Npb25Db25maWcnXSxcbiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIChvLnNlc3Npb25Db25maWcgIT0gbnVsbClcbiAgICAgICAgICA/ICdjcnlwdG86JWQgJXMgJXMgJXMnXG4gICAgICAgICAgOiAnY3J5cHRvOiVkICVzICVzJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9c2V0dXA6YWN0cGFzc1xuICAgICAgbmFtZTogJ3NldHVwJyxcbiAgICAgIHJlZzogL15zZXR1cDooXFx3KikvLFxuICAgICAgZm9ybWF0OiAnc2V0dXA6JXMnXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPWNvbm5lY3Rpb246bmV3XG4gICAgICBuYW1lOiAnY29ubmVjdGlvblR5cGUnLFxuICAgICAgcmVnOiAvXmNvbm5lY3Rpb246KG5ld3xleGlzdGluZykvLFxuICAgICAgZm9ybWF0OiAnY29ubmVjdGlvbjolcydcbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9bWlkOjFcbiAgICAgIG5hbWU6ICdtaWQnLFxuICAgICAgcmVnOiAvXm1pZDooW15cXHNdKikvLFxuICAgICAgZm9ybWF0OiAnbWlkOiVzJ1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1tc2lkOjBjOGIwNjRkLWQ4MDctNDNiNC1iNDM0LWY5MmE4ODlkODU4NyA5ODE3ODY4NS1kNDA5LTQ2ZTAtOGUxNi03ZWYwZGIwZGI2NGFcbiAgICAgIG5hbWU6ICdtc2lkJyxcbiAgICAgIHJlZzogL15tc2lkOiguKikvLFxuICAgICAgZm9ybWF0OiAnbXNpZDolcydcbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9cHRpbWU6MjBcbiAgICAgIG5hbWU6ICdwdGltZScsXG4gICAgICByZWc6IC9ecHRpbWU6KFxcZCooPzpcXC5cXGQqKSopLyxcbiAgICAgIGZvcm1hdDogJ3B0aW1lOiVkJ1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1tYXhwdGltZTo2MFxuICAgICAgbmFtZTogJ21heHB0aW1lJyxcbiAgICAgIHJlZzogL15tYXhwdGltZTooXFxkKig/OlxcLlxcZCopKikvLFxuICAgICAgZm9ybWF0OiAnbWF4cHRpbWU6JWQnXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPXNlbmRyZWN2XG4gICAgICBuYW1lOiAnZGlyZWN0aW9uJyxcbiAgICAgIHJlZzogL14oc2VuZHJlY3Z8cmVjdm9ubHl8c2VuZG9ubHl8aW5hY3RpdmUpL1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1pY2UtbGl0ZVxuICAgICAgbmFtZTogJ2ljZWxpdGUnLFxuICAgICAgcmVnOiAvXihpY2UtbGl0ZSkvXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPWljZS11ZnJhZzpGN2dJXG4gICAgICBuYW1lOiAnaWNlVWZyYWcnLFxuICAgICAgcmVnOiAvXmljZS11ZnJhZzooXFxTKikvLFxuICAgICAgZm9ybWF0OiAnaWNlLXVmcmFnOiVzJ1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1pY2UtcHdkOng5Y21sL1l6aWNoVjIrWGxoaU11OGdcbiAgICAgIG5hbWU6ICdpY2VQd2QnLFxuICAgICAgcmVnOiAvXmljZS1wd2Q6KFxcUyopLyxcbiAgICAgIGZvcm1hdDogJ2ljZS1wd2Q6JXMnXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPWZpbmdlcnByaW50OlNIQS0xIDAwOjExOjIyOjMzOjQ0OjU1OjY2Ojc3Ojg4Ojk5OkFBOkJCOkNDOkREOkVFOkZGOjAwOjExOjIyOjMzXG4gICAgICBuYW1lOiAnZmluZ2VycHJpbnQnLFxuICAgICAgcmVnOiAvXmZpbmdlcnByaW50OihcXFMqKSAoXFxTKikvLFxuICAgICAgbmFtZXM6IFsndHlwZScsICdoYXNoJ10sXG4gICAgICBmb3JtYXQ6ICdmaW5nZXJwcmludDolcyAlcydcbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9Y2FuZGlkYXRlOjAgMSBVRFAgMjExMzY2NzMyNyAyMDMuMC4xMTMuMSA1NDQwMCB0eXAgaG9zdFxuICAgICAgLy8gYT1jYW5kaWRhdGU6MTE2Mjg3NTA4MSAxIHVkcCAyMTEzOTM3MTUxIDE5Mi4xNjguMzQuNzUgNjAwMTcgdHlwIGhvc3QgZ2VuZXJhdGlvbiAwIG5ldHdvcmstaWQgMyBuZXR3b3JrLWNvc3QgMTBcbiAgICAgIC8vIGE9Y2FuZGlkYXRlOjMyODk5MTI5NTcgMiB1ZHAgMTg0NTUwMTY5NSAxOTMuODQuNzcuMTk0IDYwMDE3IHR5cCBzcmZseCByYWRkciAxOTIuMTY4LjM0Ljc1IHJwb3J0IDYwMDE3IGdlbmVyYXRpb24gMCBuZXR3b3JrLWlkIDMgbmV0d29yay1jb3N0IDEwXG4gICAgICAvLyBhPWNhbmRpZGF0ZToyMjk4MTU2MjAgMSB0Y3AgMTUxODI4MDQ0NyAxOTIuMTY4LjE1MC4xOSA2MDAxNyB0eXAgaG9zdCB0Y3B0eXBlIGFjdGl2ZSBnZW5lcmF0aW9uIDAgbmV0d29yay1pZCAzIG5ldHdvcmstY29zdCAxMFxuICAgICAgLy8gYT1jYW5kaWRhdGU6MzI4OTkxMjk1NyAyIHRjcCAxODQ1NTAxNjk1IDE5My44NC43Ny4xOTQgNjAwMTcgdHlwIHNyZmx4IHJhZGRyIDE5Mi4xNjguMzQuNzUgcnBvcnQgNjAwMTcgdGNwdHlwZSBwYXNzaXZlIGdlbmVyYXRpb24gMCBuZXR3b3JrLWlkIDMgbmV0d29yay1jb3N0IDEwXG4gICAgICBwdXNoOidjYW5kaWRhdGVzJyxcbiAgICAgIHJlZzogL15jYW5kaWRhdGU6KFxcUyopIChcXGQqKSAoXFxTKikgKFxcZCopIChcXFMqKSAoXFxkKikgdHlwIChcXFMqKSg/OiByYWRkciAoXFxTKikgcnBvcnQgKFxcZCopKT8oPzogdGNwdHlwZSAoXFxTKikpPyg/OiBnZW5lcmF0aW9uIChcXGQqKSk/KD86IG5ldHdvcmstaWQgKFxcZCopKT8oPzogbmV0d29yay1jb3N0IChcXGQqKSk/LyxcbiAgICAgIG5hbWVzOiBbJ2ZvdW5kYXRpb24nLCAnY29tcG9uZW50JywgJ3RyYW5zcG9ydCcsICdwcmlvcml0eScsICdpcCcsICdwb3J0JywgJ3R5cGUnLCAncmFkZHInLCAncnBvcnQnLCAndGNwdHlwZScsICdnZW5lcmF0aW9uJywgJ25ldHdvcmstaWQnLCAnbmV0d29yay1jb3N0J10sXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciBzdHIgPSAnY2FuZGlkYXRlOiVzICVkICVzICVkICVzICVkIHR5cCAlcyc7XG5cbiAgICAgICAgc3RyICs9IChvLnJhZGRyICE9IG51bGwpID8gJyByYWRkciAlcyBycG9ydCAlZCcgOiAnJXYldic7XG5cbiAgICAgICAgLy8gTkI6IGNhbmRpZGF0ZSBoYXMgdGhyZWUgb3B0aW9uYWwgY2h1bmtzLCBzbyAldm9pZCBtaWRkbGVzIG9uZSBpZiBpdCdzIG1pc3NpbmdcbiAgICAgICAgc3RyICs9IChvLnRjcHR5cGUgIT0gbnVsbCkgPyAnIHRjcHR5cGUgJXMnIDogJyV2JztcblxuICAgICAgICBpZiAoby5nZW5lcmF0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICBzdHIgKz0gJyBnZW5lcmF0aW9uICVkJztcbiAgICAgICAgfVxuXG4gICAgICAgIHN0ciArPSAob1snbmV0d29yay1pZCddICE9IG51bGwpID8gJyBuZXR3b3JrLWlkICVkJyA6ICcldic7XG4gICAgICAgIHN0ciArPSAob1snbmV0d29yay1jb3N0J10gIT0gbnVsbCkgPyAnIG5ldHdvcmstY29zdCAlZCcgOiAnJXYnO1xuICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1lbmQtb2YtY2FuZGlkYXRlcyAoa2VlcCBhZnRlciB0aGUgY2FuZGlkYXRlcyBsaW5lIGZvciByZWFkYWJpbGl0eSlcbiAgICAgIG5hbWU6ICdlbmRPZkNhbmRpZGF0ZXMnLFxuICAgICAgcmVnOiAvXihlbmQtb2YtY2FuZGlkYXRlcykvXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPXJlbW90ZS1jYW5kaWRhdGVzOjEgMjAzLjAuMTEzLjEgNTQ0MDAgMiAyMDMuMC4xMTMuMSA1NDQwMSAuLi5cbiAgICAgIG5hbWU6ICdyZW1vdGVDYW5kaWRhdGVzJyxcbiAgICAgIHJlZzogL15yZW1vdGUtY2FuZGlkYXRlczooLiopLyxcbiAgICAgIGZvcm1hdDogJ3JlbW90ZS1jYW5kaWRhdGVzOiVzJ1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1pY2Utb3B0aW9uczpnb29nbGUtaWNlXG4gICAgICBuYW1lOiAnaWNlT3B0aW9ucycsXG4gICAgICByZWc6IC9eaWNlLW9wdGlvbnM6KFxcUyopLyxcbiAgICAgIGZvcm1hdDogJ2ljZS1vcHRpb25zOiVzJ1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1zc3JjOjI1NjYxMDc1NjkgY25hbWU6dDlZVThNMVV4VEY4WTFBMVxuICAgICAgcHVzaDogJ3NzcmNzJyxcbiAgICAgIHJlZzogL15zc3JjOihcXGQqKSAoW1xcd18tXSopKD86OiguKikpPy8sXG4gICAgICBuYW1lczogWydpZCcsICdhdHRyaWJ1dGUnLCAndmFsdWUnXSxcbiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIHN0ciA9ICdzc3JjOiVkJztcbiAgICAgICAgaWYgKG8uYXR0cmlidXRlICE9IG51bGwpIHtcbiAgICAgICAgICBzdHIgKz0gJyAlcyc7XG4gICAgICAgICAgaWYgKG8udmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc3RyICs9ICc6JXMnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1zc3JjLWdyb3VwOkZFQyAxIDJcbiAgICAgIC8vIGE9c3NyYy1ncm91cDpGRUMtRlIgMzAwNDM2NDE5NSAxMDgwNzcyMjQxXG4gICAgICBwdXNoOiAnc3NyY0dyb3VwcycsXG4gICAgICAvLyB0b2tlbi1jaGFyID0gJXgyMSAvICV4MjMtMjcgLyAleDJBLTJCIC8gJXgyRC0yRSAvICV4MzAtMzkgLyAleDQxLTVBIC8gJXg1RS03RVxuICAgICAgcmVnOiAvXnNzcmMtZ3JvdXA6KFtcXHgyMVxceDIzXFx4MjRcXHgyNVxceDI2XFx4MjdcXHgyQVxceDJCXFx4MkRcXHgyRVxcd10qKSAoLiopLyxcbiAgICAgIG5hbWVzOiBbJ3NlbWFudGljcycsICdzc3JjcyddLFxuICAgICAgZm9ybWF0OiAnc3NyYy1ncm91cDolcyAlcydcbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9bXNpZC1zZW1hbnRpYzogV01TIEp2bGFtNVgzU1gxT1A2cG4yMHpXb2d2YUtKejVIamY5T25sVlxuICAgICAgbmFtZTogJ21zaWRTZW1hbnRpYycsXG4gICAgICByZWc6IC9ebXNpZC1zZW1hbnRpYzpcXHM/KFxcdyopIChcXFMqKS8sXG4gICAgICBuYW1lczogWydzZW1hbnRpYycsICd0b2tlbiddLFxuICAgICAgZm9ybWF0OiAnbXNpZC1zZW1hbnRpYzogJXMgJXMnIC8vIHNwYWNlIGFmdGVyICc6JyBpcyBub3QgYWNjaWRlbnRhbFxuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1ncm91cDpCVU5ETEUgYXVkaW8gdmlkZW9cbiAgICAgIHB1c2g6ICdncm91cHMnLFxuICAgICAgcmVnOiAvXmdyb3VwOihcXHcqKSAoLiopLyxcbiAgICAgIG5hbWVzOiBbJ3R5cGUnLCAnbWlkcyddLFxuICAgICAgZm9ybWF0OiAnZ3JvdXA6JXMgJXMnXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPXJ0Y3AtbXV4XG4gICAgICBuYW1lOiAncnRjcE11eCcsXG4gICAgICByZWc6IC9eKHJ0Y3AtbXV4KS9cbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9cnRjcC1yc2l6ZVxuICAgICAgbmFtZTogJ3J0Y3BSc2l6ZScsXG4gICAgICByZWc6IC9eKHJ0Y3AtcnNpemUpL1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1zY3RwbWFwOjUwMDAgd2VicnRjLWRhdGFjaGFubmVsIDEwMjRcbiAgICAgIG5hbWU6ICdzY3RwbWFwJyxcbiAgICAgIHJlZzogL15zY3RwbWFwOihbXFx3Xy9dKikgKFxcUyopKD86IChcXFMqKSk/LyxcbiAgICAgIG5hbWVzOiBbJ3NjdHBtYXBOdW1iZXInLCAnYXBwJywgJ21heE1lc3NhZ2VTaXplJ10sXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiAoby5tYXhNZXNzYWdlU2l6ZSAhPSBudWxsKVxuICAgICAgICAgID8gJ3NjdHBtYXA6JXMgJXMgJXMnXG4gICAgICAgICAgOiAnc2N0cG1hcDolcyAlcyc7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPXgtZ29vZ2xlLWZsYWc6Y29uZmVyZW5jZVxuICAgICAgbmFtZTogJ3hHb29nbGVGbGFnJyxcbiAgICAgIHJlZzogL154LWdvb2dsZS1mbGFnOihbXlxcc10qKS8sXG4gICAgICBmb3JtYXQ6ICd4LWdvb2dsZS1mbGFnOiVzJ1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1yaWQ6MSBzZW5kIG1heC13aWR0aD0xMjgwO21heC1oZWlnaHQ9NzIwO21heC1mcHM9MzA7ZGVwZW5kPTBcbiAgICAgIHB1c2g6ICdyaWRzJyxcbiAgICAgIHJlZzogL15yaWQ6KFtcXGRcXHddKykgKFxcdyspKD86IChbXFxTfCBdKikpPy8sXG4gICAgICBuYW1lczogWydpZCcsICdkaXJlY3Rpb24nLCAncGFyYW1zJ10sXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiAoby5wYXJhbXMpID8gJ3JpZDolcyAlcyAlcycgOiAncmlkOiVzICVzJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9aW1hZ2VhdHRyOjk3IHNlbmQgW3g9ODAwLHk9NjQwLHNhcj0xLjEscT0wLjZdIFt4PTQ4MCx5PTMyMF0gcmVjdiBbeD0zMzAseT0yNTBdXG4gICAgICAvLyBhPWltYWdlYXR0cjoqIHNlbmQgW3g9ODAwLHk9NjQwXSByZWN2ICpcbiAgICAgIC8vIGE9aW1hZ2VhdHRyOjEwMCByZWN2IFt4PTMyMCx5PTI0MF1cbiAgICAgIHB1c2g6ICdpbWFnZWF0dHJzJyxcbiAgICAgIHJlZzogbmV3IFJlZ0V4cChcbiAgICAgICAgLy8gYT1pbWFnZWF0dHI6OTdcbiAgICAgICAgJ15pbWFnZWF0dHI6KFxcXFxkK3xcXFxcKiknICtcbiAgICAgICAgLy8gc2VuZCBbeD04MDAseT02NDAsc2FyPTEuMSxxPTAuNl0gW3g9NDgwLHk9MzIwXVxuICAgICAgICAnW1xcXFxzXFxcXHRdKyhzZW5kfHJlY3YpW1xcXFxzXFxcXHRdKyhcXFxcKnxcXFxcW1xcXFxTK1xcXFxdKD86W1xcXFxzXFxcXHRdK1xcXFxbXFxcXFMrXFxcXF0pKiknICtcbiAgICAgICAgLy8gcmVjdiBbeD0zMzAseT0yNTBdXG4gICAgICAgICcoPzpbXFxcXHNcXFxcdF0rKHJlY3Z8c2VuZClbXFxcXHNcXFxcdF0rKFxcXFwqfFxcXFxbXFxcXFMrXFxcXF0oPzpbXFxcXHNcXFxcdF0rXFxcXFtcXFxcUytcXFxcXSkqKSk/J1xuICAgICAgKSxcbiAgICAgIG5hbWVzOiBbJ3B0JywgJ2RpcjEnLCAnYXR0cnMxJywgJ2RpcjInLCAnYXR0cnMyJ10sXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiAnaW1hZ2VhdHRyOiVzICVzICVzJyArIChvLmRpcjIgPyAnICVzICVzJyA6ICcnKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGE9c2ltdWxjYXN0OnNlbmQgMSwyLDM7fjQsfjUgcmVjdiA2O343LH44XG4gICAgICAvLyBhPXNpbXVsY2FzdDpyZWN2IDE7NCw1IHNlbmQgNjs3XG4gICAgICBuYW1lOiAnc2ltdWxjYXN0JyxcbiAgICAgIHJlZzogbmV3IFJlZ0V4cChcbiAgICAgICAgLy8gYT1zaW11bGNhc3Q6XG4gICAgICAgICdec2ltdWxjYXN0OicgK1xuICAgICAgICAvLyBzZW5kIDEsMiwzO340LH41XG4gICAgICAgICcoc2VuZHxyZWN2KSAoW2EtekEtWjAtOVxcXFwtX347LF0rKScgK1xuICAgICAgICAvLyBzcGFjZSArIHJlY3YgNjt+Nyx+OFxuICAgICAgICAnKD86XFxcXHM/KHNlbmR8cmVjdikgKFthLXpBLVowLTlcXFxcLV9+OyxdKykpPycgK1xuICAgICAgICAvLyBlbmRcbiAgICAgICAgJyQnXG4gICAgICApLFxuICAgICAgbmFtZXM6IFsnZGlyMScsICdsaXN0MScsICdkaXIyJywgJ2xpc3QyJ10sXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiAnc2ltdWxjYXN0OiVzICVzJyArIChvLmRpcjIgPyAnICVzICVzJyA6ICcnKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIG9sZCBzaW11bGNhc3QgZHJhZnQgMDMgKGltcGxlbWVudGVkIGJ5IEZpcmVmb3gpXG4gICAgICAvLyAgIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1pZXRmLW1tdXNpYy1zZHAtc2ltdWxjYXN0LTAzXG4gICAgICAvLyBhPXNpbXVsY2FzdDogcmVjdiBwdD05Nzs5OCBzZW5kIHB0PTk3XG4gICAgICAvLyBhPXNpbXVsY2FzdDogc2VuZCByaWQ9NTs2OzcgcGF1c2VkPTYsN1xuICAgICAgbmFtZTogJ3NpbXVsY2FzdF8wMycsXG4gICAgICByZWc6IC9ec2ltdWxjYXN0OltcXHNcXHRdKyhbXFxTK1xcc1xcdF0rKSQvLFxuICAgICAgbmFtZXM6IFsndmFsdWUnXSxcbiAgICAgIGZvcm1hdDogJ3NpbXVsY2FzdDogJXMnXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPWZyYW1lcmF0ZToyNVxuICAgICAgLy8gYT1mcmFtZXJhdGU6MjkuOTdcbiAgICAgIG5hbWU6ICdmcmFtZXJhdGUnLFxuICAgICAgcmVnOiAvXmZyYW1lcmF0ZTooXFxkKyg/OiR8XFwuXFxkKykpLyxcbiAgICAgIGZvcm1hdDogJ2ZyYW1lcmF0ZTolcydcbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIFJGQzQ1NzBcbiAgICAgIC8vIGE9c291cmNlLWZpbHRlcjogaW5jbCBJTiBJUDQgMjM5LjUuMi4zMSAxMC4xLjE1LjVcbiAgICAgIG5hbWU6ICdzb3VyY2VGaWx0ZXInLFxuICAgICAgcmVnOiAvXnNvdXJjZS1maWx0ZXI6ICooZXhjbHxpbmNsKSAoXFxTKikgKElQNHxJUDZ8XFwqKSAoXFxTKikgKC4qKS8sXG4gICAgICBuYW1lczogWydmaWx0ZXJNb2RlJywgJ25ldFR5cGUnLCAnYWRkcmVzc1R5cGVzJywgJ2Rlc3RBZGRyZXNzJywgJ3NyY0xpc3QnXSxcbiAgICAgIGZvcm1hdDogJ3NvdXJjZS1maWx0ZXI6ICVzICVzICVzICVzICVzJ1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1idW5kbGUtb25seVxuICAgICAgbmFtZTogJ2J1bmRsZU9ubHknLFxuICAgICAgcmVnOiAvXihidW5kbGUtb25seSkvXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPWxhYmVsOjFcbiAgICAgIG5hbWU6ICdsYWJlbCcsXG4gICAgICByZWc6IC9ebGFiZWw6KC4rKS8sXG4gICAgICBmb3JtYXQ6ICdsYWJlbDolcydcbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIFJGQyB2ZXJzaW9uIDI2IGZvciBTQ1RQIG92ZXIgRFRMU1xuICAgICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtbW11c2ljLXNjdHAtc2RwLTI2I3NlY3Rpb24tNVxuICAgICAgbmFtZTogJ3NjdHBQb3J0JyxcbiAgICAgIHJlZzogL15zY3RwLXBvcnQ6KFxcZCspJC8sXG4gICAgICBmb3JtYXQ6ICdzY3RwLXBvcnQ6JXMnXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBSRkMgdmVyc2lvbiAyNiBmb3IgU0NUUCBvdmVyIERUTFNcbiAgICAgIC8vIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9kcmFmdC1pZXRmLW1tdXNpYy1zY3RwLXNkcC0yNiNzZWN0aW9uLTZcbiAgICAgIG5hbWU6ICdtYXhNZXNzYWdlU2l6ZScsXG4gICAgICByZWc6IC9ebWF4LW1lc3NhZ2Utc2l6ZTooXFxkKykkLyxcbiAgICAgIGZvcm1hdDogJ21heC1tZXNzYWdlLXNpemU6JXMnXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBSRkM3MjczXG4gICAgICAvLyBhPXRzLXJlZmNsazpwdHA9SUVFRTE1ODgtMjAwODozOS1BNy05NC1GRi1GRS0wNy1DQi1EMDozN1xuICAgICAgcHVzaDondHNSZWZDbG9ja3MnLFxuICAgICAgcmVnOiAvXnRzLXJlZmNsazooW15cXHM9XSopKD86PShcXFMqKSk/LyxcbiAgICAgIG5hbWVzOiBbJ2Nsa3NyYycsICdjbGtzcmNFeHQnXSxcbiAgICAgIGZvcm1hdDogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuICd0cy1yZWZjbGs6JXMnICsgKG8uY2xrc3JjRXh0ICE9IG51bGwgPyAnPSVzJyA6ICcnKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIFJGQzcyNzNcbiAgICAgIC8vIGE9bWVkaWFjbGs6ZGlyZWN0PTk2MzIxNDQyNFxuICAgICAgbmFtZTonbWVkaWFDbGsnLFxuICAgICAgcmVnOiAvXm1lZGlhY2xrOig/OmlkPShcXFMqKSk/ICooW15cXHM9XSopKD86PShcXFMqKSk/KD86ICpyYXRlPShcXGQrKVxcLyhcXGQrKSk/LyxcbiAgICAgIG5hbWVzOiBbJ2lkJywgJ21lZGlhQ2xvY2tOYW1lJywgJ21lZGlhQ2xvY2tWYWx1ZScsICdyYXRlTnVtZXJhdG9yJywgJ3JhdGVEZW5vbWluYXRvciddLFxuICAgICAgZm9ybWF0OiBmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgc3RyID0gJ21lZGlhY2xrOic7XG4gICAgICAgIHN0ciArPSAoby5pZCAhPSBudWxsID8gJ2lkPSVzICVzJyA6ICcldiVzJyk7XG4gICAgICAgIHN0ciArPSAoby5tZWRpYUNsb2NrVmFsdWUgIT0gbnVsbCA/ICc9JXMnIDogJycpO1xuICAgICAgICBzdHIgKz0gKG8ucmF0ZU51bWVyYXRvciAhPSBudWxsID8gJyByYXRlPSVzJyA6ICcnKTtcbiAgICAgICAgc3RyICs9IChvLnJhdGVEZW5vbWluYXRvciAhPSBudWxsID8gJy8lcycgOiAnJyk7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPWtleXdkczprZXl3b3Jkc1xuICAgICAgbmFtZTogJ2tleXdvcmRzJyxcbiAgICAgIHJlZzogL15rZXl3ZHM6KC4rKSQvLFxuICAgICAgZm9ybWF0OiAna2V5d2RzOiVzJ1xuICAgIH0sXG4gICAge1xuICAgICAgLy8gYT1jb250ZW50Om1haW5cbiAgICAgIG5hbWU6ICdjb250ZW50JyxcbiAgICAgIHJlZzogL15jb250ZW50OiguKykvLFxuICAgICAgZm9ybWF0OiAnY29udGVudDolcydcbiAgICB9LFxuICAgIC8vIEJGQ1AgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzQ1ODNcbiAgICB7XG4gICAgICAvLyBhPWZsb29yY3RybDpjLXNcbiAgICAgIG5hbWU6ICdiZmNwRmxvb3JDdHJsJyxcbiAgICAgIHJlZzogL15mbG9vcmN0cmw6KGMtb25seXxzLW9ubHl8Yy1zKS8sXG4gICAgICBmb3JtYXQ6ICdmbG9vcmN0cmw6JXMnXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPWNvbmZpZDoxXG4gICAgICBuYW1lOiAnYmZjcENvbmZJZCcsXG4gICAgICByZWc6IC9eY29uZmlkOihcXGQrKS8sXG4gICAgICBmb3JtYXQ6ICdjb25maWQ6JXMnXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPXVzZXJpZDoxXG4gICAgICBuYW1lOiAnYmZjcFVzZXJJZCcsXG4gICAgICByZWc6IC9edXNlcmlkOihcXGQrKS8sXG4gICAgICBmb3JtYXQ6ICd1c2VyaWQ6JXMnXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBhPWZsb29yaWQ6MVxuICAgICAgbmFtZTogJ2JmY3BGbG9vcklkJyxcbiAgICAgIHJlZzogL15mbG9vcmlkOiguKykgKD86bS1zdHJlYW18bXN0cm0pOiguKykvLFxuICAgICAgbmFtZXM6IFsnaWQnLCAnbVN0cmVhbSddLFxuICAgICAgZm9ybWF0OiAnZmxvb3JpZDolcyBtc3RybTolcydcbiAgICB9LFxuICAgIHtcbiAgICAgIC8vIGFueSBhPSB0aGF0IHdlIGRvbid0IHVuZGVyc3RhbmQgaXMga2VwdCB2ZXJiYXRpbSBvbiBtZWRpYS5pbnZhbGlkXG4gICAgICBwdXNoOiAnaW52YWxpZCcsXG4gICAgICBuYW1lczogWyd2YWx1ZSddXG4gICAgfVxuICBdXG59O1xuXG4vLyBzZXQgc2Vuc2libGUgZGVmYXVsdHMgdG8gYXZvaWQgcG9sbHV0aW5nIHRoZSBncmFtbWFyIHdpdGggYm9yaW5nIGRldGFpbHNcbk9iamVjdC5rZXlzKGdyYW1tYXIpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICB2YXIgb2JqcyA9IGdyYW1tYXJba2V5XTtcbiAgb2Jqcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICBpZiAoIW9iai5yZWcpIHtcbiAgICAgIG9iai5yZWcgPSAvKC4qKS87XG4gICAgfVxuICAgIGlmICghb2JqLmZvcm1hdCkge1xuICAgICAgb2JqLmZvcm1hdCA9ICclcyc7XG4gICAgfVxuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/sdp-transform/lib/grammar.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/sdp-transform/lib/index.js":
/*!*************************************************!*\
  !*** ./node_modules/sdp-transform/lib/index.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval(__webpack_require__.ts("var parser = __webpack_require__(/*! ./parser */ \"(app-pages-browser)/./node_modules/sdp-transform/lib/parser.js\");\nvar writer = __webpack_require__(/*! ./writer */ \"(app-pages-browser)/./node_modules/sdp-transform/lib/writer.js\");\nvar grammar = __webpack_require__(/*! ./grammar */ \"(app-pages-browser)/./node_modules/sdp-transform/lib/grammar.js\");\n\nexports.grammar = grammar;\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseParams = parser.parseParams;\nexports.parseFmtpConfig = parser.parseFmtpConfig; // Alias of parseParams().\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9zZHAtdHJhbnNmb3JtL2xpYi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxhQUFhLG1CQUFPLENBQUMsZ0ZBQVU7QUFDL0IsYUFBYSxtQkFBTyxDQUFDLGdGQUFVO0FBQy9CLGNBQWMsbUJBQU8sQ0FBQyxrRkFBVzs7QUFFakMsZUFBZTtBQUNmLGFBQWE7QUFDYixhQUFhO0FBQ2IsbUJBQW1CO0FBQ25CLHVCQUF1QiwyQkFBMkI7QUFDbEQscUJBQXFCO0FBQ3JCLDZCQUE2QjtBQUM3Qiw0QkFBNEI7QUFDNUIsZ0NBQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9zZHAtdHJhbnNmb3JtL2xpYi9pbmRleC5qcz9kNGM2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBwYXJzZXIgPSByZXF1aXJlKCcuL3BhcnNlcicpO1xudmFyIHdyaXRlciA9IHJlcXVpcmUoJy4vd3JpdGVyJyk7XG52YXIgZ3JhbW1hciA9IHJlcXVpcmUoJy4vZ3JhbW1hcicpO1xuXG5leHBvcnRzLmdyYW1tYXIgPSBncmFtbWFyO1xuZXhwb3J0cy53cml0ZSA9IHdyaXRlcjtcbmV4cG9ydHMucGFyc2UgPSBwYXJzZXIucGFyc2U7XG5leHBvcnRzLnBhcnNlUGFyYW1zID0gcGFyc2VyLnBhcnNlUGFyYW1zO1xuZXhwb3J0cy5wYXJzZUZtdHBDb25maWcgPSBwYXJzZXIucGFyc2VGbXRwQ29uZmlnOyAvLyBBbGlhcyBvZiBwYXJzZVBhcmFtcygpLlxuZXhwb3J0cy5wYXJzZVBheWxvYWRzID0gcGFyc2VyLnBhcnNlUGF5bG9hZHM7XG5leHBvcnRzLnBhcnNlUmVtb3RlQ2FuZGlkYXRlcyA9IHBhcnNlci5wYXJzZVJlbW90ZUNhbmRpZGF0ZXM7XG5leHBvcnRzLnBhcnNlSW1hZ2VBdHRyaWJ1dGVzID0gcGFyc2VyLnBhcnNlSW1hZ2VBdHRyaWJ1dGVzO1xuZXhwb3J0cy5wYXJzZVNpbXVsY2FzdFN0cmVhbUxpc3QgPSBwYXJzZXIucGFyc2VTaW11bGNhc3RTdHJlYW1MaXN0O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/sdp-transform/lib/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/sdp-transform/lib/parser.js":
/*!**************************************************!*\
  !*** ./node_modules/sdp-transform/lib/parser.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval(__webpack_require__.ts("var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = __webpack_require__(/*! ./grammar */ \"(app-pages-browser)/./node_modules/sdp-transform/lib/grammar.js\");\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.toString().split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9zZHAtdHJhbnNmb3JtL2xpYi9wYXJzZXIuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsZ0RBQWdEOztBQUVoRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLG1CQUFPLENBQUMsa0ZBQVc7QUFDakM7O0FBRUEsYUFBYTtBQUNiO0FBQ0E7QUFDQSwwQkFBMEI7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDLHdDQUF3QztBQUN4Qzs7QUFFQSxvQkFBb0Isa0NBQWtDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILHlCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQjtBQUNuQixxQkFBcUIsNkJBQTZCO0FBQ2xEOztBQUVBO0FBQ0EsdUJBQXVCOztBQUV2QixxQkFBcUI7QUFDckI7QUFDQTs7QUFFQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBLDRCQUE0QjtBQUM1QjtBQUNBLDhFQUE4RTtBQUM5RSxHQUFHO0FBQ0g7O0FBRUEsZ0NBQWdDO0FBQ2hDLHFCQUFxQjtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvc2RwLXRyYW5zZm9ybS9saWIvcGFyc2VyLmpzP2EwMTYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHRvSW50SWZJbnQgPSBmdW5jdGlvbiAodikge1xuICByZXR1cm4gU3RyaW5nKE51bWJlcih2KSkgPT09IHYgPyBOdW1iZXIodikgOiB2O1xufTtcblxudmFyIGF0dGFjaFByb3BlcnRpZXMgPSBmdW5jdGlvbiAobWF0Y2gsIGxvY2F0aW9uLCBuYW1lcywgcmF3TmFtZSkge1xuICBpZiAocmF3TmFtZSAmJiAhbmFtZXMpIHtcbiAgICBsb2NhdGlvbltyYXdOYW1lXSA9IHRvSW50SWZJbnQobWF0Y2hbMV0pO1xuICB9XG4gIGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmIChtYXRjaFtpKzFdICE9IG51bGwpIHtcbiAgICAgICAgbG9jYXRpb25bbmFtZXNbaV1dID0gdG9JbnRJZkludChtYXRjaFtpKzFdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbnZhciBwYXJzZVJlZyA9IGZ1bmN0aW9uIChvYmosIGxvY2F0aW9uLCBjb250ZW50KSB7XG4gIHZhciBuZWVkc0JsYW5rID0gb2JqLm5hbWUgJiYgb2JqLm5hbWVzO1xuICBpZiAob2JqLnB1c2ggJiYgIWxvY2F0aW9uW29iai5wdXNoXSkge1xuICAgIGxvY2F0aW9uW29iai5wdXNoXSA9IFtdO1xuICB9XG4gIGVsc2UgaWYgKG5lZWRzQmxhbmsgJiYgIWxvY2F0aW9uW29iai5uYW1lXSkge1xuICAgIGxvY2F0aW9uW29iai5uYW1lXSA9IHt9O1xuICB9XG4gIHZhciBrZXlMb2NhdGlvbiA9IG9iai5wdXNoID9cbiAgICB7fSA6ICAvLyBibGFuayBvYmplY3QgdGhhdCB3aWxsIGJlIHB1c2hlZFxuICAgIG5lZWRzQmxhbmsgPyBsb2NhdGlvbltvYmoubmFtZV0gOiBsb2NhdGlvbjsgLy8gb3RoZXJ3aXNlLCBuYW1lZCBsb2NhdGlvbiBvciByb290XG5cbiAgYXR0YWNoUHJvcGVydGllcyhjb250ZW50Lm1hdGNoKG9iai5yZWcpLCBrZXlMb2NhdGlvbiwgb2JqLm5hbWVzLCBvYmoubmFtZSk7XG5cbiAgaWYgKG9iai5wdXNoKSB7XG4gICAgbG9jYXRpb25bb2JqLnB1c2hdLnB1c2goa2V5TG9jYXRpb24pO1xuICB9XG59O1xuXG52YXIgZ3JhbW1hciA9IHJlcXVpcmUoJy4vZ3JhbW1hcicpO1xudmFyIHZhbGlkTGluZSA9IFJlZ0V4cC5wcm90b3R5cGUudGVzdC5iaW5kKC9eKFthLXpdKT0oLiopLyk7XG5cbmV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbiAoc2RwKSB7XG4gIHZhciBzZXNzaW9uID0ge31cbiAgICAsIG1lZGlhID0gW11cbiAgICAsIGxvY2F0aW9uID0gc2Vzc2lvbjsgLy8gcG9pbnRzIGF0IHdoZXJlIHByb3BlcnRpZXMgZ28gdW5kZXIgKG9uZSBvZiB0aGUgYWJvdmUpXG5cbiAgLy8gcGFyc2UgbGluZXMgd2UgdW5kZXJzdGFuZFxuICBzZHAuc3BsaXQoLyhcXHJcXG58XFxyfFxcbikvKS5maWx0ZXIodmFsaWRMaW5lKS5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7XG4gICAgdmFyIHR5cGUgPSBsWzBdO1xuICAgIHZhciBjb250ZW50ID0gbC5zbGljZSgyKTtcbiAgICBpZiAodHlwZSA9PT0gJ20nKSB7XG4gICAgICBtZWRpYS5wdXNoKHtydHA6IFtdLCBmbXRwOiBbXX0pO1xuICAgICAgbG9jYXRpb24gPSBtZWRpYVttZWRpYS5sZW5ndGgtMV07IC8vIHBvaW50IGF0IGxhdGVzdCBtZWRpYSBsaW5lXG4gICAgfVxuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCAoZ3JhbW1hclt0eXBlXSB8fCBbXSkubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgIHZhciBvYmogPSBncmFtbWFyW3R5cGVdW2pdO1xuICAgICAgaWYgKG9iai5yZWcudGVzdChjb250ZW50KSkge1xuICAgICAgICByZXR1cm4gcGFyc2VSZWcob2JqLCBsb2NhdGlvbiwgY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBzZXNzaW9uLm1lZGlhID0gbWVkaWE7IC8vIGxpbmsgaXQgdXBcbiAgcmV0dXJuIHNlc3Npb247XG59O1xuXG52YXIgcGFyYW1SZWR1Y2VyID0gZnVuY3Rpb24gKGFjYywgZXhwcikge1xuICB2YXIgcyA9IGV4cHIuc3BsaXQoLz0oLispLywgMik7XG4gIGlmIChzLmxlbmd0aCA9PT0gMikge1xuICAgIGFjY1tzWzBdXSA9IHRvSW50SWZJbnQoc1sxXSk7XG4gIH0gZWxzZSBpZiAocy5sZW5ndGggPT09IDEgJiYgZXhwci5sZW5ndGggPiAxKSB7XG4gICAgYWNjW3NbMF1dID0gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBhY2M7XG59O1xuXG5leHBvcnRzLnBhcnNlUGFyYW1zID0gZnVuY3Rpb24gKHN0cikge1xuICByZXR1cm4gc3RyLnNwbGl0KC87XFxzPy8pLnJlZHVjZShwYXJhbVJlZHVjZXIsIHt9KTtcbn07XG5cbi8vIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IC0gYWxpYXMgd2lsbCBiZSByZW1vdmVkIGluIDMuMC4wXG5leHBvcnRzLnBhcnNlRm10cENvbmZpZyA9IGV4cG9ydHMucGFyc2VQYXJhbXM7XG5cbmV4cG9ydHMucGFyc2VQYXlsb2FkcyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgcmV0dXJuIHN0ci50b1N0cmluZygpLnNwbGl0KCcgJykubWFwKE51bWJlcik7XG59O1xuXG5leHBvcnRzLnBhcnNlUmVtb3RlQ2FuZGlkYXRlcyA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIGNhbmRpZGF0ZXMgPSBbXTtcbiAgdmFyIHBhcnRzID0gc3RyLnNwbGl0KCcgJykubWFwKHRvSW50SWZJbnQpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgY2FuZGlkYXRlcy5wdXNoKHtcbiAgICAgIGNvbXBvbmVudDogcGFydHNbaV0sXG4gICAgICBpcDogcGFydHNbaSArIDFdLFxuICAgICAgcG9ydDogcGFydHNbaSArIDJdXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGNhbmRpZGF0ZXM7XG59O1xuXG5leHBvcnRzLnBhcnNlSW1hZ2VBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKHN0cikge1xuICByZXR1cm4gc3RyLnNwbGl0KCcgJykubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgcmV0dXJuIGl0ZW0uc3Vic3RyaW5nKDEsIGl0ZW0ubGVuZ3RoLTEpLnNwbGl0KCcsJykucmVkdWNlKHBhcmFtUmVkdWNlciwge30pO1xuICB9KTtcbn07XG5cbmV4cG9ydHMucGFyc2VTaW11bGNhc3RTdHJlYW1MaXN0ID0gZnVuY3Rpb24gKHN0cikge1xuICByZXR1cm4gc3RyLnNwbGl0KCc7JykubWFwKGZ1bmN0aW9uIChzdHJlYW0pIHtcbiAgICByZXR1cm4gc3RyZWFtLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChmb3JtYXQpIHtcbiAgICAgIHZhciBzY2lkLCBwYXVzZWQgPSBmYWxzZTtcblxuICAgICAgaWYgKGZvcm1hdFswXSAhPT0gJ34nKSB7XG4gICAgICAgIHNjaWQgPSB0b0ludElmSW50KGZvcm1hdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzY2lkID0gdG9JbnRJZkludChmb3JtYXQuc3Vic3RyaW5nKDEsIGZvcm1hdC5sZW5ndGgpKTtcbiAgICAgICAgcGF1c2VkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2NpZDogc2NpZCxcbiAgICAgICAgcGF1c2VkOiBwYXVzZWRcbiAgICAgIH07XG4gICAgfSk7XG4gIH0pO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/sdp-transform/lib/parser.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/sdp-transform/lib/writer.js":
/*!**************************************************!*\
  !*** ./node_modules/sdp-transform/lib/writer.js ***!
  \**************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var grammar = __webpack_require__(/*! ./grammar */ \"(app-pages-browser)/./node_modules/sdp-transform/lib/grammar.js\");\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9zZHAtdHJhbnNmb3JtL2xpYi93cml0ZXIuanMiLCJtYXBwaW5ncyI6IkFBQUEsY0FBYyxtQkFBTyxDQUFDLGtGQUFXOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3NkcC10cmFuc2Zvcm0vbGliL3dyaXRlci5qcz82MDlmIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBncmFtbWFyID0gcmVxdWlyZSgnLi9ncmFtbWFyJyk7XG5cbi8vIGN1c3RvbWl6ZWQgdXRpbC5mb3JtYXQgLSBkaXNjYXJkcyBleGNlc3MgYXJndW1lbnRzIGFuZCBjYW4gdm9pZCBtaWRkbGUgb25lc1xudmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkdiVdL2c7XG52YXIgZm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdFN0cikge1xuICB2YXIgaSA9IDE7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHJldHVybiBmb3JtYXRTdHIucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uICh4KSB7XG4gICAgaWYgKGkgPj0gbGVuKSB7XG4gICAgICByZXR1cm4geDsgLy8gbWlzc2luZyBhcmd1bWVudFxuICAgIH1cbiAgICB2YXIgYXJnID0gYXJnc1tpXTtcbiAgICBpICs9IDE7XG4gICAgc3dpdGNoICh4KSB7XG4gICAgY2FzZSAnJSUnOlxuICAgICAgcmV0dXJuICclJztcbiAgICBjYXNlICclcyc6XG4gICAgICByZXR1cm4gU3RyaW5nKGFyZyk7XG4gICAgY2FzZSAnJWQnOlxuICAgICAgcmV0dXJuIE51bWJlcihhcmcpO1xuICAgIGNhc2UgJyV2JzpcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH0pO1xuICAvLyBOQjogd2UgZGlzY2FyZCBleGNlc3MgYXJndW1lbnRzIC0gdGhleSBhcmUgdHlwaWNhbGx5IHVuZGVmaW5lZCBmcm9tIG1ha2VMaW5lXG59O1xuXG52YXIgbWFrZUxpbmUgPSBmdW5jdGlvbiAodHlwZSwgb2JqLCBsb2NhdGlvbikge1xuICB2YXIgc3RyID0gb2JqLmZvcm1hdCBpbnN0YW5jZW9mIEZ1bmN0aW9uID9cbiAgICAob2JqLmZvcm1hdChvYmoucHVzaCA/IGxvY2F0aW9uIDogbG9jYXRpb25bb2JqLm5hbWVdKSkgOlxuICAgIG9iai5mb3JtYXQ7XG5cbiAgdmFyIGFyZ3MgPSBbdHlwZSArICc9JyArIHN0cl07XG4gIGlmIChvYmoubmFtZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5uYW1lcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgdmFyIG4gPSBvYmoubmFtZXNbaV07XG4gICAgICBpZiAob2JqLm5hbWUpIHtcbiAgICAgICAgYXJncy5wdXNoKGxvY2F0aW9uW29iai5uYW1lXVtuXSk7XG4gICAgICB9XG4gICAgICBlbHNlIHsgLy8gZm9yIG1MaW5lIGFuZCBwdXNoIGF0dHJpYnV0ZXNcbiAgICAgICAgYXJncy5wdXNoKGxvY2F0aW9uW29iai5uYW1lc1tpXV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBhcmdzLnB1c2gobG9jYXRpb25bb2JqLm5hbWVdKTtcbiAgfVxuICByZXR1cm4gZm9ybWF0LmFwcGx5KG51bGwsIGFyZ3MpO1xufTtcblxuLy8gUkZDIHNwZWNpZmllZCBvcmRlclxuLy8gVE9ETzogZXh0ZW5kIHRoaXMgd2l0aCBhbGwgdGhlIHJlc3RcbnZhciBkZWZhdWx0T3V0ZXJPcmRlciA9IFtcbiAgJ3YnLCAnbycsICdzJywgJ2knLFxuICAndScsICdlJywgJ3AnLCAnYycsXG4gICdiJywgJ3QnLCAncicsICd6JywgJ2EnXG5dO1xudmFyIGRlZmF1bHRJbm5lck9yZGVyID0gWydpJywgJ2MnLCAnYicsICdhJ107XG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2Vzc2lvbiwgb3B0cykge1xuICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgLy8gZW5zdXJlIGNlcnRhaW4gcHJvcGVydGllcyBleGlzdFxuICBpZiAoc2Vzc2lvbi52ZXJzaW9uID09IG51bGwpIHtcbiAgICBzZXNzaW9uLnZlcnNpb24gPSAwOyAvLyAndj0wJyBtdXN0IGJlIHRoZXJlIChvbmx5IGRlZmluZWQgdmVyc2lvbiBhdG0pXG4gIH1cbiAgaWYgKHNlc3Npb24ubmFtZSA9PSBudWxsKSB7XG4gICAgc2Vzc2lvbi5uYW1lID0gJyAnOyAvLyAncz0gJyBtdXN0IGJlIHRoZXJlIGlmIG5vIG1lYW5pbmdmdWwgbmFtZSBzZXRcbiAgfVxuICBzZXNzaW9uLm1lZGlhLmZvckVhY2goZnVuY3Rpb24gKG1MaW5lKSB7XG4gICAgaWYgKG1MaW5lLnBheWxvYWRzID09IG51bGwpIHtcbiAgICAgIG1MaW5lLnBheWxvYWRzID0gJyc7XG4gICAgfVxuICB9KTtcblxuICB2YXIgb3V0ZXJPcmRlciA9IG9wdHMub3V0ZXJPcmRlciB8fCBkZWZhdWx0T3V0ZXJPcmRlcjtcbiAgdmFyIGlubmVyT3JkZXIgPSBvcHRzLmlubmVyT3JkZXIgfHwgZGVmYXVsdElubmVyT3JkZXI7XG4gIHZhciBzZHAgPSBbXTtcblxuICAvLyBsb29wIHRocm91Z2ggb3V0ZXJPcmRlciBmb3IgbWF0Y2hpbmcgcHJvcGVydGllcyBvbiBzZXNzaW9uXG4gIG91dGVyT3JkZXIuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgIGdyYW1tYXJbdHlwZV0uZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XG4gICAgICBpZiAob2JqLm5hbWUgaW4gc2Vzc2lvbiAmJiBzZXNzaW9uW29iai5uYW1lXSAhPSBudWxsKSB7XG4gICAgICAgIHNkcC5wdXNoKG1ha2VMaW5lKHR5cGUsIG9iaiwgc2Vzc2lvbikpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAob2JqLnB1c2ggaW4gc2Vzc2lvbiAmJiBzZXNzaW9uW29iai5wdXNoXSAhPSBudWxsKSB7XG4gICAgICAgIHNlc3Npb25bb2JqLnB1c2hdLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgc2RwLnB1c2gobWFrZUxpbmUodHlwZSwgb2JqLCBlbCkpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gdGhlbiBmb3IgZWFjaCBtZWRpYSBsaW5lLCBmb2xsb3cgdGhlIGlubmVyT3JkZXJcbiAgc2Vzc2lvbi5tZWRpYS5mb3JFYWNoKGZ1bmN0aW9uIChtTGluZSkge1xuICAgIHNkcC5wdXNoKG1ha2VMaW5lKCdtJywgZ3JhbW1hci5tWzBdLCBtTGluZSkpO1xuXG4gICAgaW5uZXJPcmRlci5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICBncmFtbWFyW3R5cGVdLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBpZiAob2JqLm5hbWUgaW4gbUxpbmUgJiYgbUxpbmVbb2JqLm5hbWVdICE9IG51bGwpIHtcbiAgICAgICAgICBzZHAucHVzaChtYWtlTGluZSh0eXBlLCBvYmosIG1MaW5lKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob2JqLnB1c2ggaW4gbUxpbmUgJiYgbUxpbmVbb2JqLnB1c2hdICE9IG51bGwpIHtcbiAgICAgICAgICBtTGluZVtvYmoucHVzaF0uZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgIHNkcC5wdXNoKG1ha2VMaW5lKHR5cGUsIG9iaiwgZWwpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBzZHAuam9pbignXFxyXFxuJykgKyAnXFxyXFxuJztcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/sdp-transform/lib/writer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/sdp/sdp.js":
/*!*********************************!*\
  !*** ./node_modules/sdp/sdp.js ***!
  \*********************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("/* eslint-env node */\n\n\n// SDP helpers.\nconst SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substring(2, 12);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(line => line.trim());\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  const parts = blob.split('\\nm=');\n  return parts.map((part, index) => (index > 0 ?\n    'm=' + part : part).trim() + '\\r\\n');\n};\n\n// Returns the session description.\nSDPUtils.getDescription = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// Returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n// Input can be prefixed with a=.\nSDPUtils.parseCandidate = function(line) {\n  let parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  const candidate = {\n    foundation: parts[0],\n    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7],\n  };\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compatibility.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag. Don't overwrite.\n        if (candidate[parts[i]] === undefined) {\n          candidate[parts[i]] = parts[i + 1];\n        }\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\n// This does not include the a= prefix!\nSDPUtils.writeCandidate = function(candidate) {\n  const sdp = [];\n  sdp.push(candidate.foundation);\n\n  const component = candidate.component;\n  if (component === 'rtp') {\n    sdp.push(1);\n  } else if (component === 'rtcp') {\n    sdp.push(2);\n  } else {\n    sdp.push(component);\n  }\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  const type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// Sample input:\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substring(14).split(' ');\n};\n\n// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  let parts = line.substring(9).split(' ');\n  const parsed = {\n    payloadType: parseInt(parts.shift(), 10), // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generates a rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  const channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses a extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1],\n    attributes: parts.slice(2).join(' '),\n  };\n};\n\n// Generates an extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri +\n      (headerExtension.attributes ? ' ' + headerExtension.attributes : '') +\n      '\\r\\n';\n};\n\n// Parses a fmtp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\n// Non-key-value such as telephone-events `0-15` get parsed as\n// {`0-15`:undefined}\nSDPUtils.parseFmtp = function(line) {\n  const parsed = {};\n  let kv;\n  const parts = line.substring(line.indexOf(' ') + 1).split(';');\n  for (let j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  let line = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    const params = [];\n    Object.keys(codec.parameters).forEach(param => {\n      if (codec.parameters[param] !== undefined) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  const parts = line.substring(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' '),\n  };\n};\n\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  let lines = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(fb => {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses a RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  const sp = line.indexOf(' ');\n  const parts = {\n    ssrc: parseInt(line.substring(7, sp), 10),\n  };\n  const colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substring(sp + 1, colon);\n    parts.value = line.substring(colon + 1);\n  } else {\n    parts.attribute = line.substring(sp + 1);\n  }\n  return parts;\n};\n\n// Parse a ssrc-group line (see RFC 5576). Sample input:\n// a=ssrc-group:semantics 12 34\nSDPUtils.parseSsrcGroup = function(line) {\n  const parts = line.substring(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// Returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substring(6);\n  }\n};\n\n// Parses a fingerprint line for DTLS-SRTP.\nSDPUtils.parseFingerprint = function(line) {\n  const parts = line.substring(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint),\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  let sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(fp => {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  const parts = keyParams.substring(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES parameters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substring(12),\n    password: pwd.substring(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n  if (params.iceLite) {\n    sdp += 'a=ice-lite\\r\\n';\n  }\n  return sdp;\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  const description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: [],\n  };\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  description.profile = mline[2];\n  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    const pt = mline[i];\n    const rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      const codec = SDPUtils.parseRtpMap(rtpmapline);\n      const fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  const wildcardRtcpFb = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:* ')\n    .map(SDPUtils.parseRtcpFb);\n  description.codecs.forEach(codec => {\n    wildcardRtcpFb.forEach(fb=> {\n      const duplicate = codec.rtcpFeedback.find(existingFeedback => {\n        return existingFeedback.type === fb.type &&\n          existingFeedback.parameter === fb.parameter;\n      });\n      if (!duplicate) {\n        codec.rtcpFeedback.push(fb);\n      }\n    });\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  let sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' ' + (caps.profile || 'UDP/TLS/RTP/SAVPF') + ' ';\n  sdp += caps.codecs.map(codec => {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(codec => {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  let maxptime = 0;\n  caps.codecs.forEach(codec => {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(extension => {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  const encodingParameters = [];\n  const description = SDPUtils.parseRtpParameters(mediaSection);\n  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(parts => parts.attribute === 'cname');\n  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  let secondarySsrc;\n\n  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(line => {\n      const parts = line.substring(17).split(' ');\n      return parts.map(part => parseInt(part, 10));\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(codec => {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      let encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc,\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substring(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substring(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(params => {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  const rtcpParameters = {};\n\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(obj => obj.attribute === 'cname')[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\nSDPUtils.writeRtcpParameters = function(rtcpParameters) {\n  let sdp = '';\n  if (rtcpParameters.reducedSize) {\n    sdp += 'a=rtcp-rsize\\r\\n';\n  }\n  if (rtcpParameters.mux) {\n    sdp += 'a=rtcp-mux\\r\\n';\n  }\n  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n    sdp += 'a=ssrc:' + rtcpParameters.ssrc +\n      ' cname:' + rtcpParameters.cname + '\\r\\n';\n  }\n  return sdp;\n};\n\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  let parts;\n  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substring(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(msidParts => msidParts.attribute === 'msid');\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  const mline = SDPUtils.parseMLine(mediaSection);\n  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  let maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substring(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substring(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize,\n    };\n  }\n  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    const parts = sctpMapLines[0]\n      .substring(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize,\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  let output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n',\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n',\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 22);\n};\n\n// Write boiler plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  let sessionId;\n  const version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  const user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  const lines = SDPUtils.splitLines(mediaSection);\n  for (let i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substring(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  return mline[0].substring(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const parts = lines[0].substring(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' '),\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  const parts = line.substring(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  const lines = SDPUtils.splitLines(blob);\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (true) {\n  module.exports = SDPUtils;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9zZHAvc2RwLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ2E7O0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixvQkFBb0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CO0FBQ3BCLDJCQUEyQjtBQUMzQjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSw4REFBOEQ7QUFDOUQsa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCLE9BQU87QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrQkFBa0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSSxJQUEwQjtBQUM5QjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9zZHAvc2RwLmpzP2EyOWIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIFNEUCBoZWxwZXJzLlxuY29uc3QgU0RQVXRpbHMgPSB7fTtcblxuLy8gR2VuZXJhdGUgYW4gYWxwaGFudW1lcmljIGlkZW50aWZpZXIgZm9yIGNuYW1lIG9yIG1pZHMuXG4vLyBUT0RPOiB1c2UgVVVJRHMgaW5zdGVhZD8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vamVkLzk4Mjg4M1xuU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTIpO1xufTtcblxuLy8gVGhlIFJUQ1AgQ05BTUUgdXNlZCBieSBhbGwgcGVlcmNvbm5lY3Rpb25zIGZyb20gdGhlIHNhbWUgSlMuXG5TRFBVdGlscy5sb2NhbENOYW1lID0gU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7XG5cbi8vIFNwbGl0cyBTRFAgaW50byBsaW5lcywgZGVhbGluZyB3aXRoIGJvdGggQ1JMRiBhbmQgTEYuXG5TRFBVdGlscy5zcGxpdExpbmVzID0gZnVuY3Rpb24oYmxvYikge1xuICByZXR1cm4gYmxvYi50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGxpbmUudHJpbSgpKTtcbn07XG4vLyBTcGxpdHMgU0RQIGludG8gc2Vzc2lvbnBhcnQgYW5kIG1lZGlhc2VjdGlvbnMuIEVuc3VyZXMgQ1JMRi5cblNEUFV0aWxzLnNwbGl0U2VjdGlvbnMgPSBmdW5jdGlvbihibG9iKSB7XG4gIGNvbnN0IHBhcnRzID0gYmxvYi5zcGxpdCgnXFxubT0nKTtcbiAgcmV0dXJuIHBhcnRzLm1hcCgocGFydCwgaW5kZXgpID0+IChpbmRleCA+IDAgP1xuICAgICdtPScgKyBwYXJ0IDogcGFydCkudHJpbSgpICsgJ1xcclxcbicpO1xufTtcblxuLy8gUmV0dXJucyB0aGUgc2Vzc2lvbiBkZXNjcmlwdGlvbi5cblNEUFV0aWxzLmdldERlc2NyaXB0aW9uID0gZnVuY3Rpb24oYmxvYikge1xuICBjb25zdCBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoYmxvYik7XG4gIHJldHVybiBzZWN0aW9ucyAmJiBzZWN0aW9uc1swXTtcbn07XG5cbi8vIFJldHVybnMgdGhlIGluZGl2aWR1YWwgbWVkaWEgc2VjdGlvbnMuXG5TRFBVdGlscy5nZXRNZWRpYVNlY3Rpb25zID0gZnVuY3Rpb24oYmxvYikge1xuICBjb25zdCBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoYmxvYik7XG4gIHNlY3Rpb25zLnNoaWZ0KCk7XG4gIHJldHVybiBzZWN0aW9ucztcbn07XG5cbi8vIFJldHVybnMgbGluZXMgdGhhdCBzdGFydCB3aXRoIGEgY2VydGFpbiBwcmVmaXguXG5TRFBVdGlscy5tYXRjaFByZWZpeCA9IGZ1bmN0aW9uKGJsb2IsIHByZWZpeCkge1xuICByZXR1cm4gU0RQVXRpbHMuc3BsaXRMaW5lcyhibG9iKS5maWx0ZXIobGluZSA9PiBsaW5lLmluZGV4T2YocHJlZml4KSA9PT0gMCk7XG59O1xuXG4vLyBQYXJzZXMgYW4gSUNFIGNhbmRpZGF0ZSBsaW5lLiBTYW1wbGUgaW5wdXQ6XG4vLyBjYW5kaWRhdGU6NzAyNzg2MzUwIDIgdWRwIDQxODE5OTAyIDguOC44LjggNjA3NjkgdHlwIHJlbGF5IHJhZGRyIDguOC44Ljhcbi8vIHJwb3J0IDU1OTk2XCJcbi8vIElucHV0IGNhbiBiZSBwcmVmaXhlZCB3aXRoIGE9LlxuU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUgPSBmdW5jdGlvbihsaW5lKSB7XG4gIGxldCBwYXJ0cztcbiAgLy8gUGFyc2UgYm90aCB2YXJpYW50cy5cbiAgaWYgKGxpbmUuaW5kZXhPZignYT1jYW5kaWRhdGU6JykgPT09IDApIHtcbiAgICBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDEyKS5zcGxpdCgnICcpO1xuICB9IGVsc2Uge1xuICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7XG4gIH1cblxuICBjb25zdCBjYW5kaWRhdGUgPSB7XG4gICAgZm91bmRhdGlvbjogcGFydHNbMF0sXG4gICAgY29tcG9uZW50OiB7MTogJ3J0cCcsIDI6ICdydGNwJ31bcGFydHNbMV1dIHx8IHBhcnRzWzFdLFxuICAgIHByb3RvY29sOiBwYXJ0c1syXS50b0xvd2VyQ2FzZSgpLFxuICAgIHByaW9yaXR5OiBwYXJzZUludChwYXJ0c1szXSwgMTApLFxuICAgIGlwOiBwYXJ0c1s0XSxcbiAgICBhZGRyZXNzOiBwYXJ0c1s0XSwgLy8gYWRkcmVzcyBpcyBhbiBhbGlhcyBmb3IgaXAuXG4gICAgcG9ydDogcGFyc2VJbnQocGFydHNbNV0sIDEwKSxcbiAgICAvLyBza2lwIHBhcnRzWzZdID09ICd0eXAnXG4gICAgdHlwZTogcGFydHNbN10sXG4gIH07XG5cbiAgZm9yIChsZXQgaSA9IDg7IGkgPCBwYXJ0cy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHN3aXRjaCAocGFydHNbaV0pIHtcbiAgICAgIGNhc2UgJ3JhZGRyJzpcbiAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzID0gcGFydHNbaSArIDFdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Jwb3J0JzpcbiAgICAgICAgY2FuZGlkYXRlLnJlbGF0ZWRQb3J0ID0gcGFyc2VJbnQocGFydHNbaSArIDFdLCAxMCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGNwdHlwZSc6XG4gICAgICAgIGNhbmRpZGF0ZS50Y3BUeXBlID0gcGFydHNbaSArIDFdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3VmcmFnJzpcbiAgICAgICAgY2FuZGlkYXRlLnVmcmFnID0gcGFydHNbaSArIDFdOyAvLyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDogLy8gZXh0ZW5zaW9uIGhhbmRsaW5nLCBpbiBwYXJ0aWN1bGFyIHVmcmFnLiBEb24ndCBvdmVyd3JpdGUuXG4gICAgICAgIGlmIChjYW5kaWRhdGVbcGFydHNbaV1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjYW5kaWRhdGVbcGFydHNbaV1dID0gcGFydHNbaSArIDFdO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2FuZGlkYXRlO1xufTtcblxuLy8gVHJhbnNsYXRlcyBhIGNhbmRpZGF0ZSBvYmplY3QgaW50byBTRFAgY2FuZGlkYXRlIGF0dHJpYnV0ZS5cbi8vIFRoaXMgZG9lcyBub3QgaW5jbHVkZSB0aGUgYT0gcHJlZml4IVxuU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUgPSBmdW5jdGlvbihjYW5kaWRhdGUpIHtcbiAgY29uc3Qgc2RwID0gW107XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5mb3VuZGF0aW9uKTtcblxuICBjb25zdCBjb21wb25lbnQgPSBjYW5kaWRhdGUuY29tcG9uZW50O1xuICBpZiAoY29tcG9uZW50ID09PSAncnRwJykge1xuICAgIHNkcC5wdXNoKDEpO1xuICB9IGVsc2UgaWYgKGNvbXBvbmVudCA9PT0gJ3J0Y3AnKSB7XG4gICAgc2RwLnB1c2goMik7XG4gIH0gZWxzZSB7XG4gICAgc2RwLnB1c2goY29tcG9uZW50KTtcbiAgfVxuICBzZHAucHVzaChjYW5kaWRhdGUucHJvdG9jb2wudG9VcHBlckNhc2UoKSk7XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5wcmlvcml0eSk7XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5hZGRyZXNzIHx8IGNhbmRpZGF0ZS5pcCk7XG4gIHNkcC5wdXNoKGNhbmRpZGF0ZS5wb3J0KTtcblxuICBjb25zdCB0eXBlID0gY2FuZGlkYXRlLnR5cGU7XG4gIHNkcC5wdXNoKCd0eXAnKTtcbiAgc2RwLnB1c2godHlwZSk7XG4gIGlmICh0eXBlICE9PSAnaG9zdCcgJiYgY2FuZGlkYXRlLnJlbGF0ZWRBZGRyZXNzICYmXG4gICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQpIHtcbiAgICBzZHAucHVzaCgncmFkZHInKTtcbiAgICBzZHAucHVzaChjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MpO1xuICAgIHNkcC5wdXNoKCdycG9ydCcpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7XG4gIH1cbiAgaWYgKGNhbmRpZGF0ZS50Y3BUeXBlICYmIGNhbmRpZGF0ZS5wcm90b2NvbC50b0xvd2VyQ2FzZSgpID09PSAndGNwJykge1xuICAgIHNkcC5wdXNoKCd0Y3B0eXBlJyk7XG4gICAgc2RwLnB1c2goY2FuZGlkYXRlLnRjcFR5cGUpO1xuICB9XG4gIGlmIChjYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudCB8fCBjYW5kaWRhdGUudWZyYWcpIHtcbiAgICBzZHAucHVzaCgndWZyYWcnKTtcbiAgICBzZHAucHVzaChjYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudCB8fCBjYW5kaWRhdGUudWZyYWcpO1xuICB9XG4gIHJldHVybiAnY2FuZGlkYXRlOicgKyBzZHAuam9pbignICcpO1xufTtcblxuLy8gUGFyc2VzIGFuIGljZS1vcHRpb25zIGxpbmUsIHJldHVybnMgYW4gYXJyYXkgb2Ygb3B0aW9uIHRhZ3MuXG4vLyBTYW1wbGUgaW5wdXQ6XG4vLyBhPWljZS1vcHRpb25zOmZvbyBiYXJcblNEUFV0aWxzLnBhcnNlSWNlT3B0aW9ucyA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgcmV0dXJuIGxpbmUuc3Vic3RyaW5nKDE0KS5zcGxpdCgnICcpO1xufTtcblxuLy8gUGFyc2VzIGEgcnRwbWFwIGxpbmUsIHJldHVybnMgUlRDUnRwQ29kZGVjUGFyYW1ldGVycy4gU2FtcGxlIGlucHV0OlxuLy8gYT1ydHBtYXA6MTExIG9wdXMvNDgwMDAvMlxuU0RQVXRpbHMucGFyc2VSdHBNYXAgPSBmdW5jdGlvbihsaW5lKSB7XG4gIGxldCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDkpLnNwbGl0KCcgJyk7XG4gIGNvbnN0IHBhcnNlZCA9IHtcbiAgICBwYXlsb2FkVHlwZTogcGFyc2VJbnQocGFydHMuc2hpZnQoKSwgMTApLCAvLyB3YXM6IGlkXG4gIH07XG5cbiAgcGFydHMgPSBwYXJ0c1swXS5zcGxpdCgnLycpO1xuXG4gIHBhcnNlZC5uYW1lID0gcGFydHNbMF07XG4gIHBhcnNlZC5jbG9ja1JhdGUgPSBwYXJzZUludChwYXJ0c1sxXSwgMTApOyAvLyB3YXM6IGNsb2NrcmF0ZVxuICBwYXJzZWQuY2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTtcbiAgLy8gbGVnYWN5IGFsaWFzLCBnb3QgcmVuYW1lZCBiYWNrIHRvIGNoYW5uZWxzIGluIE9SVEMuXG4gIHBhcnNlZC5udW1DaGFubmVscyA9IHBhcnNlZC5jaGFubmVscztcbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cbi8vIEdlbmVyYXRlcyBhIHJ0cG1hcCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yXG4vLyBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZVJ0cE1hcCA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIGxldCBwdCA9IGNvZGVjLnBheWxvYWRUeXBlO1xuICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7XG4gIH1cbiAgY29uc3QgY2hhbm5lbHMgPSBjb2RlYy5jaGFubmVscyB8fCBjb2RlYy5udW1DaGFubmVscyB8fCAxO1xuICByZXR1cm4gJ2E9cnRwbWFwOicgKyBwdCArICcgJyArIGNvZGVjLm5hbWUgKyAnLycgKyBjb2RlYy5jbG9ja1JhdGUgK1xuICAgICAgKGNoYW5uZWxzICE9PSAxID8gJy8nICsgY2hhbm5lbHMgOiAnJykgKyAnXFxyXFxuJztcbn07XG5cbi8vIFBhcnNlcyBhIGV4dG1hcCBsaW5lIChoZWFkZXJleHRlbnNpb24gZnJvbSBSRkMgNTI4NSkuIFNhbXBsZSBpbnB1dDpcbi8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldFxuLy8gYT1leHRtYXA6Mi9zZW5kb25seSB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDp0b2Zmc2V0XG5TRFBVdGlscy5wYXJzZUV4dG1hcCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cmluZyg5KS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIGlkOiBwYXJzZUludChwYXJ0c1swXSwgMTApLFxuICAgIGRpcmVjdGlvbjogcGFydHNbMF0uaW5kZXhPZignLycpID4gMCA/IHBhcnRzWzBdLnNwbGl0KCcvJylbMV0gOiAnc2VuZHJlY3YnLFxuICAgIHVyaTogcGFydHNbMV0sXG4gICAgYXR0cmlidXRlczogcGFydHMuc2xpY2UoMikuam9pbignICcpLFxuICB9O1xufTtcblxuLy8gR2VuZXJhdGVzIGFuIGV4dG1hcCBsaW5lIGZyb20gUlRDUnRwSGVhZGVyRXh0ZW5zaW9uUGFyYW1ldGVycyBvclxuLy8gUlRDUnRwSGVhZGVyRXh0ZW5zaW9uLlxuU0RQVXRpbHMud3JpdGVFeHRtYXAgPSBmdW5jdGlvbihoZWFkZXJFeHRlbnNpb24pIHtcbiAgcmV0dXJuICdhPWV4dG1hcDonICsgKGhlYWRlckV4dGVuc2lvbi5pZCB8fCBoZWFkZXJFeHRlbnNpb24ucHJlZmVycmVkSWQpICtcbiAgICAgIChoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uICYmIGhlYWRlckV4dGVuc2lvbi5kaXJlY3Rpb24gIT09ICdzZW5kcmVjdidcbiAgICAgICAgPyAnLycgKyBoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uXG4gICAgICAgIDogJycpICtcbiAgICAgICcgJyArIGhlYWRlckV4dGVuc2lvbi51cmkgK1xuICAgICAgKGhlYWRlckV4dGVuc2lvbi5hdHRyaWJ1dGVzID8gJyAnICsgaGVhZGVyRXh0ZW5zaW9uLmF0dHJpYnV0ZXMgOiAnJykgK1xuICAgICAgJ1xcclxcbic7XG59O1xuXG4vLyBQYXJzZXMgYSBmbXRwIGxpbmUsIHJldHVybnMgZGljdGlvbmFyeS4gU2FtcGxlIGlucHV0OlxuLy8gYT1mbXRwOjk2IHZicj1vbjtjbmc9b25cbi8vIEFsc28gZGVhbHMgd2l0aCB2YnI9b247IGNuZz1vblxuLy8gTm9uLWtleS12YWx1ZSBzdWNoIGFzIHRlbGVwaG9uZS1ldmVudHMgYDAtMTVgIGdldCBwYXJzZWQgYXNcbi8vIHtgMC0xNWA6dW5kZWZpbmVkfVxuU0RQVXRpbHMucGFyc2VGbXRwID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBwYXJzZWQgPSB7fTtcbiAgbGV0IGt2O1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKGxpbmUuaW5kZXhPZignICcpICsgMSkuc3BsaXQoJzsnKTtcbiAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXJ0cy5sZW5ndGg7IGorKykge1xuICAgIGt2ID0gcGFydHNbal0udHJpbSgpLnNwbGl0KCc9Jyk7XG4gICAgcGFyc2VkW2t2WzBdLnRyaW0oKV0gPSBrdlsxXTtcbiAgfVxuICByZXR1cm4gcGFyc2VkO1xufTtcblxuLy8gR2VuZXJhdGVzIGEgZm10cCBsaW5lIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlRm10cCA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIGxldCBsaW5lID0gJyc7XG4gIGxldCBwdCA9IGNvZGVjLnBheWxvYWRUeXBlO1xuICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7XG4gIH1cbiAgaWYgKGNvZGVjLnBhcmFtZXRlcnMgJiYgT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycykubGVuZ3RoKSB7XG4gICAgY29uc3QgcGFyYW1zID0gW107XG4gICAgT2JqZWN0LmtleXMoY29kZWMucGFyYW1ldGVycykuZm9yRWFjaChwYXJhbSA9PiB7XG4gICAgICBpZiAoY29kZWMucGFyYW1ldGVyc1twYXJhbV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYXJhbXMucHVzaChwYXJhbSArICc9JyArIGNvZGVjLnBhcmFtZXRlcnNbcGFyYW1dKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtcy5wdXNoKHBhcmFtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBsaW5lICs9ICdhPWZtdHA6JyArIHB0ICsgJyAnICsgcGFyYW1zLmpvaW4oJzsnKSArICdcXHJcXG4nO1xuICB9XG4gIHJldHVybiBsaW5lO1xufTtcblxuLy8gUGFyc2VzIGEgcnRjcC1mYiBsaW5lLCByZXR1cm5zIFJUQ1BSdGNwRmVlZGJhY2sgb2JqZWN0LiBTYW1wbGUgaW5wdXQ6XG4vLyBhPXJ0Y3AtZmI6OTggbmFjayBycHNpXG5TRFBVdGlscy5wYXJzZVJ0Y3BGYiA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgY29uc3QgcGFydHMgPSBsaW5lLnN1YnN0cmluZyhsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdHlwZTogcGFydHMuc2hpZnQoKSxcbiAgICBwYXJhbWV0ZXI6IHBhcnRzLmpvaW4oJyAnKSxcbiAgfTtcbn07XG5cbi8vIEdlbmVyYXRlIGE9cnRjcC1mYiBsaW5lcyBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZVJ0Y3BGYiA9IGZ1bmN0aW9uKGNvZGVjKSB7XG4gIGxldCBsaW5lcyA9ICcnO1xuICBsZXQgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTtcbiAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICB9XG4gIGlmIChjb2RlYy5ydGNwRmVlZGJhY2sgJiYgY29kZWMucnRjcEZlZWRiYWNrLmxlbmd0aCkge1xuICAgIC8vIEZJWE1FOiBzcGVjaWFsIGhhbmRsaW5nIGZvciB0cnItaW50P1xuICAgIGNvZGVjLnJ0Y3BGZWVkYmFjay5mb3JFYWNoKGZiID0+IHtcbiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArXG4gICAgICAoZmIucGFyYW1ldGVyICYmIGZiLnBhcmFtZXRlci5sZW5ndGggPyAnICcgKyBmYi5wYXJhbWV0ZXIgOiAnJykgK1xuICAgICAgICAgICdcXHJcXG4nO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBsaW5lcztcbn07XG5cbi8vIFBhcnNlcyBhIFJGQyA1NTc2IHNzcmMgbWVkaWEgYXR0cmlidXRlLiBTYW1wbGUgaW5wdXQ6XG4vLyBhPXNzcmM6MzczNTkyODU1OSBjbmFtZTpzb21ldGhpbmdcblNEUFV0aWxzLnBhcnNlU3NyY01lZGlhID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBzcCA9IGxpbmUuaW5kZXhPZignICcpO1xuICBjb25zdCBwYXJ0cyA9IHtcbiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cmluZyg3LCBzcCksIDEwKSxcbiAgfTtcbiAgY29uc3QgY29sb24gPSBsaW5lLmluZGV4T2YoJzonLCBzcCk7XG4gIGlmIChjb2xvbiA+IC0xKSB7XG4gICAgcGFydHMuYXR0cmlidXRlID0gbGluZS5zdWJzdHJpbmcoc3AgKyAxLCBjb2xvbik7XG4gICAgcGFydHMudmFsdWUgPSBsaW5lLnN1YnN0cmluZyhjb2xvbiArIDEpO1xuICB9IGVsc2Uge1xuICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyaW5nKHNwICsgMSk7XG4gIH1cbiAgcmV0dXJuIHBhcnRzO1xufTtcblxuLy8gUGFyc2UgYSBzc3JjLWdyb3VwIGxpbmUgKHNlZSBSRkMgNTU3NikuIFNhbXBsZSBpbnB1dDpcbi8vIGE9c3NyYy1ncm91cDpzZW1hbnRpY3MgMTIgMzRcblNEUFV0aWxzLnBhcnNlU3NyY0dyb3VwID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDEzKS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIHNlbWFudGljczogcGFydHMuc2hpZnQoKSxcbiAgICBzc3JjczogcGFydHMubWFwKHNzcmMgPT4gcGFyc2VJbnQoc3NyYywgMTApKSxcbiAgfTtcbn07XG5cbi8vIEV4dHJhY3RzIHRoZSBNSUQgKFJGQyA1ODg4KSBmcm9tIGEgbWVkaWEgc2VjdGlvbi5cbi8vIFJldHVybnMgdGhlIE1JRCBvciB1bmRlZmluZWQgaWYgbm8gbWlkIGxpbmUgd2FzIGZvdW5kLlxuU0RQVXRpbHMuZ2V0TWlkID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IG1pZCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9bWlkOicpWzBdO1xuICBpZiAobWlkKSB7XG4gICAgcmV0dXJuIG1pZC5zdWJzdHJpbmcoNik7XG4gIH1cbn07XG5cbi8vIFBhcnNlcyBhIGZpbmdlcnByaW50IGxpbmUgZm9yIERUTFMtU1JUUC5cblNEUFV0aWxzLnBhcnNlRmluZ2VycHJpbnQgPSBmdW5jdGlvbihsaW5lKSB7XG4gIGNvbnN0IHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTQpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgYWxnb3JpdGhtOiBwYXJ0c1swXS50b0xvd2VyQ2FzZSgpLCAvLyBhbGdvcml0aG0gaXMgY2FzZS1zZW5zaXRpdmUgaW4gRWRnZS5cbiAgICB2YWx1ZTogcGFydHNbMV0udG9VcHBlckNhc2UoKSwgLy8gdGhlIGRlZmluaXRpb24gaXMgdXBwZXItY2FzZSBpbiBSRkMgNDU3Mi5cbiAgfTtcbn07XG5cbi8vIEV4dHJhY3RzIERUTFMgcGFyYW1ldGVycyBmcm9tIFNEUCBtZWRpYSBzZWN0aW9uIG9yIHNlc3Npb25wYXJ0LlxuLy8gRklYTUU6IGZvciBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIGZ1bmN0aW9ucyB0aGlzIHNob3VsZCBvbmx5XG4vLyAgIGdldCB0aGUgZmluZ2VycHJpbnQgbGluZSBhcyBpbnB1dC4gU2VlIGFsc28gZ2V0SWNlUGFyYW1ldGVycy5cblNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkge1xuICBjb25zdCBsaW5lcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWZpbmdlcnByaW50OicpO1xuICAvLyBOb3RlOiBhPXNldHVwIGxpbmUgaXMgaWdub3JlZCBzaW5jZSB3ZSB1c2UgdGhlICdhdXRvJyByb2xlIGluIEVkZ2UuXG4gIHJldHVybiB7XG4gICAgcm9sZTogJ2F1dG8nLFxuICAgIGZpbmdlcnByaW50czogbGluZXMubWFwKFNEUFV0aWxzLnBhcnNlRmluZ2VycHJpbnQpLFxuICB9O1xufTtcblxuLy8gU2VyaWFsaXplcyBEVExTIHBhcmFtZXRlcnMgdG8gU0RQLlxuU0RQVXRpbHMud3JpdGVEdGxzUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcywgc2V0dXBUeXBlKSB7XG4gIGxldCBzZHAgPSAnYT1zZXR1cDonICsgc2V0dXBUeXBlICsgJ1xcclxcbic7XG4gIHBhcmFtcy5maW5nZXJwcmludHMuZm9yRWFjaChmcCA9PiB7XG4gICAgc2RwICs9ICdhPWZpbmdlcnByaW50OicgKyBmcC5hbGdvcml0aG0gKyAnICcgKyBmcC52YWx1ZSArICdcXHJcXG4nO1xuICB9KTtcbiAgcmV0dXJuIHNkcDtcbn07XG5cbi8vIFBhcnNlcyBhPWNyeXB0byBsaW5lcyBpbnRvXG4vLyAgIGh0dHBzOi8vcmF3Z2l0LmNvbS9hYm9iYS9lZGdlcnRjL21hc3Rlci9tc29ydGMtcnM0Lmh0bWwjZGljdGlvbmFyeS1ydGNzcnRwc2Rlc3BhcmFtZXRlcnMtbWVtYmVyc1xuU0RQVXRpbHMucGFyc2VDcnlwdG9MaW5lID0gZnVuY3Rpb24obGluZSkge1xuICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDkpLnNwbGl0KCcgJyk7XG4gIHJldHVybiB7XG4gICAgdGFnOiBwYXJzZUludChwYXJ0c1swXSwgMTApLFxuICAgIGNyeXB0b1N1aXRlOiBwYXJ0c1sxXSxcbiAgICBrZXlQYXJhbXM6IHBhcnRzWzJdLFxuICAgIHNlc3Npb25QYXJhbXM6IHBhcnRzLnNsaWNlKDMpLFxuICB9O1xufTtcblxuU0RQVXRpbHMud3JpdGVDcnlwdG9MaW5lID0gZnVuY3Rpb24ocGFyYW1ldGVycykge1xuICByZXR1cm4gJ2E9Y3J5cHRvOicgKyBwYXJhbWV0ZXJzLnRhZyArICcgJyArXG4gICAgcGFyYW1ldGVycy5jcnlwdG9TdWl0ZSArICcgJyArXG4gICAgKHR5cGVvZiBwYXJhbWV0ZXJzLmtleVBhcmFtcyA9PT0gJ29iamVjdCdcbiAgICAgID8gU0RQVXRpbHMud3JpdGVDcnlwdG9LZXlQYXJhbXMocGFyYW1ldGVycy5rZXlQYXJhbXMpXG4gICAgICA6IHBhcmFtZXRlcnMua2V5UGFyYW1zKSArXG4gICAgKHBhcmFtZXRlcnMuc2Vzc2lvblBhcmFtcyA/ICcgJyArIHBhcmFtZXRlcnMuc2Vzc2lvblBhcmFtcy5qb2luKCcgJykgOiAnJykgK1xuICAgICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIHRoZSBjcnlwdG8ga2V5IHBhcmFtZXRlcnMgaW50b1xuLy8gICBodHRwczovL3Jhd2dpdC5jb20vYWJvYmEvZWRnZXJ0Yy9tYXN0ZXIvbXNvcnRjLXJzNC5odG1sI3J0Y3NydHBrZXlwYXJhbSpcblNEUFV0aWxzLnBhcnNlQ3J5cHRvS2V5UGFyYW1zID0gZnVuY3Rpb24oa2V5UGFyYW1zKSB7XG4gIGlmIChrZXlQYXJhbXMuaW5kZXhPZignaW5saW5lOicpICE9PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgcGFydHMgPSBrZXlQYXJhbXMuc3Vic3RyaW5nKDcpLnNwbGl0KCd8Jyk7XG4gIHJldHVybiB7XG4gICAga2V5TWV0aG9kOiAnaW5saW5lJyxcbiAgICBrZXlTYWx0OiBwYXJ0c1swXSxcbiAgICBsaWZlVGltZTogcGFydHNbMV0sXG4gICAgbWtpVmFsdWU6IHBhcnRzWzJdID8gcGFydHNbMl0uc3BsaXQoJzonKVswXSA6IHVuZGVmaW5lZCxcbiAgICBta2lMZW5ndGg6IHBhcnRzWzJdID8gcGFydHNbMl0uc3BsaXQoJzonKVsxXSA6IHVuZGVmaW5lZCxcbiAgfTtcbn07XG5cblNEUFV0aWxzLndyaXRlQ3J5cHRvS2V5UGFyYW1zID0gZnVuY3Rpb24oa2V5UGFyYW1zKSB7XG4gIHJldHVybiBrZXlQYXJhbXMua2V5TWV0aG9kICsgJzonXG4gICAgKyBrZXlQYXJhbXMua2V5U2FsdCArXG4gICAgKGtleVBhcmFtcy5saWZlVGltZSA/ICd8JyArIGtleVBhcmFtcy5saWZlVGltZSA6ICcnKSArXG4gICAgKGtleVBhcmFtcy5ta2lWYWx1ZSAmJiBrZXlQYXJhbXMubWtpTGVuZ3RoXG4gICAgICA/ICd8JyArIGtleVBhcmFtcy5ta2lWYWx1ZSArICc6JyArIGtleVBhcmFtcy5ta2lMZW5ndGhcbiAgICAgIDogJycpO1xufTtcblxuLy8gRXh0cmFjdHMgYWxsIFNERVMgcGFyYW1ldGVycy5cblNEUFV0aWxzLmdldENyeXB0b1BhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7XG4gIGNvbnN0IGxpbmVzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uICsgc2Vzc2lvbnBhcnQsXG4gICAgJ2E9Y3J5cHRvOicpO1xuICByZXR1cm4gbGluZXMubWFwKFNEUFV0aWxzLnBhcnNlQ3J5cHRvTGluZSk7XG59O1xuXG4vLyBQYXJzZXMgSUNFIGluZm9ybWF0aW9uIGZyb20gU0RQIG1lZGlhIHNlY3Rpb24gb3Igc2Vzc2lvbnBhcnQuXG4vLyBGSVhNRTogZm9yIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgZnVuY3Rpb25zIHRoaXMgc2hvdWxkIG9ubHlcbi8vICAgZ2V0IHRoZSBpY2UtdWZyYWcgYW5kIGljZS1wd2QgbGluZXMgYXMgaW5wdXQuXG5TRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkge1xuICBjb25zdCB1ZnJhZyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiArIHNlc3Npb25wYXJ0LFxuICAgICdhPWljZS11ZnJhZzonKVswXTtcbiAgY29uc3QgcHdkID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uICsgc2Vzc2lvbnBhcnQsXG4gICAgJ2E9aWNlLXB3ZDonKVswXTtcbiAgaWYgKCEodWZyYWcgJiYgcHdkKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiB7XG4gICAgdXNlcm5hbWVGcmFnbWVudDogdWZyYWcuc3Vic3RyaW5nKDEyKSxcbiAgICBwYXNzd29yZDogcHdkLnN1YnN0cmluZygxMCksXG4gIH07XG59O1xuXG4vLyBTZXJpYWxpemVzIElDRSBwYXJhbWV0ZXJzIHRvIFNEUC5cblNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcykge1xuICBsZXQgc2RwID0gJ2E9aWNlLXVmcmFnOicgKyBwYXJhbXMudXNlcm5hbWVGcmFnbWVudCArICdcXHJcXG4nICtcbiAgICAgICdhPWljZS1wd2Q6JyArIHBhcmFtcy5wYXNzd29yZCArICdcXHJcXG4nO1xuICBpZiAocGFyYW1zLmljZUxpdGUpIHtcbiAgICBzZHAgKz0gJ2E9aWNlLWxpdGVcXHJcXG4nO1xuICB9XG4gIHJldHVybiBzZHA7XG59O1xuXG4vLyBQYXJzZXMgdGhlIFNEUCBtZWRpYSBzZWN0aW9uIGFuZCByZXR1cm5zIFJUQ1J0cFBhcmFtZXRlcnMuXG5TRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgY29uc3QgZGVzY3JpcHRpb24gPSB7XG4gICAgY29kZWNzOiBbXSxcbiAgICBoZWFkZXJFeHRlbnNpb25zOiBbXSxcbiAgICBmZWNNZWNoYW5pc21zOiBbXSxcbiAgICBydGNwOiBbXSxcbiAgfTtcbiAgY29uc3QgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7XG4gIGNvbnN0IG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTtcbiAgZGVzY3JpcHRpb24ucHJvZmlsZSA9IG1saW5lWzJdO1xuICBmb3IgKGxldCBpID0gMzsgaSA8IG1saW5lLmxlbmd0aDsgaSsrKSB7IC8vIGZpbmQgYWxsIGNvZGVjcyBmcm9tIG1saW5lWzMuLl1cbiAgICBjb25zdCBwdCA9IG1saW5lW2ldO1xuICAgIGNvbnN0IHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChcbiAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9cnRwbWFwOicgKyBwdCArICcgJylbMF07XG4gICAgaWYgKHJ0cG1hcGxpbmUpIHtcbiAgICAgIGNvbnN0IGNvZGVjID0gU0RQVXRpbHMucGFyc2VSdHBNYXAocnRwbWFwbGluZSk7XG4gICAgICBjb25zdCBmbXRwcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KFxuICAgICAgICBtZWRpYVNlY3Rpb24sICdhPWZtdHA6JyArIHB0ICsgJyAnKTtcbiAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuXG4gICAgICBjb2RlYy5wYXJhbWV0ZXJzID0gZm10cHMubGVuZ3RoID8gU0RQVXRpbHMucGFyc2VGbXRwKGZtdHBzWzBdKSA6IHt9O1xuICAgICAgY29kZWMucnRjcEZlZWRiYWNrID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoXG4gICAgICAgIG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1mYjonICsgcHQgKyAnICcpXG4gICAgICAgIC5tYXAoU0RQVXRpbHMucGFyc2VSdGNwRmIpO1xuICAgICAgZGVzY3JpcHRpb24uY29kZWNzLnB1c2goY29kZWMpO1xuICAgICAgLy8gcGFyc2UgRkVDIG1lY2hhbmlzbXMgZnJvbSBydHBtYXAgbGluZXMuXG4gICAgICBzd2l0Y2ggKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgICBjYXNlICdSRUQnOlxuICAgICAgICBjYXNlICdVTFBGRUMnOlxuICAgICAgICAgIGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMucHVzaChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiAvLyBvbmx5IFJFRCBhbmQgVUxQRkVDIGFyZSByZWNvZ25pemVkIGFzIEZFQyBtZWNoYW5pc21zLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWV4dG1hcDonKS5mb3JFYWNoKGxpbmUgPT4ge1xuICAgIGRlc2NyaXB0aW9uLmhlYWRlckV4dGVuc2lvbnMucHVzaChTRFBVdGlscy5wYXJzZUV4dG1hcChsaW5lKSk7XG4gIH0pO1xuICBjb25zdCB3aWxkY2FyZFJ0Y3BGYiA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1mYjoqICcpXG4gICAgLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7XG4gIGRlc2NyaXB0aW9uLmNvZGVjcy5mb3JFYWNoKGNvZGVjID0+IHtcbiAgICB3aWxkY2FyZFJ0Y3BGYi5mb3JFYWNoKGZiPT4ge1xuICAgICAgY29uc3QgZHVwbGljYXRlID0gY29kZWMucnRjcEZlZWRiYWNrLmZpbmQoZXhpc3RpbmdGZWVkYmFjayA9PiB7XG4gICAgICAgIHJldHVybiBleGlzdGluZ0ZlZWRiYWNrLnR5cGUgPT09IGZiLnR5cGUgJiZcbiAgICAgICAgICBleGlzdGluZ0ZlZWRiYWNrLnBhcmFtZXRlciA9PT0gZmIucGFyYW1ldGVyO1xuICAgICAgfSk7XG4gICAgICBpZiAoIWR1cGxpY2F0ZSkge1xuICAgICAgICBjb2RlYy5ydGNwRmVlZGJhY2sucHVzaChmYik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICAvLyBGSVhNRTogcGFyc2UgcnRjcC5cbiAgcmV0dXJuIGRlc2NyaXB0aW9uO1xufTtcblxuLy8gR2VuZXJhdGVzIHBhcnRzIG9mIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBkZXNjcmliaW5nIHRoZSBjYXBhYmlsaXRpZXMgL1xuLy8gcGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24gPSBmdW5jdGlvbihraW5kLCBjYXBzKSB7XG4gIGxldCBzZHAgPSAnJztcblxuICAvLyBCdWlsZCB0aGUgbWxpbmUuXG4gIHNkcCArPSAnbT0nICsga2luZCArICcgJztcbiAgc2RwICs9IGNhcHMuY29kZWNzLmxlbmd0aCA+IDAgPyAnOScgOiAnMCc7IC8vIHJlamVjdCBpZiBubyBjb2RlY3MuXG4gIHNkcCArPSAnICcgKyAoY2Fwcy5wcm9maWxlIHx8ICdVRFAvVExTL1JUUC9TQVZQRicpICsgJyAnO1xuICBzZHAgKz0gY2Fwcy5jb2RlY3MubWFwKGNvZGVjID0+IHtcbiAgICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICAgIH1cbiAgICByZXR1cm4gY29kZWMucGF5bG9hZFR5cGU7XG4gIH0pLmpvaW4oJyAnKSArICdcXHJcXG4nO1xuXG4gIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbic7XG4gIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcXHJcXG4nO1xuXG4gIC8vIEFkZCBhPXJ0cG1hcCBsaW5lcyBmb3IgZWFjaCBjb2RlYy4gQWxzbyBmbXRwIGFuZCBydGNwLWZiLlxuICBjYXBzLmNvZGVjcy5mb3JFYWNoKGNvZGVjID0+IHtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVSdHBNYXAoY29kZWMpO1xuICAgIHNkcCArPSBTRFBVdGlscy53cml0ZUZtdHAoY29kZWMpO1xuICAgIHNkcCArPSBTRFBVdGlscy53cml0ZVJ0Y3BGYihjb2RlYyk7XG4gIH0pO1xuICBsZXQgbWF4cHRpbWUgPSAwO1xuICBjYXBzLmNvZGVjcy5mb3JFYWNoKGNvZGVjID0+IHtcbiAgICBpZiAoY29kZWMubWF4cHRpbWUgPiBtYXhwdGltZSkge1xuICAgICAgbWF4cHRpbWUgPSBjb2RlYy5tYXhwdGltZTtcbiAgICB9XG4gIH0pO1xuICBpZiAobWF4cHRpbWUgPiAwKSB7XG4gICAgc2RwICs9ICdhPW1heHB0aW1lOicgKyBtYXhwdGltZSArICdcXHJcXG4nO1xuICB9XG5cbiAgaWYgKGNhcHMuaGVhZGVyRXh0ZW5zaW9ucykge1xuICAgIGNhcHMuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGV4dGVuc2lvbiA9PiB7XG4gICAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVFeHRtYXAoZXh0ZW5zaW9uKTtcbiAgICB9KTtcbiAgfVxuICAvLyBGSVhNRTogd3JpdGUgZmVjTWVjaGFuaXNtcy5cbiAgcmV0dXJuIHNkcDtcbn07XG5cbi8vIFBhcnNlcyB0aGUgU0RQIG1lZGlhIHNlY3Rpb24gYW5kIHJldHVybnMgYW4gYXJyYXkgb2Zcbi8vIFJUQ1J0cEVuY29kaW5nUGFyYW1ldGVycy5cblNEUFV0aWxzLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IGVuY29kaW5nUGFyYW1ldGVycyA9IFtdO1xuICBjb25zdCBkZXNjcmlwdGlvbiA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pO1xuICBjb25zdCBoYXNSZWQgPSBkZXNjcmlwdGlvbi5mZWNNZWNoYW5pc21zLmluZGV4T2YoJ1JFRCcpICE9PSAtMTtcbiAgY29uc3QgaGFzVWxwZmVjID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdVTFBGRUMnKSAhPT0gLTE7XG5cbiAgLy8gZmlsdGVyIGE9c3NyYzouLi4gY25hbWU6LCBpZ25vcmUgUGxhbkItbXNpZFxuICBjb25zdCBzc3JjcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgIC5tYXAobGluZSA9PiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKSlcbiAgICAuZmlsdGVyKHBhcnRzID0+IHBhcnRzLmF0dHJpYnV0ZSA9PT0gJ2NuYW1lJyk7XG4gIGNvbnN0IHByaW1hcnlTc3JjID0gc3NyY3MubGVuZ3RoID4gMCAmJiBzc3Jjc1swXS5zc3JjO1xuICBsZXQgc2Vjb25kYXJ5U3NyYztcblxuICBjb25zdCBmbG93cyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYy1ncm91cDpGSUQnKVxuICAgIC5tYXAobGluZSA9PiB7XG4gICAgICBjb25zdCBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDE3KS5zcGxpdCgnICcpO1xuICAgICAgcmV0dXJuIHBhcnRzLm1hcChwYXJ0ID0+IHBhcnNlSW50KHBhcnQsIDEwKSk7XG4gICAgfSk7XG4gIGlmIChmbG93cy5sZW5ndGggPiAwICYmIGZsb3dzWzBdLmxlbmd0aCA+IDEgJiYgZmxvd3NbMF1bMF0gPT09IHByaW1hcnlTc3JjKSB7XG4gICAgc2Vjb25kYXJ5U3NyYyA9IGZsb3dzWzBdWzFdO1xuICB9XG5cbiAgZGVzY3JpcHRpb24uY29kZWNzLmZvckVhY2goY29kZWMgPT4ge1xuICAgIGlmIChjb2RlYy5uYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdSVFgnICYmIGNvZGVjLnBhcmFtZXRlcnMuYXB0KSB7XG4gICAgICBsZXQgZW5jUGFyYW0gPSB7XG4gICAgICAgIHNzcmM6IHByaW1hcnlTc3JjLFxuICAgICAgICBjb2RlY1BheWxvYWRUeXBlOiBwYXJzZUludChjb2RlYy5wYXJhbWV0ZXJzLmFwdCwgMTApLFxuICAgICAgfTtcbiAgICAgIGlmIChwcmltYXJ5U3NyYyAmJiBzZWNvbmRhcnlTc3JjKSB7XG4gICAgICAgIGVuY1BhcmFtLnJ0eCA9IHtzc3JjOiBzZWNvbmRhcnlTc3JjfTtcbiAgICAgIH1cbiAgICAgIGVuY29kaW5nUGFyYW1ldGVycy5wdXNoKGVuY1BhcmFtKTtcbiAgICAgIGlmIChoYXNSZWQpIHtcbiAgICAgICAgZW5jUGFyYW0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVuY1BhcmFtKSk7XG4gICAgICAgIGVuY1BhcmFtLmZlYyA9IHtcbiAgICAgICAgICBzc3JjOiBwcmltYXJ5U3NyYyxcbiAgICAgICAgICBtZWNoYW5pc206IGhhc1VscGZlYyA/ICdyZWQrdWxwZmVjJyA6ICdyZWQnLFxuICAgICAgICB9O1xuICAgICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgaWYgKGVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGggPT09IDAgJiYgcHJpbWFyeVNzcmMpIHtcbiAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaCh7XG4gICAgICBzc3JjOiBwcmltYXJ5U3NyYyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIHdlIHN1cHBvcnQgYm90aCBiPUFTIGFuZCBiPVRJQVMgYnV0IGludGVycHJldCBBUyBhcyBUSUFTLlxuICBsZXQgYmFuZHdpZHRoID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYj0nKTtcbiAgaWYgKGJhbmR3aWR0aC5sZW5ndGgpIHtcbiAgICBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9VElBUzonKSA9PT0gMCkge1xuICAgICAgYmFuZHdpZHRoID0gcGFyc2VJbnQoYmFuZHdpZHRoWzBdLnN1YnN0cmluZyg3KSwgMTApO1xuICAgIH0gZWxzZSBpZiAoYmFuZHdpZHRoWzBdLmluZGV4T2YoJ2I9QVM6JykgPT09IDApIHtcbiAgICAgIC8vIHVzZSBmb3JtdWxhIGZyb20gSlNFUCB0byBjb252ZXJ0IGI9QVMgdG8gVElBUyB2YWx1ZS5cbiAgICAgIGJhbmR3aWR0aCA9IHBhcnNlSW50KGJhbmR3aWR0aFswXS5zdWJzdHJpbmcoNSksIDEwKSAqIDEwMDAgKiAwLjk1XG4gICAgICAgICAgLSAoNTAgKiA0MCAqIDgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYW5kd2lkdGggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGVuY29kaW5nUGFyYW1ldGVycy5mb3JFYWNoKHBhcmFtcyA9PiB7XG4gICAgICBwYXJhbXMubWF4Qml0cmF0ZSA9IGJhbmR3aWR0aDtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZW5jb2RpbmdQYXJhbWV0ZXJzO1xufTtcblxuLy8gcGFyc2VzIGh0dHA6Ly9kcmFmdC5vcnRjLm9yZy8jcnRjcnRjcHBhcmFtZXRlcnMqXG5TRFBVdGlscy5wYXJzZVJ0Y3BQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IHJ0Y3BQYXJhbWV0ZXJzID0ge307XG5cbiAgLy8gR2V0cyB0aGUgZmlyc3QgU1NSQy4gTm90ZSB0aGF0IHdpdGggUlRYIHRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlXG4gIC8vIFNTUkNzLlxuICBjb25zdCByZW1vdGVTc3JjID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjOicpXG4gICAgLm1hcChsaW5lID0+IFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpKVxuICAgIC5maWx0ZXIob2JqID0+IG9iai5hdHRyaWJ1dGUgPT09ICdjbmFtZScpWzBdO1xuICBpZiAocmVtb3RlU3NyYykge1xuICAgIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lID0gcmVtb3RlU3NyYy52YWx1ZTtcbiAgICBydGNwUGFyYW1ldGVycy5zc3JjID0gcmVtb3RlU3NyYy5zc3JjO1xuICB9XG5cbiAgLy8gRWRnZSB1c2VzIHRoZSBjb21wb3VuZCBhdHRyaWJ1dGUgaW5zdGVhZCBvZiByZWR1Y2VkU2l6ZVxuICAvLyBjb21wb3VuZCBpcyAhcmVkdWNlZFNpemVcbiAgY29uc3QgcnNpemUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXJ0Y3AtcnNpemUnKTtcbiAgcnRjcFBhcmFtZXRlcnMucmVkdWNlZFNpemUgPSByc2l6ZS5sZW5ndGggPiAwO1xuICBydGNwUGFyYW1ldGVycy5jb21wb3VuZCA9IHJzaXplLmxlbmd0aCA9PT0gMDtcblxuICAvLyBwYXJzZXMgdGhlIHJ0Y3AtbXV4IGF0dHLRlmJ1dGUuXG4gIC8vIE5vdGUgdGhhdCBFZGdlIGRvZXMgbm90IHN1cHBvcnQgdW5tdXhlZCBSVENQLlxuICBjb25zdCBtdXggPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXJ0Y3AtbXV4Jyk7XG4gIHJ0Y3BQYXJhbWV0ZXJzLm11eCA9IG11eC5sZW5ndGggPiAwO1xuXG4gIHJldHVybiBydGNwUGFyYW1ldGVycztcbn07XG5cblNEUFV0aWxzLndyaXRlUnRjcFBhcmFtZXRlcnMgPSBmdW5jdGlvbihydGNwUGFyYW1ldGVycykge1xuICBsZXQgc2RwID0gJyc7XG4gIGlmIChydGNwUGFyYW1ldGVycy5yZWR1Y2VkU2l6ZSkge1xuICAgIHNkcCArPSAnYT1ydGNwLXJzaXplXFxyXFxuJztcbiAgfVxuICBpZiAocnRjcFBhcmFtZXRlcnMubXV4KSB7XG4gICAgc2RwICs9ICdhPXJ0Y3AtbXV4XFxyXFxuJztcbiAgfVxuICBpZiAocnRjcFBhcmFtZXRlcnMuc3NyYyAhPT0gdW5kZWZpbmVkICYmIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lKSB7XG4gICAgc2RwICs9ICdhPXNzcmM6JyArIHJ0Y3BQYXJhbWV0ZXJzLnNzcmMgK1xuICAgICAgJyBjbmFtZTonICsgcnRjcFBhcmFtZXRlcnMuY25hbWUgKyAnXFxyXFxuJztcbiAgfVxuICByZXR1cm4gc2RwO1xufTtcblxuXG4vLyBwYXJzZXMgZWl0aGVyIGE9bXNpZDogb3IgYT1zc3JjOi4uLiBtc2lkIGxpbmVzIGFuZCByZXR1cm5zXG4vLyB0aGUgaWQgb2YgdGhlIE1lZGlhU3RyZWFtIGFuZCBNZWRpYVN0cmVhbVRyYWNrLlxuU0RQVXRpbHMucGFyc2VNc2lkID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGxldCBwYXJ0cztcbiAgY29uc3Qgc3BlYyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9bXNpZDonKTtcbiAgaWYgKHNwZWMubGVuZ3RoID09PSAxKSB7XG4gICAgcGFydHMgPSBzcGVjWzBdLnN1YnN0cmluZyg3KS5zcGxpdCgnICcpO1xuICAgIHJldHVybiB7c3RyZWFtOiBwYXJ0c1swXSwgdHJhY2s6IHBhcnRzWzFdfTtcbiAgfVxuICBjb25zdCBwbGFuQiA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgIC5tYXAobGluZSA9PiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKSlcbiAgICAuZmlsdGVyKG1zaWRQYXJ0cyA9PiBtc2lkUGFydHMuYXR0cmlidXRlID09PSAnbXNpZCcpO1xuICBpZiAocGxhbkIubGVuZ3RoID4gMCkge1xuICAgIHBhcnRzID0gcGxhbkJbMF0udmFsdWUuc3BsaXQoJyAnKTtcbiAgICByZXR1cm4ge3N0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXX07XG4gIH1cbn07XG5cbi8vIFNDVFBcbi8vIHBhcnNlcyBkcmFmdC1pZXRmLW1tdXNpYy1zY3RwLXNkcC0yNiBmaXJzdCBhbmQgZmFsbHMgYmFja1xuLy8gdG8gZHJhZnQtaWV0Zi1tbXVzaWMtc2N0cC1zZHAtMDVcblNEUFV0aWxzLnBhcnNlU2N0cERlc2NyaXB0aW9uID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IG1saW5lID0gU0RQVXRpbHMucGFyc2VNTGluZShtZWRpYVNlY3Rpb24pO1xuICBjb25zdCBtYXhTaXplTGluZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9bWF4LW1lc3NhZ2Utc2l6ZTonKTtcbiAgbGV0IG1heE1lc3NhZ2VTaXplO1xuICBpZiAobWF4U2l6ZUxpbmUubGVuZ3RoID4gMCkge1xuICAgIG1heE1lc3NhZ2VTaXplID0gcGFyc2VJbnQobWF4U2l6ZUxpbmVbMF0uc3Vic3RyaW5nKDE5KSwgMTApO1xuICB9XG4gIGlmIChpc05hTihtYXhNZXNzYWdlU2l6ZSkpIHtcbiAgICBtYXhNZXNzYWdlU2l6ZSA9IDY1NTM2O1xuICB9XG4gIGNvbnN0IHNjdHBQb3J0ID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zY3RwLXBvcnQ6Jyk7XG4gIGlmIChzY3RwUG9ydC5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcnQ6IHBhcnNlSW50KHNjdHBQb3J0WzBdLnN1YnN0cmluZygxMiksIDEwKSxcbiAgICAgIHByb3RvY29sOiBtbGluZS5mbXQsXG4gICAgICBtYXhNZXNzYWdlU2l6ZSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IHNjdHBNYXBMaW5lcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c2N0cG1hcDonKTtcbiAgaWYgKHNjdHBNYXBMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgcGFydHMgPSBzY3RwTWFwTGluZXNbMF1cbiAgICAgIC5zdWJzdHJpbmcoMTApXG4gICAgICAuc3BsaXQoJyAnKTtcbiAgICByZXR1cm4ge1xuICAgICAgcG9ydDogcGFyc2VJbnQocGFydHNbMF0sIDEwKSxcbiAgICAgIHByb3RvY29sOiBwYXJ0c1sxXSxcbiAgICAgIG1heE1lc3NhZ2VTaXplLFxuICAgIH07XG4gIH1cbn07XG5cbi8vIFNDVFBcbi8vIG91dHB1dHMgdGhlIGRyYWZ0LWlldGYtbW11c2ljLXNjdHAtc2RwLTI2IHZlcnNpb24gdGhhdCBhbGwgYnJvd3NlcnNcbi8vIHN1cHBvcnQgYnkgbm93IHJlY2VpdmluZyBpbiB0aGlzIGZvcm1hdCwgdW5sZXNzIHdlIG9yaWdpbmFsbHkgcGFyc2VkXG4vLyBhcyB0aGUgZHJhZnQtaWV0Zi1tbXVzaWMtc2N0cC1zZHAtMDUgZm9ybWF0IChpbmRpY2F0ZWQgYnkgdGhlIG0tbGluZVxuLy8gcHJvdG9jb2wgb2YgRFRMUy9TQ1RQIC0tIHdpdGhvdXQgVURQLyBvciBUQ1AvKVxuU0RQVXRpbHMud3JpdGVTY3RwRGVzY3JpcHRpb24gPSBmdW5jdGlvbihtZWRpYSwgc2N0cCkge1xuICBsZXQgb3V0cHV0ID0gW107XG4gIGlmIChtZWRpYS5wcm90b2NvbCAhPT0gJ0RUTFMvU0NUUCcpIHtcbiAgICBvdXRwdXQgPSBbXG4gICAgICAnbT0nICsgbWVkaWEua2luZCArICcgOSAnICsgbWVkaWEucHJvdG9jb2wgKyAnICcgKyBzY3RwLnByb3RvY29sICsgJ1xcclxcbicsXG4gICAgICAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbicsXG4gICAgICAnYT1zY3RwLXBvcnQ6JyArIHNjdHAucG9ydCArICdcXHJcXG4nLFxuICAgIF07XG4gIH0gZWxzZSB7XG4gICAgb3V0cHV0ID0gW1xuICAgICAgJ209JyArIG1lZGlhLmtpbmQgKyAnIDkgJyArIG1lZGlhLnByb3RvY29sICsgJyAnICsgc2N0cC5wb3J0ICsgJ1xcclxcbicsXG4gICAgICAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbicsXG4gICAgICAnYT1zY3RwbWFwOicgKyBzY3RwLnBvcnQgKyAnICcgKyBzY3RwLnByb3RvY29sICsgJyA2NTUzNVxcclxcbicsXG4gICAgXTtcbiAgfVxuICBpZiAoc2N0cC5tYXhNZXNzYWdlU2l6ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgb3V0cHV0LnB1c2goJ2E9bWF4LW1lc3NhZ2Utc2l6ZTonICsgc2N0cC5tYXhNZXNzYWdlU2l6ZSArICdcXHJcXG4nKTtcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xufTtcblxuLy8gR2VuZXJhdGUgYSBzZXNzaW9uIElEIGZvciBTRFAuXG4vLyBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvZHJhZnQtaWV0Zi1ydGN3ZWItanNlcC0yMCNzZWN0aW9uLTUuMi4xXG4vLyByZWNvbW1lbmRzIHVzaW5nIGEgY3J5cHRvZ3JhcGhpY2FsbHkgcmFuZG9tICt2ZSA2NC1iaXQgdmFsdWVcbi8vIGJ1dCByaWdodCBub3cgdGhpcyBzaG91bGQgYmUgYWNjZXB0YWJsZSBhbmQgd2l0aGluIHRoZSByaWdodCByYW5nZVxuU0RQVXRpbHMuZ2VuZXJhdGVTZXNzaW9uSWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zdWJzdHIoMiwgMjIpO1xufTtcblxuLy8gV3JpdGUgYm9pbGVyIHBsYXRlIGZvciBzdGFydCBvZiBTRFBcbi8vIHNlc3NJZCBhcmd1bWVudCBpcyBvcHRpb25hbCAtIGlmIG5vdCBzdXBwbGllZCBpdCB3aWxsXG4vLyBiZSBnZW5lcmF0ZWQgcmFuZG9tbHlcbi8vIHNlc3NWZXJzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byAyXG4vLyBzZXNzVXNlciBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gJ3RoaXNpc2FkYXB0ZXJvcnRjJ1xuU0RQVXRpbHMud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUgPSBmdW5jdGlvbihzZXNzSWQsIHNlc3NWZXIsIHNlc3NVc2VyKSB7XG4gIGxldCBzZXNzaW9uSWQ7XG4gIGNvbnN0IHZlcnNpb24gPSBzZXNzVmVyICE9PSB1bmRlZmluZWQgPyBzZXNzVmVyIDogMjtcbiAgaWYgKHNlc3NJZCkge1xuICAgIHNlc3Npb25JZCA9IHNlc3NJZDtcbiAgfSBlbHNlIHtcbiAgICBzZXNzaW9uSWQgPSBTRFBVdGlscy5nZW5lcmF0ZVNlc3Npb25JZCgpO1xuICB9XG4gIGNvbnN0IHVzZXIgPSBzZXNzVXNlciB8fCAndGhpc2lzYWRhcHRlcm9ydGMnO1xuICAvLyBGSVhNRTogc2Vzcy1pZCBzaG91bGQgYmUgYW4gTlRQIHRpbWVzdGFtcC5cbiAgcmV0dXJuICd2PTBcXHJcXG4nICtcbiAgICAgICdvPScgKyB1c2VyICsgJyAnICsgc2Vzc2lvbklkICsgJyAnICsgdmVyc2lvbiArXG4gICAgICAgICcgSU4gSVA0IDEyNy4wLjAuMVxcclxcbicgK1xuICAgICAgJ3M9LVxcclxcbicgK1xuICAgICAgJ3Q9MCAwXFxyXFxuJztcbn07XG5cbi8vIEdldHMgdGhlIGRpcmVjdGlvbiBmcm9tIHRoZSBtZWRpYVNlY3Rpb24gb3IgdGhlIHNlc3Npb25wYXJ0LlxuU0RQVXRpbHMuZ2V0RGlyZWN0aW9uID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCkge1xuICAvLyBMb29rIGZvciBzZW5kcmVjdiwgc2VuZG9ubHksIHJlY3Zvbmx5LCBpbmFjdGl2ZSwgZGVmYXVsdCB0byBzZW5kcmVjdi5cbiAgY29uc3QgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBzd2l0Y2ggKGxpbmVzW2ldKSB7XG4gICAgICBjYXNlICdhPXNlbmRyZWN2JzpcbiAgICAgIGNhc2UgJ2E9c2VuZG9ubHknOlxuICAgICAgY2FzZSAnYT1yZWN2b25seSc6XG4gICAgICBjYXNlICdhPWluYWN0aXZlJzpcbiAgICAgICAgcmV0dXJuIGxpbmVzW2ldLnN1YnN0cmluZygyKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIEZJWE1FOiBXaGF0IHNob3VsZCBoYXBwZW4gaGVyZT9cbiAgICB9XG4gIH1cbiAgaWYgKHNlc3Npb25wYXJ0KSB7XG4gICAgcmV0dXJuIFNEUFV0aWxzLmdldERpcmVjdGlvbihzZXNzaW9ucGFydCk7XG4gIH1cbiAgcmV0dXJuICdzZW5kcmVjdic7XG59O1xuXG5TRFBVdGlscy5nZXRLaW5kID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIGNvbnN0IGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICBjb25zdCBtbGluZSA9IGxpbmVzWzBdLnNwbGl0KCcgJyk7XG4gIHJldHVybiBtbGluZVswXS5zdWJzdHJpbmcoMik7XG59O1xuXG5TRFBVdGlscy5pc1JlamVjdGVkID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHJldHVybiBtZWRpYVNlY3Rpb24uc3BsaXQoJyAnLCAyKVsxXSA9PT0gJzAnO1xufTtcblxuU0RQVXRpbHMucGFyc2VNTGluZSA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICBjb25zdCBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgY29uc3QgcGFydHMgPSBsaW5lc1swXS5zdWJzdHJpbmcoMikuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBraW5kOiBwYXJ0c1swXSxcbiAgICBwb3J0OiBwYXJzZUludChwYXJ0c1sxXSwgMTApLFxuICAgIHByb3RvY29sOiBwYXJ0c1syXSxcbiAgICBmbXQ6IHBhcnRzLnNsaWNlKDMpLmpvaW4oJyAnKSxcbiAgfTtcbn07XG5cblNEUFV0aWxzLnBhcnNlT0xpbmUgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgY29uc3QgbGluZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ289JylbMF07XG4gIGNvbnN0IHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMikuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICB1c2VybmFtZTogcGFydHNbMF0sXG4gICAgc2Vzc2lvbklkOiBwYXJ0c1sxXSxcbiAgICBzZXNzaW9uVmVyc2lvbjogcGFyc2VJbnQocGFydHNbMl0sIDEwKSxcbiAgICBuZXRUeXBlOiBwYXJ0c1szXSxcbiAgICBhZGRyZXNzVHlwZTogcGFydHNbNF0sXG4gICAgYWRkcmVzczogcGFydHNbNV0sXG4gIH07XG59O1xuXG4vLyBhIHZlcnkgbmFpdmUgaW50ZXJwcmV0YXRpb24gb2YgYSB2YWxpZCBTRFAuXG5TRFBVdGlscy5pc1ZhbGlkU0RQID0gZnVuY3Rpb24oYmxvYikge1xuICBpZiAodHlwZW9mIGJsb2IgIT09ICdzdHJpbmcnIHx8IGJsb2IubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhibG9iKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChsaW5lc1tpXS5sZW5ndGggPCAyIHx8IGxpbmVzW2ldLmNoYXJBdCgxKSAhPT0gJz0nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIFRPRE86IGNoZWNrIHRoZSBtb2RpZmllciBhIGJpdCBtb3JlLlxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLlxuaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gU0RQVXRpbHM7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/sdp/sdp.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/ua-parser-js/src/ua-parser.js":
/*!****************************************************!*\
  !*** ./node_modules/ua-parser-js/src/ua-parser.js ***!
  \****************************************************/
/***/ (function(module, exports, __webpack_require__) {

eval(__webpack_require__.ts("var __WEBPACK_AMD_DEFINE_RESULT__;/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.40\n   Copyright © 2012-2024 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.40',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 500;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS',\n        SUFFIX_BROWSER = ' Browser';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return map.hasOwnProperty('*') ? map['*'] : str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bop(?:rg)?x\\/([\\w\\.]+)/i                                          // Opera GX\n            ], [VERSION, [NAME, OPERA+' GX']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i            // Baidu\n            ], [VERSION, [NAME, 'Baidu']], [\n            /\\b(?:mxbrowser|mxios|myie2)\\/?([-\\w\\.]*)\\b/i                       // Maxthon\n            ], [VERSION, [NAME, 'Maxthon']], [\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\\/ ]?([\\w\\.]*)/i,      \n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer/Sleipnir\n            // Trident based\n            /(avant|iemobile|slim(?:browser|boat|jet))[\\/ ]?([\\d\\.]*)/i,        // Avant/IEMobile/SlimBrowser/SlimBoat/Slimjet\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Blink/Webkit/KHTML based                                         // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ//Vivaldi/DuckDuckGo/Klar/Helio/Dragon\n            /(heytap|ovi|115)browser\\/([\\d\\.]+)/i,                              // HeyTap/Ovi/115\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /quark(?:pc)?\\/([-\\w\\.]+)/i                                         // Quark\n            ], [VERSION, [NAME, 'Quark']], [\n            /\\bddg\\/([\\w\\.]+)/i                                                 // DuckDuckGo\n            ], [VERSION, [NAME, 'DuckDuckGo']], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i,\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /slbrowser\\/([\\w\\.]+)/i                                             // Smart Lenovo Browser\n            ], [VERSION, [NAME, 'Smart Lenovo '+BROWSER]], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI' + SUFFIX_BROWSER]], [\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihoobrowser\\/?([\\w\\.]*)/i                                       // 360\n            ], [VERSION, [NAME, '360']], [\n            /\\b(qq)\\/([\\w\\.]+)/i                                                // QQ\n            ], [[NAME, /(.+)/, '$1Browser'], VERSION], [\n            /(oculus|sailfish|huawei|vivo|pico)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1' + SUFFIX_BROWSER], VERSION], [              // Oculus/Sailfish/HuaweiBrowser/VivoBrowser/PicoBrowser\n            /samsungbrowser\\/([\\w\\.]+)/i                                        // Samsung Internet\n            ], [VERSION, [NAME, SAMSUNG + ' Internet']], [\n            /metasr[\\/ ]?([\\d\\.]+)/i                                            // Sogou Explorer\n            ], [VERSION, [NAME, 'Sogou Explorer']], [\n            /(sogou)mo\\w+\\/([\\d\\.]+)/i                                          // Sogou Mobile\n            ], [[NAME, 'Sogou Mobile'], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|2345(?=browser|chrome|explorer))\\w*[\\/ ]?v?([\\w\\.]+)/i   // QQ/2345\n            ], [NAME, VERSION], [\n            /(lbbrowser|rekonq)/i,                                              // LieBao Browser/Rekonq\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n            /ome\\/([\\w\\.]+) \\w* ?(iron) saf/i,                                  // Iron\n            /ome\\/([\\w\\.]+).+qihu (360)[es]e/i                                  // 360\n            ], [VERSION, NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(Klarna)\\/([\\w\\.]+)/i,                                             // Klarna Shopping Browser for iOS & Android\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(alipay)client\\/([\\w\\.]+)/i,                                       // Alipay\n            /(twitter)(?:and| f.+e\\/([\\w\\.]+))/i,                               // Twitter\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(wolvic|librewolf)\\/([\\w\\.]+)/i                                    // Wolvic/LibreWolf\n            ], [NAME, VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i                                              // Links\n            ], [NAME, [VERSION, /_/g, '.']], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-(?![lr])\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]((?!sm-[lr])[-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Honor\n            /(?:honor)([-\\w ]+)[;\\)]/i\n            ], [MODEL, [VENDOR, 'Honor'], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,        // Xiaomi Redmi 'numeric' models\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /oid[^\\)]+; (2\\d{4}(283|rpbf)[cgl])( bui|\\))/i,                     // Redmi Pad\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n            /\\b(opd2\\d{3}a?) bui/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, TABLET]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+; (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo(?!bc)\\w\\w)( bui|\\))/i,                           // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // TCL\n            /droid [\\w\\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\\w*(\\)| bui)/i\n            ], [MODEL, [VENDOR, 'TCL'], [TYPE, TABLET]], [\n\n            // itel\n            /(itel) ((\\w+))/i\n            ], [[VENDOR, lowerize], MODEL, [TYPE, strMapper, { 'tablet' : ['p10001l', 'w7001'], '*' : 'mobile' }]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n                \n            // Ulefone\n            /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Ulefone'], [TYPE, MOBILE]], [\n\n            // Energizer\n            /; (energy ?\\w+)(?: bui|\\))/i,\n            /; energizer ([\\w ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Energizer'], [TYPE, MOBILE]], [\n\n            // Cat\n            /; cat (b35);/i,\n            /; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Cat'], [TYPE, MOBILE]], [\n\n            // Smartfren\n            /((?:new )?andromax[\\w- ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Smartfren'], [TYPE, MOBILE]], [\n\n            // Nothing\n            /droid.+; (a(?:015|06[35]|142p?))/i\n            ], [MODEL, [VENDOR, 'Nothing'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron/Infinix/Tecno/Micromax/Advan\n            /; (imo) ((?!tab)[\\w ]+?)(?: bui|\\))/i,                             // IMO\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(imo) (tab \\w+)/i,                                                 // IMO\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mitv-\\w{5}) bui/i                                                 // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /\\b(sm-[lr]\\d\\d[05][fnuw]?s?)\\b/i                                   // Samsung Galaxy Watch\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, WEARABLE]], [\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // XR\n            ///////////////////\n\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /(pico) (4|neo3(?: link|pro)?)/i                                    // Pico\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /; (quest( \\d| pro)?)/i                                             // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /(arkweb)\\/([\\w\\.]+)/i                                              // ArkWeb\n            ], [NAME, VERSION], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna/Servo\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n            /\\b(libweb)/i\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i             // Windows Phone\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /windows nt 6\\.2; (arm)/i,                                        // Windows RT\n            /windows[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n            /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[VERSION, strMapper, windowsVersionMap], [NAME, 'Windows']], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS/OpenHarmony\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (\"object\" !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (\"function\" === FUNC_TYPE && __webpack_require__.amdO) {\n            !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n                return UAParser;\n            }).call(exports, __webpack_require__, exports, module),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91YS1wYXJzZXItanMvc3JjL3VhLXBhcnNlci5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsMEJBQTBCLGNBQWM7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDZDQUE2QztBQUM3Qzs7QUFFQTtBQUNBOztBQUVBLHFDQUFxQztBQUNyQzs7QUFFQTtBQUNBLG9DQUFvQyxrQkFBa0I7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSw4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QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBFQUEwRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBYTtBQUN6QjtBQUNBO0FBQ0EsUUFBUSxnQkFBZ0I7QUFDeEIsTUFBTTtBQUNOO0FBQ0EsWUFBWSxVQUFjLGtCQUFrQix3QkFBVTtBQUN0RCxZQUFZLG1DQUFPO0FBQ25CO0FBQ0EsYUFBYTtBQUFBLGtHQUFDO0FBQ2QsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvdWEtcGFyc2VyLWpzL3NyYy91YS1wYXJzZXIuanM/MWE4YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8qIFVBUGFyc2VyLmpzIHYxLjAuNDBcbiAgIENvcHlyaWdodCDCqSAyMDEyLTIwMjQgRmFpc2FsIFNhbG1hbiA8ZkBmYWlzYWxtYW4uY29tPlxuICAgTUlUIExpY2Vuc2UgKi8vKlxuICAgRGV0ZWN0IEJyb3dzZXIsIEVuZ2luZSwgT1MsIENQVSwgYW5kIERldmljZSB0eXBlL21vZGVsIGZyb20gVXNlci1BZ2VudCBkYXRhLlxuICAgU3VwcG9ydHMgYnJvd3NlciAmIG5vZGUuanMgZW52aXJvbm1lbnQuIFxuICAgRGVtbyAgIDogaHR0cHM6Ly9mYWlzYWxtYW4uZ2l0aHViLmlvL3VhLXBhcnNlci1qc1xuICAgU291cmNlIDogaHR0cHM6Ly9naXRodWIuY29tL2ZhaXNhbG1hbi91YS1wYXJzZXItanMgKi9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4oZnVuY3Rpb24gKHdpbmRvdywgdW5kZWZpbmVkKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLy8vLy8vLy8vLy8vL1xuICAgIC8vIENvbnN0YW50c1xuICAgIC8vLy8vLy8vLy8vLy9cblxuXG4gICAgdmFyIExJQlZFUlNJT04gID0gJzEuMC40MCcsXG4gICAgICAgIEVNUFRZICAgICAgID0gJycsXG4gICAgICAgIFVOS05PV04gICAgID0gJz8nLFxuICAgICAgICBGVU5DX1RZUEUgICA9ICdmdW5jdGlvbicsXG4gICAgICAgIFVOREVGX1RZUEUgID0gJ3VuZGVmaW5lZCcsXG4gICAgICAgIE9CSl9UWVBFICAgID0gJ29iamVjdCcsXG4gICAgICAgIFNUUl9UWVBFICAgID0gJ3N0cmluZycsXG4gICAgICAgIE1BSk9SICAgICAgID0gJ21ham9yJyxcbiAgICAgICAgTU9ERUwgICAgICAgPSAnbW9kZWwnLFxuICAgICAgICBOQU1FICAgICAgICA9ICduYW1lJyxcbiAgICAgICAgVFlQRSAgICAgICAgPSAndHlwZScsXG4gICAgICAgIFZFTkRPUiAgICAgID0gJ3ZlbmRvcicsXG4gICAgICAgIFZFUlNJT04gICAgID0gJ3ZlcnNpb24nLFxuICAgICAgICBBUkNISVRFQ1RVUkU9ICdhcmNoaXRlY3R1cmUnLFxuICAgICAgICBDT05TT0xFICAgICA9ICdjb25zb2xlJyxcbiAgICAgICAgTU9CSUxFICAgICAgPSAnbW9iaWxlJyxcbiAgICAgICAgVEFCTEVUICAgICAgPSAndGFibGV0JyxcbiAgICAgICAgU01BUlRUViAgICAgPSAnc21hcnR0dicsXG4gICAgICAgIFdFQVJBQkxFICAgID0gJ3dlYXJhYmxlJyxcbiAgICAgICAgRU1CRURERUQgICAgPSAnZW1iZWRkZWQnLFxuICAgICAgICBVQV9NQVhfTEVOR1RIID0gNTAwO1xuXG4gICAgdmFyIEFNQVpPTiAgPSAnQW1hem9uJyxcbiAgICAgICAgQVBQTEUgICA9ICdBcHBsZScsXG4gICAgICAgIEFTVVMgICAgPSAnQVNVUycsXG4gICAgICAgIEJMQUNLQkVSUlkgPSAnQmxhY2tCZXJyeScsXG4gICAgICAgIEJST1dTRVIgPSAnQnJvd3NlcicsXG4gICAgICAgIENIUk9NRSAgPSAnQ2hyb21lJyxcbiAgICAgICAgRURHRSAgICA9ICdFZGdlJyxcbiAgICAgICAgRklSRUZPWCA9ICdGaXJlZm94JyxcbiAgICAgICAgR09PR0xFICA9ICdHb29nbGUnLFxuICAgICAgICBIVUFXRUkgID0gJ0h1YXdlaScsXG4gICAgICAgIExHICAgICAgPSAnTEcnLFxuICAgICAgICBNSUNST1NPRlQgPSAnTWljcm9zb2Z0JyxcbiAgICAgICAgTU9UT1JPTEEgID0gJ01vdG9yb2xhJyxcbiAgICAgICAgT1BFUkEgICA9ICdPcGVyYScsXG4gICAgICAgIFNBTVNVTkcgPSAnU2Ftc3VuZycsXG4gICAgICAgIFNIQVJQICAgPSAnU2hhcnAnLFxuICAgICAgICBTT05ZICAgID0gJ1NvbnknLFxuICAgICAgICBYSUFPTUkgID0gJ1hpYW9taScsXG4gICAgICAgIFpFQlJBICAgPSAnWmVicmEnLFxuICAgICAgICBGQUNFQk9PSyAgICA9ICdGYWNlYm9vaycsXG4gICAgICAgIENIUk9NSVVNX09TID0gJ0Nocm9taXVtIE9TJyxcbiAgICAgICAgTUFDX09TICA9ICdNYWMgT1MnLFxuICAgICAgICBTVUZGSVhfQlJPV1NFUiA9ICcgQnJvd3Nlcic7XG5cbiAgICAvLy8vLy8vLy8vL1xuICAgIC8vIEhlbHBlclxuICAgIC8vLy8vLy8vLy9cblxuICAgIHZhciBleHRlbmQgPSBmdW5jdGlvbiAocmVnZXhlcywgZXh0ZW5zaW9ucykge1xuICAgICAgICAgICAgdmFyIG1lcmdlZFJlZ2V4ZXMgPSB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gcmVnZXhlcykge1xuICAgICAgICAgICAgICAgIGlmIChleHRlbnNpb25zW2ldICYmIGV4dGVuc2lvbnNbaV0ubGVuZ3RoICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWdleGVzW2ldID0gZXh0ZW5zaW9uc1tpXS5jb25jYXQocmVnZXhlc1tpXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUmVnZXhlc1tpXSA9IHJlZ2V4ZXNbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZFJlZ2V4ZXM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcml6ZSA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgICAgIHZhciBlbnVtcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGVudW1zW2FycltpXS50b1VwcGVyQ2FzZSgpXSA9IGFycltpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlbnVtcztcbiAgICAgICAgfSxcbiAgICAgICAgaGFzID0gZnVuY3Rpb24gKHN0cjEsIHN0cjIpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygc3RyMSA9PT0gU1RSX1RZUEUgPyBsb3dlcml6ZShzdHIyKS5pbmRleE9mKGxvd2VyaXplKHN0cjEpKSAhPT0gLTEgOiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgbG93ZXJpemUgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1ham9yaXplID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YodmVyc2lvbikgPT09IFNUUl9UWVBFID8gdmVyc2lvbi5yZXBsYWNlKC9bXlxcZFxcLl0vZywgRU1QVFkpLnNwbGl0KCcuJylbMF0gOiB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHRyaW0gPSBmdW5jdGlvbiAoc3RyLCBsZW4pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Yoc3RyKSA9PT0gU1RSX1RZUEUpIHtcbiAgICAgICAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZSgvXlxcc1xccyovLCBFTVBUWSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZihsZW4pID09PSBVTkRFRl9UWVBFID8gc3RyIDogc3RyLnN1YnN0cmluZygwLCBVQV9NQVhfTEVOR1RIKTtcbiAgICAgICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gTWFwIGhlbHBlclxuICAgIC8vLy8vLy8vLy8vLy8vXG5cbiAgICB2YXIgcmd4TWFwcGVyID0gZnVuY3Rpb24gKHVhLCBhcnJheXMpIHtcblxuICAgICAgICAgICAgdmFyIGkgPSAwLCBqLCBrLCBwLCBxLCBtYXRjaGVzLCBtYXRjaDtcblxuICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGFsbCByZWdleGVzIG1hcHNcbiAgICAgICAgICAgIHdoaWxlIChpIDwgYXJyYXlzLmxlbmd0aCAmJiAhbWF0Y2hlcykge1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlZ2V4ID0gYXJyYXlzW2ldLCAgICAgICAvLyBldmVuIHNlcXVlbmNlICgwLDIsNCwuLilcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMgPSBhcnJheXNbaSArIDFdOyAgIC8vIG9kZCBzZXF1ZW5jZSAoMSwzLDUsLi4pXG4gICAgICAgICAgICAgICAgaiA9IGsgPSAwO1xuXG4gICAgICAgICAgICAgICAgLy8gdHJ5IG1hdGNoaW5nIHVhc3RyaW5nIHdpdGggcmVnZXhlc1xuICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgcmVnZXgubGVuZ3RoICYmICFtYXRjaGVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWdleFtqXSkgeyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVzID0gcmVnZXhbaisrXS5leGVjKHVhKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoISFtYXRjaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHAgPSAwOyBwIDwgcHJvcHMubGVuZ3RoOyBwKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IG1hdGNoZXNbKytrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcHJvcHNbcF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgZ2l2ZW4gcHJvcGVydHkgaXMgYWN0dWFsbHkgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHEgPT09IE9CSl9UWVBFICYmIHEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcVsxXSA9PSBGVU5DX1RZUEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhc3NpZ24gbW9kaWZpZWQgbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gcVsxXS5jYWxsKHRoaXMsIG1hdGNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNzaWduIGdpdmVuIHZhbHVlLCBpZ25vcmUgcmVnZXggbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gcVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChxLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgd2hldGhlciBmdW5jdGlvbiBvciByZWdleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBxWzFdID09PSBGVU5DX1RZUEUgJiYgIShxWzFdLmV4ZWMgJiYgcVsxXS50ZXN0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZnVuY3Rpb24gKHVzdWFsbHkgc3RyaW5nIG1hcHBlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gbWF0Y2ggPyBxWzFdLmNhbGwodGhpcywgbWF0Y2gsIHFbMl0pIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYW5pdGl6ZSBtYXRjaCB1c2luZyBnaXZlbiByZWdleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcVswXV0gPSBtYXRjaCA/IG1hdGNoLnJlcGxhY2UocVsxXSwgcVsyXSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocS5sZW5ndGggPT09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gbWF0Y2ggPyBxWzNdLmNhbGwodGhpcywgbWF0Y2gucmVwbGFjZShxWzFdLCBxWzJdKSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FdID0gbWF0Y2ggPyBtYXRjaCA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSArPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHN0ck1hcHBlciA9IGZ1bmN0aW9uIChzdHIsIG1hcCkge1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIG1hcCkge1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGN1cnJlbnQgdmFsdWUgaXMgYXJyYXlcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1hcFtpXSA9PT0gT0JKX1RZUEUgJiYgbWFwW2ldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtYXBbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXMobWFwW2ldW2pdLCBzdHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpID09PSBVTktOT1dOKSA/IHVuZGVmaW5lZCA6IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhhcyhtYXBbaV0sIHN0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpID09PSBVTktOT1dOKSA/IHVuZGVmaW5lZCA6IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1hcC5oYXNPd25Qcm9wZXJ0eSgnKicpID8gbWFwWycqJ10gOiBzdHI7XG4gICAgfTtcblxuICAgIC8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIFN0cmluZyBtYXBcbiAgICAvLy8vLy8vLy8vLy8vL1xuXG4gICAgLy8gU2FmYXJpIDwgMy4wXG4gICAgdmFyIG9sZFNhZmFyaU1hcCA9IHtcbiAgICAgICAgICAgICcxLjAnICAgOiAnLzgnLFxuICAgICAgICAgICAgJzEuMicgICA6ICcvMScsXG4gICAgICAgICAgICAnMS4zJyAgIDogJy8zJyxcbiAgICAgICAgICAgICcyLjAnICAgOiAnLzQxMicsXG4gICAgICAgICAgICAnMi4wLjInIDogJy80MTYnLFxuICAgICAgICAgICAgJzIuMC4zJyA6ICcvNDE3JyxcbiAgICAgICAgICAgICcyLjAuNCcgOiAnLzQxOScsXG4gICAgICAgICAgICAnPycgICAgIDogJy8nXG4gICAgICAgIH0sXG4gICAgICAgIHdpbmRvd3NWZXJzaW9uTWFwID0ge1xuICAgICAgICAgICAgJ01FJyAgICAgICAgOiAnNC45MCcsXG4gICAgICAgICAgICAnTlQgMy4xMScgICA6ICdOVDMuNTEnLFxuICAgICAgICAgICAgJ05UIDQuMCcgICAgOiAnTlQ0LjAnLFxuICAgICAgICAgICAgJzIwMDAnICAgICAgOiAnTlQgNS4wJyxcbiAgICAgICAgICAgICdYUCcgICAgICAgIDogWydOVCA1LjEnLCAnTlQgNS4yJ10sXG4gICAgICAgICAgICAnVmlzdGEnICAgICA6ICdOVCA2LjAnLFxuICAgICAgICAgICAgJzcnICAgICAgICAgOiAnTlQgNi4xJyxcbiAgICAgICAgICAgICc4JyAgICAgICAgIDogJ05UIDYuMicsXG4gICAgICAgICAgICAnOC4xJyAgICAgICA6ICdOVCA2LjMnLFxuICAgICAgICAgICAgJzEwJyAgICAgICAgOiBbJ05UIDYuNCcsICdOVCAxMC4wJ10sXG4gICAgICAgICAgICAnUlQnICAgICAgICA6ICdBUk0nXG4gICAgfTtcblxuICAgIC8vLy8vLy8vLy8vLy8vXG4gICAgLy8gUmVnZXggbWFwXG4gICAgLy8vLy8vLy8vLy8vL1xuXG4gICAgdmFyIHJlZ2V4ZXMgPSB7XG5cbiAgICAgICAgYnJvd3NlciA6IFtbXG5cbiAgICAgICAgICAgIC9cXGIoPzpjcm1vfGNyaW9zKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9tZSBmb3IgQW5kcm9pZC9pT1NcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0Nocm9tZSddXSwgW1xuICAgICAgICAgICAgL2VkZyg/OmV8aW9zfGEpP1xcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaWNyb3NvZnQgRWRnZVxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnRWRnZSddXSwgW1xuXG4gICAgICAgICAgICAvLyBQcmVzdG8gYmFzZWRcbiAgICAgICAgICAgIC8ob3BlcmEgbWluaSlcXC8oWy1cXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgTWluaVxuICAgICAgICAgICAgLyhvcGVyYSBbbW9iaWxldGFiXXszLDZ9KVxcYi4rdmVyc2lvblxcLyhbLVxcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgLy8gT3BlcmEgTW9iaS9UYWJsZXRcbiAgICAgICAgICAgIC8ob3BlcmEpKD86Lit2ZXJzaW9uXFwvfFtcXC8gXSspKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC9vcGlvc1tcXC8gXSsoW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgbWluaSBvbiBpcGhvbmUgPj0gOC4wXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIE9QRVJBKycgTWluaSddXSwgW1xuICAgICAgICAgICAgL1xcYm9wKD86cmcpP3hcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgR1hcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgT1BFUkErJyBHWCddXSwgW1xuICAgICAgICAgICAgL1xcYm9wclxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgV2Via2l0XG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIE9QRVJBXV0sIFtcblxuICAgICAgICAgICAgLy8gTWl4ZWRcbiAgICAgICAgICAgIC9cXGJiW2FpXSpkKD86dWhkfFt1Yl0qW2Fla29wcnN3eF17NSw2fSlbXFwvIF0/KFtcXHdcXC5dKykvaSAgICAgICAgICAgIC8vIEJhaWR1XG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdCYWlkdSddXSwgW1xuICAgICAgICAgICAgL1xcYig/Om14YnJvd3NlcnxteGlvc3xteWllMilcXC8/KFstXFx3XFwuXSopXFxiL2kgICAgICAgICAgICAgICAgICAgICAgIC8vIE1heHRob25cbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ01heHRob24nXV0sIFtcbiAgICAgICAgICAgIC8oa2luZGxlKVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2luZGxlXG4gICAgICAgICAgICAvKGx1bmFzY2FwZXxtYXh0aG9ufG5ldGZyb250fGphc21pbmV8YmxhemVyfHNsZWlwbmlyKVtcXC8gXT8oW1xcd1xcLl0qKS9pLCAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMdW5hc2NhcGUvTWF4dGhvbi9OZXRmcm9udC9KYXNtaW5lL0JsYXplci9TbGVpcG5pclxuICAgICAgICAgICAgLy8gVHJpZGVudCBiYXNlZFxuICAgICAgICAgICAgLyhhdmFudHxpZW1vYmlsZXxzbGltKD86YnJvd3Nlcnxib2F0fGpldCkpW1xcLyBdPyhbXFxkXFwuXSopL2ksICAgICAgICAvLyBBdmFudC9JRU1vYmlsZS9TbGltQnJvd3Nlci9TbGltQm9hdC9TbGltamV0XG4gICAgICAgICAgICAvKD86bXN8XFwoKShpZSkgKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludGVybmV0IEV4cGxvcmVyXG5cbiAgICAgICAgICAgIC8vIEJsaW5rL1dlYmtpdC9LSFRNTCBiYXNlZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmxvY2svUm9ja01lbHQvTWlkb3JpL0VwaXBoYW55L1NpbGsvU2t5ZmlyZS9Cb2x0L0lyb24vSXJpZGl1bS9QaGFudG9tSlMvQm93c2VyL1F1cFppbGxhL0ZhbGtvblxuICAgICAgICAgICAgLyhmbG9ja3xyb2NrbWVsdHxtaWRvcml8ZXBpcGhhbnl8c2lsa3xza3lmaXJlfG92aWJyb3dzZXJ8Ym9sdHxpcm9ufHZpdmFsZGl8aXJpZGl1bXxwaGFudG9tanN8Ym93c2VyfHF1cHppbGxhfGZhbGtvbnxyZWtvbnF8cHVmZmlufGJyYXZlfHdoYWxlKD8hLituYXZlcil8cXFicm93c2VybGl0ZXxkdWNrZHVja2dvfGtsYXJ8aGVsaW98KD89Y29tb2RvXyk/ZHJhZ29uKVxcLyhbLVxcd1xcLl0rKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWtvbnEvUHVmZmluL0JyYXZlL1doYWxlL1FRQnJvd3NlckxpdGUvUVEvL1ZpdmFsZGkvRHVja0R1Y2tHby9LbGFyL0hlbGlvL0RyYWdvblxuICAgICAgICAgICAgLyhoZXl0YXB8b3ZpfDExNSlicm93c2VyXFwvKFtcXGRcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIZXlUYXAvT3ZpLzExNVxuICAgICAgICAgICAgLyh3ZWlibylfXyhbXFxkXFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlaWJvXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC9xdWFyayg/OnBjKT9cXC8oWy1cXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUXVhcmtcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ1F1YXJrJ11dLCBbXG4gICAgICAgICAgICAvXFxiZGRnXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEdWNrRHVja0dvXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdEdWNrRHVja0dvJ11dLCBbXG4gICAgICAgICAgICAvKD86XFxidWM/ID9icm93c2VyfCg/Omp1Yy4rKXVjd2ViKVtcXC8gXT8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAvLyBVQ0Jyb3dzZXJcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ1VDJytCUk9XU0VSXV0sIFtcbiAgICAgICAgICAgIC9taWNyb20uK1xcYnFiY29yZVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlQ2hhdCBEZXNrdG9wIGZvciBXaW5kb3dzIEJ1aWx0LWluIEJyb3dzZXJcbiAgICAgICAgICAgIC9cXGJxYmNvcmVcXC8oW1xcd1xcLl0rKS4rbWljcm9tL2ksXG4gICAgICAgICAgICAvbWljcm9tZXNzZW5nZXJcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlQ2hhdFxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnV2VDaGF0J11dLCBbXG4gICAgICAgICAgICAva29ucXVlcm9yXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtvbnF1ZXJvclxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnS29ucXVlcm9yJ11dLCBbXG4gICAgICAgICAgICAvdHJpZGVudC4rcnZbOiBdKFtcXHdcXC5dezEsOX0pXFxiLitsaWtlIGdlY2tvL2kgICAgICAgICAgICAgICAgICAgICAgIC8vIElFMTFcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0lFJ11dLCBbXG4gICAgICAgICAgICAveWEoPzpzZWFyY2gpP2Jyb3dzZXJcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFlhbmRleFxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnWWFuZGV4J11dLCBbXG4gICAgICAgICAgICAvc2xicm93c2VyXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNtYXJ0IExlbm92byBCcm93c2VyXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdTbWFydCBMZW5vdm8gJytCUk9XU0VSXV0sIFtcbiAgICAgICAgICAgIC8oYXZhc3R8YXZnKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXZhc3QvQVZHIFNlY3VyZSBCcm93c2VyXG4gICAgICAgICAgICBdLCBbW05BTUUsIC8oLispLywgJyQxIFNlY3VyZSAnK0JST1dTRVJdLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgL1xcYmZvY3VzXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBGb2N1c1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCBGSVJFRk9YKycgRm9jdXMnXV0sIFtcbiAgICAgICAgICAgIC9cXGJvcHRcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIFRvdWNoXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIE9QRVJBKycgVG91Y2gnXV0sIFtcbiAgICAgICAgICAgIC9jb2NfY29jXFx3K1xcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvYyBDb2MgQnJvd3NlclxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnQ29jIENvYyddXSwgW1xuICAgICAgICAgICAgL2RvbGZpblxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEb2xwaGluXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdEb2xwaGluJ11dLCBbXG4gICAgICAgICAgICAvY29hc3RcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIENvYXN0XG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIE9QRVJBKycgQ29hc3QnXV0sIFtcbiAgICAgICAgICAgIC9taXVpYnJvd3NlclxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTUlVSSBCcm93c2VyXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdNSVVJJyArIFNVRkZJWF9CUk9XU0VSXV0sIFtcbiAgICAgICAgICAgIC9meGlvc1xcLyhbXFx3XFwuLV0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBmb3IgaU9TXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIEZJUkVGT1hdXSwgW1xuICAgICAgICAgICAgL1xcYnFpaG9vYnJvd3NlclxcLz8oW1xcd1xcLl0qKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMzYwXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICczNjAnXV0sIFtcbiAgICAgICAgICAgIC9cXGIocXEpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFFRXG4gICAgICAgICAgICBdLCBbW05BTUUsIC8oLispLywgJyQxQnJvd3NlciddLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgLyhvY3VsdXN8c2FpbGZpc2h8aHVhd2VpfHZpdm98cGljbylicm93c2VyXFwvKFtcXHdcXC5dKykvaVxuICAgICAgICAgICAgXSwgW1tOQU1FLCAvKC4rKS8sICckMScgKyBTVUZGSVhfQlJPV1NFUl0sIFZFUlNJT05dLCBbICAgICAgICAgICAgICAvLyBPY3VsdXMvU2FpbGZpc2gvSHVhd2VpQnJvd3Nlci9WaXZvQnJvd3Nlci9QaWNvQnJvd3NlclxuICAgICAgICAgICAgL3NhbXN1bmdicm93c2VyXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTYW1zdW5nIEludGVybmV0XG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIFNBTVNVTkcgKyAnIEludGVybmV0J11dLCBbXG4gICAgICAgICAgICAvbWV0YXNyW1xcLyBdPyhbXFxkXFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvZ291IEV4cGxvcmVyXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdTb2dvdSBFeHBsb3JlciddXSwgW1xuICAgICAgICAgICAgLyhzb2dvdSltb1xcdytcXC8oW1xcZFxcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29nb3UgTW9iaWxlXG4gICAgICAgICAgICBdLCBbW05BTUUsICdTb2dvdSBNb2JpbGUnXSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8oZWxlY3Ryb24pXFwvKFtcXHdcXC5dKykgc2FmYXJpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWxlY3Ryb24tYmFzZWQgQXBwXG4gICAgICAgICAgICAvKHRlc2xhKSg/OiBxdGNhcmJyb3dzZXJ8XFwvKDIwXFxkXFxkXFwuWy1cXHdcXC5dKykpL2ksICAgICAgICAgICAgICAgICAgIC8vIFRlc2xhXG4gICAgICAgICAgICAvbT8ocXFicm93c2VyfDIzNDUoPz1icm93c2VyfGNocm9tZXxleHBsb3JlcikpXFx3KltcXC8gXT92PyhbXFx3XFwuXSspL2kgICAvLyBRUS8yMzQ1XG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8obGJicm93c2VyfHJla29ucSkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGllQmFvIEJyb3dzZXIvUmVrb25xXG4gICAgICAgICAgICAvXFxbKGxpbmtlZGluKWFwcFxcXS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGlua2VkSW4gQXBwIGZvciBpT1MgJiBBbmRyb2lkXG4gICAgICAgICAgICBdLCBbTkFNRV0sIFtcbiAgICAgICAgICAgIC9vbWVcXC8oW1xcd1xcLl0rKSBcXHcqID8oaXJvbikgc2FmL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElyb25cbiAgICAgICAgICAgIC9vbWVcXC8oW1xcd1xcLl0rKS4rcWlodSAoMzYwKVtlc11lL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMzYwXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgTkFNRV0sIFtcblxuICAgICAgICAgICAgLy8gV2ViVmlld1xuICAgICAgICAgICAgLygoPzpmYmFuXFwvZmJpb3N8ZmJfaWFiXFwvZmI0YSkoPyEuK2ZiYXYpfDtmYmF2XFwvKFtcXHdcXC5dKyk7KS9pICAgICAgIC8vIEZhY2Vib29rIEFwcCBmb3IgaU9TICYgQW5kcm9pZFxuICAgICAgICAgICAgXSwgW1tOQU1FLCBGQUNFQk9PS10sIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvKEtsYXJuYSlcXC8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtsYXJuYSBTaG9wcGluZyBCcm93c2VyIGZvciBpT1MgJiBBbmRyb2lkXG4gICAgICAgICAgICAvKGtha2FvKD86dGFsa3xzdG9yeSkpW1xcLyBdKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtha2FvIEFwcFxuICAgICAgICAgICAgLyhuYXZlcilcXCguKj8oXFxkK1xcLltcXHdcXC5dKykuKlxcKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOYXZlciBJbkFwcFxuICAgICAgICAgICAgL3NhZmFyaSAobGluZSlcXC8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMaW5lIEFwcCBmb3IgaU9TXG4gICAgICAgICAgICAvXFxiKGxpbmUpXFwvKFtcXHdcXC5dKylcXC9pYWIvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGluZSBBcHAgZm9yIEFuZHJvaWRcbiAgICAgICAgICAgIC8oYWxpcGF5KWNsaWVudFxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxpcGF5XG4gICAgICAgICAgICAvKHR3aXR0ZXIpKD86YW5kfCBmLitlXFwvKFtcXHdcXC5dKykpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFR3aXR0ZXJcbiAgICAgICAgICAgIC8oY2hyb21pdW18aW5zdGFncmFtfHNuYXBjaGF0KVtcXC8gXShbLVxcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21pdW0vSW5zdGFncmFtL1NuYXBjaGF0XG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC9cXGJnc2FcXC8oW1xcd1xcLl0rKSAuKnNhZmFyaVxcLy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgU2VhcmNoIEFwcGxpYW5jZSBvbiBpT1NcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0dTQSddXSwgW1xuICAgICAgICAgICAgL211c2ljYWxfbHkoPzouK2FwcF8/dmVyc2lvblxcL3xfKShbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaWtUb2tcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ1Rpa1RvayddXSwgW1xuXG4gICAgICAgICAgICAvaGVhZGxlc3NjaHJvbWUoPzpcXC8oW1xcd1xcLl0rKXwgKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9tZSBIZWFkbGVzc1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCBDSFJPTUUrJyBIZWFkbGVzcyddXSwgW1xuXG4gICAgICAgICAgICAvIHd2XFwpLisoY2hyb21lKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWUgV2ViVmlld1xuICAgICAgICAgICAgXSwgW1tOQU1FLCBDSFJPTUUrJyBXZWJWaWV3J10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC9kcm9pZC4rIHZlcnNpb25cXC8oW1xcd1xcLl0rKVxcYi4rKD86bW9iaWxlIHNhZmFyaXxzYWZhcmkpL2kgICAgICAgICAgIC8vIEFuZHJvaWQgQnJvd3NlclxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnQW5kcm9pZCAnK0JST1dTRVJdXSwgW1xuXG4gICAgICAgICAgICAvKGNocm9tZXxvbW5pd2VifGFyb3JhfFt0aXplbm9rYV17NX0gP2Jyb3dzZXIpXFwvdj8oW1xcd1xcLl0rKS9pICAgICAgIC8vIENocm9tZS9PbW5pV2ViL0Fyb3JhL1RpemVuL05va2lhXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgL3ZlcnNpb25cXC8oW1xcd1xcLlxcLF0rKSAuKm1vYmlsZVxcL1xcdysgKHNhZmFyaSkvaSAgICAgICAgICAgICAgICAgICAgICAvLyBNb2JpbGUgU2FmYXJpXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdNb2JpbGUgU2FmYXJpJ11dLCBbXG4gICAgICAgICAgICAvdmVyc2lvblxcLyhbXFx3KFxcLnxcXCwpXSspIC4qKG1vYmlsZSA/c2FmYXJpfHNhZmFyaSkvaSAgICAgICAgICAgICAgICAvLyBTYWZhcmkgJiBTYWZhcmkgTW9iaWxlXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgTkFNRV0sIFtcbiAgICAgICAgICAgIC93ZWJraXQuKz8obW9iaWxlID9zYWZhcml8c2FmYXJpKShcXC9bXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgLy8gU2FmYXJpIDwgMy4wXG4gICAgICAgICAgICBdLCBbTkFNRSwgW1ZFUlNJT04sIHN0ck1hcHBlciwgb2xkU2FmYXJpTWFwXV0sIFtcblxuICAgICAgICAgICAgLyh3ZWJraXR8a2h0bWwpXFwvKFtcXHdcXC5dKykvaVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8vIEdlY2tvIGJhc2VkXG4gICAgICAgICAgICAvKG5hdmlnYXRvcnxuZXRzY2FwZVxcZD8pXFwvKFstXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXRzY2FwZVxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnTmV0c2NhcGUnXSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8od29sdmljfGxpYnJld29sZilcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV29sdmljL0xpYnJlV29sZlxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvbW9iaWxlIHZyOyBydjooW1xcd1xcLl0rKVxcKS4rZmlyZWZveC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggUmVhbGl0eVxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCBGSVJFRk9YKycgUmVhbGl0eSddXSwgW1xuICAgICAgICAgICAgL2VraW9oZi4rKGZsb3cpXFwvKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGbG93XG4gICAgICAgICAgICAvKHN3aWZ0Zm94KS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN3aWZ0Zm94XG4gICAgICAgICAgICAvKGljZWRyYWdvbnxpY2V3ZWFzZWx8Y2FtaW5vfGNoaW1lcmF8ZmVubmVjfG1hZW1vIGJyb3dzZXJ8bWluaW1vfGNvbmtlcm9yKVtcXC8gXT8oW1xcd1xcLlxcK10rKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJY2VEcmFnb24vSWNld2Vhc2VsL0NhbWluby9DaGltZXJhL0Zlbm5lYy9NYWVtby9NaW5pbW8vQ29ua2Vyb3JcbiAgICAgICAgICAgIC8oc2VhbW9ua2V5fGstbWVsZW9ufGljZWNhdHxpY2VhcGV8ZmlyZWJpcmR8cGhvZW5peHxwYWxlbW9vbnxiYXNpbGlza3x3YXRlcmZveClcXC8oWy1cXHdcXC5dKykkL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3gvU2VhTW9ua2V5L0stTWVsZW9uL0ljZUNhdC9JY2VBcGUvRmlyZWJpcmQvUGhvZW5peFxuICAgICAgICAgICAgLyhmaXJlZm94KVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlciBGaXJlZm94LWJhc2VkXG4gICAgICAgICAgICAvKG1vemlsbGEpXFwvKFtcXHdcXC5dKykgLitydlxcOi4rZ2Vja29cXC9cXGQrL2ksICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1vemlsbGFcblxuICAgICAgICAgICAgLy8gT3RoZXJcbiAgICAgICAgICAgIC8ocG9sYXJpc3xseW54fGRpbGxvfGljYWJ8ZG9yaXN8YW1heWF8dzNtfG5ldHN1cmZ8b2JpZ298bW9zYWljfCg/OmdvfGljZXx1cClbXFwuIF0/YnJvd3NlcilbLVxcLyBdP3Y/KFtcXHdcXC5dKykvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG9sYXJpcy9MeW54L0RpbGxvL2lDYWIvRG9yaXMvQW1heWEvdzNtL05ldFN1cmYvT2JpZ28vTW9zYWljL0dvL0lDRS9VUC5Ccm93c2VyXG4gICAgICAgICAgICAvKGxpbmtzKSBcXCgoW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpbmtzXG4gICAgICAgICAgICBdLCBbTkFNRSwgW1ZFUlNJT04sIC9fL2csICcuJ11dLCBbXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8oY29iYWx0KVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29iYWx0XG4gICAgICAgICAgICBdLCBbTkFNRSwgW1ZFUlNJT04sIC9tYXN0ZXIufGx0cy4vLCBcIlwiXV1cbiAgICAgICAgXSxcblxuICAgICAgICBjcHUgOiBbW1xuXG4gICAgICAgICAgICAvKD86KGFtZHx4KD86KD86ODZ8NjQpWy1fXSk/fHdvd3x3aW4pNjQpWztcXCldL2kgICAgICAgICAgICAgICAgICAgICAvLyBBTUQ2NCAoeDY0KVxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsICdhbWQ2NCddXSwgW1xuXG4gICAgICAgICAgICAvKGlhMzIoPz07KSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElBMzIgKHF1aWNrdGltZSlcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCBsb3dlcml6ZV1dLCBbXG5cbiAgICAgICAgICAgIC8oKD86aVszNDZdfHgpODYpWztcXCldL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElBMzIgKHg4NilcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCAnaWEzMiddXSwgW1xuXG4gICAgICAgICAgICAvXFxiKGFhcmNoNjR8YXJtKHY/OGU/bD98Xz82NCkpXFxiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBUk02NFxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsICdhcm02NCddXSwgW1xuXG4gICAgICAgICAgICAvXFxiKGFybSg/OnZbNjddKT9odD9uP1tmbF1wPylcXGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQVJNSEZcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCAnYXJtaGYnXV0sIFtcblxuICAgICAgICAgICAgLy8gUG9ja2V0UEMgbWlzdGFrZW5seSBpZGVudGlmaWVkIGFzIFBvd2VyUENcbiAgICAgICAgICAgIC93aW5kb3dzIChjZXxtb2JpbGUpOyBwcGM7L2lcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCAnYXJtJ11dLCBbXG5cbiAgICAgICAgICAgIC8oKD86cHBjfHBvd2VycGMpKD86NjQpPykoPzogbWFjfDt8XFwpKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvd2VyUENcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCAvb3dlci8sIEVNUFRZLCBsb3dlcml6ZV1dLCBbXG5cbiAgICAgICAgICAgIC8oc3VuNFxcdylbO1xcKV0vaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTUEFSQ1xuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsICdzcGFyYyddXSwgW1xuXG4gICAgICAgICAgICAvKCg/OmF2cjMyfGlhNjQoPz07KSl8NjhrKD89XFwpKXxcXGJhcm0oPz12KD86WzEtN118WzUtN10xKWw/fDt8ZWFiaSl8KD89YXRtZWwgKWF2cnwoPzppcml4fG1pcHN8c3BhcmMpKD86NjQpP1xcYnxwYS1yaXNjKS9pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElBNjQsIDY4SywgQVJNLzY0LCBBVlIvMzIsIElSSVgvNjQsIE1JUFMvNjQsIFNQQVJDLzY0LCBQQS1SSVNDXG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgbG93ZXJpemVdXVxuICAgICAgICBdLFxuXG4gICAgICAgIGRldmljZSA6IFtbXG5cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAvLyBNT0JJTEVTICYgVEFCTEVUU1xuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvLyBTYW1zdW5nXG4gICAgICAgICAgICAvXFxiKHNjaC1pWzg5XTBcXGR8c2h3LW0zODBzfHNtLVtwdHhdXFx3ezIsNH18Z3QtW3BuXVxcZHsyLDR9fHNnaC10OFs1Nl05fG5leHVzIDEwKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIFNBTVNVTkddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIoKD86c1tjZ3BdaHxndHxzbSktKD8hW2xyXSlcXHcrfHNjW2ctXT9bXFxkXSthP3xnYWxheHkgbmV4dXMpL2ksXG4gICAgICAgICAgICAvc2Ftc3VuZ1stIF0oKD8hc20tW2xyXSlbLVxcd10rKS9pLFxuICAgICAgICAgICAgL3NlYy0oc2doXFx3KykvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBTQU1TVU5HXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIEFwcGxlXG4gICAgICAgICAgICAvKD86XFwvfFxcKCkoaXAoPzpob25lfG9kKVtcXHcsIF0qKSg/OlxcL3w7KS9pICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpUG9kL2lQaG9uZVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBBUFBMRV0sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1xcKChpcGFkKTtbLVxcd1xcKSw7IF0rYXBwbGUvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpUGFkXG4gICAgICAgICAgICAvYXBwbGVjb3JlbWVkaWFcXC9bXFx3XFwuXSsgXFwoKGlwYWQpL2ksXG4gICAgICAgICAgICAvXFxiKGlwYWQpXFxkXFxkPyxcXGRcXGQ/WztcXF1dLitpb3MvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBBUFBMRV0sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLyhtYWNpbnRvc2gpOy9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEFQUExFXV0sIFtcblxuICAgICAgICAgICAgLy8gU2hhcnBcbiAgICAgICAgICAgIC9cXGIoc2gtP1thbHR2el0/XFxkXFxkW2EtZWttXT8pL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgU0hBUlBdLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gSG9ub3JcbiAgICAgICAgICAgIC8oPzpob25vcikoWy1cXHcgXSspWztcXCldL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0hvbm9yJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBIdWF3ZWlcbiAgICAgICAgICAgIC9cXGIoKD86YWdbcnNdWzIzXT98YmFoMj98c2h0P3xidHYpLWE/W2x3XVxcZHsyfSlcXGIoPyEuK2RcXC9zKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEhVQVdFSV0sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLyg/Omh1YXdlaSkoWy1cXHcgXSspWztcXCldL2ksXG4gICAgICAgICAgICAvXFxiKG5leHVzIDZwfFxcd3syLDR9ZT8tW2F0dV0/W2xuXVtcXGR4XVswMTIzNTljXVthZG5dPylcXGIoPyEuK2RcXC9zKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEhVQVdFSV0sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBYaWFvbWlcbiAgICAgICAgICAgIC9cXGIocG9jb1tcXHcgXSt8bTJcXGR7M31qXFxkXFxkW2Etel17Mn0pKD86IGJ1aXxcXCkpL2ksICAgICAgICAgICAgICAgICAgLy8gWGlhb21pIFBPQ09cbiAgICAgICAgICAgIC9cXGI7IChcXHcrKSBidWlsZFxcL2htXFwxL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFhpYW9taSBIb25nbWkgJ251bWVyaWMnIG1vZGVsc1xuICAgICAgICAgICAgL1xcYihobVstXyBdP25vdGU/W18gXT8oPzpcXGRcXHcpPykgYnVpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYaWFvbWkgSG9uZ21pXG4gICAgICAgICAgICAvXFxiKHJlZG1pW1xcLV8gXT8oPzpub3RlfGspP1tcXHdfIF0rKSg/OiBidWl8XFwpKS9pLCAgICAgICAgICAgICAgICAgICAvLyBYaWFvbWkgUmVkbWlcbiAgICAgICAgICAgIC9vaWRbXlxcKV0rOyAobT9bMTJdWzAtMzg5XVswMV1cXHd7Myw2fVtjLXldKSggYnVpfDsgd3Z8XFwpKS9pLCAgICAgICAgLy8gWGlhb21pIFJlZG1pICdudW1lcmljJyBtb2RlbHNcbiAgICAgICAgICAgIC9cXGIobWlbLV8gXT8oPzphXFxkfG9uZXxvbmVbXyBdcGx1c3xub3RlIGx0ZXxtYXh8Y2MpP1tfIF0/KD86XFxkP1xcdz8pW18gXT8oPzpwbHVzfHNlfGxpdGV8cHJvKT8pKD86IGJ1aXxcXCkpL2kgLy8gWGlhb21pIE1pXG4gICAgICAgICAgICBdLCBbW01PREVMLCAvXy9nLCAnICddLCBbVkVORE9SLCBYSUFPTUldLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9vaWRbXlxcKV0rOyAoMlxcZHs0fSgyODN8cnBiZilbY2dsXSkoIGJ1aXxcXCkpL2ksICAgICAgICAgICAgICAgICAgICAgLy8gUmVkbWkgUGFkXG4gICAgICAgICAgICAvXFxiKG1pWy1fIF0/KD86cGFkKSg/OltcXHdfIF0rKSkoPzogYnVpfFxcKSkvaSAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pIFBhZCB0YWJsZXRzXG4gICAgICAgICAgICBdLFtbTU9ERUwsIC9fL2csICcgJ10sIFtWRU5ET1IsIFhJQU9NSV0sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvLyBPUFBPXG4gICAgICAgICAgICAvOyAoXFx3KykgYnVpLisgb3Bwby9pLFxuICAgICAgICAgICAgL1xcYihjcGhbMTJdXFxkezN9fHAoPzphZnxjW2FsXXxkXFx3fGVbYXJdKVttdF1cXGQwfHg5MDA3fGExMDFvcClcXGIvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnT1BQTyddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXGIob3BkMlxcZHszfWE/KSBidWkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnT1BQTyddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLy8gVml2b1xuICAgICAgICAgICAgL3Zpdm8gKFxcdyspKD86IGJ1aXxcXCkpL2ksXG4gICAgICAgICAgICAvXFxiKHZbMTJdXFxkezN9XFx3P1thdF0pKD86IGJ1aXw7KS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdWaXZvJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBSZWFsbWVcbiAgICAgICAgICAgIC9cXGIocm14WzEtM11cXGR7M30pKD86IGJ1aXw7fFxcKSkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnUmVhbG1lJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBNb3Rvcm9sYVxuICAgICAgICAgICAgL1xcYihtaWxlc3RvbmV8ZHJvaWQoPzpbMi00eF18ICg/OmJpb25pY3x4Mnxwcm98cmF6cikpPzo/KCA0Zyk/KVxcYltcXHcgXStidWlsZFxcLy9pLFxuICAgICAgICAgICAgL1xcYm1vdCg/Om9yb2xhKT9bLSBdKFxcdyopL2ksXG4gICAgICAgICAgICAvKCg/Om1vdG9bXFx3XFwoXFwpIF0rfHh0XFxkezMsNH18bmV4dXMgNikoPz0gYnVpfFxcKSkpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgTU9UT1JPTEFdLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXGIobXo2MFxcZHx4b29tWzIgXXswLDJ9KSBidWlsZFxcLy9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIE1PVE9ST0xBXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC8vIExHXG4gICAgICAgICAgICAvKCg/PWxnKT9bdmxda1xcLT9cXGR7M30pIGJ1aXwgM1xcLlstXFx3OyBdezEwfWxnPy0oWzA2Y3Y5XXszLDR9KS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIExHXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKGxtKD86LT9mMTAwW252XT98LVtcXHdcXC5dKykoPz0gYnVpfFxcKSl8bmV4dXMgWzQ1XSkvaSxcbiAgICAgICAgICAgIC9cXGJsZ1stZTtcXC8gXSsoKD8hYnJvd3NlcnxuZXRjYXN0fGFuZHJvaWQgdHYpXFx3KykvaSxcbiAgICAgICAgICAgIC9cXGJsZy0/KFtcXGRcXHddKykgYnVpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgTEddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gTGVub3ZvXG4gICAgICAgICAgICAvKGlkZWF0YWJbLVxcdyBdKykvaSxcbiAgICAgICAgICAgIC9sZW5vdm8gPyhzWzU2XTAwMFstXFx3XSt8dGFiKD86W1xcdyBdKyl8eXRbLVxcZFxcd117Nn18dGJbLVxcZFxcd117Nn0pL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0xlbm92byddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLy8gTm9raWFcbiAgICAgICAgICAgIC8oPzptYWVtb3xub2tpYSkuKihuOTAwfGx1bWlhIFxcZCspL2ksXG4gICAgICAgICAgICAvbm9raWFbLV8gXT8oWy1cXHdcXC5dKikvaVxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgL18vZywgJyAnXSwgW1ZFTkRPUiwgJ05va2lhJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBHb29nbGVcbiAgICAgICAgICAgIC8ocGl4ZWwgYylcXGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBQaXhlbCBDXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEdPT0dMRV0sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL2Ryb2lkLis7IChwaXhlbFtcXGRheGwgXXswLDZ9KSg/OiBidWl8XFwpKS9pICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBQaXhlbFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBHT09HTEVdLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gU29ueVxuICAgICAgICAgICAgL2Ryb2lkLis7IChhP1xcZFswLTJdezJ9c298W2MtZ11cXGR7NH18c29bLWdsXVxcdyt8eHEtYVxcd1s0LTddWzEyXSkoPz0gYnVpfFxcKS4rY2hyb21lXFwvKD8hWzEtNl17MCwxfVxcZFxcLikpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgU09OWV0sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL3NvbnkgdGFibGV0IFtwc10vaSxcbiAgICAgICAgICAgIC9cXGIoPzpzb255KT9zZ3BcXHcrKD86IGJ1aXxcXCkpL2lcbiAgICAgICAgICAgIF0sIFtbTU9ERUwsICdYcGVyaWEgVGFibGV0J10sIFtWRU5ET1IsIFNPTlldLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLy8gT25lUGx1c1xuICAgICAgICAgICAgLyAoa2IyMDA1fGluMjBbMTJdNXxiZTIwWzEyXVs1OV0pXFxiL2ksXG4gICAgICAgICAgICAvKD86b25lKT8oPzpwbHVzKT8gKGFcXGQwXFxkXFxkKSg/OiBifFxcKSkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnT25lUGx1cyddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gQW1hem9uXG4gICAgICAgICAgICAvKGFsZXhhKXdlYm0vaSxcbiAgICAgICAgICAgIC8oa2ZbYS16XXsyfXdpfGFlbyg/IWJjKVxcd1xcdykoIGJ1aXxcXCkpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2luZGxlIEZpcmUgd2l0aG91dCBTaWxrIC8gRWNobyBTaG93XG4gICAgICAgICAgICAvKGtmW2Etel0rKSggYnVpfFxcKSkuK3NpbGtcXC8vaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2luZGxlIEZpcmUgSERcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgQU1BWk9OXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKCg/OnNkfGtmKVswMzQ5aGlqb3JzdHV3XSspKCBidWl8XFwpKS4rc2lsa1xcLy9pICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZSBQaG9uZVxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgLyguKykvZywgJ0ZpcmUgUGhvbmUgJDEnXSwgW1ZFTkRPUiwgQU1BWk9OXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIEJsYWNrQmVycnlcbiAgICAgICAgICAgIC8ocGxheWJvb2spO1stXFx3XFwpLDsgXSsocmltKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGFja0JlcnJ5IFBsYXlCb29rXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFZFTkRPUiwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvXFxiKCg/OmJiW2EtZl18c3RbaHZdKTEwMC1cXGQpL2ksXG4gICAgICAgICAgICAvXFwoYmIxMDsgKFxcdyspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2tCZXJyeSAxMFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBCTEFDS0JFUlJZXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIEFzdXNcbiAgICAgICAgICAgIC8oPzpcXGJ8YXN1c18pKHRyYW5zZm9bcHJpbWUgXXs0LDEwfSBcXHcrfGVlZXBjfHNsaWRlciBcXHcrfG5leHVzIDd8cGFkZm9uZXxwMDBbY2pdKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEFTVVNdLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC8gKHpbYmVzXTZbMDI3XVswMTJdW2ttXVtsc118emVuZm9uZSBcXGRcXHc/KVxcYi9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEFTVVNdLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gSFRDXG4gICAgICAgICAgICAvKG5leHVzIDkpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhUQyBOZXh1cyA5XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdIVEMnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKGh0YylbLTtfIF17MSwyfShbXFx3IF0rKD89XFwpfCBidWkpfFxcdyspL2ksICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhUQ1xuXG4gICAgICAgICAgICAvLyBaVEVcbiAgICAgICAgICAgIC8oenRlKVstIF0oW1xcdyBdKz8pKD86IGJ1aXxcXC98XFwpKS9pLFxuICAgICAgICAgICAgLyhhbGNhdGVsfGdlZWtzcGhvbmV8bmV4aWFufHBhbmFzb25pYyg/ISg/Ojt8XFwuKSl8c29ueSg/IS1icmEpKVstXyBdPyhbLVxcd10qKS9pICAgICAgICAgLy8gQWxjYXRlbC9HZWVrc1Bob25lL05leGlhbi9QYW5hc29uaWMvU29ueVxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgW01PREVMLCAvXy9nLCAnICddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gVENMXG4gICAgICAgICAgICAvZHJvaWQgW1xcd1xcLl0rOyAoKD86OFsxNF05WzE2XXw5KD86MCg/OjQ4fDYwfDhbMDFdKXwxKD86M1syN118NjYpfDIoPzo2WzY5XXw5WzU2XSl8NDY2KSlbZ3Fzd3hdKVxcdyooXFwpfCBidWkpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1RDTCddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLy8gaXRlbFxuICAgICAgICAgICAgLyhpdGVsKSAoKFxcdyspKS9pXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgbG93ZXJpemVdLCBNT0RFTCwgW1RZUEUsIHN0ck1hcHBlciwgeyAndGFibGV0JyA6IFsncDEwMDAxbCcsICd3NzAwMSddLCAnKicgOiAnbW9iaWxlJyB9XV0sIFtcblxuICAgICAgICAgICAgLy8gQWNlclxuICAgICAgICAgICAgL2Ryb2lkLis7IChbYWJdWzEtN10tP1swMTc4YV1cXGRcXGQ/KS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdBY2VyJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvLyBNZWl6dVxuICAgICAgICAgICAgL2Ryb2lkLis7IChtWzEtNV0gbm90ZSkgYnVpL2ksXG4gICAgICAgICAgICAvXFxibXotKFstXFx3XXsyLH0pL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ01laXp1J10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVWxlZm9uZVxuICAgICAgICAgICAgLzsgKCg/OnBvd2VyICk/YXJtb3IoPzpbXFx3IF17MCw4fSkpKD86IGJ1aXxcXCkpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1VsZWZvbmUnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIEVuZXJnaXplclxuICAgICAgICAgICAgLzsgKGVuZXJneSA/XFx3KykoPzogYnVpfFxcKSkvaSxcbiAgICAgICAgICAgIC87IGVuZXJnaXplciAoW1xcdyBdKykoPzogYnVpfFxcKSkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnRW5lcmdpemVyJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLyBDYXRcbiAgICAgICAgICAgIC87IGNhdCAoYjM1KTsvaSxcbiAgICAgICAgICAgIC87IChiMTVxP3xzMjIgZmxpcHxzNDhjfHM2MiBwcm8pKD86IGJ1aXxcXCkpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0NhdCddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gU21hcnRmcmVuXG4gICAgICAgICAgICAvKCg/Om5ldyApP2FuZHJvbWF4W1xcdy0gXSspKD86IGJ1aXxcXCkpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1NtYXJ0ZnJlbiddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLy8gTm90aGluZ1xuICAgICAgICAgICAgL2Ryb2lkLis7IChhKD86MDE1fDA2WzM1XXwxNDJwPykpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ05vdGhpbmcnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8vIE1JWEVEXG4gICAgICAgICAgICAvKGJsYWNrYmVycnl8YmVucXxwYWxtKD89XFwtKXxzb255ZXJpY3Nzb258YWNlcnxhc3VzfGRlbGx8bWVpenV8bW90b3JvbGF8cG9seXRyb258aW5maW5peHx0ZWNub3xtaWNyb21heHxhZHZhbilbLV8gXT8oWy1cXHddKikvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2tCZXJyeS9CZW5RL1BhbG0vU29ueS1Fcmljc3Nvbi9BY2VyL0FzdXMvRGVsbC9NZWl6dS9Nb3Rvcm9sYS9Qb2x5dHJvbi9JbmZpbml4L1RlY25vL01pY3JvbWF4L0FkdmFuXG4gICAgICAgICAgICAvOyAoaW1vKSAoKD8hdGFiKVtcXHcgXSs/KSg/OiBidWl8XFwpKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSU1PXG4gICAgICAgICAgICAvKGhwKSAoW1xcdyBdK1xcdykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSFAgaVBBUVxuICAgICAgICAgICAgLyhhc3VzKS0/KFxcdyspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXN1c1xuICAgICAgICAgICAgLyhtaWNyb3NvZnQpOyAobHVtaWFbXFx3IF0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWljcm9zb2Z0IEx1bWlhXG4gICAgICAgICAgICAvKGxlbm92bylbLV8gXT8oWy1cXHddKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZW5vdm9cbiAgICAgICAgICAgIC8oam9sbGEpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSm9sbGFcbiAgICAgICAgICAgIC8ob3BwbykgPyhbXFx3IF0rKSBidWkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9QUE9cbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLyhpbW8pICh0YWIgXFx3KykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSU1PXG4gICAgICAgICAgICAvKGtvYm8pXFxzKGVyZWFkZXJ8dG91Y2gpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLb2JvXG4gICAgICAgICAgICAvKGFyY2hvcykgKGdhbWVwYWQyPykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFyY2hvc1xuICAgICAgICAgICAgLyhocCkuKyh0b3VjaHBhZCg/IS4rdGFibGV0KXx0YWJsZXQpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIUCBUb3VjaFBhZFxuICAgICAgICAgICAgLyhraW5kbGUpXFwvKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLaW5kbGVcbiAgICAgICAgICAgIC8obm9vaylbXFx3IF0rYnVpbGRcXC8oXFx3KykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9va1xuICAgICAgICAgICAgLyhkZWxsKSAoc3RyZWFba3ByXFxkIF0qW1xcZGtvXSkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGwgU3RyZWFrXG4gICAgICAgICAgICAvKGxlWy0gXStwYW4pWy0gXSsoXFx3ezEsOX0pIGJ1aS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZSBQYW4gVGFibGV0c1xuICAgICAgICAgICAgLyh0cmluaXR5KVstIF0qKHRcXGR7M30pIGJ1aS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJpbml0eSBUYWJsZXRzXG4gICAgICAgICAgICAvKGdpZ2FzZXQpWy0gXSsocVxcd3sxLDl9KSBidWkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHaWdhc2V0IFRhYmxldHNcbiAgICAgICAgICAgIC8odm9kYWZvbmUpIChbXFx3IF0rKSg/OlxcKXwgYnVpKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWb2RhZm9uZVxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvKHN1cmZhY2UgZHVvKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1cmZhY2UgRHVvXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIE1JQ1JPU09GVF0sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL2Ryb2lkIFtcXGRcXC5dKzsgKGZwXFxkdT8pKD86IGJ8XFwpKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFpcnBob25lXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdGYWlycGhvbmUnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvKHUzMDRhYSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFUJlRcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0FUJlQnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvXFxic2llLShcXHcqKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2llbWVuc1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU2llbWVucyddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXGIocmN0XFx3KykgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSQ0EgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnUkNBJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYih2ZW51ZVtcXGQgXXsyLDd9KSBiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGwgVmVudWUgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnRGVsbCddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIocSg/Om12fHRhKVxcdyspIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpem9uIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnVmVyaXpvbiddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIoPzpiYXJuZXNbJiBdK25vYmxlIHxibltydF0pKFtcXHdcXCsgXSopIGIvaSAgICAgICAgICAgICAgICAgICAgICAgLy8gQmFybmVzICYgTm9ibGUgVGFibGV0XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdCYXJuZXMgJiBOb2JsZSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIodG1cXGR7M31cXHcrKSBiL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ051VmlzaW9uJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYihrODgpIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWlRFIEsgU2VyaWVzIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnWlRFJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYihueFxcZHszfWopIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFpURSBOdWJpYVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnWlRFJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1xcYihnZW5cXGR7M30pIGIuKzQ5aC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN3aXNzIEdFTiBNb2JpbGVcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1N3aXNzJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1xcYih6dXJcXGR7M30pIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN3aXNzIFpVUiBUYWJsZXRcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1N3aXNzJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYigoemVraSk/dGIuKlxcYikgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFpla2kgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnWmVraSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIoW3lyXVxcZHsyfSkgYi9pLFxuICAgICAgICAgICAgL1xcYihkcmFnb25bLSBdK3RvdWNoIHxkdCkoXFx3ezV9KSBiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYWdvbiBUb3VjaCBUYWJsZXRcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCAnRHJhZ29uIFRvdWNoJ10sIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIobnMtP1xcd3swLDl9KSBiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnNpZ25pYSBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdJbnNpZ25pYSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIoKG54YXxuZXh0KS0/XFx3ezAsOX0pIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXh0Qm9vayBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdOZXh0Qm9vayddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9cXGIoeHRyZW1lXFxfKT8odigxWzA0NV18MlswMTVdfFszNDY5XTB8N1swNV0pKSBiL2kgICAgICAgICAgICAgICAgICAvLyBWb2ljZSBYdHJlbWUgUGhvbmVzXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgJ1ZvaWNlJ10sIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXGIobHZ0ZWxcXC0pPyh2MVsxMl0pIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMdlRlbCBQaG9uZXNcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCAnTHZUZWwnXSwgTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1xcYihwaC0xKSAvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXNzZW50aWFsIFBILTFcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0Vzc2VudGlhbCddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXGIodigxMDBtZHw3MDBuYXw3MDExfDkxN2cpLipcXGIpIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnZpemVuIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0Vudml6ZW4nXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvXFxiKHRyaW9bLVxcd1xcLiBdKykgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hY2hTcGVlZCBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdNYWNoU3BlZWQnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvXFxidHVfKDE0OTEpIGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSb3RvciBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdSb3RvciddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC8oc2hpZWxkW1xcdyBdKykgYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE52aWRpYSBTaGllbGQgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTnZpZGlhJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLyhzcHJpbnQpIChcXHcrKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3ByaW50IFBob25lc1xuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgLyhraW5cXC5bb25ldHddezN9KS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWljcm9zb2Z0IEtpblxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgL1xcLi9nLCAnICddLCBbVkVORE9SLCBNSUNST1NPRlRdLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9kcm9pZC4rOyAoY2M2NjY2P3xldDVbMTZdfG1jWzIzOV1bMjNdeD98dmM4WzAzXXg/KVxcKS9pICAgICAgICAgICAgIC8vIFplYnJhXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIFpFQlJBXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvZHJvaWQuKzsgKGVjMzB8cHMyMHx0Y1syLThdXFxkW2t4XSlcXCkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBaRUJSQV0sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAvLyBTTUFSVFRWU1xuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvc21hcnQtdHYuKyhzYW1zdW5nKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhbXN1bmdcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC9oYmJ0di4rbWFwbGU7KFxcZCspL2lcbiAgICAgICAgICAgIF0sIFtbTU9ERUwsIC9eLywgJ1NtYXJ0VFYnXSwgW1ZFTkRPUiwgU0FNU1VOR10sIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC8obnV4OyBuZXRjYXN0LitzbWFydHR2fGxnIChuZXRjYXN0XFwudHYtMjAxXFxkfGFuZHJvaWQgdHYpKS9pICAgICAgICAvLyBMRyBTbWFydFRWXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgTEddLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvKGFwcGxlKSA/dHYvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGxlIFRWXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBbTU9ERUwsIEFQUExFKycgVFYnXSwgW1RZUEUsIFNNQVJUVFZdXSwgW1xuICAgICAgICAgICAgL2Nya2V5L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgQ2hyb21lY2FzdFxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgQ0hST01FKydjYXN0J10sIFtWRU5ET1IsIEdPT0dMRV0sIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC9kcm9pZC4rYWZ0KFxcdyspKCBidWl8XFwpKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlIFRWXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIEFNQVpPTl0sIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC9cXChkdHZbXFwpO10uKyhhcXVvcykvaSxcbiAgICAgICAgICAgIC8oYXF1b3MtdHZbXFx3IF0rKVxcKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaGFycFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBTSEFSUF0sIFtUWVBFLCBTTUFSVFRWXV0sW1xuICAgICAgICAgICAgLyhicmF2aWFbXFx3IF0rKSggYnVpfFxcKSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTb255XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIFNPTlldLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvKG1pdHYtXFx3ezV9KSBidWkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYaWFvbWlcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgWElBT01JXSwgW1RZUEUsIFNNQVJUVFZdXSwgW1xuICAgICAgICAgICAgL0hiYnR2LioodGVjaG5pc2F0KSAoLiopOy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUZWNobmlTQVRcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvXFxiKHJva3UpW1xcZHhdKltcXClcXC9dKCg/OmR2cC0pP1tcXGRcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJva3VcbiAgICAgICAgICAgIC9oYmJ0dlxcL1xcZCtcXC5cXGQrXFwuXFxkKyArXFwoW1xcd1xcKyBdKjsgKihbXFx3XFxkXVteO10qKTsoW147XSopL2kgICAgICAgICAvLyBIYmJUViBkZXZpY2VzXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgdHJpbV0sIFtNT0RFTCwgdHJpbV0sIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC9cXGIoYW5kcm9pZCB0dnxzbWFydFstIF0/dHZ8b3BlcmEgdHZ8dHY7IHJ2OilcXGIvaSAgICAgICAgICAgICAgICAgICAvLyBTbWFydFRWIGZyb20gVW5pZGVudGlmaWVkIFZlbmRvcnNcbiAgICAgICAgICAgIF0sIFtbVFlQRSwgU01BUlRUVl1dLCBbXG5cbiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIC8vIENPTlNPTEVTXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgICAgIC8ob3V5YSkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3V5YVxuICAgICAgICAgICAgLyhuaW50ZW5kbykgKFt3aWRzM3V0Y2hdKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOaW50ZW5kb1xuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBDT05TT0xFXV0sIFtcbiAgICAgICAgICAgIC9kcm9pZC4rOyAoc2hpZWxkKSBidWkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTnZpZGlhXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdOdmlkaWEnXSwgW1RZUEUsIENPTlNPTEVdXSwgW1xuICAgICAgICAgICAgLyhwbGF5c3RhdGlvbiBbMzQ1cG9ydGFibGV2aV0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQbGF5c3RhdGlvblxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBTT05ZXSwgW1RZUEUsIENPTlNPTEVdXSwgW1xuICAgICAgICAgICAgL1xcYih4Ym94KD86IG9uZSk/KD8hOyB4Ym94KSlbXFwpOyBdL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBYYm94XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIE1JQ1JPU09GVF0sIFtUWVBFLCBDT05TT0xFXV0sIFtcblxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgLy8gV0VBUkFCTEVTXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgICAgICAgIC9cXGIoc20tW2xyXVxcZFxcZFswNV1bZm51d10/cz8pXFxiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhbXN1bmcgR2FsYXh5IFdhdGNoXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsIFNBTVNVTkddLCBbVFlQRSwgV0VBUkFCTEVdXSwgW1xuICAgICAgICAgICAgLygocGViYmxlKSlhcHAvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQZWJibGVcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgV0VBUkFCTEVdXSwgW1xuICAgICAgICAgICAgLyh3YXRjaCkoPzogP29zWyxcXC9dfFxcZCxcXGRcXC8pW1xcZFxcLl0rL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBsZSBXYXRjaFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCBBUFBMRV0sIFtUWVBFLCBXRUFSQUJMRV1dLCBbXG4gICAgICAgICAgICAvZHJvaWQuKzsgKGdsYXNzKSBcXGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgR2xhc3NcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgR09PR0xFXSwgW1RZUEUsIFdFQVJBQkxFXV0sIFtcbiAgICAgICAgICAgIC9kcm9pZC4rOyAod3Q2Mz8wezIsM30pXFwpL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgWkVCUkFdLCBbVFlQRSwgV0VBUkFCTEVdXSwgW1xuXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAvLyBYUlxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvZHJvaWQuKzsgKGdsYXNzKSBcXGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgR2xhc3NcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgR09PR0xFXSwgW1RZUEUsIFdFQVJBQkxFXV0sIFtcbiAgICAgICAgICAgIC8ocGljbykgKDR8bmVvMyg/OiBsaW5rfHBybyk/KS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGljb1xuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBXRUFSQUJMRV1dLCBbXG4gICAgICAgICAgICAvOyAocXVlc3QoIFxcZHwgcHJvKT8pL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPY3VsdXMgUXVlc3RcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgRkFDRUJPT0tdLCBbVFlQRSwgV0VBUkFCTEVdXSwgW1xuXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAvLyBFTUJFRERFRFxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvKHRlc2xhKSg/OiBxdGNhcmJyb3dzZXJ8XFwvWy1cXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRlc2xhXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBbVFlQRSwgRU1CRURERURdXSwgW1xuICAgICAgICAgICAgLyhhZW9iYylcXGIvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWNobyBEb3RcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgQU1BWk9OXSwgW1RZUEUsIEVNQkVEREVEXV0sIFtcblxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAgICAgICAgIC8vIE1JWEVEIChHRU5FUklDKVxuICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICAgICAgICAvZHJvaWQgLis/OyAoW147XSs/KSg/OiBidWl8OyB3dlxcKXxcXCkgYXBwbGV3KS4rPyBtb2JpbGUgc2FmYXJpL2kgICAgLy8gQW5kcm9pZCBQaG9uZXMgZnJvbSBVbmlkZW50aWZpZWQgVmVuZG9yc1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9kcm9pZCAuKz87IChbXjtdKz8pKD86IGJ1aXxcXCkgYXBwbGV3KS4rPyg/ISBtb2JpbGUpIHNhZmFyaS9pICAgICAgIC8vIEFuZHJvaWQgVGFibGV0cyBmcm9tIFVuaWRlbnRpZmllZCBWZW5kb3JzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL1xcYigodGFibGV0fHRhYilbO1xcL118Zm9jdXNcXC9cXGQoPyEuK21vYmlsZSkpL2kgICAgICAgICAgICAgICAgICAgICAgLy8gVW5pZGVudGlmaWFibGUgVGFibGV0XG4gICAgICAgICAgICBdLCBbW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKHBob25lfG1vYmlsZSg/Ols7XFwvXXwgWyBcXHdcXC9cXC5dKnNhZmFyaSl8cGRhKD89Lit3aW5kb3dzIGNlKSkvaSAgICAvLyBVbmlkZW50aWZpYWJsZSBNb2JpbGVcbiAgICAgICAgICAgIF0sIFtbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC8oYW5kcm9pZFstXFx3XFwuIF17MCw5fSk7LitidWlsL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmljIEFuZHJvaWQgRGV2aWNlXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdHZW5lcmljJ11dXG4gICAgICAgIF0sXG5cbiAgICAgICAgZW5naW5lIDogW1tcblxuICAgICAgICAgICAgL3dpbmRvd3MuKyBlZGdlXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVkZ2VIVE1MXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIEVER0UrJ0hUTUwnXV0sIFtcblxuICAgICAgICAgICAgLyhhcmt3ZWIpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcmtXZWJcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvd2Via2l0XFwvNTM3XFwuMzYuK2Nocm9tZVxcLyg/ITI3KShbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxpbmtcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0JsaW5rJ11dLCBbXG5cbiAgICAgICAgICAgIC8ocHJlc3RvKVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlc3RvXG4gICAgICAgICAgICAvKHdlYmtpdHx0cmlkZW50fG5ldGZyb250fG5ldHN1cmZ8YW1heWF8bHlueHx3M218Z29hbm5hfHNlcnZvKVxcLyhbXFx3XFwuXSspL2ksIC8vIFdlYktpdC9UcmlkZW50L05ldEZyb250L05ldFN1cmYvQW1heWEvTHlueC93M20vR29hbm5hL1NlcnZvXG4gICAgICAgICAgICAvZWtpb2goZmxvdylcXC8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZsb3dcbiAgICAgICAgICAgIC8oa2h0bWx8dGFzbWFufGxpbmtzKVtcXC8gXVxcKD8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtIVE1ML1Rhc21hbi9MaW5rc1xuICAgICAgICAgICAgLyhpY2FiKVtcXC8gXShbMjNdXFwuW1xcZFxcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaUNhYlxuICAgICAgICAgICAgL1xcYihsaWJ3ZWIpL2lcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvcnZcXDooW1xcd1xcLl17MSw5fSlcXGIuKyhnZWNrbykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZWNrb1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIE5BTUVdXG4gICAgICAgIF0sXG5cbiAgICAgICAgb3MgOiBbW1xuXG4gICAgICAgICAgICAvLyBXaW5kb3dzXG4gICAgICAgICAgICAvbWljcm9zb2Z0ICh3aW5kb3dzKSAodmlzdGF8eHApL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdpbmRvd3MgKGlUdW5lcylcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgLyh3aW5kb3dzICg/OnBob25lKD86IG9zKT98bW9iaWxlKSlbXFwvIF0/KFtcXGRcXC5cXHcgXSopL2kgICAgICAgICAgICAgLy8gV2luZG93cyBQaG9uZVxuICAgICAgICAgICAgXSwgW05BTUUsIFtWRVJTSU9OLCBzdHJNYXBwZXIsIHdpbmRvd3NWZXJzaW9uTWFwXV0sIFtcbiAgICAgICAgICAgIC93aW5kb3dzIG50IDZcXC4yOyAoYXJtKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaW5kb3dzIFJUXG4gICAgICAgICAgICAvd2luZG93c1tcXC8gXT8oW250Y2VcXGRcXC4gXStcXHcpKD8hLit4Ym94KS9pLFxuICAgICAgICAgICAgLyg/Ondpbig/PTN8OXxuKXx3aW4gOXggKShbbnRcXGRcXC5dKykvaVxuICAgICAgICAgICAgXSwgW1tWRVJTSU9OLCBzdHJNYXBwZXIsIHdpbmRvd3NWZXJzaW9uTWFwXSwgW05BTUUsICdXaW5kb3dzJ11dLCBbXG5cbiAgICAgICAgICAgIC8vIGlPUy9tYWNPU1xuICAgICAgICAgICAgL2lwW2hvbmVhZF17Miw0fVxcYig/Oi4qb3MgKFtcXHddKykgbGlrZSBtYWN8OyBvcGVyYSkvaSwgICAgICAgICAgICAgIC8vIGlPU1xuICAgICAgICAgICAgLyg/OmlvcztmYnN2XFwvfGlwaG9uZS4raW9zW1xcLyBdKShbXFxkXFwuXSspL2ksXG4gICAgICAgICAgICAvY2ZuZXR3b3JrXFwvLitkYXJ3aW4vaVxuICAgICAgICAgICAgXSwgW1tWRVJTSU9OLCAvXy9nLCAnLiddLCBbTkFNRSwgJ2lPUyddXSwgW1xuICAgICAgICAgICAgLyhtYWMgb3MgeCkgPyhbXFx3XFwuIF0qKS9pLFxuICAgICAgICAgICAgLyhtYWNpbnRvc2h8bWFjX3Bvd2VycGNcXGIpKD8hLitoYWlrdSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFjIE9TXG4gICAgICAgICAgICBdLCBbW05BTUUsIE1BQ19PU10sIFtWRVJTSU9OLCAvXy9nLCAnLiddXSwgW1xuXG4gICAgICAgICAgICAvLyBNb2JpbGUgT1Nlc1xuICAgICAgICAgICAgL2Ryb2lkIChbXFx3XFwuXSspXFxiLisoYW5kcm9pZFstIF14ODZ8aGFybW9ueW9zKS9pICAgICAgICAgICAgICAgICAgICAvLyBBbmRyb2lkLXg4Ni9IYXJtb255T1NcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBOQU1FXSwgWyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW5kcm9pZC9XZWJPUy9RTlgvQmFkYS9SSU0vTWFlbW8vTWVlR28vU2FpbGZpc2ggT1MvT3Blbkhhcm1vbnlcbiAgICAgICAgICAgIC8oYW5kcm9pZHx3ZWJvc3xxbnh8YmFkYXxyaW0gdGFibGV0IG9zfG1hZW1vfG1lZWdvfHNhaWxmaXNofG9wZW5oYXJtb255KVstXFwvIF0/KFtcXHdcXC5dKikvaSxcbiAgICAgICAgICAgIC8oYmxhY2tiZXJyeSlcXHcqXFwvKFtcXHdcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrYmVycnlcbiAgICAgICAgICAgIC8odGl6ZW58a2Fpb3MpW1xcLyBdKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGl6ZW4vS2FpT1NcbiAgICAgICAgICAgIC9cXCgoc2VyaWVzNDApOy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlcmllcyA0MFxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvXFwoYmIoMTApOy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGFja0JlcnJ5IDEwXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIEJMQUNLQkVSUlldXSwgW1xuICAgICAgICAgICAgLyg/OnN5bWJpYW4gP29zfHN5bWJvc3xzNjAoPz07KXxzZXJpZXM2MClbLVxcLyBdPyhbXFx3XFwuXSopL2kgICAgICAgICAvLyBTeW1iaWFuXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdTeW1iaWFuJ11dLCBbXG4gICAgICAgICAgICAvbW96aWxsYVxcL1tcXGRcXC5dKyBcXCgoPzptb2JpbGV8dGFibGV0fHR2fG1vYmlsZTsgW1xcdyBdKyk7IHJ2Oi4rIGdlY2tvXFwvKFtcXHdcXC5dKykvaSAvLyBGaXJlZm94IE9TXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsIEZJUkVGT1grJyBPUyddXSwgW1xuICAgICAgICAgICAgL3dlYjBzOy4rcnQodHYpL2ksXG4gICAgICAgICAgICAvXFxiKD86aHApP3dvcyg/OmJyb3dzZXIpP1xcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZWJPU1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnd2ViT1MnXV0sIFtcbiAgICAgICAgICAgIC93YXRjaCg/OiA/b3NbLFxcL118XFxkLFxcZFxcLykoW1xcZFxcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2F0Y2hPU1xuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnd2F0Y2hPUyddXSwgW1xuXG4gICAgICAgICAgICAvLyBHb29nbGUgQ2hyb21lY2FzdFxuICAgICAgICAgICAgL2Nya2V5XFwvKFtcXGRcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgQ2hyb21lY2FzdFxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCBDSFJPTUUrJ2Nhc3QnXV0sIFtcbiAgICAgICAgICAgIC8oY3JvcykgW1xcd10rKD86XFwpfCAoW1xcd1xcLl0rKVxcYikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWl1bSBPU1xuICAgICAgICAgICAgXSwgW1tOQU1FLCBDSFJPTUlVTV9PU10sIFZFUlNJT05dLFtcblxuICAgICAgICAgICAgLy8gU21hcnQgVFZzXG4gICAgICAgICAgICAvcGFuYXNvbmljOyh2aWVyYSkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBhbmFzb25pYyBWaWVyYVxuICAgICAgICAgICAgLyhuZXRyYW5nZSltbWgvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXRyYW5nZVxuICAgICAgICAgICAgLyhuZXR0dilcXC8oXFxkK1xcLltcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5ldFRWXG5cbiAgICAgICAgICAgIC8vIENvbnNvbGVcbiAgICAgICAgICAgIC8obmludGVuZG98cGxheXN0YXRpb24pIChbd2lkczM0NXBvcnRhYmxldnVjaF0rKS9pLCAgICAgICAgICAgICAgICAgLy8gTmludGVuZG8vUGxheXN0YXRpb25cbiAgICAgICAgICAgIC8oeGJveCk7ICt4Ym94IChbXlxcKTtdKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBYYm94ICgzNjAsIE9uZSwgWCwgUywgU2VyaWVzIFgsIFNlcmllcyBTKVxuXG4gICAgICAgICAgICAvLyBPdGhlclxuICAgICAgICAgICAgL1xcYihqb2xpfHBhbG0pXFxiID8oPzpvcyk/XFwvPyhbXFx3XFwuXSopL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEpvbGkvUGFsbVxuICAgICAgICAgICAgLyhtaW50KVtcXC9cXChcXCkgXT8oXFx3KikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWludFxuICAgICAgICAgICAgLyhtYWdlaWF8dmVjdG9ybGludXgpWzsgXS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWdlaWEvVmVjdG9yTGludXhcbiAgICAgICAgICAgIC8oW2t4bG5dP3VidW50dXxkZWJpYW58c3VzZXxvcGVuc3VzZXxnZW50b298YXJjaCg/PSBsaW51eCl8c2xhY2t3YXJlfGZlZG9yYXxtYW5kcml2YXxjZW50b3N8cGNsaW51eG9zfHJlZCA/aGF0fHplbndhbGt8bGlucHVzfHJhc3BiaWFufHBsYW4gOXxtaW5peHxyaXNjIG9zfGNvbnRpa2l8ZGVlcGlufG1hbmphcm98ZWxlbWVudGFyeSBvc3xzYWJheW9ufGxpbnNwaXJlKSg/OiBnbnVcXC9saW51eCk/KD86IGVudGVycHJpc2UpPyg/OlstIF1saW51eCk/KD86LWdudSk/Wy1cXC8gXT8oPyFjaHJvbXxwYWNrYWdlKShbLVxcd1xcLl0qKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVYnVudHUvRGViaWFuL1NVU0UvR2VudG9vL0FyY2gvU2xhY2t3YXJlL0ZlZG9yYS9NYW5kcml2YS9DZW50T1MvUENMaW51eE9TL1JlZEhhdC9aZW53YWxrL0xpbnB1cy9SYXNwYmlhbi9QbGFuOS9NaW5peC9SSVNDT1MvQ29udGlraS9EZWVwaW4vTWFuamFyby9lbGVtZW50YXJ5L1NhYmF5b24vTGluc3BpcmVcbiAgICAgICAgICAgIC8oaHVyZHxsaW51eCkgPyhbXFx3XFwuXSopL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIdXJkL0xpbnV4XG4gICAgICAgICAgICAvKGdudSkgPyhbXFx3XFwuXSopL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR05VXG4gICAgICAgICAgICAvXFxiKFstZnJlbnRvcGNnaHNdezAsNX1ic2R8ZHJhZ29uZmx5KVtcXC8gXT8oPyFhbWR8W2l4MzQ2XXsxLDJ9ODYpKFtcXHdcXC5dKikvaSwgLy8gRnJlZUJTRC9OZXRCU0QvT3BlbkJTRC9QQy1CU0QvR2hvc3RCU0QvRHJhZ29uRmx5XG4gICAgICAgICAgICAvKGhhaWt1KSAoXFx3KykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIYWlrdVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvKHN1bm9zKSA/KFtcXHdcXC5cXGRdKikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvbGFyaXNcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ1NvbGFyaXMnXSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8oKD86b3Blbik/c29sYXJpcylbLVxcLyBdPyhbXFx3XFwuXSopL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29sYXJpc1xuICAgICAgICAgICAgLyhhaXgpICgoXFxkKSg/PVxcLnxcXCl8IClbXFx3XFwuXSkqL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFJWFxuICAgICAgICAgICAgL1xcYihiZW9zfG9zXFwvMnxhbWlnYW9zfG1vcnBob3N8b3BlbnZtc3xmdWNoc2lhfGhwLXV4fHNlcmVuaXR5b3MpL2ksIC8vIEJlT1MvT1MyL0FtaWdhT1MvTW9ycGhPUy9PcGVuVk1TL0Z1Y2hzaWEvSFAtVVgvU2VyZW5pdHlPU1xuICAgICAgICAgICAgLyh1bml4KSA/KFtcXHdcXC5dKikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVOSVhcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXVxuICAgICAgICBdXG4gICAgfTtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gQ29uc3RydWN0b3JcbiAgICAvLy8vLy8vLy8vLy8vLy8vXG5cbiAgICB2YXIgVUFQYXJzZXIgPSBmdW5jdGlvbiAodWEsIGV4dGVuc2lvbnMpIHtcblxuICAgICAgICBpZiAodHlwZW9mIHVhID09PSBPQkpfVFlQRSkge1xuICAgICAgICAgICAgZXh0ZW5zaW9ucyA9IHVhO1xuICAgICAgICAgICAgdWEgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVUFQYXJzZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVBUGFyc2VyKHVhLCBleHRlbnNpb25zKS5nZXRSZXN1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfbmF2aWdhdG9yID0gKHR5cGVvZiB3aW5kb3cgIT09IFVOREVGX1RZUEUgJiYgd2luZG93Lm5hdmlnYXRvcikgPyB3aW5kb3cubmF2aWdhdG9yIDogdW5kZWZpbmVkO1xuICAgICAgICB2YXIgX3VhID0gdWEgfHwgKChfbmF2aWdhdG9yICYmIF9uYXZpZ2F0b3IudXNlckFnZW50KSA/IF9uYXZpZ2F0b3IudXNlckFnZW50IDogRU1QVFkpO1xuICAgICAgICB2YXIgX3VhY2ggPSAoX25hdmlnYXRvciAmJiBfbmF2aWdhdG9yLnVzZXJBZ2VudERhdGEpID8gX25hdmlnYXRvci51c2VyQWdlbnREYXRhIDogdW5kZWZpbmVkO1xuICAgICAgICB2YXIgX3JneG1hcCA9IGV4dGVuc2lvbnMgPyBleHRlbmQocmVnZXhlcywgZXh0ZW5zaW9ucykgOiByZWdleGVzO1xuICAgICAgICB2YXIgX2lzU2VsZk5hdiA9IF9uYXZpZ2F0b3IgJiYgX25hdmlnYXRvci51c2VyQWdlbnQgPT0gX3VhO1xuXG4gICAgICAgIHRoaXMuZ2V0QnJvd3NlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYnJvd3NlciA9IHt9O1xuICAgICAgICAgICAgX2Jyb3dzZXJbTkFNRV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBfYnJvd3NlcltWRVJTSU9OXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJneE1hcHBlci5jYWxsKF9icm93c2VyLCBfdWEsIF9yZ3htYXAuYnJvd3Nlcik7XG4gICAgICAgICAgICBfYnJvd3NlcltNQUpPUl0gPSBtYWpvcml6ZShfYnJvd3NlcltWRVJTSU9OXSk7XG4gICAgICAgICAgICAvLyBCcmF2ZS1zcGVjaWZpYyBkZXRlY3Rpb25cbiAgICAgICAgICAgIGlmIChfaXNTZWxmTmF2ICYmIF9uYXZpZ2F0b3IgJiYgX25hdmlnYXRvci5icmF2ZSAmJiB0eXBlb2YgX25hdmlnYXRvci5icmF2ZS5pc0JyYXZlID09IEZVTkNfVFlQRSkge1xuICAgICAgICAgICAgICAgIF9icm93c2VyW05BTUVdID0gJ0JyYXZlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfYnJvd3NlcjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRDUFUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2NwdSA9IHt9O1xuICAgICAgICAgICAgX2NwdVtBUkNISVRFQ1RVUkVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmd4TWFwcGVyLmNhbGwoX2NwdSwgX3VhLCBfcmd4bWFwLmNwdSk7XG4gICAgICAgICAgICByZXR1cm4gX2NwdTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXREZXZpY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2RldmljZSA9IHt9O1xuICAgICAgICAgICAgX2RldmljZVtWRU5ET1JdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgX2RldmljZVtNT0RFTF0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBfZGV2aWNlW1RZUEVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmd4TWFwcGVyLmNhbGwoX2RldmljZSwgX3VhLCBfcmd4bWFwLmRldmljZSk7XG4gICAgICAgICAgICBpZiAoX2lzU2VsZk5hdiAmJiAhX2RldmljZVtUWVBFXSAmJiBfdWFjaCAmJiBfdWFjaC5tb2JpbGUpIHtcbiAgICAgICAgICAgICAgICBfZGV2aWNlW1RZUEVdID0gTU9CSUxFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaVBhZE9TLXNwZWNpZmljIGRldGVjdGlvbjogaWRlbnRpZmllZCBhcyBNYWMsIGJ1dCBoYXMgc29tZSBpT1Mtb25seSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBpZiAoX2lzU2VsZk5hdiAmJiBfZGV2aWNlW01PREVMXSA9PSAnTWFjaW50b3NoJyAmJiBfbmF2aWdhdG9yICYmIHR5cGVvZiBfbmF2aWdhdG9yLnN0YW5kYWxvbmUgIT09IFVOREVGX1RZUEUgJiYgX25hdmlnYXRvci5tYXhUb3VjaFBvaW50cyAmJiBfbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMikge1xuICAgICAgICAgICAgICAgIF9kZXZpY2VbTU9ERUxdID0gJ2lQYWQnO1xuICAgICAgICAgICAgICAgIF9kZXZpY2VbVFlQRV0gPSBUQUJMRVQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX2RldmljZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRFbmdpbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2VuZ2luZSA9IHt9O1xuICAgICAgICAgICAgX2VuZ2luZVtOQU1FXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIF9lbmdpbmVbVkVSU0lPTl0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZ3hNYXBwZXIuY2FsbChfZW5naW5lLCBfdWEsIF9yZ3htYXAuZW5naW5lKTtcbiAgICAgICAgICAgIHJldHVybiBfZW5naW5lO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldE9TID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9vcyA9IHt9O1xuICAgICAgICAgICAgX29zW05BTUVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgX29zW1ZFUlNJT05dID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmd4TWFwcGVyLmNhbGwoX29zLCBfdWEsIF9yZ3htYXAub3MpO1xuICAgICAgICAgICAgaWYgKF9pc1NlbGZOYXYgJiYgIV9vc1tOQU1FXSAmJiBfdWFjaCAmJiBfdWFjaC5wbGF0Zm9ybSAmJiBfdWFjaC5wbGF0Zm9ybSAhPSAnVW5rbm93bicpIHtcbiAgICAgICAgICAgICAgICBfb3NbTkFNRV0gPSBfdWFjaC5wbGF0Zm9ybSAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvY2hyb21lIG9zL2ksIENIUk9NSVVNX09TKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL21hY29zL2ksIE1BQ19PUyk7ICAgICAgICAgICAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX29zO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFJlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdWEgICAgICA6IHRoaXMuZ2V0VUEoKSxcbiAgICAgICAgICAgICAgICBicm93c2VyIDogdGhpcy5nZXRCcm93c2VyKCksXG4gICAgICAgICAgICAgICAgZW5naW5lICA6IHRoaXMuZ2V0RW5naW5lKCksXG4gICAgICAgICAgICAgICAgb3MgICAgICA6IHRoaXMuZ2V0T1MoKSxcbiAgICAgICAgICAgICAgICBkZXZpY2UgIDogdGhpcy5nZXREZXZpY2UoKSxcbiAgICAgICAgICAgICAgICBjcHUgICAgIDogdGhpcy5nZXRDUFUoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRVQSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdWE7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0VUEgPSBmdW5jdGlvbiAodWEpIHtcbiAgICAgICAgICAgIF91YSA9ICh0eXBlb2YgdWEgPT09IFNUUl9UWVBFICYmIHVhLmxlbmd0aCA+IFVBX01BWF9MRU5HVEgpID8gdHJpbSh1YSwgVUFfTUFYX0xFTkdUSCkgOiB1YTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFVBKF91YSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBVQVBhcnNlci5WRVJTSU9OID0gTElCVkVSU0lPTjtcbiAgICBVQVBhcnNlci5CUk9XU0VSID0gIGVudW1lcml6ZShbTkFNRSwgVkVSU0lPTiwgTUFKT1JdKTtcbiAgICBVQVBhcnNlci5DUFUgPSBlbnVtZXJpemUoW0FSQ0hJVEVDVFVSRV0pO1xuICAgIFVBUGFyc2VyLkRFVklDRSA9IGVudW1lcml6ZShbTU9ERUwsIFZFTkRPUiwgVFlQRSwgQ09OU09MRSwgTU9CSUxFLCBTTUFSVFRWLCBUQUJMRVQsIFdFQVJBQkxFLCBFTUJFRERFRF0pO1xuICAgIFVBUGFyc2VyLkVOR0lORSA9IFVBUGFyc2VyLk9TID0gZW51bWVyaXplKFtOQU1FLCBWRVJTSU9OXSk7XG5cbiAgICAvLy8vLy8vLy8vL1xuICAgIC8vIEV4cG9ydFxuICAgIC8vLy8vLy8vLy9cblxuICAgIC8vIGNoZWNrIGpzIGVudmlyb25tZW50XG4gICAgaWYgKHR5cGVvZihleHBvcnRzKSAhPT0gVU5ERUZfVFlQRSkge1xuICAgICAgICAvLyBub2RlanMgZW52XG4gICAgICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSBVTkRFRl9UWVBFICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBVQVBhcnNlcjtcbiAgICAgICAgfVxuICAgICAgICBleHBvcnRzLlVBUGFyc2VyID0gVUFQYXJzZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmVxdWlyZWpzIGVudiAob3B0aW9uYWwpXG4gICAgICAgIGlmICh0eXBlb2YoZGVmaW5lKSA9PT0gRlVOQ19UWVBFICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgICAgIGRlZmluZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFVBUGFyc2VyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gVU5ERUZfVFlQRSkge1xuICAgICAgICAgICAgLy8gYnJvd3NlciBlbnZcbiAgICAgICAgICAgIHdpbmRvdy5VQVBhcnNlciA9IFVBUGFyc2VyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8galF1ZXJ5L1plcHRvIHNwZWNpZmljIChvcHRpb25hbClcbiAgICAvLyBOb3RlOlxuICAgIC8vICAgSW4gQU1EIGVudiB0aGUgZ2xvYmFsIHNjb3BlIHNob3VsZCBiZSBrZXB0IGNsZWFuLCBidXQgalF1ZXJ5IGlzIGFuIGV4Y2VwdGlvbi5cbiAgICAvLyAgIGpRdWVyeSBhbHdheXMgZXhwb3J0cyB0byBnbG9iYWwgc2NvcGUsIHVubGVzcyBqUXVlcnkubm9Db25mbGljdCh0cnVlKSBpcyB1c2VkLFxuICAgIC8vICAgYW5kIHdlIHNob3VsZCBjYXRjaCB0aGF0LlxuICAgIHZhciAkID0gdHlwZW9mIHdpbmRvdyAhPT0gVU5ERUZfVFlQRSAmJiAod2luZG93LmpRdWVyeSB8fCB3aW5kb3cuWmVwdG8pO1xuICAgIGlmICgkICYmICEkLnVhKSB7XG4gICAgICAgIHZhciBwYXJzZXIgPSBuZXcgVUFQYXJzZXIoKTtcbiAgICAgICAgJC51YSA9IHBhcnNlci5nZXRSZXN1bHQoKTtcbiAgICAgICAgJC51YS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLmdldFVBKCk7XG4gICAgICAgIH07XG4gICAgICAgICQudWEuc2V0ID0gZnVuY3Rpb24gKHVhKSB7XG4gICAgICAgICAgICBwYXJzZXIuc2V0VUEodWEpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHBhcnNlci5nZXRSZXN1bHQoKTtcbiAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgJC51YVtwcm9wXSA9IHJlc3VsdFtwcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbn0pKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnID8gd2luZG93IDogdGhpcyk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/ua-parser-js/src/ua-parser.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/uuid/dist/esm-browser/regex.js":
/*!*****************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/regex.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcmVnZXguanMiLCJtYXBwaW5ncyI6IjtBQUFBLCtEQUFlLGNBQWMsRUFBRSxVQUFVLEVBQUUsZUFBZSxFQUFFLGdCQUFnQixFQUFFLFVBQVUsR0FBRyx5Q0FBeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9yZWdleC5qcz84MWQ1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IC9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/uuid/dist/esm-browser/regex.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/uuid/dist/esm-browser/rng.js":
/*!***************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/rng.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ rng; }\n/* harmony export */ });\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nfunction rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvcm5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2U7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9ybmcuanM/ZjRjYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBVbmlxdWUgSUQgY3JlYXRpb24gcmVxdWlyZXMgYSBoaWdoIHF1YWxpdHkgcmFuZG9tICMgZ2VuZXJhdG9yLiBJbiB0aGUgYnJvd3NlciB3ZSB0aGVyZWZvcmVcbi8vIHJlcXVpcmUgdGhlIGNyeXB0byBBUEkgYW5kIGRvIG5vdCBzdXBwb3J0IGJ1aWx0LWluIGZhbGxiYWNrIHRvIGxvd2VyIHF1YWxpdHkgcmFuZG9tIG51bWJlclxuLy8gZ2VuZXJhdG9ycyAobGlrZSBNYXRoLnJhbmRvbSgpKS5cbnZhciBnZXRSYW5kb21WYWx1ZXM7XG52YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi4gQWxzbyxcbiAgICAvLyBmaW5kIHRoZSBjb21wbGV0ZSBpbXBsZW1lbnRhdGlvbiBvZiBjcnlwdG8gKG1zQ3J5cHRvKSBvbiBJRTExLlxuICAgIGdldFJhbmRvbVZhbHVlcyA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0bykgfHwgdHlwZW9mIG1zQ3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09PSAnZnVuY3Rpb24nICYmIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKG1zQ3J5cHRvKTtcblxuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdldFJhbmRvbVZhbHVlcyhybmRzOCk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/uuid/dist/esm-browser/rng.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/uuid/dist/esm-browser/stringify.js":
/*!*********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/stringify.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validate.js */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/validate.js\");\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!(0,_validate_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (stringify);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc3RyaW5naWZ5LmpzIiwibWFwcGluZ3MiOiI7O0FBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwZ0JBQTBnQjtBQUMxZ0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTyx3REFBUTtBQUNmO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSwrREFBZSxTQUFTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc3RyaW5naWZ5LmpzP2JkMzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG5cbnZhciBieXRlVG9IZXggPSBbXTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXgucHVzaCgoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtcbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KGFycikge1xuICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xuICAvLyBOb3RlOiBCZSBjYXJlZnVsIGVkaXRpbmcgdGhpcyBjb2RlISAgSXQncyBiZWVuIHR1bmVkIGZvciBwZXJmb3JtYW5jZVxuICAvLyBhbmQgd29ya3MgaW4gd2F5cyB5b3UgbWF5IG5vdCBleHBlY3QuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdXVpZGpzL3V1aWQvcHVsbC80MzRcbiAgdmFyIHV1aWQgPSAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7IC8vIENvbnNpc3RlbmN5IGNoZWNrIGZvciB2YWxpZCBVVUlELiAgSWYgdGhpcyB0aHJvd3MsIGl0J3MgbGlrZWx5IGR1ZSB0byBvbmVcbiAgLy8gb2YgdGhlIGZvbGxvd2luZzpcbiAgLy8gLSBPbmUgb3IgbW9yZSBpbnB1dCBhcnJheSB2YWx1ZXMgZG9uJ3QgbWFwIHRvIGEgaGV4IG9jdGV0IChsZWFkaW5nIHRvXG4gIC8vIFwidW5kZWZpbmVkXCIgaW4gdGhlIHV1aWQpXG4gIC8vIC0gSW52YWxpZCBpbnB1dCB2YWx1ZXMgZm9yIHRoZSBSRkMgYHZlcnNpb25gIG9yIGB2YXJpYW50YCBmaWVsZHNcblxuICBpZiAoIXZhbGlkYXRlKHV1aWQpKSB7XG4gICAgdGhyb3cgVHlwZUVycm9yKCdTdHJpbmdpZmllZCBVVUlEIGlzIGludmFsaWQnKTtcbiAgfVxuXG4gIHJldHVybiB1dWlkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdHJpbmdpZnk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/uuid/dist/esm-browser/stringify.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js":
/*!**************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/v4.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _rng_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./rng.js */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/rng.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/stringify.js\");\n\n\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || _rng_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(rnds);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (v4);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdjQuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQTJCO0FBQ1k7O0FBRXZDO0FBQ0E7QUFDQSwrQ0FBK0MsK0NBQUcsS0FBSzs7QUFFdkQ7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7O0FBRUEsb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTs7QUFFQTtBQUNBOztBQUVBLFNBQVMseURBQVM7QUFDbEI7O0FBRUEsK0RBQWUsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0LmpzP2E2MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5qcyc7XG5pbXBvcnQgc3RyaW5naWZ5IGZyb20gJy4vc3RyaW5naWZ5LmpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTsgLy8gUGVyIDQuNCwgc2V0IGJpdHMgZm9yIHZlcnNpb24gYW5kIGBjbG9ja19zZXFfaGlfYW5kX3Jlc2VydmVkYFxuXG4gIHJuZHNbNl0gPSBybmRzWzZdICYgMHgwZiB8IDB4NDA7XG4gIHJuZHNbOF0gPSBybmRzWzhdICYgMHgzZiB8IDB4ODA7IC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuXG4gIGlmIChidWYpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuICAgICAgYnVmW29mZnNldCArIGldID0gcm5kc1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xuICB9XG5cbiAgcmV0dXJuIHN0cmluZ2lmeShybmRzKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdjQ7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/uuid/dist/esm-browser/validate.js":
/*!********************************************************!*\
  !*** ./node_modules/uuid/dist/esm-browser/validate.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _regex_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./regex.js */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/regex.js\");\n\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && _regex_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].test(uuid);\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (validate);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvdmFsaWRhdGUuanMiLCJtYXBwaW5ncyI6Ijs7QUFBK0I7O0FBRS9CO0FBQ0EscUNBQXFDLGlEQUFLO0FBQzFDOztBQUVBLCtEQUFlLFFBQVEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92YWxpZGF0ZS5qcz8xZGZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSRUdFWCBmcm9tICcuL3JlZ2V4LmpzJztcblxuZnVuY3Rpb24gdmFsaWRhdGUodXVpZCkge1xuICByZXR1cm4gdHlwZW9mIHV1aWQgPT09ICdzdHJpbmcnICYmIFJFR0VYLnRlc3QodXVpZCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHZhbGlkYXRlOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/uuid/dist/esm-browser/validate.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/adapter_core.js":
/*!************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_core.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter_factory.js */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/adapter_factory.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\nconst adapter =\n  (0,_adapter_factory_js__WEBPACK_IMPORTED_MODULE_0__.adapterFactory)({window: typeof window === 'undefined' ? undefined : window});\n/* harmony default export */ __webpack_exports__[\"default\"] = (adapter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvYWRhcHRlcl9jb3JlLmpzIiwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFYTs7QUFFdUM7O0FBRXBEO0FBQ0EsRUFBRSxtRUFBYyxFQUFFLDJEQUEyRDtBQUM3RSwrREFBZSxPQUFPLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9hZGFwdGVyX2NvcmUuanM/YWY0YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7YWRhcHRlckZhY3Rvcnl9IGZyb20gJy4vYWRhcHRlcl9mYWN0b3J5LmpzJztcblxuY29uc3QgYWRhcHRlciA9XG4gIGFkYXB0ZXJGYWN0b3J5KHt3aW5kb3c6IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogd2luZG93fSk7XG5leHBvcnQgZGVmYXVsdCBhZGFwdGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/adapter_core.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/adapter_factory.js":
/*!***************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/adapter_factory.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   adapterFactory: function() { return /* binding */ adapterFactory; }\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/utils.js\");\n/* harmony import */ var _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chrome/chrome_shim */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js\");\n/* harmony import */ var _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./firefox/firefox_shim */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js\");\n/* harmony import */ var _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./safari/safari_shim */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js\");\n/* harmony import */ var _common_shim__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common_shim */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/common_shim.js\");\n/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sdp */ \"(app-pages-browser)/./node_modules/sdp/sdp.js\");\n/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_5__);\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n\n// Browser shims.\n\n\n\n\n\n\n// Shimming starts here.\nfunction adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = _utils__WEBPACK_IMPORTED_MODULE_0__.log;\n  const browserDetails = _utils__WEBPACK_IMPORTED_MODULE_0__.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim: _common_shim__WEBPACK_IMPORTED_MODULE_4__,\n    extractVersion: _utils__WEBPACK_IMPORTED_MODULE_0__.extractVersion,\n    disableLog: _utils__WEBPACK_IMPORTED_MODULE_0__.disableLog,\n    disableWarnings: _utils__WEBPACK_IMPORTED_MODULE_0__.disableWarnings,\n    // Expose sdp as a convenience. For production apps include directly.\n    sdp: sdp__WEBPACK_IMPORTED_MODULE_5__,\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__ || !_chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__;\n\n      // Must be called before shimPeerConnection.\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimMediaStream(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimPeerConnection(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimOnTrack(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimAddTrackRemoveTrack(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetSendersWithDtmf(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimGetStats(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.shimSenderReceiverGetStats(window, browserDetails);\n      _chrome_chrome_shim__WEBPACK_IMPORTED_MODULE_1__.fixNegotiationNeeded(window, browserDetails);\n\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimConnectionState(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__ || !_firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__;\n\n      // Must be called before shimPeerConnection.\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimGetUserMedia(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimPeerConnection(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimOnTrack(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimRemoveStream(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimSenderGetStats(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimReceiverGetStats(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimRTCDataChannel(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimAddTransceiver(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimGetParameters(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimCreateOffer(window, browserDetails);\n      _firefox_firefox_shim__WEBPACK_IMPORTED_MODULE_2__.shimCreateAnswer(window, browserDetails);\n\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimConnectionState(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!_safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__ || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__;\n\n      // Must be called before shimCallbackAPI.\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimRTCIceServerUrls(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimCreateOfferLegacy(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimCallbacksAPI(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimLocalStreamsAPI(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimRemoteStreamsAPI(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimTrackEventTransceiver(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimGetUserMedia(window, browserDetails);\n      _safari_safari_shim__WEBPACK_IMPORTED_MODULE_3__.shimAudioContext(window, browserDetails);\n\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidate(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimMaxMessageSize(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.shimSendThrowTypeError(window, browserDetails);\n      _common_shim__WEBPACK_IMPORTED_MODULE_4__.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvYWRhcHRlcl9mYWN0b3J5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDaUM7O0FBRWpDO0FBQ21EO0FBQ0c7QUFDSDtBQUNQO0FBQ2pCOztBQUUzQjtBQUNPLHlCQUF5QixRQUFRLElBQUk7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0Esa0JBQWtCLHVDQUFTO0FBQzNCLHlCQUF5QixpREFBbUI7O0FBRTVDO0FBQ0E7QUFDQSxjQUFjO0FBQ2Qsb0JBQW9CLGtEQUFvQjtBQUN4QyxnQkFBZ0IsOENBQWdCO0FBQ2hDLHFCQUFxQixtREFBcUI7QUFDMUM7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnREFBVSxLQUFLLG1FQUE2QjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixnREFBVTs7QUFFdEM7QUFDQSxNQUFNLHdFQUF5QztBQUMvQyxNQUFNLDhFQUErQzs7QUFFckQsTUFBTSxpRUFBMkI7QUFDakMsTUFBTSxnRUFBMEI7QUFDaEMsTUFBTSxtRUFBNkI7QUFDbkMsTUFBTSw0REFBc0I7QUFDNUIsTUFBTSx3RUFBa0M7QUFDeEMsTUFBTSx1RUFBaUM7QUFDdkMsTUFBTSw2REFBdUI7QUFDN0IsTUFBTSwyRUFBcUM7QUFDM0MsTUFBTSxxRUFBK0I7O0FBRXJDLE1BQU0sNkRBQThCO0FBQ3BDLE1BQU0sMEVBQTJDO0FBQ2pELE1BQU0sNkRBQThCO0FBQ3BDLE1BQU0sNERBQTZCO0FBQ25DLE1BQU0sZ0VBQWlDO0FBQ3ZDLE1BQU0sZ0VBQWlDO0FBQ3ZDO0FBQ0E7QUFDQSxXQUFXLGtEQUFXLEtBQUsscUVBQThCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrREFBVzs7QUFFdkM7QUFDQSxNQUFNLHdFQUF5QztBQUMvQyxNQUFNLDhFQUErQzs7QUFFckQsTUFBTSxtRUFBNEI7QUFDbEMsTUFBTSxxRUFBOEI7QUFDcEMsTUFBTSw4REFBdUI7QUFDN0IsTUFBTSxtRUFBNEI7QUFDbEMsTUFBTSxxRUFBOEI7QUFDcEMsTUFBTSx1RUFBZ0M7QUFDdEMsTUFBTSxxRUFBOEI7QUFDcEMsTUFBTSxxRUFBOEI7QUFDcEMsTUFBTSxvRUFBNkI7QUFDbkMsTUFBTSxrRUFBMkI7QUFDakMsTUFBTSxtRUFBNEI7O0FBRWxDLE1BQU0sNkRBQThCO0FBQ3BDLE1BQU0sNkRBQThCO0FBQ3BDLE1BQU0sNERBQTZCO0FBQ25DLE1BQU0sZ0VBQWlDO0FBQ3ZDO0FBQ0E7QUFDQSxXQUFXLGdEQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsZ0RBQVU7O0FBRXRDO0FBQ0EsTUFBTSx3RUFBeUM7QUFDL0MsTUFBTSw4RUFBK0M7O0FBRXJELE1BQU0scUVBQStCO0FBQ3JDLE1BQU0sc0VBQWdDO0FBQ3RDLE1BQU0saUVBQTJCO0FBQ2pDLE1BQU0sb0VBQThCO0FBQ3BDLE1BQU0scUVBQStCO0FBQ3JDLE1BQU0sMEVBQW9DO0FBQzFDLE1BQU0saUVBQTJCO0FBQ2pDLE1BQU0saUVBQTJCOztBQUVqQyxNQUFNLDZEQUE4QjtBQUNwQyxNQUFNLDBFQUEyQztBQUNqRCxNQUFNLDREQUE2QjtBQUNuQyxNQUFNLGdFQUFpQztBQUN2QyxNQUFNLGdFQUFpQztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9hZGFwdGVyX2ZhY3RvcnkuanM/MTQ0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuXG4vLyBCcm93c2VyIHNoaW1zLlxuaW1wb3J0ICogYXMgY2hyb21lU2hpbSBmcm9tICcuL2Nocm9tZS9jaHJvbWVfc2hpbSc7XG5pbXBvcnQgKiBhcyBmaXJlZm94U2hpbSBmcm9tICcuL2ZpcmVmb3gvZmlyZWZveF9zaGltJztcbmltcG9ydCAqIGFzIHNhZmFyaVNoaW0gZnJvbSAnLi9zYWZhcmkvc2FmYXJpX3NoaW0nO1xuaW1wb3J0ICogYXMgY29tbW9uU2hpbSBmcm9tICcuL2NvbW1vbl9zaGltJztcbmltcG9ydCAqIGFzIHNkcCBmcm9tICdzZHAnO1xuXG4vLyBTaGltbWluZyBzdGFydHMgaGVyZS5cbmV4cG9ydCBmdW5jdGlvbiBhZGFwdGVyRmFjdG9yeSh7d2luZG93fSA9IHt9LCBvcHRpb25zID0ge1xuICBzaGltQ2hyb21lOiB0cnVlLFxuICBzaGltRmlyZWZveDogdHJ1ZSxcbiAgc2hpbVNhZmFyaTogdHJ1ZSxcbn0pIHtcbiAgLy8gVXRpbHMuXG4gIGNvbnN0IGxvZ2dpbmcgPSB1dGlscy5sb2c7XG4gIGNvbnN0IGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuXG4gIGNvbnN0IGFkYXB0ZXIgPSB7XG4gICAgYnJvd3NlckRldGFpbHMsXG4gICAgY29tbW9uU2hpbSxcbiAgICBleHRyYWN0VmVyc2lvbjogdXRpbHMuZXh0cmFjdFZlcnNpb24sXG4gICAgZGlzYWJsZUxvZzogdXRpbHMuZGlzYWJsZUxvZyxcbiAgICBkaXNhYmxlV2FybmluZ3M6IHV0aWxzLmRpc2FibGVXYXJuaW5ncyxcbiAgICAvLyBFeHBvc2Ugc2RwIGFzIGEgY29udmVuaWVuY2UuIEZvciBwcm9kdWN0aW9uIGFwcHMgaW5jbHVkZSBkaXJlY3RseS5cbiAgICBzZHAsXG4gIH07XG5cbiAgLy8gU2hpbSBicm93c2VyIGlmIGZvdW5kLlxuICBzd2l0Y2ggKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIpIHtcbiAgICBjYXNlICdjaHJvbWUnOlxuICAgICAgaWYgKCFjaHJvbWVTaGltIHx8ICFjaHJvbWVTaGltLnNoaW1QZWVyQ29ubmVjdGlvbiB8fFxuICAgICAgICAgICFvcHRpb25zLnNoaW1DaHJvbWUpIHtcbiAgICAgICAgbG9nZ2luZygnQ2hyb21lIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpO1xuICAgICAgICByZXR1cm4gYWRhcHRlcjtcbiAgICAgIH1cbiAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uID09PSBudWxsKSB7XG4gICAgICAgIGxvZ2dpbmcoJ0Nocm9tZSBzaGltIGNhbiBub3QgZGV0ZXJtaW5lIHZlcnNpb24sIG5vdCBzaGltbWluZy4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGNocm9tZS4nKTtcbiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gY2hyb21lU2hpbTtcblxuICAgICAgLy8gTXVzdCBiZSBjYWxsZWQgYmVmb3JlIHNoaW1QZWVyQ29ubmVjdGlvbi5cbiAgICAgIGNvbW1vblNoaW0uc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5KHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltUGFyYW1ldGVybGVzc1NldExvY2FsRGVzY3JpcHRpb24od2luZG93LCBicm93c2VyRGV0YWlscyk7XG5cbiAgICAgIGNocm9tZVNoaW0uc2hpbUdldFVzZXJNZWRpYSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbU1lZGlhU3RyZWFtKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5zaGltUGVlckNvbm5lY3Rpb24od2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1PblRyYWNrKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5zaGltQWRkVHJhY2tSZW1vdmVUcmFjayh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbUdldFNlbmRlcnNXaXRoRHRtZih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uc2hpbUdldFN0YXRzKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY2hyb21lU2hpbS5zaGltU2VuZGVyUmVjZWl2ZXJHZXRTdGF0cyh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNocm9tZVNoaW0uZml4TmVnb3RpYXRpb25OZWVkZWQod2luZG93LCBicm93c2VyRGV0YWlscyk7XG5cbiAgICAgIGNvbW1vblNoaW0uc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVJUQ0ljZUNhbmRpZGF0ZVJlbGF5UHJvdG9jb2wod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1Db25uZWN0aW9uU3RhdGUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1NYXhNZXNzYWdlU2l6ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0ucmVtb3ZlRXh0bWFwQWxsb3dNaXhlZCh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2ZpcmVmb3gnOlxuICAgICAgaWYgKCFmaXJlZm94U2hpbSB8fCAhZmlyZWZveFNoaW0uc2hpbVBlZXJDb25uZWN0aW9uIHx8XG4gICAgICAgICAgIW9wdGlvbnMuc2hpbUZpcmVmb3gpIHtcbiAgICAgICAgbG9nZ2luZygnRmlyZWZveCBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS4nKTtcbiAgICAgICAgcmV0dXJuIGFkYXB0ZXI7XG4gICAgICB9XG4gICAgICBsb2dnaW5nKCdhZGFwdGVyLmpzIHNoaW1taW5nIGZpcmVmb3guJyk7XG4gICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLlxuICAgICAgYWRhcHRlci5icm93c2VyU2hpbSA9IGZpcmVmb3hTaGltO1xuXG4gICAgICAvLyBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgc2hpbVBlZXJDb25uZWN0aW9uLlxuICAgICAgY29tbW9uU2hpbS5zaGltQWRkSWNlQ2FuZGlkYXRlTnVsbE9yRW1wdHkod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1QYXJhbWV0ZXJsZXNzU2V0TG9jYWxEZXNjcmlwdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcblxuICAgICAgZmlyZWZveFNoaW0uc2hpbUdldFVzZXJNZWRpYSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1PblRyYWNrKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbVJlbW92ZVN0cmVhbSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1TZW5kZXJHZXRTdGF0cyh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGZpcmVmb3hTaGltLnNoaW1SZWNlaXZlckdldFN0YXRzKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbVJUQ0RhdGFDaGFubmVsKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbUFkZFRyYW5zY2VpdmVyKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbUdldFBhcmFtZXRlcnMod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltQ3JlYXRlT2ZmZXIod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltQ3JlYXRlQW5zd2VyKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuXG4gICAgICBjb21tb25TaGltLnNoaW1SVENJY2VDYW5kaWRhdGUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1Db25uZWN0aW9uU3RhdGUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1NYXhNZXNzYWdlU2l6ZSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVNlbmRUaHJvd1R5cGVFcnJvcih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3NhZmFyaSc6XG4gICAgICBpZiAoIXNhZmFyaVNoaW0gfHwgIW9wdGlvbnMuc2hpbVNhZmFyaSkge1xuICAgICAgICBsb2dnaW5nKCdTYWZhcmkgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7XG4gICAgICAgIHJldHVybiBhZGFwdGVyO1xuICAgICAgfVxuICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBzYWZhcmkuJyk7XG4gICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLlxuICAgICAgYWRhcHRlci5icm93c2VyU2hpbSA9IHNhZmFyaVNoaW07XG5cbiAgICAgIC8vIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBzaGltQ2FsbGJhY2tBUEkuXG4gICAgICBjb21tb25TaGltLnNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbVBhcmFtZXRlcmxlc3NTZXRMb2NhbERlc2NyaXB0aW9uKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuXG4gICAgICBzYWZhcmlTaGltLnNoaW1SVENJY2VTZXJ2ZXJVcmxzKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltQ3JlYXRlT2ZmZXJMZWdhY3kod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1DYWxsYmFja3NBUEkod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1Mb2NhbFN0cmVhbXNBUEkod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1SZW1vdGVTdHJlYW1zQVBJKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltR2V0VXNlck1lZGlhKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltQXVkaW9Db250ZXh0KHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuXG4gICAgICBjb21tb25TaGltLnNoaW1SVENJY2VDYW5kaWRhdGUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1SVENJY2VDYW5kaWRhdGVSZWxheVByb3RvY29sKHdpbmRvdywgYnJvd3NlckRldGFpbHMpO1xuICAgICAgY29tbW9uU2hpbS5zaGltTWF4TWVzc2FnZVNpemUod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnNoaW1TZW5kVGhyb3dUeXBlRXJyb3Iod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBjb21tb25TaGltLnJlbW92ZUV4dG1hcEFsbG93TWl4ZWQod2luZG93LCBicm93c2VyRGV0YWlscyk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgbG9nZ2luZygnVW5zdXBwb3J0ZWQgYnJvd3NlciEnKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcmV0dXJuIGFkYXB0ZXI7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/adapter_factory.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fixNegotiationNeeded: function() { return /* binding */ fixNegotiationNeeded; },\n/* harmony export */   shimAddTrackRemoveTrack: function() { return /* binding */ shimAddTrackRemoveTrack; },\n/* harmony export */   shimAddTrackRemoveTrackWithNative: function() { return /* binding */ shimAddTrackRemoveTrackWithNative; },\n/* harmony export */   shimGetDisplayMedia: function() { return /* reexport safe */ _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__.shimGetDisplayMedia; },\n/* harmony export */   shimGetSendersWithDtmf: function() { return /* binding */ shimGetSendersWithDtmf; },\n/* harmony export */   shimGetStats: function() { return /* binding */ shimGetStats; },\n/* harmony export */   shimGetUserMedia: function() { return /* reexport safe */ _getusermedia__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia; },\n/* harmony export */   shimMediaStream: function() { return /* binding */ shimMediaStream; },\n/* harmony export */   shimOnTrack: function() { return /* binding */ shimOnTrack; },\n/* harmony export */   shimPeerConnection: function() { return /* binding */ shimPeerConnection; },\n/* harmony export */   shimSenderReceiverGetStats: function() { return /* binding */ shimSenderReceiverGetStats; }\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/utils.js\");\n/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js\");\n/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\n\nfunction shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nfunction shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nfunction shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nfunction shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        _utils_js__WEBPACK_IMPORTED_MODULE_0__.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        _utils_js__WEBPACK_IMPORTED_MODULE_0__.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nfunction shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nfunction shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n    .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n        this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n        externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n        internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n        .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n    window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n    'localDescription', {\n      get() {\n        const description = origLocalDescription.get.apply(this);\n        if (description.type === '') {\n          return description;\n        }\n        return replaceInternalStreamId(this, description);\n      }\n    });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n          'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nfunction shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nfunction fixNegotiationNeeded(window, browserDetails) {\n  _utils_js__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2Nocm9tZV9zaGltLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhO0FBQ3dCOztBQUVXO0FBQ007O0FBRS9DO0FBQ1A7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCLDRCQUE0QjtBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSSw4REFBNkI7QUFDakM7QUFDQTtBQUNBLFdBQVcsUUFBUSxzQkFBc0I7QUFDekM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBaUI7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSw4REFBNkI7QUFDakM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtEQUFpQjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDTztBQUNQLEVBQUUsOERBQTZCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9jaHJvbWUvY2hyb21lX3NoaW0uanM/M2YzMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuXG5leHBvcnQge3NoaW1HZXRVc2VyTWVkaWF9IGZyb20gJy4vZ2V0dXNlcm1lZGlhJztcbmV4cG9ydCB7c2hpbUdldERpc3BsYXlNZWRpYX0gZnJvbSAnLi9nZXRkaXNwbGF5bWVkaWEnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbU1lZGlhU3RyZWFtKHdpbmRvdykge1xuICB3aW5kb3cuTWVkaWFTdHJlYW0gPSB3aW5kb3cuTWVkaWFTdHJlYW0gfHwgd2luZG93LndlYmtpdE1lZGlhU3RyZWFtO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbU9uVHJhY2sod2luZG93KSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgISgnb250cmFjaycgaW5cbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdvbnRyYWNrJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb250cmFjaztcbiAgICAgIH0sXG4gICAgICBzZXQoZikge1xuICAgICAgICBpZiAodGhpcy5fb250cmFjaykge1xuICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb250cmFjayA9IGYpO1xuICAgICAgfSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24gPVxuICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb24gPVxuICAgICAgZnVuY3Rpb24gc2V0UmVtb3RlRGVzY3JpcHRpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5fb250cmFja3BvbHkpIHtcbiAgICAgICAgICB0aGlzLl9vbnRyYWNrcG9seSA9IChlKSA9PiB7XG4gICAgICAgICAgICAvLyBvbmFkZHN0cmVhbSBkb2VzIG5vdCBmaXJlIHdoZW4gYSB0cmFjayBpcyBhZGRlZCB0byBhbiBleGlzdGluZ1xuICAgICAgICAgICAgLy8gc3RyZWFtLiBCdXQgc3RyZWFtLm9uYWRkdHJhY2sgaXMgaW1wbGVtZW50ZWQgc28gd2UgdXNlIHRoYXQuXG4gICAgICAgICAgICBlLnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKCdhZGR0cmFjaycsIHRlID0+IHtcbiAgICAgICAgICAgICAgbGV0IHJlY2VpdmVyO1xuICAgICAgICAgICAgICBpZiAod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnMpIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHRoaXMuZ2V0UmVjZWl2ZXJzKClcbiAgICAgICAgICAgICAgICAgIC5maW5kKHIgPT4gci50cmFjayAmJiByLnRyYWNrLmlkID09PSB0ZS50cmFjay5pZCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB7dHJhY2s6IHRlLnRyYWNrfTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCd0cmFjaycpO1xuICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRlLnRyYWNrO1xuICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgICAgICAgICAgICBldmVudC50cmFuc2NlaXZlciA9IHtyZWNlaXZlcn07XG4gICAgICAgICAgICAgIGV2ZW50LnN0cmVhbXMgPSBbZS5zdHJlYW1dO1xuICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgICAgICAgbGV0IHJlY2VpdmVyO1xuICAgICAgICAgICAgICBpZiAod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnMpIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHRoaXMuZ2V0UmVjZWl2ZXJzKClcbiAgICAgICAgICAgICAgICAgIC5maW5kKHIgPT4gci50cmFjayAmJiByLnRyYWNrLmlkID09PSB0cmFjay5pZCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB7dHJhY2t9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCd0cmFjaycpO1xuICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRyYWNrO1xuICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgICAgICAgICAgICBldmVudC50cmFuc2NlaXZlciA9IHtyZWNlaXZlcn07XG4gICAgICAgICAgICAgIGV2ZW50LnN0cmVhbXMgPSBbZS5zdHJlYW1dO1xuICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHRoaXMuX29udHJhY2twb2x5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3JpZ1NldFJlbW90ZURlc2NyaXB0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIGV2ZW4gaWYgUlRDUnRwVHJhbnNjZWl2ZXIgaXMgaW4gd2luZG93LCBpdCBpcyBvbmx5IHVzZWQgYW5kXG4gICAgLy8gZW1pdHRlZCBpbiB1bmlmaWVkLXBsYW4uIFVuZm9ydHVuYXRlbHkgdGhpcyBtZWFucyB3ZSBuZWVkXG4gICAgLy8gdG8gdW5jb25kaXRpb25hbGx5IHdyYXAgdGhlIGV2ZW50LlxuICAgIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ3RyYWNrJywgZSA9PiB7XG4gICAgICBpZiAoIWUudHJhbnNjZWl2ZXIpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsICd0cmFuc2NlaXZlcicsXG4gICAgICAgICAge3ZhbHVlOiB7cmVjZWl2ZXI6IGUucmVjZWl2ZXJ9fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldFNlbmRlcnNXaXRoRHRtZih3aW5kb3cpIHtcbiAgLy8gT3ZlcnJpZGVzIGFkZFRyYWNrL3JlbW92ZVRyYWNrLCBkZXBlbmRzIG9uIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrLlxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICAhKCdnZXRTZW5kZXJzJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSAmJlxuICAgICAgJ2NyZWF0ZURUTUZTZW5kZXInIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpIHtcbiAgICBjb25zdCBzaGltU2VuZGVyV2l0aER0bWYgPSBmdW5jdGlvbihwYywgdHJhY2spIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRyYWNrLFxuICAgICAgICBnZXQgZHRtZigpIHtcbiAgICAgICAgICBpZiAodGhpcy5fZHRtZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICB0aGlzLl9kdG1mID0gcGMuY3JlYXRlRFRNRlNlbmRlcih0cmFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLl9kdG1mID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2R0bWY7XG4gICAgICAgIH0sXG4gICAgICAgIF9wYzogcGNcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8vIGF1Z21lbnQgYWRkVHJhY2sgd2hlbiBnZXRTZW5kZXJzIGlzIG5vdCBhdmFpbGFibGUuXG4gICAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMpIHtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyA9IGZ1bmN0aW9uIGdldFNlbmRlcnMoKSB7XG4gICAgICAgIHRoaXMuX3NlbmRlcnMgPSB0aGlzLl9zZW5kZXJzIHx8IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZGVycy5zbGljZSgpOyAvLyByZXR1cm4gYSBjb3B5IG9mIHRoZSBpbnRlcm5hbCBzdGF0ZS5cbiAgICAgIH07XG4gICAgICBjb25zdCBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayA9XG4gICAgICAgIGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pIHtcbiAgICAgICAgICBsZXQgc2VuZGVyID0gb3JpZ0FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgaWYgKCFzZW5kZXIpIHtcbiAgICAgICAgICAgIHNlbmRlciA9IHNoaW1TZW5kZXJXaXRoRHRtZih0aGlzLCB0cmFjayk7XG4gICAgICAgICAgICB0aGlzLl9zZW5kZXJzLnB1c2goc2VuZGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHNlbmRlcjtcbiAgICAgICAgfTtcblxuICAgICAgY29uc3Qgb3JpZ1JlbW92ZVRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaztcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2sgPVxuICAgICAgICBmdW5jdGlvbiByZW1vdmVUcmFjayhzZW5kZXIpIHtcbiAgICAgICAgICBvcmlnUmVtb3ZlVHJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICBjb25zdCBpZHggPSB0aGlzLl9zZW5kZXJzLmluZGV4T2Yoc2VuZGVyKTtcbiAgICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5fc2VuZGVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IG9yaWdBZGRTdHJlYW0gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbTtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uIGFkZFN0cmVhbShzdHJlYW0pIHtcbiAgICAgIHRoaXMuX3NlbmRlcnMgPSB0aGlzLl9zZW5kZXJzIHx8IFtdO1xuICAgICAgb3JpZ0FkZFN0cmVhbS5hcHBseSh0aGlzLCBbc3RyZWFtXSk7XG4gICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICAgIHRoaXMuX3NlbmRlcnMucHVzaChzaGltU2VuZGVyV2l0aER0bWYodGhpcywgdHJhY2spKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPVxuICAgICAgZnVuY3Rpb24gcmVtb3ZlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICB0aGlzLl9zZW5kZXJzID0gdGhpcy5fc2VuZGVycyB8fCBbXTtcbiAgICAgICAgb3JpZ1JlbW92ZVN0cmVhbS5hcHBseSh0aGlzLCBbc3RyZWFtXSk7XG5cbiAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgICAgIGNvbnN0IHNlbmRlciA9IHRoaXMuX3NlbmRlcnMuZmluZChzID0+IHMudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgICAgICBpZiAoc2VuZGVyKSB7IC8vIHJlbW92ZSBzZW5kZXJcbiAgICAgICAgICAgIHRoaXMuX3NlbmRlcnMuc3BsaWNlKHRoaXMuX3NlbmRlcnMuaW5kZXhPZihzZW5kZXIpLCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgICAgICAgICAnZ2V0U2VuZGVycycgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSAmJlxuICAgICAgICAgICAgICdjcmVhdGVEVE1GU2VuZGVyJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlICYmXG4gICAgICAgICAgICAgd2luZG93LlJUQ1J0cFNlbmRlciAmJlxuICAgICAgICAgICAgICEoJ2R0bWYnIGluIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlKSkge1xuICAgIGNvbnN0IG9yaWdHZXRTZW5kZXJzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycyA9IGZ1bmN0aW9uIGdldFNlbmRlcnMoKSB7XG4gICAgICBjb25zdCBzZW5kZXJzID0gb3JpZ0dldFNlbmRlcnMuYXBwbHkodGhpcywgW10pO1xuICAgICAgc2VuZGVycy5mb3JFYWNoKHNlbmRlciA9PiBzZW5kZXIuX3BjID0gdGhpcyk7XG4gICAgICByZXR1cm4gc2VuZGVycztcbiAgICB9O1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLCAnZHRtZicsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2R0bWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICh0aGlzLnRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgIHRoaXMuX2R0bWYgPSB0aGlzLl9wYy5jcmVhdGVEVE1GU2VuZGVyKHRoaXMudHJhY2spO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9kdG1mID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2R0bWY7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXRTdGF0cyh3aW5kb3cpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBvcmlnR2V0U3RhdHMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgY29uc3QgW3NlbGVjdG9yLCBvblN1Y2MsIG9uRXJyXSA9IGFyZ3VtZW50cztcblxuICAgIC8vIElmIHNlbGVjdG9yIGlzIGEgZnVuY3Rpb24gdGhlbiB3ZSBhcmUgaW4gdGhlIG9sZCBzdHlsZSBzdGF0cyBzbyBqdXN0XG4gICAgLy8gcGFzcyBiYWNrIHRoZSBvcmlnaW5hbCBnZXRTdGF0cyBmb3JtYXQgdG8gYXZvaWQgYnJlYWtpbmcgb2xkIHVzZXJzLlxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB0eXBlb2Ygc2VsZWN0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICAvLyBXaGVuIHNwZWMtc3R5bGUgZ2V0U3RhdHMgaXMgc3VwcG9ydGVkLCByZXR1cm4gdGhvc2Ugd2hlbiBjYWxsZWQgd2l0aFxuICAgIC8vIGVpdGhlciBubyBhcmd1bWVudHMgb3IgdGhlIHNlbGVjdG9yIGFyZ3VtZW50IGlzIG51bGwuXG4gICAgaWYgKG9yaWdHZXRTdGF0cy5sZW5ndGggPT09IDAgJiYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgdHlwZW9mIHNlbGVjdG9yICE9PSAnZnVuY3Rpb24nKSkge1xuICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbXSk7XG4gICAgfVxuXG4gICAgY29uc3QgZml4Q2hyb21lU3RhdHNfID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGNvbnN0IHN0YW5kYXJkUmVwb3J0ID0ge307XG4gICAgICBjb25zdCByZXBvcnRzID0gcmVzcG9uc2UucmVzdWx0KCk7XG4gICAgICByZXBvcnRzLmZvckVhY2gocmVwb3J0ID0+IHtcbiAgICAgICAgY29uc3Qgc3RhbmRhcmRTdGF0cyA9IHtcbiAgICAgICAgICBpZDogcmVwb3J0LmlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogcmVwb3J0LnRpbWVzdGFtcCxcbiAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICBsb2NhbGNhbmRpZGF0ZTogJ2xvY2FsLWNhbmRpZGF0ZScsXG4gICAgICAgICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJ1xuICAgICAgICAgIH1bcmVwb3J0LnR5cGVdIHx8IHJlcG9ydC50eXBlXG4gICAgICAgIH07XG4gICAgICAgIHJlcG9ydC5uYW1lcygpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgICAgc3RhbmRhcmRTdGF0c1tuYW1lXSA9IHJlcG9ydC5zdGF0KG5hbWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgc3RhbmRhcmRSZXBvcnRbc3RhbmRhcmRTdGF0cy5pZF0gPSBzdGFuZGFyZFN0YXRzO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzdGFuZGFyZFJlcG9ydDtcbiAgICB9O1xuXG4gICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydFxuICAgIGNvbnN0IG1ha2VNYXBTdGF0cyA9IGZ1bmN0aW9uKHN0YXRzKSB7XG4gICAgICByZXR1cm4gbmV3IE1hcChPYmplY3Qua2V5cyhzdGF0cykubWFwKGtleSA9PiBba2V5LCBzdGF0c1trZXldXSkpO1xuICAgIH07XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICBjb25zdCBzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyXyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIG9uU3VjYyhtYWtlTWFwU3RhdHMoZml4Q2hyb21lU3RhdHNfKHJlc3BvbnNlKSkpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbc3VjY2Vzc0NhbGxiYWNrV3JhcHBlcl8sXG4gICAgICAgIHNlbGVjdG9yXSk7XG4gICAgfVxuXG4gICAgLy8gcHJvbWlzZS1zdXBwb3J0XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbXG4gICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgcmVzb2x2ZShtYWtlTWFwU3RhdHMoZml4Q2hyb21lU3RhdHNfKHJlc3BvbnNlKSkpO1xuICAgICAgICB9LCByZWplY3RdKTtcbiAgICB9KS50aGVuKG9uU3VjYywgb25FcnIpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVNlbmRlclJlY2VpdmVyR2V0U3RhdHMod2luZG93KSB7XG4gIGlmICghKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgd2luZG93LlJUQ1J0cFNlbmRlciAmJiB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gc2hpbSBzZW5kZXIgc3RhdHMuXG4gIGlmICghKCdnZXRTdGF0cycgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKSB7XG4gICAgY29uc3Qgb3JpZ0dldFNlbmRlcnMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM7XG4gICAgaWYgKG9yaWdHZXRTZW5kZXJzKSB7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbiBnZXRTZW5kZXJzKCkge1xuICAgICAgICBjb25zdCBzZW5kZXJzID0gb3JpZ0dldFNlbmRlcnMuYXBwbHkodGhpcywgW10pO1xuICAgICAgICBzZW5kZXJzLmZvckVhY2goc2VuZGVyID0+IHNlbmRlci5fcGMgPSB0aGlzKTtcbiAgICAgICAgcmV0dXJuIHNlbmRlcnM7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IG9yaWdBZGRUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7XG4gICAgaWYgKG9yaWdBZGRUcmFjaykge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayA9IGZ1bmN0aW9uIGFkZFRyYWNrKCkge1xuICAgICAgICBjb25zdCBzZW5kZXIgPSBvcmlnQWRkVHJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgc2VuZGVyLl9wYyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBzZW5kZXI7XG4gICAgICB9O1xuICAgIH1cbiAgICB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uIGdldFN0YXRzKCkge1xuICAgICAgY29uc3Qgc2VuZGVyID0gdGhpcztcbiAgICAgIHJldHVybiB0aGlzLl9wYy5nZXRTdGF0cygpLnRoZW4ocmVzdWx0ID0+XG4gICAgICAgIC8qIE5vdGU6IHRoaXMgd2lsbCBpbmNsdWRlIHN0YXRzIG9mIGFsbCBzZW5kZXJzIHRoYXRcbiAgICAgICAgICogICBzZW5kIGEgdHJhY2sgd2l0aCB0aGUgc2FtZSBpZCBhcyBzZW5kZXIudHJhY2sgYXNcbiAgICAgICAgICogICBpdCBpcyBub3QgcG9zc2libGUgdG8gaWRlbnRpZnkgdGhlIFJUQ1J0cFNlbmRlci5cbiAgICAgICAgICovXG4gICAgICAgIHV0aWxzLmZpbHRlclN0YXRzKHJlc3VsdCwgc2VuZGVyLnRyYWNrLCB0cnVlKSk7XG4gICAgfTtcbiAgfVxuXG4gIC8vIHNoaW0gcmVjZWl2ZXIgc3RhdHMuXG4gIGlmICghKCdnZXRTdGF0cycgaW4gd2luZG93LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSkpIHtcbiAgICBjb25zdCBvcmlnR2V0UmVjZWl2ZXJzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM7XG4gICAgaWYgKG9yaWdHZXRSZWNlaXZlcnMpIHtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzID1cbiAgICAgICAgZnVuY3Rpb24gZ2V0UmVjZWl2ZXJzKCkge1xuICAgICAgICAgIGNvbnN0IHJlY2VpdmVycyA9IG9yaWdHZXRSZWNlaXZlcnMuYXBwbHkodGhpcywgW10pO1xuICAgICAgICAgIHJlY2VpdmVycy5mb3JFYWNoKHJlY2VpdmVyID0+IHJlY2VpdmVyLl9wYyA9IHRoaXMpO1xuICAgICAgICAgIHJldHVybiByZWNlaXZlcnM7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ3RyYWNrJywgZSA9PiB7XG4gICAgICBlLnJlY2VpdmVyLl9wYyA9IGUuc3JjRWxlbWVudDtcbiAgICAgIHJldHVybiBlO1xuICAgIH0pO1xuICAgIHdpbmRvdy5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbiBnZXRTdGF0cygpIHtcbiAgICAgIGNvbnN0IHJlY2VpdmVyID0gdGhpcztcbiAgICAgIHJldHVybiB0aGlzLl9wYy5nZXRTdGF0cygpLnRoZW4ocmVzdWx0ID0+XG4gICAgICAgIHV0aWxzLmZpbHRlclN0YXRzKHJlc3VsdCwgcmVjZWl2ZXIudHJhY2ssIGZhbHNlKSk7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghKCdnZXRTdGF0cycgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUgJiZcbiAgICAgICdnZXRTdGF0cycgaW4gd2luZG93LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBzaGltIFJUQ1BlZXJDb25uZWN0aW9uLmdldFN0YXRzKHRyYWNrKS5cbiAgY29uc3Qgb3JpZ0dldFN0YXRzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cztcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cyA9IGZ1bmN0aW9uIGdldFN0YXRzKCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCAmJlxuICAgICAgICBhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiB3aW5kb3cuTWVkaWFTdHJlYW1UcmFjaykge1xuICAgICAgY29uc3QgdHJhY2sgPSBhcmd1bWVudHNbMF07XG4gICAgICBsZXQgc2VuZGVyO1xuICAgICAgbGV0IHJlY2VpdmVyO1xuICAgICAgbGV0IGVycjtcbiAgICAgIHRoaXMuZ2V0U2VuZGVycygpLmZvckVhY2gocyA9PiB7XG4gICAgICAgIGlmIChzLnRyYWNrID09PSB0cmFjaykge1xuICAgICAgICAgIGlmIChzZW5kZXIpIHtcbiAgICAgICAgICAgIGVyciA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbmRlciA9IHM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRoaXMuZ2V0UmVjZWl2ZXJzKCkuZm9yRWFjaChyID0+IHtcbiAgICAgICAgaWYgKHIudHJhY2sgPT09IHRyYWNrKSB7XG4gICAgICAgICAgaWYgKHJlY2VpdmVyKSB7XG4gICAgICAgICAgICBlcnIgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWNlaXZlciA9IHI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByLnRyYWNrID09PSB0cmFjaztcbiAgICAgIH0pO1xuICAgICAgaWYgKGVyciB8fCAoc2VuZGVyICYmIHJlY2VpdmVyKSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IERPTUV4Y2VwdGlvbihcbiAgICAgICAgICAnVGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgc2VuZGVyIG9yIHJlY2VpdmVyIGZvciB0aGUgdHJhY2suJyxcbiAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJykpO1xuICAgICAgfSBlbHNlIGlmIChzZW5kZXIpIHtcbiAgICAgICAgcmV0dXJuIHNlbmRlci5nZXRTdGF0cygpO1xuICAgICAgfSBlbHNlIGlmIChyZWNlaXZlcikge1xuICAgICAgICByZXR1cm4gcmVjZWl2ZXIuZ2V0U3RhdHMoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRE9NRXhjZXB0aW9uKFxuICAgICAgICAnVGhlcmUgaXMgbm8gc2VuZGVyIG9yIHJlY2VpdmVyIGZvciB0aGUgdHJhY2suJyxcbiAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpKTtcbiAgICB9XG4gICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2tXaXRoTmF0aXZlKHdpbmRvdykge1xuICAvLyBzaGltIGFkZFRyYWNrL3JlbW92ZVRyYWNrIHdpdGggbmF0aXZlIHZhcmlhbnRzIGluIG9yZGVyIHRvIG1ha2VcbiAgLy8gdGhlIGludGVyYWN0aW9ucyB3aXRoIGxlZ2FjeSBnZXRMb2NhbFN0cmVhbXMgYmVoYXZlIGFzIGluIG90aGVyIGJyb3dzZXJzLlxuICAvLyBLZWVwcyBhIG1hcHBpbmcgc3RyZWFtLmlkID0+IFtzdHJlYW0sIHJ0cHNlbmRlcnMuLi5dXG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zID1cbiAgICBmdW5jdGlvbiBnZXRMb2NhbFN0cmVhbXMoKSB7XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zKVxuICAgICAgICAubWFwKHN0cmVhbUlkID0+IHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdWzBdKTtcbiAgICB9O1xuXG4gIGNvbnN0IG9yaWdBZGRUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPVxuICAgIGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pIHtcbiAgICAgIGlmICghc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBvcmlnQWRkVHJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMgPSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zIHx8IHt9O1xuXG4gICAgICBjb25zdCBzZW5kZXIgPSBvcmlnQWRkVHJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIGlmICghdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW0uaWRdKSB7XG4gICAgICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXSA9IFtzdHJlYW0sIHNlbmRlcl07XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXS5pbmRleE9mKHNlbmRlcikgPT09IC0xKSB7XG4gICAgICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXS5wdXNoKHNlbmRlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2VuZGVyO1xuICAgIH07XG5cbiAgY29uc3Qgb3JpZ0FkZFN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uIGFkZFN0cmVhbShzdHJlYW0pIHtcbiAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcblxuICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgIGNvbnN0IGFscmVhZHlFeGlzdHMgPSB0aGlzLmdldFNlbmRlcnMoKS5maW5kKHMgPT4gcy50cmFjayA9PT0gdHJhY2spO1xuICAgICAgaWYgKGFscmVhZHlFeGlzdHMpIHtcbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignVHJhY2sgYWxyZWFkeSBleGlzdHMuJyxcbiAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgZXhpc3RpbmdTZW5kZXJzID0gdGhpcy5nZXRTZW5kZXJzKCk7XG4gICAgb3JpZ0FkZFN0cmVhbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGNvbnN0IG5ld1NlbmRlcnMgPSB0aGlzLmdldFNlbmRlcnMoKVxuICAgICAgLmZpbHRlcihuZXdTZW5kZXIgPT4gZXhpc3RpbmdTZW5kZXJzLmluZGV4T2YobmV3U2VuZGVyKSA9PT0gLTEpO1xuICAgIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtLmlkXSA9IFtzdHJlYW1dLmNvbmNhdChuZXdTZW5kZXJzKTtcbiAgfTtcblxuICBjb25zdCBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID1cbiAgICBmdW5jdGlvbiByZW1vdmVTdHJlYW0oc3RyZWFtKSB7XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcbiAgICAgIGRlbGV0ZSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbS5pZF07XG4gICAgICByZXR1cm4gb3JpZ1JlbW92ZVN0cmVhbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgY29uc3Qgb3JpZ1JlbW92ZVRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaztcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjayA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlVHJhY2soc2VuZGVyKSB7XG4gICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcyB8fCB7fTtcbiAgICAgIGlmIChzZW5kZXIpIHtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcykuZm9yRWFjaChzdHJlYW1JZCA9PiB7XG4gICAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tzdHJlYW1JZF0uaW5kZXhPZihzZW5kZXIpO1xuICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3N0cmVhbUlkXS5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbc3RyZWFtSWRdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3JpZ1JlbW92ZVRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gc2hpbSBhZGRUcmFjayBhbmQgcmVtb3ZlVHJhY2suXG4gIGlmICh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrICYmXG4gICAgICBicm93c2VyRGV0YWlscy52ZXJzaW9uID49IDY1KSB7XG4gICAgcmV0dXJuIHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZSh3aW5kb3cpO1xuICB9XG5cbiAgLy8gYWxzbyBzaGltIHBjLmdldExvY2FsU3RyZWFtcyB3aGVuIGFkZFRyYWNrIGlzIHNoaW1tZWRcbiAgLy8gdG8gcmV0dXJuIHRoZSBvcmlnaW5hbCBzdHJlYW1zLlxuICBjb25zdCBvcmlnR2V0TG9jYWxTdHJlYW1zID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVxuICAgIC5nZXRMb2NhbFN0cmVhbXM7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zID1cbiAgICBmdW5jdGlvbiBnZXRMb2NhbFN0cmVhbXMoKSB7XG4gICAgICBjb25zdCBuYXRpdmVTdHJlYW1zID0gb3JpZ0dldExvY2FsU3RyZWFtcy5hcHBseSh0aGlzKTtcbiAgICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zID0gdGhpcy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG4gICAgICByZXR1cm4gbmF0aXZlU3RyZWFtcy5tYXAoc3RyZWFtID0+IHRoaXMuX3JldmVyc2VTdHJlYW1zW3N0cmVhbS5pZF0pO1xuICAgIH07XG5cbiAgY29uc3Qgb3JpZ0FkZFN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uIGFkZFN0cmVhbShzdHJlYW0pIHtcbiAgICB0aGlzLl9zdHJlYW1zID0gdGhpcy5fc3RyZWFtcyB8fCB7fTtcbiAgICB0aGlzLl9yZXZlcnNlU3RyZWFtcyA9IHRoaXMuX3JldmVyc2VTdHJlYW1zIHx8IHt9O1xuXG4gICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4ge1xuICAgICAgY29uc3QgYWxyZWFkeUV4aXN0cyA9IHRoaXMuZ2V0U2VuZGVycygpLmZpbmQocyA9PiBzLnRyYWNrID09PSB0cmFjayk7XG4gICAgICBpZiAoYWxyZWFkeUV4aXN0cykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdUcmFjayBhbHJlYWR5IGV4aXN0cy4nLFxuICAgICAgICAgICdJbnZhbGlkQWNjZXNzRXJyb3InKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBBZGQgaWRlbnRpdHkgbWFwcGluZyBmb3IgY29uc2lzdGVuY3kgd2l0aCBhZGRUcmFjay5cbiAgICAvLyBVbmxlc3MgdGhpcyBpcyBiZWluZyB1c2VkIHdpdGggYSBzdHJlYW0gZnJvbSBhZGRUcmFjay5cbiAgICBpZiAoIXRoaXMuX3JldmVyc2VTdHJlYW1zW3N0cmVhbS5pZF0pIHtcbiAgICAgIGNvbnN0IG5ld1N0cmVhbSA9IG5ldyB3aW5kb3cuTWVkaWFTdHJlYW0oc3RyZWFtLmdldFRyYWNrcygpKTtcbiAgICAgIHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXSA9IG5ld1N0cmVhbTtcbiAgICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zW25ld1N0cmVhbS5pZF0gPSBzdHJlYW07XG4gICAgICBzdHJlYW0gPSBuZXdTdHJlYW07XG4gICAgfVxuICAgIG9yaWdBZGRTdHJlYW0uYXBwbHkodGhpcywgW3N0cmVhbV0pO1xuICB9O1xuXG4gIGNvbnN0IG9yaWdSZW1vdmVTdHJlYW0gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPVxuICAgIGZ1bmN0aW9uIHJlbW92ZVN0cmVhbShzdHJlYW0pIHtcbiAgICAgIHRoaXMuX3N0cmVhbXMgPSB0aGlzLl9zdHJlYW1zIHx8IHt9O1xuICAgICAgdGhpcy5fcmV2ZXJzZVN0cmVhbXMgPSB0aGlzLl9yZXZlcnNlU3RyZWFtcyB8fCB7fTtcblxuICAgICAgb3JpZ1JlbW92ZVN0cmVhbS5hcHBseSh0aGlzLCBbKHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXSB8fCBzdHJlYW0pXSk7XG4gICAgICBkZWxldGUgdGhpcy5fcmV2ZXJzZVN0cmVhbXNbKHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXSA/XG4gICAgICAgIHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXS5pZCA6IHN0cmVhbS5pZCldO1xuICAgICAgZGVsZXRlIHRoaXMuX3N0cmVhbXNbc3RyZWFtLmlkXTtcbiAgICB9O1xuXG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPVxuICAgIGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pIHtcbiAgICAgIGlmICh0aGlzLnNpZ25hbGluZ1N0YXRlID09PSAnY2xvc2VkJykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFxuICAgICAgICAgICdUaGUgUlRDUGVlckNvbm5lY3Rpb25cXCdzIHNpZ25hbGluZ1N0YXRlIGlzIFxcJ2Nsb3NlZFxcJy4nLFxuICAgICAgICAgICdJbnZhbGlkU3RhdGVFcnJvcicpO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3RyZWFtcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIGlmIChzdHJlYW1zLmxlbmd0aCAhPT0gMSB8fFxuICAgICAgICAgICFzdHJlYW1zWzBdLmdldFRyYWNrcygpLmZpbmQodCA9PiB0ID09PSB0cmFjaykpIHtcbiAgICAgICAgLy8gdGhpcyBpcyBub3QgZnVsbHkgY29ycmVjdCBidXQgYWxsIHdlIGNhbiBtYW5hZ2Ugd2l0aG91dFxuICAgICAgICAvLyBbW2Fzc29jaWF0ZWQgTWVkaWFTdHJlYW1zXV0gaW50ZXJuYWwgc2xvdC5cbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcbiAgICAgICAgICAnVGhlIGFkYXB0ZXIuanMgYWRkVHJhY2sgcG9seWZpbGwgb25seSBzdXBwb3J0cyBhIHNpbmdsZSAnICtcbiAgICAgICAgICAnIHN0cmVhbSB3aGljaCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCB0cmFjay4nLFxuICAgICAgICAgICdOb3RTdXBwb3J0ZWRFcnJvcicpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhbHJlYWR5RXhpc3RzID0gdGhpcy5nZXRTZW5kZXJzKCkuZmluZChzID0+IHMudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicsXG4gICAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zdHJlYW1zID0gdGhpcy5fc3RyZWFtcyB8fCB7fTtcbiAgICAgIHRoaXMuX3JldmVyc2VTdHJlYW1zID0gdGhpcy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG4gICAgICBjb25zdCBvbGRTdHJlYW0gPSB0aGlzLl9zdHJlYW1zW3N0cmVhbS5pZF07XG4gICAgICBpZiAob2xkU3RyZWFtKSB7XG4gICAgICAgIC8vIHRoaXMgaXMgdXNpbmcgb2RkIENocm9tZSBiZWhhdmlvdXIsIHVzZSB3aXRoIGNhdXRpb246XG4gICAgICAgIC8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD03ODE1XG4gICAgICAgIC8vIE5vdGU6IHdlIHJlbHkgb24gdGhlIGhpZ2gtbGV2ZWwgYWRkVHJhY2svZHRtZiBzaGltIHRvXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgc2VuZGVyIHdpdGggYSBkdG1mIHNlbmRlci5cbiAgICAgICAgb2xkU3RyZWFtLmFkZFRyYWNrKHRyYWNrKTtcblxuICAgICAgICAvLyBUcmlnZ2VyIE9OTiBhc3luYy5cbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbmVnb3RpYXRpb25uZWVkZWQnKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbmV3U3RyZWFtID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbShbdHJhY2tdKTtcbiAgICAgICAgdGhpcy5fc3RyZWFtc1tzdHJlYW0uaWRdID0gbmV3U3RyZWFtO1xuICAgICAgICB0aGlzLl9yZXZlcnNlU3RyZWFtc1tuZXdTdHJlYW0uaWRdID0gc3RyZWFtO1xuICAgICAgICB0aGlzLmFkZFN0cmVhbShuZXdTdHJlYW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VuZGVycygpLmZpbmQocyA9PiBzLnRyYWNrID09PSB0cmFjayk7XG4gICAgfTtcblxuICAvLyByZXBsYWNlIHRoZSBpbnRlcm5hbCBzdHJlYW0gaWQgd2l0aCB0aGUgZXh0ZXJuYWwgb25lIGFuZFxuICAvLyB2aWNlIHZlcnNhLlxuICBmdW5jdGlvbiByZXBsYWNlSW50ZXJuYWxTdHJlYW1JZChwYywgZGVzY3JpcHRpb24pIHtcbiAgICBsZXQgc2RwID0gZGVzY3JpcHRpb24uc2RwO1xuICAgIE9iamVjdC5rZXlzKHBjLl9yZXZlcnNlU3RyZWFtcyB8fCBbXSkuZm9yRWFjaChpbnRlcm5hbElkID0+IHtcbiAgICAgIGNvbnN0IGV4dGVybmFsU3RyZWFtID0gcGMuX3JldmVyc2VTdHJlYW1zW2ludGVybmFsSWRdO1xuICAgICAgY29uc3QgaW50ZXJuYWxTdHJlYW0gPSBwYy5fc3RyZWFtc1tleHRlcm5hbFN0cmVhbS5pZF07XG4gICAgICBzZHAgPSBzZHAucmVwbGFjZShuZXcgUmVnRXhwKGludGVybmFsU3RyZWFtLmlkLCAnZycpLFxuICAgICAgICBleHRlcm5hbFN0cmVhbS5pZCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oe1xuICAgICAgdHlwZTogZGVzY3JpcHRpb24udHlwZSxcbiAgICAgIHNkcFxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIHJlcGxhY2VFeHRlcm5hbFN0cmVhbUlkKHBjLCBkZXNjcmlwdGlvbikge1xuICAgIGxldCBzZHAgPSBkZXNjcmlwdGlvbi5zZHA7XG4gICAgT2JqZWN0LmtleXMocGMuX3JldmVyc2VTdHJlYW1zIHx8IFtdKS5mb3JFYWNoKGludGVybmFsSWQgPT4ge1xuICAgICAgY29uc3QgZXh0ZXJuYWxTdHJlYW0gPSBwYy5fcmV2ZXJzZVN0cmVhbXNbaW50ZXJuYWxJZF07XG4gICAgICBjb25zdCBpbnRlcm5hbFN0cmVhbSA9IHBjLl9zdHJlYW1zW2V4dGVybmFsU3RyZWFtLmlkXTtcbiAgICAgIHNkcCA9IHNkcC5yZXBsYWNlKG5ldyBSZWdFeHAoZXh0ZXJuYWxTdHJlYW0uaWQsICdnJyksXG4gICAgICAgIGludGVybmFsU3RyZWFtLmlkKTtcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7XG4gICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLFxuICAgICAgc2RwXG4gICAgfSk7XG4gIH1cbiAgWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIGNvbnN0IG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICBjb25zdCBtZXRob2RPYmogPSB7W21ldGhvZF0oKSB7XG4gICAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgY29uc3QgaXNMZWdhY3lDYWxsID0gYXJndW1lbnRzLmxlbmd0aCAmJlxuICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdmdW5jdGlvbic7XG4gICAgICBpZiAoaXNMZWdhY3lDYWxsKSB7XG4gICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgW1xuICAgICAgICAgIChkZXNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVzYyA9IHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHRoaXMsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGFyZ3NbMF0uYXBwbHkobnVsbCwgW2Rlc2NdKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChhcmdzWzFdKSB7XG4gICAgICAgICAgICAgIGFyZ3NbMV0uYXBwbHkobnVsbCwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCBhcmd1bWVudHNbMl1cbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgICAgLnRoZW4oZGVzY3JpcHRpb24gPT4gcmVwbGFjZUludGVybmFsU3RyZWFtSWQodGhpcywgZGVzY3JpcHRpb24pKTtcbiAgICB9fTtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBtZXRob2RPYmpbbWV0aG9kXTtcbiAgfSk7XG5cbiAgY29uc3Qgb3JpZ1NldExvY2FsRGVzY3JpcHRpb24gPVxuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb24gPVxuICAgIGZ1bmN0aW9uIHNldExvY2FsRGVzY3JpcHRpb24oKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGggfHwgIWFyZ3VtZW50c1swXS50eXBlKSB7XG4gICAgICAgIHJldHVybiBvcmlnU2V0TG9jYWxEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgYXJndW1lbnRzWzBdID0gcmVwbGFjZUV4dGVybmFsU3RyZWFtSWQodGhpcywgYXJndW1lbnRzWzBdKTtcbiAgICAgIHJldHVybiBvcmlnU2V0TG9jYWxEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgLy8gVE9ETzogbWFuZ2xlIGdldFN0YXRzOiBodHRwczovL3czYy5naXRodWIuaW8vd2VicnRjLXN0YXRzLyNkb20tcnRjbWVkaWFzdHJlYW1zdGF0cy1zdHJlYW1pZGVudGlmaWVyXG5cbiAgY29uc3Qgb3JpZ0xvY2FsRGVzY3JpcHRpb24gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFxuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdsb2NhbERlc2NyaXB0aW9uJyk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFxuICAgICdsb2NhbERlc2NyaXB0aW9uJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IG9yaWdMb2NhbERlc2NyaXB0aW9uLmdldC5hcHBseSh0aGlzKTtcbiAgICAgICAgaWYgKGRlc2NyaXB0aW9uLnR5cGUgPT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXBsYWNlSW50ZXJuYWxTdHJlYW1JZCh0aGlzLCBkZXNjcmlwdGlvbik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjayA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlVHJhY2soc2VuZGVyKSB7XG4gICAgICBpZiAodGhpcy5zaWduYWxpbmdTdGF0ZSA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcbiAgICAgICAgICAnVGhlIFJUQ1BlZXJDb25uZWN0aW9uXFwncyBzaWduYWxpbmdTdGF0ZSBpcyBcXCdjbG9zZWRcXCcuJyxcbiAgICAgICAgICAnSW52YWxpZFN0YXRlRXJyb3InKTtcbiAgICAgIH1cbiAgICAgIC8vIFdlIGNhbiBub3QgeWV0IGNoZWNrIGZvciBzZW5kZXIgaW5zdGFuY2VvZiBSVENSdHBTZW5kZXJcbiAgICAgIC8vIHNpbmNlIHdlIHNoaW0gUlRQU2VuZGVyLiBTbyB3ZSBjaGVjayBpZiBzZW5kZXIuX3BjIGlzIHNldC5cbiAgICAgIGlmICghc2VuZGVyLl9wYykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdBcmd1bWVudCAxIG9mIFJUQ1BlZXJDb25uZWN0aW9uLnJlbW92ZVRyYWNrICcgK1xuICAgICAgICAgICAgJ2RvZXMgbm90IGltcGxlbWVudCBpbnRlcmZhY2UgUlRDUnRwU2VuZGVyLicsICdUeXBlRXJyb3InKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzTG9jYWwgPSBzZW5kZXIuX3BjID09PSB0aGlzO1xuICAgICAgaWYgKCFpc0xvY2FsKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1NlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLicsXG4gICAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWFyY2ggZm9yIHRoZSBuYXRpdmUgc3RyZWFtIHRoZSBzZW5kZXJzIHRyYWNrIGJlbG9uZ3MgdG8uXG4gICAgICB0aGlzLl9zdHJlYW1zID0gdGhpcy5fc3RyZWFtcyB8fCB7fTtcbiAgICAgIGxldCBzdHJlYW07XG4gICAgICBPYmplY3Qua2V5cyh0aGlzLl9zdHJlYW1zKS5mb3JFYWNoKHN0cmVhbWlkID0+IHtcbiAgICAgICAgY29uc3QgaGFzVHJhY2sgPSB0aGlzLl9zdHJlYW1zW3N0cmVhbWlkXS5nZXRUcmFja3MoKVxuICAgICAgICAgIC5maW5kKHRyYWNrID0+IHNlbmRlci50cmFjayA9PT0gdHJhY2spO1xuICAgICAgICBpZiAoaGFzVHJhY2spIHtcbiAgICAgICAgICBzdHJlYW0gPSB0aGlzLl9zdHJlYW1zW3N0cmVhbWlkXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChzdHJlYW0pIHtcbiAgICAgICAgaWYgKHN0cmVhbS5nZXRUcmFja3MoKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAvLyBpZiB0aGlzIGlzIHRoZSBsYXN0IHRyYWNrIG9mIHRoZSBzdHJlYW0sIHJlbW92ZSB0aGUgc3RyZWFtLiBUaGlzXG4gICAgICAgICAgLy8gdGFrZXMgY2FyZSBvZiBhbnkgc2hpbW1lZCBfc2VuZGVycy5cbiAgICAgICAgICB0aGlzLnJlbW92ZVN0cmVhbSh0aGlzLl9yZXZlcnNlU3RyZWFtc1tzdHJlYW0uaWRdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyByZWx5aW5nIG9uIHRoZSBzYW1lIG9kZCBjaHJvbWUgYmVoYXZpb3VyIGFzIGFib3ZlLlxuICAgICAgICAgIHN0cmVhbS5yZW1vdmVUcmFjayhzZW5kZXIudHJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ25lZ290aWF0aW9ubmVlZGVkJykpO1xuICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltUGVlckNvbm5lY3Rpb24od2luZG93LCBicm93c2VyRGV0YWlscykge1xuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiB3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICAvLyB2ZXJ5IGJhc2ljIHN1cHBvcnQgZm9yIG9sZCB2ZXJzaW9ucy5cbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSB3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb247XG4gIH1cbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBzaGltIGltcGxpY2l0IGNyZWF0aW9uIG9mIFJUQ1Nlc3Npb25EZXNjcmlwdGlvbi9SVENJY2VDYW5kaWRhdGVcbiAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1Mykge1xuICAgIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsICdhZGRJY2VDYW5kaWRhdGUnXVxuICAgICAgLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgIGNvbnN0IG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICAgICAgY29uc3QgbWV0aG9kT2JqID0ge1ttZXRob2RdKCkge1xuICAgICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyAoKG1ldGhvZCA9PT0gJ2FkZEljZUNhbmRpZGF0ZScpID9cbiAgICAgICAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgOlxuICAgICAgICAgICAgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKTtcbiAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH19O1xuICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBtZXRob2RPYmpbbWV0aG9kXTtcbiAgICAgIH0pO1xuICB9XG59XG5cbi8vIEF0dGVtcHQgdG8gZml4IE9OTiBpbiBwbGFuLWIgbW9kZS5cbmV4cG9ydCBmdW5jdGlvbiBmaXhOZWdvdGlhdGlvbk5lZWRlZCh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ25lZ290aWF0aW9ubmVlZGVkJywgZSA9PiB7XG4gICAgY29uc3QgcGMgPSBlLnRhcmdldDtcbiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDcyIHx8IChwYy5nZXRDb25maWd1cmF0aW9uICYmXG4gICAgICAgIHBjLmdldENvbmZpZ3VyYXRpb24oKS5zZHBTZW1hbnRpY3MgPT09ICdwbGFuLWInKSkge1xuICAgICAgaWYgKHBjLnNpZ25hbGluZ1N0YXRlICE9PSAnc3RhYmxlJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlO1xuICB9KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js":
/*!**********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   shimGetDisplayMedia: function() { return /* binding */ shimGetDisplayMedia; }\n/* harmony export */ });\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\nfunction shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2dldGRpc3BsYXltZWRpYS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhO0FBQ047QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2dldGRpc3BsYXltZWRpYS5qcz9jNGU0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE4IFRoZSBhZGFwdGVyLmpzIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXREaXNwbGF5TWVkaWEod2luZG93LCBnZXRTb3VyY2VJZCkge1xuICBpZiAod2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMgJiZcbiAgICAnZ2V0RGlzcGxheU1lZGlhJyBpbiB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoISh3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gZ2V0U291cmNlSWQgaXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBwcm9taXNlIHJlc29sdmluZyB3aXRoXG4gIC8vIHRoZSBzb3VyY2VJZCBvZiB0aGUgc2NyZWVuL3dpbmRvdy90YWIgdG8gYmUgc2hhcmVkLlxuICBpZiAodHlwZW9mIGdldFNvdXJjZUlkICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc29sZS5lcnJvcignc2hpbUdldERpc3BsYXlNZWRpYTogZ2V0U291cmNlSWQgYXJndW1lbnQgaXMgbm90ICcgK1xuICAgICAgICAnYSBmdW5jdGlvbicpO1xuICAgIHJldHVybjtcbiAgfVxuICB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEgPVxuICAgIGZ1bmN0aW9uIGdldERpc3BsYXlNZWRpYShjb25zdHJhaW50cykge1xuICAgICAgcmV0dXJuIGdldFNvdXJjZUlkKGNvbnN0cmFpbnRzKVxuICAgICAgICAudGhlbihzb3VyY2VJZCA9PiB7XG4gICAgICAgICAgY29uc3Qgd2lkdGhTcGVjaWZpZWQgPSBjb25zdHJhaW50cy52aWRlbyAmJiBjb25zdHJhaW50cy52aWRlby53aWR0aDtcbiAgICAgICAgICBjb25zdCBoZWlnaHRTcGVjaWZpZWQgPSBjb25zdHJhaW50cy52aWRlbyAmJlxuICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8uaGVpZ2h0O1xuICAgICAgICAgIGNvbnN0IGZyYW1lUmF0ZVNwZWNpZmllZCA9IGNvbnN0cmFpbnRzLnZpZGVvICYmXG4gICAgICAgICAgICBjb25zdHJhaW50cy52aWRlby5mcmFtZVJhdGU7XG4gICAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSB7XG4gICAgICAgICAgICBtYW5kYXRvcnk6IHtcbiAgICAgICAgICAgICAgY2hyb21lTWVkaWFTb3VyY2U6ICdkZXNrdG9wJyxcbiAgICAgICAgICAgICAgY2hyb21lTWVkaWFTb3VyY2VJZDogc291cmNlSWQsXG4gICAgICAgICAgICAgIG1heEZyYW1lUmF0ZTogZnJhbWVSYXRlU3BlY2lmaWVkIHx8IDNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGlmICh3aWR0aFNwZWNpZmllZCkge1xuICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8ubWFuZGF0b3J5Lm1heFdpZHRoID0gd2lkdGhTcGVjaWZpZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChoZWlnaHRTcGVjaWZpZWQpIHtcbiAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLm1hbmRhdG9yeS5tYXhIZWlnaHQgPSBoZWlnaHRTcGVjaWZpZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js":
/*!*******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   shimGetUserMedia: function() { return /* binding */ shimGetUserMedia; }\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils.js */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\nconst logging = _utils_js__WEBPACK_IMPORTED_MODULE_0__.log;\n\nfunction shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n            .then(devices => {\n              devices = devices.filter(d => d.kind === 'videoinput');\n              let dev = devices.find(d => matches.some(match =>\n                d.label.toLowerCase().includes(match)));\n              if (!dev && devices.length && matches.includes('back')) {\n                dev = devices[devices.length - 1]; // more likely the back cam\n              }\n              if (dev) {\n                constraints.video.deviceId = face.exact\n                  ? {exact: dev.deviceId}\n                  : {ideal: dev.deviceId};\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2dldHVzZXJtZWRpYS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDYTtBQUN3QjtBQUNyQyxnQkFBZ0IsMENBQVM7O0FBRWxCO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsWUFBWTtBQUN2RTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2Nocm9tZS9nZXR1c2VybWVkaWEuanM/Zjc2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnLi4vdXRpbHMuanMnO1xuY29uc3QgbG9nZ2luZyA9IHV0aWxzLmxvZztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXRVc2VyTWVkaWEod2luZG93LCBicm93c2VyRGV0YWlscykge1xuICBjb25zdCBuYXZpZ2F0b3IgPSB3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvcjtcblxuICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBjb25zdHJhaW50c1RvQ2hyb21lXyA9IGZ1bmN0aW9uKGMpIHtcbiAgICBpZiAodHlwZW9mIGMgIT09ICdvYmplY3QnIHx8IGMubWFuZGF0b3J5IHx8IGMub3B0aW9uYWwpIHtcbiAgICAgIHJldHVybiBjO1xuICAgIH1cbiAgICBjb25zdCBjYyA9IHt9O1xuICAgIE9iamVjdC5rZXlzKGMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmIChrZXkgPT09ICdyZXF1aXJlJyB8fCBrZXkgPT09ICdhZHZhbmNlZCcgfHwga2V5ID09PSAnbWVkaWFTb3VyY2UnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHIgPSAodHlwZW9mIGNba2V5XSA9PT0gJ29iamVjdCcpID8gY1trZXldIDoge2lkZWFsOiBjW2tleV19O1xuICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgci5taW4gPSByLm1heCA9IHIuZXhhY3Q7XG4gICAgICB9XG4gICAgICBjb25zdCBvbGRuYW1lXyA9IGZ1bmN0aW9uKHByZWZpeCwgbmFtZSkge1xuICAgICAgICBpZiAocHJlZml4KSB7XG4gICAgICAgICAgcmV0dXJuIHByZWZpeCArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmFtZSA9PT0gJ2RldmljZUlkJykgPyAnc291cmNlSWQnIDogbmFtZTtcbiAgICAgIH07XG4gICAgICBpZiAoci5pZGVhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNjLm9wdGlvbmFsID0gY2Mub3B0aW9uYWwgfHwgW107XG4gICAgICAgIGxldCBvYyA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIHIuaWRlYWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgb2Nbb2xkbmFtZV8oJ21pbicsIGtleSldID0gci5pZGVhbDtcbiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTtcbiAgICAgICAgICBvYyA9IHt9O1xuICAgICAgICAgIG9jW29sZG5hbWVfKCdtYXgnLCBrZXkpXSA9IHIuaWRlYWw7XG4gICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2Nbb2xkbmFtZV8oJycsIGtleSldID0gci5pZGVhbDtcbiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgY2MubWFuZGF0b3J5ID0gY2MubWFuZGF0b3J5IHx8IHt9O1xuICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZV8oJycsIGtleSldID0gci5leGFjdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFsnbWluJywgJ21heCddLmZvckVhY2gobWl4ID0+IHtcbiAgICAgICAgICBpZiAoclttaXhdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNjLm1hbmRhdG9yeSA9IGNjLm1hbmRhdG9yeSB8fCB7fTtcbiAgICAgICAgICAgIGNjLm1hbmRhdG9yeVtvbGRuYW1lXyhtaXgsIGtleSldID0gclttaXhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGMuYWR2YW5jZWQpIHtcbiAgICAgIGNjLm9wdGlvbmFsID0gKGNjLm9wdGlvbmFsIHx8IFtdKS5jb25jYXQoYy5hZHZhbmNlZCk7XG4gICAgfVxuICAgIHJldHVybiBjYztcbiAgfTtcblxuICBjb25zdCBzaGltQ29uc3RyYWludHNfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIGZ1bmMpIHtcbiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA2MSkge1xuICAgICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpO1xuICAgIH1cbiAgICBjb25zdHJhaW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICBpZiAoY29uc3RyYWludHMgJiYgdHlwZW9mIGNvbnN0cmFpbnRzLmF1ZGlvID09PSAnb2JqZWN0Jykge1xuICAgICAgY29uc3QgcmVtYXAgPSBmdW5jdGlvbihvYmosIGEsIGIpIHtcbiAgICAgICAgaWYgKGEgaW4gb2JqICYmICEoYiBpbiBvYmopKSB7XG4gICAgICAgICAgb2JqW2JdID0gb2JqW2FdO1xuICAgICAgICAgIGRlbGV0ZSBvYmpbYV07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdHJhaW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICAgIHJlbWFwKGNvbnN0cmFpbnRzLmF1ZGlvLCAnYXV0b0dhaW5Db250cm9sJywgJ2dvb2dBdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgIHJlbWFwKGNvbnN0cmFpbnRzLmF1ZGlvLCAnbm9pc2VTdXBwcmVzc2lvbicsICdnb29nTm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy5hdWRpbyk7XG4gICAgfVxuICAgIGlmIChjb25zdHJhaW50cyAmJiB0eXBlb2YgY29uc3RyYWludHMudmlkZW8gPT09ICdvYmplY3QnKSB7XG4gICAgICAvLyBTaGltIGZhY2luZ01vZGUgZm9yIG1vYmlsZSAmIHN1cmZhY2UgcHJvLlxuICAgICAgbGV0IGZhY2UgPSBjb25zdHJhaW50cy52aWRlby5mYWNpbmdNb2RlO1xuICAgICAgZmFjZSA9IGZhY2UgJiYgKCh0eXBlb2YgZmFjZSA9PT0gJ29iamVjdCcpID8gZmFjZSA6IHtpZGVhbDogZmFjZX0pO1xuICAgICAgY29uc3QgZ2V0U3VwcG9ydGVkRmFjaW5nTW9kZUxpZXMgPSBicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNjY7XG5cbiAgICAgIGlmICgoZmFjZSAmJiAoZmFjZS5leGFjdCA9PT0gJ3VzZXInIHx8IGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHxcbiAgICAgICAgICAgICAgICAgICAgZmFjZS5pZGVhbCA9PT0gJ3VzZXInIHx8IGZhY2UuaWRlYWwgPT09ICdlbnZpcm9ubWVudCcpKSAmJlxuICAgICAgICAgICEobmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cyAmJlxuICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLmZhY2luZ01vZGUgJiZcbiAgICAgICAgICAgICFnZXRTdXBwb3J0ZWRGYWNpbmdNb2RlTGllcykpIHtcbiAgICAgICAgZGVsZXRlIGNvbnN0cmFpbnRzLnZpZGVvLmZhY2luZ01vZGU7XG4gICAgICAgIGxldCBtYXRjaGVzO1xuICAgICAgICBpZiAoZmFjZS5leGFjdCA9PT0gJ2Vudmlyb25tZW50JyB8fCBmYWNlLmlkZWFsID09PSAnZW52aXJvbm1lbnQnKSB7XG4gICAgICAgICAgbWF0Y2hlcyA9IFsnYmFjaycsICdyZWFyJ107XG4gICAgICAgIH0gZWxzZSBpZiAoZmFjZS5leGFjdCA9PT0gJ3VzZXInIHx8IGZhY2UuaWRlYWwgPT09ICd1c2VyJykge1xuICAgICAgICAgIG1hdGNoZXMgPSBbJ2Zyb250J107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcbiAgICAgICAgICAvLyBMb29rIGZvciBtYXRjaGVzIGluIGxhYmVsLCBvciB1c2UgbGFzdCBjYW0gZm9yIGJhY2sgKHR5cGljYWwpLlxuICAgICAgICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKVxuICAgICAgICAgICAgLnRoZW4oZGV2aWNlcyA9PiB7XG4gICAgICAgICAgICAgIGRldmljZXMgPSBkZXZpY2VzLmZpbHRlcihkID0+IGQua2luZCA9PT0gJ3ZpZGVvaW5wdXQnKTtcbiAgICAgICAgICAgICAgbGV0IGRldiA9IGRldmljZXMuZmluZChkID0+IG1hdGNoZXMuc29tZShtYXRjaCA9PlxuICAgICAgICAgICAgICAgIGQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhtYXRjaCkpKTtcbiAgICAgICAgICAgICAgaWYgKCFkZXYgJiYgZGV2aWNlcy5sZW5ndGggJiYgbWF0Y2hlcy5pbmNsdWRlcygnYmFjaycpKSB7XG4gICAgICAgICAgICAgICAgZGV2ID0gZGV2aWNlc1tkZXZpY2VzLmxlbmd0aCAtIDFdOyAvLyBtb3JlIGxpa2VseSB0aGUgYmFjayBjYW1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZGV2KSB7XG4gICAgICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8uZGV2aWNlSWQgPSBmYWNlLmV4YWN0XG4gICAgICAgICAgICAgICAgICA/IHtleGFjdDogZGV2LmRldmljZUlkfVxuICAgICAgICAgICAgICAgICAgOiB7aWRlYWw6IGRldi5kZXZpY2VJZH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy52aWRlbyk7XG4gICAgICAgICAgICAgIGxvZ2dpbmcoJ2Nocm9tZTogJyArIEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7XG4gICAgICAgICAgICAgIHJldHVybiBmdW5jKGNvbnN0cmFpbnRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdHJhaW50cy52aWRlbyA9IGNvbnN0cmFpbnRzVG9DaHJvbWVfKGNvbnN0cmFpbnRzLnZpZGVvKTtcbiAgICB9XG4gICAgbG9nZ2luZygnY2hyb21lOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICByZXR1cm4gZnVuYyhjb25zdHJhaW50cyk7XG4gIH07XG5cbiAgY29uc3Qgc2hpbUVycm9yXyA9IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA+PSA2NCkge1xuICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIFBlcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsXG4gICAgICAgIFBlcm1pc3Npb25EaXNtaXNzZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcicsXG4gICAgICAgIEludmFsaWRTdGF0ZUVycm9yOiAnTm90QWxsb3dlZEVycm9yJyxcbiAgICAgICAgRGV2aWNlc05vdEZvdW5kRXJyb3I6ICdOb3RGb3VuZEVycm9yJyxcbiAgICAgICAgQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOiAnT3ZlcmNvbnN0cmFpbmVkRXJyb3InLFxuICAgICAgICBUcmFja1N0YXJ0RXJyb3I6ICdOb3RSZWFkYWJsZUVycm9yJyxcbiAgICAgICAgTWVkaWFEZXZpY2VGYWlsZWREdWVUb1NodXRkb3duOiAnTm90QWxsb3dlZEVycm9yJyxcbiAgICAgICAgTWVkaWFEZXZpY2VLaWxsU3dpdGNoT246ICdOb3RBbGxvd2VkRXJyb3InLFxuICAgICAgICBUYWJDYXB0dXJlRXJyb3I6ICdBYm9ydEVycm9yJyxcbiAgICAgICAgU2NyZWVuQ2FwdHVyZUVycm9yOiAnQWJvcnRFcnJvcicsXG4gICAgICAgIERldmljZUNhcHR1cmVFcnJvcjogJ0Fib3J0RXJyb3InXG4gICAgICB9W2UubmFtZV0gfHwgZS5uYW1lLFxuICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50IHx8IGUuY29uc3RyYWludE5hbWUsXG4gICAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSArICh0aGlzLm1lc3NhZ2UgJiYgJzogJykgKyB0aGlzLm1lc3NhZ2U7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIHNoaW1Db25zdHJhaW50c18oY29uc3RyYWludHMsIGMgPT4ge1xuICAgICAgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYShjLCBvblN1Y2Nlc3MsIGUgPT4ge1xuICAgICAgICBpZiAob25FcnJvcikge1xuICAgICAgICAgIG9uRXJyb3Ioc2hpbUVycm9yXyhlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZ2V0VXNlck1lZGlhXy5iaW5kKG5hdmlnYXRvcik7XG5cbiAgLy8gRXZlbiB0aG91Z2ggQ2hyb21lIDQ1IGhhcyBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzIGFuZCBhIGdldFVzZXJNZWRpYVxuICAvLyBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgUHJvbWlzZSwgaXQgZG9lcyBub3QgYWNjZXB0IHNwZWMtc3R5bGVcbiAgLy8gY29uc3RyYWludHMuXG4gIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkge1xuICAgIGNvbnN0IG9yaWdHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5cbiAgICAgIGJpbmQobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyk7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjcykge1xuICAgICAgcmV0dXJuIHNoaW1Db25zdHJhaW50c18oY3MsIGMgPT4gb3JpZ0dldFVzZXJNZWRpYShjKS50aGVuKHN0cmVhbSA9PiB7XG4gICAgICAgIGlmIChjLmF1ZGlvICYmICFzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggfHxcbiAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCcnLCAnTm90Rm91bmRFcnJvcicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgICB9LCBlID0+IFByb21pc2UucmVqZWN0KHNoaW1FcnJvcl8oZSkpKSk7XG4gICAgfTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/common_shim.js":
/*!***********************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/common_shim.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   removeExtmapAllowMixed: function() { return /* binding */ removeExtmapAllowMixed; },\n/* harmony export */   shimAddIceCandidateNullOrEmpty: function() { return /* binding */ shimAddIceCandidateNullOrEmpty; },\n/* harmony export */   shimConnectionState: function() { return /* binding */ shimConnectionState; },\n/* harmony export */   shimMaxMessageSize: function() { return /* binding */ shimMaxMessageSize; },\n/* harmony export */   shimParameterlessSetLocalDescription: function() { return /* binding */ shimParameterlessSetLocalDescription; },\n/* harmony export */   shimRTCIceCandidate: function() { return /* binding */ shimRTCIceCandidate; },\n/* harmony export */   shimRTCIceCandidateRelayProtocol: function() { return /* binding */ shimRTCIceCandidateRelayProtocol; },\n/* harmony export */   shimSendThrowTypeError: function() { return /* binding */ shimSendThrowTypeError; }\n/* harmony export */ });\n/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sdp */ \"(app-pages-browser)/./node_modules/sdp/sdp.js\");\n/* harmony import */ var sdp__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sdp__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\nfunction shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substring(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = sdp__WEBPACK_IMPORTED_MODULE_0___default().parseCandidate(args.candidate);\n      for (const key in parsedCandidate) {\n        if (!(key in nativeCandidate)) {\n          Object.defineProperty(nativeCandidate, key,\n            {value: parsedCandidate[key]});\n        }\n      }\n\n      // Override serializer to not serialize the extra attributes.\n      nativeCandidate.toJSON = function toJSON() {\n        return {\n          candidate: nativeCandidate.candidate,\n          sdpMid: nativeCandidate.sdpMid,\n          sdpMLineIndex: nativeCandidate.sdpMLineIndex,\n          usernameFragment: nativeCandidate.usernameFragment,\n        };\n      };\n      return nativeCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  _utils__WEBPACK_IMPORTED_MODULE_1__.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nfunction shimRTCIceCandidateRelayProtocol(window) {\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'relayProtocol' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  _utils__WEBPACK_IMPORTED_MODULE_1__.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      const parsedCandidate = sdp__WEBPACK_IMPORTED_MODULE_0___default().parseCandidate(e.candidate.candidate);\n      if (parsedCandidate.type === 'relay') {\n        // This is a libwebrtc-specific mapping of local type preference\n        // to relayProtocol.\n        e.candidate.relayProtocol = {\n          0: 'tls',\n          1: 'tcp',\n          2: 'udp',\n        }[parsedCandidate.priority >> 24];\n      }\n    }\n    return e;\n  });\n}\n\nfunction shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = sdp__WEBPACK_IMPORTED_MODULE_0___default().splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = sdp__WEBPACK_IMPORTED_MODULE_0___default().parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = sdp__WEBPACK_IMPORTED_MODULE_0___default().matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substring(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nfunction shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  _utils__WEBPACK_IMPORTED_MODULE_1__.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nfunction shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n          this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n          this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nfunction removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' &&\n      browserDetails._safariVersion >= 13.1) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nfunction shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Note: Make sure to call this ahead of APIs that modify\n// setLocalDescription.length\nfunction shimParameterlessSetLocalDescription(window, browserDetails) {\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      let desc = arguments[0] || {};\n      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = {type: desc.type, sdp: desc.sdp};\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this)\n        .then(d => nativeSetLocalDescription.apply(this, [d]));\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY29tbW9uX3NoaW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7O0FBRWM7QUFDTTs7QUFFMUI7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIseURBQXVCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRSwyREFBNkI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFLDJEQUE2QjtBQUMvQjtBQUNBLDhCQUE4Qix5REFBdUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsd0RBQXNCO0FBQzNDO0FBQ0E7QUFDQSxvQkFBb0IscURBQW1CO0FBQ3ZDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCLHNEQUFvQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGNBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDJEQUE2QjtBQUMvQjtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBLGlDQUFpQyxtQkFBbUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLG1CQUFtQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY29tbW9uX3NoaW0uanM/NThkMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNyBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgU0RQVXRpbHMgZnJvbSAnc2RwJztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3cpIHtcbiAgLy8gZm91bmRhdGlvbiBpcyBhcmJpdHJhcmlseSBjaG9zZW4gYXMgYW4gaW5kaWNhdG9yIGZvciBmdWxsIHN1cHBvcnQgZm9yXG4gIC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJydGMtcGMvI3J0Y2ljZWNhbmRpZGF0ZS1pbnRlcmZhY2VcbiAgaWYgKCF3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlIHx8ICh3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlICYmICdmb3VuZGF0aW9uJyBpblxuICAgICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGUpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgTmF0aXZlUlRDSWNlQ2FuZGlkYXRlID0gd2luZG93LlJUQ0ljZUNhbmRpZGF0ZTtcbiAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uIFJUQ0ljZUNhbmRpZGF0ZShhcmdzKSB7XG4gICAgLy8gUmVtb3ZlIHRoZSBhPSB3aGljaCBzaG91bGRuJ3QgYmUgcGFydCBvZiB0aGUgY2FuZGlkYXRlIHN0cmluZy5cbiAgICBpZiAodHlwZW9mIGFyZ3MgPT09ICdvYmplY3QnICYmIGFyZ3MuY2FuZGlkYXRlICYmXG4gICAgICAgIGFyZ3MuY2FuZGlkYXRlLmluZGV4T2YoJ2E9JykgPT09IDApIHtcbiAgICAgIGFyZ3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFyZ3MpKTtcbiAgICAgIGFyZ3MuY2FuZGlkYXRlID0gYXJncy5jYW5kaWRhdGUuc3Vic3RyaW5nKDIpO1xuICAgIH1cblxuICAgIGlmIChhcmdzLmNhbmRpZGF0ZSAmJiBhcmdzLmNhbmRpZGF0ZS5sZW5ndGgpIHtcbiAgICAgIC8vIEF1Z21lbnQgdGhlIG5hdGl2ZSBjYW5kaWRhdGUgd2l0aCB0aGUgcGFyc2VkIGZpZWxkcy5cbiAgICAgIGNvbnN0IG5hdGl2ZUNhbmRpZGF0ZSA9IG5ldyBOYXRpdmVSVENJY2VDYW5kaWRhdGUoYXJncyk7XG4gICAgICBjb25zdCBwYXJzZWRDYW5kaWRhdGUgPSBTRFBVdGlscy5wYXJzZUNhbmRpZGF0ZShhcmdzLmNhbmRpZGF0ZSk7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBwYXJzZWRDYW5kaWRhdGUpIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIG5hdGl2ZUNhbmRpZGF0ZSkpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF0aXZlQ2FuZGlkYXRlLCBrZXksXG4gICAgICAgICAgICB7dmFsdWU6IHBhcnNlZENhbmRpZGF0ZVtrZXldfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gT3ZlcnJpZGUgc2VyaWFsaXplciB0byBub3Qgc2VyaWFsaXplIHRoZSBleHRyYSBhdHRyaWJ1dGVzLlxuICAgICAgbmF0aXZlQ2FuZGlkYXRlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjYW5kaWRhdGU6IG5hdGl2ZUNhbmRpZGF0ZS5jYW5kaWRhdGUsXG4gICAgICAgICAgc2RwTWlkOiBuYXRpdmVDYW5kaWRhdGUuc2RwTWlkLFxuICAgICAgICAgIHNkcE1MaW5lSW5kZXg6IG5hdGl2ZUNhbmRpZGF0ZS5zZHBNTGluZUluZGV4LFxuICAgICAgICAgIHVzZXJuYW1lRnJhZ21lbnQ6IG5hdGl2ZUNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50LFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIHJldHVybiBuYXRpdmVDYW5kaWRhdGU7XG4gICAgfVxuICAgIHJldHVybiBuZXcgTmF0aXZlUlRDSWNlQ2FuZGlkYXRlKGFyZ3MpO1xuICB9O1xuICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlLnByb3RvdHlwZSA9IE5hdGl2ZVJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGU7XG5cbiAgLy8gSG9vayB1cCB0aGUgYXVnbWVudGVkIGNhbmRpZGF0ZSBpbiBvbmljZWNhbmRpZGF0ZSBhbmRcbiAgLy8gYWRkRXZlbnRMaXN0ZW5lcignaWNlY2FuZGlkYXRlJywgLi4uKVxuICB1dGlscy53cmFwUGVlckNvbm5lY3Rpb25FdmVudCh3aW5kb3csICdpY2VjYW5kaWRhdGUnLCBlID0+IHtcbiAgICBpZiAoZS5jYW5kaWRhdGUpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAnY2FuZGlkYXRlJywge1xuICAgICAgICB2YWx1ZTogbmV3IHdpbmRvdy5SVENJY2VDYW5kaWRhdGUoZS5jYW5kaWRhdGUpLFxuICAgICAgICB3cml0YWJsZTogJ2ZhbHNlJ1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBlO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SVENJY2VDYW5kaWRhdGVSZWxheVByb3RvY29sKHdpbmRvdykge1xuICBpZiAoIXdpbmRvdy5SVENJY2VDYW5kaWRhdGUgfHwgKHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgJiYgJ3JlbGF5UHJvdG9jb2wnIGluXG4gICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlLnByb3RvdHlwZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBIb29rIHVwIHRoZSBhdWdtZW50ZWQgY2FuZGlkYXRlIGluIG9uaWNlY2FuZGlkYXRlIGFuZFxuICAvLyBhZGRFdmVudExpc3RlbmVyKCdpY2VjYW5kaWRhdGUnLCAuLi4pXG4gIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ2ljZWNhbmRpZGF0ZScsIGUgPT4ge1xuICAgIGlmIChlLmNhbmRpZGF0ZSkge1xuICAgICAgY29uc3QgcGFyc2VkQ2FuZGlkYXRlID0gU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoZS5jYW5kaWRhdGUuY2FuZGlkYXRlKTtcbiAgICAgIGlmIChwYXJzZWRDYW5kaWRhdGUudHlwZSA9PT0gJ3JlbGF5Jykge1xuICAgICAgICAvLyBUaGlzIGlzIGEgbGlid2VicnRjLXNwZWNpZmljIG1hcHBpbmcgb2YgbG9jYWwgdHlwZSBwcmVmZXJlbmNlXG4gICAgICAgIC8vIHRvIHJlbGF5UHJvdG9jb2wuXG4gICAgICAgIGUuY2FuZGlkYXRlLnJlbGF5UHJvdG9jb2wgPSB7XG4gICAgICAgICAgMDogJ3RscycsXG4gICAgICAgICAgMTogJ3RjcCcsXG4gICAgICAgICAgMjogJ3VkcCcsXG4gICAgICAgIH1bcGFyc2VkQ2FuZGlkYXRlLnByaW9yaXR5ID4+IDI0XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbU1heE1lc3NhZ2VTaXplKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoISgnc2N0cCcgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ3NjdHAnLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fc2N0cCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogdGhpcy5fc2N0cDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHNjdHBJbkRlc2NyaXB0aW9uID0gZnVuY3Rpb24oZGVzY3JpcHRpb24pIHtcbiAgICBpZiAoIWRlc2NyaXB0aW9uIHx8ICFkZXNjcmlwdGlvbi5zZHApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3Qgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKGRlc2NyaXB0aW9uLnNkcCk7XG4gICAgc2VjdGlvbnMuc2hpZnQoKTtcbiAgICByZXR1cm4gc2VjdGlvbnMuc29tZShtZWRpYVNlY3Rpb24gPT4ge1xuICAgICAgY29uc3QgbUxpbmUgPSBTRFBVdGlscy5wYXJzZU1MaW5lKG1lZGlhU2VjdGlvbik7XG4gICAgICByZXR1cm4gbUxpbmUgJiYgbUxpbmUua2luZCA9PT0gJ2FwcGxpY2F0aW9uJ1xuICAgICAgICAgICYmIG1MaW5lLnByb3RvY29sLmluZGV4T2YoJ1NDVFAnKSAhPT0gLTE7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgZ2V0UmVtb3RlRmlyZWZveFZlcnNpb24gPSBmdW5jdGlvbihkZXNjcmlwdGlvbikge1xuICAgIC8vIFRPRE86IElzIHRoZXJlIGEgYmV0dGVyIHNvbHV0aW9uIGZvciBkZXRlY3RpbmcgRmlyZWZveD9cbiAgICBjb25zdCBtYXRjaCA9IGRlc2NyaXB0aW9uLnNkcC5tYXRjaCgvbW96aWxsYS4uLlRISVNfSVNfU0RQQVJUQS0oXFxkKykvKTtcbiAgICBpZiAobWF0Y2ggPT09IG51bGwgfHwgbWF0Y2gubGVuZ3RoIDwgMikge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBjb25zdCB2ZXJzaW9uID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICAvLyBUZXN0IGZvciBOYU4gKHllcywgdGhpcyBpcyB1Z2x5KVxuICAgIHJldHVybiB2ZXJzaW9uICE9PSB2ZXJzaW9uID8gLTEgOiB2ZXJzaW9uO1xuICB9O1xuXG4gIGNvbnN0IGdldENhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IGZ1bmN0aW9uKHJlbW90ZUlzRmlyZWZveCkge1xuICAgIC8vIEV2ZXJ5IGltcGxlbWVudGF0aW9uIHdlIGtub3cgY2FuIHNlbmQgYXQgbGVhc3QgNjQgS2lCLlxuICAgIC8vIE5vdGU6IEFsdGhvdWdoIENocm9tZSBpcyB0ZWNobmljYWxseSBhYmxlIHRvIHNlbmQgdXAgdG8gMjU2IEtpQiwgdGhlXG4gICAgLy8gICAgICAgZGF0YSBkb2VzIG5vdCByZWFjaCB0aGUgb3RoZXIgcGVlciByZWxpYWJseS5cbiAgICAvLyAgICAgICBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD04NDE5XG4gICAgbGV0IGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IDY1NTM2O1xuICAgIGlmIChicm93c2VyRGV0YWlscy5icm93c2VyID09PSAnZmlyZWZveCcpIHtcbiAgICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNTcpIHtcbiAgICAgICAgaWYgKHJlbW90ZUlzRmlyZWZveCA9PT0gLTEpIHtcbiAgICAgICAgICAvLyBGRiA8IDU3IHdpbGwgc2VuZCBpbiAxNiBLaUIgY2h1bmtzIHVzaW5nIHRoZSBkZXByZWNhdGVkIFBQSURcbiAgICAgICAgICAvLyBmcmFnbWVudGF0aW9uLlxuICAgICAgICAgIGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IDE2Mzg0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEhvd2V2ZXIsIG90aGVyIEZGIChhbmQgUkFXUlRDKSBjYW4gcmVhc3NlbWJsZSBQUElELWZyYWdtZW50ZWRcbiAgICAgICAgICAvLyBtZXNzYWdlcy4gVGh1cywgc3VwcG9ydGluZyB+MiBHaUIgd2hlbiBzZW5kaW5nLlxuICAgICAgICAgIGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9IDIxNDc0ODM2Mzc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDYwKSB7XG4gICAgICAgIC8vIEN1cnJlbnRseSwgYWxsIEZGID49IDU3IHdpbGwgcmVzZXQgdGhlIHJlbW90ZSBtYXhpbXVtIG1lc3NhZ2Ugc2l6ZVxuICAgICAgICAvLyB0byB0aGUgZGVmYXVsdCB2YWx1ZSB3aGVuIGEgZGF0YSBjaGFubmVsIGlzIGNyZWF0ZWQgYXQgYSBsYXRlclxuICAgICAgICAvLyBzdGFnZS4gOihcbiAgICAgICAgLy8gU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI2ODMxXG4gICAgICAgIGNhblNlbmRNYXhNZXNzYWdlU2l6ZSA9XG4gICAgICAgICAgYnJvd3NlckRldGFpbHMudmVyc2lvbiA9PT0gNTcgPyA2NTUzNSA6IDY1NTM2O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRkYgPj0gNjAgc3VwcG9ydHMgc2VuZGluZyB+MiBHaUJcbiAgICAgICAgY2FuU2VuZE1heE1lc3NhZ2VTaXplID0gMjE0NzQ4MzYzNztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhblNlbmRNYXhNZXNzYWdlU2l6ZTtcbiAgfTtcblxuICBjb25zdCBnZXRNYXhNZXNzYWdlU2l6ZSA9IGZ1bmN0aW9uKGRlc2NyaXB0aW9uLCByZW1vdGVJc0ZpcmVmb3gpIHtcbiAgICAvLyBOb3RlOiA2NTUzNiBieXRlcyBpcyB0aGUgZGVmYXVsdCB2YWx1ZSBmcm9tIHRoZSBTRFAgc3BlYy4gQWxzbyxcbiAgICAvLyAgICAgICBldmVyeSBpbXBsZW1lbnRhdGlvbiB3ZSBrbm93IHN1cHBvcnRzIHJlY2VpdmluZyA2NTUzNiBieXRlcy5cbiAgICBsZXQgbWF4TWVzc2FnZVNpemUgPSA2NTUzNjtcblxuICAgIC8vIEZGIDU3IGhhcyBhIHNsaWdodGx5IGluY29ycmVjdCBkZWZhdWx0IHJlbW90ZSBtYXggbWVzc2FnZSBzaXplLCBzb1xuICAgIC8vIHdlIG5lZWQgdG8gYWRqdXN0IGl0IGhlcmUgdG8gYXZvaWQgYSBmYWlsdXJlIHdoZW4gc2VuZGluZy5cbiAgICAvLyBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE0MjU2OTdcbiAgICBpZiAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnXG4gICAgICAgICAmJiBicm93c2VyRGV0YWlscy52ZXJzaW9uID09PSA1Nykge1xuICAgICAgbWF4TWVzc2FnZVNpemUgPSA2NTUzNTtcbiAgICB9XG5cbiAgICBjb25zdCBtYXRjaCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KGRlc2NyaXB0aW9uLnNkcCxcbiAgICAgICdhPW1heC1tZXNzYWdlLXNpemU6Jyk7XG4gICAgaWYgKG1hdGNoLmxlbmd0aCA+IDApIHtcbiAgICAgIG1heE1lc3NhZ2VTaXplID0gcGFyc2VJbnQobWF0Y2hbMF0uc3Vic3RyaW5nKDE5KSwgMTApO1xuICAgIH0gZWxzZSBpZiAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2ZpcmVmb3gnICYmXG4gICAgICAgICAgICAgICAgcmVtb3RlSXNGaXJlZm94ICE9PSAtMSkge1xuICAgICAgLy8gSWYgdGhlIG1heGltdW0gbWVzc2FnZSBzaXplIGlzIG5vdCBwcmVzZW50IGluIHRoZSByZW1vdGUgU0RQIGFuZFxuICAgICAgLy8gYm90aCBsb2NhbCBhbmQgcmVtb3RlIGFyZSBGaXJlZm94LCB0aGUgcmVtb3RlIHBlZXIgY2FuIHJlY2VpdmVcbiAgICAgIC8vIH4yIEdpQi5cbiAgICAgIG1heE1lc3NhZ2VTaXplID0gMjE0NzQ4MzYzNztcbiAgICB9XG4gICAgcmV0dXJuIG1heE1lc3NhZ2VTaXplO1xuICB9O1xuXG4gIGNvbnN0IG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbiA9XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICBmdW5jdGlvbiBzZXRSZW1vdGVEZXNjcmlwdGlvbigpIHtcbiAgICAgIHRoaXMuX3NjdHAgPSBudWxsO1xuICAgICAgLy8gQ2hyb21lIGRlY2lkZWQgdG8gbm90IGV4cG9zZSAuc2N0cCBpbiBwbGFuLWIgbW9kZS5cbiAgICAgIC8vIEFzIHVzdWFsLCBhZGFwdGVyLmpzIGhhcyB0byBkbyBhbiAndWdseSB3b3Jha2Fyb3VuZCdcbiAgICAgIC8vIHRvIGNvdmVyIHVwIHRoZSBtZXNzLlxuICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdjaHJvbWUnICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNzYpIHtcbiAgICAgICAgY29uc3Qge3NkcFNlbWFudGljc30gPSB0aGlzLmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgaWYgKHNkcFNlbWFudGljcyA9PT0gJ3BsYW4tYicpIHtcbiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3NjdHAnLCB7XG4gICAgICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fc2N0cCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogdGhpcy5fc2N0cDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzY3RwSW5EZXNjcmlwdGlvbihhcmd1bWVudHNbMF0pKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSByZW1vdGUgaXMgRkYuXG4gICAgICAgIGNvbnN0IGlzRmlyZWZveCA9IGdldFJlbW90ZUZpcmVmb3hWZXJzaW9uKGFyZ3VtZW50c1swXSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBtYXhpbXVtIG1lc3NhZ2Ugc2l6ZSB0aGUgbG9jYWwgcGVlciBpcyBjYXBhYmxlIG9mIHNlbmRpbmdcbiAgICAgICAgY29uc3QgY2FuU2VuZE1NUyA9IGdldENhblNlbmRNYXhNZXNzYWdlU2l6ZShpc0ZpcmVmb3gpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgbWF4aW11bSBtZXNzYWdlIHNpemUgb2YgdGhlIHJlbW90ZSBwZWVyLlxuICAgICAgICBjb25zdCByZW1vdGVNTVMgPSBnZXRNYXhNZXNzYWdlU2l6ZShhcmd1bWVudHNbMF0sIGlzRmlyZWZveCk7XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIGZpbmFsIG1heGltdW0gbWVzc2FnZSBzaXplXG4gICAgICAgIGxldCBtYXhNZXNzYWdlU2l6ZTtcbiAgICAgICAgaWYgKGNhblNlbmRNTVMgPT09IDAgJiYgcmVtb3RlTU1TID09PSAwKSB7XG4gICAgICAgICAgbWF4TWVzc2FnZVNpemUgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2FuU2VuZE1NUyA9PT0gMCB8fCByZW1vdGVNTVMgPT09IDApIHtcbiAgICAgICAgICBtYXhNZXNzYWdlU2l6ZSA9IE1hdGgubWF4KGNhblNlbmRNTVMsIHJlbW90ZU1NUyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWF4TWVzc2FnZVNpemUgPSBNYXRoLm1pbihjYW5TZW5kTU1TLCByZW1vdGVNTVMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgZHVtbXkgUlRDU2N0cFRyYW5zcG9ydCBvYmplY3QgYW5kIHRoZSAnbWF4TWVzc2FnZVNpemUnXG4gICAgICAgIC8vIGF0dHJpYnV0ZS5cbiAgICAgICAgY29uc3Qgc2N0cCA9IHt9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2N0cCwgJ21heE1lc3NhZ2VTaXplJywge1xuICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXhNZXNzYWdlU2l6ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zY3RwID0gc2N0cDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltU2VuZFRocm93VHlwZUVycm9yKHdpbmRvdykge1xuICBpZiAoISh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgICdjcmVhdGVEYXRhQ2hhbm5lbCcgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBOb3RlOiBBbHRob3VnaCBGaXJlZm94ID49IDU3IGhhcyBhIG5hdGl2ZSBpbXBsZW1lbnRhdGlvbiwgdGhlIG1heGltdW1cbiAgLy8gICAgICAgbWVzc2FnZSBzaXplIGNhbiBiZSByZXNldCBmb3IgYWxsIGRhdGEgY2hhbm5lbHMgYXQgYSBsYXRlciBzdGFnZS5cbiAgLy8gICAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI2ODMxXG5cbiAgZnVuY3Rpb24gd3JhcERjU2VuZChkYywgcGMpIHtcbiAgICBjb25zdCBvcmlnRGF0YUNoYW5uZWxTZW5kID0gZGMuc2VuZDtcbiAgICBkYy5zZW5kID0gZnVuY3Rpb24gc2VuZCgpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhcmd1bWVudHNbMF07XG4gICAgICBjb25zdCBsZW5ndGggPSBkYXRhLmxlbmd0aCB8fCBkYXRhLnNpemUgfHwgZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgaWYgKGRjLnJlYWR5U3RhdGUgPT09ICdvcGVuJyAmJlxuICAgICAgICAgIHBjLnNjdHAgJiYgbGVuZ3RoID4gcGMuc2N0cC5tYXhNZXNzYWdlU2l6ZSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdNZXNzYWdlIHRvbyBsYXJnZSAoY2FuIHNlbmQgYSBtYXhpbXVtIG9mICcgK1xuICAgICAgICAgIHBjLnNjdHAubWF4TWVzc2FnZVNpemUgKyAnIGJ5dGVzKScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9yaWdEYXRhQ2hhbm5lbFNlbmQuYXBwbHkoZGMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuICBjb25zdCBvcmlnQ3JlYXRlRGF0YUNoYW5uZWwgPVxuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlRGF0YUNoYW5uZWw7XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlRGF0YUNoYW5uZWwgPVxuICAgIGZ1bmN0aW9uIGNyZWF0ZURhdGFDaGFubmVsKCkge1xuICAgICAgY29uc3QgZGF0YUNoYW5uZWwgPSBvcmlnQ3JlYXRlRGF0YUNoYW5uZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHdyYXBEY1NlbmQoZGF0YUNoYW5uZWwsIHRoaXMpO1xuICAgICAgcmV0dXJuIGRhdGFDaGFubmVsO1xuICAgIH07XG4gIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ2RhdGFjaGFubmVsJywgZSA9PiB7XG4gICAgd3JhcERjU2VuZChlLmNoYW5uZWwsIGUudGFyZ2V0KTtcbiAgICByZXR1cm4gZTtcbiAgfSk7XG59XG5cblxuLyogc2hpbXMgUlRDQ29ubmVjdGlvblN0YXRlIGJ5IHByZXRlbmRpbmcgaXQgaXMgdGhlIHNhbWUgYXMgaWNlQ29ubmVjdGlvblN0YXRlLlxuICogU2VlIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD02MTQ1I2MxMlxuICogZm9yIHdoeSB0aGlzIGlzIGEgdmFsaWQgaGFjayBpbiBDaHJvbWUuIEluIEZpcmVmb3ggaXQgaXMgc2xpZ2h0bHkgaW5jb3JyZWN0XG4gKiBzaW5jZSBEVExTIGZhaWx1cmVzIHdvdWxkIGJlIGhpZGRlbi4gU2VlXG4gKiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMjY1ODI3XG4gKiBmb3IgdGhlIEZpcmVmb3ggdHJhY2tpbmcgYnVnLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hpbUNvbm5lY3Rpb25TdGF0ZSh3aW5kb3cpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgICdjb25uZWN0aW9uU3RhdGUnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgcHJvdG8gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sICdjb25uZWN0aW9uU3RhdGUnLCB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29tcGxldGVkOiAnY29ubmVjdGVkJyxcbiAgICAgICAgY2hlY2tpbmc6ICdjb25uZWN0aW5nJ1xuICAgICAgfVt0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZV0gfHwgdGhpcy5pY2VDb25uZWN0aW9uU3RhdGU7XG4gICAgfSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvLCAnb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCB7XG4gICAgZ2V0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlIHx8IG51bGw7XG4gICAgfSxcbiAgICBzZXQoY2IpIHtcbiAgICAgIGlmICh0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZScsXG4gICAgICAgICAgdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UpO1xuICAgICAgICBkZWxldGUgdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2U7XG4gICAgICB9XG4gICAgICBpZiAoY2IpIHtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLFxuICAgICAgICAgIHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlID0gY2IpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG5cbiAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJ10uZm9yRWFjaCgobWV0aG9kKSA9PiB7XG4gICAgY29uc3Qgb3JpZ01ldGhvZCA9IHByb3RvW21ldGhvZF07XG4gICAgcHJvdG9bbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5KSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHkgPSBlID0+IHtcbiAgICAgICAgICBjb25zdCBwYyA9IGUudGFyZ2V0O1xuICAgICAgICAgIGlmIChwYy5fbGFzdENvbm5lY3Rpb25TdGF0ZSAhPT0gcGMuY29ubmVjdGlvblN0YXRlKSB7XG4gICAgICAgICAgICBwYy5fbGFzdENvbm5lY3Rpb25TdGF0ZSA9IHBjLmNvbm5lY3Rpb25TdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0V2ZW50ID0gbmV3IEV2ZW50KCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBlKTtcbiAgICAgICAgICAgIHBjLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLFxuICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9yaWdNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV4dG1hcEFsbG93TWl4ZWQod2luZG93LCBicm93c2VyRGV0YWlscykge1xuICAvKiByZW1vdmUgYT1leHRtYXAtYWxsb3ctbWl4ZWQgZm9yIHdlYnJ0Yy5vcmcgPCBNNzEgKi9cbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdjaHJvbWUnICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNzEpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdzYWZhcmknICYmXG4gICAgICBicm93c2VyRGV0YWlscy5fc2FmYXJpVmVyc2lvbiA+PSAxMy4xKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG5hdGl2ZVNSRCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb24gPVxuICBmdW5jdGlvbiBzZXRSZW1vdGVEZXNjcmlwdGlvbihkZXNjKSB7XG4gICAgaWYgKGRlc2MgJiYgZGVzYy5zZHAgJiYgZGVzYy5zZHAuaW5kZXhPZignXFxuYT1leHRtYXAtYWxsb3ctbWl4ZWQnKSAhPT0gLTEpIHtcbiAgICAgIGNvbnN0IHNkcCA9IGRlc2Muc2RwLnNwbGl0KCdcXG4nKS5maWx0ZXIoKGxpbmUpID0+IHtcbiAgICAgICAgcmV0dXJuIGxpbmUudHJpbSgpICE9PSAnYT1leHRtYXAtYWxsb3ctbWl4ZWQnO1xuICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAvLyBTYWZhcmkgZW5mb3JjZXMgcmVhZC1vbmx5LW5lc3Mgb2YgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uIGZpZWxkcy5cbiAgICAgIGlmICh3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uICYmXG4gICAgICAgICAgZGVzYyBpbnN0YW5jZW9mIHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24pIHtcbiAgICAgICAgYXJndW1lbnRzWzBdID0gbmV3IHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe1xuICAgICAgICAgIHR5cGU6IGRlc2MudHlwZSxcbiAgICAgICAgICBzZHAsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVzYy5zZHAgPSBzZHA7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuYXRpdmVTUkQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1BZGRJY2VDYW5kaWRhdGVOdWxsT3JFbXB0eSh3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIC8vIFN1cHBvcnQgZm9yIGFkZEljZUNhbmRpZGF0ZShudWxsIG9yIHVuZGVmaW5lZClcbiAgLy8gYXMgd2VsbCBhcyBhZGRJY2VDYW5kaWRhdGUoe2NhbmRpZGF0ZTogXCJcIiwgLi4ufSlcbiAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9OTc4NTgyXG4gIC8vIE5vdGU6IG11c3QgYmUgY2FsbGVkIGJlZm9yZSBvdGhlciBwb2x5ZmlsbHMgd2hpY2ggY2hhbmdlIHRoZSBzaWduYXR1cmUuXG4gIGlmICghKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBuYXRpdmVBZGRJY2VDYW5kaWRhdGUgPVxuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU7XG4gIGlmICghbmF0aXZlQWRkSWNlQ2FuZGlkYXRlIHx8IG5hdGl2ZUFkZEljZUNhbmRpZGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGUgPVxuICAgIGZ1bmN0aW9uIGFkZEljZUNhbmRpZGF0ZSgpIHtcbiAgICAgIGlmICghYXJndW1lbnRzWzBdKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHNbMV0pIHtcbiAgICAgICAgICBhcmd1bWVudHNbMV0uYXBwbHkobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgfVxuICAgICAgLy8gRmlyZWZveCA2OCsgZW1pdHMgYW5kIHByb2Nlc3NlcyB7Y2FuZGlkYXRlOiBcIlwiLCAuLi59LCBpZ25vcmVcbiAgICAgIC8vIGluIG9sZGVyIHZlcnNpb25zLlxuICAgICAgLy8gTmF0aXZlIHN1cHBvcnQgZm9yIGlnbm9yaW5nIGV4aXN0cyBmb3IgQ2hyb21lIE03NysuXG4gICAgICAvLyBTYWZhcmkgaWdub3JlcyBhcyB3ZWxsLCBleGFjdCB2ZXJzaW9uIHVua25vd24gYnV0IHdvcmtzIGluIHRoZSBzYW1lXG4gICAgICAvLyB2ZXJzaW9uIHRoYXQgYWxzbyBpZ25vcmVzIGFkZEljZUNhbmRpZGF0ZShudWxsKS5cbiAgICAgIGlmICgoKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdjaHJvbWUnICYmIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA3OClcbiAgICAgICAgICAgfHwgKGJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdmaXJlZm94J1xuICAgICAgICAgICAgICAgJiYgYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDY4KVxuICAgICAgICAgICB8fCAoYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ3NhZmFyaScpKVxuICAgICAgICAgICYmIGFyZ3VtZW50c1swXSAmJiBhcmd1bWVudHNbMF0uY2FuZGlkYXRlID09PSAnJykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlQWRkSWNlQ2FuZGlkYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuLy8gTm90ZTogTWFrZSBzdXJlIHRvIGNhbGwgdGhpcyBhaGVhZCBvZiBBUElzIHRoYXQgbW9kaWZ5XG4vLyBzZXRMb2NhbERlc2NyaXB0aW9uLmxlbmd0aFxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1QYXJhbWV0ZXJsZXNzU2V0TG9jYWxEZXNjcmlwdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIGlmICghKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBuYXRpdmVTZXRMb2NhbERlc2NyaXB0aW9uID1cbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbjtcbiAgaWYgKCFuYXRpdmVTZXRMb2NhbERlc2NyaXB0aW9uIHx8IG5hdGl2ZVNldExvY2FsRGVzY3JpcHRpb24ubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9XG4gICAgZnVuY3Rpb24gc2V0TG9jYWxEZXNjcmlwdGlvbigpIHtcbiAgICAgIGxldCBkZXNjID0gYXJndW1lbnRzWzBdIHx8IHt9O1xuICAgICAgaWYgKHR5cGVvZiBkZXNjICE9PSAnb2JqZWN0JyB8fCAoZGVzYy50eXBlICYmIGRlc2Muc2RwKSkge1xuICAgICAgICByZXR1cm4gbmF0aXZlU2V0TG9jYWxEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgLy8gVGhlIHJlbWFpbmluZyBzdGVwcyBzaG91bGQgdGVjaG5pY2FsbHkgaGFwcGVuIHdoZW4gU0xEIGNvbWVzIG9mZiB0aGVcbiAgICAgIC8vIFJUQ1BlZXJDb25uZWN0aW9uJ3Mgb3BlcmF0aW9ucyBjaGFpbiAobm90IGFoZWFkIG9mIGdvaW5nIG9uIGl0KSwgYnV0XG4gICAgICAvLyB0aGlzIGlzIHRvbyBkaWZmaWN1bHQgdG8gc2hpbS4gSW5zdGVhZCwgdGhpcyBzaGltIG9ubHkgY292ZXJzIHRoZVxuICAgICAgLy8gY29tbW9uIGNhc2Ugd2hlcmUgdGhlIG9wZXJhdGlvbnMgY2hhaW4gaXMgZW1wdHkuIFRoaXMgaXMgaW1wZXJmZWN0LCBidXRcbiAgICAgIC8vIHNob3VsZCBjb3ZlciBtYW55IGNhc2VzLiBSYXRpb25hbGU6IEV2ZW4gaWYgd2UgY2FuJ3QgcmVkdWNlIHRoZSBnbGFyZVxuICAgICAgLy8gd2luZG93IHRvIHplcm8gb24gaW1wZXJmZWN0IGltcGxlbWVudGF0aW9ucywgdGhlcmUncyB2YWx1ZSBpbiB0YXBwaW5nXG4gICAgICAvLyBpbnRvIHRoZSBwZXJmZWN0IG5lZ290aWF0aW9uIHBhdHRlcm4gdGhhdCBzZXZlcmFsIGJyb3dzZXJzIHN1cHBvcnQuXG4gICAgICBkZXNjID0ge3R5cGU6IGRlc2MudHlwZSwgc2RwOiBkZXNjLnNkcH07XG4gICAgICBpZiAoIWRlc2MudHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc2lnbmFsaW5nU3RhdGUpIHtcbiAgICAgICAgICBjYXNlICdzdGFibGUnOlxuICAgICAgICAgIGNhc2UgJ2hhdmUtbG9jYWwtb2ZmZXInOlxuICAgICAgICAgIGNhc2UgJ2hhdmUtcmVtb3RlLXByYW5zd2VyJzpcbiAgICAgICAgICAgIGRlc2MudHlwZSA9ICdvZmZlcic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgZGVzYy50eXBlID0gJ2Fuc3dlcic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRlc2Muc2RwIHx8IChkZXNjLnR5cGUgIT09ICdvZmZlcicgJiYgZGVzYy50eXBlICE9PSAnYW5zd2VyJykpIHtcbiAgICAgICAgcmV0dXJuIG5hdGl2ZVNldExvY2FsRGVzY3JpcHRpb24uYXBwbHkodGhpcywgW2Rlc2NdKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZ1bmMgPSBkZXNjLnR5cGUgPT09ICdvZmZlcicgPyB0aGlzLmNyZWF0ZU9mZmVyIDogdGhpcy5jcmVhdGVBbnN3ZXI7XG4gICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzKVxuICAgICAgICAudGhlbihkID0+IG5hdGl2ZVNldExvY2FsRGVzY3JpcHRpb24uYXBwbHkodGhpcywgW2RdKSk7XG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/common_shim.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   shimAddTransceiver: function() { return /* binding */ shimAddTransceiver; },\n/* harmony export */   shimCreateAnswer: function() { return /* binding */ shimCreateAnswer; },\n/* harmony export */   shimCreateOffer: function() { return /* binding */ shimCreateOffer; },\n/* harmony export */   shimGetDisplayMedia: function() { return /* reexport safe */ _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__.shimGetDisplayMedia; },\n/* harmony export */   shimGetParameters: function() { return /* binding */ shimGetParameters; },\n/* harmony export */   shimGetUserMedia: function() { return /* reexport safe */ _getusermedia__WEBPACK_IMPORTED_MODULE_1__.shimGetUserMedia; },\n/* harmony export */   shimOnTrack: function() { return /* binding */ shimOnTrack; },\n/* harmony export */   shimPeerConnection: function() { return /* binding */ shimPeerConnection; },\n/* harmony export */   shimRTCDataChannel: function() { return /* binding */ shimRTCDataChannel; },\n/* harmony export */   shimReceiverGetStats: function() { return /* binding */ shimReceiverGetStats; },\n/* harmony export */   shimRemoveStream: function() { return /* binding */ shimRemoveStream; },\n/* harmony export */   shimSenderGetStats: function() { return /* binding */ shimSenderGetStats; }\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/utils.js\");\n/* harmony import */ var _getusermedia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getusermedia */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js\");\n/* harmony import */ var _getdisplaymedia__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getdisplaymedia */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\n\n\nfunction shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nfunction shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nfunction shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n      Promise.resolve(new Map());\n  };\n}\n\nfunction shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  _utils__WEBPACK_IMPORTED_MODULE_0__.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nfunction shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nfunction shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nfunction shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        // WebIDL input coercion and validation\n        let sendEncodings = arguments[1] && arguments[1].sendEncodings;\n        if (sendEncodings === undefined) {\n          sendEncodings = [];\n        }\n        sendEncodings = [...sendEncodings];\n        const shouldPerformCheck = sendEncodings.length > 0;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = sendEncodings;\n            sender.sendEncodings = sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nfunction shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nfunction shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateOffer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nfunction shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateAnswer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9maXJlZm94X3NoaW0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhOztBQUVxQjtBQUNjO0FBQ007O0FBRS9DO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBLGVBQWU7QUFDZixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsMkRBQTZCO0FBQy9CO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLDhDQUFnQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsS0FBSztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0U7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9maXJlZm94L2ZpcmVmb3hfc2hpbS5qcz82MjE4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmV4cG9ydCB7c2hpbUdldFVzZXJNZWRpYX0gZnJvbSAnLi9nZXR1c2VybWVkaWEnO1xuZXhwb3J0IHtzaGltR2V0RGlzcGxheU1lZGlhfSBmcm9tICcuL2dldGRpc3BsYXltZWRpYSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltT25UcmFjayh3aW5kb3cpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENUcmFja0V2ZW50ICYmXG4gICAgICAoJ3JlY2VpdmVyJyBpbiB3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUpICYmXG4gICAgICAhKCd0cmFuc2NlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUsICd0cmFuc2NlaXZlcicsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHtyZWNlaXZlcjogdGhpcy5yZWNlaXZlcn07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3csIGJyb3dzZXJEZXRhaWxzKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fFxuICAgICAgISh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHwgd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uKSkge1xuICAgIHJldHVybjsgLy8gcHJvYmFibHkgbWVkaWEucGVlcmNvbm5lY3Rpb24uZW5hYmxlZD1mYWxzZSBpbiBhYm91dDpjb25maWdcbiAgfVxuICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJiB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICAvLyB2ZXJ5IGJhc2ljIHN1cHBvcnQgZm9yIG9sZCB2ZXJzaW9ucy5cbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gPSB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb247XG4gIH1cblxuICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDUzKSB7XG4gICAgLy8gc2hpbSBhd2F5IG5lZWQgZm9yIG9ic29sZXRlIFJUQ0ljZUNhbmRpZGF0ZS9SVENTZXNzaW9uRGVzY3JpcHRpb24uXG4gICAgWydzZXRMb2NhbERlc2NyaXB0aW9uJywgJ3NldFJlbW90ZURlc2NyaXB0aW9uJywgJ2FkZEljZUNhbmRpZGF0ZSddXG4gICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgY29uc3QgbmF0aXZlTWV0aG9kID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdO1xuICAgICAgICBjb25zdCBtZXRob2RPYmogPSB7W21ldGhvZF0oKSB7XG4gICAgICAgICAgYXJndW1lbnRzWzBdID0gbmV3ICgobWV0aG9kID09PSAnYWRkSWNlQ2FuZGlkYXRlJykgP1xuICAgICAgICAgICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA6XG4gICAgICAgICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pO1xuICAgICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfX07XG4gICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IG1ldGhvZE9ialttZXRob2RdO1xuICAgICAgfSk7XG4gIH1cblxuICBjb25zdCBtb2Rlcm5TdGF0c1R5cGVzID0ge1xuICAgIGluYm91bmRydHA6ICdpbmJvdW5kLXJ0cCcsXG4gICAgb3V0Ym91bmRydHA6ICdvdXRib3VuZC1ydHAnLFxuICAgIGNhbmRpZGF0ZXBhaXI6ICdjYW5kaWRhdGUtcGFpcicsXG4gICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLFxuICAgIHJlbW90ZWNhbmRpZGF0ZTogJ3JlbW90ZS1jYW5kaWRhdGUnXG4gIH07XG5cbiAgY29uc3QgbmF0aXZlR2V0U3RhdHMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgY29uc3QgW3NlbGVjdG9yLCBvblN1Y2MsIG9uRXJyXSA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmF0aXZlR2V0U3RhdHMuYXBwbHkodGhpcywgW3NlbGVjdG9yIHx8IG51bGxdKVxuICAgICAgLnRoZW4oc3RhdHMgPT4ge1xuICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDUzICYmICFvblN1Y2MpIHtcbiAgICAgICAgICAvLyBTaGltIG9ubHkgcHJvbWlzZSBnZXRTdGF0cyB3aXRoIHNwZWMtaHlwaGVucyBpbiB0eXBlIG5hbWVzXG4gICAgICAgICAgLy8gTGVhdmUgY2FsbGJhY2sgdmVyc2lvbiBhbG9uZTsgbWlzYyBvbGQgdXNlcyBvZiBmb3JFYWNoIGJlZm9yZSBNYXBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3RhdHMuZm9yRWFjaChzdGF0ID0+IHtcbiAgICAgICAgICAgICAgc3RhdC50eXBlID0gbW9kZXJuU3RhdHNUeXBlc1tzdGF0LnR5cGVdIHx8IHN0YXQudHlwZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlLm5hbWUgIT09ICdUeXBlRXJyb3InKSB7XG4gICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBdm9pZCBUeXBlRXJyb3I6IFwidHlwZVwiIGlzIHJlYWQtb25seSwgaW4gb2xkIHZlcnNpb25zLiAzNC00M2lzaFxuICAgICAgICAgICAgc3RhdHMuZm9yRWFjaCgoc3RhdCwgaSkgPT4ge1xuICAgICAgICAgICAgICBzdGF0cy5zZXQoaSwgT2JqZWN0LmFzc2lnbih7fSwgc3RhdCwge1xuICAgICAgICAgICAgICAgIHR5cGU6IG1vZGVyblN0YXRzVHlwZXNbc3RhdC50eXBlXSB8fCBzdGF0LnR5cGVcbiAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdGF0cztcbiAgICAgIH0pXG4gICAgICAudGhlbihvblN1Y2MsIG9uRXJyKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1TZW5kZXJHZXRTdGF0cyh3aW5kb3cpIHtcbiAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICB3aW5kb3cuUlRDUnRwU2VuZGVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAod2luZG93LlJUQ1J0cFNlbmRlciAmJiAnZ2V0U3RhdHMnIGluIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG9yaWdHZXRTZW5kZXJzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO1xuICBpZiAob3JpZ0dldFNlbmRlcnMpIHtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbiBnZXRTZW5kZXJzKCkge1xuICAgICAgY29uc3Qgc2VuZGVycyA9IG9yaWdHZXRTZW5kZXJzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICAgIHNlbmRlcnMuZm9yRWFjaChzZW5kZXIgPT4gc2VuZGVyLl9wYyA9IHRoaXMpO1xuICAgICAgcmV0dXJuIHNlbmRlcnM7XG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IG9yaWdBZGRUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7XG4gIGlmIChvcmlnQWRkVHJhY2spIHtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID0gZnVuY3Rpb24gYWRkVHJhY2soKSB7XG4gICAgICBjb25zdCBzZW5kZXIgPSBvcmlnQWRkVHJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHNlbmRlci5fcGMgPSB0aGlzO1xuICAgICAgcmV0dXJuIHNlbmRlcjtcbiAgICB9O1xuICB9XG4gIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhY2sgPyB0aGlzLl9wYy5nZXRTdGF0cyh0aGlzLnRyYWNrKSA6XG4gICAgICBQcm9taXNlLnJlc29sdmUobmV3IE1hcCgpKTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SZWNlaXZlckdldFN0YXRzKHdpbmRvdykge1xuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh3aW5kb3cuUlRDUnRwU2VuZGVyICYmICdnZXRTdGF0cycgaW4gd2luZG93LlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvcmlnR2V0UmVjZWl2ZXJzID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM7XG4gIGlmIChvcmlnR2V0UmVjZWl2ZXJzKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnMgPSBmdW5jdGlvbiBnZXRSZWNlaXZlcnMoKSB7XG4gICAgICBjb25zdCByZWNlaXZlcnMgPSBvcmlnR2V0UmVjZWl2ZXJzLmFwcGx5KHRoaXMsIFtdKTtcbiAgICAgIHJlY2VpdmVycy5mb3JFYWNoKHJlY2VpdmVyID0+IHJlY2VpdmVyLl9wYyA9IHRoaXMpO1xuICAgICAgcmV0dXJuIHJlY2VpdmVycztcbiAgICB9O1xuICB9XG4gIHV0aWxzLndyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgJ3RyYWNrJywgZSA9PiB7XG4gICAgZS5yZWNlaXZlci5fcGMgPSBlLnNyY0VsZW1lbnQ7XG4gICAgcmV0dXJuIGU7XG4gIH0pO1xuICB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlLmdldFN0YXRzID0gZnVuY3Rpb24gZ2V0U3RhdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKHRoaXMudHJhY2spO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVJlbW92ZVN0cmVhbSh3aW5kb3cpIHtcbiAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgICdyZW1vdmVTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPVxuICAgIGZ1bmN0aW9uIHJlbW92ZVN0cmVhbShzdHJlYW0pIHtcbiAgICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ3JlbW92ZVN0cmVhbScsICdyZW1vdmVUcmFjaycpO1xuICAgICAgdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaChzZW5kZXIgPT4ge1xuICAgICAgICBpZiAoc2VuZGVyLnRyYWNrICYmIHN0cmVhbS5nZXRUcmFja3MoKS5pbmNsdWRlcyhzZW5kZXIudHJhY2spKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVUcmFjayhzZW5kZXIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVJUQ0RhdGFDaGFubmVsKHdpbmRvdykge1xuICAvLyByZW5hbWUgRGF0YUNoYW5uZWwgdG8gUlRDRGF0YUNoYW5uZWwgKG5hdGl2ZSBmaXggaW4gRkY2MCk6XG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTExNzM4NTFcbiAgaWYgKHdpbmRvdy5EYXRhQ2hhbm5lbCAmJiAhd2luZG93LlJUQ0RhdGFDaGFubmVsKSB7XG4gICAgd2luZG93LlJUQ0RhdGFDaGFubmVsID0gd2luZG93LkRhdGFDaGFubmVsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQWRkVHJhbnNjZWl2ZXIod2luZG93KSB7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJydGNIYWNrcy9hZGFwdGVyL2lzc3Vlcy85OTgjaXNzdWVjb21tZW50LTUxNjkyMTY0N1xuICAvLyBGaXJlZm94IGlnbm9yZXMgdGhlIGluaXQgc2VuZEVuY29kaW5ncyBvcHRpb25zIHBhc3NlZCB0byBhZGRUcmFuc2NlaXZlclxuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzk2OTE4XG4gIGlmICghKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb3JpZ0FkZFRyYW5zY2VpdmVyID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFuc2NlaXZlcjtcbiAgaWYgKG9yaWdBZGRUcmFuc2NlaXZlcikge1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhbnNjZWl2ZXIgPVxuICAgICAgZnVuY3Rpb24gYWRkVHJhbnNjZWl2ZXIoKSB7XG4gICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzID0gW107XG4gICAgICAgIC8vIFdlYklETCBpbnB1dCBjb2VyY2lvbiBhbmQgdmFsaWRhdGlvblxuICAgICAgICBsZXQgc2VuZEVuY29kaW5ncyA9IGFyZ3VtZW50c1sxXSAmJiBhcmd1bWVudHNbMV0uc2VuZEVuY29kaW5ncztcbiAgICAgICAgaWYgKHNlbmRFbmNvZGluZ3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNlbmRFbmNvZGluZ3MgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBzZW5kRW5jb2RpbmdzID0gWy4uLnNlbmRFbmNvZGluZ3NdO1xuICAgICAgICBjb25zdCBzaG91bGRQZXJmb3JtQ2hlY2sgPSBzZW5kRW5jb2RpbmdzLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmIChzaG91bGRQZXJmb3JtQ2hlY2spIHtcbiAgICAgICAgICAvLyBJZiBzZW5kRW5jb2RpbmdzIHBhcmFtcyBhcmUgcHJvdmlkZWQsIHZhbGlkYXRlIGdyYW1tYXJcbiAgICAgICAgICBzZW5kRW5jb2RpbmdzLmZvckVhY2goKGVuY29kaW5nUGFyYW0pID0+IHtcbiAgICAgICAgICAgIGlmICgncmlkJyBpbiBlbmNvZGluZ1BhcmFtKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJpZFJlZ2V4ID0gL15bYS16MC05XXswLDE2fSQvaTtcbiAgICAgICAgICAgICAgaWYgKCFyaWRSZWdleC50ZXN0KGVuY29kaW5nUGFyYW0ucmlkKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgUklEIHZhbHVlIHByb3ZpZGVkLicpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ3NjYWxlUmVzb2x1dGlvbkRvd25CeScgaW4gZW5jb2RpbmdQYXJhbSkge1xuICAgICAgICAgICAgICBpZiAoIShwYXJzZUZsb2F0KGVuY29kaW5nUGFyYW0uc2NhbGVSZXNvbHV0aW9uRG93bkJ5KSA+PSAxLjApKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NjYWxlX3Jlc29sdXRpb25fZG93bl9ieSBtdXN0IGJlID49IDEuMCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ21heEZyYW1lcmF0ZScgaW4gZW5jb2RpbmdQYXJhbSkge1xuICAgICAgICAgICAgICBpZiAoIShwYXJzZUZsb2F0KGVuY29kaW5nUGFyYW0ubWF4RnJhbWVyYXRlKSA+PSAwKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdtYXhfZnJhbWVyYXRlIG11c3QgYmUgPj0gMC4wJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0cmFuc2NlaXZlciA9IG9yaWdBZGRUcmFuc2NlaXZlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICBpZiAoc2hvdWxkUGVyZm9ybUNoZWNrKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGluaXQgb3B0aW9ucyB3ZXJlIGFwcGxpZWQuIElmIG5vdCB3ZSBkbyB0aGlzIGluIGFuXG4gICAgICAgICAgLy8gYXN5bmNocm9ub3VzIHdheSBhbmQgc2F2ZSB0aGUgcHJvbWlzZSByZWZlcmVuY2UgaW4gYSBnbG9iYWwgb2JqZWN0LlxuICAgICAgICAgIC8vIFRoaXMgaXMgYW4gdWdseSBoYWNrLCBidXQgYXQgdGhlIHNhbWUgdGltZSBpcyB3YXkgbW9yZSByb2J1c3QgdGhhblxuICAgICAgICAgIC8vIGNoZWNraW5nIHRoZSBzZW5kZXIgcGFyYW1ldGVycyBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjcmVhdGVPZmZlclxuICAgICAgICAgIC8vIEFsc28gbm90ZSB0aGF0IGFmdGVyIHRoZSBjcmVhdGVvZmZlciB3ZSBhcmUgbm90IDEwMCUgc3VyZSB0aGF0XG4gICAgICAgICAgLy8gdGhlIHBhcmFtcyB3ZXJlIGFzeW5jaHJvbm91c2x5IGFwcGxpZWQgc28gd2UgbWlnaHQgbWlzcyB0aGVcbiAgICAgICAgICAvLyBvcHBvcnR1bml0eSB0byByZWNyZWF0ZSBvZmZlci5cbiAgICAgICAgICBjb25zdCB7c2VuZGVyfSA9IHRyYW5zY2VpdmVyO1xuICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHNlbmRlci5nZXRQYXJhbWV0ZXJzKCk7XG4gICAgICAgICAgaWYgKCEoJ2VuY29kaW5ncycgaW4gcGFyYW1zKSB8fFxuICAgICAgICAgICAgICAvLyBBdm9pZCBiZWluZyBmb29sZWQgYnkgcGF0Y2hlZCBnZXRQYXJhbWV0ZXJzKCkgYmVsb3cuXG4gICAgICAgICAgICAgIChwYXJhbXMuZW5jb2RpbmdzLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zLmVuY29kaW5nc1swXSkubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgICAgcGFyYW1zLmVuY29kaW5ncyA9IHNlbmRFbmNvZGluZ3M7XG4gICAgICAgICAgICBzZW5kZXIuc2VuZEVuY29kaW5ncyA9IHNlbmRFbmNvZGluZ3M7XG4gICAgICAgICAgICB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcy5wdXNoKHNlbmRlci5zZXRQYXJhbWV0ZXJzKHBhcmFtcylcbiAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzZW5kZXIuc2VuZEVuY29kaW5ncztcbiAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzZW5kZXIuc2VuZEVuY29kaW5ncztcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2NlaXZlcjtcbiAgICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1HZXRQYXJhbWV0ZXJzKHdpbmRvdykge1xuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUnRwU2VuZGVyKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBvcmlnR2V0UGFyYW1ldGVycyA9IHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFBhcmFtZXRlcnM7XG4gIGlmIChvcmlnR2V0UGFyYW1ldGVycykge1xuICAgIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFBhcmFtZXRlcnMgPVxuICAgICAgZnVuY3Rpb24gZ2V0UGFyYW1ldGVycygpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gb3JpZ0dldFBhcmFtZXRlcnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKCEoJ2VuY29kaW5ncycgaW4gcGFyYW1zKSkge1xuICAgICAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSBbXS5jb25jYXQodGhpcy5zZW5kRW5jb2RpbmdzIHx8IFt7fV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQ3JlYXRlT2ZmZXIod2luZG93KSB7XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJydGNIYWNrcy9hZGFwdGVyL2lzc3Vlcy85OTgjaXNzdWVjb21tZW50LTUxNjkyMTY0N1xuICAvLyBGaXJlZm94IGlnbm9yZXMgdGhlIGluaXQgc2VuZEVuY29kaW5ncyBvcHRpb25zIHBhc3NlZCB0byBhZGRUcmFuc2NlaXZlclxuICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzk2OTE4XG4gIGlmICghKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3Qgb3JpZ0NyZWF0ZU9mZmVyID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlciA9IGZ1bmN0aW9uIGNyZWF0ZU9mZmVyKCkge1xuICAgIGlmICh0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyAmJiB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbCh0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcylcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBvcmlnQ3JlYXRlT2ZmZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzID0gW107XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gb3JpZ0NyZWF0ZU9mZmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQ3JlYXRlQW5zd2VyKHdpbmRvdykge1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2VicnRjSGFja3MvYWRhcHRlci9pc3N1ZXMvOTk4I2lzc3VlY29tbWVudC01MTY5MjE2NDdcbiAgLy8gRmlyZWZveCBpZ25vcmVzIHRoZSBpbml0IHNlbmRFbmNvZGluZ3Mgb3B0aW9ucyBwYXNzZWQgdG8gYWRkVHJhbnNjZWl2ZXJcbiAgLy8gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM5NjkxOFxuICBpZiAoISh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG9yaWdDcmVhdGVBbnN3ZXIgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlcjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPSBmdW5jdGlvbiBjcmVhdGVBbnN3ZXIoKSB7XG4gICAgaWYgKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzICYmIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG9yaWdDcmVhdGVBbnN3ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzID0gW107XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gb3JpZ0NyZWF0ZUFuc3dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js":
/*!***********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   shimGetDisplayMedia: function() { return /* binding */ shimGetDisplayMedia; }\n/* harmony export */ });\n/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\nfunction shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9nZXRkaXNwbGF5bWVkaWEuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDYTs7QUFFTjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2ZpcmVmb3gvZ2V0ZGlzcGxheW1lZGlhLmpzP2QyODEiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIGFkYXB0ZXIuanMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltR2V0RGlzcGxheU1lZGlhKHdpbmRvdywgcHJlZmVycmVkTWVkaWFTb3VyY2UpIHtcbiAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmXG4gICAgJ2dldERpc3BsYXlNZWRpYScgaW4gd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCEod2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSA9XG4gICAgZnVuY3Rpb24gZ2V0RGlzcGxheU1lZGlhKGNvbnN0cmFpbnRzKSB7XG4gICAgICBpZiAoIShjb25zdHJhaW50cyAmJiBjb25zdHJhaW50cy52aWRlbykpIHtcbiAgICAgICAgY29uc3QgZXJyID0gbmV3IERPTUV4Y2VwdGlvbignZ2V0RGlzcGxheU1lZGlhIHdpdGhvdXQgdmlkZW8gJyArXG4gICAgICAgICAgICAnY29uc3RyYWludHMgaXMgdW5kZWZpbmVkJyk7XG4gICAgICAgIGVyci5uYW1lID0gJ05vdEZvdW5kRXJyb3InO1xuICAgICAgICAvLyBmcm9tIGh0dHBzOi8vaGV5Y2FtLmdpdGh1Yi5pby93ZWJpZGwvI2lkbC1ET01FeGNlcHRpb24tZXJyb3ItbmFtZXNcbiAgICAgICAgZXJyLmNvZGUgPSA4O1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb25zdHJhaW50cy52aWRlbyA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zdHJhaW50cy52aWRlbyA9IHttZWRpYVNvdXJjZTogcHJlZmVycmVkTWVkaWFTb3VyY2V9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3RyYWludHMudmlkZW8ubWVkaWFTb3VyY2UgPSBwcmVmZXJyZWRNZWRpYVNvdXJjZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpO1xuICAgIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js":
/*!********************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   shimGetUserMedia: function() { return /* binding */ shimGetUserMedia; }\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\n\n\nfunction shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('navigator.getUserMedia',\n      'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9nZXR1c2VybWVkaWEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2E7O0FBRXFCOztBQUUzQjtBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUksOENBQWdCO0FBQ3BCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9nZXR1c2VybWVkaWEuanM/MmIzZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbi8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltR2V0VXNlck1lZGlhKHdpbmRvdywgYnJvd3NlckRldGFpbHMpIHtcbiAgY29uc3QgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG4gIGNvbnN0IE1lZGlhU3RyZWFtVHJhY2sgPSB3aW5kb3cgJiYgd2luZG93Lk1lZGlhU3RyZWFtVHJhY2s7XG5cbiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpIHtcbiAgICAvLyBSZXBsYWNlIEZpcmVmb3ggNDQrJ3MgZGVwcmVjYXRpb24gd2FybmluZyB3aXRoIHVucHJlZml4ZWQgdmVyc2lvbi5cbiAgICB1dGlscy5kZXByZWNhdGVkKCduYXZpZ2F0b3IuZ2V0VXNlck1lZGlhJyxcbiAgICAgICduYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYScpO1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKG9uU3VjY2Vzcywgb25FcnJvcik7XG4gIH07XG5cbiAgaWYgKCEoYnJvd3NlckRldGFpbHMudmVyc2lvbiA+IDU1ICYmXG4gICAgICAnYXV0b0dhaW5Db250cm9sJyBpbiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFN1cHBvcnRlZENvbnN0cmFpbnRzKCkpKSB7XG4gICAgY29uc3QgcmVtYXAgPSBmdW5jdGlvbihvYmosIGEsIGIpIHtcbiAgICAgIGlmIChhIGluIG9iaiAmJiAhKGIgaW4gb2JqKSkge1xuICAgICAgICBvYmpbYl0gPSBvYmpbYV07XG4gICAgICAgIGRlbGV0ZSBvYmpbYV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IG5hdGl2ZUdldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLlxuICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGMuYXVkaW8gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGMpKTtcbiAgICAgICAgcmVtYXAoYy5hdWRpbywgJ2F1dG9HYWluQ29udHJvbCcsICdtb3pBdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgICAgcmVtYXAoYy5hdWRpbywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZUdldFVzZXJNZWRpYShjKTtcbiAgICB9O1xuXG4gICAgaWYgKE1lZGlhU3RyZWFtVHJhY2sgJiYgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3MpIHtcbiAgICAgIGNvbnN0IG5hdGl2ZUdldFNldHRpbmdzID0gTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3M7XG4gICAgICBNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZS5nZXRTZXR0aW5ncyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCBvYmogPSBuYXRpdmVHZXRTZXR0aW5ncy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICByZW1hcChvYmosICdtb3pBdXRvR2FpbkNvbnRyb2wnLCAnYXV0b0dhaW5Db250cm9sJyk7XG4gICAgICAgIHJlbWFwKG9iaiwgJ21vek5vaXNlU3VwcHJlc3Npb24nLCAnbm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoTWVkaWFTdHJlYW1UcmFjayAmJiBNZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzKSB7XG4gICAgICBjb25zdCBuYXRpdmVBcHBseUNvbnN0cmFpbnRzID1cbiAgICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cztcbiAgICAgIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHMgPSBmdW5jdGlvbihjKSB7XG4gICAgICAgIGlmICh0aGlzLmtpbmQgPT09ICdhdWRpbycgJiYgdHlwZW9mIGMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgYyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpO1xuICAgICAgICAgIHJlbWFwKGMsICdhdXRvR2FpbkNvbnRyb2wnLCAnbW96QXV0b0dhaW5Db250cm9sJyk7XG4gICAgICAgICAgcmVtYXAoYywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuYXRpdmVBcHBseUNvbnN0cmFpbnRzLmFwcGx5KHRoaXMsIFtjXSk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js":
/*!******************************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/safari/safari_shim.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   shimAudioContext: function() { return /* binding */ shimAudioContext; },\n/* harmony export */   shimCallbacksAPI: function() { return /* binding */ shimCallbacksAPI; },\n/* harmony export */   shimConstraints: function() { return /* binding */ shimConstraints; },\n/* harmony export */   shimCreateOfferLegacy: function() { return /* binding */ shimCreateOfferLegacy; },\n/* harmony export */   shimGetUserMedia: function() { return /* binding */ shimGetUserMedia; },\n/* harmony export */   shimLocalStreamsAPI: function() { return /* binding */ shimLocalStreamsAPI; },\n/* harmony export */   shimRTCIceServerUrls: function() { return /* binding */ shimRTCIceServerUrls; },\n/* harmony export */   shimRemoteStreamsAPI: function() { return /* binding */ shimRemoteStreamsAPI; },\n/* harmony export */   shimTrackEventTransceiver: function() { return /* binding */ shimTrackEventTransceiver; }\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(app-pages-browser)/./node_modules/webrtc-adapter/src/js/utils.js\");\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n\n\nfunction shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nfunction shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nfunction shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nfunction shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nfunction shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: _utils__WEBPACK_IMPORTED_MODULE_0__.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nfunction shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (server.urls === undefined && server.url) {\n            _utils__WEBPACK_IMPORTED_MODULE_0__.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nfunction shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nfunction shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nfunction shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvc2FmYXJpL3NhZmFyaV9zaGltLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNhO0FBQ3FCOztBQUUzQjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVPO0FBQ1A7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQSxPQUFPLE9BQU8saURBQW1CO0FBQ2pDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnQ0FBZ0M7QUFDeEQ7QUFDQTtBQUNBLFlBQVksOENBQWdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSx3Q0FBd0Msc0JBQXNCO0FBQzlEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLHdDQUF3QyxzQkFBc0I7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9zYWZhcmkvc2FmYXJpX3NoaW0uanM/ZGNmMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbid1c2Ugc3RyaWN0JztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1Mb2NhbFN0cmVhbXNBUEkod2luZG93KSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fCAhd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghKCdnZXRMb2NhbFN0cmVhbXMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXMgPVxuICAgICAgZnVuY3Rpb24gZ2V0TG9jYWxTdHJlYW1zKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykge1xuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9sb2NhbFN0cmVhbXM7XG4gICAgICB9O1xuICB9XG4gIGlmICghKCdhZGRTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgY29uc3QgX2FkZFRyYWNrID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uIGFkZFN0cmVhbShzdHJlYW0pIHtcbiAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zKSB7XG4gICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLl9sb2NhbFN0cmVhbXMuaW5jbHVkZXMoc3RyZWFtKSkge1xuICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgICAgfVxuICAgICAgLy8gVHJ5IHRvIGVtdWxhdGUgQ2hyb21lJ3MgYmVoYXZpb3VyIG9mIGFkZGluZyBpbiBhdWRpby12aWRlbyBvcmRlci5cbiAgICAgIC8vIFNhZmFyaSBvcmRlcnMgYnkgdHJhY2sgaWQuXG4gICAgICBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IF9hZGRUcmFjay5jYWxsKHRoaXMsIHRyYWNrLFxuICAgICAgICBzdHJlYW0pKTtcbiAgICAgIHN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2godHJhY2sgPT4gX2FkZFRyYWNrLmNhbGwodGhpcywgdHJhY2ssXG4gICAgICAgIHN0cmVhbSkpO1xuICAgIH07XG5cbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID1cbiAgICAgIGZ1bmN0aW9uIGFkZFRyYWNrKHRyYWNrLCAuLi5zdHJlYW1zKSB7XG4gICAgICAgIGlmIChzdHJlYW1zKSB7XG4gICAgICAgICAgc3RyZWFtcy5mb3JFYWNoKChzdHJlYW0pID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtzdHJlYW1dO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zLmluY2x1ZGVzKHN0cmVhbSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX2FkZFRyYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICB9XG4gIGlmICghKCdyZW1vdmVTdHJlYW0nIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPVxuICAgICAgZnVuY3Rpb24gcmVtb3ZlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICBpZiAoIXRoaXMuX2xvY2FsU3RyZWFtcykge1xuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgY29uc3QgdHJhY2tzID0gc3RyZWFtLmdldFRyYWNrcygpO1xuICAgICAgICB0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKHNlbmRlciA9PiB7XG4gICAgICAgICAgaWYgKHRyYWNrcy5pbmNsdWRlcyhzZW5kZXIudHJhY2spKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVRyYWNrKHNlbmRlcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1SZW1vdGVTdHJlYW1zQVBJKHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoISgnZ2V0UmVtb3RlU3RyZWFtcycgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXMgPVxuICAgICAgZnVuY3Rpb24gZ2V0UmVtb3RlU3RyZWFtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlbW90ZVN0cmVhbXMgPyB0aGlzLl9yZW1vdGVTdHJlYW1zIDogW107XG4gICAgICB9O1xuICB9XG4gIGlmICghKCdvbmFkZHN0cmVhbScgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ29uYWRkc3RyZWFtJywge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb25hZGRzdHJlYW07XG4gICAgICB9LFxuICAgICAgc2V0KGYpIHtcbiAgICAgICAgaWYgKHRoaXMuX29uYWRkc3RyZWFtKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbmFkZHN0cmVhbSk7XG4gICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29uYWRkc3RyZWFtcG9seSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbmFkZHN0cmVhbSA9IGYpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb25hZGRzdHJlYW1wb2x5ID0gKGUpID0+IHtcbiAgICAgICAgICBlLnN0cmVhbXMuZm9yRWFjaChzdHJlYW0gPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9yZW1vdGVTdHJlYW1zKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9yZW1vdGVTdHJlYW1zLmluY2x1ZGVzKHN0cmVhbSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgnYWRkc3RyZWFtJyk7XG4gICAgICAgICAgICBldmVudC5zdHJlYW0gPSBzdHJlYW07XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24gPVxuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgIGZ1bmN0aW9uIHNldFJlbW90ZURlc2NyaXB0aW9uKCkge1xuICAgICAgICBjb25zdCBwYyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5fb25hZGRzdHJlYW1wb2x5KSB7XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29uYWRkc3RyZWFtcG9seSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUuc3RyZWFtcy5mb3JFYWNoKHN0cmVhbSA9PiB7XG4gICAgICAgICAgICAgIGlmICghcGMuX3JlbW90ZVN0cmVhbXMpIHtcbiAgICAgICAgICAgICAgICBwYy5fcmVtb3RlU3RyZWFtcyA9IFtdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChwYy5fcmVtb3RlU3RyZWFtcy5pbmRleE9mKHN0cmVhbSkgPj0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwYy5fcmVtb3RlU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCdhZGRzdHJlYW0nKTtcbiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgICAgICAgICBwYy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmlnU2V0UmVtb3RlRGVzY3JpcHRpb24uYXBwbHkocGMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQ2FsbGJhY2tzQVBJKHdpbmRvdykge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBwcm90b3R5cGUgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO1xuICBjb25zdCBvcmlnQ3JlYXRlT2ZmZXIgPSBwcm90b3R5cGUuY3JlYXRlT2ZmZXI7XG4gIGNvbnN0IG9yaWdDcmVhdGVBbnN3ZXIgPSBwcm90b3R5cGUuY3JlYXRlQW5zd2VyO1xuICBjb25zdCBzZXRMb2NhbERlc2NyaXB0aW9uID0gcHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb247XG4gIGNvbnN0IHNldFJlbW90ZURlc2NyaXB0aW9uID0gcHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO1xuICBjb25zdCBhZGRJY2VDYW5kaWRhdGUgPSBwcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO1xuXG4gIHByb3RvdHlwZS5jcmVhdGVPZmZlciA9XG4gICAgZnVuY3Rpb24gY3JlYXRlT2ZmZXIoc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSA/IGFyZ3VtZW50c1syXSA6IGFyZ3VtZW50c1swXTtcbiAgICAgIGNvbnN0IHByb21pc2UgPSBvcmlnQ3JlYXRlT2ZmZXIuYXBwbHkodGhpcywgW29wdGlvbnNdKTtcbiAgICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuXG4gIHByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUFuc3dlcihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IChhcmd1bWVudHMubGVuZ3RoID49IDIpID8gYXJndW1lbnRzWzJdIDogYXJndW1lbnRzWzBdO1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG9yaWdDcmVhdGVBbnN3ZXIuYXBwbHkodGhpcywgW29wdGlvbnNdKTtcbiAgICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuXG4gIGxldCB3aXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihkZXNjcmlwdGlvbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBwcm9taXNlID0gc2V0TG9jYWxEZXNjcmlwdGlvbi5hcHBseSh0aGlzLCBbZGVzY3JpcHRpb25dKTtcbiAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuICBwcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9IHdpdGhDYWxsYmFjaztcblxuICB3aXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihkZXNjcmlwdGlvbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBwcm9taXNlID0gc2V0UmVtb3RlRGVzY3JpcHRpb24uYXBwbHkodGhpcywgW2Rlc2NyaXB0aW9uXSk7XG4gICAgaWYgKCFmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBwcm9taXNlLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfTtcbiAgcHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uID0gd2l0aENhbGxiYWNrO1xuXG4gIHdpdGhDYWxsYmFjayA9IGZ1bmN0aW9uKGNhbmRpZGF0ZSwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICBjb25zdCBwcm9taXNlID0gYWRkSWNlQ2FuZGlkYXRlLmFwcGx5KHRoaXMsIFtjYW5kaWRhdGVdKTtcbiAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9O1xuICBwcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gd2l0aENhbGxiYWNrO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbUdldFVzZXJNZWRpYSh3aW5kb3cpIHtcbiAgY29uc3QgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgaWYgKG5hdmlnYXRvci5tZWRpYURldmljZXMgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICAvLyBzaGltIG5vdCBuZWVkZWQgaW4gU2FmYXJpIDEyLjFcbiAgICBjb25zdCBtZWRpYURldmljZXMgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzO1xuICAgIGNvbnN0IF9nZXRVc2VyTWVkaWEgPSBtZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQobWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IChjb25zdHJhaW50cykgPT4ge1xuICAgICAgcmV0dXJuIF9nZXRVc2VyTWVkaWEoc2hpbUNvbnN0cmFpbnRzKGNvbnN0cmFpbnRzKSk7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghbmF2aWdhdG9yLmdldFVzZXJNZWRpYSAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmXG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpIHtcbiAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24gZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLCBjYiwgZXJyY2IpIHtcbiAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKVxuICAgICAgICAudGhlbihjYiwgZXJyY2IpO1xuICAgIH0uYmluZChuYXZpZ2F0b3IpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltQ29uc3RyYWludHMoY29uc3RyYWludHMpIHtcbiAgaWYgKGNvbnN0cmFpbnRzICYmIGNvbnN0cmFpbnRzLnZpZGVvICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSxcbiAgICAgIGNvbnN0cmFpbnRzLFxuICAgICAge3ZpZGVvOiB1dGlscy5jb21wYWN0T2JqZWN0KGNvbnN0cmFpbnRzLnZpZGVvKX1cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGNvbnN0cmFpbnRzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hpbVJUQ0ljZVNlcnZlclVybHMod2luZG93KSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIG1pZ3JhdGUgZnJvbSBub24tc3BlYyBSVENJY2VTZXJ2ZXIudXJsIHRvIFJUQ0ljZVNlcnZlci51cmxzXG4gIGNvbnN0IE9yaWdQZWVyQ29ubmVjdGlvbiA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID1cbiAgICBmdW5jdGlvbiBSVENQZWVyQ29ubmVjdGlvbihwY0NvbmZpZywgcGNDb25zdHJhaW50cykge1xuICAgICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVNlcnZlcnMpIHtcbiAgICAgICAgY29uc3QgbmV3SWNlU2VydmVycyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBjQ29uZmlnLmljZVNlcnZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsZXQgc2VydmVyID0gcGNDb25maWcuaWNlU2VydmVyc1tpXTtcbiAgICAgICAgICBpZiAoc2VydmVyLnVybHMgPT09IHVuZGVmaW5lZCAmJiBzZXJ2ZXIudXJsKSB7XG4gICAgICAgICAgICB1dGlscy5kZXByZWNhdGVkKCdSVENJY2VTZXJ2ZXIudXJsJywgJ1JUQ0ljZVNlcnZlci51cmxzJyk7XG4gICAgICAgICAgICBzZXJ2ZXIgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNlcnZlcikpO1xuICAgICAgICAgICAgc2VydmVyLnVybHMgPSBzZXJ2ZXIudXJsO1xuICAgICAgICAgICAgZGVsZXRlIHNlcnZlci51cmw7XG4gICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2goc2VydmVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHBjQ29uZmlnLmljZVNlcnZlcnNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwY0NvbmZpZy5pY2VTZXJ2ZXJzID0gbmV3SWNlU2VydmVycztcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgT3JpZ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcbiAgICB9O1xuICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID0gT3JpZ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgLy8gd3JhcCBzdGF0aWMgbWV0aG9kcy4gQ3VycmVudGx5IGp1c3QgZ2VuZXJhdGVDZXJ0aWZpY2F0ZS5cbiAgaWYgKCdnZW5lcmF0ZUNlcnRpZmljYXRlJyBpbiBPcmlnUGVlckNvbm5lY3Rpb24pIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLCAnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIE9yaWdQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyKHdpbmRvdykge1xuICAvLyBBZGQgZXZlbnQudHJhbnNjZWl2ZXIgbWVtYmVyIG92ZXIgZGVwcmVjYXRlZCBldmVudC5yZWNlaXZlclxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1RyYWNrRXZlbnQgJiZcbiAgICAgICdyZWNlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlICYmXG4gICAgICAhKCd0cmFuc2NlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUsICd0cmFuc2NlaXZlcicsIHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHtyZWNlaXZlcjogdGhpcy5yZWNlaXZlcn07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1DcmVhdGVPZmZlckxlZ2FjeSh3aW5kb3cpIHtcbiAgY29uc3Qgb3JpZ0NyZWF0ZU9mZmVyID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcjtcbiAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlciA9XG4gICAgZnVuY3Rpb24gY3JlYXRlT2ZmZXIob2ZmZXJPcHRpb25zKSB7XG4gICAgICBpZiAob2ZmZXJPcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgLy8gc3VwcG9ydCBiaXQgdmFsdWVzXG4gICAgICAgICAgb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPVxuICAgICAgICAgICAgISFvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb1RyYW5zY2VpdmVyID0gdGhpcy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKHRyYW5zY2VpdmVyID0+XG4gICAgICAgICAgdHJhbnNjZWl2ZXIucmVjZWl2ZXIudHJhY2sua2luZCA9PT0gJ2F1ZGlvJyk7XG4gICAgICAgIGlmIChvZmZlck9wdGlvbnMub2ZmZXJUb1JlY2VpdmVBdWRpbyA9PT0gZmFsc2UgJiYgYXVkaW9UcmFuc2NlaXZlcikge1xuICAgICAgICAgIGlmIChhdWRpb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2Jykge1xuICAgICAgICAgICAgaWYgKGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuc2V0RGlyZWN0aW9uKCdzZW5kb25seScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPSAnc2VuZG9ubHknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoYXVkaW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPT09ICdyZWN2b25seScpIHtcbiAgICAgICAgICAgIGlmIChhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuICAgICAgICAgICAgICBhdWRpb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignaW5hY3RpdmUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGF1ZGlvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gJ2luYWN0aXZlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlQXVkaW8gPT09IHRydWUgJiZcbiAgICAgICAgICAgICFhdWRpb1RyYW5zY2VpdmVyKSB7XG4gICAgICAgICAgdGhpcy5hZGRUcmFuc2NlaXZlcignYXVkaW8nLCB7ZGlyZWN0aW9uOiAncmVjdm9ubHknfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIC8vIHN1cHBvcnQgYml0IHZhbHVlc1xuICAgICAgICAgIG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID1cbiAgICAgICAgICAgICEhb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW87XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmlkZW9UcmFuc2NlaXZlciA9IHRoaXMuZ2V0VHJhbnNjZWl2ZXJzKCkuZmluZCh0cmFuc2NlaXZlciA9PlxuICAgICAgICAgIHRyYW5zY2VpdmVyLnJlY2VpdmVyLnRyYWNrLmtpbmQgPT09ICd2aWRlbycpO1xuICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IGZhbHNlICYmIHZpZGVvVHJhbnNjZWl2ZXIpIHtcbiAgICAgICAgICBpZiAodmlkZW9UcmFuc2NlaXZlci5kaXJlY3Rpb24gPT09ICdzZW5kcmVjdicpIHtcbiAgICAgICAgICAgIGlmICh2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbikge1xuICAgICAgICAgICAgICB2aWRlb1RyYW5zY2VpdmVyLnNldERpcmVjdGlvbignc2VuZG9ubHknKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID0gJ3NlbmRvbmx5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHZpZGVvVHJhbnNjZWl2ZXIuZGlyZWN0aW9uID09PSAncmVjdm9ubHknKSB7XG4gICAgICAgICAgICBpZiAodmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgdmlkZW9UcmFuc2NlaXZlci5zZXREaXJlY3Rpb24oJ2luYWN0aXZlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2aWRlb1RyYW5zY2VpdmVyLmRpcmVjdGlvbiA9ICdpbmFjdGl2ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZVZpZGVvID09PSB0cnVlICYmXG4gICAgICAgICAgICAhdmlkZW9UcmFuc2NlaXZlcikge1xuICAgICAgICAgIHRoaXMuYWRkVHJhbnNjZWl2ZXIoJ3ZpZGVvJywge2RpcmVjdGlvbjogJ3JlY3Zvbmx5J30pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3JpZ0NyZWF0ZU9mZmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoaW1BdWRpb0NvbnRleHQod2luZG93KSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fCB3aW5kb3cuQXVkaW9Db250ZXh0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHdpbmRvdy5BdWRpb0NvbnRleHQgPSB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0O1xufVxuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/webrtc-adapter/src/js/utils.js":
/*!*****************************************************!*\
  !*** ./node_modules/webrtc-adapter/src/js/utils.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compactObject: function() { return /* binding */ compactObject; },\n/* harmony export */   deprecated: function() { return /* binding */ deprecated; },\n/* harmony export */   detectBrowser: function() { return /* binding */ detectBrowser; },\n/* harmony export */   disableLog: function() { return /* binding */ disableLog; },\n/* harmony export */   disableWarnings: function() { return /* binding */ disableWarnings; },\n/* harmony export */   extractVersion: function() { return /* binding */ extractVersion; },\n/* harmony export */   filterStats: function() { return /* binding */ filterStats; },\n/* harmony export */   log: function() { return /* binding */ log; },\n/* harmony export */   walkStats: function() { return /* binding */ walkStats; },\n/* harmony export */   wrapPeerConnectionEvent: function() { return /* binding */ wrapPeerConnectionEvent; }\n/* harmony export */ });\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nfunction extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseFloat(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nfunction disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n    'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nfunction disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nfunction log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nfunction deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nfunction detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator ||\n      !window.navigator.userAgent) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = parseInt(extractVersion(navigator.userAgent,\n      /Firefox\\/(\\d+)\\./, 1));\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = parseInt(extractVersion(navigator.userAgent,\n      /Chrom(e|ium)\\/(\\d+)\\./, 2));\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = parseInt(extractVersion(navigator.userAgent,\n      /AppleWebKit\\/(\\d+)\\./, 1));\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n    // Only for internal usage.\n    result._safariVersion = extractVersion(navigator.userAgent,\n      /Version\\/(\\d+(\\.?\\d+))/, 1);\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nfunction compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nfunction filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvdXRpbHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDYTs7QUFFYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxTQUFTO0FBQ3BCLFlBQVksU0FBUztBQUNyQjtBQUNPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsWUFBWSxRQUFRO0FBQ3BCO0FBQ0E7QUFDTztBQUNQO0FBQ0Esa0JBQWtCOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxXQUFXOztBQUVwQixtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLE9BQU87QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxhQUFhO0FBQ3BELEdBQUcsSUFBSTtBQUNQOztBQUVBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy91dGlscy5qcz9kMTI0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbmxldCBsb2dEaXNhYmxlZF8gPSB0cnVlO1xubGV0IGRlcHJlY2F0aW9uV2FybmluZ3NfID0gdHJ1ZTtcblxuLyoqXG4gKiBFeHRyYWN0IGJyb3dzZXIgdmVyc2lvbiBvdXQgb2YgdGhlIHByb3ZpZGVkIHVzZXIgYWdlbnQgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7IXN0cmluZ30gdWFzdHJpbmcgdXNlckFnZW50IHN0cmluZy5cbiAqIEBwYXJhbSB7IXN0cmluZ30gZXhwciBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCBhcyBtYXRjaCBjcml0ZXJpYS5cbiAqIEBwYXJhbSB7IW51bWJlcn0gcG9zIHBvc2l0aW9uIGluIHRoZSB2ZXJzaW9uIHN0cmluZyB0byBiZSByZXR1cm5lZC5cbiAqIEByZXR1cm4geyFudW1iZXJ9IGJyb3dzZXIgdmVyc2lvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RWZXJzaW9uKHVhc3RyaW5nLCBleHByLCBwb3MpIHtcbiAgY29uc3QgbWF0Y2ggPSB1YXN0cmluZy5tYXRjaChleHByKTtcbiAgcmV0dXJuIG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+PSBwb3MgJiYgcGFyc2VGbG9hdChtYXRjaFtwb3NdLCAxMCk7XG59XG5cbi8vIFdyYXBzIHRoZSBwZWVyY29ubmVjdGlvbiBldmVudCBldmVudE5hbWVUb1dyYXAgaW4gYSBmdW5jdGlvblxuLy8gd2hpY2ggcmV0dXJucyB0aGUgbW9kaWZpZWQgZXZlbnQgb2JqZWN0IChvciBmYWxzZSB0byBwcmV2ZW50XG4vLyB0aGUgZXZlbnQpLlxuZXhwb3J0IGZ1bmN0aW9uIHdyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgZXZlbnROYW1lVG9XcmFwLCB3cmFwcGVyKSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHByb3RvID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgY29uc3QgbmF0aXZlQWRkRXZlbnRMaXN0ZW5lciA9IHByb3RvLmFkZEV2ZW50TGlzdGVuZXI7XG4gIHByb3RvLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihuYXRpdmVFdmVudE5hbWUsIGNiKSB7XG4gICAgaWYgKG5hdGl2ZUV2ZW50TmFtZSAhPT0gZXZlbnROYW1lVG9XcmFwKSB7XG4gICAgICByZXR1cm4gbmF0aXZlQWRkRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBjb25zdCB3cmFwcGVkQ2FsbGJhY2sgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgbW9kaWZpZWRFdmVudCA9IHdyYXBwZXIoZSk7XG4gICAgICBpZiAobW9kaWZpZWRFdmVudCkge1xuICAgICAgICBpZiAoY2IuaGFuZGxlRXZlbnQpIHtcbiAgICAgICAgICBjYi5oYW5kbGVFdmVudChtb2RpZmllZEV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYihtb2RpZmllZEV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5fZXZlbnRNYXAgPSB0aGlzLl9ldmVudE1hcCB8fCB7fTtcbiAgICBpZiAoIXRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0pIHtcbiAgICAgIHRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0gPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIHRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0uc2V0KGNiLCB3cmFwcGVkQ2FsbGJhY2spO1xuICAgIHJldHVybiBuYXRpdmVBZGRFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIFtuYXRpdmVFdmVudE5hbWUsXG4gICAgICB3cmFwcGVkQ2FsbGJhY2tdKTtcbiAgfTtcblxuICBjb25zdCBuYXRpdmVSZW1vdmVFdmVudExpc3RlbmVyID0gcHJvdG8ucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgcHJvdG8ucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKG5hdGl2ZUV2ZW50TmFtZSwgY2IpIHtcbiAgICBpZiAobmF0aXZlRXZlbnROYW1lICE9PSBldmVudE5hbWVUb1dyYXAgfHwgIXRoaXMuX2V2ZW50TWFwXG4gICAgICAgIHx8ICF0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdKSB7XG4gICAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2V2ZW50TWFwW2V2ZW50TmFtZVRvV3JhcF0uaGFzKGNiKSkge1xuICAgICAgcmV0dXJuIG5hdGl2ZVJlbW92ZUV2ZW50TGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgY29uc3QgdW53cmFwcGVkQ2IgPSB0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdLmdldChjYik7XG4gICAgdGhpcy5fZXZlbnRNYXBbZXZlbnROYW1lVG9XcmFwXS5kZWxldGUoY2IpO1xuICAgIGlmICh0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdLnNpemUgPT09IDApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudE1hcFtldmVudE5hbWVUb1dyYXBdO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXModGhpcy5fZXZlbnRNYXApLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50TWFwO1xuICAgIH1cbiAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBbbmF0aXZlRXZlbnROYW1lLFxuICAgICAgdW53cmFwcGVkQ2JdKTtcbiAgfTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sICdvbicgKyBldmVudE5hbWVUb1dyYXAsIHtcbiAgICBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF07XG4gICAgfSxcbiAgICBzZXQoY2IpIHtcbiAgICAgIGlmICh0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXSkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lVG9XcmFwLFxuICAgICAgICAgIHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdKTtcbiAgICAgICAgZGVsZXRlIHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdO1xuICAgICAgfVxuICAgICAgaWYgKGNiKSB7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWVUb1dyYXAsXG4gICAgICAgICAgdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF0gPSBjYik7XG4gICAgICB9XG4gICAgfSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVMb2coYm9vbCkge1xuICBpZiAodHlwZW9mIGJvb2wgIT09ICdib29sZWFuJykge1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0FyZ3VtZW50IHR5cGU6ICcgKyB0eXBlb2YgYm9vbCArXG4gICAgICAgICcuIFBsZWFzZSB1c2UgYSBib29sZWFuLicpO1xuICB9XG4gIGxvZ0Rpc2FibGVkXyA9IGJvb2w7XG4gIHJldHVybiAoYm9vbCkgPyAnYWRhcHRlci5qcyBsb2dnaW5nIGRpc2FibGVkJyA6XG4gICAgJ2FkYXB0ZXIuanMgbG9nZ2luZyBlbmFibGVkJztcbn1cblxuLyoqXG4gKiBEaXNhYmxlIG9yIGVuYWJsZSBkZXByZWNhdGlvbiB3YXJuaW5nc1xuICogQHBhcmFtIHshYm9vbGVhbn0gYm9vbCBzZXQgdG8gdHJ1ZSB0byBkaXNhYmxlIHdhcm5pbmdzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZVdhcm5pbmdzKGJvb2wpIHtcbiAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdBcmd1bWVudCB0eXBlOiAnICsgdHlwZW9mIGJvb2wgK1xuICAgICAgICAnLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi4nKTtcbiAgfVxuICBkZXByZWNhdGlvbldhcm5pbmdzXyA9ICFib29sO1xuICByZXR1cm4gJ2FkYXB0ZXIuanMgZGVwcmVjYXRpb24gd2FybmluZ3MgJyArIChib29sID8gJ2Rpc2FibGVkJyA6ICdlbmFibGVkJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2coKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChsb2dEaXNhYmxlZF8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5sb2cgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2hvd3MgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHN1Z2dlc3RpbmcgdGhlIG1vZGVybiBhbmQgc3BlYy1jb21wYXRpYmxlIEFQSS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlcHJlY2F0ZWQob2xkTWV0aG9kLCBuZXdNZXRob2QpIHtcbiAgaWYgKCFkZXByZWNhdGlvbldhcm5pbmdzXykge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zb2xlLndhcm4ob2xkTWV0aG9kICsgJyBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlICcgKyBuZXdNZXRob2QgK1xuICAgICAgJyBpbnN0ZWFkLicpO1xufVxuXG4vKipcbiAqIEJyb3dzZXIgZGV0ZWN0b3IuXG4gKlxuICogQHJldHVybiB7b2JqZWN0fSByZXN1bHQgY29udGFpbmluZyBicm93c2VyIGFuZCB2ZXJzaW9uXG4gKiAgICAgcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdEJyb3dzZXIod2luZG93KSB7XG4gIC8vIFJldHVybmVkIHJlc3VsdCBvYmplY3QuXG4gIGNvbnN0IHJlc3VsdCA9IHticm93c2VyOiBudWxsLCB2ZXJzaW9uOiBudWxsfTtcblxuICAvLyBGYWlsIGVhcmx5IGlmIGl0J3Mgbm90IGEgYnJvd3NlclxuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgIXdpbmRvdy5uYXZpZ2F0b3IgfHxcbiAgICAgICF3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkge1xuICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIGJyb3dzZXIuJztcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgY29uc3Qge25hdmlnYXRvcn0gPSB3aW5kb3c7XG5cbiAgaWYgKG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEpIHsgLy8gRmlyZWZveC5cbiAgICByZXN1bHQuYnJvd3NlciA9ICdmaXJlZm94JztcbiAgICByZXN1bHQudmVyc2lvbiA9IHBhcnNlSW50KGV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAvRmlyZWZveFxcLyhcXGQrKVxcLi8sIDEpKTtcbiAgfSBlbHNlIGlmIChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhIHx8XG4gICAgICAod2luZG93LmlzU2VjdXJlQ29udGV4dCA9PT0gZmFsc2UgJiYgd2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKSkge1xuICAgIC8vIENocm9tZSwgQ2hyb21pdW0sIFdlYnZpZXcsIE9wZXJhLlxuICAgIC8vIFZlcnNpb24gbWF0Y2hlcyBDaHJvbWUvV2ViUlRDIHZlcnNpb24uXG4gICAgLy8gQ2hyb21lIDc0IHJlbW92ZWQgd2Via2l0R2V0VXNlck1lZGlhIG9uIGh0dHAgYXMgd2VsbCBzbyB3ZSBuZWVkIHRoZVxuICAgIC8vIG1vcmUgY29tcGxpY2F0ZWQgZmFsbGJhY2sgdG8gd2Via2l0UlRDUGVlckNvbm5lY3Rpb24uXG4gICAgcmVzdWx0LmJyb3dzZXIgPSAnY2hyb21lJztcbiAgICByZXN1bHQudmVyc2lvbiA9IHBhcnNlSW50KGV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAvQ2hyb20oZXxpdW0pXFwvKFxcZCspXFwuLywgMikpO1xuICB9IGVsc2UgaWYgKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vKSkgeyAvLyBTYWZhcmkuXG4gICAgcmVzdWx0LmJyb3dzZXIgPSAnc2FmYXJpJztcbiAgICByZXN1bHQudmVyc2lvbiA9IHBhcnNlSW50KGV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vLCAxKSk7XG4gICAgcmVzdWx0LnN1cHBvcnRzVW5pZmllZFBsYW4gPSB3aW5kb3cuUlRDUnRwVHJhbnNjZWl2ZXIgJiZcbiAgICAgICAgJ2N1cnJlbnREaXJlY3Rpb24nIGluIHdpbmRvdy5SVENSdHBUcmFuc2NlaXZlci5wcm90b3R5cGU7XG4gICAgLy8gT25seSBmb3IgaW50ZXJuYWwgdXNhZ2UuXG4gICAgcmVzdWx0Ll9zYWZhcmlWZXJzaW9uID0gZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgIC9WZXJzaW9uXFwvKFxcZCsoXFwuP1xcZCspKS8sIDEpO1xuICB9IGVsc2UgeyAvLyBEZWZhdWx0IGZhbGx0aHJvdWdoOiBub3Qgc3VwcG9ydGVkLlxuICAgIHJlc3VsdC5icm93c2VyID0gJ05vdCBhIHN1cHBvcnRlZCBicm93c2VyLic7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHNvbWV0aGluZyBpcyBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHsqfSB2YWwgVGhlIHNvbWV0aGluZyB5b3Ugd2FudCB0byBjaGVjay5cbiAqIEByZXR1cm4gdHJ1ZSBpZiB2YWwgaXMgYW4gb2JqZWN0LCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhbGwgZW1wdHkgb2JqZWN0cyBhbmQgdW5kZWZpbmVkIHZhbHVlc1xuICogZnJvbSBhIG5lc3RlZCBvYmplY3QgLS0gYW4gZW5oYW5jZWQgYW5kIHZhbmlsbGEgdmVyc2lvblxuICogb2YgTG9kYXNoJ3MgYGNvbXBhY3RgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFjdE9iamVjdChkYXRhKSB7XG4gIGlmICghaXNPYmplY3QoZGF0YSkpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3Qua2V5cyhkYXRhKS5yZWR1Y2UoZnVuY3Rpb24oYWNjdW11bGF0b3IsIGtleSkge1xuICAgIGNvbnN0IGlzT2JqID0gaXNPYmplY3QoZGF0YVtrZXldKTtcbiAgICBjb25zdCB2YWx1ZSA9IGlzT2JqID8gY29tcGFjdE9iamVjdChkYXRhW2tleV0pIDogZGF0YVtrZXldO1xuICAgIGNvbnN0IGlzRW1wdHlPYmplY3QgPSBpc09iaiAmJiAhT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aDtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCBpc0VtcHR5T2JqZWN0KSB7XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGFjY3VtdWxhdG9yLCB7W2tleV06IHZhbHVlfSk7XG4gIH0sIHt9KTtcbn1cblxuLyogaXRlcmF0ZXMgdGhlIHN0YXRzIGdyYXBoIHJlY3Vyc2l2ZWx5LiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdhbGtTdGF0cyhzdGF0cywgYmFzZSwgcmVzdWx0U2V0KSB7XG4gIGlmICghYmFzZSB8fCByZXN1bHRTZXQuaGFzKGJhc2UuaWQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHJlc3VsdFNldC5zZXQoYmFzZS5pZCwgYmFzZSk7XG4gIE9iamVjdC5rZXlzKGJhc2UpLmZvckVhY2gobmFtZSA9PiB7XG4gICAgaWYgKG5hbWUuZW5kc1dpdGgoJ0lkJykpIHtcbiAgICAgIHdhbGtTdGF0cyhzdGF0cywgc3RhdHMuZ2V0KGJhc2VbbmFtZV0pLCByZXN1bHRTZXQpO1xuICAgIH0gZWxzZSBpZiAobmFtZS5lbmRzV2l0aCgnSWRzJykpIHtcbiAgICAgIGJhc2VbbmFtZV0uZm9yRWFjaChpZCA9PiB7XG4gICAgICAgIHdhbGtTdGF0cyhzdGF0cywgc3RhdHMuZ2V0KGlkKSwgcmVzdWx0U2V0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qIGZpbHRlciBnZXRTdGF0cyBmb3IgYSBzZW5kZXIvcmVjZWl2ZXIgdHJhY2suICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyU3RhdHMocmVzdWx0LCB0cmFjaywgb3V0Ym91bmQpIHtcbiAgY29uc3Qgc3RyZWFtU3RhdHNUeXBlID0gb3V0Ym91bmQgPyAnb3V0Ym91bmQtcnRwJyA6ICdpbmJvdW5kLXJ0cCc7XG4gIGNvbnN0IGZpbHRlcmVkUmVzdWx0ID0gbmV3IE1hcCgpO1xuICBpZiAodHJhY2sgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmlsdGVyZWRSZXN1bHQ7XG4gIH1cbiAgY29uc3QgdHJhY2tTdGF0cyA9IFtdO1xuICByZXN1bHQuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgaWYgKHZhbHVlLnR5cGUgPT09ICd0cmFjaycgJiZcbiAgICAgICAgdmFsdWUudHJhY2tJZGVudGlmaWVyID09PSB0cmFjay5pZCkge1xuICAgICAgdHJhY2tTdGF0cy5wdXNoKHZhbHVlKTtcbiAgICB9XG4gIH0pO1xuICB0cmFja1N0YXRzLmZvckVhY2godHJhY2tTdGF0ID0+IHtcbiAgICByZXN1bHQuZm9yRWFjaChzdGF0cyA9PiB7XG4gICAgICBpZiAoc3RhdHMudHlwZSA9PT0gc3RyZWFtU3RhdHNUeXBlICYmIHN0YXRzLnRyYWNrSWQgPT09IHRyYWNrU3RhdC5pZCkge1xuICAgICAgICB3YWxrU3RhdHMocmVzdWx0LCBzdGF0cywgZmlsdGVyZWRSZXN1bHQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGZpbHRlcmVkUmVzdWx0O1xufVxuXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/webrtc-adapter/src/js/utils.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/zustand/esm/shallow.js":
/*!*********************************************!*\
  !*** ./node_modules/zustand/esm/shallow.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\nfunction shallow(objA, objB) {\n  if (Object.is(objA, objB)) {\n    return true;\n  }\n  if (typeof objA !== \"object\" || objA === null || typeof objB !== \"object\" || objB === null) {\n    return false;\n  }\n  const keysA = Object.keys(objA);\n  if (keysA.length !== Object.keys(objB).length) {\n    return false;\n  }\n  for (let i = 0; i < keysA.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) || !Object.is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (shallow);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy96dXN0YW5kL2VzbS9zaGFsbG93LmpzIiwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtCQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0RBQWUsT0FBTyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy96dXN0YW5kL2VzbS9zaGFsbG93LmpzPzE1Y2MiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gc2hhbGxvdyhvYmpBLCBvYmpCKSB7XG4gIGlmIChPYmplY3QuaXMob2JqQSwgb2JqQikpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodHlwZW9mIG9iakEgIT09IFwib2JqZWN0XCIgfHwgb2JqQSA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqQiAhPT0gXCJvYmplY3RcIiB8fCBvYmpCID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IGtleXNBID0gT2JqZWN0LmtleXMob2JqQSk7XG4gIGlmIChrZXlzQS5sZW5ndGggIT09IE9iamVjdC5rZXlzKG9iakIpLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXNBLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqQiwga2V5c0FbaV0pIHx8ICFPYmplY3QuaXMob2JqQVtrZXlzQVtpXV0sIG9iakJba2V5c0FbaV1dKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc2hhbGxvdztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/zustand/esm/shallow.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/zustand/esm/vanilla.js":
/*!*********************************************!*\
  !*** ./node_modules/zustand/esm/vanilla.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\nfunction create(createState) {\n  let state;\n  const listeners = new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (nextState !== state) {\n      const previousState = state;\n      state = replace ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const subscribeWithSelector = (listener, selector = getState, equalityFn = Object.is) => {\n    let currentSlice = selector(state);\n    function listenerToAdd() {\n      const nextSlice = selector(state);\n      if (!equalityFn(currentSlice, nextSlice)) {\n        const previousSlice = currentSlice;\n        listener(currentSlice = nextSlice, previousSlice);\n      }\n    }\n    listeners.add(listenerToAdd);\n    return () => listeners.delete(listenerToAdd);\n  };\n  const subscribe = (listener, selector, equalityFn) => {\n    if (selector || equalityFn) {\n      return subscribeWithSelector(listener, selector, equalityFn);\n    }\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => listeners.clear();\n  const api = { setState, getState, subscribe, destroy };\n  state = createState(setState, getState, api);\n  return api;\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (create);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy96dXN0YW5kL2VzbS92YW5pbGxhLmpzIiwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBOztBQUVBLCtEQUFlLE1BQU0sRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvenVzdGFuZC9lc20vdmFuaWxsYS5qcz9jOTlmIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGNyZWF0ZShjcmVhdGVTdGF0ZSkge1xuICBsZXQgc3RhdGU7XG4gIGNvbnN0IGxpc3RlbmVycyA9IG5ldyBTZXQoKTtcbiAgY29uc3Qgc2V0U3RhdGUgPSAocGFydGlhbCwgcmVwbGFjZSkgPT4ge1xuICAgIGNvbnN0IG5leHRTdGF0ZSA9IHR5cGVvZiBwYXJ0aWFsID09PSBcImZ1bmN0aW9uXCIgPyBwYXJ0aWFsKHN0YXRlKSA6IHBhcnRpYWw7XG4gICAgaWYgKG5leHRTdGF0ZSAhPT0gc3RhdGUpIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzU3RhdGUgPSBzdGF0ZTtcbiAgICAgIHN0YXRlID0gcmVwbGFjZSA/IG5leHRTdGF0ZSA6IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLCBuZXh0U3RhdGUpO1xuICAgICAgbGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihzdGF0ZSwgcHJldmlvdXNTdGF0ZSkpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgZ2V0U3RhdGUgPSAoKSA9PiBzdGF0ZTtcbiAgY29uc3Qgc3Vic2NyaWJlV2l0aFNlbGVjdG9yID0gKGxpc3RlbmVyLCBzZWxlY3RvciA9IGdldFN0YXRlLCBlcXVhbGl0eUZuID0gT2JqZWN0LmlzKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRTbGljZSA9IHNlbGVjdG9yKHN0YXRlKTtcbiAgICBmdW5jdGlvbiBsaXN0ZW5lclRvQWRkKCkge1xuICAgICAgY29uc3QgbmV4dFNsaWNlID0gc2VsZWN0b3Ioc3RhdGUpO1xuICAgICAgaWYgKCFlcXVhbGl0eUZuKGN1cnJlbnRTbGljZSwgbmV4dFNsaWNlKSkge1xuICAgICAgICBjb25zdCBwcmV2aW91c1NsaWNlID0gY3VycmVudFNsaWNlO1xuICAgICAgICBsaXN0ZW5lcihjdXJyZW50U2xpY2UgPSBuZXh0U2xpY2UsIHByZXZpb3VzU2xpY2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyVG9BZGQpO1xuICAgIHJldHVybiAoKSA9PiBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyVG9BZGQpO1xuICB9O1xuICBjb25zdCBzdWJzY3JpYmUgPSAobGlzdGVuZXIsIHNlbGVjdG9yLCBlcXVhbGl0eUZuKSA9PiB7XG4gICAgaWYgKHNlbGVjdG9yIHx8IGVxdWFsaXR5Rm4pIHtcbiAgICAgIHJldHVybiBzdWJzY3JpYmVXaXRoU2VsZWN0b3IobGlzdGVuZXIsIHNlbGVjdG9yLCBlcXVhbGl0eUZuKTtcbiAgICB9XG4gICAgbGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICB9O1xuICBjb25zdCBkZXN0cm95ID0gKCkgPT4gbGlzdGVuZXJzLmNsZWFyKCk7XG4gIGNvbnN0IGFwaSA9IHsgc2V0U3RhdGUsIGdldFN0YXRlLCBzdWJzY3JpYmUsIGRlc3Ryb3kgfTtcbiAgc3RhdGUgPSBjcmVhdGVTdGF0ZShzZXRTdGF0ZSwgZ2V0U3RhdGUsIGFwaSk7XG4gIHJldHVybiBhcGk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/zustand/esm/vanilla.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"ed908d235885\");\nif (true) { module.hot.accept() }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3N0eWxlcy9nbG9iYWxzLmNzcyIsIm1hcHBpbmdzIjoiO0FBQUEsK0RBQWUsY0FBYztBQUM3QixJQUFJLElBQVUsSUFBSSxpQkFBaUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3R5bGVzL2dsb2JhbHMuY3NzPzYzOWEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJlZDkwOGQyMzU4ODVcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./styles/globals.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./app/layout.tsx":
/*!************************!*\
  !*** ./app/layout.tsx ***!
  \************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ RootLayout; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var _100mslive_react_sdk__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @100mslive/react-sdk */ \"(app-pages-browser)/./node_modules/@100mslive/react-sdk/dist/primitives/HmsRoomProvider.js\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"(app-pages-browser)/./styles/globals.css\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nfunction RootLayout(param) {\n    var children = param.children;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"head\", {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        charSet: \"UTF-8\"\n                    }, void 0, false, {\n                        fileName: \"/Users/aritra/Work/Freelance/3xBuilds/clubhouse-clone-react/app/layout.tsx\",\n                        lineNumber: 15,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"viewport\",\n                        content: \"width=device-width, initial-scale=1.0\"\n                    }, void 0, false, {\n                        fileName: \"/Users/aritra/Work/Freelance/3xBuilds/clubhouse-clone-react/app/layout.tsx\",\n                        lineNumber: 16,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"title\", {\n                        children: \"100ms Quickstart\"\n                    }, void 0, false, {\n                        fileName: \"/Users/aritra/Work/Freelance/3xBuilds/clubhouse-clone-react/app/layout.tsx\",\n                        lineNumber: 17,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/aritra/Work/Freelance/3xBuilds/clubhouse-clone-react/app/layout.tsx\",\n                lineNumber: 14,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_100mslive_react_sdk__WEBPACK_IMPORTED_MODULE_2__.HMSRoomProvider, {\n                    children: children\n                }, void 0, false, {\n                    fileName: \"/Users/aritra/Work/Freelance/3xBuilds/clubhouse-clone-react/app/layout.tsx\",\n                    lineNumber: 20,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/aritra/Work/Freelance/3xBuilds/clubhouse-clone-react/app/layout.tsx\",\n                lineNumber: 19,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/aritra/Work/Freelance/3xBuilds/clubhouse-clone-react/app/layout.tsx\",\n        lineNumber: 13,\n        columnNumber: 5\n    }, this);\n}\n_c = RootLayout;\nvar _c;\n$RefreshReg$(_c, \"RootLayout\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9sYXlvdXQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBRXVEO0FBQ3hCO0FBT2hCLFNBQVNDLFdBQVcsS0FBNkI7UUFBN0IsaUJBQUVDO0lBQ25DLHFCQUNFLDhEQUFDQztRQUFLQyxNQUFLOzswQkFDVCw4REFBQ0M7O2tDQUNDLDhEQUFDQzt3QkFBS0MsU0FBUTs7Ozs7O2tDQUNkLDhEQUFDRDt3QkFBS0UsTUFBSzt3QkFBV0MsU0FBUTs7Ozs7O2tDQUM5Qiw4REFBQ0M7a0NBQU07Ozs7Ozs7Ozs7OzswQkFFVCw4REFBQ0M7MEJBQ0MsNEVBQUNYLGlFQUFlQTs4QkFDYkU7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBS1g7S0Fmd0JEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2FwcC9sYXlvdXQudHN4Pzk5ODgiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IEhNU1Jvb21Qcm92aWRlciB9IGZyb20gXCJAMTAwbXNsaXZlL3JlYWN0LXNka1wiO1xuaW1wb3J0IFwiLi4vc3R5bGVzL2dsb2JhbHMuY3NzXCI7XG5pbXBvcnQgeyBSZWFjdE5vZGUgfSBmcm9tIFwicmVhY3RcIjtcblxuaW50ZXJmYWNlIFJvb3RMYXlvdXRQcm9wcyB7XG4gIGNoaWxkcmVuOiBSZWFjdE5vZGU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvb3RMYXlvdXQoeyBjaGlsZHJlbiB9OiBSb290TGF5b3V0UHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICA8aHRtbCBsYW5nPVwiZW5cIj5cbiAgICAgIDxoZWFkPlxuICAgICAgICA8bWV0YSBjaGFyU2V0PVwiVVRGLThcIiAvPlxuICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiIC8+XG4gICAgICAgIDx0aXRsZT4xMDBtcyBRdWlja3N0YXJ0PC90aXRsZT5cbiAgICAgIDwvaGVhZD5cbiAgICAgIDxib2R5PlxuICAgICAgICA8SE1TUm9vbVByb3ZpZGVyPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9ITVNSb29tUHJvdmlkZXI+XG4gICAgICA8L2JvZHk+XG4gICAgPC9odG1sPlxuICApO1xufVxuIl0sIm5hbWVzIjpbIkhNU1Jvb21Qcm92aWRlciIsIlJvb3RMYXlvdXQiLCJjaGlsZHJlbiIsImh0bWwiLCJsYW5nIiwiaGVhZCIsIm1ldGEiLCJjaGFyU2V0IiwibmFtZSIsImNvbnRlbnQiLCJ0aXRsZSIsImJvZHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/layout.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nif (true) {\n  (function() {\n'use strict';\n\nvar React = __webpack_require__(/*! next/dist/compiled/react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types.\nvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\nvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\nvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nvar REACT_PROVIDER_TYPE = Symbol.for('react.provider'); // TODO: Delete with enableRenderableContext\n\nvar REACT_CONSUMER_TYPE = Symbol.for('react.consumer');\nvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\nvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nvar REACT_MEMO_TYPE = Symbol.for('react.memo');\nvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\nvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nvar REACT_CACHE_TYPE = Symbol.for('react.cache');\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// -----------------------------------------------------------------------------\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\nvar enableCacheElement = false;\nvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\nvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\nvar enableRenderableContext = false;\n// stuff. Intended to enable React core members to more easily debug scheduling\n// issues in DEV builds.\n\nvar enableDebugTracing = false;\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var displayName = outerType.displayName;\n\n  if (displayName) {\n    return displayName;\n  }\n\n  var functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n}\n\nvar REACT_CLIENT_REFERENCE$2 = Symbol.for('react.client.reference'); // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\nfunction getComponentNameFromType(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  if (typeof type === 'function') {\n    if (type.$$typeof === REACT_CLIENT_REFERENCE$2) {\n      // TODO: Create a convention for naming client references with debug info.\n      return null;\n    }\n\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n\n    case REACT_CACHE_TYPE:\n      {\n        return 'Cache';\n      }\n\n  }\n\n  if (typeof type === 'object') {\n    {\n      if (typeof type.tag === 'number') {\n        error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n      }\n    }\n\n    switch (type.$$typeof) {\n      case REACT_PROVIDER_TYPE:\n        {\n          var provider = type;\n          return getContextName(provider._context) + '.Provider';\n        }\n\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n\n        {\n          return getContextName(context) + '.Consumer';\n        }\n\n      case REACT_CONSUMER_TYPE:\n        {\n          return null;\n        }\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        var outerName = type.displayName || null;\n\n        if (outerName !== null) {\n          return outerName;\n        }\n\n        return getComponentNameFromType(type.type) || 'Memo';\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentNameFromType(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n    }\n  }\n\n  return null;\n}\n\n// $FlowFixMe[method-unbinding]\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar assign = Object.assign;\n\n/*\n * The `'' + value` pattern (used in perf-sensitive code) throws for Symbol\n * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n *\n * The functions in this module will throw an easier-to-understand,\n * easier-to-debug exception with a clear errors message message explaining the\n * problem. (Instead of a confusing exception thrown inside the implementation\n * of the `value` object).\n */\n// $FlowFixMe[incompatible-return] only called in DEV, so void return is not possible.\nfunction typeName(value) {\n  {\n    // toStringTag is needed for namespaced types like Temporal.Instant\n    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object'; // $FlowFixMe[incompatible-return]\n\n    return type;\n  }\n} // $FlowFixMe[incompatible-return] only called in DEV, so void return is not possible.\n\n\nfunction willCoercionThrow(value) {\n  {\n    try {\n      testStringCoercion(value);\n      return false;\n    } catch (e) {\n      return true;\n    }\n  }\n}\n\nfunction testStringCoercion(value) {\n  // If you ended up here by following an exception call stack, here's what's\n  // happened: you supplied an object or symbol value to React (as a prop, key,\n  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n  // coerce it to a string using `'' + value`, an exception was thrown.\n  //\n  // The most common types that will cause this exception are `Symbol` instances\n  // and Temporal objects like `Temporal.Instant`. But any object that has a\n  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n  // exception. (Library authors do this to prevent users from using built-in\n  // numeric operators like `+` or comparison operators like `>=` because custom\n  // methods are needed to perform accurate arithmetic or comparison.)\n  //\n  // To fix the problem, coerce this object or symbol value to a string before\n  // passing it to React. The most reliable way is usually `String(value)`.\n  //\n  // To find which value is throwing, check the browser or debugger console.\n  // Before this exception was thrown, there should be `console.error` output\n  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n  // problem and how that type was used: key, atrribute, input value prop, etc.\n  // In most cases, this console output also shows the component and its\n  // ancestor components where the exception happened.\n  //\n  // eslint-disable-next-line react-internal/safe-string-coercion\n  return '' + value;\n}\nfunction checkKeyStringCoercion(value) {\n  {\n    if (willCoercionThrow(value)) {\n      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before using it here.', typeName(value));\n\n      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n    }\n  }\n}\n\nvar REACT_CLIENT_REFERENCE$1 = Symbol.for('react.client.reference');\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || enableRenderableContext  || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_CLIENT_REFERENCE$1 || type.getModuleId !== undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\nfunction isArray(a) {\n  return isArrayImpl(a);\n}\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe[cannot-write] Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe[cannot-write] Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: assign({}, props, {\n          value: prevLog\n        }),\n        info: assign({}, props, {\n          value: prevInfo\n        }),\n        warn: assign({}, props, {\n          value: prevWarn\n        }),\n        error: assign({}, props, {\n          value: prevError\n        }),\n        group: assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n/**\n * Leverages native browser/VM stack frames to get proper details (e.g.\n * filename, line + col number) for a single component in a component stack. We\n * do this by:\n *   (1) throwing and catching an error in the function - this will be our\n *       control error.\n *   (2) calling the component which will eventually throw an error that we'll\n *       catch - this will be our sample error.\n *   (3) diffing the control and sample error stacks to find the stack frame\n *       which represents our component.\n */\n\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if (!fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe[incompatible-type] It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n  /**\n   * Finding a common stack frame between sample and control errors can be\n   * tricky given the different types and levels of stack trace truncation from\n   * different JS VMs. So instead we'll attempt to control what that common\n   * frame should be through this object method:\n   * Having both the sample and control errors be in the function under the\n   * `DescribeNativeComponentFrameRoot` property, + setting the `name` and\n   * `displayName` properties of the function ensures that a stack\n   * frame exists that has the method name `DescribeNativeComponentFrameRoot` in\n   * it for both control and sample stacks.\n   */\n\n\n  var RunInRootFrame = {\n    DetermineComponentFrameRoot: function () {\n      var control;\n\n      try {\n        // This should throw.\n        if (construct) {\n          // Something should be setting the props in the constructor.\n          var Fake = function () {\n            throw Error();\n          }; // $FlowFixMe[prop-missing]\n\n\n          Object.defineProperty(Fake.prototype, 'props', {\n            set: function () {\n              // We use a throwing setter instead of frozen or non-writable props\n              // because that won't throw in a non-strict mode function.\n              throw Error();\n            }\n          });\n\n          if (typeof Reflect === 'object' && Reflect.construct) {\n            // We construct a different control for this case to include any extra\n            // frames added by the construct call.\n            try {\n              Reflect.construct(Fake, []);\n            } catch (x) {\n              control = x;\n            }\n\n            Reflect.construct(fn, [], Fake);\n          } else {\n            try {\n              Fake.call();\n            } catch (x) {\n              control = x;\n            } // $FlowFixMe[prop-missing] found when upgrading Flow\n\n\n            fn.call(Fake.prototype);\n          }\n        } else {\n          try {\n            throw Error();\n          } catch (x) {\n            control = x;\n          } // TODO(luna): This will currently only throw if the function component\n          // tries to access React/ReactDOM/props. We should probably make this throw\n          // in simple components too\n\n\n          var maybePromise = fn(); // If the function component returns a promise, it's likely an async\n          // component, which we don't yet support. Attach a noop catch handler to\n          // silence the error.\n          // TODO: Implement component stacks for async client components?\n\n          if (maybePromise && typeof maybePromise.catch === 'function') {\n            maybePromise.catch(function () {});\n          }\n        }\n      } catch (sample) {\n        // This is inlined manually because closure doesn't do it for us.\n        if (sample && control && typeof sample.stack === 'string') {\n          return [sample.stack, control.stack];\n        }\n      }\n\n      return [null, null];\n    }\n  }; // $FlowFixMe[prop-missing]\n\n  RunInRootFrame.DetermineComponentFrameRoot.displayName = 'DetermineComponentFrameRoot';\n  var namePropDescriptor = Object.getOwnPropertyDescriptor(RunInRootFrame.DetermineComponentFrameRoot, 'name'); // Before ES6, the `name` property was not configurable.\n\n  if (namePropDescriptor && namePropDescriptor.configurable) {\n    // V8 utilizes a function's `name` property when generating a stack trace.\n    Object.defineProperty(RunInRootFrame.DetermineComponentFrameRoot, // Configurable properties can be updated even if its writable descriptor\n    // is set to `false`.\n    // $FlowFixMe[cannot-write]\n    'name', {\n      value: 'DetermineComponentFrameRoot'\n    });\n  }\n\n  try {\n    var _RunInRootFrame$Deter = RunInRootFrame.DetermineComponentFrameRoot(),\n        sampleStack = _RunInRootFrame$Deter[0],\n        controlStack = _RunInRootFrame$Deter[1];\n\n    if (sampleStack && controlStack) {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sampleStack.split('\\n');\n      var controlLines = controlStack.split('\\n');\n      var s = 0;\n      var c = 0;\n\n      while (s < sampleLines.length && !sampleLines[s].includes('DetermineComponentFrameRoot')) {\n        s++;\n      }\n\n      while (c < controlLines.length && !controlLines[c].includes('DetermineComponentFrameRoot')) {\n        c++;\n      } // We couldn't find our intentionally injected common root frame, attempt\n      // to find another common root frame by search from the bottom of the\n      // control stack...\n\n\n      if (s === sampleLines.length || c === controlLines.length) {\n        s = sampleLines.length - 1;\n        c = controlLines.length - 1;\n\n        while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n          // We expect at least one stack frame to be shared.\n          // Typically this will be the root most one. However, stack frames may be\n          // cut off due to maximum stack limits. In this case, one maybe cut off\n          // earlier than the other. We assume that the sample is longer or the same\n          // and there for cut off earlier. So we should find the root most frame in\n          // the sample somewhere in the control.\n          c--;\n        }\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n\n\n                if (fn.displayName && _frame.includes('<anonymous>')) {\n                  _frame = _frame.replace('<anonymous>', fn.displayName);\n                }\n\n                if (true) {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, ownerFn);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\nvar REACT_CLIENT_REFERENCE = Symbol.for('react.client.reference');\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentNameFromType(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    {\n      var warnAboutAccessingRef = function () {\n        if (!specialPropRefWarningShown) {\n          specialPropRefWarningShown = true;\n\n          error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n        }\n      };\n\n      warnAboutAccessingRef.isReactWarning = true;\n      Object.defineProperty(props, 'ref', {\n        get: warnAboutAccessingRef,\n        configurable: true\n      });\n    }\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nfunction ReactElement(type, key, _ref, self, source, owner, props) {\n  var ref;\n\n  {\n    ref = _ref;\n  }\n\n  var element;\n\n  {\n    // In prod, `ref` is a regular property. It will be removed in a\n    // future release.\n    element = {\n      // This tag allows us to uniquely identify this as a React Element\n      $$typeof: REACT_ELEMENT_TYPE,\n      // Built-in properties that belong on the element\n      type: type,\n      key: key,\n      ref: ref,\n      props: props,\n      // Record the component responsible for creating this element.\n      _owner: owner\n    };\n  }\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // debugInfo contains Server Component debug information.\n\n    Object.defineProperty(element, '_debugInfo', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: null\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n}\nvar didWarnAboutKeySpread = {};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV$1(type, config, maybeKey, isStaticChildren, source, self) {\n  {\n    if (!isValidElementType(type)) {\n      // This is an invalid element type.\n      //\n      // We warn in this case but don't throw. We expect the element creation to\n      // succeed and there will likely be errors in render.\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    } else {\n      // This is a valid element type.\n      // Skip key warning if the type isn't valid since our key validation logic\n      // doesn't expect a non-string/function type and can throw confusing\n      // errors. We don't want exception behavior to differ between dev and\n      // prod. (Rendering will throw with a helpful message and as soon as the\n      // type is fixed, the key warnings will appear.)\n      var children = config.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    } // Warn about key spread regardless of whether the type is valid.\n\n\n    if (hasOwnProperty.call(config, 'key')) {\n      var componentName = getComponentNameFromType(type);\n      var keys = Object.keys(config).filter(function (k) {\n        return k !== 'key';\n      });\n      var beforeExample = keys.length > 0 ? '{key: someKey, ' + keys.join(': ..., ') + ': ...}' : '{key: someKey}';\n\n      if (!didWarnAboutKeySpread[componentName + beforeExample]) {\n        var afterExample = keys.length > 0 ? '{' + keys.join(': ..., ') + ': ...}' : '{}';\n\n        error('A props object containing a \"key\" prop is being spread into JSX:\\n' + '  let props = %s;\\n' + '  <%s {...props} />\\n' + 'React keys must be passed directly to JSX without using spread:\\n' + '  let props = %s;\\n' + '  <%s key={someKey} {...props} />', beforeExample, componentName, afterExample, componentName);\n\n        didWarnAboutKeySpread[componentName + beforeExample] = true;\n      }\n    }\n\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      {\n        checkKeyStringCoercion(maybeKey);\n      }\n\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      {\n        ref = config.ref;\n      }\n\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && // Skip over reserved prop names\n      propName !== 'key' && (propName !== 'ref')) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    var element = ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n\n    if (type === REACT_FRAGMENT_TYPE) {\n      validateFragmentProps(element);\n    }\n\n    return element;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner.current) {\n      var name = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object' || !node) {\n      return;\n    }\n\n    if (node.$$typeof === REACT_CLIENT_REFERENCE) ; else if (isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\n\nfunction isValidElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nvar ownerHasKeyUseWarning = {};\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement(null);\n  }\n}\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = getComponentNameFromType(parentType);\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  // TODO: Move this to render phase instead of at element creation.\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement(null);\n    }\n  }\n}\n\nvar jsxDEV = jsxDEV$1 ;\n\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsxDEV = jsxDEV;\n  })();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7O0FBRWIsSUFBSSxJQUFxQztBQUN6QztBQUNBOztBQUVBLFlBQVksbUJBQU8sQ0FBQyxzR0FBMEI7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlHQUFpRyxlQUFlO0FBQ2hIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07OztBQUdOO0FBQ0E7QUFDQSxLQUFLLEdBQUc7O0FBRVIsa0RBQWtEO0FBQ2xEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBLDRCQUE0QjtBQUM1QjtBQUNBLHFDQUFxQzs7QUFFckMsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7O0FBR0Y7QUFDQTtBQUNBOztBQUVBLHFFQUFxRTs7QUFFckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0dBQWtHOztBQUVsRztBQUNBO0FBQ0EsRUFBRTs7O0FBR0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7OztBQUdKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpQ0FBaUM7O0FBRWpDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1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O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZCxXQUFXLEdBQUc7QUFDZCxXQUFXLEdBQUc7QUFDZCxXQUFXLGVBQWU7QUFDMUIsV0FBVyxHQUFHO0FBQ2QsV0FBVyxHQUFHO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZDtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxHQUFHOztBQUVSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsR0FBRztBQUNkLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHFCQUFxQjtBQUNqRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLE1BQU07OztBQUdOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLDhDQUE4QyxnREFBZ0QsTUFBTSxhQUFhOztBQUVqSDtBQUNBLCtDQUErQyxrQ0FBa0MsT0FBTzs7QUFFeEYsdUdBQXVHLGNBQWMsVUFBVSxnR0FBZ0csa0JBQWtCLFVBQVUsVUFBVTs7QUFFclE7QUFDQTtBQUNBOztBQUVBLGtCQUFrQjs7QUFFbEI7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQiwyREFBMkQsVUFBVTtBQUNyRSx5QkFBeUIsVUFBVTtBQUNuQztBQUNBLGFBQWEsVUFBVTtBQUN2Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNOzs7QUFHTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7O0FBR047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFdBQVc7QUFDdEIsV0FBVyxHQUFHO0FBQ2Q7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0RBQW9EO0FBQ3BELHNCQUFzQixpQkFBaUI7QUFDdkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFlBQVksU0FBUztBQUNyQjtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekIsV0FBVyxHQUFHO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSw2REFBNkQ7QUFDN0Q7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGNBQWM7QUFDekI7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixpQkFBaUI7QUFDckM7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGdCQUFnQjtBQUNoQixjQUFjO0FBQ2QsR0FBRztBQUNIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcz9kMTVlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2UgUmVhY3RcbiAqIHJlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qc1xuICpcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gIChmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0ID0gcmVxdWlyZShcIm5leHQvZGlzdC9jb21waWxlZC9yZWFjdFwiKTtcblxuLy8gQVRURU5USU9OXG4vLyBXaGVuIGFkZGluZyBuZXcgc3ltYm9scyB0byB0aGlzIGZpbGUsXG4vLyBQbGVhc2UgY29uc2lkZXIgYWxzbyBhZGRpbmcgdG8gJ3JlYWN0LWRldnRvb2xzLXNoYXJlZC9zcmMvYmFja2VuZC9SZWFjdFN5bWJvbHMnXG4vLyBUaGUgU3ltYm9sIHVzZWQgdG8gdGFnIHRoZSBSZWFjdEVsZW1lbnQtbGlrZSB0eXBlcy5cbnZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50Jyk7XG52YXIgUkVBQ1RfUE9SVEFMX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5wb3J0YWwnKTtcbnZhciBSRUFDVF9GUkFHTUVOVF9UWVBFID0gU3ltYm9sLmZvcigncmVhY3QuZnJhZ21lbnQnKTtcbnZhciBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFID0gU3ltYm9sLmZvcigncmVhY3Quc3RyaWN0X21vZGUnKTtcbnZhciBSRUFDVF9QUk9GSUxFUl9UWVBFID0gU3ltYm9sLmZvcigncmVhY3QucHJvZmlsZXInKTtcbnZhciBSRUFDVF9QUk9WSURFUl9UWVBFID0gU3ltYm9sLmZvcigncmVhY3QucHJvdmlkZXInKTsgLy8gVE9ETzogRGVsZXRlIHdpdGggZW5hYmxlUmVuZGVyYWJsZUNvbnRleHRcblxudmFyIFJFQUNUX0NPTlNVTUVSX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5jb25zdW1lcicpO1xudmFyIFJFQUNUX0NPTlRFWFRfVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0LmNvbnRleHQnKTtcbnZhciBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFID0gU3ltYm9sLmZvcigncmVhY3QuZm9yd2FyZF9yZWYnKTtcbnZhciBSRUFDVF9TVVNQRU5TRV9UWVBFID0gU3ltYm9sLmZvcigncmVhY3Quc3VzcGVuc2UnKTtcbnZhciBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5zdXNwZW5zZV9saXN0Jyk7XG52YXIgUkVBQ1RfTUVNT19UWVBFID0gU3ltYm9sLmZvcigncmVhY3QubWVtbycpO1xudmFyIFJFQUNUX0xBWllfVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0LmxhenknKTtcbnZhciBSRUFDVF9PRkZTQ1JFRU5fVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0Lm9mZnNjcmVlbicpO1xudmFyIFJFQUNUX0NBQ0hFX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5jYWNoZScpO1xudmFyIE1BWUJFX0lURVJBVE9SX1NZTUJPTCA9IFN5bWJvbC5pdGVyYXRvcjtcbnZhciBGQVVYX0lURVJBVE9SX1NZTUJPTCA9ICdAQGl0ZXJhdG9yJztcbmZ1bmN0aW9uIGdldEl0ZXJhdG9yRm4obWF5YmVJdGVyYWJsZSkge1xuICBpZiAobWF5YmVJdGVyYWJsZSA9PT0gbnVsbCB8fCB0eXBlb2YgbWF5YmVJdGVyYWJsZSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBtYXliZUl0ZXJhdG9yID0gTUFZQkVfSVRFUkFUT1JfU1lNQk9MICYmIG1heWJlSXRlcmFibGVbTUFZQkVfSVRFUkFUT1JfU1lNQk9MXSB8fCBtYXliZUl0ZXJhYmxlW0ZBVVhfSVRFUkFUT1JfU1lNQk9MXTtcblxuICBpZiAodHlwZW9mIG1heWJlSXRlcmF0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gbWF5YmVJdGVyYXRvcjtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG52YXIgUmVhY3RTaGFyZWRJbnRlcm5hbHMgPSBSZWFjdC5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRDtcblxuZnVuY3Rpb24gZXJyb3IoZm9ybWF0KSB7XG4gIHtcbiAgICB7XG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuXG4gICAgICBwcmludFdhcm5pbmcoJ2Vycm9yJywgZm9ybWF0LCBhcmdzKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJpbnRXYXJuaW5nKGxldmVsLCBmb3JtYXQsIGFyZ3MpIHtcbiAgLy8gV2hlbiBjaGFuZ2luZyB0aGlzIGxvZ2ljLCB5b3UgbWlnaHQgd2FudCB0byBhbHNvXG4gIC8vIHVwZGF0ZSBjb25zb2xlV2l0aFN0YWNrRGV2Lnd3dy5qcyBhcyB3ZWxsLlxuICB7XG4gICAgdmFyIFJlYWN0RGVidWdDdXJyZW50RnJhbWUgPSBSZWFjdFNoYXJlZEludGVybmFscy5SZWFjdERlYnVnQ3VycmVudEZyYW1lO1xuICAgIHZhciBzdGFjayA9IFJlYWN0RGVidWdDdXJyZW50RnJhbWUuZ2V0U3RhY2tBZGRlbmR1bSgpO1xuXG4gICAgaWYgKHN0YWNrICE9PSAnJykge1xuICAgICAgZm9ybWF0ICs9ICclcyc7XG4gICAgICBhcmdzID0gYXJncy5jb25jYXQoW3N0YWNrXSk7XG4gICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaW50ZXJuYWwvc2FmZS1zdHJpbmctY29lcmNpb25cblxuXG4gICAgdmFyIGFyZ3NXaXRoRm9ybWF0ID0gYXJncy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBTdHJpbmcoaXRlbSk7XG4gICAgfSk7IC8vIENhcmVmdWw6IFJOIGN1cnJlbnRseSBkZXBlbmRzIG9uIHRoaXMgcHJlZml4XG5cbiAgICBhcmdzV2l0aEZvcm1hdC51bnNoaWZ0KCdXYXJuaW5nOiAnICsgZm9ybWF0KTsgLy8gV2UgaW50ZW50aW9uYWxseSBkb24ndCB1c2Ugc3ByZWFkIChvciAuYXBwbHkpIGRpcmVjdGx5IGJlY2F1c2UgaXRcbiAgICAvLyBicmVha3MgSUU5OiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzEzNjEwXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWludGVybmFsL25vLXByb2R1Y3Rpb24tbG9nZ2luZ1xuXG4gICAgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwoY29uc29sZVtsZXZlbF0sIGNvbnNvbGUsIGFyZ3NXaXRoRm9ybWF0KTtcbiAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG52YXIgZW5hYmxlU2NvcGVBUEkgPSBmYWxzZTsgLy8gRXhwZXJpbWVudGFsIENyZWF0ZSBFdmVudCBIYW5kbGUgQVBJLlxudmFyIGVuYWJsZUNhY2hlRWxlbWVudCA9IGZhbHNlO1xudmFyIGVuYWJsZVRyYW5zaXRpb25UcmFjaW5nID0gZmFsc2U7IC8vIE5vIGtub3duIGJ1Z3MsIGJ1dCBuZWVkcyBwZXJmb3JtYW5jZSB0ZXN0aW5nXG5cbnZhciBlbmFibGVMZWdhY3lIaWRkZW4gPSBmYWxzZTsgLy8gRW5hYmxlcyB1bnN0YWJsZV9hdm9pZFRoaXNGYWxsYmFjayBmZWF0dXJlIGluIEZpYmVyXG52YXIgZW5hYmxlUmVuZGVyYWJsZUNvbnRleHQgPSBmYWxzZTtcbi8vIHN0dWZmLiBJbnRlbmRlZCB0byBlbmFibGUgUmVhY3QgY29yZSBtZW1iZXJzIHRvIG1vcmUgZWFzaWx5IGRlYnVnIHNjaGVkdWxpbmdcbi8vIGlzc3VlcyBpbiBERVYgYnVpbGRzLlxuXG52YXIgZW5hYmxlRGVidWdUcmFjaW5nID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGdldFdyYXBwZWROYW1lKG91dGVyVHlwZSwgaW5uZXJUeXBlLCB3cmFwcGVyTmFtZSkge1xuICB2YXIgZGlzcGxheU5hbWUgPSBvdXRlclR5cGUuZGlzcGxheU5hbWU7XG5cbiAgaWYgKGRpc3BsYXlOYW1lKSB7XG4gICAgcmV0dXJuIGRpc3BsYXlOYW1lO1xuICB9XG5cbiAgdmFyIGZ1bmN0aW9uTmFtZSA9IGlubmVyVHlwZS5kaXNwbGF5TmFtZSB8fCBpbm5lclR5cGUubmFtZSB8fCAnJztcbiAgcmV0dXJuIGZ1bmN0aW9uTmFtZSAhPT0gJycgPyB3cmFwcGVyTmFtZSArIFwiKFwiICsgZnVuY3Rpb25OYW1lICsgXCIpXCIgOiB3cmFwcGVyTmFtZTtcbn0gLy8gS2VlcCBpbiBzeW5jIHdpdGggcmVhY3QtcmVjb25jaWxlci9nZXRDb21wb25lbnROYW1lRnJvbUZpYmVyXG5cblxuZnVuY3Rpb24gZ2V0Q29udGV4dE5hbWUodHlwZSkge1xuICByZXR1cm4gdHlwZS5kaXNwbGF5TmFtZSB8fCAnQ29udGV4dCc7XG59XG5cbnZhciBSRUFDVF9DTElFTlRfUkVGRVJFTkNFJDIgPSBTeW1ib2wuZm9yKCdyZWFjdC5jbGllbnQucmVmZXJlbmNlJyk7IC8vIE5vdGUgdGhhdCB0aGUgcmVjb25jaWxlciBwYWNrYWdlIHNob3VsZCBnZW5lcmFsbHkgcHJlZmVyIHRvIHVzZSBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKCkgaW5zdGVhZC5cblxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpIHtcbiAgaWYgKHR5cGUgPT0gbnVsbCkge1xuICAgIC8vIEhvc3Qgcm9vdCwgdGV4dCBub2RlIG9yIGp1c3QgaW52YWxpZCB0eXBlLlxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UkMikge1xuICAgICAgLy8gVE9ETzogQ3JlYXRlIGEgY29udmVudGlvbiBmb3IgbmFtaW5nIGNsaWVudCByZWZlcmVuY2VzIHdpdGggZGVidWcgaW5mby5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBudWxsO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB0eXBlO1xuICB9XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBSRUFDVF9GUkFHTUVOVF9UWVBFOlxuICAgICAgcmV0dXJuICdGcmFnbWVudCc7XG5cbiAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOlxuICAgICAgcmV0dXJuICdQb3J0YWwnO1xuXG4gICAgY2FzZSBSRUFDVF9QUk9GSUxFUl9UWVBFOlxuICAgICAgcmV0dXJuICdQcm9maWxlcic7XG5cbiAgICBjYXNlIFJFQUNUX1NUUklDVF9NT0RFX1RZUEU6XG4gICAgICByZXR1cm4gJ1N0cmljdE1vZGUnO1xuXG4gICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9UWVBFOlxuICAgICAgcmV0dXJuICdTdXNwZW5zZSc7XG5cbiAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRTpcbiAgICAgIHJldHVybiAnU3VzcGVuc2VMaXN0JztcblxuICAgIGNhc2UgUkVBQ1RfQ0FDSEVfVFlQRTpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuICdDYWNoZSc7XG4gICAgICB9XG5cbiAgfVxuXG4gIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICB7XG4gICAgICBpZiAodHlwZW9mIHR5cGUudGFnID09PSAnbnVtYmVyJykge1xuICAgICAgICBlcnJvcignUmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBvYmplY3QgaW4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKCkuICcgKyAnVGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodHlwZS4kJHR5cGVvZikge1xuICAgICAgY2FzZSBSRUFDVF9QUk9WSURFUl9UWVBFOlxuICAgICAgICB7XG4gICAgICAgICAgdmFyIHByb3ZpZGVyID0gdHlwZTtcbiAgICAgICAgICByZXR1cm4gZ2V0Q29udGV4dE5hbWUocHJvdmlkZXIuX2NvbnRleHQpICsgJy5Qcm92aWRlcic7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBSRUFDVF9DT05URVhUX1RZUEU6XG4gICAgICAgIHZhciBjb250ZXh0ID0gdHlwZTtcblxuICAgICAgICB7XG4gICAgICAgICAgcmV0dXJuIGdldENvbnRleHROYW1lKGNvbnRleHQpICsgJy5Db25zdW1lcic7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBSRUFDVF9DT05TVU1FUl9UWVBFOlxuICAgICAgICB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFOlxuICAgICAgICByZXR1cm4gZ2V0V3JhcHBlZE5hbWUodHlwZSwgdHlwZS5yZW5kZXIsICdGb3J3YXJkUmVmJyk7XG5cbiAgICAgIGNhc2UgUkVBQ1RfTUVNT19UWVBFOlxuICAgICAgICB2YXIgb3V0ZXJOYW1lID0gdHlwZS5kaXNwbGF5TmFtZSB8fCBudWxsO1xuXG4gICAgICAgIGlmIChvdXRlck5hbWUgIT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gb3V0ZXJOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlLnR5cGUpIHx8ICdNZW1vJztcblxuICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgbGF6eUNvbXBvbmVudCA9IHR5cGU7XG4gICAgICAgICAgdmFyIHBheWxvYWQgPSBsYXp5Q29tcG9uZW50Ll9wYXlsb2FkO1xuICAgICAgICAgIHZhciBpbml0ID0gbGF6eUNvbXBvbmVudC5faW5pdDtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKGluaXQocGF5bG9hZCkpO1xuICAgICAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG4vLyAkRmxvd0ZpeE1lW21ldGhvZC11bmJpbmRpbmddXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG52YXIgYXNzaWduID0gT2JqZWN0LmFzc2lnbjtcblxuLypcbiAqIFRoZSBgJycgKyB2YWx1ZWAgcGF0dGVybiAodXNlZCBpbiBwZXJmLXNlbnNpdGl2ZSBjb2RlKSB0aHJvd3MgZm9yIFN5bWJvbFxuICogYW5kIFRlbXBvcmFsLiogdHlwZXMuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvcHVsbC8yMjA2NC5cbiAqXG4gKiBUaGUgZnVuY3Rpb25zIGluIHRoaXMgbW9kdWxlIHdpbGwgdGhyb3cgYW4gZWFzaWVyLXRvLXVuZGVyc3RhbmQsXG4gKiBlYXNpZXItdG8tZGVidWcgZXhjZXB0aW9uIHdpdGggYSBjbGVhciBlcnJvcnMgbWVzc2FnZSBtZXNzYWdlIGV4cGxhaW5pbmcgdGhlXG4gKiBwcm9ibGVtLiAoSW5zdGVhZCBvZiBhIGNvbmZ1c2luZyBleGNlcHRpb24gdGhyb3duIGluc2lkZSB0aGUgaW1wbGVtZW50YXRpb25cbiAqIG9mIHRoZSBgdmFsdWVgIG9iamVjdCkuXG4gKi9cbi8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl0gb25seSBjYWxsZWQgaW4gREVWLCBzbyB2b2lkIHJldHVybiBpcyBub3QgcG9zc2libGUuXG5mdW5jdGlvbiB0eXBlTmFtZSh2YWx1ZSkge1xuICB7XG4gICAgLy8gdG9TdHJpbmdUYWcgaXMgbmVlZGVkIGZvciBuYW1lc3BhY2VkIHR5cGVzIGxpa2UgVGVtcG9yYWwuSW5zdGFudFxuICAgIHZhciBoYXNUb1N0cmluZ1RhZyA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLnRvU3RyaW5nVGFnO1xuICAgIHZhciB0eXBlID0gaGFzVG9TdHJpbmdUYWcgJiYgdmFsdWVbU3ltYm9sLnRvU3RyaW5nVGFnXSB8fCB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lIHx8ICdPYmplY3QnOyAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dXG5cbiAgICByZXR1cm4gdHlwZTtcbiAgfVxufSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dIG9ubHkgY2FsbGVkIGluIERFViwgc28gdm9pZCByZXR1cm4gaXMgbm90IHBvc3NpYmxlLlxuXG5cbmZ1bmN0aW9uIHdpbGxDb2VyY2lvblRocm93KHZhbHVlKSB7XG4gIHtcbiAgICB0cnkge1xuICAgICAgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7XG4gIC8vIElmIHlvdSBlbmRlZCB1cCBoZXJlIGJ5IGZvbGxvd2luZyBhbiBleGNlcHRpb24gY2FsbCBzdGFjaywgaGVyZSdzIHdoYXQnc1xuICAvLyBoYXBwZW5lZDogeW91IHN1cHBsaWVkIGFuIG9iamVjdCBvciBzeW1ib2wgdmFsdWUgdG8gUmVhY3QgKGFzIGEgcHJvcCwga2V5LFxuICAvLyBET00gYXR0cmlidXRlLCBDU1MgcHJvcGVydHksIHN0cmluZyByZWYsIGV0Yy4pIGFuZCB3aGVuIFJlYWN0IHRyaWVkIHRvXG4gIC8vIGNvZXJjZSBpdCB0byBhIHN0cmluZyB1c2luZyBgJycgKyB2YWx1ZWAsIGFuIGV4Y2VwdGlvbiB3YXMgdGhyb3duLlxuICAvL1xuICAvLyBUaGUgbW9zdCBjb21tb24gdHlwZXMgdGhhdCB3aWxsIGNhdXNlIHRoaXMgZXhjZXB0aW9uIGFyZSBgU3ltYm9sYCBpbnN0YW5jZXNcbiAgLy8gYW5kIFRlbXBvcmFsIG9iamVjdHMgbGlrZSBgVGVtcG9yYWwuSW5zdGFudGAuIEJ1dCBhbnkgb2JqZWN0IHRoYXQgaGFzIGFcbiAgLy8gYHZhbHVlT2ZgIG9yIGBbU3ltYm9sLnRvUHJpbWl0aXZlXWAgbWV0aG9kIHRoYXQgdGhyb3dzIHdpbGwgYWxzbyBjYXVzZSB0aGlzXG4gIC8vIGV4Y2VwdGlvbi4gKExpYnJhcnkgYXV0aG9ycyBkbyB0aGlzIHRvIHByZXZlbnQgdXNlcnMgZnJvbSB1c2luZyBidWlsdC1pblxuICAvLyBudW1lcmljIG9wZXJhdG9ycyBsaWtlIGArYCBvciBjb21wYXJpc29uIG9wZXJhdG9ycyBsaWtlIGA+PWAgYmVjYXVzZSBjdXN0b21cbiAgLy8gbWV0aG9kcyBhcmUgbmVlZGVkIHRvIHBlcmZvcm0gYWNjdXJhdGUgYXJpdGhtZXRpYyBvciBjb21wYXJpc29uLilcbiAgLy9cbiAgLy8gVG8gZml4IHRoZSBwcm9ibGVtLCBjb2VyY2UgdGhpcyBvYmplY3Qgb3Igc3ltYm9sIHZhbHVlIHRvIGEgc3RyaW5nIGJlZm9yZVxuICAvLyBwYXNzaW5nIGl0IHRvIFJlYWN0LiBUaGUgbW9zdCByZWxpYWJsZSB3YXkgaXMgdXN1YWxseSBgU3RyaW5nKHZhbHVlKWAuXG4gIC8vXG4gIC8vIFRvIGZpbmQgd2hpY2ggdmFsdWUgaXMgdGhyb3dpbmcsIGNoZWNrIHRoZSBicm93c2VyIG9yIGRlYnVnZ2VyIGNvbnNvbGUuXG4gIC8vIEJlZm9yZSB0aGlzIGV4Y2VwdGlvbiB3YXMgdGhyb3duLCB0aGVyZSBzaG91bGQgYmUgYGNvbnNvbGUuZXJyb3JgIG91dHB1dFxuICAvLyB0aGF0IHNob3dzIHRoZSB0eXBlIChTeW1ib2wsIFRlbXBvcmFsLlBsYWluRGF0ZSwgZXRjLikgdGhhdCBjYXVzZWQgdGhlXG4gIC8vIHByb2JsZW0gYW5kIGhvdyB0aGF0IHR5cGUgd2FzIHVzZWQ6IGtleSwgYXRycmlidXRlLCBpbnB1dCB2YWx1ZSBwcm9wLCBldGMuXG4gIC8vIEluIG1vc3QgY2FzZXMsIHRoaXMgY29uc29sZSBvdXRwdXQgYWxzbyBzaG93cyB0aGUgY29tcG9uZW50IGFuZCBpdHNcbiAgLy8gYW5jZXN0b3IgY29tcG9uZW50cyB3aGVyZSB0aGUgZXhjZXB0aW9uIGhhcHBlbmVkLlxuICAvL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaW50ZXJuYWwvc2FmZS1zdHJpbmctY29lcmNpb25cbiAgcmV0dXJuICcnICsgdmFsdWU7XG59XG5mdW5jdGlvbiBjaGVja0tleVN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7XG4gIHtcbiAgICBpZiAod2lsbENvZXJjaW9uVGhyb3codmFsdWUpKSB7XG4gICAgICBlcnJvcignVGhlIHByb3ZpZGVkIGtleSBpcyBhbiB1bnN1cHBvcnRlZCB0eXBlICVzLicgKyAnIFRoaXMgdmFsdWUgbXVzdCBiZSBjb2VyY2VkIHRvIGEgc3RyaW5nIGJlZm9yZSB1c2luZyBpdCBoZXJlLicsIHR5cGVOYW1lKHZhbHVlKSk7XG5cbiAgICAgIHJldHVybiB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpOyAvLyB0aHJvdyAodG8gaGVscCBjYWxsZXJzIGZpbmQgdHJvdWJsZXNob290aW5nIGNvbW1lbnRzKVxuICAgIH1cbiAgfVxufVxuXG52YXIgUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRSQxID0gU3ltYm9sLmZvcigncmVhY3QuY2xpZW50LnJlZmVyZW5jZScpO1xuZnVuY3Rpb24gaXNWYWxpZEVsZW1lbnRUeXBlKHR5cGUpIHtcbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9IC8vIE5vdGU6IHR5cGVvZiBtaWdodCBiZSBvdGhlciB0aGFuICdzeW1ib2wnIG9yICdudW1iZXInIChlLmcuIGlmIGl0J3MgYSBwb2x5ZmlsbCkuXG5cblxuICBpZiAodHlwZSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9QUk9GSUxFUl9UWVBFIHx8IGVuYWJsZURlYnVnVHJhY2luZyAgfHwgdHlwZSA9PT0gUkVBQ1RfU1RSSUNUX01PREVfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9TVVNQRU5TRV9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRSB8fCBlbmFibGVMZWdhY3lIaWRkZW4gIHx8IHR5cGUgPT09IFJFQUNUX09GRlNDUkVFTl9UWVBFIHx8IGVuYWJsZVNjb3BlQVBJICB8fCBlbmFibGVDYWNoZUVsZW1lbnQgIHx8IGVuYWJsZVRyYW5zaXRpb25UcmFjaW5nICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JyAmJiB0eXBlICE9PSBudWxsKSB7XG4gICAgaWYgKHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0xBWllfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9NRU1PX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OVEVYVF9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX1BST1ZJREVSX1RZUEUgfHwgZW5hYmxlUmVuZGVyYWJsZUNvbnRleHQgIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgfHwgLy8gVGhpcyBuZWVkcyB0byBpbmNsdWRlIGFsbCBwb3NzaWJsZSBtb2R1bGUgcmVmZXJlbmNlIG9iamVjdFxuICAgIC8vIHR5cGVzIHN1cHBvcnRlZCBieSBhbnkgRmxpZ2h0IGNvbmZpZ3VyYXRpb24gYW55d2hlcmUgc2luY2VcbiAgICAvLyB3ZSBkb24ndCBrbm93IHdoaWNoIEZsaWdodCBidWlsZCB0aGlzIHdpbGwgZW5kIHVwIGJlaW5nIHVzZWRcbiAgICAvLyB3aXRoLlxuICAgIHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UkMSB8fCB0eXBlLmdldE1vZHVsZUlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxudmFyIGlzQXJyYXlJbXBsID0gQXJyYXkuaXNBcnJheTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuXG5mdW5jdGlvbiBpc0FycmF5KGEpIHtcbiAgcmV0dXJuIGlzQXJyYXlJbXBsKGEpO1xufVxuXG4vLyBIZWxwZXJzIHRvIHBhdGNoIGNvbnNvbGUubG9ncyB0byBhdm9pZCBsb2dnaW5nIGR1cmluZyBzaWRlLWVmZmVjdCBmcmVlXG4vLyByZXBsYXlpbmcgb24gcmVuZGVyIGZ1bmN0aW9uLiBUaGlzIGN1cnJlbnRseSBvbmx5IHBhdGNoZXMgdGhlIG9iamVjdFxuLy8gbGF6aWx5IHdoaWNoIHdvbid0IGNvdmVyIGlmIHRoZSBsb2cgZnVuY3Rpb24gd2FzIGV4dHJhY3RlZCBlYWdlcmx5LlxuLy8gV2UgY291bGQgYWxzbyBlYWdlcmx5IHBhdGNoIHRoZSBtZXRob2QuXG52YXIgZGlzYWJsZWREZXB0aCA9IDA7XG52YXIgcHJldkxvZztcbnZhciBwcmV2SW5mbztcbnZhciBwcmV2V2FybjtcbnZhciBwcmV2RXJyb3I7XG52YXIgcHJldkdyb3VwO1xudmFyIHByZXZHcm91cENvbGxhcHNlZDtcbnZhciBwcmV2R3JvdXBFbmQ7XG5cbmZ1bmN0aW9uIGRpc2FibGVkTG9nKCkge31cblxuZGlzYWJsZWRMb2cuX19yZWFjdERpc2FibGVkTG9nID0gdHJ1ZTtcbmZ1bmN0aW9uIGRpc2FibGVMb2dzKCkge1xuICB7XG4gICAgaWYgKGRpc2FibGVkRGVwdGggPT09IDApIHtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0LWludGVybmFsL25vLXByb2R1Y3Rpb24tbG9nZ2luZyAqL1xuICAgICAgcHJldkxvZyA9IGNvbnNvbGUubG9nO1xuICAgICAgcHJldkluZm8gPSBjb25zb2xlLmluZm87XG4gICAgICBwcmV2V2FybiA9IGNvbnNvbGUud2FybjtcbiAgICAgIHByZXZFcnJvciA9IGNvbnNvbGUuZXJyb3I7XG4gICAgICBwcmV2R3JvdXAgPSBjb25zb2xlLmdyb3VwO1xuICAgICAgcHJldkdyb3VwQ29sbGFwc2VkID0gY29uc29sZS5ncm91cENvbGxhcHNlZDtcbiAgICAgIHByZXZHcm91cEVuZCA9IGNvbnNvbGUuZ3JvdXBFbmQ7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMTkwOTlcblxuICAgICAgdmFyIHByb3BzID0ge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiBkaXNhYmxlZExvZyxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIH07IC8vICRGbG93Rml4TWVbY2Fubm90LXdyaXRlXSBGbG93IHRoaW5rcyBjb25zb2xlIGlzIGltbXV0YWJsZS5cblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoY29uc29sZSwge1xuICAgICAgICBpbmZvOiBwcm9wcyxcbiAgICAgICAgbG9nOiBwcm9wcyxcbiAgICAgICAgd2FybjogcHJvcHMsXG4gICAgICAgIGVycm9yOiBwcm9wcyxcbiAgICAgICAgZ3JvdXA6IHByb3BzLFxuICAgICAgICBncm91cENvbGxhcHNlZDogcHJvcHMsXG4gICAgICAgIGdyb3VwRW5kOiBwcm9wc1xuICAgICAgfSk7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIHJlYWN0LWludGVybmFsL25vLXByb2R1Y3Rpb24tbG9nZ2luZyAqL1xuICAgIH1cblxuICAgIGRpc2FibGVkRGVwdGgrKztcbiAgfVxufVxuZnVuY3Rpb24gcmVlbmFibGVMb2dzKCkge1xuICB7XG4gICAgZGlzYWJsZWREZXB0aC0tO1xuXG4gICAgaWYgKGRpc2FibGVkRGVwdGggPT09IDApIHtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0LWludGVybmFsL25vLXByb2R1Y3Rpb24tbG9nZ2luZyAqL1xuICAgICAgdmFyIHByb3BzID0ge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICB9OyAvLyAkRmxvd0ZpeE1lW2Nhbm5vdC13cml0ZV0gRmxvdyB0aGlua3MgY29uc29sZSBpcyBpbW11dGFibGUuXG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGNvbnNvbGUsIHtcbiAgICAgICAgbG9nOiBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICAgICAgdmFsdWU6IHByZXZMb2dcbiAgICAgICAgfSksXG4gICAgICAgIGluZm86IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgICAgICB2YWx1ZTogcHJldkluZm9cbiAgICAgICAgfSksXG4gICAgICAgIHdhcm46IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgICAgICB2YWx1ZTogcHJldldhcm5cbiAgICAgICAgfSksXG4gICAgICAgIGVycm9yOiBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICAgICAgdmFsdWU6IHByZXZFcnJvclxuICAgICAgICB9KSxcbiAgICAgICAgZ3JvdXA6IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgICAgICB2YWx1ZTogcHJldkdyb3VwXG4gICAgICAgIH0pLFxuICAgICAgICBncm91cENvbGxhcHNlZDogYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgICAgIHZhbHVlOiBwcmV2R3JvdXBDb2xsYXBzZWRcbiAgICAgICAgfSksXG4gICAgICAgIGdyb3VwRW5kOiBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICAgICAgdmFsdWU6IHByZXZHcm91cEVuZFxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIHJlYWN0LWludGVybmFsL25vLXByb2R1Y3Rpb24tbG9nZ2luZyAqL1xuICAgIH1cblxuICAgIGlmIChkaXNhYmxlZERlcHRoIDwgMCkge1xuICAgICAgZXJyb3IoJ2Rpc2FibGVkRGVwdGggZmVsbCBiZWxvdyB6ZXJvLiAnICsgJ1RoaXMgaXMgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLicpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgUmVhY3RDdXJyZW50RGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlJlYWN0Q3VycmVudERpc3BhdGNoZXI7XG52YXIgcHJlZml4O1xuZnVuY3Rpb24gZGVzY3JpYmVCdWlsdEluQ29tcG9uZW50RnJhbWUobmFtZSwgb3duZXJGbikge1xuICB7XG4gICAgaWYgKHByZWZpeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBFeHRyYWN0IHRoZSBWTSBzcGVjaWZpYyBwcmVmaXggdXNlZCBieSBlYWNoIGxpbmUuXG4gICAgICB0cnkge1xuICAgICAgICB0aHJvdyBFcnJvcigpO1xuICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICB2YXIgbWF0Y2ggPSB4LnN0YWNrLnRyaW0oKS5tYXRjaCgvXFxuKCAqKGF0ICk/KS8pO1xuICAgICAgICBwcmVmaXggPSBtYXRjaCAmJiBtYXRjaFsxXSB8fCAnJztcbiAgICAgIH1cbiAgICB9IC8vIFdlIHVzZSB0aGUgcHJlZml4IHRvIGVuc3VyZSBvdXIgc3RhY2tzIGxpbmUgdXAgd2l0aCBuYXRpdmUgc3RhY2sgZnJhbWVzLlxuXG5cbiAgICByZXR1cm4gJ1xcbicgKyBwcmVmaXggKyBuYW1lO1xuICB9XG59XG52YXIgcmVlbnRyeSA9IGZhbHNlO1xudmFyIGNvbXBvbmVudEZyYW1lQ2FjaGU7XG5cbntcbiAgdmFyIFBvc3NpYmx5V2Vha01hcCA9IHR5cGVvZiBXZWFrTWFwID09PSAnZnVuY3Rpb24nID8gV2Vha01hcCA6IE1hcDtcbiAgY29tcG9uZW50RnJhbWVDYWNoZSA9IG5ldyBQb3NzaWJseVdlYWtNYXAoKTtcbn1cbi8qKlxuICogTGV2ZXJhZ2VzIG5hdGl2ZSBicm93c2VyL1ZNIHN0YWNrIGZyYW1lcyB0byBnZXQgcHJvcGVyIGRldGFpbHMgKGUuZy5cbiAqIGZpbGVuYW1lLCBsaW5lICsgY29sIG51bWJlcikgZm9yIGEgc2luZ2xlIGNvbXBvbmVudCBpbiBhIGNvbXBvbmVudCBzdGFjay4gV2VcbiAqIGRvIHRoaXMgYnk6XG4gKiAgICgxKSB0aHJvd2luZyBhbmQgY2F0Y2hpbmcgYW4gZXJyb3IgaW4gdGhlIGZ1bmN0aW9uIC0gdGhpcyB3aWxsIGJlIG91clxuICogICAgICAgY29udHJvbCBlcnJvci5cbiAqICAgKDIpIGNhbGxpbmcgdGhlIGNvbXBvbmVudCB3aGljaCB3aWxsIGV2ZW50dWFsbHkgdGhyb3cgYW4gZXJyb3IgdGhhdCB3ZSdsbFxuICogICAgICAgY2F0Y2ggLSB0aGlzIHdpbGwgYmUgb3VyIHNhbXBsZSBlcnJvci5cbiAqICAgKDMpIGRpZmZpbmcgdGhlIGNvbnRyb2wgYW5kIHNhbXBsZSBlcnJvciBzdGFja3MgdG8gZmluZCB0aGUgc3RhY2sgZnJhbWVcbiAqICAgICAgIHdoaWNoIHJlcHJlc2VudHMgb3VyIGNvbXBvbmVudC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGRlc2NyaWJlTmF0aXZlQ29tcG9uZW50RnJhbWUoZm4sIGNvbnN0cnVjdCkge1xuICAvLyBJZiBzb21ldGhpbmcgYXNrZWQgZm9yIGEgc3RhY2sgaW5zaWRlIGEgZmFrZSByZW5kZXIsIGl0IHNob3VsZCBnZXQgaWdub3JlZC5cbiAgaWYgKCFmbiB8fCByZWVudHJ5KSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAge1xuICAgIHZhciBmcmFtZSA9IGNvbXBvbmVudEZyYW1lQ2FjaGUuZ2V0KGZuKTtcblxuICAgIGlmIChmcmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZnJhbWU7XG4gICAgfVxuICB9XG5cbiAgcmVlbnRyeSA9IHRydWU7XG4gIHZhciBwcmV2aW91c1ByZXBhcmVTdGFja1RyYWNlID0gRXJyb3IucHJlcGFyZVN0YWNrVHJhY2U7IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdIEl0IGRvZXMgYWNjZXB0IHVuZGVmaW5lZC5cblxuICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IHVuZGVmaW5lZDtcbiAgdmFyIHByZXZpb3VzRGlzcGF0Y2hlcjtcblxuICB7XG4gICAgcHJldmlvdXNEaXNwYXRjaGVyID0gUmVhY3RDdXJyZW50RGlzcGF0Y2hlci5jdXJyZW50OyAvLyBTZXQgdGhlIGRpc3BhdGNoZXIgaW4gREVWIGJlY2F1c2UgdGhpcyBtaWdodCBiZSBjYWxsIGluIHRoZSByZW5kZXIgZnVuY3Rpb25cbiAgICAvLyBmb3Igd2FybmluZ3MuXG5cbiAgICBSZWFjdEN1cnJlbnREaXNwYXRjaGVyLmN1cnJlbnQgPSBudWxsO1xuICAgIGRpc2FibGVMb2dzKCk7XG4gIH1cbiAgLyoqXG4gICAqIEZpbmRpbmcgYSBjb21tb24gc3RhY2sgZnJhbWUgYmV0d2VlbiBzYW1wbGUgYW5kIGNvbnRyb2wgZXJyb3JzIGNhbiBiZVxuICAgKiB0cmlja3kgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcyBhbmQgbGV2ZWxzIG9mIHN0YWNrIHRyYWNlIHRydW5jYXRpb24gZnJvbVxuICAgKiBkaWZmZXJlbnQgSlMgVk1zLiBTbyBpbnN0ZWFkIHdlJ2xsIGF0dGVtcHQgdG8gY29udHJvbCB3aGF0IHRoYXQgY29tbW9uXG4gICAqIGZyYW1lIHNob3VsZCBiZSB0aHJvdWdoIHRoaXMgb2JqZWN0IG1ldGhvZDpcbiAgICogSGF2aW5nIGJvdGggdGhlIHNhbXBsZSBhbmQgY29udHJvbCBlcnJvcnMgYmUgaW4gdGhlIGZ1bmN0aW9uIHVuZGVyIHRoZVxuICAgKiBgRGVzY3JpYmVOYXRpdmVDb21wb25lbnRGcmFtZVJvb3RgIHByb3BlcnR5LCArIHNldHRpbmcgdGhlIGBuYW1lYCBhbmRcbiAgICogYGRpc3BsYXlOYW1lYCBwcm9wZXJ0aWVzIG9mIHRoZSBmdW5jdGlvbiBlbnN1cmVzIHRoYXQgYSBzdGFja1xuICAgKiBmcmFtZSBleGlzdHMgdGhhdCBoYXMgdGhlIG1ldGhvZCBuYW1lIGBEZXNjcmliZU5hdGl2ZUNvbXBvbmVudEZyYW1lUm9vdGAgaW5cbiAgICogaXQgZm9yIGJvdGggY29udHJvbCBhbmQgc2FtcGxlIHN0YWNrcy5cbiAgICovXG5cblxuICB2YXIgUnVuSW5Sb290RnJhbWUgPSB7XG4gICAgRGV0ZXJtaW5lQ29tcG9uZW50RnJhbWVSb290OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY29udHJvbDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgdGhyb3cuXG4gICAgICAgIGlmIChjb25zdHJ1Y3QpIHtcbiAgICAgICAgICAvLyBTb21ldGhpbmcgc2hvdWxkIGJlIHNldHRpbmcgdGhlIHByb3BzIGluIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAgICAgICB2YXIgRmFrZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCk7XG4gICAgICAgICAgfTsgLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG5cblxuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGYWtlLnByb3RvdHlwZSwgJ3Byb3BzJywge1xuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIC8vIFdlIHVzZSBhIHRocm93aW5nIHNldHRlciBpbnN0ZWFkIG9mIGZyb3plbiBvciBub24td3JpdGFibGUgcHJvcHNcbiAgICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGF0IHdvbid0IHRocm93IGluIGEgbm9uLXN0cmljdCBtb2RlIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyAmJiBSZWZsZWN0LmNvbnN0cnVjdCkge1xuICAgICAgICAgICAgLy8gV2UgY29uc3RydWN0IGEgZGlmZmVyZW50IGNvbnRyb2wgZm9yIHRoaXMgY2FzZSB0byBpbmNsdWRlIGFueSBleHRyYVxuICAgICAgICAgICAgLy8gZnJhbWVzIGFkZGVkIGJ5IHRoZSBjb25zdHJ1Y3QgY2FsbC5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIFJlZmxlY3QuY29uc3RydWN0KEZha2UsIFtdKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgICAgICAgY29udHJvbCA9IHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFJlZmxlY3QuY29uc3RydWN0KGZuLCBbXSwgRmFrZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIEZha2UuY2FsbCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICBjb250cm9sID0geDtcbiAgICAgICAgICAgIH0gLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddIGZvdW5kIHdoZW4gdXBncmFkaW5nIEZsb3dcblxuXG4gICAgICAgICAgICBmbi5jYWxsKEZha2UucHJvdG90eXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCk7XG4gICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgY29udHJvbCA9IHg7XG4gICAgICAgICAgfSAvLyBUT0RPKGx1bmEpOiBUaGlzIHdpbGwgY3VycmVudGx5IG9ubHkgdGhyb3cgaWYgdGhlIGZ1bmN0aW9uIGNvbXBvbmVudFxuICAgICAgICAgIC8vIHRyaWVzIHRvIGFjY2VzcyBSZWFjdC9SZWFjdERPTS9wcm9wcy4gV2Ugc2hvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyB0aHJvd1xuICAgICAgICAgIC8vIGluIHNpbXBsZSBjb21wb25lbnRzIHRvb1xuXG5cbiAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gZm4oKTsgLy8gSWYgdGhlIGZ1bmN0aW9uIGNvbXBvbmVudCByZXR1cm5zIGEgcHJvbWlzZSwgaXQncyBsaWtlbHkgYW4gYXN5bmNcbiAgICAgICAgICAvLyBjb21wb25lbnQsIHdoaWNoIHdlIGRvbid0IHlldCBzdXBwb3J0LiBBdHRhY2ggYSBub29wIGNhdGNoIGhhbmRsZXIgdG9cbiAgICAgICAgICAvLyBzaWxlbmNlIHRoZSBlcnJvci5cbiAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgY29tcG9uZW50IHN0YWNrcyBmb3IgYXN5bmMgY2xpZW50IGNvbXBvbmVudHM/XG5cbiAgICAgICAgICBpZiAobWF5YmVQcm9taXNlICYmIHR5cGVvZiBtYXliZVByb21pc2UuY2F0Y2ggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChzYW1wbGUpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBpbmxpbmVkIG1hbnVhbGx5IGJlY2F1c2UgY2xvc3VyZSBkb2Vzbid0IGRvIGl0IGZvciB1cy5cbiAgICAgICAgaWYgKHNhbXBsZSAmJiBjb250cm9sICYmIHR5cGVvZiBzYW1wbGUuc3RhY2sgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIFtzYW1wbGUuc3RhY2ssIGNvbnRyb2wuc3RhY2tdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbbnVsbCwgbnVsbF07XG4gICAgfVxuICB9OyAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cblxuICBSdW5JblJvb3RGcmFtZS5EZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QuZGlzcGxheU5hbWUgPSAnRGV0ZXJtaW5lQ29tcG9uZW50RnJhbWVSb290JztcbiAgdmFyIG5hbWVQcm9wRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoUnVuSW5Sb290RnJhbWUuRGV0ZXJtaW5lQ29tcG9uZW50RnJhbWVSb290LCAnbmFtZScpOyAvLyBCZWZvcmUgRVM2LCB0aGUgYG5hbWVgIHByb3BlcnR5IHdhcyBub3QgY29uZmlndXJhYmxlLlxuXG4gIGlmIChuYW1lUHJvcERlc2NyaXB0b3IgJiYgbmFtZVByb3BEZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSkge1xuICAgIC8vIFY4IHV0aWxpemVzIGEgZnVuY3Rpb24ncyBgbmFtZWAgcHJvcGVydHkgd2hlbiBnZW5lcmF0aW5nIGEgc3RhY2sgdHJhY2UuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJ1bkluUm9vdEZyYW1lLkRldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCwgLy8gQ29uZmlndXJhYmxlIHByb3BlcnRpZXMgY2FuIGJlIHVwZGF0ZWQgZXZlbiBpZiBpdHMgd3JpdGFibGUgZGVzY3JpcHRvclxuICAgIC8vIGlzIHNldCB0byBgZmFsc2VgLlxuICAgIC8vICRGbG93Rml4TWVbY2Fubm90LXdyaXRlXVxuICAgICduYW1lJywge1xuICAgICAgdmFsdWU6ICdEZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QnXG4gICAgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIHZhciBfUnVuSW5Sb290RnJhbWUkRGV0ZXIgPSBSdW5JblJvb3RGcmFtZS5EZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QoKSxcbiAgICAgICAgc2FtcGxlU3RhY2sgPSBfUnVuSW5Sb290RnJhbWUkRGV0ZXJbMF0sXG4gICAgICAgIGNvbnRyb2xTdGFjayA9IF9SdW5JblJvb3RGcmFtZSREZXRlclsxXTtcblxuICAgIGlmIChzYW1wbGVTdGFjayAmJiBjb250cm9sU3RhY2spIHtcbiAgICAgIC8vIFRoaXMgZXh0cmFjdHMgdGhlIGZpcnN0IGZyYW1lIGZyb20gdGhlIHNhbXBsZSB0aGF0IGlzbid0IGFsc28gaW4gdGhlIGNvbnRyb2wuXG4gICAgICAvLyBTa2lwcGluZyBvbmUgZnJhbWUgdGhhdCB3ZSBhc3N1bWUgaXMgdGhlIGZyYW1lIHRoYXQgY2FsbHMgdGhlIHR3by5cbiAgICAgIHZhciBzYW1wbGVMaW5lcyA9IHNhbXBsZVN0YWNrLnNwbGl0KCdcXG4nKTtcbiAgICAgIHZhciBjb250cm9sTGluZXMgPSBjb250cm9sU3RhY2suc3BsaXQoJ1xcbicpO1xuICAgICAgdmFyIHMgPSAwO1xuICAgICAgdmFyIGMgPSAwO1xuXG4gICAgICB3aGlsZSAocyA8IHNhbXBsZUxpbmVzLmxlbmd0aCAmJiAhc2FtcGxlTGluZXNbc10uaW5jbHVkZXMoJ0RldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCcpKSB7XG4gICAgICAgIHMrKztcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKGMgPCBjb250cm9sTGluZXMubGVuZ3RoICYmICFjb250cm9sTGluZXNbY10uaW5jbHVkZXMoJ0RldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCcpKSB7XG4gICAgICAgIGMrKztcbiAgICAgIH0gLy8gV2UgY291bGRuJ3QgZmluZCBvdXIgaW50ZW50aW9uYWxseSBpbmplY3RlZCBjb21tb24gcm9vdCBmcmFtZSwgYXR0ZW1wdFxuICAgICAgLy8gdG8gZmluZCBhbm90aGVyIGNvbW1vbiByb290IGZyYW1lIGJ5IHNlYXJjaCBmcm9tIHRoZSBib3R0b20gb2YgdGhlXG4gICAgICAvLyBjb250cm9sIHN0YWNrLi4uXG5cblxuICAgICAgaWYgKHMgPT09IHNhbXBsZUxpbmVzLmxlbmd0aCB8fCBjID09PSBjb250cm9sTGluZXMubGVuZ3RoKSB7XG4gICAgICAgIHMgPSBzYW1wbGVMaW5lcy5sZW5ndGggLSAxO1xuICAgICAgICBjID0gY29udHJvbExpbmVzLmxlbmd0aCAtIDE7XG5cbiAgICAgICAgd2hpbGUgKHMgPj0gMSAmJiBjID49IDAgJiYgc2FtcGxlTGluZXNbc10gIT09IGNvbnRyb2xMaW5lc1tjXSkge1xuICAgICAgICAgIC8vIFdlIGV4cGVjdCBhdCBsZWFzdCBvbmUgc3RhY2sgZnJhbWUgdG8gYmUgc2hhcmVkLlxuICAgICAgICAgIC8vIFR5cGljYWxseSB0aGlzIHdpbGwgYmUgdGhlIHJvb3QgbW9zdCBvbmUuIEhvd2V2ZXIsIHN0YWNrIGZyYW1lcyBtYXkgYmVcbiAgICAgICAgICAvLyBjdXQgb2ZmIGR1ZSB0byBtYXhpbXVtIHN0YWNrIGxpbWl0cy4gSW4gdGhpcyBjYXNlLCBvbmUgbWF5YmUgY3V0IG9mZlxuICAgICAgICAgIC8vIGVhcmxpZXIgdGhhbiB0aGUgb3RoZXIuIFdlIGFzc3VtZSB0aGF0IHRoZSBzYW1wbGUgaXMgbG9uZ2VyIG9yIHRoZSBzYW1lXG4gICAgICAgICAgLy8gYW5kIHRoZXJlIGZvciBjdXQgb2ZmIGVhcmxpZXIuIFNvIHdlIHNob3VsZCBmaW5kIHRoZSByb290IG1vc3QgZnJhbWUgaW5cbiAgICAgICAgICAvLyB0aGUgc2FtcGxlIHNvbWV3aGVyZSBpbiB0aGUgY29udHJvbC5cbiAgICAgICAgICBjLS07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yICg7IHMgPj0gMSAmJiBjID49IDA7IHMtLSwgYy0tKSB7XG4gICAgICAgIC8vIE5leHQgd2UgZmluZCB0aGUgZmlyc3Qgb25lIHRoYXQgaXNuJ3QgdGhlIHNhbWUgd2hpY2ggc2hvdWxkIGJlIHRoZVxuICAgICAgICAvLyBmcmFtZSB0aGF0IGNhbGxlZCBvdXIgc2FtcGxlIGZ1bmN0aW9uIGFuZCB0aGUgY29udHJvbC5cbiAgICAgICAgaWYgKHNhbXBsZUxpbmVzW3NdICE9PSBjb250cm9sTGluZXNbY10pIHtcbiAgICAgICAgICAvLyBJbiBWOCwgdGhlIGZpcnN0IGxpbmUgaXMgZGVzY3JpYmluZyB0aGUgbWVzc2FnZSBidXQgb3RoZXIgVk1zIGRvbid0LlxuICAgICAgICAgIC8vIElmIHdlJ3JlIGFib3V0IHRvIHJldHVybiB0aGUgZmlyc3QgbGluZSwgYW5kIHRoZSBjb250cm9sIGlzIGFsc28gb24gdGhlIHNhbWVcbiAgICAgICAgICAvLyBsaW5lLCB0aGF0J3MgYSBwcmV0dHkgZ29vZCBpbmRpY2F0b3IgdGhhdCBvdXIgc2FtcGxlIHRocmV3IGF0IHNhbWUgbGluZSBhc1xuICAgICAgICAgIC8vIHRoZSBjb250cm9sLiBJLmUuIGJlZm9yZSB3ZSBlbnRlcmVkIHRoZSBzYW1wbGUgZnJhbWUuIFNvIHdlIGlnbm9yZSB0aGlzIHJlc3VsdC5cbiAgICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgeW91IHBhc3NlZCBhIGNsYXNzIHRvIGZ1bmN0aW9uIGNvbXBvbmVudCwgb3Igbm9uLWZ1bmN0aW9uLlxuICAgICAgICAgIGlmIChzICE9PSAxIHx8IGMgIT09IDEpIHtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgcy0tO1xuICAgICAgICAgICAgICBjLS07IC8vIFdlIG1heSBzdGlsbCBoYXZlIHNpbWlsYXIgaW50ZXJtZWRpYXRlIGZyYW1lcyBmcm9tIHRoZSBjb25zdHJ1Y3QgY2FsbC5cbiAgICAgICAgICAgICAgLy8gVGhlIG5leHQgb25lIHRoYXQgaXNuJ3QgdGhlIHNhbWUgc2hvdWxkIGJlIG91ciBtYXRjaCB0aG91Z2guXG5cbiAgICAgICAgICAgICAgaWYgKGMgPCAwIHx8IHNhbXBsZUxpbmVzW3NdICE9PSBjb250cm9sTGluZXNbY10pIHtcbiAgICAgICAgICAgICAgICAvLyBWOCBhZGRzIGEgXCJuZXdcIiBwcmVmaXggZm9yIG5hdGl2ZSBjbGFzc2VzLiBMZXQncyByZW1vdmUgaXQgdG8gbWFrZSBpdCBwcmV0dGllci5cbiAgICAgICAgICAgICAgICB2YXIgX2ZyYW1lID0gJ1xcbicgKyBzYW1wbGVMaW5lc1tzXS5yZXBsYWNlKCcgYXQgbmV3ICcsICcgYXQgJyk7IC8vIElmIG91ciBjb21wb25lbnQgZnJhbWUgaXMgbGFiZWxlZCBcIjxhbm9ueW1vdXM+XCJcbiAgICAgICAgICAgICAgICAvLyBidXQgd2UgaGF2ZSBhIHVzZXItcHJvdmlkZWQgXCJkaXNwbGF5TmFtZVwiXG4gICAgICAgICAgICAgICAgLy8gc3BsaWNlIGl0IGluIHRvIG1ha2UgdGhlIHN0YWNrIG1vcmUgcmVhZGFibGUuXG5cblxuICAgICAgICAgICAgICAgIGlmIChmbi5kaXNwbGF5TmFtZSAmJiBfZnJhbWUuaW5jbHVkZXMoJzxhbm9ueW1vdXM+JykpIHtcbiAgICAgICAgICAgICAgICAgIF9mcmFtZSA9IF9mcmFtZS5yZXBsYWNlKCc8YW5vbnltb3VzPicsIGZuLmRpc3BsYXlOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRGcmFtZUNhY2hlLnNldChmbiwgX2ZyYW1lKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IC8vIFJldHVybiB0aGUgbGluZSB3ZSBmb3VuZC5cblxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9mcmFtZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAocyA+PSAxICYmIGMgPj0gMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgcmVlbnRyeSA9IGZhbHNlO1xuXG4gICAge1xuICAgICAgUmVhY3RDdXJyZW50RGlzcGF0Y2hlci5jdXJyZW50ID0gcHJldmlvdXNEaXNwYXRjaGVyO1xuICAgICAgcmVlbmFibGVMb2dzKCk7XG4gICAgfVxuXG4gICAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBwcmV2aW91c1ByZXBhcmVTdGFja1RyYWNlO1xuICB9IC8vIEZhbGxiYWNrIHRvIGp1c3QgdXNpbmcgdGhlIG5hbWUgaWYgd2UgY291bGRuJ3QgbWFrZSBpdCB0aHJvdy5cblxuXG4gIHZhciBuYW1lID0gZm4gPyBmbi5kaXNwbGF5TmFtZSB8fCBmbi5uYW1lIDogJyc7XG4gIHZhciBzeW50aGV0aWNGcmFtZSA9IG5hbWUgPyBkZXNjcmliZUJ1aWx0SW5Db21wb25lbnRGcmFtZShuYW1lKSA6ICcnO1xuXG4gIHtcbiAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb21wb25lbnRGcmFtZUNhY2hlLnNldChmbiwgc3ludGhldGljRnJhbWUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzeW50aGV0aWNGcmFtZTtcbn1cbmZ1bmN0aW9uIGRlc2NyaWJlRnVuY3Rpb25Db21wb25lbnRGcmFtZShmbiwgb3duZXJGbikge1xuICB7XG4gICAgcmV0dXJuIGRlc2NyaWJlTmF0aXZlQ29tcG9uZW50RnJhbWUoZm4sIGZhbHNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzaG91bGRDb25zdHJ1Y3QoQ29tcG9uZW50KSB7XG4gIHZhciBwcm90b3R5cGUgPSBDb21wb25lbnQucHJvdG90eXBlO1xuICByZXR1cm4gISEocHJvdG90eXBlICYmIHByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50KTtcbn1cblxuZnVuY3Rpb24gZGVzY3JpYmVVbmtub3duRWxlbWVudFR5cGVGcmFtZUluREVWKHR5cGUsIG93bmVyRm4pIHtcblxuICBpZiAodHlwZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAge1xuICAgICAgcmV0dXJuIGRlc2NyaWJlTmF0aXZlQ29tcG9uZW50RnJhbWUodHlwZSwgc2hvdWxkQ29uc3RydWN0KHR5cGUpKTtcbiAgICB9XG4gIH1cblxuICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKHR5cGUpO1xuICB9XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9UWVBFOlxuICAgICAgcmV0dXJuIGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKCdTdXNwZW5zZScpO1xuXG4gICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEU6XG4gICAgICByZXR1cm4gZGVzY3JpYmVCdWlsdEluQ29tcG9uZW50RnJhbWUoJ1N1c3BlbnNlTGlzdCcpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgIHN3aXRjaCAodHlwZS4kJHR5cGVvZikge1xuICAgICAgY2FzZSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFOlxuICAgICAgICByZXR1cm4gZGVzY3JpYmVGdW5jdGlvbkNvbXBvbmVudEZyYW1lKHR5cGUucmVuZGVyKTtcblxuICAgICAgY2FzZSBSRUFDVF9NRU1PX1RZUEU6XG4gICAgICAgIC8vIE1lbW8gbWF5IGNvbnRhaW4gYW55IGNvbXBvbmVudCB0eXBlIHNvIHdlIHJlY3Vyc2l2ZWx5IHJlc29sdmUgaXQuXG4gICAgICAgIHJldHVybiBkZXNjcmliZVVua25vd25FbGVtZW50VHlwZUZyYW1lSW5ERVYodHlwZS50eXBlLCBvd25lckZuKTtcblxuICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgbGF6eUNvbXBvbmVudCA9IHR5cGU7XG4gICAgICAgICAgdmFyIHBheWxvYWQgPSBsYXp5Q29tcG9uZW50Ll9wYXlsb2FkO1xuICAgICAgICAgIHZhciBpbml0ID0gbGF6eUNvbXBvbmVudC5faW5pdDtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBMYXp5IG1heSBjb250YWluIGFueSBjb21wb25lbnQgdHlwZSBzbyB3ZSByZWN1cnNpdmVseSByZXNvbHZlIGl0LlxuICAgICAgICAgICAgcmV0dXJuIGRlc2NyaWJlVW5rbm93bkVsZW1lbnRUeXBlRnJhbWVJbkRFVihpbml0KHBheWxvYWQpLCBvd25lckZuKTtcbiAgICAgICAgICB9IGNhdGNoICh4KSB7fVxuICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICcnO1xufVxuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5SZWFjdEN1cnJlbnRPd25lcjtcbnZhciBSZWFjdERlYnVnQ3VycmVudEZyYW1lID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuUmVhY3REZWJ1Z0N1cnJlbnRGcmFtZTtcbnZhciBSRUFDVF9DTElFTlRfUkVGRVJFTkNFID0gU3ltYm9sLmZvcigncmVhY3QuY2xpZW50LnJlZmVyZW5jZScpO1xudmFyIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duO1xudmFyIHNwZWNpYWxQcm9wUmVmV2FybmluZ1Nob3duO1xudmFyIGRpZFdhcm5BYm91dFN0cmluZ1JlZnM7XG5cbntcbiAgZGlkV2FybkFib3V0U3RyaW5nUmVmcyA9IHt9O1xufVxuXG5mdW5jdGlvbiBoYXNWYWxpZFJlZihjb25maWcpIHtcbiAge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgJ3JlZicpKSB7XG4gICAgICB2YXIgZ2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjb25maWcsICdyZWYnKS5nZXQ7XG5cbiAgICAgIGlmIChnZXR0ZXIgJiYgZ2V0dGVyLmlzUmVhY3RXYXJuaW5nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29uZmlnLnJlZiAhPT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBoYXNWYWxpZEtleShjb25maWcpIHtcbiAge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgJ2tleScpKSB7XG4gICAgICB2YXIgZ2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjb25maWcsICdrZXknKS5nZXQ7XG5cbiAgICAgIGlmIChnZXR0ZXIgJiYgZ2V0dGVyLmlzUmVhY3RXYXJuaW5nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29uZmlnLmtleSAhPT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiB3YXJuSWZTdHJpbmdSZWZDYW5ub3RCZUF1dG9Db252ZXJ0ZWQoY29uZmlnLCBzZWxmKSB7XG4gIHtcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5yZWYgPT09ICdzdHJpbmcnICYmIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgJiYgc2VsZiAmJiBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LnN0YXRlTm9kZSAhPT0gc2VsZikge1xuICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC50eXBlKTtcblxuICAgICAgaWYgKCFkaWRXYXJuQWJvdXRTdHJpbmdSZWZzW2NvbXBvbmVudE5hbWVdKSB7XG4gICAgICAgIGVycm9yKCdDb21wb25lbnQgXCIlc1wiIGNvbnRhaW5zIHRoZSBzdHJpbmcgcmVmIFwiJXNcIi4gJyArICdTdXBwb3J0IGZvciBzdHJpbmcgcmVmcyB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZS4gJyArICdUaGlzIGNhc2UgY2Fubm90IGJlIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIHRvIGFuIGFycm93IGZ1bmN0aW9uLiAnICsgJ1dlIGFzayB5b3UgdG8gbWFudWFsbHkgZml4IHRoaXMgY2FzZSBieSB1c2luZyB1c2VSZWYoKSBvciBjcmVhdGVSZWYoKSBpbnN0ZWFkLiAnICsgJ0xlYXJuIG1vcmUgYWJvdXQgdXNpbmcgcmVmcyBzYWZlbHkgaGVyZTogJyArICdodHRwczovL3JlYWN0anMub3JnL2xpbmsvc3RyaWN0LW1vZGUtc3RyaW5nLXJlZicsIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LnR5cGUpLCBjb25maWcucmVmKTtcblxuICAgICAgICBkaWRXYXJuQWJvdXRTdHJpbmdSZWZzW2NvbXBvbmVudE5hbWVdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKSB7XG4gIHtcbiAgICB2YXIgd2FybkFib3V0QWNjZXNzaW5nS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93bikge1xuICAgICAgICBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biA9IHRydWU7XG5cbiAgICAgICAgZXJyb3IoJyVzOiBga2V5YCBpcyBub3QgYSBwcm9wLiBUcnlpbmcgdG8gYWNjZXNzIGl0IHdpbGwgcmVzdWx0ICcgKyAnaW4gYHVuZGVmaW5lZGAgYmVpbmcgcmV0dXJuZWQuIElmIHlvdSBuZWVkIHRvIGFjY2VzcyB0aGUgc2FtZSAnICsgJ3ZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgJyArICdwcm9wLiAoaHR0cHM6Ly9yZWFjdGpzLm9yZy9saW5rL3NwZWNpYWwtcHJvcHMpJywgZGlzcGxheU5hbWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkuaXNSZWFjdFdhcm5pbmcgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wcywgJ2tleScsIHtcbiAgICAgIGdldDogd2FybkFib3V0QWNjZXNzaW5nS2V5LFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVmaW5lUmVmUHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKSB7XG4gIHtcbiAgICB7XG4gICAgICB2YXIgd2FybkFib3V0QWNjZXNzaW5nUmVmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXNwZWNpYWxQcm9wUmVmV2FybmluZ1Nob3duKSB7XG4gICAgICAgICAgc3BlY2lhbFByb3BSZWZXYXJuaW5nU2hvd24gPSB0cnVlO1xuXG4gICAgICAgICAgZXJyb3IoJyVzOiBgcmVmYCBpcyBub3QgYSBwcm9wLiBUcnlpbmcgdG8gYWNjZXNzIGl0IHdpbGwgcmVzdWx0ICcgKyAnaW4gYHVuZGVmaW5lZGAgYmVpbmcgcmV0dXJuZWQuIElmIHlvdSBuZWVkIHRvIGFjY2VzcyB0aGUgc2FtZSAnICsgJ3ZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgJyArICdwcm9wLiAoaHR0cHM6Ly9yZWFjdGpzLm9yZy9saW5rL3NwZWNpYWwtcHJvcHMpJywgZGlzcGxheU5hbWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB3YXJuQWJvdXRBY2Nlc3NpbmdSZWYuaXNSZWFjdFdhcm5pbmcgPSB0cnVlO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3BzLCAncmVmJywge1xuICAgICAgICBnZXQ6IHdhcm5BYm91dEFjY2Vzc2luZ1JlZixcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbi8qKlxuICogRmFjdG9yeSBtZXRob2QgdG8gY3JlYXRlIGEgbmV3IFJlYWN0IGVsZW1lbnQuIFRoaXMgbm8gbG9uZ2VyIGFkaGVyZXMgdG9cbiAqIHRoZSBjbGFzcyBwYXR0ZXJuLCBzbyBkbyBub3QgdXNlIG5ldyB0byBjYWxsIGl0LiBBbHNvLCBpbnN0YW5jZW9mIGNoZWNrXG4gKiB3aWxsIG5vdCB3b3JrLiBJbnN0ZWFkIHRlc3QgJCR0eXBlb2YgZmllbGQgYWdhaW5zdCBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50JykgdG8gY2hlY2tcbiAqIGlmIHNvbWV0aGluZyBpcyBhIFJlYWN0IEVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHsqfSB0eXBlXG4gKiBAcGFyYW0geyp9IHByb3BzXG4gKiBAcGFyYW0geyp9IGtleVxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZWZcbiAqIEBwYXJhbSB7Kn0gb3duZXJcbiAqIEBwYXJhbSB7Kn0gc2VsZiBBICp0ZW1wb3JhcnkqIGhlbHBlciB0byBkZXRlY3QgcGxhY2VzIHdoZXJlIGB0aGlzYCBpc1xuICogZGlmZmVyZW50IGZyb20gdGhlIGBvd25lcmAgd2hlbiBSZWFjdC5jcmVhdGVFbGVtZW50IGlzIGNhbGxlZCwgc28gdGhhdCB3ZVxuICogY2FuIHdhcm4uIFdlIHdhbnQgdG8gZ2V0IHJpZCBvZiBvd25lciBhbmQgcmVwbGFjZSBzdHJpbmcgYHJlZmBzIHdpdGggYXJyb3dcbiAqIGZ1bmN0aW9ucywgYW5kIGFzIGxvbmcgYXMgYHRoaXNgIGFuZCBvd25lciBhcmUgdGhlIHNhbWUsIHRoZXJlIHdpbGwgYmUgbm9cbiAqIGNoYW5nZSBpbiBiZWhhdmlvci5cbiAqIEBwYXJhbSB7Kn0gc291cmNlIEFuIGFubm90YXRpb24gb2JqZWN0IChhZGRlZCBieSBhIHRyYW5zcGlsZXIgb3Igb3RoZXJ3aXNlKVxuICogaW5kaWNhdGluZyBmaWxlbmFtZSwgbGluZSBudW1iZXIsIGFuZC9vciBvdGhlciBpbmZvcm1hdGlvbi5cbiAqIEBpbnRlcm5hbFxuICovXG5cblxuZnVuY3Rpb24gUmVhY3RFbGVtZW50KHR5cGUsIGtleSwgX3JlZiwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMpIHtcbiAgdmFyIHJlZjtcblxuICB7XG4gICAgcmVmID0gX3JlZjtcbiAgfVxuXG4gIHZhciBlbGVtZW50O1xuXG4gIHtcbiAgICAvLyBJbiBwcm9kLCBgcmVmYCBpcyBhIHJlZ3VsYXIgcHJvcGVydHkuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiBhXG4gICAgLy8gZnV0dXJlIHJlbGVhc2UuXG4gICAgZWxlbWVudCA9IHtcbiAgICAgIC8vIFRoaXMgdGFnIGFsbG93cyB1cyB0byB1bmlxdWVseSBpZGVudGlmeSB0aGlzIGFzIGEgUmVhY3QgRWxlbWVudFxuICAgICAgJCR0eXBlb2Y6IFJFQUNUX0VMRU1FTlRfVFlQRSxcbiAgICAgIC8vIEJ1aWx0LWluIHByb3BlcnRpZXMgdGhhdCBiZWxvbmcgb24gdGhlIGVsZW1lbnRcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICBrZXk6IGtleSxcbiAgICAgIHJlZjogcmVmLFxuICAgICAgcHJvcHM6IHByb3BzLFxuICAgICAgLy8gUmVjb3JkIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoaXMgZWxlbWVudC5cbiAgICAgIF9vd25lcjogb3duZXJcbiAgICB9O1xuICB9XG5cbiAge1xuICAgIC8vIFRoZSB2YWxpZGF0aW9uIGZsYWcgaXMgY3VycmVudGx5IG11dGF0aXZlLiBXZSBwdXQgaXQgb25cbiAgICAvLyBhbiBleHRlcm5hbCBiYWNraW5nIHN0b3JlIHNvIHRoYXQgd2UgY2FuIGZyZWV6ZSB0aGUgd2hvbGUgb2JqZWN0LlxuICAgIC8vIFRoaXMgY2FuIGJlIHJlcGxhY2VkIHdpdGggYSBXZWFrTWFwIG9uY2UgdGhleSBhcmUgaW1wbGVtZW50ZWQgaW5cbiAgICAvLyBjb21tb25seSB1c2VkIGRldmVsb3BtZW50IGVudmlyb25tZW50cy5cbiAgICBlbGVtZW50Ll9zdG9yZSA9IHt9OyAvLyBUbyBtYWtlIGNvbXBhcmluZyBSZWFjdEVsZW1lbnRzIGVhc2llciBmb3IgdGVzdGluZyBwdXJwb3Nlcywgd2UgbWFrZVxuICAgIC8vIHRoZSB2YWxpZGF0aW9uIGZsYWcgbm9uLWVudW1lcmFibGUgKHdoZXJlIHBvc3NpYmxlLCB3aGljaCBzaG91bGRcbiAgICAvLyBpbmNsdWRlIGV2ZXJ5IGVudmlyb25tZW50IHdlIHJ1biB0ZXN0cyBpbiksIHNvIHRoZSB0ZXN0IGZyYW1ld29ya1xuICAgIC8vIGlnbm9yZXMgaXQuXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudC5fc3RvcmUsICd2YWxpZGF0ZWQnLCB7XG4gICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBmYWxzZVxuICAgIH0pOyAvLyBkZWJ1Z0luZm8gY29udGFpbnMgU2VydmVyIENvbXBvbmVudCBkZWJ1ZyBpbmZvcm1hdGlvbi5cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50LCAnX2RlYnVnSW5mbycsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IG51bGxcbiAgICB9KTtcblxuICAgIGlmIChPYmplY3QuZnJlZXplKSB7XG4gICAgICBPYmplY3QuZnJlZXplKGVsZW1lbnQucHJvcHMpO1xuICAgICAgT2JqZWN0LmZyZWV6ZShlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn1cbnZhciBkaWRXYXJuQWJvdXRLZXlTcHJlYWQgPSB7fTtcbi8qKlxuICogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0anMvcmZjcy9wdWxsLzEwN1xuICogQHBhcmFtIHsqfSB0eXBlXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqL1xuXG5mdW5jdGlvbiBqc3hERVYkMSh0eXBlLCBjb25maWcsIG1heWJlS2V5LCBpc1N0YXRpY0NoaWxkcmVuLCBzb3VyY2UsIHNlbGYpIHtcbiAge1xuICAgIGlmICghaXNWYWxpZEVsZW1lbnRUeXBlKHR5cGUpKSB7XG4gICAgICAvLyBUaGlzIGlzIGFuIGludmFsaWQgZWxlbWVudCB0eXBlLlxuICAgICAgLy9cbiAgICAgIC8vIFdlIHdhcm4gaW4gdGhpcyBjYXNlIGJ1dCBkb24ndCB0aHJvdy4gV2UgZXhwZWN0IHRoZSBlbGVtZW50IGNyZWF0aW9uIHRvXG4gICAgICAvLyBzdWNjZWVkIGFuZCB0aGVyZSB3aWxsIGxpa2VseSBiZSBlcnJvcnMgaW4gcmVuZGVyLlxuICAgICAgdmFyIGluZm8gPSAnJztcblxuICAgICAgaWYgKHR5cGUgPT09IHVuZGVmaW5lZCB8fCB0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcgJiYgdHlwZSAhPT0gbnVsbCAmJiBPYmplY3Qua2V5cyh0eXBlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaW5mbyArPSAnIFlvdSBsaWtlbHkgZm9yZ290IHRvIGV4cG9ydCB5b3VyIGNvbXBvbmVudCBmcm9tIHRoZSBmaWxlICcgKyBcIml0J3MgZGVmaW5lZCBpbiwgb3IgeW91IG1pZ2h0IGhhdmUgbWl4ZWQgdXAgZGVmYXVsdCBhbmQgbmFtZWQgaW1wb3J0cy5cIjtcbiAgICAgIH1cblxuICAgICAgdmFyIHR5cGVTdHJpbmc7XG5cbiAgICAgIGlmICh0eXBlID09PSBudWxsKSB7XG4gICAgICAgIHR5cGVTdHJpbmcgPSAnbnVsbCc7XG4gICAgICB9IGVsc2UgaWYgKGlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgdHlwZVN0cmluZyA9ICdhcnJheSc7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgIT09IHVuZGVmaW5lZCAmJiB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEUpIHtcbiAgICAgICAgdHlwZVN0cmluZyA9IFwiPFwiICsgKGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlLnR5cGUpIHx8ICdVbmtub3duJykgKyBcIiAvPlwiO1xuICAgICAgICBpbmZvID0gJyBEaWQgeW91IGFjY2lkZW50YWxseSBleHBvcnQgYSBKU1ggbGl0ZXJhbCBpbnN0ZWFkIG9mIGEgY29tcG9uZW50Pyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0eXBlU3RyaW5nID0gdHlwZW9mIHR5cGU7XG4gICAgICB9XG5cbiAgICAgIGVycm9yKCdSZWFjdC5qc3g6IHR5cGUgaXMgaW52YWxpZCAtLSBleHBlY3RlZCBhIHN0cmluZyAoZm9yICcgKyAnYnVpbHQtaW4gY29tcG9uZW50cykgb3IgYSBjbGFzcy9mdW5jdGlvbiAoZm9yIGNvbXBvc2l0ZSAnICsgJ2NvbXBvbmVudHMpIGJ1dCBnb3Q6ICVzLiVzJywgdHlwZVN0cmluZywgaW5mbyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoaXMgaXMgYSB2YWxpZCBlbGVtZW50IHR5cGUuXG4gICAgICAvLyBTa2lwIGtleSB3YXJuaW5nIGlmIHRoZSB0eXBlIGlzbid0IHZhbGlkIHNpbmNlIG91ciBrZXkgdmFsaWRhdGlvbiBsb2dpY1xuICAgICAgLy8gZG9lc24ndCBleHBlY3QgYSBub24tc3RyaW5nL2Z1bmN0aW9uIHR5cGUgYW5kIGNhbiB0aHJvdyBjb25mdXNpbmdcbiAgICAgIC8vIGVycm9ycy4gV2UgZG9uJ3Qgd2FudCBleGNlcHRpb24gYmVoYXZpb3IgdG8gZGlmZmVyIGJldHdlZW4gZGV2IGFuZFxuICAgICAgLy8gcHJvZC4gKFJlbmRlcmluZyB3aWxsIHRocm93IHdpdGggYSBoZWxwZnVsIG1lc3NhZ2UgYW5kIGFzIHNvb24gYXMgdGhlXG4gICAgICAvLyB0eXBlIGlzIGZpeGVkLCB0aGUga2V5IHdhcm5pbmdzIHdpbGwgYXBwZWFyLilcbiAgICAgIHZhciBjaGlsZHJlbiA9IGNvbmZpZy5jaGlsZHJlbjtcblxuICAgICAgaWYgKGNoaWxkcmVuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGlzU3RhdGljQ2hpbGRyZW4pIHtcbiAgICAgICAgICBpZiAoaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgdmFsaWRhdGVDaGlsZEtleXMoY2hpbGRyZW5baV0sIHR5cGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmZyZWV6ZSkge1xuICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKGNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyb3IoJ1JlYWN0LmpzeDogU3RhdGljIGNoaWxkcmVuIHNob3VsZCBhbHdheXMgYmUgYW4gYXJyYXkuICcgKyAnWW91IGFyZSBsaWtlbHkgZXhwbGljaXRseSBjYWxsaW5nIFJlYWN0LmpzeHMgb3IgUmVhY3QuanN4REVWLiAnICsgJ1VzZSB0aGUgQmFiZWwgdHJhbnNmb3JtIGluc3RlYWQuJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbGlkYXRlQ2hpbGRLZXlzKGNoaWxkcmVuLCB0eXBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gV2FybiBhYm91dCBrZXkgc3ByZWFkIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGUgdHlwZSBpcyB2YWxpZC5cblxuXG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCAna2V5JykpIHtcbiAgICAgIHZhciBjb21wb25lbnROYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpO1xuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpLmZpbHRlcihmdW5jdGlvbiAoaykge1xuICAgICAgICByZXR1cm4gayAhPT0gJ2tleSc7XG4gICAgICB9KTtcbiAgICAgIHZhciBiZWZvcmVFeGFtcGxlID0ga2V5cy5sZW5ndGggPiAwID8gJ3trZXk6IHNvbWVLZXksICcgKyBrZXlzLmpvaW4oJzogLi4uLCAnKSArICc6IC4uLn0nIDogJ3trZXk6IHNvbWVLZXl9JztcblxuICAgICAgaWYgKCFkaWRXYXJuQWJvdXRLZXlTcHJlYWRbY29tcG9uZW50TmFtZSArIGJlZm9yZUV4YW1wbGVdKSB7XG4gICAgICAgIHZhciBhZnRlckV4YW1wbGUgPSBrZXlzLmxlbmd0aCA+IDAgPyAneycgKyBrZXlzLmpvaW4oJzogLi4uLCAnKSArICc6IC4uLn0nIDogJ3t9JztcblxuICAgICAgICBlcnJvcignQSBwcm9wcyBvYmplY3QgY29udGFpbmluZyBhIFwia2V5XCIgcHJvcCBpcyBiZWluZyBzcHJlYWQgaW50byBKU1g6XFxuJyArICcgIGxldCBwcm9wcyA9ICVzO1xcbicgKyAnICA8JXMgey4uLnByb3BzfSAvPlxcbicgKyAnUmVhY3Qga2V5cyBtdXN0IGJlIHBhc3NlZCBkaXJlY3RseSB0byBKU1ggd2l0aG91dCB1c2luZyBzcHJlYWQ6XFxuJyArICcgIGxldCBwcm9wcyA9ICVzO1xcbicgKyAnICA8JXMga2V5PXtzb21lS2V5fSB7Li4ucHJvcHN9IC8+JywgYmVmb3JlRXhhbXBsZSwgY29tcG9uZW50TmFtZSwgYWZ0ZXJFeGFtcGxlLCBjb21wb25lbnROYW1lKTtcblxuICAgICAgICBkaWRXYXJuQWJvdXRLZXlTcHJlYWRbY29tcG9uZW50TmFtZSArIGJlZm9yZUV4YW1wbGVdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJvcE5hbWU7IC8vIFJlc2VydmVkIG5hbWVzIGFyZSBleHRyYWN0ZWRcblxuICAgIHZhciBwcm9wcyA9IHt9O1xuICAgIHZhciBrZXkgPSBudWxsO1xuICAgIHZhciByZWYgPSBudWxsOyAvLyBDdXJyZW50bHksIGtleSBjYW4gYmUgc3ByZWFkIGluIGFzIGEgcHJvcC4gVGhpcyBjYXVzZXMgYSBwb3RlbnRpYWxcbiAgICAvLyBpc3N1ZSBpZiBrZXkgaXMgYWxzbyBleHBsaWNpdGx5IGRlY2xhcmVkIChpZS4gPGRpdiB7Li4ucHJvcHN9IGtleT1cIkhpXCIgLz5cbiAgICAvLyBvciA8ZGl2IGtleT1cIkhpXCIgey4uLnByb3BzfSAvPiApLiBXZSB3YW50IHRvIGRlcHJlY2F0ZSBrZXkgc3ByZWFkLFxuICAgIC8vIGJ1dCBhcyBhbiBpbnRlcm1lZGlhcnkgc3RlcCwgd2Ugd2lsbCB1c2UganN4REVWIGZvciBldmVyeXRoaW5nIGV4Y2VwdFxuICAgIC8vIDxkaXYgey4uLnByb3BzfSBrZXk9XCJIaVwiIC8+LCBiZWNhdXNlIHdlIGFyZW4ndCBjdXJyZW50bHkgYWJsZSB0byB0ZWxsIGlmXG4gICAgLy8ga2V5IGlzIGV4cGxpY2l0bHkgZGVjbGFyZWQgdG8gYmUgdW5kZWZpbmVkIG9yIG5vdC5cblxuICAgIGlmIChtYXliZUtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB7XG4gICAgICAgIGNoZWNrS2V5U3RyaW5nQ29lcmNpb24obWF5YmVLZXkpO1xuICAgICAgfVxuXG4gICAgICBrZXkgPSAnJyArIG1heWJlS2V5O1xuICAgIH1cblxuICAgIGlmIChoYXNWYWxpZEtleShjb25maWcpKSB7XG4gICAgICB7XG4gICAgICAgIGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY29uZmlnLmtleSk7XG4gICAgICB9XG5cbiAgICAgIGtleSA9ICcnICsgY29uZmlnLmtleTtcbiAgICB9XG5cbiAgICBpZiAoaGFzVmFsaWRSZWYoY29uZmlnKSkge1xuICAgICAge1xuICAgICAgICByZWYgPSBjb25maWcucmVmO1xuICAgICAgfVxuXG4gICAgICB3YXJuSWZTdHJpbmdSZWZDYW5ub3RCZUF1dG9Db252ZXJ0ZWQoY29uZmlnLCBzZWxmKTtcbiAgICB9IC8vIFJlbWFpbmluZyBwcm9wZXJ0aWVzIGFyZSBhZGRlZCB0byBhIG5ldyBwcm9wcyBvYmplY3RcblxuXG4gICAgZm9yIChwcm9wTmFtZSBpbiBjb25maWcpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgcHJvcE5hbWUpICYmIC8vIFNraXAgb3ZlciByZXNlcnZlZCBwcm9wIG5hbWVzXG4gICAgICBwcm9wTmFtZSAhPT0gJ2tleScgJiYgKHByb3BOYW1lICE9PSAncmVmJykpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9IC8vIFJlc29sdmUgZGVmYXVsdCBwcm9wc1xuXG5cbiAgICBpZiAodHlwZSAmJiB0eXBlLmRlZmF1bHRQcm9wcykge1xuICAgICAgdmFyIGRlZmF1bHRQcm9wcyA9IHR5cGUuZGVmYXVsdFByb3BzO1xuXG4gICAgICBmb3IgKHByb3BOYW1lIGluIGRlZmF1bHRQcm9wcykge1xuICAgICAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBkZWZhdWx0UHJvcHNbcHJvcE5hbWVdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGtleSB8fCByZWYpIHtcbiAgICAgIHZhciBkaXNwbGF5TmFtZSA9IHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nID8gdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgJ1Vua25vd24nIDogdHlwZTtcblxuICAgICAgaWYgKGtleSkge1xuICAgICAgICBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIGRlZmluZVJlZlByb3BXYXJuaW5nR2V0dGVyKHByb3BzLCBkaXNwbGF5TmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGVsZW1lbnQgPSBSZWFjdEVsZW1lbnQodHlwZSwga2V5LCByZWYsIHNlbGYsIHNvdXJjZSwgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCwgcHJvcHMpO1xuXG4gICAgaWYgKHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUpIHtcbiAgICAgIHZhbGlkYXRlRnJhZ21lbnRQcm9wcyhlbGVtZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKSB7XG4gIHtcbiAgICBpZiAoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC50eXBlKTtcblxuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICdcXG5cXG5DaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAnJztcbiAgfVxufVxuLyoqXG4gKiBFbnN1cmUgdGhhdCBldmVyeSBlbGVtZW50IGVpdGhlciBpcyBwYXNzZWQgaW4gYSBzdGF0aWMgbG9jYXRpb24sIGluIGFuXG4gKiBhcnJheSB3aXRoIGFuIGV4cGxpY2l0IGtleXMgcHJvcGVydHkgZGVmaW5lZCwgb3IgaW4gYW4gb2JqZWN0IGxpdGVyYWxcbiAqIHdpdGggdmFsaWQga2V5IHByb3BlcnR5LlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHtSZWFjdE5vZGV9IG5vZGUgU3RhdGljYWxseSBwYXNzZWQgY2hpbGQgb2YgYW55IHR5cGUuXG4gKiBAcGFyYW0geyp9IHBhcmVudFR5cGUgbm9kZSdzIHBhcmVudCdzIHR5cGUuXG4gKi9cblxuXG5mdW5jdGlvbiB2YWxpZGF0ZUNoaWxkS2V5cyhub2RlLCBwYXJlbnRUeXBlKSB7XG4gIHtcbiAgICBpZiAodHlwZW9mIG5vZGUgIT09ICdvYmplY3QnIHx8ICFub2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vZGUuJCR0eXBlb2YgPT09IFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UpIDsgZWxzZSBpZiAoaXNBcnJheShub2RlKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IG5vZGVbaV07XG5cbiAgICAgICAgaWYgKGlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuICAgICAgICAgIHZhbGlkYXRlRXhwbGljaXRLZXkoY2hpbGQsIHBhcmVudFR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1ZhbGlkRWxlbWVudChub2RlKSkge1xuICAgICAgLy8gVGhpcyBlbGVtZW50IHdhcyBwYXNzZWQgaW4gYSB2YWxpZCBsb2NhdGlvbi5cbiAgICAgIGlmIChub2RlLl9zdG9yZSkge1xuICAgICAgICBub2RlLl9zdG9yZS52YWxpZGF0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obm9kZSk7XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBFbnRyeSBpdGVyYXRvcnMgdXNlZCB0byBwcm92aWRlIGltcGxpY2l0IGtleXMsXG4gICAgICAgIC8vIGJ1dCBub3cgd2UgcHJpbnQgYSBzZXBhcmF0ZSB3YXJuaW5nIGZvciB0aGVtIGxhdGVyLlxuICAgICAgICBpZiAoaXRlcmF0b3JGbiAhPT0gbm9kZS5lbnRyaWVzKSB7XG4gICAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG5vZGUpO1xuICAgICAgICAgIHZhciBzdGVwO1xuXG4gICAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWRFbGVtZW50KHN0ZXAudmFsdWUpKSB7XG4gICAgICAgICAgICAgIHZhbGlkYXRlRXhwbGljaXRLZXkoc3RlcC52YWx1ZSwgcGFyZW50VHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4vKipcbiAqIFZlcmlmaWVzIHRoZSBvYmplY3QgaXMgYSBSZWFjdEVsZW1lbnQuXG4gKiBTZWUgaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL3JlYWN0LWFwaS5odG1sI2lzdmFsaWRlbGVtZW50XG4gKiBAcGFyYW0gez9vYmplY3R9IG9iamVjdFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqZWN0YCBpcyBhIFJlYWN0RWxlbWVudC5cbiAqIEBmaW5hbFxuICovXG5cblxuZnVuY3Rpb24gaXNWYWxpZEVsZW1lbnQob2JqZWN0KSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QgIT09IG51bGwgJiYgb2JqZWN0LiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEU7XG59XG52YXIgb3duZXJIYXNLZXlVc2VXYXJuaW5nID0ge307XG4vKipcbiAqIFdhcm4gaWYgdGhlIGVsZW1lbnQgZG9lc24ndCBoYXZlIGFuIGV4cGxpY2l0IGtleSBhc3NpZ25lZCB0byBpdC5cbiAqIFRoaXMgZWxlbWVudCBpcyBpbiBhbiBhcnJheS4gVGhlIGFycmF5IGNvdWxkIGdyb3cgYW5kIHNocmluayBvciBiZVxuICogcmVvcmRlcmVkLiBBbGwgY2hpbGRyZW4gdGhhdCBoYXZlbid0IGFscmVhZHkgYmVlbiB2YWxpZGF0ZWQgYXJlIHJlcXVpcmVkIHRvXG4gKiBoYXZlIGEgXCJrZXlcIiBwcm9wZXJ0eSBhc3NpZ25lZCB0byBpdC4gRXJyb3Igc3RhdHVzZXMgYXJlIGNhY2hlZCBzbyBhIHdhcm5pbmdcbiAqIHdpbGwgb25seSBiZSBzaG93biBvbmNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCB0aGF0IHJlcXVpcmVzIGEga2V5LlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIGVsZW1lbnQncyBwYXJlbnQncyB0eXBlLlxuICovXG5cbmZ1bmN0aW9uIHZhbGlkYXRlRXhwbGljaXRLZXkoZWxlbWVudCwgcGFyZW50VHlwZSkge1xuICB7XG4gICAgaWYgKCFlbGVtZW50Ll9zdG9yZSB8fCBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgfHwgZWxlbWVudC5rZXkgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG4gICAgdmFyIGN1cnJlbnRDb21wb25lbnRFcnJvckluZm8gPSBnZXRDdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvKHBhcmVudFR5cGUpO1xuXG4gICAgaWYgKG93bmVySGFzS2V5VXNlV2FybmluZ1tjdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG93bmVySGFzS2V5VXNlV2FybmluZ1tjdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvXSA9IHRydWU7IC8vIFVzdWFsbHkgdGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIG9mZmVuZGVyLCBidXQgaWYgaXQgYWNjZXB0cyBjaGlsZHJlbiBhcyBhXG4gICAgLy8gcHJvcGVydHksIGl0IG1heSBiZSB0aGUgY3JlYXRvciBvZiB0aGUgY2hpbGQgdGhhdCdzIHJlc3BvbnNpYmxlIGZvclxuICAgIC8vIGFzc2lnbmluZyBpdCBhIGtleS5cblxuICAgIHZhciBjaGlsZE93bmVyID0gJyc7XG5cbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50Ll9vd25lciAmJiBlbGVtZW50Ll9vd25lciAhPT0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCkge1xuICAgICAgLy8gR2l2ZSB0aGUgY29tcG9uZW50IHRoYXQgb3JpZ2luYWxseSBjcmVhdGVkIHRoaXMgY2hpbGQuXG4gICAgICBjaGlsZE93bmVyID0gXCIgSXQgd2FzIHBhc3NlZCBhIGNoaWxkIGZyb20gXCIgKyBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoZWxlbWVudC5fb3duZXIudHlwZSkgKyBcIi5cIjtcbiAgICB9XG5cbiAgICBzZXRDdXJyZW50bHlWYWxpZGF0aW5nRWxlbWVudChlbGVtZW50KTtcblxuICAgIGVycm9yKCdFYWNoIGNoaWxkIGluIGEgbGlzdCBzaG91bGQgaGF2ZSBhIHVuaXF1ZSBcImtleVwiIHByb3AuJyArICclcyVzIFNlZSBodHRwczovL3JlYWN0anMub3JnL2xpbmsvd2FybmluZy1rZXlzIGZvciBtb3JlIGluZm9ybWF0aW9uLicsIGN1cnJlbnRDb21wb25lbnRFcnJvckluZm8sIGNoaWxkT3duZXIpO1xuXG4gICAgc2V0Q3VycmVudGx5VmFsaWRhdGluZ0VsZW1lbnQobnVsbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0Q3VycmVudGx5VmFsaWRhdGluZ0VsZW1lbnQoZWxlbWVudCkge1xuICB7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIHZhciBvd25lciA9IGVsZW1lbnQuX293bmVyO1xuICAgICAgdmFyIHN0YWNrID0gZGVzY3JpYmVVbmtub3duRWxlbWVudFR5cGVGcmFtZUluREVWKGVsZW1lbnQudHlwZSwgb3duZXIgPyBvd25lci50eXBlIDogbnVsbCk7XG4gICAgICBSZWFjdERlYnVnQ3VycmVudEZyYW1lLnNldEV4dHJhU3RhY2tGcmFtZShzdGFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlYWN0RGVidWdDdXJyZW50RnJhbWUuc2V0RXh0cmFTdGFja0ZyYW1lKG51bGwpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvKHBhcmVudFR5cGUpIHtcbiAge1xuICAgIHZhciBpbmZvID0gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKCk7XG5cbiAgICBpZiAoIWluZm8pIHtcbiAgICAgIHZhciBwYXJlbnROYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHBhcmVudFR5cGUpO1xuXG4gICAgICBpZiAocGFyZW50TmFtZSkge1xuICAgICAgICBpbmZvID0gXCJcXG5cXG5DaGVjayB0aGUgdG9wLWxldmVsIHJlbmRlciBjYWxsIHVzaW5nIDxcIiArIHBhcmVudE5hbWUgKyBcIj4uXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZm87XG4gIH1cbn1cbi8qKlxuICogR2l2ZW4gYSBmcmFnbWVudCwgdmFsaWRhdGUgdGhhdCBpdCBjYW4gb25seSBiZSBwcm92aWRlZCB3aXRoIGZyYWdtZW50IHByb3BzXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZnJhZ21lbnRcbiAqL1xuXG5cbmZ1bmN0aW9uIHZhbGlkYXRlRnJhZ21lbnRQcm9wcyhmcmFnbWVudCkge1xuICAvLyBUT0RPOiBNb3ZlIHRoaXMgdG8gcmVuZGVyIHBoYXNlIGluc3RlYWQgb2YgYXQgZWxlbWVudCBjcmVhdGlvbi5cbiAge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJhZ21lbnQucHJvcHMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcblxuICAgICAgaWYgKGtleSAhPT0gJ2NoaWxkcmVuJyAmJiBrZXkgIT09ICdrZXknKSB7XG4gICAgICAgIHNldEN1cnJlbnRseVZhbGlkYXRpbmdFbGVtZW50KGZyYWdtZW50KTtcblxuICAgICAgICBlcnJvcignSW52YWxpZCBwcm9wIGAlc2Agc3VwcGxpZWQgdG8gYFJlYWN0LkZyYWdtZW50YC4gJyArICdSZWFjdC5GcmFnbWVudCBjYW4gb25seSBoYXZlIGBrZXlgIGFuZCBgY2hpbGRyZW5gIHByb3BzLicsIGtleSk7XG5cbiAgICAgICAgc2V0Q3VycmVudGx5VmFsaWRhdGluZ0VsZW1lbnQobnVsbCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmcmFnbWVudC5yZWYgIT09IG51bGwpIHtcbiAgICAgIHNldEN1cnJlbnRseVZhbGlkYXRpbmdFbGVtZW50KGZyYWdtZW50KTtcblxuICAgICAgZXJyb3IoJ0ludmFsaWQgYXR0cmlidXRlIGByZWZgIHN1cHBsaWVkIHRvIGBSZWFjdC5GcmFnbWVudGAuJyk7XG5cbiAgICAgIHNldEN1cnJlbnRseVZhbGlkYXRpbmdFbGVtZW50KG51bGwpO1xuICAgIH1cbiAgfVxufVxuXG52YXIganN4REVWID0ganN4REVWJDEgO1xuXG5leHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTtcbmV4cG9ydHMuanN4REVWID0ganN4REVWO1xuICB9KSgpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js":
/*!******************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/jsx-dev-runtime.js ***!
  \******************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./cjs/react-jsx-dev-runtime.development.js */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvanN4LWRldi1ydW50aW1lLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksS0FBcUMsRUFBRSxFQUUxQyxDQUFDO0FBQ0YsRUFBRSw4TEFBc0U7QUFDeEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jb21waWxlZC9yZWFjdC9qc3gtZGV2LXJ1bnRpbWUuanM/MTNhZiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LWRldi1ydW50aW1lLnByb2R1Y3Rpb24ubWluLmpzJyk7XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcycpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/immer/dist/immer.esm.mjs":
/*!***********************************************!*\
  !*** ./node_modules/immer/dist/immer.esm.mjs ***!
  \***********************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Immer: function() { return /* binding */ un; },\n/* harmony export */   applyPatches: function() { return /* binding */ pn; },\n/* harmony export */   castDraft: function() { return /* binding */ K; },\n/* harmony export */   castImmutable: function() { return /* binding */ $; },\n/* harmony export */   createDraft: function() { return /* binding */ ln; },\n/* harmony export */   current: function() { return /* binding */ R; },\n/* harmony export */   enableAllPlugins: function() { return /* binding */ J; },\n/* harmony export */   enableES5: function() { return /* binding */ F; },\n/* harmony export */   enableMapSet: function() { return /* binding */ C; },\n/* harmony export */   enablePatches: function() { return /* binding */ T; },\n/* harmony export */   finishDraft: function() { return /* binding */ dn; },\n/* harmony export */   freeze: function() { return /* binding */ d; },\n/* harmony export */   immerable: function() { return /* binding */ L; },\n/* harmony export */   isDraft: function() { return /* binding */ r; },\n/* harmony export */   isDraftable: function() { return /* binding */ t; },\n/* harmony export */   nothing: function() { return /* binding */ H; },\n/* harmony export */   original: function() { return /* binding */ e; },\n/* harmony export */   produce: function() { return /* binding */ fn; },\n/* harmony export */   produceWithPatches: function() { return /* binding */ cn; },\n/* harmony export */   setAutoFreeze: function() { return /* binding */ sn; },\n/* harmony export */   setUseProxies: function() { return /* binding */ vn; }\n/* harmony export */ });\nfunction n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(true){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){var r;return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!(null===(r=n.constructor)||void 0===r?void 0:r[L])||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?n.add(t):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)||(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0)),n}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return false||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function g(n){O(n),n.p.forEach(S),n.p=null}function O(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.g=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.O||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(g(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),g(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o,u=o,a=!1;3===e.i&&(u=new Set(o),o.clear(),a=!0),i(u,(function(r,i){return A(n,e,o,r,i,t,a)})),x(n,o,!1),t&&n.u&&b(\"Patches\").N(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s,v){if( true&&c===o&&n(5),r(c)){var p=M(e,c,s&&i&&3!==i.i&&!u(i.R,a)?s.concat(a):void 0);if(f(o,a,p),!r(p))return;e.m=!1}else v&&o.add(c);if(t(c)&&!y(c)){if(!e.h.D&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),!n.l&&n.h.D&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function N(n,r,t){var e=s(r)?b(\"MapSet\").F(r,t):v(r)?b(\"MapSet\").T(r,t):n.O?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,R:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function R(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=D(r,c),u.I=!1}else e=D(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function D(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function F(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return true&&f(r),en.get(r,n)},set:function(r){var t=this[Q]; true&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.g&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,R:{},l:r,t:n,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.R,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=i[s];\"string\"!=typeof p&&\"number\"!=typeof p&&(p=\"\"+p),0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},N:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.R,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.R,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.R=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=N(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.g&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,R:void 0,t:n,k:this,C:!1,g:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.R.set(n,!0),t.o.set(n,r),t.R.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.R.set(n,!1):r.R.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.R=new Map,i(n.t,(function(r){n.R.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=N(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,g:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{F:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){F(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=N(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.R[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&(void 0!==t||r in n.o)||Number.isNaN(t)&&Number.isNaN(n.o[r])||(n.o[r]=t,n.R[r]=!0),!0},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.R[r]=!1,E(n),k(n)):delete n.R[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return true&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return true&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.O=B,this.D=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=N(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?g(c):O(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw g(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.D&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=R(e));var i=w(this),o=N(this,e,void 0);return o[Q].C=!0,O(i),o},i.finishDraft=function(r,t){var e=r&&r[Q]; true&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.D=n},i.setUseProxies=function(r){r&&!B&&n(20),this.O=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);/* harmony default export */ __webpack_exports__[\"default\"] = (fn);\n//# sourceMappingURL=immer.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9pbW1lci9kaXN0L2ltbWVyLmVzbS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsY0FBYyxrREFBa0QsSUFBSSx3QkFBd0IsR0FBRyxJQUFtQyxFQUFFLDZFQUE2RSwwQkFBMEIsNkVBQTZFLGdCQUFnQixxRUFBcUUsY0FBYyxrQkFBa0IsY0FBYyxNQUFNLHdCQUF3QixtQ0FBbUMsK0JBQStCLHFCQUFxQixpRUFBaUUsdUVBQXVFLGlHQUFpRyxjQUFjLDRCQUE0QixrQkFBa0IsdUVBQXVFLG1DQUFtQyw0QkFBNEIsZ0JBQWdCLEdBQUcsY0FBYyxXQUFXLDREQUE0RCxnQkFBZ0IsbUVBQW1FLGdCQUFnQiw4QkFBOEIsa0JBQWtCLFdBQVcsdUNBQXVDLGdCQUFnQix3Q0FBd0MsY0FBYywyQkFBMkIsY0FBYywyQkFBMkIsY0FBYyxnQkFBZ0IsY0FBYyx5REFBeUQsWUFBWSxZQUFZLG9CQUFvQixXQUFXLEtBQUssa0JBQWtCLDBFQUEwRSwrREFBK0QsRUFBRSxpREFBaUQsZ0JBQWdCLDhIQUE4SCxlQUFlLFNBQVMsYUFBYSxLQUFLLGNBQWMsdURBQXVELGNBQWMsWUFBWSxvQkFBb0IsZ0JBQWdCLGlCQUFpQixhQUFhLE1BQU0sTUFBbUMsWUFBWSxnQkFBZ0Isc0NBQXNDLGNBQWMsNkJBQTZCLGNBQWMsZUFBZSxjQUFjLFVBQVUsdUJBQXVCLGNBQWMsV0FBVyw4QkFBOEIsZ0JBQWdCLGVBQWUsaUNBQWlDLDZLQUE2SyxrQkFBa0IsaUJBQWlCLFdBQVcsZ0NBQWdDLHNCQUFzQixRQUFRLG9CQUFvQiwrQkFBK0IsU0FBUyxlQUFlLCtDQUErQywwREFBMEQsd0JBQXdCLGlEQUFpRCxXQUFXLDBCQUEwQixHQUFHLEtBQW1DLG9CQUFvQix5REFBeUQseUJBQXlCLE9BQU8saUJBQWlCLGdCQUFnQix3QkFBd0IseUJBQXlCLGtCQUFrQiw0Q0FBNEMsZ0JBQWdCLFdBQVcsb0JBQW9C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MkMsMkNBQTJDLFVBQVUsMEdBQTBHLDhCQUE4Qiw2RkFBNkYsd0NBQXdDLG1EQUFtRCxVQUFVLGtGQUFrRixHQUFHLDJCQUEyQixNQUFNLDRCQUE0QixrQ0FBa0MsMkJBQTJCLE9BQU8sT0FBTyxvQkFBb0IsaUJBQWlCLDZEQUE2RCxtQ0FBbUMsTUFBTSxLQUFtQyx5REFBeUQsd0JBQXdCLE1BQU0sS0FBbUMsMkVBQTJFLGtCQUFrQixjQUFjLFdBQVcsZ0RBQWdELCtDQUErQyxRQUFRLElBQUksUUFBUSxtQkFBbUIsV0FBVyxrQkFBa0Isa0RBQWtELElBQUksd0JBQXdCLGdDQUFnQyxNQUFNLDBDQUEwQyxJQUFJLE1BQU0sMkVBQTJFLGdDQUFnQyxJQUFJLFlBQVksUUFBUSxZQUFZLDRFQUE0RSxxQkFBcUIsZUFBZSxhQUFhLG1CQUFtQiwyQkFBMkIsOERBQThELGNBQWMsK0JBQStCLFNBQVMsUUFBUSx1Q0FBdUMsMkNBQTJDLGtEQUFrRCxJQUFJLHdCQUF3QiwyQ0FBMkMscUNBQXFDLElBQUksdUNBQXVDLFFBQVEsR0FBRyw0RUFBNEUsY0FBYyxXQUFXLG1LQUFtSyxrQkFBa0IsaUNBQWlDLDBCQUEwQixpQ0FBaUMsd0JBQXdCLDZCQUE2QixjQUFjLEtBQW1DLDRCQUE0QixVQUFVLDBCQUEwQiw2QkFBNkIsU0FBUyw2QkFBNkIsc0JBQXNCLDhCQUE4QixNQUFNLGlCQUFpQixLQUFLLEtBQUssV0FBVyx3Q0FBd0MsVUFBVSxPQUFPLHVCQUF1QixxQkFBcUIsK0NBQStDLGNBQWMsR0FBRyxHQUFHLHlNQUF5TSwrREFBZSxFQUFFLEVBQXdXO0FBQ2o5akIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2ltbWVyL2Rpc3QvaW1tZXIuZXNtLm1qcz83MmM1Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIG4obil7Zm9yKHZhciByPWFyZ3VtZW50cy5sZW5ndGgsdD1BcnJheShyPjE/ci0xOjApLGU9MTtlPHI7ZSsrKXRbZS0xXT1hcmd1bWVudHNbZV07aWYoXCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOVil7dmFyIGk9WVtuXSxvPWk/XCJmdW5jdGlvblwiPT10eXBlb2YgaT9pLmFwcGx5KG51bGwsdCk6aTpcInVua25vd24gZXJyb3IgbnI6IFwiK247dGhyb3cgRXJyb3IoXCJbSW1tZXJdIFwiK28pfXRocm93IEVycm9yKFwiW0ltbWVyXSBtaW5pZmllZCBlcnJvciBucjogXCIrbisodC5sZW5ndGg/XCIgXCIrdC5tYXAoKGZ1bmN0aW9uKG4pe3JldHVyblwiJ1wiK24rXCInXCJ9KSkuam9pbihcIixcIik6XCJcIikrXCIuIEZpbmQgdGhlIGZ1bGwgZXJyb3IgYXQ6IGh0dHBzOi8vYml0Lmx5LzNjWEVLV2ZcIil9ZnVuY3Rpb24gcihuKXtyZXR1cm4hIW4mJiEhbltRXX1mdW5jdGlvbiB0KG4pe3ZhciByO3JldHVybiEhbiYmKGZ1bmN0aW9uKG4pe2lmKCFufHxcIm9iamVjdFwiIT10eXBlb2YgbilyZXR1cm4hMTt2YXIgcj1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobik7aWYobnVsbD09PXIpcmV0dXJuITA7dmFyIHQ9T2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwocixcImNvbnN0cnVjdG9yXCIpJiZyLmNvbnN0cnVjdG9yO3JldHVybiB0PT09T2JqZWN0fHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZGdW5jdGlvbi50b1N0cmluZy5jYWxsKHQpPT09Wn0obil8fEFycmF5LmlzQXJyYXkobil8fCEhbltMXXx8ISEobnVsbD09PShyPW4uY29uc3RydWN0b3IpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyW0xdKXx8cyhuKXx8dihuKSl9ZnVuY3Rpb24gZSh0KXtyZXR1cm4gcih0KXx8bigyMyx0KSx0W1FdLnR9ZnVuY3Rpb24gaShuLHIsdCl7dm9pZCAwPT09dCYmKHQ9ITEpLDA9PT1vKG4pPyh0P09iamVjdC5rZXlzOm5uKShuKS5mb3JFYWNoKChmdW5jdGlvbihlKXt0JiZcInN5bWJvbFwiPT10eXBlb2YgZXx8cihlLG5bZV0sbil9KSk6bi5mb3JFYWNoKChmdW5jdGlvbih0LGUpe3JldHVybiByKGUsdCxuKX0pKX1mdW5jdGlvbiBvKG4pe3ZhciByPW5bUV07cmV0dXJuIHI/ci5pPjM/ci5pLTQ6ci5pOkFycmF5LmlzQXJyYXkobik/MTpzKG4pPzI6dihuKT8zOjB9ZnVuY3Rpb24gdShuLHIpe3JldHVybiAyPT09byhuKT9uLmhhcyhyKTpPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobixyKX1mdW5jdGlvbiBhKG4scil7cmV0dXJuIDI9PT1vKG4pP24uZ2V0KHIpOm5bcl19ZnVuY3Rpb24gZihuLHIsdCl7dmFyIGU9byhuKTsyPT09ZT9uLnNldChyLHQpOjM9PT1lP24uYWRkKHQpOm5bcl09dH1mdW5jdGlvbiBjKG4scil7cmV0dXJuIG49PT1yPzAhPT1ufHwxL249PTEvcjpuIT1uJiZyIT1yfWZ1bmN0aW9uIHMobil7cmV0dXJuIFgmJm4gaW5zdGFuY2VvZiBNYXB9ZnVuY3Rpb24gdihuKXtyZXR1cm4gcSYmbiBpbnN0YW5jZW9mIFNldH1mdW5jdGlvbiBwKG4pe3JldHVybiBuLm98fG4udH1mdW5jdGlvbiBsKG4pe2lmKEFycmF5LmlzQXJyYXkobikpcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG4pO3ZhciByPXJuKG4pO2RlbGV0ZSByW1FdO2Zvcih2YXIgdD1ubihyKSxlPTA7ZTx0Lmxlbmd0aDtlKyspe3ZhciBpPXRbZV0sbz1yW2ldOyExPT09by53cml0YWJsZSYmKG8ud3JpdGFibGU9ITAsby5jb25maWd1cmFibGU9ITApLChvLmdldHx8by5zZXQpJiYocltpXT17Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLGVudW1lcmFibGU6by5lbnVtZXJhYmxlLHZhbHVlOm5baV19KX1yZXR1cm4gT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2Yobikscil9ZnVuY3Rpb24gZChuLGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0hMSkseShuKXx8cihuKXx8IXQobil8fChvKG4pPjEmJihuLnNldD1uLmFkZD1uLmNsZWFyPW4uZGVsZXRlPWgpLE9iamVjdC5mcmVlemUobiksZSYmaShuLChmdW5jdGlvbihuLHIpe3JldHVybiBkKHIsITApfSksITApKSxufWZ1bmN0aW9uIGgoKXtuKDIpfWZ1bmN0aW9uIHkobil7cmV0dXJuIG51bGw9PW58fFwib2JqZWN0XCIhPXR5cGVvZiBufHxPYmplY3QuaXNGcm96ZW4obil9ZnVuY3Rpb24gYihyKXt2YXIgdD10bltyXTtyZXR1cm4gdHx8bigxOCxyKSx0fWZ1bmN0aW9uIG0obixyKXt0bltuXXx8KHRuW25dPXIpfWZ1bmN0aW9uIF8oKXtyZXR1cm5cInByb2R1Y3Rpb25cIj09PXByb2Nlc3MuZW52Lk5PREVfRU5WfHxVfHxuKDApLFV9ZnVuY3Rpb24gaihuLHIpe3ImJihiKFwiUGF0Y2hlc1wiKSxuLnU9W10sbi5zPVtdLG4udj1yKX1mdW5jdGlvbiBnKG4pe08obiksbi5wLmZvckVhY2goUyksbi5wPW51bGx9ZnVuY3Rpb24gTyhuKXtuPT09VSYmKFU9bi5sKX1mdW5jdGlvbiB3KG4pe3JldHVybiBVPXtwOltdLGw6VSxoOm4sbTohMCxfOjB9fWZ1bmN0aW9uIFMobil7dmFyIHI9bltRXTswPT09ci5pfHwxPT09ci5pP3IuaigpOnIuZz0hMH1mdW5jdGlvbiBQKHIsZSl7ZS5fPWUucC5sZW5ndGg7dmFyIGk9ZS5wWzBdLG89dm9pZCAwIT09ciYmciE9PWk7cmV0dXJuIGUuaC5PfHxiKFwiRVM1XCIpLlMoZSxyLG8pLG8/KGlbUV0uUCYmKGcoZSksbig0KSksdChyKSYmKHI9TShlLHIpLGUubHx8eChlLHIpKSxlLnUmJmIoXCJQYXRjaGVzXCIpLk0oaVtRXS50LHIsZS51LGUucykpOnI9TShlLGksW10pLGcoZSksZS51JiZlLnYoZS51LGUucyksciE9PUg/cjp2b2lkIDB9ZnVuY3Rpb24gTShuLHIsdCl7aWYoeShyKSlyZXR1cm4gcjt2YXIgZT1yW1FdO2lmKCFlKXJldHVybiBpKHIsKGZ1bmN0aW9uKGksbyl7cmV0dXJuIEEobixlLHIsaSxvLHQpfSksITApLHI7aWYoZS5BIT09bilyZXR1cm4gcjtpZighZS5QKXJldHVybiB4KG4sZS50LCEwKSxlLnQ7aWYoIWUuSSl7ZS5JPSEwLGUuQS5fLS07dmFyIG89ND09PWUuaXx8NT09PWUuaT9lLm89bChlLmspOmUubyx1PW8sYT0hMTszPT09ZS5pJiYodT1uZXcgU2V0KG8pLG8uY2xlYXIoKSxhPSEwKSxpKHUsKGZ1bmN0aW9uKHIsaSl7cmV0dXJuIEEobixlLG8scixpLHQsYSl9KSkseChuLG8sITEpLHQmJm4udSYmYihcIlBhdGNoZXNcIikuTihlLHQsbi51LG4ucyl9cmV0dXJuIGUub31mdW5jdGlvbiBBKGUsaSxvLGEsYyxzLHYpe2lmKFwicHJvZHVjdGlvblwiIT09cHJvY2Vzcy5lbnYuTk9ERV9FTlYmJmM9PT1vJiZuKDUpLHIoYykpe3ZhciBwPU0oZSxjLHMmJmkmJjMhPT1pLmkmJiF1KGkuUixhKT9zLmNvbmNhdChhKTp2b2lkIDApO2lmKGYobyxhLHApLCFyKHApKXJldHVybjtlLm09ITF9ZWxzZSB2JiZvLmFkZChjKTtpZih0KGMpJiYheShjKSl7aWYoIWUuaC5EJiZlLl88MSlyZXR1cm47TShlLGMpLGkmJmkuQS5sfHx4KGUsYyl9fWZ1bmN0aW9uIHgobixyLHQpe3ZvaWQgMD09PXQmJih0PSExKSwhbi5sJiZuLmguRCYmbi5tJiZkKHIsdCl9ZnVuY3Rpb24geihuLHIpe3ZhciB0PW5bUV07cmV0dXJuKHQ/cCh0KTpuKVtyXX1mdW5jdGlvbiBJKG4scil7aWYociBpbiBuKWZvcih2YXIgdD1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobik7dDspe3ZhciBlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTtpZihlKXJldHVybiBlO3Q9T2JqZWN0LmdldFByb3RvdHlwZU9mKHQpfX1mdW5jdGlvbiBrKG4pe24uUHx8KG4uUD0hMCxuLmwmJmsobi5sKSl9ZnVuY3Rpb24gRShuKXtuLm98fChuLm89bChuLnQpKX1mdW5jdGlvbiBOKG4scix0KXt2YXIgZT1zKHIpP2IoXCJNYXBTZXRcIikuRihyLHQpOnYocik/YihcIk1hcFNldFwiKS5UKHIsdCk6bi5PP2Z1bmN0aW9uKG4scil7dmFyIHQ9QXJyYXkuaXNBcnJheShuKSxlPXtpOnQ/MTowLEE6cj9yLkE6XygpLFA6ITEsSTohMSxSOnt9LGw6cix0Om4sazpudWxsLG86bnVsbCxqOm51bGwsQzohMX0saT1lLG89ZW47dCYmKGk9W2VdLG89b24pO3ZhciB1PVByb3h5LnJldm9jYWJsZShpLG8pLGE9dS5yZXZva2UsZj11LnByb3h5O3JldHVybiBlLms9ZixlLmo9YSxmfShyLHQpOmIoXCJFUzVcIikuSihyLHQpO3JldHVybih0P3QuQTpfKCkpLnAucHVzaChlKSxlfWZ1bmN0aW9uIFIoZSl7cmV0dXJuIHIoZSl8fG4oMjIsZSksZnVuY3Rpb24gbihyKXtpZighdChyKSlyZXR1cm4gcjt2YXIgZSx1PXJbUV0sYz1vKHIpO2lmKHUpe2lmKCF1LlAmJih1Lmk8NHx8IWIoXCJFUzVcIikuSyh1KSkpcmV0dXJuIHUudDt1Lkk9ITAsZT1EKHIsYyksdS5JPSExfWVsc2UgZT1EKHIsYyk7cmV0dXJuIGkoZSwoZnVuY3Rpb24ocix0KXt1JiZhKHUudCxyKT09PXR8fGYoZSxyLG4odCkpfSkpLDM9PT1jP25ldyBTZXQoZSk6ZX0oZSl9ZnVuY3Rpb24gRChuLHIpe3N3aXRjaChyKXtjYXNlIDI6cmV0dXJuIG5ldyBNYXAobik7Y2FzZSAzOnJldHVybiBBcnJheS5mcm9tKG4pfXJldHVybiBsKG4pfWZ1bmN0aW9uIEYoKXtmdW5jdGlvbiB0KG4scil7dmFyIHQ9c1tuXTtyZXR1cm4gdD90LmVudW1lcmFibGU9cjpzW25dPXQ9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOnIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHI9dGhpc1tRXTtyZXR1cm5cInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WJiZmKHIpLGVuLmdldChyLG4pfSxzZXQ6ZnVuY3Rpb24ocil7dmFyIHQ9dGhpc1tRXTtcInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WJiZmKHQpLGVuLnNldCh0LG4scil9fSx0fWZ1bmN0aW9uIGUobil7Zm9yKHZhciByPW4ubGVuZ3RoLTE7cj49MDtyLS0pe3ZhciB0PW5bcl1bUV07aWYoIXQuUClzd2l0Y2godC5pKXtjYXNlIDU6YSh0KSYmayh0KTticmVhaztjYXNlIDQ6byh0KSYmayh0KX19fWZ1bmN0aW9uIG8obil7Zm9yKHZhciByPW4udCx0PW4uayxlPW5uKHQpLGk9ZS5sZW5ndGgtMTtpPj0wO2ktLSl7dmFyIG89ZVtpXTtpZihvIT09USl7dmFyIGE9cltvXTtpZih2b2lkIDA9PT1hJiYhdShyLG8pKXJldHVybiEwO3ZhciBmPXRbb10scz1mJiZmW1FdO2lmKHM/cy50IT09YTohYyhmLGEpKXJldHVybiEwfX12YXIgdj0hIXJbUV07cmV0dXJuIGUubGVuZ3RoIT09bm4ocikubGVuZ3RoKyh2PzA6MSl9ZnVuY3Rpb24gYShuKXt2YXIgcj1uLms7aWYoci5sZW5ndGghPT1uLnQubGVuZ3RoKXJldHVybiEwO3ZhciB0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocixyLmxlbmd0aC0xKTtpZih0JiYhdC5nZXQpcmV0dXJuITA7Zm9yKHZhciBlPTA7ZTxyLmxlbmd0aDtlKyspaWYoIXIuaGFzT3duUHJvcGVydHkoZSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gZihyKXtyLmcmJm4oMyxKU09OLnN0cmluZ2lmeShwKHIpKSl9dmFyIHM9e307bShcIkVTNVwiLHtKOmZ1bmN0aW9uKG4scil7dmFyIGU9QXJyYXkuaXNBcnJheShuKSxpPWZ1bmN0aW9uKG4scil7aWYobil7Zm9yKHZhciBlPUFycmF5KHIubGVuZ3RoKSxpPTA7aTxyLmxlbmd0aDtpKyspT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJcIitpLHQoaSwhMCkpO3JldHVybiBlfXZhciBvPXJuKHIpO2RlbGV0ZSBvW1FdO2Zvcih2YXIgdT1ubihvKSxhPTA7YTx1Lmxlbmd0aDthKyspe3ZhciBmPXVbYV07b1tmXT10KGYsbnx8ISFvW2ZdLmVudW1lcmFibGUpfXJldHVybiBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihyKSxvKX0oZSxuKSxvPXtpOmU/NTo0LEE6cj9yLkE6XygpLFA6ITEsSTohMSxSOnt9LGw6cix0Om4sazppLG86bnVsbCxnOiExLEM6ITF9O3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxRLHt2YWx1ZTpvLHdyaXRhYmxlOiEwfSksaX0sUzpmdW5jdGlvbihuLHQsbyl7bz9yKHQpJiZ0W1FdLkE9PT1uJiZlKG4ucCk6KG4udSYmZnVuY3Rpb24gbihyKXtpZihyJiZcIm9iamVjdFwiPT10eXBlb2Ygcil7dmFyIHQ9cltRXTtpZih0KXt2YXIgZT10LnQsbz10LmssZj10LlIsYz10Lmk7aWYoND09PWMpaShvLChmdW5jdGlvbihyKXtyIT09USYmKHZvaWQgMCE9PWVbcl18fHUoZSxyKT9mW3JdfHxuKG9bcl0pOihmW3JdPSEwLGsodCkpKX0pKSxpKGUsKGZ1bmN0aW9uKG4pe3ZvaWQgMCE9PW9bbl18fHUobyxuKXx8KGZbbl09ITEsayh0KSl9KSk7ZWxzZSBpZig1PT09Yyl7aWYoYSh0KSYmKGsodCksZi5sZW5ndGg9ITApLG8ubGVuZ3RoPGUubGVuZ3RoKWZvcih2YXIgcz1vLmxlbmd0aDtzPGUubGVuZ3RoO3MrKylmW3NdPSExO2Vsc2UgZm9yKHZhciB2PWUubGVuZ3RoO3Y8by5sZW5ndGg7disrKWZbdl09ITA7Zm9yKHZhciBwPU1hdGgubWluKG8ubGVuZ3RoLGUubGVuZ3RoKSxsPTA7bDxwO2wrKylvLmhhc093blByb3BlcnR5KGwpfHwoZltsXT0hMCksdm9pZCAwPT09ZltsXSYmbihvW2xdKX19fX0obi5wWzBdKSxlKG4ucCkpfSxLOmZ1bmN0aW9uKG4pe3JldHVybiA0PT09bi5pP28obik6YShuKX19KX1mdW5jdGlvbiBUKCl7ZnVuY3Rpb24gZShuKXtpZighdChuKSlyZXR1cm4gbjtpZihBcnJheS5pc0FycmF5KG4pKXJldHVybiBuLm1hcChlKTtpZihzKG4pKXJldHVybiBuZXcgTWFwKEFycmF5LmZyb20obi5lbnRyaWVzKCkpLm1hcCgoZnVuY3Rpb24obil7cmV0dXJuW25bMF0sZShuWzFdKV19KSkpO2lmKHYobikpcmV0dXJuIG5ldyBTZXQoQXJyYXkuZnJvbShuKS5tYXAoZSkpO3ZhciByPU9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKG4pKTtmb3IodmFyIGkgaW4gbilyW2ldPWUobltpXSk7cmV0dXJuIHUobixMKSYmKHJbTF09bltMXSkscn1mdW5jdGlvbiBmKG4pe3JldHVybiByKG4pP2Uobik6bn12YXIgYz1cImFkZFwiO20oXCJQYXRjaGVzXCIseyQ6ZnVuY3Rpb24ocix0KXtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXtmb3IodmFyIGk9dC5wYXRoLHU9dC5vcCxmPXIscz0wO3M8aS5sZW5ndGgtMTtzKyspe3ZhciB2PW8oZikscD1pW3NdO1wic3RyaW5nXCIhPXR5cGVvZiBwJiZcIm51bWJlclwiIT10eXBlb2YgcCYmKHA9XCJcIitwKSwwIT09diYmMSE9PXZ8fFwiX19wcm90b19fXCIhPT1wJiZcImNvbnN0cnVjdG9yXCIhPT1wfHxuKDI0KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBmJiZcInByb3RvdHlwZVwiPT09cCYmbigyNCksXCJvYmplY3RcIiE9dHlwZW9mKGY9YShmLHApKSYmbigxNSxpLmpvaW4oXCIvXCIpKX12YXIgbD1vKGYpLGQ9ZSh0LnZhbHVlKSxoPWlbaS5sZW5ndGgtMV07c3dpdGNoKHUpe2Nhc2VcInJlcGxhY2VcIjpzd2l0Y2gobCl7Y2FzZSAyOnJldHVybiBmLnNldChoLGQpO2Nhc2UgMzpuKDE2KTtkZWZhdWx0OnJldHVybiBmW2hdPWR9Y2FzZSBjOnN3aXRjaChsKXtjYXNlIDE6cmV0dXJuXCItXCI9PT1oP2YucHVzaChkKTpmLnNwbGljZShoLDAsZCk7Y2FzZSAyOnJldHVybiBmLnNldChoLGQpO2Nhc2UgMzpyZXR1cm4gZi5hZGQoZCk7ZGVmYXVsdDpyZXR1cm4gZltoXT1kfWNhc2VcInJlbW92ZVwiOnN3aXRjaChsKXtjYXNlIDE6cmV0dXJuIGYuc3BsaWNlKGgsMSk7Y2FzZSAyOnJldHVybiBmLmRlbGV0ZShoKTtjYXNlIDM6cmV0dXJuIGYuZGVsZXRlKHQudmFsdWUpO2RlZmF1bHQ6cmV0dXJuIGRlbGV0ZSBmW2hdfWRlZmF1bHQ6bigxNyx1KX19KSkscn0sTjpmdW5jdGlvbihuLHIsdCxlKXtzd2l0Y2gobi5pKXtjYXNlIDA6Y2FzZSA0OmNhc2UgMjpyZXR1cm4gZnVuY3Rpb24obixyLHQsZSl7dmFyIG89bi50LHM9bi5vO2kobi5SLChmdW5jdGlvbihuLGkpe3ZhciB2PWEobyxuKSxwPWEocyxuKSxsPWk/dShvLG4pP1wicmVwbGFjZVwiOmM6XCJyZW1vdmVcIjtpZih2IT09cHx8XCJyZXBsYWNlXCIhPT1sKXt2YXIgZD1yLmNvbmNhdChuKTt0LnB1c2goXCJyZW1vdmVcIj09PWw/e29wOmwscGF0aDpkfTp7b3A6bCxwYXRoOmQsdmFsdWU6cH0pLGUucHVzaChsPT09Yz97b3A6XCJyZW1vdmVcIixwYXRoOmR9OlwicmVtb3ZlXCI9PT1sP3tvcDpjLHBhdGg6ZCx2YWx1ZTpmKHYpfTp7b3A6XCJyZXBsYWNlXCIscGF0aDpkLHZhbHVlOmYodil9KX19KSl9KG4scix0LGUpO2Nhc2UgNTpjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4scix0LGUpe3ZhciBpPW4udCxvPW4uUix1PW4ubztpZih1Lmxlbmd0aDxpLmxlbmd0aCl7dmFyIGE9W3UsaV07aT1hWzBdLHU9YVsxXTt2YXIgcz1bZSx0XTt0PXNbMF0sZT1zWzFdfWZvcih2YXIgdj0wO3Y8aS5sZW5ndGg7disrKWlmKG9bdl0mJnVbdl0hPT1pW3ZdKXt2YXIgcD1yLmNvbmNhdChbdl0pO3QucHVzaCh7b3A6XCJyZXBsYWNlXCIscGF0aDpwLHZhbHVlOmYodVt2XSl9KSxlLnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6cCx2YWx1ZTpmKGlbdl0pfSl9Zm9yKHZhciBsPWkubGVuZ3RoO2w8dS5sZW5ndGg7bCsrKXt2YXIgZD1yLmNvbmNhdChbbF0pO3QucHVzaCh7b3A6YyxwYXRoOmQsdmFsdWU6Zih1W2xdKX0pfWkubGVuZ3RoPHUubGVuZ3RoJiZlLnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6ci5jb25jYXQoW1wibGVuZ3RoXCJdKSx2YWx1ZTppLmxlbmd0aH0pfShuLHIsdCxlKTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4scix0LGUpe3ZhciBpPW4udCxvPW4ubyx1PTA7aS5mb3JFYWNoKChmdW5jdGlvbihuKXtpZighby5oYXMobikpe3ZhciBpPXIuY29uY2F0KFt1XSk7dC5wdXNoKHtvcDpcInJlbW92ZVwiLHBhdGg6aSx2YWx1ZTpufSksZS51bnNoaWZ0KHtvcDpjLHBhdGg6aSx2YWx1ZTpufSl9dSsrfSkpLHU9MCxvLmZvckVhY2goKGZ1bmN0aW9uKG4pe2lmKCFpLmhhcyhuKSl7dmFyIG89ci5jb25jYXQoW3VdKTt0LnB1c2goe29wOmMscGF0aDpvLHZhbHVlOm59KSxlLnVuc2hpZnQoe29wOlwicmVtb3ZlXCIscGF0aDpvLHZhbHVlOm59KX11Kyt9KSl9KG4scix0LGUpfX0sTTpmdW5jdGlvbihuLHIsdCxlKXt0LnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6W10sdmFsdWU6cj09PUg/dm9pZCAwOnJ9KSxlLnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6W10sdmFsdWU6bn0pfX0pfWZ1bmN0aW9uIEMoKXtmdW5jdGlvbiByKG4scil7ZnVuY3Rpb24gdCgpe3RoaXMuY29uc3RydWN0b3I9bn1hKG4sciksbi5wcm90b3R5cGU9KHQucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyB0KX1mdW5jdGlvbiBlKG4pe24ub3x8KG4uUj1uZXcgTWFwLG4ubz1uZXcgTWFwKG4udCkpfWZ1bmN0aW9uIG8obil7bi5vfHwobi5vPW5ldyBTZXQsbi50LmZvckVhY2goKGZ1bmN0aW9uKHIpe2lmKHQocikpe3ZhciBlPU4obi5BLmgscixuKTtuLnAuc2V0KHIsZSksbi5vLmFkZChlKX1lbHNlIG4uby5hZGQocil9KSkpfWZ1bmN0aW9uIHUocil7ci5nJiZuKDMsSlNPTi5zdHJpbmdpZnkocChyKSkpfXZhciBhPWZ1bmN0aW9uKG4scil7cmV0dXJuKGE9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKG4scil7bi5fX3Byb3RvX189cn18fGZ1bmN0aW9uKG4scil7Zm9yKHZhciB0IGluIHIpci5oYXNPd25Qcm9wZXJ0eSh0KSYmKG5bdF09clt0XSl9KShuLHIpfSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLHIpe3JldHVybiB0aGlzW1FdPXtpOjIsbDpyLEE6cj9yLkE6XygpLFA6ITEsSTohMSxvOnZvaWQgMCxSOnZvaWQgMCx0Om4sazp0aGlzLEM6ITEsZzohMX0sdGhpc31yKG4sTWFwKTt2YXIgbz1uLnByb3RvdHlwZTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBwKHRoaXNbUV0pLnNpemV9fSksby5oYXM9ZnVuY3Rpb24obil7cmV0dXJuIHAodGhpc1tRXSkuaGFzKG4pfSxvLnNldD1mdW5jdGlvbihuLHIpe3ZhciB0PXRoaXNbUV07cmV0dXJuIHUodCkscCh0KS5oYXMobikmJnAodCkuZ2V0KG4pPT09cnx8KGUodCksayh0KSx0LlIuc2V0KG4sITApLHQuby5zZXQobixyKSx0LlIuc2V0KG4sITApKSx0aGlzfSxvLmRlbGV0ZT1mdW5jdGlvbihuKXtpZighdGhpcy5oYXMobikpcmV0dXJuITE7dmFyIHI9dGhpc1tRXTtyZXR1cm4gdShyKSxlKHIpLGsociksci50LmhhcyhuKT9yLlIuc2V0KG4sITEpOnIuUi5kZWxldGUobiksci5vLmRlbGV0ZShuKSwhMH0sby5jbGVhcj1mdW5jdGlvbigpe3ZhciBuPXRoaXNbUV07dShuKSxwKG4pLnNpemUmJihlKG4pLGsobiksbi5SPW5ldyBNYXAsaShuLnQsKGZ1bmN0aW9uKHIpe24uUi5zZXQociwhMSl9KSksbi5vLmNsZWFyKCkpfSxvLmZvckVhY2g9ZnVuY3Rpb24obixyKXt2YXIgdD10aGlzO3AodGhpc1tRXSkuZm9yRWFjaCgoZnVuY3Rpb24oZSxpKXtuLmNhbGwocix0LmdldChpKSxpLHQpfSkpfSxvLmdldD1mdW5jdGlvbihuKXt2YXIgcj10aGlzW1FdO3Uocik7dmFyIGk9cChyKS5nZXQobik7aWYoci5JfHwhdChpKSlyZXR1cm4gaTtpZihpIT09ci50LmdldChuKSlyZXR1cm4gaTt2YXIgbz1OKHIuQS5oLGkscik7cmV0dXJuIGUociksci5vLnNldChuLG8pLG99LG8ua2V5cz1mdW5jdGlvbigpe3JldHVybiBwKHRoaXNbUV0pLmtleXMoKX0sby52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgbixyPXRoaXMsdD10aGlzLmtleXMoKTtyZXR1cm4obj17fSlbVl09ZnVuY3Rpb24oKXtyZXR1cm4gci52YWx1ZXMoKX0sbi5uZXh0PWZ1bmN0aW9uKCl7dmFyIG49dC5uZXh0KCk7cmV0dXJuIG4uZG9uZT9uOntkb25lOiExLHZhbHVlOnIuZ2V0KG4udmFsdWUpfX0sbn0sby5lbnRyaWVzPWZ1bmN0aW9uKCl7dmFyIG4scj10aGlzLHQ9dGhpcy5rZXlzKCk7cmV0dXJuKG49e30pW1ZdPWZ1bmN0aW9uKCl7cmV0dXJuIHIuZW50cmllcygpfSxuLm5leHQ9ZnVuY3Rpb24oKXt2YXIgbj10Lm5leHQoKTtpZihuLmRvbmUpcmV0dXJuIG47dmFyIGU9ci5nZXQobi52YWx1ZSk7cmV0dXJue2RvbmU6ITEsdmFsdWU6W24udmFsdWUsZV19fSxufSxvW1ZdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfSxufSgpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4scil7cmV0dXJuIHRoaXNbUV09e2k6MyxsOnIsQTpyP3IuQTpfKCksUDohMSxJOiExLG86dm9pZCAwLHQ6bixrOnRoaXMscDpuZXcgTWFwLGc6ITEsQzohMX0sdGhpc31yKG4sU2V0KTt2YXIgdD1uLnByb3RvdHlwZTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBwKHRoaXNbUV0pLnNpemV9fSksdC5oYXM9ZnVuY3Rpb24obil7dmFyIHI9dGhpc1tRXTtyZXR1cm4gdShyKSxyLm8/ISFyLm8uaGFzKG4pfHwhKCFyLnAuaGFzKG4pfHwhci5vLmhhcyhyLnAuZ2V0KG4pKSk6ci50LmhhcyhuKX0sdC5hZGQ9ZnVuY3Rpb24obil7dmFyIHI9dGhpc1tRXTtyZXR1cm4gdShyKSx0aGlzLmhhcyhuKXx8KG8ociksayhyKSxyLm8uYWRkKG4pKSx0aGlzfSx0LmRlbGV0ZT1mdW5jdGlvbihuKXtpZighdGhpcy5oYXMobikpcmV0dXJuITE7dmFyIHI9dGhpc1tRXTtyZXR1cm4gdShyKSxvKHIpLGsociksci5vLmRlbGV0ZShuKXx8ISFyLnAuaGFzKG4pJiZyLm8uZGVsZXRlKHIucC5nZXQobikpfSx0LmNsZWFyPWZ1bmN0aW9uKCl7dmFyIG49dGhpc1tRXTt1KG4pLHAobikuc2l6ZSYmKG8obiksayhuKSxuLm8uY2xlYXIoKSl9LHQudmFsdWVzPWZ1bmN0aW9uKCl7dmFyIG49dGhpc1tRXTtyZXR1cm4gdShuKSxvKG4pLG4uby52YWx1ZXMoKX0sdC5lbnRyaWVzPWZ1bmN0aW9uKCl7dmFyIG49dGhpc1tRXTtyZXR1cm4gdShuKSxvKG4pLG4uby5lbnRyaWVzKCl9LHQua2V5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlcygpfSx0W1ZdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzKCl9LHQuZm9yRWFjaD1mdW5jdGlvbihuLHIpe2Zvcih2YXIgdD10aGlzLnZhbHVlcygpLGU9dC5uZXh0KCk7IWUuZG9uZTspbi5jYWxsKHIsZS52YWx1ZSxlLnZhbHVlLHRoaXMpLGU9dC5uZXh0KCl9LG59KCk7bShcIk1hcFNldFwiLHtGOmZ1bmN0aW9uKG4scil7cmV0dXJuIG5ldyBmKG4scil9LFQ6ZnVuY3Rpb24obixyKXtyZXR1cm4gbmV3IGMobixyKX19KX1mdW5jdGlvbiBKKCl7RigpLEMoKSxUKCl9ZnVuY3Rpb24gSyhuKXtyZXR1cm4gbn1mdW5jdGlvbiAkKG4pe3JldHVybiBufXZhciBHLFUsVz1cInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sKFwieFwiKSxYPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBNYXAscT1cInVuZGVmaW5lZFwiIT10eXBlb2YgU2V0LEI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFByb3h5JiZ2b2lkIDAhPT1Qcm94eS5yZXZvY2FibGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZWZsZWN0LEg9Vz9TeW1ib2wuZm9yKFwiaW1tZXItbm90aGluZ1wiKTooKEc9e30pW1wiaW1tZXItbm90aGluZ1wiXT0hMCxHKSxMPVc/U3ltYm9sLmZvcihcImltbWVyLWRyYWZ0YWJsZVwiKTpcIl9fJGltbWVyX2RyYWZ0YWJsZVwiLFE9Vz9TeW1ib2wuZm9yKFwiaW1tZXItc3RhdGVcIik6XCJfXyRpbW1lcl9zdGF0ZVwiLFY9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yfHxcIkBAaXRlcmF0b3JcIixZPXswOlwiSWxsZWdhbCBzdGF0ZVwiLDE6XCJJbW1lciBkcmFmdHMgY2Fubm90IGhhdmUgY29tcHV0ZWQgcHJvcGVydGllc1wiLDI6XCJUaGlzIG9iamVjdCBoYXMgYmVlbiBmcm96ZW4gYW5kIHNob3VsZCBub3QgYmUgbXV0YXRlZFwiLDM6ZnVuY3Rpb24obil7cmV0dXJuXCJDYW5ub3QgdXNlIGEgcHJveHkgdGhhdCBoYXMgYmVlbiByZXZva2VkLiBEaWQgeW91IHBhc3MgYW4gb2JqZWN0IGZyb20gaW5zaWRlIGFuIGltbWVyIGZ1bmN0aW9uIHRvIGFuIGFzeW5jIHByb2Nlc3M/IFwiK259LDQ6XCJBbiBpbW1lciBwcm9kdWNlciByZXR1cm5lZCBhIG5ldyB2YWx1ZSAqYW5kKiBtb2RpZmllZCBpdHMgZHJhZnQuIEVpdGhlciByZXR1cm4gYSBuZXcgdmFsdWUgKm9yKiBtb2RpZnkgdGhlIGRyYWZ0LlwiLDU6XCJJbW1lciBmb3JiaWRzIGNpcmN1bGFyIHJlZmVyZW5jZXNcIiw2OlwiVGhlIGZpcnN0IG9yIHNlY29uZCBhcmd1bWVudCB0byBgcHJvZHVjZWAgbXVzdCBiZSBhIGZ1bmN0aW9uXCIsNzpcIlRoZSB0aGlyZCBhcmd1bWVudCB0byBgcHJvZHVjZWAgbXVzdCBiZSBhIGZ1bmN0aW9uIG9yIHVuZGVmaW5lZFwiLDg6XCJGaXJzdCBhcmd1bWVudCB0byBgY3JlYXRlRHJhZnRgIG11c3QgYmUgYSBwbGFpbiBvYmplY3QsIGFuIGFycmF5LCBvciBhbiBpbW1lcmFibGUgb2JqZWN0XCIsOTpcIkZpcnN0IGFyZ3VtZW50IHRvIGBmaW5pc2hEcmFmdGAgbXVzdCBiZSBhIGRyYWZ0IHJldHVybmVkIGJ5IGBjcmVhdGVEcmFmdGBcIiwxMDpcIlRoZSBnaXZlbiBkcmFmdCBpcyBhbHJlYWR5IGZpbmFsaXplZFwiLDExOlwiT2JqZWN0LmRlZmluZVByb3BlcnR5KCkgY2Fubm90IGJlIHVzZWQgb24gYW4gSW1tZXIgZHJhZnRcIiwxMjpcIk9iamVjdC5zZXRQcm90b3R5cGVPZigpIGNhbm5vdCBiZSB1c2VkIG9uIGFuIEltbWVyIGRyYWZ0XCIsMTM6XCJJbW1lciBvbmx5IHN1cHBvcnRzIGRlbGV0aW5nIGFycmF5IGluZGljZXNcIiwxNDpcIkltbWVyIG9ubHkgc3VwcG9ydHMgc2V0dGluZyBhcnJheSBpbmRpY2VzIGFuZCB0aGUgJ2xlbmd0aCcgcHJvcGVydHlcIiwxNTpmdW5jdGlvbihuKXtyZXR1cm5cIkNhbm5vdCBhcHBseSBwYXRjaCwgcGF0aCBkb2Vzbid0IHJlc29sdmU6IFwiK259LDE2OidTZXRzIGNhbm5vdCBoYXZlIFwicmVwbGFjZVwiIHBhdGNoZXMuJywxNzpmdW5jdGlvbihuKXtyZXR1cm5cIlVuc3VwcG9ydGVkIHBhdGNoIG9wZXJhdGlvbjogXCIrbn0sMTg6ZnVuY3Rpb24obil7cmV0dXJuXCJUaGUgcGx1Z2luIGZvciAnXCIrbitcIicgaGFzIG5vdCBiZWVuIGxvYWRlZCBpbnRvIEltbWVyLiBUbyBlbmFibGUgdGhlIHBsdWdpbiwgaW1wb3J0IGFuZCBjYWxsIGBlbmFibGVcIituK1wiKClgIHdoZW4gaW5pdGlhbGl6aW5nIHlvdXIgYXBwbGljYXRpb24uXCJ9LDIwOlwiQ2Fubm90IHVzZSBwcm94aWVzIGlmIFByb3h5LCBQcm94eS5yZXZvY2FibGUgb3IgUmVmbGVjdCBhcmUgbm90IGF2YWlsYWJsZVwiLDIxOmZ1bmN0aW9uKG4pe3JldHVyblwicHJvZHVjZSBjYW4gb25seSBiZSBjYWxsZWQgb24gdGhpbmdzIHRoYXQgYXJlIGRyYWZ0YWJsZTogcGxhaW4gb2JqZWN0cywgYXJyYXlzLCBNYXAsIFNldCBvciBjbGFzc2VzIHRoYXQgYXJlIG1hcmtlZCB3aXRoICdbaW1tZXJhYmxlXTogdHJ1ZScuIEdvdCAnXCIrbitcIidcIn0sMjI6ZnVuY3Rpb24obil7cmV0dXJuXCInY3VycmVudCcgZXhwZWN0cyBhIGRyYWZ0LCBnb3Q6IFwiK259LDIzOmZ1bmN0aW9uKG4pe3JldHVyblwiJ29yaWdpbmFsJyBleHBlY3RzIGEgZHJhZnQsIGdvdDogXCIrbn0sMjQ6XCJQYXRjaGluZyByZXNlcnZlZCBhdHRyaWJ1dGVzIGxpa2UgX19wcm90b19fLCBwcm90b3R5cGUgYW5kIGNvbnN0cnVjdG9yIGlzIG5vdCBhbGxvd2VkXCJ9LFo9XCJcIitPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLG5uPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZWZsZWN0JiZSZWZsZWN0Lm93bktleXM/UmVmbGVjdC5vd25LZXlzOnZvaWQgMCE9PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/ZnVuY3Rpb24obil7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG4pLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG4pKX06T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMscm49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnN8fGZ1bmN0aW9uKG4pe3ZhciByPXt9O3JldHVybiBubihuKS5mb3JFYWNoKChmdW5jdGlvbih0KXtyW3RdPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobix0KX0pKSxyfSx0bj17fSxlbj17Z2V0OmZ1bmN0aW9uKG4scil7aWYocj09PVEpcmV0dXJuIG47dmFyIGU9cChuKTtpZighdShlLHIpKXJldHVybiBmdW5jdGlvbihuLHIsdCl7dmFyIGUsaT1JKHIsdCk7cmV0dXJuIGk/XCJ2YWx1ZVwiaW4gaT9pLnZhbHVlOm51bGw9PT0oZT1pLmdldCl8fHZvaWQgMD09PWU/dm9pZCAwOmUuY2FsbChuLmspOnZvaWQgMH0obixlLHIpO3ZhciBpPWVbcl07cmV0dXJuIG4uSXx8IXQoaSk/aTppPT09eihuLnQscik/KEUobiksbi5vW3JdPU4obi5BLmgsaSxuKSk6aX0saGFzOmZ1bmN0aW9uKG4scil7cmV0dXJuIHIgaW4gcChuKX0sb3duS2V5czpmdW5jdGlvbihuKXtyZXR1cm4gUmVmbGVjdC5vd25LZXlzKHAobikpfSxzZXQ6ZnVuY3Rpb24obixyLHQpe3ZhciBlPUkocChuKSxyKTtpZihudWxsPT1lP3ZvaWQgMDplLnNldClyZXR1cm4gZS5zZXQuY2FsbChuLmssdCksITA7aWYoIW4uUCl7dmFyIGk9eihwKG4pLHIpLG89bnVsbD09aT92b2lkIDA6aVtRXTtpZihvJiZvLnQ9PT10KXJldHVybiBuLm9bcl09dCxuLlJbcl09ITEsITA7aWYoYyh0LGkpJiYodm9pZCAwIT09dHx8dShuLnQscikpKXJldHVybiEwO0UobiksayhuKX1yZXR1cm4gbi5vW3JdPT09dCYmKHZvaWQgMCE9PXR8fHIgaW4gbi5vKXx8TnVtYmVyLmlzTmFOKHQpJiZOdW1iZXIuaXNOYU4obi5vW3JdKXx8KG4ub1tyXT10LG4uUltyXT0hMCksITB9LGRlbGV0ZVByb3BlcnR5OmZ1bmN0aW9uKG4scil7cmV0dXJuIHZvaWQgMCE9PXoobi50LHIpfHxyIGluIG4udD8obi5SW3JdPSExLEUobiksayhuKSk6ZGVsZXRlIG4uUltyXSxuLm8mJmRlbGV0ZSBuLm9bcl0sITB9LGdldE93blByb3BlcnR5RGVzY3JpcHRvcjpmdW5jdGlvbihuLHIpe3ZhciB0PXAobiksZT1SZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpO3JldHVybiBlP3t3cml0YWJsZTohMCxjb25maWd1cmFibGU6MSE9PW4uaXx8XCJsZW5ndGhcIiE9PXIsZW51bWVyYWJsZTplLmVudW1lcmFibGUsdmFsdWU6dFtyXX06ZX0sZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oKXtuKDExKX0sZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24obil7cmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihuLnQpfSxzZXRQcm90b3R5cGVPZjpmdW5jdGlvbigpe24oMTIpfX0sb249e307aShlbiwoZnVuY3Rpb24obixyKXtvbltuXT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09YXJndW1lbnRzWzBdWzBdLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pKSxvbi5kZWxldGVQcm9wZXJ0eT1mdW5jdGlvbihyLHQpe3JldHVyblwicHJvZHVjdGlvblwiIT09cHJvY2Vzcy5lbnYuTk9ERV9FTlYmJmlzTmFOKHBhcnNlSW50KHQpKSYmbigxMyksb24uc2V0LmNhbGwodGhpcyxyLHQsdm9pZCAwKX0sb24uc2V0PWZ1bmN0aW9uKHIsdCxlKXtyZXR1cm5cInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WJiZcImxlbmd0aFwiIT09dCYmaXNOYU4ocGFyc2VJbnQodCkpJiZuKDE0KSxlbi5zZXQuY2FsbCh0aGlzLHJbMF0sdCxlLHJbMF0pfTt2YXIgdW49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHIpe3ZhciBlPXRoaXM7dGhpcy5PPUIsdGhpcy5EPSEwLHRoaXMucHJvZHVjZT1mdW5jdGlvbihyLGksbyl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgciYmXCJmdW5jdGlvblwiIT10eXBlb2YgaSl7dmFyIHU9aTtpPXI7dmFyIGE9ZTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9dGhpczt2b2lkIDA9PT1uJiYobj11KTtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQ+MT90LTE6MCksbz0xO288dDtvKyspZVtvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gYS5wcm9kdWNlKG4sKGZ1bmN0aW9uKG4pe3ZhciB0O3JldHVybih0PWkpLmNhbGwuYXBwbHkodCxbcixuXS5jb25jYXQoZSkpfSkpfX12YXIgZjtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBpJiZuKDYpLHZvaWQgMCE9PW8mJlwiZnVuY3Rpb25cIiE9dHlwZW9mIG8mJm4oNyksdChyKSl7dmFyIGM9dyhlKSxzPU4oZSxyLHZvaWQgMCksdj0hMDt0cnl7Zj1pKHMpLHY9ITF9ZmluYWxseXt2P2coYyk6TyhjKX1yZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgUHJvbWlzZSYmZiBpbnN0YW5jZW9mIFByb21pc2U/Zi50aGVuKChmdW5jdGlvbihuKXtyZXR1cm4gaihjLG8pLFAobixjKX0pLChmdW5jdGlvbihuKXt0aHJvdyBnKGMpLG59KSk6KGooYyxvKSxQKGYsYykpfWlmKCFyfHxcIm9iamVjdFwiIT10eXBlb2Ygcil7aWYodm9pZCAwPT09KGY9aShyKSkmJihmPXIpLGY9PT1IJiYoZj12b2lkIDApLGUuRCYmZChmLCEwKSxvKXt2YXIgcD1bXSxsPVtdO2IoXCJQYXRjaGVzXCIpLk0ocixmLHAsbCksbyhwLGwpfXJldHVybiBmfW4oMjEscil9LHRoaXMucHJvZHVjZVdpdGhQYXRjaGVzPWZ1bmN0aW9uKG4scil7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgbilyZXR1cm4gZnVuY3Rpb24ocil7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheSh0PjE/dC0xOjApLG89MTtvPHQ7bysrKWlbby0xXT1hcmd1bWVudHNbb107cmV0dXJuIGUucHJvZHVjZVdpdGhQYXRjaGVzKHIsKGZ1bmN0aW9uKHIpe3JldHVybiBuLmFwcGx5KHZvaWQgMCxbcl0uY29uY2F0KGkpKX0pKX07dmFyIHQsaSxvPWUucHJvZHVjZShuLHIsKGZ1bmN0aW9uKG4scil7dD1uLGk9cn0pKTtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgUHJvbWlzZSYmbyBpbnN0YW5jZW9mIFByb21pc2U/by50aGVuKChmdW5jdGlvbihuKXtyZXR1cm5bbix0LGldfSkpOltvLHQsaV19LFwiYm9vbGVhblwiPT10eXBlb2YobnVsbD09cj92b2lkIDA6ci51c2VQcm94aWVzKSYmdGhpcy5zZXRVc2VQcm94aWVzKHIudXNlUHJveGllcyksXCJib29sZWFuXCI9PXR5cGVvZihudWxsPT1yP3ZvaWQgMDpyLmF1dG9GcmVlemUpJiZ0aGlzLnNldEF1dG9GcmVlemUoci5hdXRvRnJlZXplKX12YXIgaT1lLnByb3RvdHlwZTtyZXR1cm4gaS5jcmVhdGVEcmFmdD1mdW5jdGlvbihlKXt0KGUpfHxuKDgpLHIoZSkmJihlPVIoZSkpO3ZhciBpPXcodGhpcyksbz1OKHRoaXMsZSx2b2lkIDApO3JldHVybiBvW1FdLkM9ITAsTyhpKSxvfSxpLmZpbmlzaERyYWZ0PWZ1bmN0aW9uKHIsdCl7dmFyIGU9ciYmcltRXTtcInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WJiYoZSYmZS5DfHxuKDkpLGUuSSYmbigxMCkpO3ZhciBpPWUuQTtyZXR1cm4gaihpLHQpLFAodm9pZCAwLGkpfSxpLnNldEF1dG9GcmVlemU9ZnVuY3Rpb24obil7dGhpcy5EPW59LGkuc2V0VXNlUHJveGllcz1mdW5jdGlvbihyKXtyJiYhQiYmbigyMCksdGhpcy5PPXJ9LGkuYXBwbHlQYXRjaGVzPWZ1bmN0aW9uKG4sdCl7dmFyIGU7Zm9yKGU9dC5sZW5ndGgtMTtlPj0wO2UtLSl7dmFyIGk9dFtlXTtpZigwPT09aS5wYXRoLmxlbmd0aCYmXCJyZXBsYWNlXCI9PT1pLm9wKXtuPWkudmFsdWU7YnJlYWt9fWU+LTEmJih0PXQuc2xpY2UoZSsxKSk7dmFyIG89YihcIlBhdGNoZXNcIikuJDtyZXR1cm4gcihuKT9vKG4sdCk6dGhpcy5wcm9kdWNlKG4sKGZ1bmN0aW9uKG4pe3JldHVybiBvKG4sdCl9KSl9LGV9KCksYW49bmV3IHVuLGZuPWFuLnByb2R1Y2UsY249YW4ucHJvZHVjZVdpdGhQYXRjaGVzLmJpbmQoYW4pLHNuPWFuLnNldEF1dG9GcmVlemUuYmluZChhbiksdm49YW4uc2V0VXNlUHJveGllcy5iaW5kKGFuKSxwbj1hbi5hcHBseVBhdGNoZXMuYmluZChhbiksbG49YW4uY3JlYXRlRHJhZnQuYmluZChhbiksZG49YW4uZmluaXNoRHJhZnQuYmluZChhbik7ZXhwb3J0IGRlZmF1bHQgZm47ZXhwb3J0e3VuIGFzIEltbWVyLHBuIGFzIGFwcGx5UGF0Y2hlcyxLIGFzIGNhc3REcmFmdCwkIGFzIGNhc3RJbW11dGFibGUsbG4gYXMgY3JlYXRlRHJhZnQsUiBhcyBjdXJyZW50LEogYXMgZW5hYmxlQWxsUGx1Z2lucyxGIGFzIGVuYWJsZUVTNSxDIGFzIGVuYWJsZU1hcFNldCxUIGFzIGVuYWJsZVBhdGNoZXMsZG4gYXMgZmluaXNoRHJhZnQsZCBhcyBmcmVlemUsTCBhcyBpbW1lcmFibGUsciBhcyBpc0RyYWZ0LHQgYXMgaXNEcmFmdGFibGUsSCBhcyBub3RoaW5nLGUgYXMgb3JpZ2luYWwsZm4gYXMgcHJvZHVjZSxjbiBhcyBwcm9kdWNlV2l0aFBhdGNoZXMsc24gYXMgc2V0QXV0b0ZyZWV6ZSx2biBhcyBzZXRVc2VQcm94aWVzfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWltbWVyLmVzbS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/immer/dist/immer.esm.mjs\n"));

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["main-app"], function() { return __webpack_exec__("(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Faritra%2FWork%2FFreelance%2F3xBuilds%2Fclubhouse-clone-react%2Fapp%2Flayout.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);